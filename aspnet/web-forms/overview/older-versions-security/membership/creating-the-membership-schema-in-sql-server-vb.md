---
uid: web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
title: Tworzenie schematu członkostwa w SQL Server (VB) | Microsoft Docs
author: rick-anderson
description: Ten samouczek zaczyna się od zbadania technik dodawania niezbędnego schematu do bazy danych w celu użycia SqlMembershipProvider. Oto Wi...
ms.author: riande
ms.date: 01/18/2008
ms.assetid: 112a674d-716f-41a6-99b8-4074d65a54c0
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
msc.type: authoredcontent
ms.openlocfilehash: 96fd72d1f368b1f7947ef0a2293161d97aaf7065
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/28/2019
ms.locfileid: "74580758"
---
# <a name="creating-the-membership-schema-in-sql-server-vb"></a><span data-ttu-id="ae7c9-104">Tworzenie schematu członkostwa w programie SQL Server (VB)</span><span class="sxs-lookup"><span data-stu-id="ae7c9-104">Creating the Membership Schema in SQL Server (VB)</span></span>

<span data-ttu-id="ae7c9-105">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="ae7c9-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="ae7c9-106">[Pobierz kod](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_VB.zip) lub [Pobierz plik PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="ae7c9-106">[Download Code](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_VB.zip) or [Download PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_vb.pdf)</span></span>

> <span data-ttu-id="ae7c9-107">Ten samouczek zaczyna się od zbadania technik dodawania niezbędnego schematu do bazy danych w celu użycia SqlMembershipProvider.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-107">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the SqlMembershipProvider.</span></span> <span data-ttu-id="ae7c9-108">Po tym sprawdzimy tabele kluczy w schemacie i omawiają ich znaczenie i znaczenie.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-108">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="ae7c9-109">W tym samouczku zawarto informacje na temat sposobu informowania aplikacji ASP.NET, która powinna być używana przez platformę członkowską.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-109">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

## <a name="introduction"></a><span data-ttu-id="ae7c9-110">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="ae7c9-110">Introduction</span></span>

<span data-ttu-id="ae7c9-111">Poprzednie dwa samouczki sprawdzają się przy użyciu uwierzytelniania formularzy, aby identyfikować odwiedzających witrynę sieci Web.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-111">The previous two tutorials examined using forms authentication to identify website visitors.</span></span> <span data-ttu-id="ae7c9-112">Platforma uwierzytelniania formularzy ułatwia deweloperom rejestrowanie użytkownika w witrynie sieci Web i zapamiętanie ich na stronach na stronie za pomocą biletów uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-112">The forms authentication framework makes it easy for developers to log a user into a website and to remember them across page visits through the use of authentication tickets.</span></span> <span data-ttu-id="ae7c9-113">Klasa `FormsAuthentication` obejmuje metody generowania biletu i dodawania go do plików cookie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-113">The `FormsAuthentication` class includes methods for generating the ticket and adding it to the visitor's cookies.</span></span> <span data-ttu-id="ae7c9-114">`FormsAuthenticationModule` analizuje wszystkie żądania przychodzące i dla tych z prawidłowym biletem uwierzytelniania tworzy i kojarzy `GenericPrincipal` i obiekt `FormsIdentity` z bieżącym żądaniem.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-114">The `FormsAuthenticationModule` examines all incoming requests and, for those with a valid authentication ticket, creates and associates a `GenericPrincipal` and a `FormsIdentity` object with the current request.</span></span> <span data-ttu-id="ae7c9-115">Uwierzytelnianie formularzy jest tylko mechanizmem przyznawania biletu uwierzytelniania do osoby odwiedzającej podczas logowania się i, w przypadku kolejnych żądań, analizowanie tego biletu w celu ustalenia tożsamości użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-115">Forms authentication is merely a mechanism for granting an authentication ticket to a visitor when logging in and, on subsequent requests, parsing that ticket to determine the user's identity.</span></span> <span data-ttu-id="ae7c9-116">Aby aplikacja sieci Web obsługiwała konta użytkowników, nadal musimy wdrożyć magazyn użytkowników i dodać funkcje do sprawdzania poprawności poświadczeń, rejestrowania nowych użytkowników i wyposażono innych zadań związanych z kontem użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-116">For a web application to support user accounts, we still need to implement a user store and add functionality to validate credentials, register new users, and the myriad of other user account-related tasks.</span></span>

<span data-ttu-id="ae7c9-117">Przed ASP.NET 2,0 deweloperzy znajdowały się w punkcie zaczepienia dotyczącym wdrażania wszystkich tych zadań związanych z kontem użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-117">Prior to ASP.NET 2.0, developers were on the hook for implementing all of these user account-related tasks.</span></span> <span data-ttu-id="ae7c9-118">Na szczęście zespół ASP.NET uznał to brak i wprowadził strukturę członkostwa z ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-118">Fortunately the ASP.NET team recognized this shortcoming and introduced the Membership framework with ASP.NET 2.0.</span></span> <span data-ttu-id="ae7c9-119">Platforma członkostwa jest zestawem klas w .NET Framework, które udostępniają interfejs programistyczny służący do wykonywania podstawowych zadań związanych z kontem użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-119">The Membership framework is a set of classes in the .NET Framework that provide a programmatic interface for accomplishing core user account-related tasks.</span></span> <span data-ttu-id="ae7c9-120">Ta struktura jest skompilowana korzystającego [model dostawcy](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), dzięki czemu deweloperzy mogą podłączyć dostosowaną implementację do standardowego interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-120">This framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which allows developers to plug a customized implementation into a standardized API.</span></span>

<span data-ttu-id="ae7c9-121">Zgodnie z opisem w <a id="Tutorial1"> </a>samouczku [*podstawy zabezpieczeń i pomocy technicznej ASP.NET*](../introduction/security-basics-and-asp-net-support-vb.md) .NET Framework są dostarczane z dwoma wbudowanymi dostawcami członkostwa: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) i [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-121">As discussed in the <a id="Tutorial1"></a>[*Security Basics and ASP.NET Support*](../introduction/security-basics-and-asp-net-support-vb.md) tutorial, the .NET Framework ships with two built-in Membership providers: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) and [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span></span> <span data-ttu-id="ae7c9-122">Jak nazywa się to, `SqlMembershipProvider` używa bazy danych Microsoft SQL Server jako magazynu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-122">As its name implies, the `SqlMembershipProvider` uses a Microsoft SQL Server database as the user store.</span></span> <span data-ttu-id="ae7c9-123">Aby można było korzystać z tego dostawcy w aplikacji, musimy poinformować dostawcę o bazie danych, która ma być używana jako magazyn.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-123">In order to use this provider in an application, we need to tell the provider what database to use as the store.</span></span> <span data-ttu-id="ae7c9-124">Jak to możliwe, `SqlMembershipProvider` oczekuje, że baza danych magazynu użytkownika będzie mieć pewne tabele, widoki i procedury składowane bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-124">As you might imagine, the `SqlMembershipProvider` expects the user store database to have certain database tables, views, and stored procedures.</span></span> <span data-ttu-id="ae7c9-125">Musimy dodać ten oczekiwany schemat do wybranej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-125">We need to add this expected schema to the selected database.</span></span>

<span data-ttu-id="ae7c9-126">Ten samouczek zaczyna się od zbadania technik dodawania niezbędnego schematu do bazy danych w celu użycia `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-126">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the `SqlMembershipProvider`.</span></span> <span data-ttu-id="ae7c9-127">Po tym sprawdzimy tabele kluczy w schemacie i omawiają ich znaczenie i znaczenie.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-127">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="ae7c9-128">W tym samouczku zawarto informacje na temat sposobu informowania aplikacji ASP.NET, która powinna być używana przez platformę członkowską.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-128">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

<span data-ttu-id="ae7c9-129">Zacznijmy!</span><span class="sxs-lookup"><span data-stu-id="ae7c9-129">Let's get started!</span></span>

## <a name="step-1-deciding-where-to-place-the-user-store"></a><span data-ttu-id="ae7c9-130">Krok 1. decydowanie o miejscu, w którym ma zostać umieszczony magazyn użytkownika</span><span class="sxs-lookup"><span data-stu-id="ae7c9-130">Step 1: Deciding Where to Place the User Store</span></span>

<span data-ttu-id="ae7c9-131">Dane aplikacji ASP.NET są często przechowywane w wielu tabelach w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-131">An ASP.NET application's data is commonly stored in a number of tables in a database.</span></span> <span data-ttu-id="ae7c9-132">Podczas implementowania schematu bazy danych `SqlMembershipProvider` należy zdecydować, czy umieścić schemat członkostwa w tej samej bazie danych co dane aplikacji, czy w alternatywnej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-132">When implementing the `SqlMembershipProvider` database schema we must decide whether to place the Membership schema in the same database as the application data or in an alternate database.</span></span>

<span data-ttu-id="ae7c9-133">Zaleca się lokalizowanie schematu członkostwa w tej samej bazie danych co dane aplikacji z następujących powodów:</span><span class="sxs-lookup"><span data-stu-id="ae7c9-133">I recommend locating the Membership schema in the same database as the application data for the following reasons:</span></span>

- <span data-ttu-id="ae7c9-134">**Łatwość konserwacji** aplikacji, której dane są hermetyzowane w jednej bazie danych, ułatwiają zrozumienie, konserwację i wdrażanie aplikacji, która ma dwie osobne bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-134">**Maintainability** � an application whose data is encapsulated in one database is easier to understand, maintain, and deploy than an application that has two separate databases.</span></span>
- <span data-ttu-id="ae7c9-135">**Integralność relacyjna** poprzez lokalizowanie tabel związanych z członkostwem w tej samej bazie danych co tabele aplikacji możliwe jest ustanowienie [ograniczeń klucza obcego](http://en.wikipedia.org/wiki/Foreign_key) między kluczami podstawowymi w tabelach związanych z członkostwem i powiązanych tabelach aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-135">**Relational Integrity** � by locating the Membership-related tables in the same database as the application tables it is possible to establish [foreign key constraints](http://en.wikipedia.org/wiki/Foreign_key) between the primary keys in the Membership-related tables and related application tables.</span></span>

<span data-ttu-id="ae7c9-136">Oddzielanie danych ze sklepu użytkownika i aplikacji do oddzielnych baz danych ma sens tylko w przypadku wielu aplikacji, które używają oddzielnych baz danych, ale muszą mieć wspólny magazyn użytkowników.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-136">Decoupling the user store and application data into separate databases only makes sense if you have multiple applications that each use separate databases, but need to share a common user store.</span></span>

### <a name="creating-a-database"></a><span data-ttu-id="ae7c9-137">Tworzenie bazy danych</span><span class="sxs-lookup"><span data-stu-id="ae7c9-137">Creating a Database</span></span>

<span data-ttu-id="ae7c9-138">Aplikacja, która została zbudowana, ponieważ drugi samouczek nie wymagał jeszcze bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-138">The application we have been building since the second tutorial has not yet needed a database.</span></span> <span data-ttu-id="ae7c9-139">W przypadku magazynu użytkowników potrzebujemy tej usługi już teraz.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-139">We need one now, however, for the user store.</span></span> <span data-ttu-id="ae7c9-140">Utwórzmy ją, a następnie dodamy do niej schemat wymagany przez dostawcę `SqlMembershipProvider` (zobacz krok 2).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-140">Let's create one and then add to it the schema required by the `SqlMembershipProvider` provider (see Step 2).</span></span>

> [!NOTE]
> <span data-ttu-id="ae7c9-141">W tej serii samouczków będziemy używać bazy danych [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) do przechowywania tabel aplikacji i schematu `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-141">Throughout this tutorial series we will be using a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database to store our application tables and the `SqlMembershipProvider` schema.</span></span> <span data-ttu-id="ae7c9-142">Ta decyzja została podjęta z dwóch powodów: najpierw z powodu jej bezpłatnej wersji — wersja Express jest najbardziej dostępną wersją SQL Server 2005; Ponadto bazy danych SQL Server 2005 Express Edition mogą być umieszczane bezpośrednio w folderze `App_Data` aplikacji sieci Web, dzięki czemu cinch bazę danych i aplikację sieci Web w jednym pliku ZIP i wdrożyć ją ponownie bez żadnych specjalnych instrukcji instalacji ani opcji konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-142">This decision was made for two reasons: first, due to its cost - free - the Express Edition is the most readably accessible version of SQL Server 2005; second, SQL Server 2005 Express Edition databases can be placed directly in the web application's `App_Data` folder, making it a cinch to package the database and web application together in one ZIP file and to redeploy it without any special setup instructions or configuration options.</span></span> <span data-ttu-id="ae7c9-143">Jeśli wolisz korzystać z usługi SQL Server w wersji innej niż Express, śmiało.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-143">If you'd prefer to follow along using a non-Express Edition version of SQL Server, feel free.</span></span> <span data-ttu-id="ae7c9-144">Kroki są praktycznie identyczne.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-144">The steps are virtually identical.</span></span> <span data-ttu-id="ae7c9-145">Schemat `SqlMembershipProvider` będzie działał z dowolnymi wersjami Microsoft SQL Server 2000 i.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-145">The `SqlMembershipProvider` schema will work with any version of Microsoft SQL Server 2000 and up.</span></span>

<span data-ttu-id="ae7c9-146">W Eksplorator rozwiązań kliknij prawym przyciskiem myszy folder `App_Data` i wybierz polecenie Dodaj nowy element.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-146">From the Solution Explorer, right-click on the `App_Data` folder and choose to Add New Item.</span></span> <span data-ttu-id="ae7c9-147">(Jeśli nie widzisz folderu `App_Data` w projekcie, kliknij prawym przyciskiem myszy projekt w Eksplorator rozwiązań, wybierz polecenie Dodaj folder ASP.NET i wybierz pozycję `App_Data`). W oknie dialogowym Dodaj nowy element wybierz opcję dodania nowego SQL Database o nazwie `SecurityTutorials.mdf`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-147">(If you do not see an `App_Data` folder in your project, right-click on the project in Solution Explorer, select Add ASP.NET Folder, and pick `App_Data`.) From the Add New Item dialog box, choose to add a new SQL Database named `SecurityTutorials.mdf`.</span></span> <span data-ttu-id="ae7c9-148">W tym samouczku dodamy schemat `SqlMembershipProvider` do tej bazy danych. w kolejnych samouczkach utworzymy dodatkowe tabele do przechwytywania danych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-148">In this tutorial we will add the `SqlMembershipProvider` schema to this database; in subsequent tutorials we will create additional tables to capture our application data.</span></span>

<span data-ttu-id="ae7c9-149">[![dodać nową SQL Database o nazwie SecurityTutorials. mdf do folderu App_Data](creating-the-membership-schema-in-sql-server-vb/_static/image2.png)](creating-the-membership-schema-in-sql-server-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="ae7c9-149">[![Add a New SQL Database Named SecurityTutorials.mdf Database to the App_Data Folder](creating-the-membership-schema-in-sql-server-vb/_static/image2.png)](creating-the-membership-schema-in-sql-server-vb/_static/image1.png)</span></span>

<span data-ttu-id="ae7c9-150">**Rysunek 1**. dodawanie nowego SQL Database o nazwie `SecurityTutorials.mdf` Database do folderu `App_Data` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-the-membership-schema-in-sql-server-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="ae7c9-150">**Figure 1**: Add a New SQL Database Named `SecurityTutorials.mdf` Database to the `App_Data` Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image3.png))</span></span>

<span data-ttu-id="ae7c9-151">Dodanie bazy danych do folderu `App_Data` powoduje automatyczne uwzględnienie jej w widoku Eksplorator bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-151">Adding a database to the `App_Data` folder automatically includes it in the Database Explorer view.</span></span> <span data-ttu-id="ae7c9-152">(W wersji innej niż Express programu Visual Studio Eksplorator bazy danych jest nazywana Eksplorator serweraą). Przejdź do Eksplorator bazy danych i rozwiń dodaną `SecurityTutorials` bazę danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-152">(In the non-Express Edition version of Visual Studio, the Database Explorer is called the Server Explorer.) Go to the Database Explorer and expand the just-added `SecurityTutorials` database.</span></span> <span data-ttu-id="ae7c9-153">Jeśli nie widzisz Eksplorator bazy danych na ekranie, przejdź do menu Widok i wybierz polecenie Eksplorator bazy danych lub naciśnij klawisze CTRL + ALT + S.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-153">If you do not see the Database Explorer on screen, go to the View menu and choose Database Explorer, or hit Ctrl+Alt+S.</span></span> <span data-ttu-id="ae7c9-154">Jak pokazano na rysunku 2, `SecurityTutorials` baza danych jest pusta — nie zawiera żadnych tabel, brak widoków ani procedur składowanych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-154">As Figure 2 shows, the `SecurityTutorials` database is empty - it contains no tables, no views, and no stored procedures.</span></span>

<span data-ttu-id="ae7c9-155">[![baza danych SecurityTutorials jest obecnie pusta](creating-the-membership-schema-in-sql-server-vb/_static/image5.png)](creating-the-membership-schema-in-sql-server-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="ae7c9-155">[![The SecurityTutorials Database is Currently Empty](creating-the-membership-schema-in-sql-server-vb/_static/image5.png)](creating-the-membership-schema-in-sql-server-vb/_static/image4.png)</span></span>

<span data-ttu-id="ae7c9-156">**Rysunek 2**. baza danych `SecurityTutorials` jest obecnie pusta ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-the-membership-schema-in-sql-server-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="ae7c9-156">**Figure 2**: The `SecurityTutorials` Database is Currently Empty ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image6.png))</span></span>

## <a name="step-2-adding-thesqlmembershipproviderschema-to-the-database"></a><span data-ttu-id="ae7c9-157">Krok 2. Dodawanie schematu`SqlMembershipProvider`do bazy danych</span><span class="sxs-lookup"><span data-stu-id="ae7c9-157">Step 2: Adding the`SqlMembershipProvider`Schema to the Database</span></span>

<span data-ttu-id="ae7c9-158">`SqlMembershipProvider` wymaga zainstalowania określonego zestawu tabel, widoków i procedur składowanych w bazie danych magazynu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-158">The `SqlMembershipProvider` requires a particular set of tables, views, and stored procedures to be installed in the user store database.</span></span> <span data-ttu-id="ae7c9-159">Te wymagane obiekty bazy danych można dodać za pomocą [narzędzia`aspnet_regsql.exe`](https://msdn.microsoft.com/library/ms229862.aspx).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-159">These requisite database objects can be added using the [`aspnet_regsql.exe` tool](https://msdn.microsoft.com/library/ms229862.aspx).</span></span> <span data-ttu-id="ae7c9-160">Ten plik znajduje się w folderze `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-160">This file is located in the `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder.</span></span>

> [!NOTE]
> <span data-ttu-id="ae7c9-161">Narzędzie `aspnet_regsql.exe` oferuje zarówno funkcję wiersza polecenia, jak i graficzny interfejs użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-161">The `aspnet_regsql.exe` tool offers both command line functionality and a graphical user interface.</span></span> <span data-ttu-id="ae7c9-162">Interfejs graficzny jest bardziej przyjazny dla użytkownika i jest tym, co będziemy analizować w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-162">The graphical interface is more user friendly and is what we will examine in this tutorial.</span></span> <span data-ttu-id="ae7c9-163">Interfejs wiersza polecenia jest przydatny, gdy dodawanie schematu `SqlMembershipProvider` musi być zautomatyzowane, na przykład w skryptach kompilacji lub scenariuszach zautomatyzowanych testów.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-163">The command line interface is useful when the addition of the `SqlMembershipProvider` schema needs to be automated, such as in build scripts or automated testing scenarios.</span></span>

<span data-ttu-id="ae7c9-164">Narzędzie `aspnet_regsql.exe` służy do dodawania lub usuwania *usług aplikacji ASP.NET* w określonej SQL Server bazie danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-164">The `aspnet_regsql.exe` tool is used to add or remove *ASP.NET application services* to a specified SQL Server database.</span></span> <span data-ttu-id="ae7c9-165">Usługi aplikacji ASP.NET obejmują schematy dla `SqlMembershipProvider` i `SqlRoleProvider`, a także schematy dla dostawców opartych na bazie danych SQL dla innych platform ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-165">The ASP.NET application services encompass the schemas for the `SqlMembershipProvider` and `SqlRoleProvider`, along with the schemas for the SQL-based providers for other ASP.NET 2.0 frameworks.</span></span> <span data-ttu-id="ae7c9-166">Musimy dostarczyć dwie bity informacji do narzędzia `aspnet_regsql.exe`:</span><span class="sxs-lookup"><span data-stu-id="ae7c9-166">We need to provide two bits of information to the `aspnet_regsql.exe` tool:</span></span>

- <span data-ttu-id="ae7c9-167">Czy chcesz dodać lub usunąć usługi aplikacji, i</span><span class="sxs-lookup"><span data-stu-id="ae7c9-167">Whether we want to add or remove application services, and</span></span>
- <span data-ttu-id="ae7c9-168">Baza danych, z której chcesz dodać lub usunąć schemat usług aplikacji</span><span class="sxs-lookup"><span data-stu-id="ae7c9-168">The database from which to add or remove the application services schema</span></span>

<span data-ttu-id="ae7c9-169">W przypadku monitowania o użycie bazy danych narzędzie `aspnet_regsql.exe` prosi nas o podanie nazwy serwera, na którym znajduje się baza danych, poświadczenia zabezpieczeń służące do nawiązywania połączenia z bazą danych i nazwę bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-169">In prompting for the database to use, the `aspnet_regsql.exe` tool asks us to provide the name of the server the database resides on, the security credentials for connecting to the database, and the database name.</span></span> <span data-ttu-id="ae7c9-170">W przypadku korzystania z wersji innej niż Express SQL Server należy znać te informacje, ponieważ są to te same informacje, które należy podać za pośrednictwem parametrów połączenia podczas pracy z bazą danych za pośrednictwem strony sieci Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-170">If you are using the non-Express Edition of SQL Server, you should already know this information, as it is the same information you must provide through a connection string when working with the database through an ASP.NET web page.</span></span> <span data-ttu-id="ae7c9-171">Jednak określenie serwera i nazwy bazy danych w przypadku korzystania z SQL Server 2005 Express Editionj bazy danych w folderze `App_Data`, jest to nieco bardziej zaliczane.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-171">Determining the server and database name when using a SQL Server 2005 Express Edition database in the `App_Data` folder, however, is a bit more involved.</span></span>

<span data-ttu-id="ae7c9-172">W poniższej sekcji przedstawiono prostą metodę określania nazwy serwera i bazy danych bazy danych SQL Server 2005 Express Edition w folderze `App_Data`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-172">The following section examines a straightforward way for specifying the server and database name for a SQL Server 2005 Express Edition database in the `App_Data` folder.</span></span> <span data-ttu-id="ae7c9-173">Jeśli nie używasz SQL Server 2005 Express Edition nie możesz przejść do sekcji Instalowanie Usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-173">If you are not using SQL Server 2005 Express Edition feel free to skip ahead to the Installing the Application Services section.</span></span>

### <a name="determining-the-server-and-database-name-for-a-sql-server-2005-express-edition-database-in-theapp_datafolder"></a><span data-ttu-id="ae7c9-174">Określanie nazwy serwera i bazy danych dla bazy danych SQL Server 2005 Express Edition w folderze`App_Data`</span><span class="sxs-lookup"><span data-stu-id="ae7c9-174">Determining the Server and Database Name for a SQL Server 2005 Express Edition Database in the`App_Data`Folder</span></span>

<span data-ttu-id="ae7c9-175">Aby użyć narzędzia `aspnet_regsql.exe` musi znać nazwy serwera i bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-175">In order to use the `aspnet_regsql.exe` tool we need to know the server and database names.</span></span> <span data-ttu-id="ae7c9-176">Nazwa serwera jest `localhost\InstanceName`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-176">The server name is `localhost\InstanceName`.</span></span> <span data-ttu-id="ae7c9-177">Najprawdopodobniej nazwa *InstanceName* jest `SQLExpress`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-177">Most likely, the *InstanceName* is `SQLExpress`.</span></span> <span data-ttu-id="ae7c9-178">Jeśli jednak zainstalowano SQL Server 2005 Express Edition ręcznie (oznacza to, że nie został on zainstalowany automatycznie podczas instalacji programu Visual Studio), można wybrać inną nazwę wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-178">However, if you installed SQL Server 2005 Express Edition manually (that is, you did not install it automatically while installing Visual Studio), then it is possible that you selected a different instance name.</span></span>

<span data-ttu-id="ae7c9-179">Nazwa bazy danych to bit trickier do określenia.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-179">The database name is a bit trickier to determine.</span></span> <span data-ttu-id="ae7c9-180">Bazy danych w folderze `App_Data` zwykle mają nazwę bazy danych, która zawiera [globalnie unikatowy identyfikator](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) wraz ze ścieżką do pliku bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-180">Databases in the `App_Data` folder typically have a database name that includes a [globally unique identifier](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) along with the path to the database file.</span></span> <span data-ttu-id="ae7c9-181">Musimy określić tę nazwę bazy danych w celu dodania schematu usług aplikacji za pomocą `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-181">We need to determine this database name in order to add the application services schema through `aspnet_regsql.exe`.</span></span>

<span data-ttu-id="ae7c9-182">Najprostszym sposobem sprawdzenia nazwy bazy danych jest przeanalizowanie jej za pomocą SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-182">The easiest way to ascertain the database name is to examine it through SQL Server Management Studio.</span></span> <span data-ttu-id="ae7c9-183">SQL Server Management Studio udostępnia interfejs graficzny służący do zarządzania bazami danych SQL Server 2005, ale nie jest dostarczany z wersją Express SQL Server 2005.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-183">SQL Server Management Studio provides a graphical interface for managing SQL Server 2005 databases, but it does not ship with the Express Edition of SQL Server 2005.</span></span> <span data-ttu-id="ae7c9-184">Dobrą wiadomośćą jest [możliwość pobrania](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) bezpłatnej wersji Express SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-184">The good news is that [you can download](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) the free Express Edition of SQL Server Management Studio.</span></span>

> [!NOTE]
> <span data-ttu-id="ae7c9-185">Jeśli na pulpicie jest również zainstalowana wersja programu w wersji innej niż Express SQL Server 2005, zostanie prawdopodobnie zainstalowana pełna wersja Management Studio.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-185">If you also have a non-Express Edition version of SQL Server 2005 installed on your desktop then the full version of Management Studio is likely installed.</span></span> <span data-ttu-id="ae7c9-186">Możesz użyć pełnej wersji, aby określić nazwę bazy danych, wykonując te same czynności, które opisano poniżej dla wersji Express.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-186">You can use the full version to determine the database name, following the same steps as outlined below for the Express Edition.</span></span>

<span data-ttu-id="ae7c9-187">Zacznij od zamykania programu Visual Studio, aby upewnić się, że wszystkie blokady narzucone przez program Visual Studio w pliku bazy danych są zamknięte.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-187">Start by closing Visual Studio to ensure that any locks imposed by Visual Studio on the database file are closed.</span></span> <span data-ttu-id="ae7c9-188">Następnie uruchom SQL Server Management Studio i nawiąż połączenie z bazą danych `localhost\InstanceName` SQL Server 2005 Express Edition.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-188">Next, launch SQL Server Management Studio and connect to the `localhost\InstanceName` database for SQL Server 2005 Express Edition.</span></span> <span data-ttu-id="ae7c9-189">Jak wspomniano wcześniej, prawdopodobnie nazwa wystąpienia jest `SQLExpress`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-189">As noted earlier, chances are the instance name is `SQLExpress`.</span></span> <span data-ttu-id="ae7c9-190">Dla opcji uwierzytelnianie wybierz pozycję Uwierzytelnianie systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-190">For the Authentication option, select Windows Authentication.</span></span>

<span data-ttu-id="ae7c9-191">[![połączyć się z wystąpieniem SQL Server 2005 Express Edition](creating-the-membership-schema-in-sql-server-vb/_static/image8.png)](creating-the-membership-schema-in-sql-server-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="ae7c9-191">[![Connect to the SQL Server 2005 Express Edition Instance](creating-the-membership-schema-in-sql-server-vb/_static/image8.png)](creating-the-membership-schema-in-sql-server-vb/_static/image7.png)</span></span>

<span data-ttu-id="ae7c9-192">**Rysunek 3**. Nawiązywanie połączenia z wystąpieniem SQL Server 2005 Express Edition ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-the-membership-schema-in-sql-server-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="ae7c9-192">**Figure 3**: Connect to the SQL Server 2005 Express Edition Instance ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image9.png))</span></span>

<span data-ttu-id="ae7c9-193">Po nawiązaniu połączenia z wystąpieniem SQL Server 2005 Express Edition Management Studio wyświetla foldery baz danych, ustawień zabezpieczeń, obiektów serwera i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-193">After connecting to the SQL Server 2005 Express Edition instance, Management Studio displays folders for the Databases, the Security settings, the Server Objects, and so on.</span></span> <span data-ttu-id="ae7c9-194">Po rozwinięciu karty bazy danych zobaczysz, że baza danych `SecurityTutorials.mdf` *nie* jest zarejestrowana w wystąpieniu bazy danych — musimy najpierw dołączyć bazę danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-194">If you expand the Databases tab you will see that the `SecurityTutorials.mdf` database is *not* registered in the database instance - we need to attach the database first.</span></span>

<span data-ttu-id="ae7c9-195">Kliknij prawym przyciskiem myszy folder Databases, a następnie wybierz polecenie Dołącz z menu kontekstowego.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-195">Right-click on the Databases folder and choose Attach from the context menu.</span></span> <span data-ttu-id="ae7c9-196">Zostanie wyświetlone okno dialogowe Dołączanie baz danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-196">This will display the Attach Databases dialog box.</span></span> <span data-ttu-id="ae7c9-197">W tym miejscu kliknij przycisk Dodaj, przejdź do bazy danych `SecurityTutorials.mdf` i kliknij przycisk OK.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-197">From here, click the Add button, browse to the `SecurityTutorials.mdf` database, and click OK.</span></span> <span data-ttu-id="ae7c9-198">Rysunek 4 przedstawia okno dialogowe Dołączanie baz danych po wybraniu bazy danych `SecurityTutorials.mdf`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-198">Figure 4 shows the Attach Databases dialog box after the `SecurityTutorials.mdf` database has been selected.</span></span> <span data-ttu-id="ae7c9-199">Rysunek 5 zawiera Management Studio Eksplorator obiektów po pomyślnym dołączeniu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-199">Figure 5 shows Management Studio's Object Explorer after the database has been successfully attached.</span></span>

<span data-ttu-id="ae7c9-200">[![dołączyć bazę danych SecurityTutorials. mdf](creating-the-membership-schema-in-sql-server-vb/_static/image11.png)](creating-the-membership-schema-in-sql-server-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="ae7c9-200">[![Attach the SecurityTutorials.mdf Database](creating-the-membership-schema-in-sql-server-vb/_static/image11.png)](creating-the-membership-schema-in-sql-server-vb/_static/image10.png)</span></span>

<span data-ttu-id="ae7c9-201">**Ilustracja 4**. dołączanie bazy danych `SecurityTutorials.mdf` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-the-membership-schema-in-sql-server-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="ae7c9-201">**Figure 4**: Attach the `SecurityTutorials.mdf` Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image12.png))</span></span>

<span data-ttu-id="ae7c9-202">[![baza danych SecurityTutorials. mdf pojawia się w folderze Databases](creating-the-membership-schema-in-sql-server-vb/_static/image14.png)](creating-the-membership-schema-in-sql-server-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="ae7c9-202">[![The SecurityTutorials.mdf Database Appears in the Databases Folder](creating-the-membership-schema-in-sql-server-vb/_static/image14.png)](creating-the-membership-schema-in-sql-server-vb/_static/image13.png)</span></span>

<span data-ttu-id="ae7c9-203">**Rysunek 5**. baza danych `SecurityTutorials.mdf` zostanie wyświetlona w folderze bazy danych ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-the-membership-schema-in-sql-server-vb/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="ae7c9-203">**Figure 5**: The `SecurityTutorials.mdf` Database Appears in the Databases Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image15.png))</span></span>

<span data-ttu-id="ae7c9-204">Jak pokazano na rysunku 5, baza danych `SecurityTutorials.mdf` ma raczej nazwę abstruse.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-204">As Figure 5 shows, the `SecurityTutorials.mdf` database has a rather abstruse name.</span></span> <span data-ttu-id="ae7c9-205">Zmieńmy ją na bardziej zapamiętaną nazwę (i łatwiejszy do pisania).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-205">Let's change it to a more memorable (and easier to type) name.</span></span> <span data-ttu-id="ae7c9-206">Kliknij prawym przyciskiem myszy bazę danych, wybierz polecenie Zmień nazwę z menu kontekstowego i zmień jego nazwę na `SecurityTutorialsDatabase`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-206">Right-click on the database, choose Rename from the context menu, and rename it `SecurityTutorialsDatabase`.</span></span> <span data-ttu-id="ae7c9-207">Nie powoduje to zmiany nazwy pliku, a tylko nazwy, która jest wykorzystywana przez bazę do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-207">This does not change the filename, just the name the database uses to identify itself to SQL Server.</span></span>

<span data-ttu-id="ae7c9-208">[![zmienić nazwy bazy danych na SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-vb/_static/image17.png)](creating-the-membership-schema-in-sql-server-vb/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="ae7c9-208">[![Rename the Database to SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-vb/_static/image17.png)](creating-the-membership-schema-in-sql-server-vb/_static/image16.png)</span></span>

<span data-ttu-id="ae7c9-209">**Ilustracja 6**. zmiana nazwy bazy danych na `SecurityTutorialsDatabase`([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-the-membership-schema-in-sql-server-vb/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="ae7c9-209">**Figure 6**: Rename the Database to `SecurityTutorialsDatabase`([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image18.png))</span></span>

<span data-ttu-id="ae7c9-210">W tym momencie wiemy, że nazwy serwera i bazy danych dla `SecurityTutorials.mdf` pliku bazy danych: odpowiednio `localhost\InstanceName` i `SecurityTutorialsDatabase`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-210">At this point we know the server and database names for the `SecurityTutorials.mdf` database file: `localhost\InstanceName` and `SecurityTutorialsDatabase`, respectively.</span></span> <span data-ttu-id="ae7c9-211">Teraz można przystąpić do instalowania usług aplikacji za pomocą narzędzia `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-211">We are now ready to install the application services through the `aspnet_regsql.exe` tool.</span></span>

### <a name="installing-the-application-services"></a><span data-ttu-id="ae7c9-212">Instalowanie Usługi aplikacji</span><span class="sxs-lookup"><span data-stu-id="ae7c9-212">Installing the Application Services</span></span>

<span data-ttu-id="ae7c9-213">Aby uruchomić narzędzie `aspnet_regsql.exe`, przejdź do menu Start i wybierz polecenie Uruchom.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-213">To launch the `aspnet_regsql.exe` tool, go to the start menu and choose Run.</span></span> <span data-ttu-id="ae7c9-214">Wprowadź `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` w polu tekstowym, a następnie kliknij przycisk OK.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-214">Enter `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` into the textbox and click OK.</span></span> <span data-ttu-id="ae7c9-215">Alternatywnie możesz użyć Eksploratora Windows, aby przejść do odpowiedniego folderu i kliknąć dwukrotnie plik `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-215">Alternatively, you can use Windows Explorer to drill down to the appropriate folder and double-click the `aspnet_regsql.exe` file.</span></span> <span data-ttu-id="ae7c9-216">Każde podejście będzie w tej samej postaci netto.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-216">Either approach will net the same results.</span></span>

<span data-ttu-id="ae7c9-217">Uruchomienie narzędzia `aspnet_regsql.exe` bez argumentów wiersza polecenia uruchamia Kreatora instalacji programu ASP.NET SQL Server graficzny interfejs użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-217">Running the `aspnet_regsql.exe` tool without any command line arguments launches the ASP.NET SQL Server Setup Wizard graphical user interface.</span></span> <span data-ttu-id="ae7c9-218">Kreator ułatwia dodawanie lub usuwanie usług aplikacji ASP.NET w określonej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-218">The wizard makes it easy to add or remove the ASP.NET application services on a specified database.</span></span> <span data-ttu-id="ae7c9-219">Pierwszy ekran kreatora przedstawiony na rysunku 7 zawiera opis przeznaczenia tego narzędzia.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-219">The first screen of the wizard, shown in Figure 7, describes the purpose of the tool.</span></span>

<span data-ttu-id="ae7c9-220">[![użyć Kreatora instalacji programu ASP.NET SQL Server, aby dodać schemat członkostwa](creating-the-membership-schema-in-sql-server-vb/_static/image20.png)](creating-the-membership-schema-in-sql-server-vb/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="ae7c9-220">[![Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema](creating-the-membership-schema-in-sql-server-vb/_static/image20.png)](creating-the-membership-schema-in-sql-server-vb/_static/image19.png)</span></span>

<span data-ttu-id="ae7c9-221">**Rysunek 7**. Użyj kreatora instalacji SQL Server ASP.NET, aby dodać schemat członkostwa ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-the-membership-schema-in-sql-server-vb/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="ae7c9-221">**Figure 7**: Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image21.png))</span></span>

<span data-ttu-id="ae7c9-222">Drugi krok w Kreatorze pyta o to, czy chcemy dodać usługi aplikacji, czy je usunąć.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-222">The second step in the wizard asks us whether we want to add the application services or remove them.</span></span> <span data-ttu-id="ae7c9-223">Ponieważ chcemy dodać tabele, widoki i procedury składowane niezbędne do `SqlMembershipProvider`, wybierz opcję Konfiguruj SQL Server dla usług aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-223">Since we want to add the tables, views, and stored procedures necessary for the `SqlMembershipProvider`, choose the Configure SQL Server for application services option.</span></span> <span data-ttu-id="ae7c9-224">Później, jeśli chcesz usunąć ten schemat z bazy danych, uruchom ponownie tego kreatora, ale zamiast tego wybierz opcję Usuń informacje o usługach aplikacji z istniejącej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-224">Later, if you want to remove this schema from your database, re-run this wizard, but instead choose the Remove application services information from an existing database option.</span></span>

<span data-ttu-id="ae7c9-225">[![wybrać opcję Konfiguruj SQL Server dla Usługi aplikacji](creating-the-membership-schema-in-sql-server-vb/_static/image23.png)](creating-the-membership-schema-in-sql-server-vb/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="ae7c9-225">[![Choose the Configure SQL Server for Application Services Option](creating-the-membership-schema-in-sql-server-vb/_static/image23.png)](creating-the-membership-schema-in-sql-server-vb/_static/image22.png)</span></span>

<span data-ttu-id="ae7c9-226">**Ilustracja 8**. Wybierz opcję Skonfiguruj SQL Server dla usługi aplikacji ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-the-membership-schema-in-sql-server-vb/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="ae7c9-226">**Figure 8**: Choose the Configure SQL Server for Application Services Option ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image24.png))</span></span>

<span data-ttu-id="ae7c9-227">Trzeci krok powoduje wyświetlanie informacji o bazie danych: Nazwa serwera, informacje o uwierzytelnianiu i nazwa bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-227">The third step prompts for the database information: the server name, authentication information, and the database name.</span></span> <span data-ttu-id="ae7c9-228">Jeśli podczas pracy z tym samouczkiem dodano `SecurityTutorials.mdf` bazę danych do `App_Data`, dołączono ją do `localhost\InstanceName`i zmieniono jej nazwę na `SecurityTutorialsDatabase`, a następnie użyj następujących wartości:</span><span class="sxs-lookup"><span data-stu-id="ae7c9-228">If you have been following along with this tutorial and have added the `SecurityTutorials.mdf` database to `App_Data`, attached it to `localhost\InstanceName`, and renamed it to `SecurityTutorialsDatabase`, then use the following values:</span></span>

- <span data-ttu-id="ae7c9-229">Serwer: `localhost\InstanceName`</span><span class="sxs-lookup"><span data-stu-id="ae7c9-229">Server: `localhost\InstanceName`</span></span>
- <span data-ttu-id="ae7c9-230">Uwierzytelnianie systemu Windows</span><span class="sxs-lookup"><span data-stu-id="ae7c9-230">Windows authentication</span></span>
- <span data-ttu-id="ae7c9-231">Baza danych: `SecurityTutorialsDatabase`</span><span class="sxs-lookup"><span data-stu-id="ae7c9-231">Database: `SecurityTutorialsDatabase`</span></span>

<span data-ttu-id="ae7c9-232">[![wprowadzić informacje o bazie danych](creating-the-membership-schema-in-sql-server-vb/_static/image26.png)](creating-the-membership-schema-in-sql-server-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="ae7c9-232">[![Enter the Database Information](creating-the-membership-schema-in-sql-server-vb/_static/image26.png)](creating-the-membership-schema-in-sql-server-vb/_static/image25.png)</span></span>

<span data-ttu-id="ae7c9-233">**Ilustracja 9**. Wprowadzanie informacji o bazie danych ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-the-membership-schema-in-sql-server-vb/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="ae7c9-233">**Figure 9**: Enter the Database Information ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image27.png))</span></span>

<span data-ttu-id="ae7c9-234">Po wprowadzeniu informacji o bazie danych kliknij przycisk Dalej.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-234">After entering the database information, click Next.</span></span> <span data-ttu-id="ae7c9-235">Ostatni krok podsumowuje kroki, które zostaną wykonane.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-235">The final step summarizes the steps that will be taken.</span></span> <span data-ttu-id="ae7c9-236">Kliknij przycisk Dalej, aby zainstalować usługi aplikacji, a następnie Zakończ pracę z kreatorem.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-236">Click Next to install the application services and then Finish to complete the wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="ae7c9-237">Jeśli użyto Management Studio, aby dołączyć bazę danych i zmienić nazwę pliku bazy danych, pamiętaj o odłączeniu bazy danych i zamknięciu Management Studio przed ponownym otwarciem programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-237">If you used Management Studio to attach the database and rename the database file, be sure to detach the database and close Management Studio before reopening Visual Studio.</span></span> <span data-ttu-id="ae7c9-238">Aby odłączyć bazę danych `SecurityTutorialsDatabase`, kliknij prawym przyciskiem myszy nazwę bazy danych, a następnie w menu zadania wybierz polecenie Odłącz.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-238">To detach the `SecurityTutorialsDatabase` database, right-click on the database name and, from the Tasks menu, choose Detach.</span></span>

<span data-ttu-id="ae7c9-239">Po zakończeniu pracy Kreatora Wróć do programu Visual Studio i przejdź do Eksplorator bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-239">Upon completion of the wizard, return to Visual Studio and navigate to the Database Explorer.</span></span> <span data-ttu-id="ae7c9-240">Rozwiń folder tabele.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-240">Expand the Tables folder.</span></span> <span data-ttu-id="ae7c9-241">Powinna zostać wyświetlona seria tabel, których nazwy rozpoczynają się od prefiksu `aspnet_`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-241">You should see a series of tables whose names start with the prefix `aspnet_`.</span></span> <span data-ttu-id="ae7c9-242">Podobnie różne widoki i procedury składowane można znaleźć w folderach widoki i procedury składowane.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-242">Likewise, a variety of views and stored procedures can be found under the Views and Stored Procedures folders.</span></span> <span data-ttu-id="ae7c9-243">Te obiekty bazy danych tworzą schemat usług aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-243">These database objects make up the application services schema.</span></span> <span data-ttu-id="ae7c9-244">W kroku 3 sprawdzimy obiekty z bazami danych specyficznych dla członkostwa i ról.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-244">We will examine the membership- and role-specific database objects in Step 3.</span></span>

<span data-ttu-id="ae7c9-245">[![różne tabele, widoki i procedury składowane zostały dodane do bazy danych](creating-the-membership-schema-in-sql-server-vb/_static/image29.png)](creating-the-membership-schema-in-sql-server-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="ae7c9-245">[![A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database](creating-the-membership-schema-in-sql-server-vb/_static/image29.png)](creating-the-membership-schema-in-sql-server-vb/_static/image28.png)</span></span>

<span data-ttu-id="ae7c9-246">**Ilustracja 10**. do bazy danych dodano różne tabele, widoki i procedury składowane ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-the-membership-schema-in-sql-server-vb/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="ae7c9-246">**Figure 10**: A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image30.png))</span></span>

> [!NOTE]
> <span data-ttu-id="ae7c9-247">Graficzny interfejs użytkownika narzędzia `aspnet_regsql.exe` instaluje cały schemat usług aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-247">The `aspnet_regsql.exe` tool's graphical user interface installs the entire application services schema.</span></span> <span data-ttu-id="ae7c9-248">Ale podczas wykonywania `aspnet_regsql.exe` z poziomu wiersza polecenia można określić, jakie składniki usług aplikacji zainstalować (lub usunąć).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-248">But when executing `aspnet_regsql.exe` from the command-line you can specify what particular application services components to install (or remove).</span></span> <span data-ttu-id="ae7c9-249">W związku z tym, jeśli chcesz dodać tylko tabele, widoki i procedury składowane niezbędne dla dostawców `SqlMembershipProvider` i `SqlRoleProvider`, uruchom `aspnet_regsql.exe` z wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-249">Therefore, if you want to add just the tables, views, and stored procedures necessary for the `SqlMembershipProvider` and `SqlRoleProvider` providers, run `aspnet_regsql.exe` from the command-line.</span></span> <span data-ttu-id="ae7c9-250">Alternatywnie można ręcznie uruchomić odpowiedni podzbiór skryptów tworzenia T-SQL, które są używane przez `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-250">Alternatively, you can manually run the appropriate subset of T-SQL create scripts used by `aspnet_regsql.exe`.</span></span> <span data-ttu-id="ae7c9-251">Skrypty te znajdują się w folderze `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` z nazwami, takimi jak `InstallCommon.sql`, `InstallMembership.sql`, `InstallRoles.sql`, `InstallProfile.sql`, `InstallSqlState.sql`i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-251">These scripts are located in the `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder with names like `InstallCommon.sql`, `InstallMembership.sql`, `InstallRoles.sql`, `InstallProfile.sql`, `InstallSqlState.sql`, and so on.</span></span>

<span data-ttu-id="ae7c9-252">W tym momencie utworzyliśmy obiekty bazy danych, które są konieczne przez `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-252">At this point we have created the database objects needed by the `SqlMembershipProvider`.</span></span> <span data-ttu-id="ae7c9-253">Jednak nadal musimy poinstruować platformę członkowską, że powinna ona używać `SqlMembershipProvider` (w przeciwieństwie do `ActiveDirectoryMembershipProvider`) i czy `SqlMembershipProvider` powinien korzystać z bazy danych `SecurityTutorials`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-253">However, we still need to instruct the Membership framework that it should use the `SqlMembershipProvider` (versus, say, the `ActiveDirectoryMembershipProvider`) and that the `SqlMembershipProvider` should use the `SecurityTutorials` database.</span></span> <span data-ttu-id="ae7c9-254">Zapoznaj się z informacjami na temat określania dostawcy, który ma być używany, oraz sposobu dostosowywania ustawień wybranego dostawcy w kroku 4.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-254">We'll look at how to specify what provider to use and how to customize the selected provider's settings in Step 4.</span></span> <span data-ttu-id="ae7c9-255">Najpierw przyjrzyjmy się dokładnie utworzonym obiektom bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-255">But first, let's take a deeper look at the database objects that were just created.</span></span>

## <a name="step-3-a-look-at-the-schemas-core-tables"></a><span data-ttu-id="ae7c9-256">Krok 3. Zapoznaj się z podstawowymi tabelami schematu</span><span class="sxs-lookup"><span data-stu-id="ae7c9-256">Step 3: A Look at the Schema's Core Tables</span></span>

<span data-ttu-id="ae7c9-257">Podczas pracy z platformami członkostwa i ról w aplikacji ASP.NET szczegóły implementacji są hermetyzowane przez dostawcę.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-257">When working with the Membership and Roles frameworks in an ASP.NET application, the implementation details are encapsulated by the provider.</span></span> <span data-ttu-id="ae7c9-258">W przyszłych samouczkach będziemy interfejsować z tymi platformami za pośrednictwem klas `Membership` i `Roles` .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-258">In future tutorials we will interface with these frameworks via the .NET Framework's `Membership` and `Roles` classes.</span></span> <span data-ttu-id="ae7c9-259">W przypadku korzystania z tych interfejsów API wysokiego poziomu nie ma potrzeby wypróbujemy z szczegółami niskiego poziomu, takich jak zapytania są wykonywane lub jakie tabele są modyfikowane przez `SqlMembershipProvider` i `SqlRoleProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-259">When using these high-level APIs we do not need to concern ourselves with the low-level details, like what queries are executed or what tables are modified by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span>

<span data-ttu-id="ae7c9-260">Z tego względu możemy bezpiecznie używać platform członkostwa i ról bez eksplorowania schematu bazy danych utworzonego w kroku 2.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-260">Given this, we could confidently use the Membership and Roles frameworks without having explored the database schema created in Step 2.</span></span> <span data-ttu-id="ae7c9-261">Jednak podczas tworzenia tabel do przechowywania danych aplikacji może być konieczne utworzenie jednostek odnoszących się do użytkowników lub ról.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-261">However, when creating the tables to store application data we may need to create entities that relate to users or roles.</span></span> <span data-ttu-id="ae7c9-262">Podczas ustanawiania ograniczeń klucza obcego między tabelami danych aplikacji a tymi tabelami utworzonymi w kroku 2, pomocne jest zapoznanie się ze schematami `SqlMembershipProvider` i `SqlRoleProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-262">It helps to have a familiarity with the `SqlMembershipProvider` and `SqlRoleProvider` schemas when establishing foreign key constraints between the application data tables and those tables created in Step 2.</span></span> <span data-ttu-id="ae7c9-263">Ponadto w niektórych rzadkich sytuacjach może być konieczne, aby interfejs użytkownika i rola były przechowywane bezpośrednio na poziomie bazy danych (zamiast za pomocą klas `Membership` lub `Roles`).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-263">Moreover, in certain rare circumstances we may need to interface with the user and role stores directly at the database level (instead of through the `Membership` or `Roles` classes).</span></span>

### <a name="partitioning-the-user-store-into-applications"></a><span data-ttu-id="ae7c9-264">Partycjonowanie magazynu użytkowników w aplikacjach</span><span class="sxs-lookup"><span data-stu-id="ae7c9-264">Partitioning the User Store Into Applications</span></span>

<span data-ttu-id="ae7c9-265">Struktury członkostwa i ról zaprojektowano w taki sposób, że jeden użytkownik i magazyn ról mogą być współużytkowane przez wiele różnych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-265">The Membership and Roles frameworks are designed such that a single user and role store can be shared among many different applications.</span></span> <span data-ttu-id="ae7c9-266">Aplikacja ASP.NET, która korzysta z struktur członkostwa lub ról, musi określać partycję aplikacji, która ma być używana.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-266">An ASP.NET application that uses the Membership or Roles frameworks must specify what application partition to use.</span></span> <span data-ttu-id="ae7c9-267">W krótkim przypadku wiele aplikacji sieci Web może korzystać z tych samych magazynów użytkowników i ról.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-267">In short, multiple web applications can use the same user and role stores.</span></span> <span data-ttu-id="ae7c9-268">Rysunek 11 przedstawia magazyny użytkowników i ról, które są podzielone na trzy aplikacje: HRSite, CustomerSite i SalesSite.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-268">Figure 11 depicts user and role stores that are partitioned into three applications: HRSite, CustomerSite, and SalesSite.</span></span> <span data-ttu-id="ae7c9-269">Każdy z tych trzech aplikacji sieci Web ma własnych unikatowych użytkowników i ról, a jednocześnie wszystkie fizycznie przechowują swoje konta użytkownika i informacje o roli w tych samych tabelach bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-269">These three web applications each have their own unique users and roles, yet they all physically store their user account and role information in the same database tables.</span></span>

<span data-ttu-id="ae7c9-270">[Konta użytkowników ![mogą być partycjonowane w wielu aplikacjach](creating-the-membership-schema-in-sql-server-vb/_static/image32.png)](creating-the-membership-schema-in-sql-server-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="ae7c9-270">[![User Accounts May Be Partitioned Across Multiple Applications](creating-the-membership-schema-in-sql-server-vb/_static/image32.png)](creating-the-membership-schema-in-sql-server-vb/_static/image31.png)</span></span>

<span data-ttu-id="ae7c9-271">**Ilustracja 11**. konta użytkowników mogą być podzielone na partycje w wielu aplikacjach ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-the-membership-schema-in-sql-server-vb/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="ae7c9-271">**Figure 11**: User Accounts May Be Partitioned Across Multiple Applications ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image33.png))</span></span>

<span data-ttu-id="ae7c9-272">Tabela `aspnet_Applications` określa, co definiuje te partycje.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-272">The `aspnet_Applications` table is what defines these partitions.</span></span> <span data-ttu-id="ae7c9-273">Każda aplikacja, która korzysta z bazy danych do przechowywania informacji o kontach użytkowników, jest reprezentowana przez wiersz w tej tabeli.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-273">Each application that uses the database to store user account information is represented by a row in this table.</span></span> <span data-ttu-id="ae7c9-274">Tabela `aspnet_Applications` ma cztery kolumny: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`i `Description`.`ApplicationId`</span><span class="sxs-lookup"><span data-stu-id="ae7c9-274">The `aspnet_Applications` table has four columns: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, and `Description`.`ApplicationId`</span></span> <span data-ttu-id="ae7c9-275">jest typu [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) i jest kluczem podstawowym tabeli; `ApplicationName` zapewnia unikatową przyjazną nazwę dla każdej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-275">is of type [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) and is the table's primary key; `ApplicationName` provides a unique human-friendly name for each application.</span></span>

<span data-ttu-id="ae7c9-276">Inne i powiązane z rolami tabele łączy z powrotem do pola `ApplicationId` w `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-276">The other Membership- and Role-related tables link back to the `ApplicationId` field in `aspnet_Applications`.</span></span> <span data-ttu-id="ae7c9-277">Na przykład tabela `aspnet_Users`, która zawiera rekord dla każdego konta użytkownika, ma pole klucza obcego `ApplicationId`; Ditto dla tabeli `aspnet_Roles`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-277">For example, the `aspnet_Users` table, which contains a record for each user account, has an `ApplicationId` foreign key field; ditto for the `aspnet_Roles` table.</span></span> <span data-ttu-id="ae7c9-278">Pole `ApplicationId` w tych tabelach Określa partycję aplikacji, do której należy konto użytkownika lub rola.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-278">The `ApplicationId` field in these tables specifies the application partition the user account or role belongs to.</span></span>

### <a name="storing-user-account-information"></a><span data-ttu-id="ae7c9-279">Przechowywanie informacji o koncie użytkownika</span><span class="sxs-lookup"><span data-stu-id="ae7c9-279">Storing User Account Information</span></span>

<span data-ttu-id="ae7c9-280">Informacje o koncie użytkownika są przechowywane w dwóch tabelach: `aspnet_Users` i `aspnet_Membership`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-280">User account information is housed in two tables: `aspnet_Users` and `aspnet_Membership`.</span></span> <span data-ttu-id="ae7c9-281">Tabela `aspnet_Users` zawiera pola, które zawierają podstawowe informacje o koncie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-281">The `aspnet_Users` table contains fields that hold the essential user account information.</span></span> <span data-ttu-id="ae7c9-282">Trzy najbardziej odpowiednie kolumny są następujące:</span><span class="sxs-lookup"><span data-stu-id="ae7c9-282">The three most pertinent columns are:</span></span>

- `UserId`
- `UserName`
- `ApplicationId`

<span data-ttu-id="ae7c9-283">`UserId` jest kluczem podstawowym (i typu `uniqueidentifier`).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-283">`UserId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="ae7c9-284">`UserName` jest typu `nvarchar(256)` i, wraz z hasłem, tworzy poświadczenia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-284">`UserName` is of type `nvarchar(256)` and, along with the password, makes up the user's credentials.</span></span> <span data-ttu-id="ae7c9-285">(Hasło użytkownika jest przechowywane w tabeli `aspnet_Membership`). `ApplicationId` łączy konto użytkownika z określoną aplikacją w programie `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-285">(A user's password is stored in the `aspnet_Membership` table.) `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="ae7c9-286">Istnieje [ograniczenie`UNIQUE`](https://msdn.microsoft.com/library/ms191166.aspx) złożonego dla kolumn `UserName` i `ApplicationId`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-286">There is a composite [`UNIQUE` constraint](https://msdn.microsoft.com/library/ms191166.aspx) on the `UserName` and `ApplicationId` columns.</span></span> <span data-ttu-id="ae7c9-287">Gwarantuje to, że w danej aplikacji każda nazwa użytkownika jest unikatowa, ale umożliwia użycie tego samego `UserName` w różnych aplikacjach.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-287">This ensures that in a given application each UserName is unique, yet it allows for the same `UserName` to be used in different applications.</span></span>

<span data-ttu-id="ae7c9-288">Tabela `aspnet_Membership` zawiera dodatkowe informacje o koncie użytkownika, takie jak hasło użytkownika, adres e-mail, Data i godzina ostatniego logowania itd.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-288">The `aspnet_Membership` table includes additional user account information, like the user's password, email address, the last login date and time, and so forth.</span></span> <span data-ttu-id="ae7c9-289">Istnieje taka sama zgodność między rekordami w tabelach `aspnet_Users` i `aspnet_Membership`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-289">There is a one-to-one correspondence between records in the `aspnet_Users` and `aspnet_Membership` tables.</span></span> <span data-ttu-id="ae7c9-290">Ta relacja jest zapewniana przez pole `UserId` w `aspnet_Membership`, które służy jako klucz podstawowy tabeli.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-290">This relationship is ensured by the `UserId` field in `aspnet_Membership`, which serves as the table's primary key.</span></span> <span data-ttu-id="ae7c9-291">Podobnie jak w przypadku tabeli `aspnet_Users`, `aspnet_Membership` zawiera pole `ApplicationId`, które łączy te informacje z określoną partycją aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-291">Like the `aspnet_Users` table, `aspnet_Membership` includes an `ApplicationId` field that ties this information to a particular application partition.</span></span>

### <a name="securing-passwords"></a><span data-ttu-id="ae7c9-292">Zabezpieczanie haseł</span><span class="sxs-lookup"><span data-stu-id="ae7c9-292">Securing Passwords</span></span>

<span data-ttu-id="ae7c9-293">Informacje o haśle są przechowywane w tabeli `aspnet_Membership`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-293">Password information is stored in the `aspnet_Membership` table.</span></span> <span data-ttu-id="ae7c9-294">`SqlMembershipProvider` umożliwia przechowywanie haseł w bazie danych przy użyciu jednej z następujących trzech technik:</span><span class="sxs-lookup"><span data-stu-id="ae7c9-294">The `SqlMembershipProvider` allows for passwords to be stored in the database using one of the following three techniques:</span></span>

- <span data-ttu-id="ae7c9-295">**Wyczyść** — hasło jest przechowywane w bazie danych w postaci zwykłego tekstu.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-295">**Clear** - the password is stored in the database as plain-text.</span></span> <span data-ttu-id="ae7c9-296">Zdecydowanie odradzam korzystanie z tej opcji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-296">I strongly discourage using this option.</span></span> <span data-ttu-id="ae7c9-297">Jeśli baza danych została naruszona, nastąpi hakerowi, który znajdzie tylne drzwi lub pracownika disgruntled, który ma dostęp do bazy danych — każda z nich ma poświadczenia dla każdego pojedynczego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-297">If the database is compromised - be it by a hacker who finds a back door or a disgruntled employee who has database access - every single user's credentials are there for the taking.</span></span>
- <span data-ttu-id="ae7c9-298">**Skrót** -hasła są tworzone przy użyciu skrótu jednokierunkowego i losowo generowanej wartości soli.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-298">**Hashed** - passwords are hashed using a one-way hash algorithm and a randomly generated salt value.</span></span> <span data-ttu-id="ae7c9-299">Ta wartość skrótu (wraz z tablicą) jest przechowywana w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-299">This hashed value (along with the salt) is stored in the database.</span></span>
- <span data-ttu-id="ae7c9-300">**Zaszyfrowana** — zaszyfrowana wersja hasła jest przechowywana w bazie danych programu.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-300">**Encrypted** - an encrypted version of the password is stored in the database.</span></span>

<span data-ttu-id="ae7c9-301">Stosowana technika przechowywania haseł zależy od ustawień `SqlMembershipProvider` określonych w `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-301">The password storage technique used depends on the `SqlMembershipProvider` settings specified in `Web.config`.</span></span> <span data-ttu-id="ae7c9-302">Przyjrzyjmy się dostosowywaniu ustawień `SqlMembershipProvider` w kroku 4.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-302">We will look at customizing the `SqlMembershipProvider` settings in Step 4.</span></span> <span data-ttu-id="ae7c9-303">Domyślnym zachowaniem jest przechowywanie skrótu hasła.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-303">The default behavior is to store the hash of the password.</span></span>

<span data-ttu-id="ae7c9-304">Kolumny odpowiedzialne za przechowywanie hasła są `Password`, `PasswordFormat`i `PasswordSalt`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-304">The columns responsible for storing the password are `Password`, `PasswordFormat`, and `PasswordSalt`.</span></span> <span data-ttu-id="ae7c9-305">`PasswordFormat` to pole typu `int`, którego wartość wskazuje technikę używaną do przechowywania hasła: 0 dla Clear; 1 dla wartości skrótu; 2 dla zaszyfrowanej.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-305">`PasswordFormat` is a field of type `int` whose value indicates the technique used for storing the password: 0 for Clear; 1 for Hashed; 2 for Encrypted.</span></span> <span data-ttu-id="ae7c9-306">`PasswordSalt` ma przypisany losowo wygenerowany ciąg, niezależnie od używanej techniki magazynu haseł; wartość `PasswordSalt` jest używana tylko podczas obliczania skrótu hasła.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-306">`PasswordSalt` is assigned a randomly generated string regardless of the password storage technique used; the value of `PasswordSalt` is only used when computing the hash of the password.</span></span> <span data-ttu-id="ae7c9-307">Na koniec kolumna `Password` zawiera rzeczywiste dane hasła, być hasłem w postaci zwykłego tekstu, skrótem hasła lub zaszyfrowanym hasłem.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-307">Finally, the `Password` column contains the actual password data, be it the plain-text password, the hash of the password, or the encrypted password.</span></span>

<span data-ttu-id="ae7c9-308">Tabela 1 ilustruje, jak te trzy kolumny mogą wyglądać podobnie do różnych technik magazynowania podczas przechowywania hasła.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-308">Table 1 illustrates what these three columns might look like for the various storage techniques when storing the password MySecret!</span></span> <span data-ttu-id="ae7c9-309">.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-309">.</span></span>

| <span data-ttu-id="ae7c9-310">**Technika magazynu&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="ae7c9-310">**Storage Technique&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="ae7c9-311">**Hasło&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="ae7c9-311">**Password&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="ae7c9-312">**PasswordFormat&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="ae7c9-312">**PasswordFormat&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="ae7c9-313">**PasswordSalt&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="ae7c9-313">**PasswordSalt&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="ae7c9-314">Wyczyść</span><span class="sxs-lookup"><span data-stu-id="ae7c9-314">Clear</span></span> | <span data-ttu-id="ae7c9-315">Hasło!</span><span class="sxs-lookup"><span data-stu-id="ae7c9-315">MySecret!</span></span> | <span data-ttu-id="ae7c9-316">0</span><span class="sxs-lookup"><span data-stu-id="ae7c9-316">0</span></span> | <span data-ttu-id="ae7c9-317">tTnkPlesqissc2y2SMEygA = =</span><span class="sxs-lookup"><span data-stu-id="ae7c9-317">tTnkPlesqissc2y2SMEygA==</span></span> |
| <span data-ttu-id="ae7c9-318">Skrótu</span><span class="sxs-lookup"><span data-stu-id="ae7c9-318">Hashed</span></span> | <span data-ttu-id="ae7c9-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM =</span><span class="sxs-lookup"><span data-stu-id="ae7c9-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span></span> | <span data-ttu-id="ae7c9-320">1</span><span class="sxs-lookup"><span data-stu-id="ae7c9-320">1</span></span> | <span data-ttu-id="ae7c9-321">wFgjUfhdUFOCKQiI61vtiQ = =</span><span class="sxs-lookup"><span data-stu-id="ae7c9-321">wFgjUfhdUFOCKQiI61vtiQ==</span></span> |
| <span data-ttu-id="ae7c9-322">Szyfrowane</span><span class="sxs-lookup"><span data-stu-id="ae7c9-322">Encrypted</span></span> | <span data-ttu-id="ae7c9-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span><span class="sxs-lookup"><span data-stu-id="ae7c9-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span></span> | <span data-ttu-id="ae7c9-324">2</span><span class="sxs-lookup"><span data-stu-id="ae7c9-324">2</span></span> | <span data-ttu-id="ae7c9-325">LSRzhGS/AA/oqAXGLHJNBw = =</span><span class="sxs-lookup"><span data-stu-id="ae7c9-325">LSRzhGS/aa/oqAXGLHJNBw==</span></span> |

<span data-ttu-id="ae7c9-326">**Tabela 1**: przykładowe wartości pól związanych z hasłem podczas zapisywania hasła.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-326">**Table 1**: Example Values for the Password-Related Fields When Storing the Password MySecret!</span></span>

> [!NOTE]
> <span data-ttu-id="ae7c9-327">Określony algorytm szyfrowania lub wyznaczania wartości skrótu używany przez `SqlMembershipProvider` jest określany na podstawie ustawień w elemencie `<machineKey>`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-327">The particular encryption or hashing algorithm used by the `SqlMembershipProvider` is determined by the settings in the `<machineKey>` element.</span></span> <span data-ttu-id="ae7c9-328">Ten element konfiguracji został omówiony w kroku 3 <a id="Tutorial3"> </a>samouczka [*konfiguracja uwierzytelniania formularzy i Tematy zaawansowane*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) .</span><span class="sxs-lookup"><span data-stu-id="ae7c9-328">We discussed this configuration element in Step 3 of the <a id="Tutorial3"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) tutorial.</span></span>

### <a name="storing-roles-and-role-associations"></a><span data-ttu-id="ae7c9-329">Przechowywanie ról i skojarzeń ról</span><span class="sxs-lookup"><span data-stu-id="ae7c9-329">Storing Roles and Role Associations</span></span>

<span data-ttu-id="ae7c9-330">Struktura ról umożliwia deweloperom Definiowanie zestawu ról i określanie, którzy użytkownicy należą do ról.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-330">The Roles framework allows developers to define a set of roles and specify what users belong to what roles.</span></span> <span data-ttu-id="ae7c9-331">Te informacje są przechwytywane w bazie danych przez dwie tabele: `aspnet_Roles` i `aspnet_UsersInRoles`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-331">This information is captured in the database through two tables: `aspnet_Roles` and `aspnet_UsersInRoles`.</span></span> <span data-ttu-id="ae7c9-332">Każdy rekord w tabeli `aspnet_Roles` reprezentuje rolę dla określonej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-332">Each record in the `aspnet_Roles` table represents a role for a particular application.</span></span> <span data-ttu-id="ae7c9-333">Podobnie jak w przypadku tabeli `aspnet_Users` tabela `aspnet_Roles` ma trzy kolumny dotyczące naszej dyskusji:</span><span class="sxs-lookup"><span data-stu-id="ae7c9-333">Much like the `aspnet_Users` table, the `aspnet_Roles` table has three columns pertinent to our discussion:</span></span>

- `RoleId`
- `RoleName`
- `ApplicationId`

<span data-ttu-id="ae7c9-334">`RoleId` jest kluczem podstawowym (i typu `uniqueidentifier`).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-334">`RoleId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="ae7c9-335">`RoleName` jest typu `nvarchar(256)`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-335">`RoleName` is of type `nvarchar(256)`.</span></span> <span data-ttu-id="ae7c9-336">A `ApplicationId` łączy konto użytkownika z określoną aplikacją w `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-336">And `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="ae7c9-337">W kolumnach `RoleName` i `ApplicationId` istnieje ograniczenie `UNIQUE` złożone, co gwarantuje, że w danej aplikacji każda nazwa roli jest unikatowa.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-337">There is a composite `UNIQUE` constraint on the `RoleName` and `ApplicationId` columns, ensuring that in a given application each role name is unique.</span></span>

<span data-ttu-id="ae7c9-338">Tabela `aspnet_UsersInRoles` służy jako mapowanie między użytkownikami i rolami.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-338">The `aspnet_UsersInRoles` table serves as a mapping between users and roles.</span></span> <span data-ttu-id="ae7c9-339">Istnieją tylko dwie kolumny — `UserId` i `RoleId` — i razem składają się na złożony klucz podstawowy.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-339">There are only two columns - `UserId` and `RoleId` - and together they make up a composite primary key.</span></span>

## <a name="step-4-specifying-the-provider-and-customizing-its-settings"></a><span data-ttu-id="ae7c9-340">Krok 4. Określanie dostawcy i dostosowywanie jego ustawień</span><span class="sxs-lookup"><span data-stu-id="ae7c9-340">Step 4: Specifying the Provider and Customizing Its Settings</span></span>

<span data-ttu-id="ae7c9-341">Wszystkie platformy, które obsługują model dostawcy, takie jak struktury członkostwa i ról — nie zawierają szczegółów implementacji, a zamiast tego deleguje odpowiedzialność do klasy dostawcy.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-341">All of the frameworks that support the provider model - such as the Membership and Roles frameworks - lack implementation details themselves and instead delegate that responsibility to a provider class.</span></span> <span data-ttu-id="ae7c9-342">W przypadku struktury członkostwa Klasa `Membership` definiuje interfejs API do zarządzania kontami użytkowników, ale nie współdziała bezpośrednio z żadnym magazynem użytkowników.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-342">In the case of the Membership framework, the `Membership` class defines the API for managing user accounts, but it does not interact directly with any user store.</span></span> <span data-ttu-id="ae7c9-343">Zamiast tego metoda klasy `Membership` przekazuje żądanie do skonfigurowanego dostawcy — będziemy używać `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-343">Rather, the `Membership` class's methods hand off the request to the configured provider - we will be using the `SqlMembershipProvider`.</span></span> <span data-ttu-id="ae7c9-344">Gdy wywołamy jedną z metod w klasie `Membership`, jak platforma członkowska wie o delegowaniu wywołania do `SqlMembershipProvider`?</span><span class="sxs-lookup"><span data-stu-id="ae7c9-344">When we invoke one of the methods in the `Membership` class, how does the Membership framework know to delegate the call to the `SqlMembershipProvider`?</span></span>

<span data-ttu-id="ae7c9-345">Klasa `Membership` ma [właściwość`Providers`](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) , która zawiera odwołanie do wszystkich zarejestrowanych klas dostawcy dostępnych do użycia przez platformę członkowską.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-345">The `Membership` class has a [`Providers` property](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) that contains a reference to all of the registered provider classes available for use by the Membership framework.</span></span> <span data-ttu-id="ae7c9-346">Każdy zarejestrowany dostawca ma skojarzoną nazwę i typ.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-346">Each registered provider has an associated name and type.</span></span> <span data-ttu-id="ae7c9-347">Nazwa oferuje zrozumiały dla człowieka sposób odwołującego się do określonego dostawcy w kolekcji `Providers`, podczas gdy typ identyfikuje klasę dostawcy.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-347">The name offers a human-friendly way to reference a particular provider in the `Providers` collection, while the type identifies the provider class.</span></span> <span data-ttu-id="ae7c9-348">Ponadto każdy zarejestrowany dostawca może uwzględnić ustawienia konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-348">Moreover, each registered provider may include configuration settings.</span></span> <span data-ttu-id="ae7c9-349">Ustawienia konfiguracji dla struktury członkostwa obejmują `PasswordFormat` i `requiresUniqueEmail`między wieloma innymi.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-349">Configuration settings for the Membership framework include `PasswordFormat` and `requiresUniqueEmail`, among many others.</span></span> <span data-ttu-id="ae7c9-350">Zobacz tabelę 2, aby uzyskać pełną listę ustawień konfiguracji używanych przez `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-350">See Table 2 for a complete list of configuration settings used by the `SqlMembershipProvider`.</span></span>

<span data-ttu-id="ae7c9-351">Zawartość właściwości `Providers` jest określana za pomocą ustawień konfiguracji aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-351">The `Providers` property's contents are specified through the web application's configuration settings.</span></span> <span data-ttu-id="ae7c9-352">Domyślnie wszystkie aplikacje sieci Web mają dostawcę o nazwie `AspNetSqlMembershipProvider` typu `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-352">By default, all web applications have a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span> <span data-ttu-id="ae7c9-353">Ten domyślny dostawca członkostwa jest zarejestrowany w `machine.config` (znajdujący się w `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG`):</span><span class="sxs-lookup"><span data-stu-id="ae7c9-353">This default Membership provider is registered in `machine.config` (located at `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG`):</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample1.xml)]

<span data-ttu-id="ae7c9-354">Jak pokazano powyżej, [element`<membership>`](https://msdn.microsoft.com/library/1b9hw62f.aspx) definiuje ustawienia konfiguracji dla struktury członkostwa, natomiast [element podrzędny`<providers>`](https://msdn.microsoft.com/library/6d4936ht.aspx) określa zarejestrowanych dostawców.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-354">As the markup above shows, the [`<membership>` element](https://msdn.microsoft.com/library/1b9hw62f.aspx) defines the configuration settings for the Membership framework while the [`<providers>` child element](https://msdn.microsoft.com/library/6d4936ht.aspx) specifies the registered providers.</span></span> <span data-ttu-id="ae7c9-355">Dostawców można dodawać lub usuwać za pomocą elementów [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) lub [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) ; Użyj elementu [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) , aby usunąć wszystkich aktualnie zarejestrowanych dostawców.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-355">Providers may be added or removed using the [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) or [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) elements; use the [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) element to remove all currently registered providers.</span></span> <span data-ttu-id="ae7c9-356">Jak pokazano powyżej, `machine.config` dodaje dostawcę o nazwie `AspNetSqlMembershipProvider` typu `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-356">As the markup above shows, `machine.config` adds a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span>

<span data-ttu-id="ae7c9-357">Oprócz atrybutów `name` i `type`, element `<add>` zawiera atrybuty, które definiują wartości różnych ustawień konfigurowania.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-357">In addition to the `name` and `type` attributes, the `<add>` element contains attributes that define the values for various configuring settings.</span></span> <span data-ttu-id="ae7c9-358">Tabela 2 zawiera dostępne ustawienia konfiguracji specyficzne dla `SqlMembershipProvider`wraz z opisem każdego z nich.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-358">Table 2 lists the available `SqlMembershipProvider`-specific configuration settings, along with a description of each.</span></span>

> [!NOTE]
> <span data-ttu-id="ae7c9-359">Wszystkie wartości domyślne zanotowane w tabeli 2 odnoszą się do wartości domyślnych zdefiniowanych w klasie `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-359">Any default values noted in Table 2 refer to the default values defined in the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="ae7c9-360">Należy zauważyć, że nie wszystkie ustawienia konfiguracji w `AspNetSqlMembershipProvider` są zgodne z wartościami domyślnymi klasy `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-360">Note that not all of the configuration settings in `AspNetSqlMembershipProvider` correspond to the default values of the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="ae7c9-361">Na przykład jeśli nie zostanie określony w dostawcy członkostwa, ustawienie `requiresUniqueEmail` domyślnie wartość true.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-361">For example, if not specified in a Membership provider, the `requiresUniqueEmail` setting defaults to true.</span></span> <span data-ttu-id="ae7c9-362">Jednak `AspNetSqlMembershipProvider` przesłania tę wartość domyślną przez jawne określenie wartości `false`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-362">However, the `AspNetSqlMembershipProvider` overrides this default value by explicitly specifying a value of `false`.</span></span>

| <span data-ttu-id="ae7c9-363">**Ustawianie&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="ae7c9-363">**Setting&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="ae7c9-364">**Opis&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="ae7c9-364">**Description&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- |
| `ApplicationName` | <span data-ttu-id="ae7c9-365">Należy przypomnieć, że platforma członkowska pozwala na partycjonowanie pojedynczego magazynu użytkowników w wielu aplikacjach.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-365">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="ae7c9-366">To ustawienie wskazuje nazwę partycji aplikacji używanej przez dostawcę członkostwa.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-366">This setting indicates the name of the application partition used by the Membership provider.</span></span> <span data-ttu-id="ae7c9-367">Jeśli ta wartość nie jest jawnie określona, zostanie ustawiona w czasie wykonywania na wartość wirtualnej ścieżki katalogu głównego aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-367">If this value is not explicitly specified, it is set, at runtime, to the value of the application's virtual root path.</span></span> |
| `commandTimeout` | <span data-ttu-id="ae7c9-368">Określa wartość limitu czasu polecenia SQL (w sekundach).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-368">Specifies the SQL command timeout value (in seconds).</span></span> <span data-ttu-id="ae7c9-369">Wartość domyślna to 30.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-369">The default value is 30.</span></span> |
| `connectionStringName` | <span data-ttu-id="ae7c9-370">Nazwa parametrów połączenia w elemencie `<connectionStrings>`, który ma zostać użyty do nawiązania połączenia z bazą danych magazynu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-370">The name of the connection string in the `<connectionStrings>` element to use to connect to the user store database.</span></span> <span data-ttu-id="ae7c9-371">Ta wartość jest wymagana.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-371">This value is required.</span></span> |
| `description` | <span data-ttu-id="ae7c9-372">Zapewnia przyjazny dla człowieka opis zarejestrowanego dostawcy.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-372">Provides a human-friendly description of the registered provider.</span></span> |
| `enablePasswordRetrieval` | <span data-ttu-id="ae7c9-373">Określa, czy użytkownicy mogą pobierać zapomniane hasło.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-373">Specifies whether users may retrieve their forgotten password.</span></span> <span data-ttu-id="ae7c9-374">Wartość domyślna to `false`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-374">The default value is `false`.</span></span> |
| `enablePasswordReset` | <span data-ttu-id="ae7c9-375">Wskazuje, czy użytkownicy mogą resetować swoje hasła.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-375">Indicates whether users are allowed to reset their password.</span></span> <span data-ttu-id="ae7c9-376">Wartość domyślna to `true`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-376">Defaults to `true`.</span></span> |
| `maxInvalidPasswordAttempts` | <span data-ttu-id="ae7c9-377">Maksymalna liczba nieudanych prób logowania, które mogą wystąpić dla danego użytkownika w określonym `passwordAttemptWindow` przed zablokowaniem użytkownika. Wartość domyślna to 5.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-377">The maximum number of unsuccessful login attempts that may occur for a given user during the specified `passwordAttemptWindow` before the user is locked out. The default value is 5.</span></span> |
| `minRequiredNonalphanumericCharacters` | <span data-ttu-id="ae7c9-378">Minimalna liczba znaków innych niż alfanumeryczne, które muszą występować w haśle użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-378">The minimum number of non-alphanumeric characters that must appear in a user's password.</span></span> <span data-ttu-id="ae7c9-379">Ta wartość musi należeć do zakresu od 0 do 128; wartość domyślna to 1.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-379">This value must be between 0 and 128; the default is 1.</span></span> |
| `minRequiredPasswordLength` | <span data-ttu-id="ae7c9-380">Minimalna liczba znaków wymagana w haśle.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-380">The minimum number of characters required in a password.</span></span> <span data-ttu-id="ae7c9-381">Ta wartość musi należeć do zakresu od 0 do 128; wartość domyślna to 7.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-381">This value must be between 0 and 128; the default is 7.</span></span> |
| `name` | <span data-ttu-id="ae7c9-382">Nazwa zarejestrowanego dostawcy.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-382">The name of the registered provider.</span></span> <span data-ttu-id="ae7c9-383">Ta wartość jest wymagana.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-383">This value is required.</span></span> |
| `passwordAttemptWindow` | <span data-ttu-id="ae7c9-384">Liczba minut, przez które są śledzone nieudane próby logowania.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-384">The number of minutes during which failed login attempts are tracked.</span></span> <span data-ttu-id="ae7c9-385">Jeśli użytkownik poda nieprawidłowe poświadczenia logowania `maxInvalidPasswordAttempts` razy w tym określonym oknie, są one zablokowane. Wartość domyślna to 10.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-385">If a user supplies invalid login credentials `maxInvalidPasswordAttempts` times within this specified window, they are locked out. The default value is 10.</span></span> |
| `PasswordFormat` | <span data-ttu-id="ae7c9-386">Format przechowywania haseł: `Clear`, `Hashed`lub `Encrypted`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-386">The password storage format: `Clear`, `Hashed`, or `Encrypted`.</span></span> <span data-ttu-id="ae7c9-387">Wartość domyślna to `Hashed`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-387">The default is `Hashed`.</span></span> |
| `passwordStrengthRegularExpression` | <span data-ttu-id="ae7c9-388">Jeśli ta wartość jest określona, to wyrażenie regularne służy do oszacowania siły hasła wybranego przez użytkownika podczas tworzenia nowego konta lub zmiany hasła.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-388">If provided, this regular expression is used to evaluate the strength of the user's selected password when creating a new account or when changing their password.</span></span> <span data-ttu-id="ae7c9-389">Wartością domyślną jest ciąg pusty.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-389">The default value is an empty string.</span></span> |
| `requiresQuestionAndAnswer` | <span data-ttu-id="ae7c9-390">Określa, czy użytkownik musi odpowiedzieć na swoje pytanie zabezpieczające podczas pobierania lub resetowania hasła.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-390">Specifies whether a user must answer his security question when retrieving or resetting his password.</span></span> <span data-ttu-id="ae7c9-391">Wartość domyślna to `true`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-391">The default value is `true`.</span></span> |
| `requiresUniqueEmail` | <span data-ttu-id="ae7c9-392">Wskazuje, czy wszystkie konta użytkowników w danej partycji aplikacji muszą mieć unikatowy adres e-mail.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-392">Indicates whether all user accounts in a given application partition must have a unique email address.</span></span> <span data-ttu-id="ae7c9-393">Wartość domyślna to `true`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-393">The default value is `true`.</span></span> |
| `type` | <span data-ttu-id="ae7c9-394">Określa typ dostawcy.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-394">Specifies the type of the provider.</span></span> <span data-ttu-id="ae7c9-395">Ta wartość jest wymagana.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-395">This value is required.</span></span> |

<span data-ttu-id="ae7c9-396">**Tabela 2**. ustawienia konfiguracji członkostwa i `SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="ae7c9-396">**Table 2**: Membership and `SqlMembershipProvider` Configuration Settings</span></span>

<span data-ttu-id="ae7c9-397">Oprócz `AspNetSqlMembershipProvider`inni dostawcy członkostwa mogą być zarejestrowani w zależności od aplikacji przez dodanie podobnego znacznika do pliku `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-397">In addition to `AspNetSqlMembershipProvider`, other Membership providers may be registered on an application-by-application basis by adding similar markup to the `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="ae7c9-398">Struktura ról działa tak samo w ten sam sposób: w `machine.config` istnieje domyślny zarejestrowany dostawca ról, a zarejestrowany dostawca może być dostosowany w zależności od aplikacji w `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-398">The Roles framework works in much the same way: there is a default registered role provider in `machine.config` and the registered providers may be customized on an application-by-application basis in `Web.config`.</span></span> <span data-ttu-id="ae7c9-399">W przyszłości będziemy szczegółowo analizować strukturę role i jej znaczniki konfiguracyjne.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-399">We will examine the Roles framework and its configuration markup in detail in a future tutorial.</span></span>

### <a name="customizing-thesqlmembershipprovidersettings"></a><span data-ttu-id="ae7c9-400">Dostosowywanie ustawień`SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="ae7c9-400">Customizing the`SqlMembershipProvider`Settings</span></span>

<span data-ttu-id="ae7c9-401">Domyślny `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) ma ustawiony atrybut `connectionStringName` na `LocalSqlServer`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-401">The default `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) has its `connectionStringName` attribute set to `LocalSqlServer`.</span></span> <span data-ttu-id="ae7c9-402">Podobnie jak w przypadku dostawcy `AspNetSqlMembershipProvider` nazwy parametrów połączenia `LocalSqlServer` są zdefiniowane w `machine.config`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-402">Like the `AspNetSqlMembershipProvider` provider, the connection string name `LocalSqlServer` is defined in `machine.config`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample2.xml)]

<span data-ttu-id="ae7c9-403">Jak widać, te parametry połączenia definiują bazę danych SQL 2005 Express Edition znajdującą się w lokalizacji | Katalog DataDirectory | aspnetdb. mdf.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-403">As you can see, this connection string defines a SQL 2005 Express Edition database located at |DataDirectory|aspnetdb.mdf.</span></span> <span data-ttu-id="ae7c9-404">Ciąg | Katalog DataDirectory | został przetłumaczony w czasie wykonywania, aby wskazywał katalog `~/App_Data/`, więc ścieżkę bazy danych | DataDirectory | aspnetdb. mdf tłumaczy na `~/App_Data`/`aspnet.mdf`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-404">The string |DataDirectory| is translated at runtime to point to the `~/App_Data/` directory, so the database path |DataDirectory|aspnetdb.mdf translates to `~/App_Data`/`aspnet.mdf`.</span></span>

<span data-ttu-id="ae7c9-405">Jeśli nie podano żadnych informacji o dostawcy członkostwa w pliku `Web.config` aplikacji, aplikacja używa domyślnego zarejestrowanego dostawcy członkostwa, `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-405">If we did not specify any Membership provider information in our application's `Web.config` file, the application uses the default registered Membership provider, `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="ae7c9-406">Jeśli baza danych `~/App_Data/aspnet.mdf` nie istnieje, środowisko uruchomieniowe programu ASP.NET automatycznie utworzy ją i doda schemat usług aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-406">If the `~/App_Data/aspnet.mdf` database does not exist, the ASP.NET runtime will automatically create it and add the application services schema.</span></span> <span data-ttu-id="ae7c9-407">Nie chcemy jednak korzystać z bazy danych `aspnet.mdf`. Zamiast tego chcemy użyć bazy danych `SecurityTutorials.mdf` utworzonej w kroku 2.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-407">However, we don't want to use the `aspnet.mdf` database; rather, we want to use the `SecurityTutorials.mdf` database we created in Step 2.</span></span> <span data-ttu-id="ae7c9-408">Tę modyfikację można wykonać na jeden z dwóch sposobów:</span><span class="sxs-lookup"><span data-stu-id="ae7c9-408">This modification can be accomplished in one of two ways:</span></span>

- <span data-ttu-id="ae7c9-409"><strong>Określ wartość</strong> <strong>`LocalSqlServer`</strong> <strong>nazwy parametrów połączenia w</strong> <strong>`Web.config`</strong> <strong>.</strong></span><span class="sxs-lookup"><span data-stu-id="ae7c9-409"><strong>Specify a value for the</strong><strong>`LocalSqlServer`</strong><strong>connection string name in</strong><strong>`Web.config`</strong><strong>.</strong></span></span> <span data-ttu-id="ae7c9-410">Zastępując `LocalSqlServer` wartość nazwy parametrów połączenia w `Web.config`, możemy użyć domyślnego zarejestrowanego dostawcy członkostwa (`AspNetSqlMembershipProvider`) i prawidłowo współpracować z `SecurityTutorials.mdf` bazą danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-410">By overwriting the `LocalSqlServer` connection string name value in `Web.config`, we can use the default registered Membership provider (`AspNetSqlMembershipProvider`) and have it correctly work with the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="ae7c9-411">To podejście jest odpowiednie w przypadku zawartości z ustawieniami konfiguracyjnymi określonymi przez `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-411">This approach is fine if you are content with the configuration settings specified by `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="ae7c9-412">Aby uzyskać więcej informacji na temat tej techniki, zobacz wpis w blogu [Scott Guthrie](https://weblogs.asp.net/scottgu/), [konfigurowanie ASP.NET 2,0 Usługi aplikacji do użycia SQL Server 2000 lub SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-412">For more information on this technique, see [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog post, [Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span></span>
- <span data-ttu-id="ae7c9-413"><strong>Dodaj nowego zarejestrowanego dostawcę typu</strong> <strong>`SqlMembershipProvider`</strong> <strong>i skonfiguruj</strong> ustawienia<strong>`connectionStringName`</strong>, <strong>aby wskazywały</strong> <strong>bazę danych</strong> <strong>`SecurityTutorials.mdf`</strong>.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-413"><strong>Add a new registered provider of type</strong><strong>`SqlMembershipProvider`</strong><strong>and configure its</strong><strong>`connectionStringName`</strong><strong>setting to point to the</strong><strong>`SecurityTutorials.mdf`</strong><strong>database.</strong></span></span> <span data-ttu-id="ae7c9-414">Takie podejście jest przydatne w scenariuszach, w których chcesz dostosować inne właściwości konfiguracji oprócz parametrów połączenia z bazą danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-414">This approach is useful in scenarios where you want to customize other configuration properties in addition to the database connection string.</span></span> <span data-ttu-id="ae7c9-415">We własnych projektach zawsze korzystamy z tego podejścia ze względu na jego elastyczność i czytelność.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-415">In my own projects I always use this approach because of its flexibility and readability.</span></span>

<span data-ttu-id="ae7c9-416">Zanim będziemy mogli dodać nowego zarejestrowanego dostawcę, który odwołuje się do bazy danych `SecurityTutorials.mdf`, najpierw musimy dodać odpowiednią wartość parametrów połączenia w sekcji `<connectionStrings>` w `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-416">Before we can add a new registered provider that references the `SecurityTutorials.mdf` database, we first need to add an appropriate connection string value in the `<connectionStrings>` section in `Web.config`.</span></span> <span data-ttu-id="ae7c9-417">Poniższy znacznik dodaje nowe parametry połączenia o nazwie `SecurityTutorialsConnectionString`, które odwołują się do bazy danych SQL Server 2005 Express Edition `SecurityTutorials.mdf` w folderze `App_Data`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-417">The following markup adds a new connection string named `SecurityTutorialsConnectionString` that references the SQL Server 2005 Express Edition `SecurityTutorials.mdf` database in the `App_Data` folder.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="ae7c9-418">Jeśli używasz alternatywnego pliku bazy danych, zaktualizuj parametry połączenia zgodnie z wymaganiami.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-418">If you are using an alternate database file, update the connection string as needed.</span></span> <span data-ttu-id="ae7c9-419">Aby uzyskać więcej informacji na temat tworzenia poprawnych parametrów połączenia, zapoznaj się z [connectionStrings.com](http://www.connectionstrings.com/).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-419">For more information on forming the correct connection string, refer to [ConnectionStrings.com](http://www.connectionstrings.com/).</span></span>

<span data-ttu-id="ae7c9-420">Następnie Dodaj następujący znacznik konfiguracji członkostwa do pliku `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-420">Next, add the following Membership configuration markup to the `Web.config` file.</span></span> <span data-ttu-id="ae7c9-421">Ten znacznik rejestruje nowego dostawcę o nazwie `SecurityTutorialsSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-421">This markup registers a new provider named `SecurityTutorialsSqlMembershipProvider`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample4.xml)]

<span data-ttu-id="ae7c9-422">Oprócz rejestrowania dostawcy `SecurityTutorialsSqlMembershipProvider` powyższe znaczniki definiuje `SecurityTutorialsSqlMembershipProvider` jako domyślny dostawca (za pośrednictwem atrybutu `defaultProvider` w elemencie `<membership>`).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-422">In addition to registering the `SecurityTutorialsSqlMembershipProvider` provider, the above markup defines the `SecurityTutorialsSqlMembershipProvider` as the default provider (via the `defaultProvider` attribute in the `<membership>` element).</span></span> <span data-ttu-id="ae7c9-423">Odwołaj, że platforma członkowska może mieć wielu zarejestrowanych dostawców.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-423">Recall that the Membership framework can have multiple registered providers.</span></span> <span data-ttu-id="ae7c9-424">Ponieważ `AspNetSqlMembershipProvider` jest zarejestrowany jako pierwszy dostawca w `machine.config`, służy jako domyślny dostawca, chyba że poinformujemy inaczej.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-424">Since `AspNetSqlMembershipProvider` is registered as the first provider in `machine.config`, it serves as the default provider unless we indicate otherwise.</span></span>

<span data-ttu-id="ae7c9-425">Obecnie nasza aplikacja ma dwóch zarejestrowanych dostawców: `AspNetSqlMembershipProvider` i `SecurityTutorialsSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-425">Currently, our application has two registered providers: `AspNetSqlMembershipProvider` and `SecurityTutorialsSqlMembershipProvider`.</span></span> <span data-ttu-id="ae7c9-426">Jednak przed zarejestrowaniem dostawcy `SecurityTutorialsSqlMembershipProvider` mógł zostać wyczyszczony wszyscy wcześniej zarejestrowani dostawcy przez dodanie [elementu`<clear />`](https://msdn.microsoft.com/library/t062y6yc.aspx) bezpośrednio przed elementem `<add>`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-426">However, before registering the `SecurityTutorialsSqlMembershipProvider` provider we could have cleared out all previously registered providers by adding a [`<clear />` element](https://msdn.microsoft.com/library/t062y6yc.aspx) immediately before our `<add>` element.</span></span> <span data-ttu-id="ae7c9-427">Spowoduje to wyczyszczenie `AspNetSqlMembershipProvider` z listy zarejestrowanych dostawców, co oznacza, że `SecurityTutorialsSqlMembershipProvider` będzie jedyny zarejestrowany dostawca członkostwa.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-427">This would clear out the `AspNetSqlMembershipProvider` from the list of registered providers, meaning that the `SecurityTutorialsSqlMembershipProvider` would be the only registered Membership provider.</span></span> <span data-ttu-id="ae7c9-428">Jeśli korzystamy z tego podejścia, nie trzeba oznaczyć `SecurityTutorialsSqlMembershipProvider` jako domyślnego dostawcy, ponieważ będzie to jedyny zarejestrowany dostawca członkostwa.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-428">If we used this approach, then we would not need to mark the `SecurityTutorialsSqlMembershipProvider` as the default provider, since it would be the only registered Membership provider.</span></span> <span data-ttu-id="ae7c9-429">Aby uzyskać więcej informacji na temat korzystania z `<clear />`, zobacz [używanie `<clear />` podczas dodawania dostawców](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-429">For more information on using `<clear />`, see [Using `<clear />` When Adding providers](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span></span>

<span data-ttu-id="ae7c9-430">Należy zauważyć, że ustawienie `connectionStringName` `SecurityTutorialsSqlMembershipProvider`odwołuje się do dodawanej `SecurityTutorialsConnectionString` nazwy parametrów połączenia i że ustawienie `applicationName` zostało ustawione na wartość SecurityTutorials.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-430">Note that the `SecurityTutorialsSqlMembershipProvider`'s `connectionStringName` setting references the just-added `SecurityTutorialsConnectionString` connection string name, and that its `applicationName` setting has been set to a value of SecurityTutorials.</span></span> <span data-ttu-id="ae7c9-431">Ponadto ustawienie `requiresUniqueEmail` zostało ustawione na `true`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-431">Additionally, the `requiresUniqueEmail` setting has been set to `true`.</span></span> <span data-ttu-id="ae7c9-432">Wszystkie inne opcje konfiguracji są identyczne z wartościami w `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-432">All other configuration options are identical to the values in `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="ae7c9-433">Jeśli chcesz, możesz wprowadzić dowolne modyfikacje konfiguracji w tym miejscu.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-433">Feel free to make any configuration modifications here, if you wish.</span></span> <span data-ttu-id="ae7c9-434">Można na przykład wzmocnić siłę hasła, wymagając dwóch znaków innych niż alfanumeryczne zamiast jednej lub przez zwiększenie długości hasła do ośmiu znaków zamiast siedmiu.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-434">For example, you could tighten the password strength by requiring two non-alphanumeric characters instead of one, or by increasing the password length to eight characters instead of seven.</span></span>

> [!NOTE]
> <span data-ttu-id="ae7c9-435">Należy przypomnieć, że platforma członkowska pozwala na partycjonowanie pojedynczego magazynu użytkowników w wielu aplikacjach.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-435">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="ae7c9-436">Ustawienie `applicationName` dostawcy członkostwa wskazuje, której aplikacji używa dostawca podczas pracy z magazynem użytkowników.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-436">The Membership provider's `applicationName` setting indicates what application the provider uses when working with the user store.</span></span> <span data-ttu-id="ae7c9-437">Ważne jest, aby jawnie ustawić wartość ustawienia konfiguracji `applicationName`, ponieważ jeśli `applicationName` nie jest jawnie ustawiona, jest przypisywana do wirtualnej ścieżki katalogu głównego aplikacji sieci Web w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-437">It is important that you explicitly set a value for the `applicationName` configuration setting because if the `applicationName` is not explicitly set, it is assigned to the web application's virtual root path at runtime.</span></span> <span data-ttu-id="ae7c9-438">Działa to tak długo, jak wirtualna ścieżka katalogu głównego aplikacji nie zmienia się, ale jeśli aplikacja zostanie przeniesiona do innej ścieżki, ustawienie `applicationName` zostanie zmienione.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-438">This works fine as long as the application's virtual root path doesn't change, but if you move the application to a different path, the `applicationName` setting will change too.</span></span> <span data-ttu-id="ae7c9-439">W takim przypadku dostawca członkostwa rozpocznie pracę z inną partycją aplikacji niż została wcześniej użyta.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-439">When this happens, the Membership provider will start working with a different application partition than was previously used.</span></span> <span data-ttu-id="ae7c9-440">Konta użytkowników utworzone przed przeniesieniem będą znajdować się w innej partycji aplikacji, a użytkownicy nie będą już mogli logować się do lokacji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-440">User accounts created prior to the move will reside in a different application partition and those users will no longer be able to log into the site.</span></span> <span data-ttu-id="ae7c9-441">Aby zapoznać się z bardziej szczegółowymi dyskusjami na ten temat, zobacz [zawsze ustawiać właściwość `applicationName` podczas konfigurowania członkostwa ASP.NET 2,0 i innych dostawców](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-441">For a more in-depth discussion on this matter, see [Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other providers](https://weblogs.asp.net/scottgu/443634).</span></span>

## <a name="summary"></a><span data-ttu-id="ae7c9-442">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="ae7c9-442">Summary</span></span>

<span data-ttu-id="ae7c9-443">W tym momencie mamy bazę danych ze skonfigurowanymi usługami aplikacji (`SecurityTutorials.mdf`) i skonfigurowano naszą aplikację sieci Web tak, aby platforma członkowska korzystała z zarejestrowanego dostawcy `SecurityTutorialsSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-443">At this point we have a database with the configured application services (`SecurityTutorials.mdf`) and have configured our web application so that the Membership framework uses the `SecurityTutorialsSqlMembershipProvider` provider we just registered.</span></span> <span data-ttu-id="ae7c9-444">Ten zarejestrowany dostawca jest typu `SqlMembershipProvider` i ma `connectionStringName` ustawiony na odpowiednie parametry połączenia (`SecurityTutorialsConnectionString`), a jego wartość `applicationName` jawnie ustawiona.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-444">This registered provider is of type `SqlMembershipProvider` and has its `connectionStringName` set to the appropriate connection string (`SecurityTutorialsConnectionString`) and its `applicationName` value explicitly set.</span></span>

<span data-ttu-id="ae7c9-445">Teraz jesteśmy gotowi do korzystania z platformy członkostwa z naszej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-445">We are now ready to use the Membership framework from our application.</span></span> <span data-ttu-id="ae7c9-446">W następnym samouczku sprawdzimy, jak utworzyć nowe konta użytkowników.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-446">In the next tutorial we will examine how to create new user accounts.</span></span> <span data-ttu-id="ae7c9-447">Poniższe informacje pozwolą na uwierzytelnianie użytkowników, wykonywanie autoryzacji opartej na użytkownikach i przechowywanie dodatkowych informacji dotyczących użytkowników w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-447">Following that we will explore authenticating users, performing user-based authorization, and storing additional user-related information in the database.</span></span>

<span data-ttu-id="ae7c9-448">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="ae7c9-448">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="ae7c9-449">Dalsze informacje</span><span class="sxs-lookup"><span data-stu-id="ae7c9-449">Further Reading</span></span>

<span data-ttu-id="ae7c9-450">Aby uzyskać więcej informacji na temat tematów omówionych w tym samouczku, zapoznaj się z następującymi zasobami:</span><span class="sxs-lookup"><span data-stu-id="ae7c9-450">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="ae7c9-451">Zawsze ustawiaj Właściwość `applicationName` podczas konfigurowania członkostwa ASP.NET 2,0 i innych dostawców</span><span class="sxs-lookup"><span data-stu-id="ae7c9-451">Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other providers</span></span>](https://weblogs.asp.net/scottgu/443634)
- [<span data-ttu-id="ae7c9-452">Konfigurowanie Usługi aplikacji ASP.NET 2,0 do użycia SQL Server 2000 lub SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="ae7c9-452">Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005</span></span>](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)
- [<span data-ttu-id="ae7c9-453">Pobierz SQL Server Management Studio Express Edition</span><span class="sxs-lookup"><span data-stu-id="ae7c9-453">Download SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)
- [<span data-ttu-id="ae7c9-454">Badanie członkostwa, ról i profilu ASP.NET 2,0 s</span><span class="sxs-lookup"><span data-stu-id="ae7c9-454">Examining ASP.NET 2.0�s Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="ae7c9-455">Element `<add>` dla dostawców członkostwa</span><span class="sxs-lookup"><span data-stu-id="ae7c9-455">The `<add>` Element for providers for Membership</span></span>](https://msdn.microsoft.com/library/whae3t94.aspx)
- [<span data-ttu-id="ae7c9-456">Element `<membership>`</span><span class="sxs-lookup"><span data-stu-id="ae7c9-456">The `<membership>` Element</span></span>](https://msdn.microsoft.com/library/1b9hw62f.aspx)
- [<span data-ttu-id="ae7c9-457">Element `<providers>` dla członkostwa</span><span class="sxs-lookup"><span data-stu-id="ae7c9-457">The `<providers>` Element for Membership</span></span>](https://msdn.microsoft.com/library/6d4936ht.aspx)
- [<span data-ttu-id="ae7c9-458">Używanie `<clear />` podczas dodawania dostawców</span><span class="sxs-lookup"><span data-stu-id="ae7c9-458">Using `<clear />` When Adding providers</span></span>](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)
- [<span data-ttu-id="ae7c9-459">Praca bezpośrednio z `SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="ae7c9-459">Working Directly with the `SqlMembershipProvider`</span></span>](http://aspnet.4guysfromrolla.com/articles/091207-1.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="ae7c9-460">Szkolenia wideo dotyczące tematów zawartych w tym samouczku</span><span class="sxs-lookup"><span data-stu-id="ae7c9-460">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="ae7c9-461">Objaśnienie członkostwa platformy ASP.NET</span><span class="sxs-lookup"><span data-stu-id="ae7c9-461">Understanding ASP.NET Memberships</span></span>](../../../videos/authentication/understanding-aspnet-memberships.md)
- [<span data-ttu-id="ae7c9-462">Konfigurowanie programu SQL do pracy ze schematami członkostwa</span><span class="sxs-lookup"><span data-stu-id="ae7c9-462">Configuring SQL To Work with Membership Schemas</span></span>](../../../videos/authentication/configuring-sql-to-work-with-membership-schemas.md)
- [<span data-ttu-id="ae7c9-463">Modyfikowanie ustawień członkostwa w domyślnym schemacie członkostwa</span><span class="sxs-lookup"><span data-stu-id="ae7c9-463">Changing Membership Settings in the Default Membership Schema</span></span>](../../../videos/authentication/changing-membership-settings-in-the-default-membership-schema.md)

### <a name="about-the-author"></a><span data-ttu-id="ae7c9-464">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="ae7c9-464">About the Author</span></span>

<span data-ttu-id="ae7c9-465">Scott Mitchell, autor wielu książek ASP/ASP. NET Books i założyciel of 4GuysFromRolla.com, pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-465">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="ae7c9-466">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-466">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="ae7c9-467">Jego Najnowsza książka to *[Sams ASP.NET 2,0 w ciągu 24 godzin](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)* .</span><span class="sxs-lookup"><span data-stu-id="ae7c9-467">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="ae7c9-468">Scott można uzyskać w [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) lub za pośrednictwem swojego blogu w [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-468">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="ae7c9-469">Specjalne podziękowania</span><span class="sxs-lookup"><span data-stu-id="ae7c9-469">Special Thanks To</span></span>

<span data-ttu-id="ae7c9-470">Ta seria samouczków została sprawdzona przez wielu przydatnych recenzentów.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-470">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="ae7c9-471">Recenzent potencjalnych klientów dla tego samouczka został Alicja Maziarz.</span><span class="sxs-lookup"><span data-stu-id="ae7c9-471">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="ae7c9-472">Chcesz przeglądać moje nadchodzące artykuły MSDN?</span><span class="sxs-lookup"><span data-stu-id="ae7c9-472">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="ae7c9-473">Jeśli tak, upuść mi linię w [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span><span class="sxs-lookup"><span data-stu-id="ae7c9-473">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ae7c9-474">[Poprzednie](storing-additional-user-information-cs.md)
> [dalej](creating-user-accounts-vb.md)</span><span class="sxs-lookup"><span data-stu-id="ae7c9-474">[Previous](storing-additional-user-information-cs.md)
[Next](creating-user-accounts-vb.md)</span></span>

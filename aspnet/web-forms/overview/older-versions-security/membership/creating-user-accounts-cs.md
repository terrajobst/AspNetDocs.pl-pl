---
uid: web-forms/overview/older-versions-security/membership/creating-user-accounts-cs
title: Tworzenie kont użytkowników (C#) | Dokumentacja firmy Microsoft
author: rick-anderson
description: W tym samouczku omówimy będzie tworzenie nowych kont użytkowników przy użyciu struktury członkostwa (za pośrednictwem SqlMembershipProvider). Zobaczymy sposobu tworzenia nowych nam...
ms.author: riande
ms.date: 01/18/2008
ms.assetid: f175278c-6079-4d91-b9b4-2493ed43d9ec
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-user-accounts-cs
msc.type: authoredcontent
ms.openlocfilehash: 34d9229e9b49e0022b1e40d10444c2f4aff2161d
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/01/2019
ms.locfileid: "57077435"
---
<a name="creating-user-accounts-c"></a><span data-ttu-id="d68ce-104">Tworzenie kont użytkowników (C#)</span><span class="sxs-lookup"><span data-stu-id="d68ce-104">Creating User Accounts (C#)</span></span>
====================
<span data-ttu-id="d68ce-105">przez [Bento Scott](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="d68ce-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="d68ce-106">[Pobierz program Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_05_CS.zip) lub [Pobierz plik PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial05_CreatingUsers_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="d68ce-106">[Download Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_05_CS.zip) or [Download PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial05_CreatingUsers_cs.pdf)</span></span>

> <span data-ttu-id="d68ce-107">W tym samouczku omówimy będzie tworzenie nowych kont użytkowników przy użyciu struktury członkostwa (za pośrednictwem SqlMembershipProvider).</span><span class="sxs-lookup"><span data-stu-id="d68ce-107">In this tutorial we will explore using the Membership framework (via the SqlMembershipProvider) to create new user accounts.</span></span> <span data-ttu-id="d68ce-108">Zobaczymy sposobu tworzenia nowych użytkowników, programowo i za pośrednictwem ASP. Kontrolki CreateUserWizard wbudowanej w sieci.</span><span class="sxs-lookup"><span data-stu-id="d68ce-108">We will see how to create new users programmatically and through ASP.NET's built-in CreateUserWizard control.</span></span>


## <a name="introduction"></a><span data-ttu-id="d68ce-109">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="d68ce-109">Introduction</span></span>

<span data-ttu-id="d68ce-110">W <a id="_msoanchor_1"> </a> [poprzedni Samouczek](creating-the-membership-schema-in-sql-server-cs.md) zainstalowanej schemat usług aplikacji w bazie danych, który dodano tabel, widoków i wymagane przez procedury składowane `SqlMembershipProvider` i `SqlRoleProvider`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-110">In the <a id="_msoanchor_1"></a>[preceding tutorial](creating-the-membership-schema-in-sql-server-cs.md) we installed the application services schema in a database, which added the tables, views, and stored procedures needed by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span> <span data-ttu-id="d68ce-111">Spowodowało to infrastruktura, będą potrzebne w pozostałej części samouczków w tej serii.</span><span class="sxs-lookup"><span data-stu-id="d68ce-111">This created the infrastructure we will need for the remainder of the tutorials in this series.</span></span> <span data-ttu-id="d68ce-112">W tym samouczku przeanalizujemy, przy użyciu struktury członkostwa (za pośrednictwem `SqlMembershipProvider`) do tworzenia nowych kont użytkowników.</span><span class="sxs-lookup"><span data-stu-id="d68ce-112">In this tutorial we will explore using the Membership framework (via the `SqlMembershipProvider`) to create new user accounts.</span></span> <span data-ttu-id="d68ce-113">Zobaczymy sposobu tworzenia nowych użytkowników, programowo i za pośrednictwem ASP. Kontrolki CreateUserWizard wbudowanej w sieci.</span><span class="sxs-lookup"><span data-stu-id="d68ce-113">We will see how to create new users programmatically and through ASP.NET's built-in CreateUserWizard control.</span></span>

<span data-ttu-id="d68ce-114">Oprócz nauka tworzenia nowych kont użytkowników, firma Microsoft będzie również trzeba aktualizacji wersji demonstracyjnej witryny sieci Web, utworzyliśmy najpierw w *<a id="_msoanchor_2"> </a> [omówienie uwierzytelniania formularzy](../introduction/an-overview-of-forms-authentication-cs.md)* samouczek i następnie rozszerzone w  *<a id="https://www.asp.net/learn/security/tutorial-03-cs.aspx"> </a> Konfiguracja uwierzytelniania formularzy i Tematy zaawansowane* samouczka.</span><span class="sxs-lookup"><span data-stu-id="d68ce-114">In addition to learning how to create new user accounts, we will also need to update the demo website we first created in the *<a id="_msoanchor_2"></a>[An Overview of Forms Authentication](../introduction/an-overview-of-forms-authentication-cs.md)* tutorial and then enhanced in the *<a id="https://www.asp.net/learn/security/tutorial-03-cs.aspx"></a> Forms Authentication Configuration and Advanced Topics* tutorial.</span></span> <span data-ttu-id="d68ce-115">Nasze demonstracyjnej aplikacji internetowej zawiera stronę logowania, która sprawdza poprawność poświadczeń użytkownika względem pary trwale zakodowane nazwy użytkownika i hasła.</span><span class="sxs-lookup"><span data-stu-id="d68ce-115">Our demo web application has a login page that validates users' credentials against hard-coded username/password pairs.</span></span> <span data-ttu-id="d68ce-116">Ponadto `Global.asax` zawiera kod, który tworzy niestandardowy `IPrincipal` i `IIdentity` obiektów dla uwierzytelnionych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="d68ce-116">Moreover, `Global.asax` includes code that creates custom `IPrincipal` and `IIdentity` objects for authenticated users.</span></span> <span data-ttu-id="d68ce-117">Zaktualizujemy strony logowania do zweryfikowania poświadczeń użytkowników względem framework członkostwa i usunąć logiki niestandardowej jednostki i tożsamości.</span><span class="sxs-lookup"><span data-stu-id="d68ce-117">We will update the login page to validate users' credentials against the Membership framework and remove the custom principal and identity logic.</span></span>

<span data-ttu-id="d68ce-118">Zaczynajmy!</span><span class="sxs-lookup"><span data-stu-id="d68ce-118">Let's get started!</span></span>

## <a name="the-forms-authentication-and-membership-checklist"></a><span data-ttu-id="d68ce-119">Uwierzytelnianie formularzy i listę kontrolną członkostwa</span><span class="sxs-lookup"><span data-stu-id="d68ce-119">The Forms Authentication and Membership Checklist</span></span>

<span data-ttu-id="d68ce-120">Przed rozpoczęciem pracy z członkostwa w ramach możemy przyjrzeć się Przejrzyj ważne czynności, które przekierowaliśmy osiągnąć tego punktu.</span><span class="sxs-lookup"><span data-stu-id="d68ce-120">Before we begin working with the Membership framework, let's take a moment to review the important steps we have taken to reach this point.</span></span> <span data-ttu-id="d68ce-121">Korzystając z członkostwa w ramach `SqlMembershipProvider` w scenariuszu uwierzytelnianie oparte na formularzach, poniższe kroki należy wykonać przed ich wprowadzeniem funkcjonalności członkostwa w aplikacji sieci web:</span><span class="sxs-lookup"><span data-stu-id="d68ce-121">When using the Membership framework with the `SqlMembershipProvider` in a forms-based authentication scenario, the following steps need to be performed prior to implementing Membership functionality in your web application:</span></span>

1. <span data-ttu-id="d68ce-122">**Włącz uwierzytelnianie oparte na formularzach.**</span><span class="sxs-lookup"><span data-stu-id="d68ce-122">**Enable forms-based authentication.**</span></span> <span data-ttu-id="d68ce-123">Tak jak Omówiliśmy to w  *<a id="_msoanchor_4"> </a> [omówienie uwierzytelniania formularzy](../introduction/an-overview-of-forms-authentication-cs.md)*, uwierzytelnianie formularzy jest włączone, edytując `Web.config` i ustawienie `<authentication>` elementu `mode` atrybutu `Forms`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-123">As we discussed in *<a id="_msoanchor_4"></a>[An Overview of Forms Authentication](../introduction/an-overview-of-forms-authentication-cs.md)*, forms authentication is enabled by editing `Web.config` and setting the `<authentication>` element's `mode` attribute to `Forms`.</span></span> <span data-ttu-id="d68ce-124">Za pomocą uwierzytelniania formularzy, włączone, każdego żądania przychodzącego jest sprawdzany pod kątem *biletu uwierzytelniania formularzy*, jeśli jest obecny, identyfikuje obiekt żądający.</span><span class="sxs-lookup"><span data-stu-id="d68ce-124">With forms authentication enabled, each incoming request is examined for a *forms authentication ticket*, which, if present, identifies the requestor.</span></span>
2. <span data-ttu-id="d68ce-125">**Schemat usług aplikacji należy dodać do odpowiedniej bazy danych.**</span><span class="sxs-lookup"><span data-stu-id="d68ce-125">**Add the application services schema to the appropriate database.**</span></span> <span data-ttu-id="d68ce-126">Korzystając z `SqlMembershipProvider` musimy zainstalować schemat usług aplikacji z bazą danych.</span><span class="sxs-lookup"><span data-stu-id="d68ce-126">When using the `SqlMembershipProvider` we need to install the application services schema to a database.</span></span> <span data-ttu-id="d68ce-127">Zazwyczaj ten schemat jest dodawany do tej samej bazy danych, który zawiera model danych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d68ce-127">Usually this schema is added to the same database that holds the application's data model.</span></span> <span data-ttu-id="d68ce-128">*<a id="_msoanchor_5"> </a> [Tworzenie schematu członkostwa w programie SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* przyjrzano się przy użyciu samouczka `aspnet_regsql.exe` narzędzie, aby to zrobić.</span><span class="sxs-lookup"><span data-stu-id="d68ce-128">The *<a id="_msoanchor_5"></a>[Creating the Membership Schema in SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* tutorial looked at using the `aspnet_regsql.exe` tool to accomplish this.</span></span>
3. <span data-ttu-id="d68ce-129">**Dostosuj ustawienia aplikacji sieci Web, aby odwoływać się do bazy danych z kroku 2.**</span><span class="sxs-lookup"><span data-stu-id="d68ce-129">**Customize the Web Application's Settings to reference the database from step 2.**</span></span> <span data-ttu-id="d68ce-130">*Tworzenie schematu członkostwa w programie SQL Server* samouczku przedstawiono dwa sposoby konfigurowania aplikacji sieci web tak, aby `SqlMembershipProvider` użyć bazy danych wybrane w kroku 2: modyfikując `LocalSqlServer` nazwa parametrów połączenia; lub, dodając nowe zarejestrowanego dostawcy do listy dostawców w ramach członkostwa i Dostosowywanie tego nowego dostawcę do korzystania z bazy danych z kroku 2.</span><span class="sxs-lookup"><span data-stu-id="d68ce-130">The *Creating the Membership Schema in SQL Server* tutorial showed two ways to configure the web application so that the `SqlMembershipProvider` would use the database selected in step 2: by modifying the `LocalSqlServer` connection string name; or by adding a new registered provider to the list of Membership framework providers and customizing that new provider to use the database from step 2.</span></span>

<span data-ttu-id="d68ce-131">Podczas tworzenia aplikacji sieci web, która używa `SqlMembershipProvider` i uwierzytelniania opartego na formularzach, konieczne będzie wykonywać te trzy kroki przed użyciem `Membership` klasy lub kontrolek logowania programu ASP.NET w sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d68ce-131">When building a web application that uses the `SqlMembershipProvider` and forms-based authentication, you will need to perform these three steps before using the `Membership` class or the ASP.NET Login Web controls.</span></span> <span data-ttu-id="d68ce-132">Ponieważ już wykonane następujące kroki w poprzednich samouczkach, jesteśmy gotowi rozpocząć korzystanie z w ramach członkostwa!</span><span class="sxs-lookup"><span data-stu-id="d68ce-132">Since we already performed these steps in previous tutorials, we are ready to start using the Membership framework!</span></span>

## <a name="step-1-adding-new-aspnet-pages"></a><span data-ttu-id="d68ce-133">Krok 1. Dodawanie nowej strony ASP.NET</span><span class="sxs-lookup"><span data-stu-id="d68ce-133">Step 1: Adding New ASP.NET Pages</span></span>

<span data-ttu-id="d68ce-134">W tym samouczku i dalej trzech firma Microsoft będzie można badanie różnych funkcji związanych z członkostwa i możliwości.</span><span class="sxs-lookup"><span data-stu-id="d68ce-134">In this tutorial and the next three we will be examining various Membership-related functions and capabilities.</span></span> <span data-ttu-id="d68ce-135">Musimy szereg stron ASP.NET do zaimplementowania tematy dotyczące badania w tych samouczkach.</span><span class="sxs-lookup"><span data-stu-id="d68ce-135">We will need a series of ASP.NET pages to implement the topics examined throughout these tutorials.</span></span> <span data-ttu-id="d68ce-136">Utwórzmy tych stron, a następnie plik mapy witryny `(Web.sitemap)`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-136">Let's create those pages and then a site map file `(Web.sitemap)`.</span></span>

<span data-ttu-id="d68ce-137">Rozpocznij od utworzenia nowego folderu w projekcie o nazwie `Membership`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-137">Start by creating a new folder in the project named `Membership`.</span></span> <span data-ttu-id="d68ce-138">Następnie dodaj pięć nowych stron ASP.NET do `Membership` folderze łączenia każdego stronę z `Site.master` strony wzorcowej.</span><span class="sxs-lookup"><span data-stu-id="d68ce-138">Next, add five new ASP.NET pages to the `Membership` folder, linking each page with the `Site.master` master page.</span></span> <span data-ttu-id="d68ce-139">Nazwa strony:</span><span class="sxs-lookup"><span data-stu-id="d68ce-139">Name the pages:</span></span>

- `CreatingUserAccounts.aspx`
- `UserBasedAuthorization.aspx`
- `EnhancedCreateUserWizard.aspx`
- `AdditionalUserInfo.aspx`
- `Guestbook.aspx`

<span data-ttu-id="d68ce-140">Na tym etapie projektu w Eksploratorze rozwiązań powinny wyglądać podobnie do ekranu zrzut, jak pokazano na rysunku 1.</span><span class="sxs-lookup"><span data-stu-id="d68ce-140">At this point your project's Solution Explorer should look similar to the screen shot shown in Figure 1.</span></span>


<span data-ttu-id="d68ce-141">[![Pięć nowych stron zostały dodane do folderu członkostwa](creating-user-accounts-cs/_static/image2.png)](creating-user-accounts-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="d68ce-141">[![Five New Pages Have Been Added to the Membership Folder](creating-user-accounts-cs/_static/image2.png)](creating-user-accounts-cs/_static/image1.png)</span></span>

<span data-ttu-id="d68ce-142">**Rysunek 1**: Pięć nowych stron zostały dodane do `Membership` Folder ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="d68ce-142">**Figure 1**: Five New Pages Have Been Added to the `Membership` Folder  ([Click to view full-size image](creating-user-accounts-cs/_static/image3.png))</span></span>


<span data-ttu-id="d68ce-143">Każda strona w tym momencie powinna mieć dwóch kontrolek zawartości, jeden dla każdej strony wzorcowej kontrolek ContentPlaceHolder: `MainContent` i `LoginContent`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-143">Each page should, at this point, have the two Content controls, one for each of the master page's ContentPlaceHolders: `MainContent` and `LoginContent`.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample1.aspx)]

<span data-ttu-id="d68ce-144">Pamiętamy `LoginContent` firmy ContentPlaceHolder domyślne znaczników Wyświetla łącze do logowania się lub wylogowywania z lokacji, w zależności od tego, czy użytkownik jest uwierzytelniony.</span><span class="sxs-lookup"><span data-stu-id="d68ce-144">Recall that the `LoginContent` ContentPlaceHolder's default markup displays a link to log on or log off the site, depending on whether the user is authenticated.</span></span> <span data-ttu-id="d68ce-145">Obecność `Content2` formantu zawartości, jednak zastępuje znaczników domyślnej strony wzorcowej.</span><span class="sxs-lookup"><span data-stu-id="d68ce-145">The presence of the `Content2` Content control, however, overrides the master page's default markup.</span></span> <span data-ttu-id="d68ce-146">Tak jak Omówiliśmy to w *<a id="_msoanchor_6"> </a> [omówienie uwierzytelniania formularzy](../introduction/an-overview-of-forms-authentication-cs.md)* samouczek, jest to przydatne na stronach, gdy nie chcemy wyświetlić opcje związane z logowaniem w lewej kolumnie.</span><span class="sxs-lookup"><span data-stu-id="d68ce-146">As we discussed in *<a id="_msoanchor_6"></a>[An Overview of Forms Authentication](../introduction/an-overview-of-forms-authentication-cs.md)* tutorial, this is useful in pages where we do not want to display login-related options in the left column.</span></span>

<span data-ttu-id="d68ce-147">Dla tych pięciu stron, chcemy wyświetlić znaczników domyślną stronę wzorcową dla `LoginContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="d68ce-147">For these five pages, however, we want to show the master page's default markup for the `LoginContent` ContentPlaceHolder.</span></span> <span data-ttu-id="d68ce-148">W związku z tym, Usuń oznaczeniu deklaracyjnym dla `Content2` formantu zawartości.</span><span class="sxs-lookup"><span data-stu-id="d68ce-148">Therefore, remove the declarative markup for the `Content2` Content control.</span></span> <span data-ttu-id="d68ce-149">Po wykonaniu tej czynności, wszystkich znaczników pięć strony powinna zawierać tylko jeden formant zawartości.</span><span class="sxs-lookup"><span data-stu-id="d68ce-149">After doing so, each of the five page's markup should contain just one Content control.</span></span>

## <a name="step-2-creating-the-site-map"></a><span data-ttu-id="d68ce-150">Krok 2. Tworzenie mapy witryny</span><span class="sxs-lookup"><span data-stu-id="d68ce-150">Step 2: Creating the Site Map</span></span>

<span data-ttu-id="d68ce-151">Wszystkie z wyjątkiem najbardziej trivial witryn sieci Web konieczne zaimplementowanie pewnego rodzaju interfejs użytkownika nawigacji.</span><span class="sxs-lookup"><span data-stu-id="d68ce-151">All but the most trivial websites need to implement some form of a navigational user interface.</span></span> <span data-ttu-id="d68ce-152">Interfejs użytkownika nawigacji może być prosta lista łączy do różnych sekcji witryny.</span><span class="sxs-lookup"><span data-stu-id="d68ce-152">The navigation user interface may be a simple list of links to the various sections of the site.</span></span> <span data-ttu-id="d68ce-153">Alternatywnie te linki mogą rozmieszczone w menu lub widok drzewa.</span><span class="sxs-lookup"><span data-stu-id="d68ce-153">Alternatively, these links may be arranged into menus or tree views.</span></span> <span data-ttu-id="d68ce-154">Jako programiści strony Tworzenie interfejsu użytkownika nawigacji to dopiero połowa wątku.</span><span class="sxs-lookup"><span data-stu-id="d68ce-154">As page developers, creating the navigational user interface is only half of the story.</span></span> <span data-ttu-id="d68ce-155">Należy również niektóre oznacza, że do definiowania struktury logicznej lokacji w sposób łatwego w utrzymaniu i można aktualizować.</span><span class="sxs-lookup"><span data-stu-id="d68ce-155">We also need some means to define the site's logical structure in a maintainable and updateable fashion.</span></span> <span data-ttu-id="d68ce-156">Nowe strony są dodawane lub usuwane istniejących stron, chcemy można było zaktualizować pojedyncze źródło — Mapa witryny — i mają te modyfikacje zostaną uwzględnione na interfejs użytkownika nawigacji strony.</span><span class="sxs-lookup"><span data-stu-id="d68ce-156">As new pages are added or existing pages removed, we want to be able to update a single source – the site map – and have those modifications reflected across the site's navigational user interface.</span></span>

<span data-ttu-id="d68ce-157">Te dwa zadania — definiujące mapowanie lokacji i implementującej interfejs użytkownika nawigacji, oparte na mapie witryny — jest łatwe dzięki rozłożeniu w ramach Mapa witryny, a następnie dodać formantów nawigacji w sieci Web na platformie ASP.NET w wersji 2.0.</span><span class="sxs-lookup"><span data-stu-id="d68ce-157">These two tasks – defining the site map and implementing a navigational user interface based on the site map – are easy to accomplish thanks to the Site Map framework and the Navigation Web controls added in ASP.NET version 2.0.</span></span> <span data-ttu-id="d68ce-158">Zezwala na framework mapy witryny dla deweloperów do definiowania mapy witryny sieci Web i dostępu do niego za pomocą programowego interfejsu API ( [ `SiteMap` klasy](https://msdn.microsoft.com/library/system.web.sitemap.aspx)).</span><span class="sxs-lookup"><span data-stu-id="d68ce-158">The Site Map framework allows for a developer to define a site map and then to access it through a programmatic API (the [`SiteMap` class](https://msdn.microsoft.com/library/system.web.sitemap.aspx)).</span></span> <span data-ttu-id="d68ce-159">Wbudowane kontrolki nawigacji w sieci Web obejmują [formant Menu](https://msdn.microsoft.com/library/bz09dy46.aspx), [kontrolki TreeView](https://msdn.microsoft.com/library/3eafky27.aspx)i [kontrolki ścieżki mapy witryny](https://msdn.microsoft.com/library/3eafky27.aspx).</span><span class="sxs-lookup"><span data-stu-id="d68ce-159">The built-in Navigation Web controls include a [Menu control](https://msdn.microsoft.com/library/bz09dy46.aspx), the [TreeView control](https://msdn.microsoft.com/library/3eafky27.aspx), and the [SiteMapPath control](https://msdn.microsoft.com/library/3eafky27.aspx).</span></span>

<span data-ttu-id="d68ce-160">Podobnie jak struktury członkostwa i ról kompilowanych framework mapy witryny [modelu dostawca](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="d68ce-160">Like the Membership and Roles frameworks, the Site Map framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx).</span></span> <span data-ttu-id="d68ce-161">Zadanie klasy dostawcy mapy witryny jest do generowania struktury w pamięci używane przez `SiteMap` klasy w trwałym magazynie danych, takich jak plik XML lub tabeli bazy danych.</span><span class="sxs-lookup"><span data-stu-id="d68ce-161">The job of the Site Map provider class is to generate the in-memory structure used by the `SiteMap` class from a persistent data store, such as an XML file or a database table.</span></span> <span data-ttu-id="d68ce-162">.NET Framework, który jest dostarczany z domyślnego dostawcy mapy witryny, która odczytuje dane mapy witryny z pliku XML ([`XmlSiteMapProvider`](https://msdn.microsoft.com/library/system.web.xmlsitemapprovider.aspx)), i jest to dostawca, firma Microsoft będzie używana w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="d68ce-162">The .NET Framework ships with a default Site Map provider that reads the site map data from an XML file ([`XmlSiteMapProvider`](https://msdn.microsoft.com/library/system.web.xmlsitemapprovider.aspx)), and this is the provider we will be using in this tutorial.</span></span> <span data-ttu-id="d68ce-163">Niektóre alternatywnych implementacji dostawcy mapy witryny można znaleźć w sekcji dalsze odczyty na końcu tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="d68ce-163">For some alternate Site Map provider implementations, refer to the Further Readings section at the end of this tutorial.</span></span>

<span data-ttu-id="d68ce-164">Domyślnego dostawcy mapy witryny oczekuje, że poprawnie sformatowany plik XML o nazwie `Web.sitemap` istnieć katalogu głównego.</span><span class="sxs-lookup"><span data-stu-id="d68ce-164">The default Site Map provider expects a properly-formatted XML file named `Web.sitemap` to exist the root directory.</span></span> <span data-ttu-id="d68ce-165">Ponieważ używamy tego domyślnego dostawcę, należy dodać takiego pliku oraz zdefiniować strukturę mapy witryny w odpowiednim formacie XML.</span><span class="sxs-lookup"><span data-stu-id="d68ce-165">Since we are using this default provider, we need to add such a file and define the site map's structure in the appropriate XML format.</span></span> <span data-ttu-id="d68ce-166">Aby dodać plik, kliknij prawym przyciskiem myszy nazwę projektu w Eksploratorze rozwiązań i wybierz polecenie Dodaj nowy element.</span><span class="sxs-lookup"><span data-stu-id="d68ce-166">To add the file, right-click on the project name in Solution Explorer and choose Add New Item.</span></span> <span data-ttu-id="d68ce-167">W oknie dialogowym, zoptymalizowany pod kątem można dodać pliku typu mapy witryny o nazwie `Web.sitemap`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-167">From the dialog box, opt to add a file of type Site Map named `Web.sitemap`.</span></span>


<span data-ttu-id="d68ce-168">[![Dodaj plik o nazwie Web.sitemap do katalogu głównego projektu](creating-user-accounts-cs/_static/image5.png)](creating-user-accounts-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="d68ce-168">[![Add a File Named Web.sitemap to the Project's Root Directory](creating-user-accounts-cs/_static/image5.png)](creating-user-accounts-cs/_static/image4.png)</span></span>

<span data-ttu-id="d68ce-169">**Rysunek 2**: Dodaj plik o nazwie `Web.sitemap` do katalogu głównego projektu ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="d68ce-169">**Figure 2**: Add a File Named `Web.sitemap` to the Project's Root Directory  ([Click to view full-size image](creating-user-accounts-cs/_static/image6.png))</span></span>


<span data-ttu-id="d68ce-170">Plik mapy witryny XML definiuje strukturę witryny sieci Web jako hierarchia.</span><span class="sxs-lookup"><span data-stu-id="d68ce-170">The XML site map file defines the website's structure as a hierarchy.</span></span> <span data-ttu-id="d68ce-171">To hierarchiczna relacja jest formowana w pliku XML przy użyciu pochodzenie elementu `<siteMapNode>` elementów.</span><span class="sxs-lookup"><span data-stu-id="d68ce-171">This hierarchical relationship is modeled in the XML file via the ancestry of the `<siteMapNode>` elements.</span></span> <span data-ttu-id="d68ce-172">`Web.sitemap` Musi zaczynać się `<siteMap>` węzła nadrzędnego, który ma dokładnie jedno `<siteMapNode>` podrzędnych.</span><span class="sxs-lookup"><span data-stu-id="d68ce-172">The `Web.sitemap` must start with a `<siteMap>` parent node that has precisely one `<siteMapNode>` child.</span></span> <span data-ttu-id="d68ce-173">Tym najwyższego poziomu `<siteMapNode>` element reprezentuje katalog główny hierarchii i może mieć dowolną liczbę węzłów podrzędnych.</span><span class="sxs-lookup"><span data-stu-id="d68ce-173">This top-level `<siteMapNode>` element represents the root of the hierarchy, and may have an arbitrary number of descendent nodes.</span></span> <span data-ttu-id="d68ce-174">Każdy `<siteMapNode>` element musi zawierać `title` atrybutu i może opcjonalnie obejmować `url` i `description` atrybutów, między innymi; każdego niepustego `url` atrybutu musi być unikatowa.</span><span class="sxs-lookup"><span data-stu-id="d68ce-174">Each `<siteMapNode>` element must include a `title` attribute and may optionally include `url` and `description` attributes, among others; each non-empty `url` attribute must be unique.</span></span>

<span data-ttu-id="d68ce-175">Wprowadź następujący kod XML do `Web.sitemap` pliku:</span><span class="sxs-lookup"><span data-stu-id="d68ce-175">Enter the following XML into the `Web.sitemap` file:</span></span>

[!code-xml[Main](creating-user-accounts-cs/samples/sample2.xml)]

<span data-ttu-id="d68ce-176">Powyższe znaczników mapy witryny definiuje hierarchię pokazany na rysunku 3.</span><span class="sxs-lookup"><span data-stu-id="d68ce-176">The above site map markup defines the hierarchy shown in Figure 3.</span></span>


<span data-ttu-id="d68ce-177">[![Mapa witryny reprezentuje hierarchicznej struktury nawigacyjnej](creating-user-accounts-cs/_static/image8.png)](creating-user-accounts-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="d68ce-177">[![The Site Map Represents a Hierarchical Navigational Structure](creating-user-accounts-cs/_static/image8.png)](creating-user-accounts-cs/_static/image7.png)</span></span>

<span data-ttu-id="d68ce-178">**Rysunek 3**: Mapa witryny reprezentuje hierarchicznej struktury nawigacyjnej ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="d68ce-178">**Figure 3**: The Site Map Represents a Hierarchical Navigational Structure  ([Click to view full-size image](creating-user-accounts-cs/_static/image9.png))</span></span>


## <a name="step-3-updating-the-master-page-to-include-a-navigational-user-interface"></a><span data-ttu-id="d68ce-179">Krok 3. Aktualizowanie strony wzorcowej, aby uwzględnić interfejs użytkownika nawigacji</span><span class="sxs-lookup"><span data-stu-id="d68ce-179">Step 3: Updating the Master Page to Include a Navigational User Interface</span></span>

<span data-ttu-id="d68ce-180">Program ASP.NET zawiera szereg związanych z nawigacją kontrolki sieci Web, dotyczące projektowania interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-180">ASP.NET includes a number of navigation-related Web controls for designing a user interface.</span></span> <span data-ttu-id="d68ce-181">Obejmują one Menu widoku drzewa i formanty SiteMapPath.</span><span class="sxs-lookup"><span data-stu-id="d68ce-181">These include the Menu, TreeView, and the SiteMapPath controls.</span></span> <span data-ttu-id="d68ce-182">Kontrolki Menu i TreeView renderowania struktury mapy witryny, w menu lub drzewo, odpowiednio, natomiast SiteMapPath Wyświetla nawigacji, który pokazuje bieżący węzeł odwiedzana oraz jego elementów nadrzędnych.</span><span class="sxs-lookup"><span data-stu-id="d68ce-182">The Menu and TreeView controls render the site map structure in a menu or a tree, respectively, whereas the SiteMapPath displays a breadcrumb that shows the current node being visited as well as its ancestors.</span></span> <span data-ttu-id="d68ce-183">Dane mapy witryny może być powiązana z innymi danymi, kontrolki sieci Web, przy użyciu SiteMapDataSource i można uzyskać programistycznie przy użyciu `SiteMap` klasy.</span><span class="sxs-lookup"><span data-stu-id="d68ce-183">The site map data can be bound to other data Web controls using the SiteMapDataSource and can be accessed programmatically via the `SiteMap` class.</span></span>

<span data-ttu-id="d68ce-184">Ponieważ dogłębną dyskusję framework mapy witryny i formanty nawigacyjne wykracza poza zakres tej serii samouczków, przeciwnie niż poświęcać czasu na tworzeniu własnego interfejsu użytkownika nawigacji umożliwia zamiast tego "pożyczać" komentarzowi użytemu w mojej *[ Praca z danymi w programie ASP.NET 2.0](../../data-access/index.md)* serii samouczków, która korzysta z kontrolką elementu powtarzanego do wyświetlania listy punktowanej dwóch głębokiego łącza nawigacji, jak pokazano na rysunku 4.</span><span class="sxs-lookup"><span data-stu-id="d68ce-184">Since a thorough discussion of the Site Map framework and the Navigation controls is beyond the scope of this tutorial series, rather than spend time crafting our own navigational user interface let's instead borrow the one used in my *[Working with Data in ASP.NET 2.0](../../data-access/index.md)* tutorial series, which uses a Repeater control to display a two-deep bulleted list of navigation links, as shown in Figure 4.</span></span>

### <a name="adding-a-two-level-list-of-links-in-the-left-column"></a><span data-ttu-id="d68ce-185">Dodawanie dwupoziomowej listę linków w kolumnie po lewej stronie</span><span class="sxs-lookup"><span data-stu-id="d68ce-185">Adding a Two-Level List of Links in the Left Column</span></span>

<span data-ttu-id="d68ce-186">Aby utworzyć ten interfejs, Dodaj następujące oznaczeniu deklaracyjnym do `Site.master` strony wzorcowej lewą kolumnę gdzie tekst "TODO: Menu znajdzie się tutaj..." aktualnie znajduje się.</span><span class="sxs-lookup"><span data-stu-id="d68ce-186">To create this interface, add the following declarative markup to the `Site.master` master page's left column where the text "TODO: Menu will go here..." currently resides.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample3.aspx)]

<span data-ttu-id="d68ce-187">Powyższe znaczników wiąże kontrolką elementu powtarzanego o nazwie `menu` do SiteMapDataSource, która zwraca hierarchii mapy witryny, które są zdefiniowane w `Web.sitemap`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-187">The above markup binds a Repeater control named `menu` to a SiteMapDataSource, which returns the site map hierarchy defined in `Web.sitemap`.</span></span> <span data-ttu-id="d68ce-188">Od kontroli SiteMapDataSource [ `ShowStartingNode` właściwość](https://msdn.microsoft.com/library/system.web.ui.webcontrols.sitemapdatasource.showstartingnode.aspx) ma wartość False, uruchamia, zwracając hierarchii mapy witryny, rozpoczynając od elementów potomnych węzła "Home".</span><span class="sxs-lookup"><span data-stu-id="d68ce-188">Since the SiteMapDataSource control's [`ShowStartingNode` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.sitemapdatasource.showstartingnode.aspx) is set to False it starts returning the site map's hierarchy starting with the descendents of the "Home" node.</span></span> <span data-ttu-id="d68ce-189">Powtarzanego wyświetla każdy z tych węzłów (obecnie tylko "członkostwa") w `<li>` elementu.</span><span class="sxs-lookup"><span data-stu-id="d68ce-189">The Repeater displays each of these nodes (currently just "Membership") in an `<li>` element.</span></span> <span data-ttu-id="d68ce-190">Inny, wewnętrzny elementu powtarzanego. następnie wyświetla elementy podrzędne bieżącego węzła w zagnieżdżonej listy nieuporządkowane.</span><span class="sxs-lookup"><span data-stu-id="d68ce-190">Another, inner Repeater then displays the current node's children in a nested unordered list.</span></span>

<span data-ttu-id="d68ce-191">Rysunek 4 przedstawia powyżej znaczników wyniku renderowania przy użyciu struktury mapy witryny, utworzonego w kroku 2.</span><span class="sxs-lookup"><span data-stu-id="d68ce-191">Figure 4 shows the above markup's rendered output with the site map structure we created in Step 2.</span></span> <span data-ttu-id="d68ce-192">Powtarzanego renderuje znacznik wanilii listę nieuporządkowaną kaskadowe reguły arkusz stylów zdefiniowany w `Styles.css` jest odpowiedzialny za aesthetically atrakcyjne układu.</span><span class="sxs-lookup"><span data-stu-id="d68ce-192">The Repeater renders vanilla unordered list markup; the cascading style sheet rules defined in `Styles.css` are responsible for the aesthetically-pleasing layout.</span></span> <span data-ttu-id="d68ce-193">Aby uzyskać bardziej szczegółowy opis sposobu działania powyżej znaczników, dotyczą [strony wzorcowe i nawigacja w witrynie](https://asp.net/learn/data-access/tutorial-03-cs.aspx) samouczka.</span><span class="sxs-lookup"><span data-stu-id="d68ce-193">For a more detailed description of how the above markup works, refer to the [Master Pages and Site Navigation](https://asp.net/learn/data-access/tutorial-03-cs.aspx) tutorial.</span></span>


<span data-ttu-id="d68ce-194">[![Nawigacyjne interfejsu użytkownika jest renderowany przy użyciu zagnieżdżonych nieuporządkowaną Wyświetla listę](creating-user-accounts-cs/_static/image11.png)](creating-user-accounts-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="d68ce-194">[![The Navigational User Interface is Rendered Using Nested Unordered Lists](creating-user-accounts-cs/_static/image11.png)](creating-user-accounts-cs/_static/image10.png)</span></span>

<span data-ttu-id="d68ce-195">**Rysunek 4**: Nawigacyjne interfejsu użytkownika jest renderowany przy użyciu zagnieżdżonych nieuporządkowaną Wyświetla listę ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="d68ce-195">**Figure 4**: The Navigational User Interface is Rendered Using Nested Unordered Lists  ([Click to view full-size image](creating-user-accounts-cs/_static/image12.png))</span></span>


### <a name="adding-breadcrumb-navigation"></a><span data-ttu-id="d68ce-196">Dodawanie do stron nadrzędnych</span><span class="sxs-lookup"><span data-stu-id="d68ce-196">Adding Breadcrumb Navigation</span></span>

<span data-ttu-id="d68ce-197">Oprócz listy linków w kolumnie po lewej stronie umożliwia również mieć każdy wyświetlania strony [łączy do stron nadrzędnych](http://en.wikipedia.org/wiki/Breadcrumb_%28navigation%29).</span><span class="sxs-lookup"><span data-stu-id="d68ce-197">In addition to the list of links in the left column, let's also have each page display a [breadcrumb](http://en.wikipedia.org/wiki/Breadcrumb_%28navigation%29).</span></span> <span data-ttu-id="d68ce-198">Ślad jest element interfejsu użytkownika nawigacyjne, które szybko ułatwiają użytkownikom ich bieżącą pozycję w hierarchii lokacji.</span><span class="sxs-lookup"><span data-stu-id="d68ce-198">A breadcrumb is a navigational user interface element that quickly shows users their current position within the site hierarchy.</span></span> <span data-ttu-id="d68ce-199">Kontrolki ścieżki mapy witryny używa framework Mapa witryny, aby określić lokalizację bieżącej strony mapy witryny, a następnie wyświetla ślad na podstawie tych informacji.</span><span class="sxs-lookup"><span data-stu-id="d68ce-199">The SiteMapPath control uses the Site Map framework to determine the current page's location in the site map and then displays a breadcrumb based on this information.</span></span>

<span data-ttu-id="d68ce-200">W szczególności dodać `<span>` elementu nagłówka strony wzorcowej `<div>` element i ustaw nowy `<span>` elementu `class` atrybutu "łączy do stron nadrzędnych".</span><span class="sxs-lookup"><span data-stu-id="d68ce-200">Specifically, add a `<span>` element to the master page's header `<div>` element, and set the new `<span>` element's `class` attribute to "breadcrumb".</span></span> <span data-ttu-id="d68ce-201">( `Styles.css` Klasa zawiera regułę dla klasy "łączy do stron nadrzędnych".) Następnie dodaj ścieżki mapy witryny, w tym nowych `<span>` elementu.</span><span class="sxs-lookup"><span data-stu-id="d68ce-201">(The `Styles.css` class contains a rule for a "breadcrumb" class.) Next, add a SiteMapPath to this new `<span>` element.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample4.aspx)]

<span data-ttu-id="d68ce-202">Rysunek 5. pokazuje dane wyjściowe SiteMapPath podczas odwiedzania `~/Membership/CreatingUserAccounts.aspx`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-202">Figure 5 shows the output of the SiteMapPath when visiting `~/Membership/CreatingUserAccounts.aspx`.</span></span>


<span data-ttu-id="d68ce-203">[![Łączy do stron nadrzędnych Wyświetla bieżącą stronę i zamapuj jego elementy nadrzędne w lokacji](creating-user-accounts-cs/_static/image14.png)](creating-user-accounts-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="d68ce-203">[![The Breadcrumb Displays the Current Page and its Ancestors in the Site Map](creating-user-accounts-cs/_static/image14.png)](creating-user-accounts-cs/_static/image13.png)</span></span>

<span data-ttu-id="d68ce-204">**Rysunek 5**: Łączy do stron nadrzędnych Wyświetla bieżącą stronę i jego elementy nadrzędne mapy witryny ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="d68ce-204">**Figure 5**: The Breadcrumb Displays the Current Page and its Ancestors in the Site Map  ([Click to view full-size image](creating-user-accounts-cs/_static/image15.png))</span></span>


## <a name="step-4-removing-the-custom-principal-and-identity-logic"></a><span data-ttu-id="d68ce-205">Krok 4. Usuwanie jednostki niestandardowej i logiki tożsamości</span><span class="sxs-lookup"><span data-stu-id="d68ce-205">Step 4: Removing the Custom Principal and Identity Logic</span></span>

<span data-ttu-id="d68ce-206">W *<a id="_msoanchor_7"> </a> [Konfiguracja uwierzytelniania formularzy i Tematy zaawansowane](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md)* samouczek widzieliśmy jak skojarzyć niestandardowe obiekty jednostki i tożsamość uwierzytelnionego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-206">In the *<a id="_msoanchor_7"></a>[Forms Authentication Configuration and Advanced Topics](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md)* tutorial we saw how to associate custom principal and identity objects to the authenticated user.</span></span> <span data-ttu-id="d68ce-207">Możemy to osiągnąć, tworząc program obsługi zdarzeń w `Global.asax` aplikacji `PostAuthenticateRequest` zdarzenie, które uruchamia się po `FormsAuthenticationModule` uwierzytelnił użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-207">We accomplished this by creating an event handler in `Global.asax` for the application's `PostAuthenticateRequest` event, which fires after the `FormsAuthenticationModule` has authenticated the user.</span></span> <span data-ttu-id="d68ce-208">W tej obsługi zdarzeń zastąpiliśmy `GenericPrincipal` i `FormsIdentity` obiekty dodane przez `FormsAuthenticationModule` z `CustomPrincipal` i `CustomIdentity` obiektów utworzonych w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="d68ce-208">In this event handler we replaced the `GenericPrincipal` and `FormsIdentity` objects added by the `FormsAuthenticationModule` with the `CustomPrincipal` and `CustomIdentity` objects we created in that tutorial.</span></span>

<span data-ttu-id="d68ce-209">Niestandardowe obiekty jednostki i tożsamość są przydatne w niektórych scenariuszach, w większości przypadków `GenericPrincipal` i `FormsIdentity` obiekty są wystarczające.</span><span class="sxs-lookup"><span data-stu-id="d68ce-209">While custom principal and identity objects are useful in certain scenarios, in most cases the `GenericPrincipal` and `FormsIdentity` objects are sufficient.</span></span> <span data-ttu-id="d68ce-210">W związku z tym myślę, że będzie się zastanowić, aby powrócić do domyślnego zachowania.</span><span class="sxs-lookup"><span data-stu-id="d68ce-210">Consequently, I think it would be worthwhile to return to the default behavior.</span></span> <span data-ttu-id="d68ce-211">Ta zmiana wprowadzona przez usunięcie lub zakomentowując `PostAuthenticateRequest` programu obsługi zdarzeń lub usuwając `Global.asax` pliku w całości.</span><span class="sxs-lookup"><span data-stu-id="d68ce-211">Make this change by either removing or commenting out the `PostAuthenticateRequest` event handler or by deleting the `Global.asax` file entirely.</span></span>

## <a name="step-5-programmatically-creating-a-new-user"></a><span data-ttu-id="d68ce-212">Krok 5. Programowe tworzenie nowego użytkownika</span><span class="sxs-lookup"><span data-stu-id="d68ce-212">Step 5: Programmatically Creating a New User</span></span>

<span data-ttu-id="d68ce-213">Aby utworzyć nowe konto użytkownika przy użyciu framework członkostwa `Membership` klasy [ `CreateUser` metoda](https://msdn.microsoft.com/library/system.web.security.membership.createuser.aspx).</span><span class="sxs-lookup"><span data-stu-id="d68ce-213">To create a new user account through the Membership framework use the `Membership` class's [`CreateUser` method](https://msdn.microsoft.com/library/system.web.security.membership.createuser.aspx).</span></span> <span data-ttu-id="d68ce-214">Ta metoda ma wejściowych parametrów dla nazwy użytkownika, hasła i inne pola związane z użytkownikiem.</span><span class="sxs-lookup"><span data-stu-id="d68ce-214">This method has input parameters for the username, password, and other user-related fields.</span></span> <span data-ttu-id="d68ce-215">Na wywołanie, deleguje tworzenia nowego konta użytkownika skonfigurowanego dostawcy członkostwa, a następnie zwraca [ `MembershipUser` obiektu](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx) reprezentujący konto nowo utworzoną użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-215">On invocation, it delegates the creation of the new user account to the configured Membership provider and then returns a [`MembershipUser` object](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx) representing the just-created user account.</span></span>

<span data-ttu-id="d68ce-216">`CreateUser` Metoda ma cztery przeciążenia każdego akceptowanie innej liczby parametrów wejściowych:</span><span class="sxs-lookup"><span data-stu-id="d68ce-216">The `CreateUser` method has four overloads, each accepting a different number of input parameters:</span></span>

- [`CreateUser(username, password)`](https://msdn.microsoft.com/library/d8t4h2es.aspx)
- [`CreateUser(username, password, email)`](https://msdn.microsoft.com/library/t8yy6w3h.aspx)
- [`CreateUser(username, password, email, passwordQuestion, passwordAnswer, isApproved, MembershipCreateStatus)`](https://msdn.microsoft.com/library/82xx2e62.aspx)
- [`CreateUser(username, password, email, passwordQuestion, passwordAnswer, isApproved, providerUserKey, MembershipCreateStatus)`](https://msdn.microsoft.com/library/ms152012.aspx)

<span data-ttu-id="d68ce-217">Te cztery przeciążenia różnią się od ilości zbieranych informacji.</span><span class="sxs-lookup"><span data-stu-id="d68ce-217">These four overloads differ on the amount of information that is collected.</span></span> <span data-ttu-id="d68ce-218">Pierwsze przeciążenie, na przykład wymaga tylko nazwy użytkownika i hasła dla nowego konta użytkownika, drugi z nich wymaga również adres e-mail użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-218">The first overload, for example, requires just the username and password for the new user account, whereas the second one also requires the user's email address.</span></span>

<span data-ttu-id="d68ce-219">Taka przeciążona funkcja sprawdza istnieje, ponieważ informacje wymagane do utworzenia nowego konta użytkownika zależy od ustawienia konfiguracji dostawcy członkostwa.</span><span class="sxs-lookup"><span data-stu-id="d68ce-219">These overloads exist because the information needed to create a new user account depends on the Membership provider's configuration settings.</span></span> <span data-ttu-id="d68ce-220">W *<a id="_msoanchor_8"> </a> [tworzenie schematu członkostwa w programie SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* zbadaliśmy Określanie ustawień konfiguracji dostawcy członkostwa w samouczku `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-220">In the *<a id="_msoanchor_8"></a>[Creating the Membership Schema in SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* tutorial we examined specifying Membership provider configuration settings in `Web.config`.</span></span> <span data-ttu-id="d68ce-221">Tabela 2 dołączone pełną listę ustawień konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="d68ce-221">Table 2 included a complete list of the configuration settings.</span></span>

<span data-ttu-id="d68ce-222">Jednego takiego członkostwa dostawcy ustawienie konfiguracji, które ma wpływ na co `CreateUser` przeciążenia, które mogą być używane jest `requiresQuestionAndAnswer` ustawienie.</span><span class="sxs-lookup"><span data-stu-id="d68ce-222">One such Membership provider configuration setting that impacts what `CreateUser` overloads may be used is the `requiresQuestionAndAnswer` setting.</span></span> <span data-ttu-id="d68ce-223">Jeśli `requiresQuestionAndAnswer` ustawiono `true` (ustawienie domyślne), a następnie podczas tworzenia nowego konta użytkownika firma Microsoft Określ pytanie zabezpieczające i odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="d68ce-223">If `requiresQuestionAndAnswer` is set to `true` (the default), then when creating a new user account we must specify a security question and answer.</span></span> <span data-ttu-id="d68ce-224">Te informacje są używane później, jeśli użytkownik potrzebuje do Resetowanie lub zmienianie swoich haseł.</span><span class="sxs-lookup"><span data-stu-id="d68ce-224">This information is later used if the user needs to reset or change their password.</span></span> <span data-ttu-id="d68ce-225">W szczególności w tym czasie są wyświetlane na pytanie zabezpieczające i ich wprowadzić poprawną odpowiedź, aby Resetowanie lub zmienianie swoich haseł.</span><span class="sxs-lookup"><span data-stu-id="d68ce-225">Specifically, at that time they are shown the security question and they must enter the correct answer in order to reset or change their password.</span></span> <span data-ttu-id="d68ce-226">W związku z tym jeśli `requiresQuestionAndAnswer` ustawiono `true` , a następnie wywoływania jednej z dwóch pierwszych `CreateUser` przeciążenia powoduje wyjątek, ponieważ brakuje pytanie zabezpieczające i odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="d68ce-226">Consequently, if the `requiresQuestionAndAnswer` is set to `true` then calling either of the first two `CreateUser` overloads results in an exception because the security question and answer are missing.</span></span> <span data-ttu-id="d68ce-227">Ponieważ nasza aplikacja jest obecnie skonfigurowany do wymagają pytanie zabezpieczające i odpowiedzi, musimy użyć jednej z drugim dwa przeciążenia programowe tworzenie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-227">Since our application is currently configured to require a security question and answer, we will need to use one of the latter two overloads when creating user's programmatically.</span></span>

<span data-ttu-id="d68ce-228">Aby zilustrować, za pomocą `CreateUser` metody, Utwórzmy interfejsu użytkownika, w którym firma Microsoft monit o podanie ich nazwy, hasła, wiadomości e-mail i odpowiedź na pytanie zabezpieczające wstępnie zdefiniowane.</span><span class="sxs-lookup"><span data-stu-id="d68ce-228">To illustrate using the `CreateUser` method, let's create a user interface where we prompt the user for their name, password, email, and an answer to a pre-defined security question.</span></span> <span data-ttu-id="d68ce-229">Otwórz `CreatingUserAccounts.aspx` stronie `Membership` folderze i dodaj następujące kontrolki sieci Web do formantu zawartości:</span><span class="sxs-lookup"><span data-stu-id="d68ce-229">Open the `CreatingUserAccounts.aspx` page in the `Membership` folder and add the following Web controls to the Content control:</span></span>

- <span data-ttu-id="d68ce-230">Pole tekstowe o nazwie `Username`</span><span class="sxs-lookup"><span data-stu-id="d68ce-230">A TextBox named `Username`</span></span>
- <span data-ttu-id="d68ce-231">Pole tekstowe o nazwie `Password`, którego `TextMode` właściwość jest ustawiona na `Password`</span><span class="sxs-lookup"><span data-stu-id="d68ce-231">A TextBox named `Password`, whose `TextMode` property is set to `Password`</span></span>
- <span data-ttu-id="d68ce-232">Pole tekstowe o nazwie `Email`</span><span class="sxs-lookup"><span data-stu-id="d68ce-232">A TextBox named `Email`</span></span>
- <span data-ttu-id="d68ce-233">Etykieta o nazwie `SecurityQuestion` z jego `Text` właściwość wyczyszczone</span><span class="sxs-lookup"><span data-stu-id="d68ce-233">A Label named `SecurityQuestion` with its `Text` property cleared out</span></span>
- <span data-ttu-id="d68ce-234">Pole tekstowe o nazwie `SecurityAnswer`</span><span class="sxs-lookup"><span data-stu-id="d68ce-234">A TextBox named `SecurityAnswer`</span></span>
- <span data-ttu-id="d68ce-235">Przycisk o nazwie `CreateAccountButton` którego tekst jest właściwością "Utwórz konto użytkownika"</span><span class="sxs-lookup"><span data-stu-id="d68ce-235">A Button named `CreateAccountButton` whose Text property is set to "Create the User Account"</span></span>
- <span data-ttu-id="d68ce-236">Formant etykiety o nazwie `CreateAccountResults` z jego `Text` właściwość wyczyszczone</span><span class="sxs-lookup"><span data-stu-id="d68ce-236">A Label control named `CreateAccountResults` with its `Text` property cleared out</span></span>

<span data-ttu-id="d68ce-237">W tym momencie ekran powinien wyglądać podobnie do ekranu zrzut, jak pokazano na rysunku 6.</span><span class="sxs-lookup"><span data-stu-id="d68ce-237">At this point your screen should look similar to the screen shot shown in Figure 6.</span></span>


<span data-ttu-id="d68ce-238">[![Na stronie CreatingUserAccounts.aspx Dodaj różnych formantów sieci Web](creating-user-accounts-cs/_static/image17.png)](creating-user-accounts-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="d68ce-238">[![Add the Various Web Controls to the CreatingUserAccounts.aspx Page](creating-user-accounts-cs/_static/image17.png)](creating-user-accounts-cs/_static/image16.png)</span></span>

<span data-ttu-id="d68ce-239">**Rysunek 6**: Dodać różne formanty Web `CreatingUserAccounts.aspx` strony ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="d68ce-239">**Figure 6**: Add the Various Web Controls to the `CreatingUserAccounts.aspx` Page  ([Click to view full-size image](creating-user-accounts-cs/_static/image18.png))</span></span>


<span data-ttu-id="d68ce-240">`SecurityQuestion` Etykiety i `SecurityAnswer` pole tekstowe są przeznaczone do wyświetlania na pytanie zabezpieczające wstępnie zdefiniowanych i zbieranie odpowiedzi użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-240">The `SecurityQuestion` Label and `SecurityAnswer` TextBox are intended to display a pre-defined security question and collect the user's answer.</span></span> <span data-ttu-id="d68ce-241">Należy pamiętać, że pytanie zabezpieczające i odpowiedzi są przechowywane na podstawie użytkownika według, można pozwolić każdemu użytkownikowi na definiowanie własnych pytanie zabezpieczające.</span><span class="sxs-lookup"><span data-stu-id="d68ce-241">Note that both the security question and answer are stored on a user-by-user basis, so it is possible to allow each user to define their own security question.</span></span> <span data-ttu-id="d68ce-242">Jednak w tym przykładzie I zamierzasz używać na pytanie zabezpieczające uniwersalne, to znaczy: "Co to jest Twoje ulubione koloru?"</span><span class="sxs-lookup"><span data-stu-id="d68ce-242">However, for this example I have decided to use a universal security question, namely: "What is your favorite color?"</span></span>

<span data-ttu-id="d68ce-243">Aby zaimplementować to pytanie zabezpieczeń wstępnie zdefiniowane, należy dodać stałą do strony związanym z kodem klasę o nazwie `passwordQuestion`, przypisując go na pytanie zabezpieczające.</span><span class="sxs-lookup"><span data-stu-id="d68ce-243">To implement this pre-defined security question, add a constant to the page's code-behind class named `passwordQuestion`, assigning it the security question.</span></span> <span data-ttu-id="d68ce-244">Następnie w `Page_Load` programu obsługi zdarzeń, przypisać tym stała przeznaczona do `SecurityQuestion` etykiety `Text` właściwości:</span><span class="sxs-lookup"><span data-stu-id="d68ce-244">Then, in the `Page_Load` event handler, assign this constant to the `SecurityQuestion` Label's `Text` property:</span></span>

[!code-csharp[Main](creating-user-accounts-cs/samples/sample5.cs)]

<span data-ttu-id="d68ce-245">Następnie należy utworzyć program obsługi zdarzeń dla `CreateAccountButton`firmy `Click` zdarzeń i Dodaj następujący kod:</span><span class="sxs-lookup"><span data-stu-id="d68ce-245">Next, create an event handler for the `CreateAccountButton`'s `Click` event and add the following code:</span></span>

[!code-csharp[Main](creating-user-accounts-cs/samples/sample6.cs)]

<span data-ttu-id="d68ce-246">`Click` Programu obsługi zdarzeń rozpoczyna się od zdefiniowania zmiennej o nazwie `createStatus` typu [ `MembershipCreateStatus` ](https://msdn.microsoft.com/library/system.web.security.membershipcreatestatus.aspx).</span><span class="sxs-lookup"><span data-stu-id="d68ce-246">The `Click` event handler starts by defining a variable named `createStatus` of type [`MembershipCreateStatus`](https://msdn.microsoft.com/library/system.web.security.membershipcreatestatus.aspx).</span></span> <span data-ttu-id="d68ce-247">`MembershipCreateStatus` to wyliczenie, które wskazuje stan `CreateUser` operacji.</span><span class="sxs-lookup"><span data-stu-id="d68ce-247">`MembershipCreateStatus` is an enumeration that indicates the status of the `CreateUser` operation.</span></span> <span data-ttu-id="d68ce-248">Na przykład, jeśli konto użytkownika został utworzony pomyślnie, wynikowy `MembershipCreateStatus` wystąpienia zostanie ustawiona na wartość `Success`; na drugim drugiej strony, jeśli operacja zakończy się niepowodzeniem, ponieważ istnieje już użytkownika przy użyciu tej samej nazwy użytkownika, zostanie ustawiona na wartość `DuplicateUserName`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-248">For example, if the user account is created successfully, the resulting `MembershipCreateStatus` instance will be set to a value of `Success`; on the other hand, if the operation fails because there already exists a user with the same username, it will be set to a value of `DuplicateUserName`.</span></span> <span data-ttu-id="d68ce-249">W `CreateUser` przeciążenia używamy, należy przekazać `MembershipCreateStatus` wystąpienia do metody jako `out` parametru.</span><span class="sxs-lookup"><span data-stu-id="d68ce-249">In the `CreateUser` overload we use, we need to pass a `MembershipCreateStatus` instance into the method as an `out` parameter.</span></span> <span data-ttu-id="d68ce-250">Ten parametr ma wartość odpowiednią wartość w ramach `CreateUser` metody, a firma Microsoft, można sprawdzić jego wartość po wywołaniu metody, aby ustalić, czy konto użytkownika zostało pomyślnie utworzone.</span><span class="sxs-lookup"><span data-stu-id="d68ce-250">This parameter is set to the appropriate value within the `CreateUser` method, and we can examine its value after the method call to determine whether the user account was successfully created.</span></span>

<span data-ttu-id="d68ce-251">Po wywołaniu `CreateUser`, przekazując `createStatus`, `switch` instrukcja jest używane w danych wyjściowych odpowiedni komunikat i w zależności od wartości przypisanej do `createStatus`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-251">After calling `CreateUser`, passing in `createStatus`, a `switch` statement is used to output an appropriate message depending on the value assigned to `createStatus`.</span></span> <span data-ttu-id="d68ce-252">Rysunki 7 przedstawia dane wyjściowe, gdy nowy użytkownik został pomyślnie utworzony.</span><span class="sxs-lookup"><span data-stu-id="d68ce-252">Figures 7 shows the output when a new user has successfully been created.</span></span> <span data-ttu-id="d68ce-253">Rysunki 8 i 9 pokazują dane wyjściowe, gdy konto użytkownika nie została utworzona.</span><span class="sxs-lookup"><span data-stu-id="d68ce-253">Figures 8 and 9 show the output when the user account is not created.</span></span> <span data-ttu-id="d68ce-254">Na rysunku 8 odwiedzający wprowadzić hasło pięciu literę, który nie spełnia wymagania dotyczące siły hasła, które zostały zapisane w ustawieniach konfiguracji dostawcy członkostwa.</span><span class="sxs-lookup"><span data-stu-id="d68ce-254">In Figure 8, the visitor entered a five-letter password, which does not meet the password strength requirements spelled out in the Membership provider's configuration settings.</span></span> <span data-ttu-id="d68ce-255">Na rysunku 9 odwiedzający próbuje utworzyć konto użytkownika przy użyciu istniejącej nazwy użytkownika (utworzonym na rysunku 7).</span><span class="sxs-lookup"><span data-stu-id="d68ce-255">In Figure 9, the visitor is attempting to create a user account with an existing username (the one created in Figure 7).</span></span>


<span data-ttu-id="d68ce-256">[![Nowe konto użytkownika jest pomyślnie utworzony](creating-user-accounts-cs/_static/image20.png)](creating-user-accounts-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="d68ce-256">[![A New User Account is Successfully Created](creating-user-accounts-cs/_static/image20.png)](creating-user-accounts-cs/_static/image19.png)</span></span>

<span data-ttu-id="d68ce-257">**Rysunek 7**: Nowe konto użytkownika jest pomyślnie utworzony ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="d68ce-257">**Figure 7**: A New User Account is Successfully Created  ([Click to view full-size image](creating-user-accounts-cs/_static/image21.png))</span></span>


<span data-ttu-id="d68ce-258">[![Nie utworzono konta użytkownika, ponieważ podane hasło jest za słabe](creating-user-accounts-cs/_static/image23.png)](creating-user-accounts-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="d68ce-258">[![The User Account is Not Created Because the Supplied Password is Too Weak](creating-user-accounts-cs/_static/image23.png)](creating-user-accounts-cs/_static/image22.png)</span></span>

<span data-ttu-id="d68ce-259">**Rysunek 8**: Nie utworzono konta użytkownika, ponieważ podane hasło jest za słabe ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="d68ce-259">**Figure 8**: The User Account is Not Created Because the Supplied Password is Too Weak  ([Click to view full-size image](creating-user-accounts-cs/_static/image24.png))</span></span>


<span data-ttu-id="d68ce-260">[![To konto użytkownika nie utworzone, ponieważ nazwa jest już w użyciu](creating-user-accounts-cs/_static/image26.png)](creating-user-accounts-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="d68ce-260">[![The User Account is Not Created Because the Username is Already in Use](creating-user-accounts-cs/_static/image26.png)](creating-user-accounts-cs/_static/image25.png)</span></span>

<span data-ttu-id="d68ce-261">**Rysunek 9**: Konto użytkownika jest nie utworzone, ponieważ nazwa jest już w użyciu ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="d68ce-261">**Figure 9**: The User Account is Not Created Because the Username is Already in Use  ([Click to view full-size image](creating-user-accounts-cs/_static/image27.png))</span></span>


> [!NOTE]
> <span data-ttu-id="d68ce-262">Możesz się zastanawiać, jak określić powodzenie lub niepowodzenie, korzystając z jednej z dwóch pierwszych `CreateUser` ani przeciążenia metod programu, który ma parametr typu `MembershipCreateStatus`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-262">You may be wondering how to determine success or failure when using one of the first two `CreateUser` method overloads, neither of which has a parameter of type `MembershipCreateStatus`.</span></span> <span data-ttu-id="d68ce-263">Te pierwsze dwa przeciążenia throw [ `MembershipCreateUserException` wyjątek](https://msdn.microsoft.com/library/system.web.security.membershipcreateuserexception.aspx) także w przypadku awarii, co obejmuje [ `StatusCode` właściwość](https://msdn.microsoft.com/library/system.web.security.membershipcreateuserexception.statuscode.aspx) typu `MembershipCreateStatus`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-263">These first two overloads throw a [`MembershipCreateUserException` exception](https://msdn.microsoft.com/library/system.web.security.membershipcreateuserexception.aspx) in the face of a failure, which includes a [`StatusCode` property](https://msdn.microsoft.com/library/system.web.security.membershipcreateuserexception.statuscode.aspx) of type `MembershipCreateStatus`.</span></span>


<span data-ttu-id="d68ce-264">Po utworzeniu kilku kontom użytkowników, należy sprawdzić, czy konta zostały utworzone przez wymienienie zawartość `aspnet_Users` i `aspnet_Membership` tabelach `SecurityTutorials.mdf` bazy danych.</span><span class="sxs-lookup"><span data-stu-id="d68ce-264">After creating a few user accounts, verify that the accounts have been created by listing the contents of the `aspnet_Users` and `aspnet_Membership` tables in the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="d68ce-265">Jak pokazano na rysunku nr 10, po dodaniu dwóch użytkowników za pośrednictwem `CreatingUserAccounts.aspx` strony: Tito i Bruce.</span><span class="sxs-lookup"><span data-stu-id="d68ce-265">As Figure 10 shows, I have added two users via the `CreatingUserAccounts.aspx` page: Tito and Bruce.</span></span>


<span data-ttu-id="d68ce-266">[![Istnieją dwaj użytkownicy Store użytkownika członkostwa: Tito i Bruce](creating-user-accounts-cs/_static/image29.png)](creating-user-accounts-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="d68ce-266">[![There are Two Users in the Membership User Store: Tito and Bruce](creating-user-accounts-cs/_static/image29.png)](creating-user-accounts-cs/_static/image28.png)</span></span>

<span data-ttu-id="d68ce-267">**Na rysunku nr 10**: Istnieją dwaj użytkownicy Store użytkownika członkostwa: Tito i Bruce ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="d68ce-267">**Figure 10**: There are Two Users in the Membership User Store: Tito and Bruce  ([Click to view full-size image](creating-user-accounts-cs/_static/image30.png))</span></span>


<span data-ttu-id="d68ce-268">Gdy magazyn użytkownika członkostwa zawiera teraz informacje o koncie Bruce i Tito firmy, mamy jeszcze do implementacji funkcji umożliwiającej Bruce lub Tito, aby zalogować się do witryny.</span><span class="sxs-lookup"><span data-stu-id="d68ce-268">While the Membership user store now includes Bruce and Tito's account information, we have yet to implement functionality that allows for Bruce or Tito to log on to the site.</span></span> <span data-ttu-id="d68ce-269">Obecnie `Login.aspx` przeprowadza walidację poświadczeń użytkownika względem stały zestaw par nazwa użytkownika i hasło — robi *nie* sprawdzanie poprawności podanych poświadczeń względem framework członkostwa.</span><span class="sxs-lookup"><span data-stu-id="d68ce-269">Currently, `Login.aspx` validates the user's credentials against a hard-coded set of username/password pairs – it does *not* validate the supplied credentials against the Membership framework.</span></span> <span data-ttu-id="d68ce-270">Dla nowych kont użytkowników w teraz jest wyświetlany `aspnet_Users` i `aspnet_Membership` tabele będą miały się wystarczające.</span><span class="sxs-lookup"><span data-stu-id="d68ce-270">For now seeing the new user accounts in the `aspnet_Users` and `aspnet_Membership` tables will have to suffice.</span></span> <span data-ttu-id="d68ce-271">W następnym samouczku  *<a id="_msoanchor_9"> </a> [sprawdzania poprawności użytkownika poświadczeń względem członkostwa użytkownika Store](validating-user-credentials-against-the-membership-user-store-cs.md)*, zaktualizujemy strony logowania, aby przeprowadzić walidacji względem magazynu członkostwa.</span><span class="sxs-lookup"><span data-stu-id="d68ce-271">In the next tutorial, *<a id="_msoanchor_9"></a>[Validating User Credentials Against the Membership User Store](validating-user-credentials-against-the-membership-user-store-cs.md)*, we will update the login page to validate against the Membership store.</span></span>

> [!NOTE]
> <span data-ttu-id="d68ce-272">Jeśli nie widzisz wszystkich użytkowników w Twojej `SecurityTutorials.mdf` bazy danych, może to być spowodowane aplikacją sieci web używa domyślnym dostawcą członkostwa `AspNetSqlMembershipProvider`, wykonującemu `ASPNETDB.mdf` baza danych jako jej magazyn użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-272">If you do not see any users in your `SecurityTutorials.mdf` database, it may be because your web application is using the default Membership provider, `AspNetSqlMembershipProvider`, which uses the `ASPNETDB.mdf` database as its user store.</span></span> <span data-ttu-id="d68ce-273">Aby ustalić, czy ten problem, kliknij przycisk Odśwież w Eksploratorze rozwiązań.</span><span class="sxs-lookup"><span data-stu-id="d68ce-273">To determine if this is the problem, click the Refresh button in the Solution Explorer.</span></span> <span data-ttu-id="d68ce-274">Jeśli baza danych o nazwie `ASPNETDB.mdf` została dodana do `App_Data` folderu, na tym polega problem.</span><span class="sxs-lookup"><span data-stu-id="d68ce-274">If a database named `ASPNETDB.mdf` has been added to the `App_Data` folder, this is the problem.</span></span> <span data-ttu-id="d68ce-275">Wróć do kroku 4 *<a id="_msoanchor_10"> </a> [tworzenie schematu członkostwa w programie SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* samouczek, w jaki sposób poprawnie skonfigurować dostawcy członkostwa.</span><span class="sxs-lookup"><span data-stu-id="d68ce-275">Return to Step 4 of the *<a id="_msoanchor_10"></a>[Creating the Membership Schema in SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* tutorial for instructions on how to properly configure the Membership provider.</span></span>


<span data-ttu-id="d68ce-276">W większości Utwórz użytkownika konta scenariuszy, odwiedzający są prezentowane za pomocą niektórych interfejsu, aby wprowadzić swoją nazwę użytkownika, hasło, adres e-mail i inne istotne informacje, w tym momencie jest tworzone nowe konto.</span><span class="sxs-lookup"><span data-stu-id="d68ce-276">In most create user account scenarios, the visitor is presented with some interface to enter their username, password, email, and other essential information, at which point a new account is created.</span></span> <span data-ttu-id="d68ce-277">W tym kroku będziemy przyjrzano ręcznego tworzenia takiego interfejsu i następnie pokazano, jak używać `Membership.CreateUser` metodę, aby programowo dodać nowe konto użytkownika oparte na danych wejściowych użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-277">In this step we looked at building such an interface by hand and then saw how to use the `Membership.CreateUser` method to programmatically add the new user account based on the user's inputs.</span></span> <span data-ttu-id="d68ce-278">Nasz kod, jednak po prostu utworzyć nowe konto użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-278">Our code, however, just created the new user account.</span></span> <span data-ttu-id="d68ce-279">Nie wykonał wszelkich dalszych działań, takich jak logowanie użytkownika do witryny w ramach konta użytkownika z nowo utworzoną lub wysłanie wiadomości e-mail z potwierdzeniem do użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-279">It did not perform any follow up actions, like logging in the user to the site under the just-created user account, or sending a confirmation email to the user.</span></span> <span data-ttu-id="d68ce-280">Te dodatkowe kroki wymaga dodatkowego kodu w przycisku `Click` programu obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="d68ce-280">These additional steps would require additional code in the Button's `Click` event handler.</span></span>

<span data-ttu-id="d68ce-281">ASP.NET jest dostarczany za pomocą kontrolki CreateUserWizard, który został zaprojektowany do obsługi procesu tworzenia konta użytkownika, z renderowania interfejsu użytkownika do tworzenia nowych kont użytkowników, do tworzenia konta w ramach członkostwa i wykonywania po konta Tworzenie zadania, takie jak wysyłanie wiadomości e-mail z potwierdzeniem i logowania użytkownika nowo utworzoną w lokacji.</span><span class="sxs-lookup"><span data-stu-id="d68ce-281">ASP.NET ships with the CreateUserWizard control, which is designed to handle the user account creation process, from rendering a user interface for creating new user accounts, to creating the account in the Membership framework and performing post-account creation tasks, such as sending a confirmation email and logging the just-created user into the site.</span></span> <span data-ttu-id="d68ce-282">Używanie formantu CreateUserWizard jest tak proste, jak przeciągnięcie formantu CreateUserWizard z przybornika na stronie, a następnie ustawić kilka właściwości.</span><span class="sxs-lookup"><span data-stu-id="d68ce-282">Using the CreateUserWizard control is as simple as dragging the CreateUserWizard control from the Toolbox onto a page, and then setting a few properties.</span></span> <span data-ttu-id="d68ce-283">W większości przypadków nie musisz pisać jednego wiersza kodu.</span><span class="sxs-lookup"><span data-stu-id="d68ce-283">In most cases, you won't need to write a single line of code.</span></span> <span data-ttu-id="d68ce-284">Przeanalizujemy tej kontrolki pomysłowych szczegółowo w kroku 6.</span><span class="sxs-lookup"><span data-stu-id="d68ce-284">We will explore this nifty control in detail in Step 6.</span></span>

<span data-ttu-id="d68ce-285">Jeśli nowe konta użytkowników są tworzone tylko za pośrednictwem typowej stronie sieci web Utwórz konto, jest mało prawdopodobne, że nigdy nie należy napisać kod, który używa `CreateUser` metody jako formant CreateUserWizard będą prawdopodobnie odpowiadać potrzebom użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-285">If new user accounts are only created through a typical Create Account web page, it is unlikely that you will ever need to write code that uses the `CreateUser` method, as the CreateUserWizard control will likely meet your needs.</span></span> <span data-ttu-id="d68ce-286">Jednak `CreateUser` metodą jest przydatne w scenariuszach, gdzie potrzebujesz wysoce dostosowanego środowiska użytkownika Utwórz konto lub konieczność programowe tworzenie nowych kont użytkowników za pomocą alternatywnych interfejsu.</span><span class="sxs-lookup"><span data-stu-id="d68ce-286">However, the `CreateUser` method is handy in scenarios where you need a highly customized Create Account user experience or when you need to programmatically create new user accounts through an alternative interface.</span></span> <span data-ttu-id="d68ce-287">Na przykład Niewykluczone, że strona, która pozwala użytkownikowi na przesłanie pliku XML, który zawiera informacje o użytkowniku z innej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d68ce-287">For example, you might have a page that allows a user to upload an XML file that contains user information from some other application.</span></span> <span data-ttu-id="d68ce-288">Strona może być analizuje zawartość XML przekazano plik i utworzyć nowe konto dla każdego użytkownika reprezentowane w pliku XML, wywołując `CreateUser` metody.</span><span class="sxs-lookup"><span data-stu-id="d68ce-288">The page might parses the contents of the uploaded XML file and create a new account for each user represented in the XML by calling the `CreateUser` method.</span></span>

## <a name="step-6-creating-a-new-user-with-the-createuserwizard-control"></a><span data-ttu-id="d68ce-289">Krok 6. Tworzenie nowego użytkownika za pomocą kontrolki CreateUserWizard</span><span class="sxs-lookup"><span data-stu-id="d68ce-289">Step 6: Creating a New User with the CreateUserWizard Control</span></span>

<span data-ttu-id="d68ce-290">ASP.NET jest dostarczany z szeregu kontroli, zaloguj się w sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d68ce-290">ASP.NET ships with a number of Login Web controls.</span></span> <span data-ttu-id="d68ce-291">Te kontrolki pomocy w wielu typowych użytkownika skojarzone z kontem i logowaniem scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="d68ce-291">These controls aid in many common user account- and login-related scenarios.</span></span> <span data-ttu-id="d68ce-292">[Kontroli CreateUserWizard](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/login/createuserwizard.aspx) jest jeden formant, której celem jest prezentowanie interfejsu użytkownika do dodawania nowego konta użytkownika do struktury członkostwa.</span><span class="sxs-lookup"><span data-stu-id="d68ce-292">The [CreateUserWizard control](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/login/createuserwizard.aspx) is one such control that is designed to present a user interface for adding a new user account to the Membership framework.</span></span>

<span data-ttu-id="d68ce-293">Podobnie jak wiele innych formantów Web skojarzone z logowaniem CreateUserWizard można używać bez napisania choćby jednego wiersza kodu.</span><span class="sxs-lookup"><span data-stu-id="d68ce-293">Like many of the other Login-related Web controls, the CreateUserWizard can be used without writing a single line of code.</span></span> <span data-ttu-id="d68ce-294">Intuicyjnie udostępnia interfejs użytkownika, w oparciu o dostawcy członkostwa ustawienia konfiguracji i wywołuje wewnętrznie `Membership` klasy `CreateUser` metoda po użytkownik wprowadzi wymagane informacje i kliknie przycisk "Create User".</span><span class="sxs-lookup"><span data-stu-id="d68ce-294">It intuitively provides a user interface based on the Membership provider's configuration settings and internally calls the `Membership` class's `CreateUser` method after the user enters the necessary information and clicks the "Create User" button.</span></span> <span data-ttu-id="d68ce-295">Kontrolka CreateUserWizard jest bardzo można dostosowywać.</span><span class="sxs-lookup"><span data-stu-id="d68ce-295">The CreateUserWizard control is extremely customizable.</span></span> <span data-ttu-id="d68ce-296">Ma hosta zdarzeń, które są aktywowane podczas różnych etapach procesu tworzenia konta.</span><span class="sxs-lookup"><span data-stu-id="d68ce-296">There are a host of events that fire during various stages of the account creation process.</span></span> <span data-ttu-id="d68ce-297">Można utworzyć procedury obsługi zdarzeń, zgodnie z potrzebami, aby wstawić niestandardowej logiki do przepływu pracy tworzenia konta.</span><span class="sxs-lookup"><span data-stu-id="d68ce-297">We can create event handlers, as needed, to inject custom logic into the account creation workflow.</span></span> <span data-ttu-id="d68ce-298">Ponadto CreateUserWizard wygląd jest bardzo elastyczny.</span><span class="sxs-lookup"><span data-stu-id="d68ce-298">Furthermore, the CreateUserWizard's appearance is very flexible.</span></span> <span data-ttu-id="d68ce-299">Istnieje wiele właściwości, które definiują wygląd domyślny interfejs; Jeśli to konieczne, kontrolki, można przekonwertować na szablon lub rejestracja użytkownika dodatkowe "kroki" mogą być dodawane.</span><span class="sxs-lookup"><span data-stu-id="d68ce-299">There are a number of properties that define the appearance of the default interface; if necessary, the control can be converted into a template or additional user registration "steps" may be added.</span></span>

<span data-ttu-id="d68ce-300">Zacznijmy od przyjrzeć się przy użyciu domyślnego interfejsu i zachowanie kontrolki CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="d68ce-300">Let's start with a look at using the CreateUserWizard control's default interface and behavior.</span></span> <span data-ttu-id="d68ce-301">Następnie pokażemy, jak dostosować wygląd za pośrednictwem właściwości i zdarzenia formantu.</span><span class="sxs-lookup"><span data-stu-id="d68ce-301">We'll then explore how to customize the appearance via the control's properties and events.</span></span>

### <a name="examining-the-createuserwizards-default-interface-and-behavior"></a><span data-ttu-id="d68ce-302">Badanie CreateUserWizard domyślny interfejs i zachowanie</span><span class="sxs-lookup"><span data-stu-id="d68ce-302">Examining the CreateUserWizard's Default Interface and Behavior</span></span>

<span data-ttu-id="d68ce-303">Wróć do `CreatingUserAccounts.aspx` stronie `Membership` folderu, Przełącz do trybu projektowania lub podziału, a następnie dodaj formancie CreateUserWizard do górnej części strony.</span><span class="sxs-lookup"><span data-stu-id="d68ce-303">Return to the `CreatingUserAccounts.aspx` page in the `Membership` folder, switch to the Design or Split mode, and then add a CreateUserWizard control to the top of the page.</span></span> <span data-ttu-id="d68ce-304">Kontrolka CreateUserWizard jest zachowane w sekcji Formanty logowania przybornika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-304">The CreateUserWizard control is filed under the Toolbox's Login controls section.</span></span> <span data-ttu-id="d68ce-305">Po dodaniu kontrolki, ustaw jego `ID` właściwość `RegisterUser`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-305">After adding the control, set its `ID` property to `RegisterUser`.</span></span> <span data-ttu-id="d68ce-306">Jak zrzut ekranu w przedstawia rysunek 11, CreateUserWizard renderuje interfejs z pól tekstowych dla nowego użytkownika nazwy użytkownika, hasło, adres e-mail i pytanie zabezpieczające i odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="d68ce-306">As the screen shot in Figure 11 shows, the CreateUserWizard renders an interface with textboxes for the new user's username, password, email address, and security question and answer.</span></span>


<span data-ttu-id="d68ce-307">[![Renderuje CreateUserWizard kontroli ogólnego Tworzenie interfejsu użytkownika](creating-user-accounts-cs/_static/image32.png)](creating-user-accounts-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="d68ce-307">[![The CreateUserWizard Control Renders a Generic Create User Interface](creating-user-accounts-cs/_static/image32.png)](creating-user-accounts-cs/_static/image31.png)</span></span>

<span data-ttu-id="d68ce-308">**Rysunek 11**: Kontrolka CreateUserWizard renderuje ogólny Tworzenie interfejsu użytkownika ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="d68ce-308">**Figure 11**: The CreateUserWizard Control Renders a Generic Create User Interface  ([Click to view full-size image](creating-user-accounts-cs/_static/image33.png))</span></span>


<span data-ttu-id="d68ce-309">Poświęćmy chwilę, aby porównać domyślnym interfejsem użytkownika generowany przez kontrolkę CreateUserWizard przy użyciu interfejsu, utworzonego w kroku 5.</span><span class="sxs-lookup"><span data-stu-id="d68ce-309">Let's take a moment to compare the default user interface generated by the CreateUserWizard control with the interface we created in Step 5.</span></span> <span data-ttu-id="d68ce-310">Po pierwsze kontroli CreateUserWizard umożliwia obiektu odwiedzającego określić pytanie zabezpieczające i odpowiedzi, interfejsu utworzone ręcznie stosować na pytanie zabezpieczające wstępnie zdefiniowane.</span><span class="sxs-lookup"><span data-stu-id="d68ce-310">For starters, the CreateUserWizard control allows the visitor to specify both the security question and answer, whereas our manually-created interface used a pre-defined security question.</span></span> <span data-ttu-id="d68ce-311">Interfejsu kontroli CreateUserWizard obejmuje również kontrolkami walidacji, dlatego musimy jeszcze Implementowanie weryfikacji pól formularza naszego interfejsu.</span><span class="sxs-lookup"><span data-stu-id="d68ce-311">The CreateUserWizard control's interface also includes validation controls, whereas we had yet to implement validation on our interface's form fields.</span></span> <span data-ttu-id="d68ce-312">I interfejsu kontroli CreateUserWizard zawiera pole tekstowe "Potwierdź hasło" (wraz z CompareValidator aby upewnić się, że wprowadzony tekst "Password" i "Password porównania" pola tekstowe są takie same).</span><span class="sxs-lookup"><span data-stu-id="d68ce-312">And the CreateUserWizard control interface includes a "Confirm Password" textbox (along with a CompareValidator to ensure that the text entered the "Password" and "Compare Password" textboxes are equal).</span></span>

<span data-ttu-id="d68ce-313">Ciekawe jest to formant CreateUserWizard powinni konsultować ustawienia konfiguracji dostawcy członkostwa, podczas renderowania interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-313">What's interesting is that the CreateUserWizard control consults the Membership provider's configuration settings when rendering its user interface.</span></span> <span data-ttu-id="d68ce-314">Na przykład zabezpieczenia pytanie i odpowiedź pola tekstowe są wyświetlane tylko jeśli `requiresQuestionAndAnswer` jest ustawiona na wartość True.</span><span class="sxs-lookup"><span data-stu-id="d68ce-314">For example, the security question and answer textboxes are only displayed if `requiresQuestionAndAnswer` is set to True.</span></span> <span data-ttu-id="d68ce-315">Podobnie, CreateUserWizard automatycznie dodaje formant RegularExpressionValidator, aby zagwarantować, że są spełnione wymagania dotyczące siły hasła i ustawia jego `ErrorMessage` i `ValidationExpression` na podstawie właściwości `minRequiredPasswordLength`, `minRequiredNonalphanumericCharacters`i `passwordStrengthRegularExpression` ustawień konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="d68ce-315">Likewise, CreateUserWizard automatically adds a RegularExpressionValidator control to ensure that the password strength requirements are met, and sets its `ErrorMessage` and `ValidationExpression` properties based on the `minRequiredPasswordLength`, `minRequiredNonalphanumericCharacters`, and `passwordStrengthRegularExpression` configuration settings.</span></span>

<span data-ttu-id="d68ce-316">Kontrolka CreateUserWizard jak sugeruje jej nazwa, jest tworzony na podstawie [formantu kreatora](https://msdn.microsoft.com/library/s2etd1ek.aspx).</span><span class="sxs-lookup"><span data-stu-id="d68ce-316">The CreateUserWizard control, as its name implies, is derived from the [Wizard control](https://msdn.microsoft.com/library/s2etd1ek.aspx).</span></span> <span data-ttu-id="d68ce-317">Kreator kontrolki są przeznaczone do zapewniają interfejs do wykonywania zadań z wieloma krokami.</span><span class="sxs-lookup"><span data-stu-id="d68ce-317">Wizard controls are designed to provide an interface for completing multi-step tasks.</span></span> <span data-ttu-id="d68ce-318">Kontrolka Kreator może mieć dowolną liczbę `WizardSteps`, z których każdy jest szablon, który definiuje HTML i formantów sieci Web, dla tego kroku.</span><span class="sxs-lookup"><span data-stu-id="d68ce-318">A Wizard control may have an arbitrary number of `WizardSteps`, each of which is a template that defines the HTML and Web controls for that step.</span></span> <span data-ttu-id="d68ce-319">Kontrolka kreatora początkowo Wyświetla pierwszy `WizardStep`, wraz z formantów nawigacji, które zezwala na użytkownika, aby przejść od jednego kroku do następnego lub aby wrócić do poprzednich kroków.</span><span class="sxs-lookup"><span data-stu-id="d68ce-319">The Wizard control initially displays the first `WizardStep`, along with navigation controls that permit the user to proceed from one step to the next, or to return to previous steps.</span></span>

<span data-ttu-id="d68ce-320">Jak pokazano w oznaczeniu deklaracyjnym rysunek 11, kontrola CreateUserWizard domyślny interfejs zawiera dwie `WizardSteps:`</span><span class="sxs-lookup"><span data-stu-id="d68ce-320">As the declarative markup in Figure 11 shows, the CreateUserWizard control's default interface includes two `WizardSteps:`</span></span>

- <span data-ttu-id="d68ce-321">[`CreateUserWizardStep`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizardstep.aspx) — renderuje interfejsu, aby zebrać informacje dotyczące tworzenia nowego konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-321">[`CreateUserWizardStep`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizardstep.aspx) – renders the interface to collect information for creating the new user account.</span></span> <span data-ttu-id="d68ce-322">Jest to krok pokazano na ilustracji 11.</span><span class="sxs-lookup"><span data-stu-id="d68ce-322">This is the step shown in Figure 11.</span></span>
- <span data-ttu-id="d68ce-323">[`CompleteWizardStep`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.completewizardstep.aspx) — renderuje komunikat wskazujący, że konto zostało pomyślnie utworzone.</span><span class="sxs-lookup"><span data-stu-id="d68ce-323">[`CompleteWizardStep`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.completewizardstep.aspx) – renders a message indicating that the account has successfully been created.</span></span>

<span data-ttu-id="d68ce-324">Wygląd i zachowanie CreateUserWizard może być modyfikowane, konwertując dowolną z następujących czynności w szablonach, lub przez dodanie własnych `WizardSteps`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-324">The CreateUserWizard's appearance and behavior can be modified by converting either of these steps to templates, or by adding your own `WizardSteps`.</span></span> <span data-ttu-id="d68ce-325">Przyjrzymy się dodanie `WizardStep` interfejsu rejestracji w *przechowywanie dodatkowych informacji użytkownika* samouczka.</span><span class="sxs-lookup"><span data-stu-id="d68ce-325">We will look at adding a `WizardStep` to the registration interface in the *Storing Additional User Information* tutorial.</span></span>

<span data-ttu-id="d68ce-326">Zobaczmy, kontrola CreateUserWizard w działaniu.</span><span class="sxs-lookup"><span data-stu-id="d68ce-326">Let's see the CreateUserWizard control in action.</span></span> <span data-ttu-id="d68ce-327">Odwiedź stronę `CreatingUserAccounts.aspx` strony za pośrednictwem przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="d68ce-327">Visit the `CreatingUserAccounts.aspx` page through a browser.</span></span> <span data-ttu-id="d68ce-328">Rozpocznij, wprowadzając niektóre nieprawidłowe wartości do interfejsu CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="d68ce-328">Start by entering some invalid values into the CreateUserWizard's interface.</span></span> <span data-ttu-id="d68ce-329">Spróbuj wprowadzić hasło, które nie są zgodne, wymagania dotyczące siły hasła lub opuścić "Nazwa użytkownika" pole tekstowe puste.</span><span class="sxs-lookup"><span data-stu-id="d68ce-329">Try entering a password that doesn't conform to the password strength requirements, or leaving the "User Name" textbox empty.</span></span> <span data-ttu-id="d68ce-330">CreateUserWizard wyświetli odpowiedni komunikat o błędzie.</span><span class="sxs-lookup"><span data-stu-id="d68ce-330">The CreateUserWizard will display an appropriate error message.</span></span> <span data-ttu-id="d68ce-331">Rysunek 12 zawiera dane wyjściowe podczas próby utworzenia użytkownika z niewystarczająco silne hasło.</span><span class="sxs-lookup"><span data-stu-id="d68ce-331">Figure 12 shows the output when attempting to create a user with an insufficiently strong password.</span></span>


<span data-ttu-id="d68ce-332">[![CreateUserWizard automatycznie wprowadza kontrolkami walidacji](creating-user-accounts-cs/_static/image35.png)](creating-user-accounts-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="d68ce-332">[![The CreateUserWizard Automatically Injects Validation Controls](creating-user-accounts-cs/_static/image35.png)](creating-user-accounts-cs/_static/image34.png)</span></span>

<span data-ttu-id="d68ce-333">**Rysunek 12**: CreateUserWizard automatycznie wprowadza formanty sprawdzania poprawności ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="d68ce-333">**Figure 12**: The CreateUserWizard Automatically Injects Validation Controls  ([Click to view full-size image](creating-user-accounts-cs/_static/image36.png))</span></span>


<span data-ttu-id="d68ce-334">Następnie wprowadź odpowiednie wartości w CreateUserWizard i kliknij przycisk "Create User".</span><span class="sxs-lookup"><span data-stu-id="d68ce-334">Next, enter appropriate values into the CreateUserWizard and click the "Create User" button.</span></span> <span data-ttu-id="d68ce-335">Zakładając, że wymagane pola zostały wprowadzone i siły hasła jest wystarczająca, CreateUserWizard będzie Utwórz nowe konto użytkownika za pośrednictwem framework członkostwa i następnie wyświetlać `CompleteWizardStep`(zobacz rysunek 13) na interfejsie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-335">Assuming the required fields have been entered and the password's strength is sufficient, the CreateUserWizard will create a new user account through the Membership framework and then display the `CompleteWizardStep`'s interface (see Figure 13).</span></span> <span data-ttu-id="d68ce-336">W tle wywołuje CreateUserWizard `Membership.CreateUser` metodę, tak samo, jak Robiliśmy to krok 5.</span><span class="sxs-lookup"><span data-stu-id="d68ce-336">Behind the scenes, the CreateUserWizard calls the `Membership.CreateUser` method, just like we did in Step 5.</span></span>


<span data-ttu-id="d68ce-337">[![Nowe konto użytkownika została pomyślnie utworzone](creating-user-accounts-cs/_static/image38.png)](creating-user-accounts-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="d68ce-337">[![A New User Account has Successfully Been Created](creating-user-accounts-cs/_static/image38.png)](creating-user-accounts-cs/_static/image37.png)</span></span>

<span data-ttu-id="d68ce-338">**Rysunek 13**: Nowe konto użytkownika została pomyślnie utworzone ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="d68ce-338">**Figure 13**: A New User Account has Successfully Been Created  ([Click to view full-size image](creating-user-accounts-cs/_static/image39.png))</span></span>


> [!NOTE]
> <span data-ttu-id="d68ce-339">Jak pokazano na rysunku 13, `CompleteWizardStep`przez interfejs zawiera przycisk Kontynuuj.</span><span class="sxs-lookup"><span data-stu-id="d68ce-339">As Figure 13 shows, the `CompleteWizardStep`'s interface includes a Continue button.</span></span> <span data-ttu-id="d68ce-340">Jednak w tym momencie klikając po prostu wykonuje zwrotu, pozostawiając odwiedzający na tej samej stronie.</span><span class="sxs-lookup"><span data-stu-id="d68ce-340">However, at this point clicking it just performs a postback, leaving the visitor on the same page.</span></span> <span data-ttu-id="d68ce-341">W sekcji "Dostosowywanie wyglądu i zachowania za pomocą jego właściwości CreateUserWizard" przedstawiony zostanie sposób mogą mieć tego przycisku wysłać użytkownika `Default.aspx` (lub innej strony).</span><span class="sxs-lookup"><span data-stu-id="d68ce-341">In the "Customizing the CreateUserWizard's Appearance and Behavior Through Its Properties" section we will look at how you can have this button send the visitor to `Default.aspx` (or some other page).</span></span>


<span data-ttu-id="d68ce-342">Po utworzeniu nowego konta użytkownika, wróć do programu Visual Studio i sprawdź `aspnet_Users` i `aspnet_Membership` tabelami, takie jak zrobiliśmy na rysunku nr 10, aby sprawdzić, czy konto zostało pomyślnie utworzone.</span><span class="sxs-lookup"><span data-stu-id="d68ce-342">After creating a new user account, return to Visual Studio and examine the `aspnet_Users` and `aspnet_Membership` tables like we did in Figure 10 to verify that the account was successfully created.</span></span>

### <a name="customizing-the-createuserwizards-behavior-and-appearance-through-its-properties"></a><span data-ttu-id="d68ce-343">Dostosowywanie zachowania i wyglądu za pośrednictwem jego właściwości CreateUserWizard</span><span class="sxs-lookup"><span data-stu-id="d68ce-343">Customizing the CreateUserWizard's Behavior and Appearance Through Its Properties</span></span>

<span data-ttu-id="d68ce-344">Na różne sposoby, za pomocą właściwości, można dostosować CreateUserWizard `WizardSteps`do programów obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="d68ce-344">The CreateUserWizard can be customized in a variety of ways, through properties, `WizardSteps`, and event handlers.</span></span> <span data-ttu-id="d68ce-345">W tej sekcji przyjrzymy się jak dostosować wygląd formantu za pomocą jego właściwości; Następna sekcja patrzy na rozszerzanie zachowania formantu przy użyciu programów obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="d68ce-345">In this section we will look at how to customize the control's appearance through its properties; the next section looks at extending the control's behavior through event handlers.</span></span>

<span data-ttu-id="d68ce-346">Praktycznie wszystkich tekstu wyświetlanego w interfejsie użytkownika domyślny formant CreateUserWizard można dostosować za pomocą jego mnóstwo właściwości.</span><span class="sxs-lookup"><span data-stu-id="d68ce-346">Virtually all of the text displayed in the CreateUserWizard control's default user interface can be customized through its plethora of properties.</span></span> <span data-ttu-id="d68ce-347">Na przykład "Nazwa użytkownika", "Password", "Potwierdź hasło", "Wiadomość E-mail", "Pytanie zabezpieczające" i "Zabezpieczającą" etykiety wyświetlany z lewej strony pól tekstowych można dostosowywać przez [ `UserNameLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.usernamelabeltext.aspx), [ `PasswordLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.passwordlabeltext.aspx), [ `ConfirmPasswordLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.confirmpasswordlabeltext.aspx), [ `EmailLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.emaillabeltext.aspx), [ `QuestionLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.questionlabeltext.aspx), i [ `AnswerLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.answerlabeltext.aspx)właściwości, odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="d68ce-347">For example, the "User Name", "Password", "Confirm Password", "E-mail", "Security Question", and "Security Answer" labels displayed to the left of the textboxes can be customized by the [`UserNameLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.usernamelabeltext.aspx), [`PasswordLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.passwordlabeltext.aspx), [`ConfirmPasswordLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.confirmpasswordlabeltext.aspx), [`EmailLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.emaillabeltext.aspx), [`QuestionLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.questionlabeltext.aspx), and [`AnswerLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.answerlabeltext.aspx) properties, respectively.</span></span> <span data-ttu-id="d68ce-348">Podobnie, ma właściwości do określania tekstu, przycisków "Create User" i "Kontynuuj" w `CreateUserWizardStep` i `CompleteWizardStep`, jak również tak, jakby przyciski te są renderowane jako przyciski, LinkButtons lub ImageButtons.</span><span class="sxs-lookup"><span data-stu-id="d68ce-348">Likewise, there are properties for specifying the text for the "Create User" and "Continue" buttons in the `CreateUserWizardStep` and `CompleteWizardStep`, as well as if these buttons are rendered as Buttons, LinkButtons, or ImageButtons.</span></span>

<span data-ttu-id="d68ce-349">Kolory, obramowania, czcionki i inne elementy wizualne mogą być konfigurowane przez host ponownego obliczenia właściwości stylu.</span><span class="sxs-lookup"><span data-stu-id="d68ce-349">The colors, borders, fonts, and other visual elements are configurable through a host of style properties.</span></span> <span data-ttu-id="d68ce-350">Sama kontrolka CreateUserWizard ma typowe właściwości stylu formantu sieci Web — `BackColor`, `BorderStyle`, `CssClass`, `Font`i tak dalej — i kilka do definiowania wyglądu dla poszczególnych sekcji ponownego obliczenia właściwości stylu Interfejs CreateUserWizard firmy.</span><span class="sxs-lookup"><span data-stu-id="d68ce-350">The CreateUserWizard control itself has the common Web control style properties – `BackColor`, `BorderStyle`, `CssClass`, `Font`, and so on – and there are a number of style properties for defining the appearance for particular sections of the CreateUserWizard's interface.</span></span> <span data-ttu-id="d68ce-351">[ `TextBoxStyle` Właściwość](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.textboxstyle.aspx), na przykład określa style dla pola tekstowe w `CreateUserWizardStep`, podczas [ `TitleTextStyle` właściwość](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.titletextstyle.aspx) definiuje styl tytułu ("Utwórz konto dla nowej usługi Konto").</span><span class="sxs-lookup"><span data-stu-id="d68ce-351">The [`TextBoxStyle` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.textboxstyle.aspx), for instance, defines the styles for the textboxes in the `CreateUserWizardStep`, while the [`TitleTextStyle` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.titletextstyle.aspx) defines the style for the title ("Sign Up for Your New Account").</span></span>

<span data-ttu-id="d68ce-352">Oprócz właściwości powiązane z wyglądem istnieje kilka właściwości, które mają wpływ na zachowanie kontroli CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="d68ce-352">In addition to the appearance-related properties, there are a number of properties that affect the CreateUserWizard control's behavior.</span></span> <span data-ttu-id="d68ce-353">[ `DisplayCancelButton` Właściwości](https://msdn.microsoft.com/library/system.web.ui.webcontrols.wizard.displaycancelbutton.aspx), jeśli ustawiono wartość True, wyświetla przycisk Anuluj, obok przycisku "Utwórz użytkownika" (wartość domyślna to False).</span><span class="sxs-lookup"><span data-stu-id="d68ce-353">The [`DisplayCancelButton` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.wizard.displaycancelbutton.aspx), if set to True, displays a Cancel button next to the "Create User" button (the default value is False).</span></span> <span data-ttu-id="d68ce-354">Jeśli przycisk Anuluj jest wyświetlany, należy również ustawić [ `CancelDestinationPageUrl` właściwość](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx), który określa stronę, użytkownik wysyłanymi do po kliknięciu przycisku Anuluj.</span><span class="sxs-lookup"><span data-stu-id="d68ce-354">If you display the Cancel button, be sure to also set the [`CancelDestinationPageUrl` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx), which specifies the page the user is sent to after clicking Cancel.</span></span> <span data-ttu-id="d68ce-355">Jak wspomniano w poprzedniej sekcji, a przycisk Kontynuuj w `CompleteWizardStep`przez interfejs, który powoduje odświeżenie strony, ale pozostawia odwiedzający na tej samej stronie.</span><span class="sxs-lookup"><span data-stu-id="d68ce-355">As noted in the previous section, the Continue button in the `CompleteWizardStep`'s interface causes a postback, but leaves the visitor on the same page.</span></span> <span data-ttu-id="d68ce-356">Aby wysłać użytkownika do innej strony po kliknięciu przycisku Kontynuuj, wystarczy określić adres URL w [ `ContinueDestinationPageUrl` właściwość](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx).</span><span class="sxs-lookup"><span data-stu-id="d68ce-356">To send the visitor to some other page after clicking the Continue button, simply specify the URL in the [`ContinueDestinationPageUrl` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx).</span></span>

<span data-ttu-id="d68ce-357">Zaktualizujmy `RegisterUser` kontroli CreateUserWizard Pokaż przycisk Anuluj i wysłać użytkownika `Default.aspx` po kliknięciu przycisku Anuluj, lub Kontynuuj.</span><span class="sxs-lookup"><span data-stu-id="d68ce-357">Let's update the `RegisterUser` CreateUserWizard control to show a Cancel button and to send the visitor to `Default.aspx` when the Cancel or Continue buttons are clicked.</span></span> <span data-ttu-id="d68ce-358">Aby to zrobić, należy ustawić `DisplayCancelButton` właściwości na wartość True, a oba `CancelDestinationPageUrl` i `ContinueDestinationPageUrl` właściwości "~ / Default.aspx".</span><span class="sxs-lookup"><span data-stu-id="d68ce-358">To accomplish this, set the `DisplayCancelButton` property to True and both the `CancelDestinationPageUrl` and `ContinueDestinationPageUrl` properties to "~/Default.aspx".</span></span> <span data-ttu-id="d68ce-359">Rysunek 14 zawiera zaktualizowane CreateUserWizard podczas wyświetlania za pośrednictwem przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="d68ce-359">Figure 14 shows the updated CreateUserWizard when viewed through a browser.</span></span>


<span data-ttu-id="d68ce-360">[![Element CreateUserWizardStep zawiera przycisk Anuluj](creating-user-accounts-cs/_static/image41.png)](creating-user-accounts-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="d68ce-360">[![The CreateUserWizardStep Includes a Cancel Button](creating-user-accounts-cs/_static/image41.png)](creating-user-accounts-cs/_static/image40.png)</span></span>

<span data-ttu-id="d68ce-361">**Rysunek 14**: `CreateUserWizardStep` Zawiera przycisk anulowania ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="d68ce-361">**Figure 14**: The `CreateUserWizardStep` Includes a Cancel Button  ([Click to view full-size image](creating-user-accounts-cs/_static/image42.png))</span></span>


<span data-ttu-id="d68ce-362">Po użytkownik wprowadza nazwę użytkownika, hasło, adres e-mail i pytanie zabezpieczające i odpowiedzi i kliknie przycisk "Create User", jest tworzone nowe konto użytkownika i użytkownik jest zalogowany jako nowo utworzone przez tego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-362">When a visitor enters a username, password, email address, and security question and answer and clicks "Create User," a new user account is created and the visitor is logged in as that newly created user.</span></span> <span data-ttu-id="d68ce-363">Przy założeniu, że osoby, odwiedzając stronę tworzy nowe konto dla siebie, to prawdopodobnie żądane zachowanie.</span><span class="sxs-lookup"><span data-stu-id="d68ce-363">Assuming that the person visiting the page is creating a new account for themselves, this is likely the desired behavior.</span></span> <span data-ttu-id="d68ce-364">Można jednak administratorzy mogą dodawać nowych kont użytkowników.</span><span class="sxs-lookup"><span data-stu-id="d68ce-364">However, you may want to allow Administrators to add new user accounts.</span></span> <span data-ttu-id="d68ce-365">W ten sposób będzie można utworzyć konto użytkownika, ale Administrator pozostanie zalogowany jako Administrator (a nie nowo utworzonych kont).</span><span class="sxs-lookup"><span data-stu-id="d68ce-365">In doing so, the user account would be created, but the Administrator would remain logged in as an Administrator (and not as the newly created account).</span></span> <span data-ttu-id="d68ce-366">To zachowanie można modyfikować za pomocą typu Boolean [ `LoginCreatedUser` właściwość](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.logincreateduser.aspx).</span><span class="sxs-lookup"><span data-stu-id="d68ce-366">This behavior can be modified through the Boolean [`LoginCreatedUser` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.logincreateduser.aspx).</span></span>

<span data-ttu-id="d68ce-367">Konta użytkowników w ramach członkostwa zawierają zatwierdzonych flagę; Nie można zalogować się do witryny są użytkownicy, którzy nie zostały zatwierdzone.</span><span class="sxs-lookup"><span data-stu-id="d68ce-367">User accounts in the Membership framework contain an approved flag; users who are not approved are unable to log into the site.</span></span> <span data-ttu-id="d68ce-368">Domyślnie nowo utworzonego konta jest oznaczony jako zatwierdzone, umożliwiając użytkownikowi logowanie się do witryny natychmiast.</span><span class="sxs-lookup"><span data-stu-id="d68ce-368">By default, a newly created account is marked as approved, allowing the user to log into the site immediately.</span></span> <span data-ttu-id="d68ce-369">Jest to możliwe, jest jednak mieć nowych kont użytkowników, oznaczone jako niezatwierdzonych.</span><span class="sxs-lookup"><span data-stu-id="d68ce-369">It is possible, however, to have new user accounts marked as unapproved.</span></span> <span data-ttu-id="d68ce-370">Na przykład możesz Administrator, aby ręcznie zatwierdzić nowych użytkowników, zanim mogą oni się zalogować. lub być może chcesz zweryfikować, że przed pozwalające użytkownikowi na logowanie jest prawidłowy adres e-mail wprowadzony podczas rejestracji.</span><span class="sxs-lookup"><span data-stu-id="d68ce-370">Perhaps you want an Administrator to manually approve new users before they can log in; or maybe you want to verify that the email address entered at signup is valid before permitting a user to log on.</span></span> <span data-ttu-id="d68ce-371">Niezależnie od przyczyny wyświetlenia, możesz mieć konto nowo utworzonego użytkownika, oznaczone jako niezatwierdzonych przez ustawienie sterowania CreateUserWizard [ `DisableCreatedUser` właściwość](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.disablecreateduser.aspx) na wartość True (wartość domyślna to False).</span><span class="sxs-lookup"><span data-stu-id="d68ce-371">Whatever the case may be, you can have the newly created user account marked as unapproved by setting the CreateUserWizard control's [`DisableCreatedUser` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.disablecreateduser.aspx) to True (the default is False).</span></span>

<span data-ttu-id="d68ce-372">Inne właściwości związane z zachowaniem uwagi obejmują `AutoGeneratePassword` i `MailDefinition`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-372">Other behavior-related properties of note include `AutoGeneratePassword` and `MailDefinition`.</span></span> <span data-ttu-id="d68ce-373">Jeśli [ `AutoGeneratePassword` właściwość](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.autogeneratepassword.aspx) jest ustawiona na wartość True, `CreateUserWizardStep` nie są wyświetlane pola tekstowe "Password" i "Potwierdź hasło"; zamiast tego nowo utworzone hasło użytkownika jest automatycznie generowana z użyciem `Membership` klasy [ `GeneratePassword` metoda](https://msdn.microsoft.com/library/system.web.security.membership.generatepassword.aspx).</span><span class="sxs-lookup"><span data-stu-id="d68ce-373">If the [`AutoGeneratePassword` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.autogeneratepassword.aspx) is set to True, the `CreateUserWizardStep` does not display the "Password" and "Confirm Password" textboxes; instead, the newly-created user's password is automatically generated using the `Membership` class's [`GeneratePassword` method](https://msdn.microsoft.com/library/system.web.security.membership.generatepassword.aspx).</span></span> <span data-ttu-id="d68ce-374">`GeneratePassword` Metoda konstrukcje hasła o określonej długości i z wystarczającą liczbą znaków innych niż alfanumeryczne w celu spełnienia wymagań siły skonfigurowanym hasłem.</span><span class="sxs-lookup"><span data-stu-id="d68ce-374">The `GeneratePassword` method constructs a password of a specified length and with a sufficient number of non-alphanumeric characters to satisfy the configured password strength requirements.</span></span>

<span data-ttu-id="d68ce-375">[ `MailDefinition` Właściwość](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.maildefinition.aspx) jest przydatne, jeśli chcesz wysłać wiadomość e-mail na adres e-mail określony w trakcie procesu tworzenia konta.</span><span class="sxs-lookup"><span data-stu-id="d68ce-375">The [`MailDefinition` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.maildefinition.aspx) is useful if you want to send an email to the email address specified during the account creation process.</span></span> <span data-ttu-id="d68ce-376">`MailDefinition` Właściwość zawiera szereg właściwości podrzędnych do definiowania informacji na temat wiadomości e-mail skonstruowany.</span><span class="sxs-lookup"><span data-stu-id="d68ce-376">The `MailDefinition` property includes a series of subproperties for defining information about the constructed email message.</span></span> <span data-ttu-id="d68ce-377">Te właściwości obejmują opcje, takie jak `Subject`, `Priority`, `IsBodyHtml`, `From`, `CC`, i `BodyFileName`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-377">These subproperties include options like `Subject`, `Priority`, `IsBodyHtml`, `From`, `CC`, and `BodyFileName`.</span></span> <span data-ttu-id="d68ce-378">[ `BodyFileName` Właściwość](https://msdn.microsoft.com/library/system.web.ui.webcontrols.maildefinition.bodyfilename.aspx) wskazuje tekst lub pliku HTML, który zawiera treść wiadomości e-mail.</span><span class="sxs-lookup"><span data-stu-id="d68ce-378">The [`BodyFileName` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.maildefinition.bodyfilename.aspx) points to a text or HTML file that contains the body for the email message.</span></span> <span data-ttu-id="d68ce-379">Treść obsługuje dwa wstępnie zdefiniowane symbole zastępcze: `<%UserName%>` i `<%Password%>`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-379">The body supports two pre-defined placeholders: `<%UserName%>` and `<%Password%>`.</span></span> <span data-ttu-id="d68ce-380">Te symbole zastępcze, jeśli jest obecny w `BodyFileName` pliku, zostanie zastąpiony nowo utworzoną nazwę i hasło użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-380">These placeholders, if present in the `BodyFileName` file, will be replaced with the just-created user's name and password.</span></span>

> [!NOTE]
> <span data-ttu-id="d68ce-381">`CreateUserWizard` Kontrolki `MailDefinition` właściwość określa tylko szczegóły dotyczące wiadomości e-mail, która jest wysyłana, gdy tworzone jest nowe konto.</span><span class="sxs-lookup"><span data-stu-id="d68ce-381">The `CreateUserWizard` control's `MailDefinition` property just specifies details about the email message that is sent when a new account is created.</span></span> <span data-ttu-id="d68ce-382">Nie zawiera wszystkie szczegółowe informacje dotyczące sposobu faktycznie zostanie wysłana wiadomość e-mail (oznacza to, czy jest używany katalog serwera lub przechowywania poczty usługi SMTP, wszelkie informacje uwierzytelniania i tak dalej).</span><span class="sxs-lookup"><span data-stu-id="d68ce-382">It does not include any details on how the email message is actually sent (that is, whether an SMTP server or mail drop directory is used, any authentication information, and so on).</span></span> <span data-ttu-id="d68ce-383">Te szczegóły niskiego poziomu, które muszą być zdefiniowane w `<system.net>` sekcji `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-383">These low-level details need to be defined in the `<system.net>` section in `Web.config`.</span></span> <span data-ttu-id="d68ce-384">Aby uzyskać więcej informacji na temat tych ustawień konfiguracji i wysyłanie wiadomości e-mail z programu ASP.NET 2.0, ogólnie rzecz biorąc, zobacz [— często zadawane pytania na SystemNetMail.com](http://www.systemnetmail.com/) i Moje artykułu [wysyłania wiadomości E-mail w programie ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/072606-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="d68ce-384">For more information on these configuration settings and on sending email from ASP.NET 2.0 in general, refer to the [FAQs at SystemNetMail.com](http://www.systemnetmail.com/) and my article, [Sending Email in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/072606-1.aspx).</span></span>


### <a name="extending-the-createuserwizards-behavior-using-event-handlers"></a><span data-ttu-id="d68ce-385">Rozszerzanie zachowanie CreateUserWizard przy użyciu programów obsługi zdarzeń</span><span class="sxs-lookup"><span data-stu-id="d68ce-385">Extending the CreateUserWizard's Behavior Using Event Handlers</span></span>

<span data-ttu-id="d68ce-386">Kontrolka CreateUserWizard podnosi liczbę zdarzeń, podczas jego przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="d68ce-386">The CreateUserWizard control raises a number of events during its workflow.</span></span> <span data-ttu-id="d68ce-387">Na przykład po użytkownik wprowadza swoją nazwę użytkownika, hasło i inne istotne informacje i kliknie przycisk "Create User", zgłasza kontroli CreateUserWizard jego [ `CreatingUser` zdarzeń](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.creatinguser.aspx).</span><span class="sxs-lookup"><span data-stu-id="d68ce-387">For example, after a visitor enters their username, password, and other pertinent information and clicks the "Create User" button, the CreateUserWizard control raises its [`CreatingUser` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.creatinguser.aspx).</span></span> <span data-ttu-id="d68ce-388">Jeśli występuje problem podczas procesu tworzenia [ `CreateUserError` zdarzeń](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createusererror.aspx) wyzwoleniu; jednak, jeśli użytkownik została pomyślnie utworzona, a następnie [ `CreatedUser` zdarzeń](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createduser.aspx) jest wywoływane.</span><span class="sxs-lookup"><span data-stu-id="d68ce-388">If there is a problem during the create process, the [`CreateUserError` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createusererror.aspx) is fired; however, if the user is successfully created, then the [`CreatedUser` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createduser.aspx) is raised.</span></span> <span data-ttu-id="d68ce-389">Istnieją dodatkowe zdarzenia kontroli CreateUserWizard, które pobieranie, ale są to trzy najbardziej istotnego znaczenia dla nich.</span><span class="sxs-lookup"><span data-stu-id="d68ce-389">There are additional CreateUserWizard control events that get raised, but these are the three most germane ones.</span></span>

<span data-ttu-id="d68ce-390">W niektórych scenariuszach może być chcemy akademickiej CreateUserWizard przepływu pracy, którą firma Microsoft może zrobić, tworząc program obsługi zdarzeń dla odpowiedniego zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="d68ce-390">In certain scenarios we may want to tap into the CreateUserWizard workflow, which we can do by creating an event handler for the appropriate event.</span></span> <span data-ttu-id="d68ce-391">Na przykład możemy poprawić `RegisterUser` kontroli CreateUserWizard obejmujący niektóre niestandardowe sprawdzanie poprawności na nazwę użytkownika i hasło.</span><span class="sxs-lookup"><span data-stu-id="d68ce-391">To illustrate this, let's enhance the `RegisterUser` CreateUserWizard control to include some custom validation on the username and password.</span></span> <span data-ttu-id="d68ce-392">W szczególności umożliwia zwiększenie naszych CreateUserWizard tak, aby nazwy użytkowników nie może zawierać spacji wiodących ani końcowych i nazwa użytkownika nie może występować w dowolnym miejscu w haśle.</span><span class="sxs-lookup"><span data-stu-id="d68ce-392">In particular, let's enhance our CreateUserWizard so that usernames cannot contain leading or trailing spaces and the username cannot appear anywhere in the password.</span></span> <span data-ttu-id="d68ce-393">Krótko mówiąc chcemy zapobiec ktoś z tworzenia nazwę użytkownika, takich jak "Scott" lub masz kombinację nazwy użytkownika/hasła, takie jak "Scott" i "Scott.1234".</span><span class="sxs-lookup"><span data-stu-id="d68ce-393">In short, we want to prevent someone from creating a username like "Scott ", or having a username/password combination like "Scott" and "Scott.1234".</span></span>

<span data-ttu-id="d68ce-394">W tym utworzymy automatycznie zdarzenia obsługi dla `CreatingUser` zdarzenie, aby wykonać Nasze testy dodatkową walidację.</span><span class="sxs-lookup"><span data-stu-id="d68ce-394">To accomplish this we will create an event handler for the `CreatingUser` event to perform our extra validation checks.</span></span> <span data-ttu-id="d68ce-395">Podane dane są nieprawidłowe potrzebujemy anulować procesu tworzenia.</span><span class="sxs-lookup"><span data-stu-id="d68ce-395">If the supplied data is not valid we need to cancel the creation process.</span></span> <span data-ttu-id="d68ce-396">Należy również dodać kontrolkę etykiety w sieci Web do strony, aby wyświetlić komunikat wyjaśniający, że nazwa użytkownika lub hasło jest nieprawidłowe.</span><span class="sxs-lookup"><span data-stu-id="d68ce-396">We also need to add a Label Web control to the page to display a message explaining that the username or password is invalid.</span></span> <span data-ttu-id="d68ce-397">Rozpocznij, dodając kontrolkę typu etykieta poniżej formantu CreateUserWizard, ustawiając jego `ID` właściwości `InvalidUserNameOrPasswordMessage` i jego `ForeColor` właściwość `Red`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-397">Start by adding a Label control beneath the CreateUserWizard control, setting its `ID` property to `InvalidUserNameOrPasswordMessage` and its `ForeColor` property to `Red`.</span></span> <span data-ttu-id="d68ce-398">Czyści jej `Text` właściwości i ustaw jego `EnableViewState` i `Visible` właściwości na wartość False.</span><span class="sxs-lookup"><span data-stu-id="d68ce-398">Clear out its `Text` property and set its `EnableViewState` and `Visible` properties to False.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample7.aspx)]

<span data-ttu-id="d68ce-399">Następnie należy utworzyć program obsługi zdarzeń dla formantu CreateUserWizard `CreatingUser` zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="d68ce-399">Next, create an event handler for the CreateUserWizard control's `CreatingUser` event.</span></span> <span data-ttu-id="d68ce-400">Aby utworzyć program obsługi zdarzeń, wybierz formant w projektancie, a następnie przejdź do okna właściwości.</span><span class="sxs-lookup"><span data-stu-id="d68ce-400">To create an event handler, select the control in the Designer and then go to the Properties window.</span></span> <span data-ttu-id="d68ce-401">W tym miejscu kliknij ikonę pioruna, a następnie kliknij dwukrotnie odpowiednie zdarzenie, aby utworzyć program obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="d68ce-401">From there, click on the lightning bolt icon and then double-click the appropriate event to create the event handler.</span></span>

<span data-ttu-id="d68ce-402">Dodaj następujący kod do `CreatingUser` program obsługi zdarzeń:</span><span class="sxs-lookup"><span data-stu-id="d68ce-402">Add the following code to the `CreatingUser` event handler:</span></span>

[!code-csharp[Main](creating-user-accounts-cs/samples/sample8.cs)]

<span data-ttu-id="d68ce-403">Należy pamiętać, że nazwa użytkownika i hasło wprowadzone w formancie CreateUserWizard są dostępne za pośrednictwem jego [ `UserName` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.username.aspx) i [ `Password` właściwości](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.password.aspx), odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="d68ce-403">Note that the username and password entered into the CreateUserWizard control are available through its [`UserName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.username.aspx) and [`Password` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.password.aspx), respectively.</span></span> <span data-ttu-id="d68ce-404">Używamy tych właściwości w powyższej procedury obsługi zdarzeń można określić, czy podana nazwa użytkownika zawiera spacji wiodących ani końcowych i tego, czy nazwa użytkownika znajduje się w obrębie hasło.</span><span class="sxs-lookup"><span data-stu-id="d68ce-404">We use these properties in the above event handler to determine whether the supplied username contains leading or trailing spaces and whether the username is found within the password.</span></span> <span data-ttu-id="d68ce-405">Jeśli jeden z tych warunków jest spełniony, komunikat o błędzie jest wyświetlany w `InvalidUserNameOrPasswordMessage` etykiety i program obsługi zdarzeń `e.Cancel` właściwość jest ustawiona na `true`.</span><span class="sxs-lookup"><span data-stu-id="d68ce-405">If either of these conditions is met, an error message is displayed in the `InvalidUserNameOrPasswordMessage` Label and the event handler's `e.Cancel` property is set to `true`.</span></span> <span data-ttu-id="d68ce-406">Jeśli `e.Cancel` ustawiono `true`, CreateUserWizard short-circuits jego przepływu pracy, efektywnie anulowanie procesu tworzenia konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d68ce-406">If `e.Cancel` is set to `true`, the CreateUserWizard short-circuits its workflow, effectively cancelling the user account creation process.</span></span>

<span data-ttu-id="d68ce-407">Zrzut ekranu pokazuje, rysunek 15 `CreatingUserAccounts.aspx` po użytkownik wprowadza nazwę użytkownika, za pomocą spacji wiodących.</span><span class="sxs-lookup"><span data-stu-id="d68ce-407">Figure 15 shows a screen shot of `CreatingUserAccounts.aspx` when the user enters a username with leading spaces.</span></span>


<span data-ttu-id="d68ce-408">[![Nazwy użytkowników za pomocą wiodące lub końcowe spacje są niedozwolone.](creating-user-accounts-cs/_static/image44.png)](creating-user-accounts-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="d68ce-408">[![Usernames with Leading or Trailing Spaces are not Permitted](creating-user-accounts-cs/_static/image44.png)](creating-user-accounts-cs/_static/image43.png)</span></span>

<span data-ttu-id="d68ce-409">**Rysunek 15**: Nazwy użytkowników za pomocą wiodące lub końcowe spacje nie są dozwolone ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image45.png))</span><span class="sxs-lookup"><span data-stu-id="d68ce-409">**Figure 15**: Usernames with Leading or Trailing Spaces are not Permitted  ([Click to view full-size image](creating-user-accounts-cs/_static/image45.png))</span></span>


> [!NOTE]
> <span data-ttu-id="d68ce-410">Będzie można znaleźć przykład za pomocą kontroli CreateUserWizard `CreatedUser` zdarzenia w *<a id="_msoanchor_11"> </a> [przechowywanie dodatkowych informacji użytkownika](storing-additional-user-information-cs.md)* samouczka.</span><span class="sxs-lookup"><span data-stu-id="d68ce-410">We will see an example of using the CreateUserWizard control's `CreatedUser` event in the *<a id="_msoanchor_11"></a>[Storing Additional User Information](storing-additional-user-information-cs.md)* tutorial.</span></span>


## <a name="summary"></a><span data-ttu-id="d68ce-411">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="d68ce-411">Summary</span></span>

<span data-ttu-id="d68ce-412">`Membership` Klasy `CreateUser` metoda tworzy nowe konto użytkownika w ramach członkostwa.</span><span class="sxs-lookup"><span data-stu-id="d68ce-412">The `Membership` class's `CreateUser` method creates a new user account in the Membership framework.</span></span> <span data-ttu-id="d68ce-413">Robi to przez delegowanie wywołań do skonfigurowanego dostawcy członkostwa.</span><span class="sxs-lookup"><span data-stu-id="d68ce-413">It does so by delegating the call to the configured Membership provider.</span></span> <span data-ttu-id="d68ce-414">W przypadku właściwości `SqlMembershipProvider`, `CreateUser` metoda dodaje rekord do `aspnet_Users` i `aspnet_Membership` bazy danych tabel.</span><span class="sxs-lookup"><span data-stu-id="d68ce-414">In the case of the `SqlMembershipProvider`, the `CreateUser` method adds a record to the `aspnet_Users` and `aspnet_Membership` database tables.</span></span>

<span data-ttu-id="d68ce-415">Programowe (jak widzieliśmy w kroku 5) można tworzyć nowych kont użytkowników, szybciej i łatwiej podejścia polega na korzystanie z kontrolki CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="d68ce-415">While new user accounts can be created programmatically (as we saw in Step 5), a faster and easier approach is to use the CreateUserWizard control.</span></span> <span data-ttu-id="d68ce-416">Ta kontrolka renderuje interfejs użytkownika wieloetapowego do zbierania informacji o użytkowniku i tworzenia nowego użytkownika w ramach członkostwa.</span><span class="sxs-lookup"><span data-stu-id="d68ce-416">This control renders a multi-step user interface for collecting user information and creating a new user in the Membership framework.</span></span> <span data-ttu-id="d68ce-417">Wewnętrznie ta kontrolka używa tych samych `Membership.CreateUser` metodzie jak badania w kroku 5, ale formant jest tworzony interfejs użytkownika, formanty sprawdzania poprawności i reaguje na błędy tworzenia konta użytkownika bez konieczności pisania lizawki kodu.</span><span class="sxs-lookup"><span data-stu-id="d68ce-417">Underneath the covers, this control uses the same `Membership.CreateUser` method as examined in Step 5, but the control creates the user interface, validation controls, and responds to user account creation errors without having to write a lick of code.</span></span>

<span data-ttu-id="d68ce-418">W tym momencie mamy funkcje, w celu tworzenia nowych kont użytkowników.</span><span class="sxs-lookup"><span data-stu-id="d68ce-418">At this point we have the functionality in place to create new user accounts.</span></span> <span data-ttu-id="d68ce-419">Jednak na stronie logowania nadal trwa sprawdzanie poprawności względem tych zakodowanych poświadczeń, które określonej w drugim samouczku.</span><span class="sxs-lookup"><span data-stu-id="d68ce-419">However, the login page still is validating against those hard-coded credentials we specified back in the second tutorial.</span></span> <span data-ttu-id="d68ce-420">W <a id="_msoanchor_12"> </a> [następnego samouczka](validating-user-credentials-against-the-membership-user-store-cs.md) zaktualizujemy `Login.aspx` sprawdza, czy użytkownik użytkownika podane poświadczenia w ramach członkostwa.</span><span class="sxs-lookup"><span data-stu-id="d68ce-420">In the <a id="_msoanchor_12"></a>[next tutorial](validating-user-credentials-against-the-membership-user-store-cs.md) we will update `Login.aspx` to validate the user's supplied credentials against the Membership framework.</span></span>

<span data-ttu-id="d68ce-421">Wszystkiego najlepszego programowania!</span><span class="sxs-lookup"><span data-stu-id="d68ce-421">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="d68ce-422">Dalsze informacje</span><span class="sxs-lookup"><span data-stu-id="d68ce-422">Further Reading</span></span>

<span data-ttu-id="d68ce-423">Więcej informacji na tematów omówionych w tym samouczku można znaleźć w następujących zasobach:</span><span class="sxs-lookup"><span data-stu-id="d68ce-423">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="d68ce-424">`CreateUser` Dokumentacja techniczna</span><span class="sxs-lookup"><span data-stu-id="d68ce-424">`CreateUser` Technical Documentation</span></span>](https://msdn.microsoft.com/library/system.web.security.membershipprovider.createuser.aspx)
- [<span data-ttu-id="d68ce-425">CreateUserWizard informacje o formancie</span><span class="sxs-lookup"><span data-stu-id="d68ce-425">CreateUserWizard Control Overview</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/login/createuserwizard.aspx)
- [<span data-ttu-id="d68ce-426">Tworzenie dostawcy mapy witryny opartej na systemie plików</span><span class="sxs-lookup"><span data-stu-id="d68ce-426">Creating a File System-Based Site Map Provider</span></span>](http://aspnet.4guysfromrolla.com/articles/020106-1.aspx)
- [<span data-ttu-id="d68ce-427">Tworzenie interfejsu użytkownika krok po kroku za pomocą kontrolki ASP.NET 2.0 Kreatora</span><span class="sxs-lookup"><span data-stu-id="d68ce-427">Creating a Step-by-Step User Interface with the ASP.NET 2.0 Wizard Control</span></span>](http://aspnet.4guysfromrolla.com/articles/061406-1.aspx)
- [<span data-ttu-id="d68ce-428">Badanie programu ASP.NET 2.0 w nawigacji po witrynie</span><span class="sxs-lookup"><span data-stu-id="d68ce-428">Examining ASP.NET 2.0's Site Navigation</span></span>](http://aspnet.4guysfromrolla.com/articles/111605-1.aspx)
- [<span data-ttu-id="d68ce-429">Strony wzorcowe i nawigacja w witrynie</span><span class="sxs-lookup"><span data-stu-id="d68ce-429">Master Pages and Site Navigation</span></span>](https://asp.net/learn/data-access/tutorial-03-vb.aspx)
- [<span data-ttu-id="d68ce-430">Dostawcy mapy witryny SQL oczekiwania dla</span><span class="sxs-lookup"><span data-stu-id="d68ce-430">The SQL Site Map Provider You've Been Waiting For</span></span>](https://msdn.microsoft.com/msdnmag/issues/06/02/WickedCode/default.aspx)

### <a name="about-the-author"></a><span data-ttu-id="d68ce-431">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="d68ce-431">About the Author</span></span>

<span data-ttu-id="d68ce-432">Pracował nad Bento Scottem, autor wiele książek ASP/ASP.NET i założyciel 4GuysFromRolla.com, przy użyciu technologii Microsoft Web od 1998 r.</span><span class="sxs-lookup"><span data-stu-id="d68ce-432">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="d68ce-433">Scott działa jako niezależny Konsultant, trainer i składnika zapisywania.</span><span class="sxs-lookup"><span data-stu-id="d68ce-433">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="d68ce-434">Jego najnowszą książkę Stephena  *[Sams uczyć się ASP.NET 2.0 w ciągu 24 godzin](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="d68ce-434">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="d68ce-435">Scott można z Tobą skontaktować w [ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com) lub za pośrednictwem jego blog znajduje się na [ http://ScottOnWriting.NET ](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="d68ce-435">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="d68ce-436">Specjalne podziękowania dla...</span><span class="sxs-lookup"><span data-stu-id="d68ce-436">Special Thanks To…</span></span>

<span data-ttu-id="d68ce-437">W tej serii samouczków został zrecenzowany przez wielu recenzentów pomocne.</span><span class="sxs-lookup"><span data-stu-id="d68ce-437">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="d68ce-438">Weryfikacja potencjalnych klientów w ramach tego samouczka został Teresa Murphy.</span><span class="sxs-lookup"><span data-stu-id="d68ce-438">Lead reviewer for this tutorial was Teresa Murphy.</span></span> <span data-ttu-id="d68ce-439">Zainteresowani zapoznaniem Moje kolejnych artykułów MSDN?</span><span class="sxs-lookup"><span data-stu-id="d68ce-439">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="d68ce-440">Jeśli tak, Porzuć mnie linii w [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com).</span><span class="sxs-lookup"><span data-stu-id="d68ce-440">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="d68ce-441">[Poprzednie](creating-the-membership-schema-in-sql-server-cs.md)
> [dalej](validating-user-credentials-against-the-membership-user-store-cs.md)</span><span class="sxs-lookup"><span data-stu-id="d68ce-441">[Previous](creating-the-membership-schema-in-sql-server-cs.md)
[Next](validating-user-credentials-against-the-membership-user-store-cs.md)</span></span>

---
uid: web-forms/overview/older-versions-security/membership/creating-user-accounts-cs
title: Tworzenie kont użytkowników (C#) | Microsoft Docs
author: rick-anderson
description: W tym samouczku opisano użycie platformy członkostwa (za pośrednictwem SqlMembershipProvider) w celu utworzenia nowych kont użytkowników. Zobaczymy, jak utworzyć nową firmę...
ms.author: riande
ms.date: 01/18/2008
ms.assetid: f175278c-6079-4d91-b9b4-2493ed43d9ec
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-user-accounts-cs
msc.type: authoredcontent
ms.openlocfilehash: 955592320e7d36c7ae3b9c03a361bee2183f1776
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78631979"
---
# <a name="creating-user-accounts-c"></a><span data-ttu-id="abd86-104">Tworzenie kont użytkowników (C#)</span><span class="sxs-lookup"><span data-stu-id="abd86-104">Creating User Accounts (C#)</span></span>

<span data-ttu-id="abd86-105">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="abd86-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="abd86-106">[Pobierz kod](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_05_CS.zip) lub [Pobierz plik PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial05_CreatingUsers_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="abd86-106">[Download Code](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_05_CS.zip) or [Download PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial05_CreatingUsers_cs.pdf)</span></span>

> <span data-ttu-id="abd86-107">W tym samouczku opisano użycie platformy członkostwa (za pośrednictwem SqlMembershipProvider) w celu utworzenia nowych kont użytkowników.</span><span class="sxs-lookup"><span data-stu-id="abd86-107">In this tutorial we will explore using the Membership framework (via the SqlMembershipProvider) to create new user accounts.</span></span> <span data-ttu-id="abd86-108">Zobaczymy, jak tworzyć nowych użytkowników programowo i za pomocą środowiska ASP. Wbudowana kontrolka formancie CreateUserWizard netto.</span><span class="sxs-lookup"><span data-stu-id="abd86-108">We will see how to create new users programmatically and through ASP.NET's built-in CreateUserWizard control.</span></span>

## <a name="introduction"></a><span data-ttu-id="abd86-109">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="abd86-109">Introduction</span></span>

<span data-ttu-id="abd86-110"><a id="_msoanchor_1"> </a>W [poprzednim samouczku](creating-the-membership-schema-in-sql-server-cs.md) zainstalowano schemat usług aplikacji w bazie danych, która dodała tabele, widoki i procedury składowane, które są niezbędne `SqlMembershipProvider` i `SqlRoleProvider`.</span><span class="sxs-lookup"><span data-stu-id="abd86-110">In the <a id="_msoanchor_1"></a>[preceding tutorial](creating-the-membership-schema-in-sql-server-cs.md) we installed the application services schema in a database, which added the tables, views, and stored procedures needed by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span> <span data-ttu-id="abd86-111">Ta infrastruktura została utworzona w przypadku pozostałej części samouczków w tej serii.</span><span class="sxs-lookup"><span data-stu-id="abd86-111">This created the infrastructure we will need for the remainder of the tutorials in this series.</span></span> <span data-ttu-id="abd86-112">W tym samouczku opisano użycie platformy członkostwa (za pośrednictwem `SqlMembershipProvider`) do tworzenia nowych kont użytkowników.</span><span class="sxs-lookup"><span data-stu-id="abd86-112">In this tutorial we will explore using the Membership framework (via the `SqlMembershipProvider`) to create new user accounts.</span></span> <span data-ttu-id="abd86-113">Zobaczymy, jak tworzyć nowych użytkowników programowo i za pomocą środowiska ASP. Wbudowana kontrolka formancie CreateUserWizard netto.</span><span class="sxs-lookup"><span data-stu-id="abd86-113">We will see how to create new users programmatically and through ASP.NET's built-in CreateUserWizard control.</span></span>

<span data-ttu-id="abd86-114">Oprócz uczenia się, jak tworzyć nowe konta użytkowników, należy również zaktualizować witrynę internetową demonstracyjną, która  *<a id="_msoanchor_2">[ ](../introduction/an-overview-of-forms-authentication-cs.md)</a>została najpierw utworzona w omówieniu samouczka dotyczącego uwierzytelniania formularzy* , a następnie udoskonaloną w samouczku  *<a id="https://www.asp.net/learn/security/tutorial-03-cs.aspx"></a> konfiguracja uwierzytelniania formularzy i Tematy zaawansowane* .</span><span class="sxs-lookup"><span data-stu-id="abd86-114">In addition to learning how to create new user accounts, we will also need to update the demo website we first created in the *<a id="_msoanchor_2"></a>[An Overview of Forms Authentication](../introduction/an-overview-of-forms-authentication-cs.md)* tutorial and then enhanced in the *<a id="https://www.asp.net/learn/security/tutorial-03-cs.aspx"></a> Forms Authentication Configuration and Advanced Topics* tutorial.</span></span> <span data-ttu-id="abd86-115">Nasza demonstracyjna aplikacja sieci Web zawiera stronę logowania, która sprawdza poświadczenia użytkowników pod kątem zakodowanych par nazw użytkownika/hasła.</span><span class="sxs-lookup"><span data-stu-id="abd86-115">Our demo web application has a login page that validates users' credentials against hard-coded username/password pairs.</span></span> <span data-ttu-id="abd86-116">Ponadto `Global.asax` zawiera kod, który tworzy niestandardowe obiekty `IPrincipal` i `IIdentity` dla użytkowników uwierzytelnionych.</span><span class="sxs-lookup"><span data-stu-id="abd86-116">Moreover, `Global.asax` includes code that creates custom `IPrincipal` and `IIdentity` objects for authenticated users.</span></span> <span data-ttu-id="abd86-117">Zaktualizujemy stronę logowania, aby sprawdzić poprawność poświadczeń użytkowników względem struktury członkostwa, a następnie usunąć niestandardowy podmiot zabezpieczeń i logikę tożsamości.</span><span class="sxs-lookup"><span data-stu-id="abd86-117">We will update the login page to validate users' credentials against the Membership framework and remove the custom principal and identity logic.</span></span>

<span data-ttu-id="abd86-118">Zacznijmy!</span><span class="sxs-lookup"><span data-stu-id="abd86-118">Let's get started!</span></span>

## <a name="the-forms-authentication-and-membership-checklist"></a><span data-ttu-id="abd86-119">Lista kontrolna uwierzytelniania i członkostwa formularzy</span><span class="sxs-lookup"><span data-stu-id="abd86-119">The Forms Authentication and Membership Checklist</span></span>

<span data-ttu-id="abd86-120">Przed rozpoczęciem pracy z platformą członkostwa Poświęć chwilę na zapoznanie się z ważnymi krokami, które zostały podjęte w celu osiągnięcia tego punktu.</span><span class="sxs-lookup"><span data-stu-id="abd86-120">Before we begin working with the Membership framework, let's take a moment to review the important steps we have taken to reach this point.</span></span> <span data-ttu-id="abd86-121">W przypadku korzystania z platformy członkostwa z `SqlMembershipProvider` w scenariuszu uwierzytelniania opartego na formularzach należy wykonać następujące czynności przed implementacją funkcji członkostwa w aplikacji sieci Web:</span><span class="sxs-lookup"><span data-stu-id="abd86-121">When using the Membership framework with the `SqlMembershipProvider` in a forms-based authentication scenario, the following steps need to be performed prior to implementing Membership functionality in your web application:</span></span>

1. <span data-ttu-id="abd86-122">**Włączanie uwierzytelniania opartego na formularzach.**</span><span class="sxs-lookup"><span data-stu-id="abd86-122">**Enable forms-based authentication.**</span></span> <span data-ttu-id="abd86-123">Zgodnie z opisem w  *<a id="_msoanchor_4">[ ](../introduction/an-overview-of-forms-authentication-cs.md)</a>temacie Omówienie uwierzytelniania formularzy*uwierzytelnianie formularzy jest włączane przez edytowanie `Web.config` i Ustawianie atrybutu `mode` elementu `<authentication>` na `Forms`.</span><span class="sxs-lookup"><span data-stu-id="abd86-123">As we discussed in *<a id="_msoanchor_4"></a>[An Overview of Forms Authentication](../introduction/an-overview-of-forms-authentication-cs.md)*, forms authentication is enabled by editing `Web.config` and setting the `<authentication>` element's `mode` attribute to `Forms`.</span></span> <span data-ttu-id="abd86-124">Przy włączonej uwierzytelnianiu formularzy każde żądanie przychodzące jest analizowane pod kątem *biletu uwierzytelniania formularzy*, który, jeśli jest obecny, identyfikuje żądającego.</span><span class="sxs-lookup"><span data-stu-id="abd86-124">With forms authentication enabled, each incoming request is examined for a *forms authentication ticket*, which, if present, identifies the requestor.</span></span>
2. <span data-ttu-id="abd86-125">**Dodaj schemat usług aplikacji do odpowiedniej bazy danych.**</span><span class="sxs-lookup"><span data-stu-id="abd86-125">**Add the application services schema to the appropriate database.**</span></span> <span data-ttu-id="abd86-126">W przypadku korzystania z `SqlMembershipProvider` musimy zainstalować schemat usług aplikacji w bazie danych programu.</span><span class="sxs-lookup"><span data-stu-id="abd86-126">When using the `SqlMembershipProvider` we need to install the application services schema to a database.</span></span> <span data-ttu-id="abd86-127">Zazwyczaj ten schemat jest dodawany do tej samej bazy danych, która zawiera model danych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="abd86-127">Usually this schema is added to the same database that holds the application's data model.</span></span> <span data-ttu-id="abd86-128">*Tworzenie schematu członkostwa w SQL Server samouczka z użyciem narzędzia `aspnet_regsql.exe` do osiągnięcia tego celu. <a id="_msoanchor_5">[ ](creating-the-membership-schema-in-sql-server-cs.md)</a>*</span><span class="sxs-lookup"><span data-stu-id="abd86-128">The *<a id="_msoanchor_5"></a>[Creating the Membership Schema in SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* tutorial looked at using the `aspnet_regsql.exe` tool to accomplish this.</span></span>
3. <span data-ttu-id="abd86-129">**Dostosuj ustawienia aplikacji sieci Web, aby odwoływać się do bazy danych z kroku 2.**</span><span class="sxs-lookup"><span data-stu-id="abd86-129">**Customize the Web Application's Settings to reference the database from step 2.**</span></span> <span data-ttu-id="abd86-130">*Tworzenie schematu członkostwa w SQL Server* samouczku przedstawiono dwa sposoby konfigurowania aplikacji sieci Web, aby `SqlMembershipProvider` używała bazy danych wybranej w kroku 2: modyfikując `LocalSqlServer` nazwę parametrów połączenia; lub przez dodanie nowego zarejestrowanego dostawcy do listy dostawców struktury członkostwa i dostosowanie tego nowego dostawcy do korzystania z bazy danych z kroku 2.</span><span class="sxs-lookup"><span data-stu-id="abd86-130">The *Creating the Membership Schema in SQL Server* tutorial showed two ways to configure the web application so that the `SqlMembershipProvider` would use the database selected in step 2: by modifying the `LocalSqlServer` connection string name; or by adding a new registered provider to the list of Membership framework providers and customizing that new provider to use the database from step 2.</span></span>

<span data-ttu-id="abd86-131">Podczas kompilowania aplikacji sieci Web, która używa `SqlMembershipProvider` i uwierzytelniania opartego na formularzach, należy wykonać te trzy kroki przed użyciem klasy `Membership` lub kontrolek sieci Web ASP.NET login.</span><span class="sxs-lookup"><span data-stu-id="abd86-131">When building a web application that uses the `SqlMembershipProvider` and forms-based authentication, you will need to perform these three steps before using the `Membership` class or the ASP.NET Login Web controls.</span></span> <span data-ttu-id="abd86-132">Ponieważ zostały już wykonane te kroki w poprzednich samouczkach, jesteśmy gotowi do rozpoczęcia korzystania z platformy członkostwa!</span><span class="sxs-lookup"><span data-stu-id="abd86-132">Since we already performed these steps in previous tutorials, we are ready to start using the Membership framework!</span></span>

## <a name="step-1-adding-new-aspnet-pages"></a><span data-ttu-id="abd86-133">Krok 1. Dodawanie nowych stron ASP.NET</span><span class="sxs-lookup"><span data-stu-id="abd86-133">Step 1: Adding New ASP.NET Pages</span></span>

<span data-ttu-id="abd86-134">W tym samouczku i następnych trzech będziemy przeanalizować różne funkcje i możliwości związane z członkostwem.</span><span class="sxs-lookup"><span data-stu-id="abd86-134">In this tutorial and the next three we will be examining various Membership-related functions and capabilities.</span></span> <span data-ttu-id="abd86-135">Potrzebujemy serii stron ASP.NET, aby zaimplementować tematy zbadane w ramach tych samouczków.</span><span class="sxs-lookup"><span data-stu-id="abd86-135">We will need a series of ASP.NET pages to implement the topics examined throughout these tutorials.</span></span> <span data-ttu-id="abd86-136">Utwórzmy te strony, a następnie plik mapy witryny `(Web.sitemap)`.</span><span class="sxs-lookup"><span data-stu-id="abd86-136">Let's create those pages and then a site map file `(Web.sitemap)`.</span></span>

<span data-ttu-id="abd86-137">Zacznij od utworzenia nowego folderu w projekcie o nazwie `Membership`.</span><span class="sxs-lookup"><span data-stu-id="abd86-137">Start by creating a new folder in the project named `Membership`.</span></span> <span data-ttu-id="abd86-138">Następnie Dodaj pięć nowych stron ASP.NET do folderu `Membership`, łącząc każdą stronę ze stroną wzorcową `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="abd86-138">Next, add five new ASP.NET pages to the `Membership` folder, linking each page with the `Site.master` master page.</span></span> <span data-ttu-id="abd86-139">Nazwij strony:</span><span class="sxs-lookup"><span data-stu-id="abd86-139">Name the pages:</span></span>

- `CreatingUserAccounts.aspx`
- `UserBasedAuthorization.aspx`
- `EnhancedCreateUserWizard.aspx`
- `AdditionalUserInfo.aspx`
- `Guestbook.aspx`

<span data-ttu-id="abd86-140">W tym momencie Eksplorator rozwiązań projektu powinien wyglądać podobnie do zrzutu ekranu pokazanego na rysunku 1.</span><span class="sxs-lookup"><span data-stu-id="abd86-140">At this point your project's Solution Explorer should look similar to the screen shot shown in Figure 1.</span></span>

<span data-ttu-id="abd86-141">[![pięć nowych stron zostało dodanych do folderu Membership](creating-user-accounts-cs/_static/image2.png)](creating-user-accounts-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="abd86-141">[![Five New Pages Have Been Added to the Membership Folder](creating-user-accounts-cs/_static/image2.png)](creating-user-accounts-cs/_static/image1.png)</span></span>

<span data-ttu-id="abd86-142">**Rysunek 1**. Dodano pięć nowych stron do folderu `Membership` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-user-accounts-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="abd86-142">**Figure 1**: Five New Pages Have Been Added to the `Membership` Folder  ([Click to view full-size image](creating-user-accounts-cs/_static/image3.png))</span></span>

<span data-ttu-id="abd86-143">Każda Strona powinna, w tym momencie, mieć dwie kontrolki zawartości, jedną dla każdej strony głównej: `MainContent` i `LoginContent`.</span><span class="sxs-lookup"><span data-stu-id="abd86-143">Each page should, at this point, have the two Content controls, one for each of the master page's ContentPlaceHolders: `MainContent` and `LoginContent`.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample1.aspx)]

<span data-ttu-id="abd86-144">Odwołaj się do `LoginContent` domyślnego znaczników elementu ContentPlaceHolder wyświetla link do logowania lub wylogowywania lokacji w zależności od tego, czy użytkownik jest uwierzytelniony.</span><span class="sxs-lookup"><span data-stu-id="abd86-144">Recall that the `LoginContent` ContentPlaceHolder's default markup displays a link to log on or log off the site, depending on whether the user is authenticated.</span></span> <span data-ttu-id="abd86-145">Jednak obecność `Content2` kontrolki zawartości zastępuje domyślną adiustację strony wzorcowej.</span><span class="sxs-lookup"><span data-stu-id="abd86-145">The presence of the `Content2` Content control, however, overrides the master page's default markup.</span></span> <span data-ttu-id="abd86-146">Zgodnie z opisem w  *<a id="_msoanchor_6">[ ](../introduction/an-overview-of-forms-authentication-cs.md)</a>temacie Omówienie samouczka dotyczącego uwierzytelniania formularzy* jest to przydatne na stronach, w których nie chcesz wyświetlać opcji związanych z logowaniem w lewej kolumnie.</span><span class="sxs-lookup"><span data-stu-id="abd86-146">As we discussed in *<a id="_msoanchor_6"></a>[An Overview of Forms Authentication](../introduction/an-overview-of-forms-authentication-cs.md)* tutorial, this is useful in pages where we do not want to display login-related options in the left column.</span></span>

<span data-ttu-id="abd86-147">Jednak w przypadku tych pięciu stron chcemy wyświetlić domyślne znaczniki strony głównej dla `LoginContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="abd86-147">For these five pages, however, we want to show the master page's default markup for the `LoginContent` ContentPlaceHolder.</span></span> <span data-ttu-id="abd86-148">W związku z tym usuń znaczniki deklaratywne dla kontrolki zawartości `Content2`.</span><span class="sxs-lookup"><span data-stu-id="abd86-148">Therefore, remove the declarative markup for the `Content2` Content control.</span></span> <span data-ttu-id="abd86-149">Po wykonaniu tej czynności każdy znacznik pięciu stron powinien zawierać tylko jedną kontrolkę zawartości.</span><span class="sxs-lookup"><span data-stu-id="abd86-149">After doing so, each of the five page's markup should contain just one Content control.</span></span>

## <a name="step-2-creating-the-site-map"></a><span data-ttu-id="abd86-150">Krok 2. Tworzenie mapy witryny</span><span class="sxs-lookup"><span data-stu-id="abd86-150">Step 2: Creating the Site Map</span></span>

<span data-ttu-id="abd86-151">Wszystkie, ale najbardziej proste witryny sieci Web, muszą implementować niektóre formy interfejsu użytkownika nawigacyjnego.</span><span class="sxs-lookup"><span data-stu-id="abd86-151">All but the most trivial websites need to implement some form of a navigational user interface.</span></span> <span data-ttu-id="abd86-152">Interfejs użytkownika nawigacji może być prostą listą linków do różnych sekcji witryny.</span><span class="sxs-lookup"><span data-stu-id="abd86-152">The navigation user interface may be a simple list of links to the various sections of the site.</span></span> <span data-ttu-id="abd86-153">Alternatywnie te linki można rozmieścić w menu lub widokach drzewa.</span><span class="sxs-lookup"><span data-stu-id="abd86-153">Alternatively, these links may be arranged into menus or tree views.</span></span> <span data-ttu-id="abd86-154">Jako deweloperzy stron, Tworzenie interfejsu użytkownika nawigacyjnego jest tylko połowami historii.</span><span class="sxs-lookup"><span data-stu-id="abd86-154">As page developers, creating the navigational user interface is only half of the story.</span></span> <span data-ttu-id="abd86-155">Potrzebujemy również niektórych środków do zdefiniowania struktury logicznej lokacji w sposób umożliwiający ich konserwację i aktualizację.</span><span class="sxs-lookup"><span data-stu-id="abd86-155">We also need some means to define the site's logical structure in a maintainable and updateable fashion.</span></span> <span data-ttu-id="abd86-156">Po dodaniu nowych stron lub usunięciu istniejących stron chcemy mieć możliwość zaktualizowania jednego źródła — mapy witryny i modyfikacji tych zmian w interfejsie użytkownika nawigacji między lokacjami.</span><span class="sxs-lookup"><span data-stu-id="abd86-156">As new pages are added or existing pages removed, we want to be able to update a single source – the site map – and have those modifications reflected across the site's navigational user interface.</span></span>

<span data-ttu-id="abd86-157">Te dwa zadania — Definiowanie mapy witryny i implementowanie interfejsu użytkownika nawigacyjnego opartego na mapie witryny — są łatwe w użyciu dla struktury mapy witryny i kontrolek sieci Web nawigacji dodanych w programie ASP.NET w wersji 2,0.</span><span class="sxs-lookup"><span data-stu-id="abd86-157">These two tasks – defining the site map and implementing a navigational user interface based on the site map – are easy to accomplish thanks to the Site Map framework and the Navigation Web controls added in ASP.NET version 2.0.</span></span> <span data-ttu-id="abd86-158">Platforma mapy witryny pozwala deweloperowi definiować mapę witryny, a następnie uzyskiwać do niej dostęp za pomocą programistycznego interfejsu API ( [klasy`SiteMap`](https://msdn.microsoft.com/library/system.web.sitemap.aspx)).</span><span class="sxs-lookup"><span data-stu-id="abd86-158">The Site Map framework allows for a developer to define a site map and then to access it through a programmatic API (the [`SiteMap` class](https://msdn.microsoft.com/library/system.web.sitemap.aspx)).</span></span> <span data-ttu-id="abd86-159">Wbudowane kontrolki sieci Web nawigacji obejmują [kontrolkę menu](https://msdn.microsoft.com/library/bz09dy46.aspx), [formant TreeView](https://msdn.microsoft.com/library/3eafky27.aspx)i [formant ścieżki mapy witryny](https://msdn.microsoft.com/library/3eafky27.aspx).</span><span class="sxs-lookup"><span data-stu-id="abd86-159">The built-in Navigation Web controls include a [Menu control](https://msdn.microsoft.com/library/bz09dy46.aspx), the [TreeView control](https://msdn.microsoft.com/library/3eafky27.aspx), and the [SiteMapPath control](https://msdn.microsoft.com/library/3eafky27.aspx).</span></span>

<span data-ttu-id="abd86-160">Podobnie jak w przypadku struktur członkostwa i ról, struktura mapy witryny jest skompilowana korzystającego [model dostawcy](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="abd86-160">Like the Membership and Roles frameworks, the Site Map framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx).</span></span> <span data-ttu-id="abd86-161">Zadaniem klasy dostawcy mapy witryny jest generowanie struktury w pamięci używanej przez klasę `SiteMap` z trwałego magazynu danych, takiego jak plik XML lub tabela bazy danych.</span><span class="sxs-lookup"><span data-stu-id="abd86-161">The job of the Site Map provider class is to generate the in-memory structure used by the `SiteMap` class from a persistent data store, such as an XML file or a database table.</span></span> <span data-ttu-id="abd86-162">.NET Framework jest dostarczany z domyślnym dostawcą mapy witryny, który odczytuje dane mapy witryny z pliku XML ([`XmlSiteMapProvider`](https://msdn.microsoft.com/library/system.web.xmlsitemapprovider.aspx)) i jest to dostawca, który będzie używany w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="abd86-162">The .NET Framework ships with a default Site Map provider that reads the site map data from an XML file ([`XmlSiteMapProvider`](https://msdn.microsoft.com/library/system.web.xmlsitemapprovider.aspx)), and this is the provider we will be using in this tutorial.</span></span> <span data-ttu-id="abd86-163">W przypadku niektórych alternatywnych implementacji dostawcy mapy witryny zapoznaj się z sekcją dalsze odczyty na końcu tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="abd86-163">For some alternate Site Map provider implementations, refer to the Further Readings section at the end of this tutorial.</span></span>

<span data-ttu-id="abd86-164">Domyślny dostawca mapy witryny oczekuje poprawnie sformatowanego pliku XML o nazwie `Web.sitemap`, aby istniał katalog główny.</span><span class="sxs-lookup"><span data-stu-id="abd86-164">The default Site Map provider expects a properly-formatted XML file named `Web.sitemap` to exist the root directory.</span></span> <span data-ttu-id="abd86-165">Ponieważ korzystamy z tego domyślnego dostawcy, musimy dodać taki plik i zdefiniować strukturę mapy witryny w odpowiednim formacie XML.</span><span class="sxs-lookup"><span data-stu-id="abd86-165">Since we are using this default provider, we need to add such a file and define the site map's structure in the appropriate XML format.</span></span> <span data-ttu-id="abd86-166">Aby dodać plik, kliknij prawym przyciskiem myszy nazwę projektu w Eksplorator rozwiązań i wybierz polecenie Dodaj nowy element.</span><span class="sxs-lookup"><span data-stu-id="abd86-166">To add the file, right-click on the project name in Solution Explorer and choose Add New Item.</span></span> <span data-ttu-id="abd86-167">W oknie dialogowym Dodaj plik typu mapa witryny o nazwie `Web.sitemap`.</span><span class="sxs-lookup"><span data-stu-id="abd86-167">From the dialog box, opt to add a file of type Site Map named `Web.sitemap`.</span></span>

<span data-ttu-id="abd86-168">[![dodać pliku o nazwie Web. sitemap do katalogu głównego projektu](creating-user-accounts-cs/_static/image5.png)](creating-user-accounts-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="abd86-168">[![Add a File Named Web.sitemap to the Project's Root Directory](creating-user-accounts-cs/_static/image5.png)](creating-user-accounts-cs/_static/image4.png)</span></span>

<span data-ttu-id="abd86-169">**Rysunek 2**. Dodawanie pliku o nazwie `Web.sitemap` do katalogu głównego projektu ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-user-accounts-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="abd86-169">**Figure 2**: Add a File Named `Web.sitemap` to the Project's Root Directory  ([Click to view full-size image](creating-user-accounts-cs/_static/image6.png))</span></span>

<span data-ttu-id="abd86-170">Plik mapy witryny XML definiuje strukturę witryny sieci Web jako hierarchię.</span><span class="sxs-lookup"><span data-stu-id="abd86-170">The XML site map file defines the website's structure as a hierarchy.</span></span> <span data-ttu-id="abd86-171">Ta relacja hierarchiczna jest modelowana w pliku XML za pośrednictwem pochodzenie elementów `<siteMapNode>`.</span><span class="sxs-lookup"><span data-stu-id="abd86-171">This hierarchical relationship is modeled in the XML file via the ancestry of the `<siteMapNode>` elements.</span></span> <span data-ttu-id="abd86-172">`Web.sitemap` musi rozpoczynać się od `<siteMap>` węzła nadrzędnego, który ma dokładnie jeden `<siteMapNode>` podrzędny.</span><span class="sxs-lookup"><span data-stu-id="abd86-172">The `Web.sitemap` must start with a `<siteMap>` parent node that has precisely one `<siteMapNode>` child.</span></span> <span data-ttu-id="abd86-173">Ten element najwyższego poziomu `<siteMapNode>` reprezentuje katalog główny hierarchii i może mieć dowolną liczbę węzłów podrzędnych.</span><span class="sxs-lookup"><span data-stu-id="abd86-173">This top-level `<siteMapNode>` element represents the root of the hierarchy, and may have an arbitrary number of descendent nodes.</span></span> <span data-ttu-id="abd86-174">Każdy element `<siteMapNode>` musi zawierać atrybut `title` i opcjonalnie może zawierać atrybuty `url` i `description` między innymi; Każdy niepusty atrybut `url` musi być unikatowy.</span><span class="sxs-lookup"><span data-stu-id="abd86-174">Each `<siteMapNode>` element must include a `title` attribute and may optionally include `url` and `description` attributes, among others; each non-empty `url` attribute must be unique.</span></span>

<span data-ttu-id="abd86-175">Wprowadź następujący kod XML do pliku `Web.sitemap`:</span><span class="sxs-lookup"><span data-stu-id="abd86-175">Enter the following XML into the `Web.sitemap` file:</span></span>

[!code-xml[Main](creating-user-accounts-cs/samples/sample2.xml)]

<span data-ttu-id="abd86-176">Powyższy znacznik mapy witryny definiuje hierarchię pokazaną na rysunku 3.</span><span class="sxs-lookup"><span data-stu-id="abd86-176">The above site map markup defines the hierarchy shown in Figure 3.</span></span>

<span data-ttu-id="abd86-177">[![mapa witryny reprezentuje hierarchiczną strukturę nawigacyjną](creating-user-accounts-cs/_static/image8.png)](creating-user-accounts-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="abd86-177">[![The Site Map Represents a Hierarchical Navigational Structure](creating-user-accounts-cs/_static/image8.png)](creating-user-accounts-cs/_static/image7.png)</span></span>

<span data-ttu-id="abd86-178">**Rysunek 3**. Mapa witryny reprezentuje hierarchiczną strukturę nawigacyjną ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-user-accounts-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="abd86-178">**Figure 3**: The Site Map Represents a Hierarchical Navigational Structure  ([Click to view full-size image](creating-user-accounts-cs/_static/image9.png))</span></span>

## <a name="step-3-updating-the-master-page-to-include-a-navigational-user-interface"></a><span data-ttu-id="abd86-179">Krok 3. aktualizowanie strony głównej w celu uwzględnienia interfejsu użytkownika nawigacyjnego</span><span class="sxs-lookup"><span data-stu-id="abd86-179">Step 3: Updating the Master Page to Include a Navigational User Interface</span></span>

<span data-ttu-id="abd86-180">ASP.NET zawiera szereg formantów sieci Web związanych z nawigacją w celu projektowania interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-180">ASP.NET includes a number of navigation-related Web controls for designing a user interface.</span></span> <span data-ttu-id="abd86-181">Obejmują one menu, TreeView i kontrolki ścieżki mapy witryny.</span><span class="sxs-lookup"><span data-stu-id="abd86-181">These include the Menu, TreeView, and the SiteMapPath controls.</span></span> <span data-ttu-id="abd86-182">Kontrolki menu i TreeView renderują strukturę mapy witryny odpowiednio do menu lub drzewa, natomiast ścieżki mapy witryny wyświetla pasek nawigacyjny, który pokazuje odwiedzany węzeł, a także jego elementy nadrzędne.</span><span class="sxs-lookup"><span data-stu-id="abd86-182">The Menu and TreeView controls render the site map structure in a menu or a tree, respectively, whereas the SiteMapPath displays a breadcrumb that shows the current node being visited as well as its ancestors.</span></span> <span data-ttu-id="abd86-183">Dane mapy lokacji można powiązać z innymi kontrolkami sieci Web danych za pomocą SiteMapDataSource i mogą być dostępne programowo za pośrednictwem klasy `SiteMap`.</span><span class="sxs-lookup"><span data-stu-id="abd86-183">The site map data can be bound to other data Web controls using the SiteMapDataSource and can be accessed programmatically via the `SiteMap` class.</span></span>

<span data-ttu-id="abd86-184">Ponieważ szczegółowe omówienie struktury mapy witryny i kontrolek nawigacji wykracza poza zakres tej serii samouczków, a nie poświęcają czasu na korzystanie z własnego interfejsu użytkownika nawigacyjnego, zamiast tego należy zażyczyć ten, który jest używany w *[pracy z danymi w](../../data-access/index.md)* serii samouczków ASP.NET 2,0, który używa kontrolki wzmacniak do wyświetlania listy punktowanej z podwójną listą linków nawigacji, jak pokazano na rysunku 4.</span><span class="sxs-lookup"><span data-stu-id="abd86-184">Since a thorough discussion of the Site Map framework and the Navigation controls is beyond the scope of this tutorial series, rather than spend time crafting our own navigational user interface let's instead borrow the one used in my *[Working with Data in ASP.NET 2.0](../../data-access/index.md)* tutorial series, which uses a Repeater control to display a two-deep bulleted list of navigation links, as shown in Figure 4.</span></span>

### <a name="adding-a-two-level-list-of-links-in-the-left-column"></a><span data-ttu-id="abd86-185">Dodawanie dwupoziomowej listy łączy w lewej kolumnie</span><span class="sxs-lookup"><span data-stu-id="abd86-185">Adding a Two-Level List of Links in the Left Column</span></span>

<span data-ttu-id="abd86-186">Aby utworzyć ten interfejs, Dodaj następujące znaczniki deklaratywne do lewej kolumny strony wzorcowej `Site.master`, w której znajduje się tekst "do zrobienia:"... " obecnie znajduje się.</span><span class="sxs-lookup"><span data-stu-id="abd86-186">To create this interface, add the following declarative markup to the `Site.master` master page's left column where the text "TODO: Menu will go here..." currently resides.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample3.aspx)]

<span data-ttu-id="abd86-187">Powyższe znaczniki wiążą kontrolkę wzmacniak o nazwie `menu` z SiteMapDataSource, która zwraca hierarchię mapy witryny zdefiniowaną w `Web.sitemap`.</span><span class="sxs-lookup"><span data-stu-id="abd86-187">The above markup binds a Repeater control named `menu` to a SiteMapDataSource, which returns the site map hierarchy defined in `Web.sitemap`.</span></span> <span data-ttu-id="abd86-188">Ponieważ [właściwość`ShowStartingNode`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.sitemapdatasource.showstartingnode.aspx) kontrolki SiteMapDataSource jest ustawiona na wartość false, zaczyna zwracać hierarchię mapy witryny, rozpoczynając od elementów podrzędnych węzła "Home".</span><span class="sxs-lookup"><span data-stu-id="abd86-188">Since the SiteMapDataSource control's [`ShowStartingNode` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.sitemapdatasource.showstartingnode.aspx) is set to False it starts returning the site map's hierarchy starting with the descendents of the "Home" node.</span></span> <span data-ttu-id="abd86-189">Wzmacniak wyświetla każdy z tych węzłów (obecnie tylko "członkostwo") w elemencie `<li>`.</span><span class="sxs-lookup"><span data-stu-id="abd86-189">The Repeater displays each of these nodes (currently just "Membership") in an `<li>` element.</span></span> <span data-ttu-id="abd86-190">Innym, wzmacniak wewnętrzny wyświetla elementy podrzędne bieżącego węzła na zagnieżdżonej liście nieuporządkowanej.</span><span class="sxs-lookup"><span data-stu-id="abd86-190">Another, inner Repeater then displays the current node's children in a nested unordered list.</span></span>

<span data-ttu-id="abd86-191">Rysunek 4 przedstawia renderowane dane wyjściowe ze znacznikiem mapy witryny utworzoną w kroku 2.</span><span class="sxs-lookup"><span data-stu-id="abd86-191">Figure 4 shows the above markup's rendered output with the site map structure we created in Step 2.</span></span> <span data-ttu-id="abd86-192">Wzmacniak renderuje znaczniki listy nieuporządkowane, reguły kaskadowego arkusza stylów zdefiniowane w `Styles.css` są odpowiedzialne za układ estetycznie-atrakcyjne.</span><span class="sxs-lookup"><span data-stu-id="abd86-192">The Repeater renders vanilla unordered list markup; the cascading style sheet rules defined in `Styles.css` are responsible for the aesthetically-pleasing layout.</span></span> <span data-ttu-id="abd86-193">Aby uzyskać bardziej szczegółowy opis sposobu działania powyższych znaczników, zapoznaj się z samouczkiem [strony wzorcowe i nawigacja w witrynie](https://asp.net/learn/data-access/tutorial-03-cs.aspx) .</span><span class="sxs-lookup"><span data-stu-id="abd86-193">For a more detailed description of how the above markup works, refer to the [Master Pages and Site Navigation](https://asp.net/learn/data-access/tutorial-03-cs.aspx) tutorial.</span></span>

<span data-ttu-id="abd86-194">[![nawigacyjny interfejs użytkownika jest renderowany przy użyciu zagnieżdżonych list nieuporządkowanych](creating-user-accounts-cs/_static/image11.png)](creating-user-accounts-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="abd86-194">[![The Navigational User Interface is Rendered Using Nested Unordered Lists](creating-user-accounts-cs/_static/image11.png)](creating-user-accounts-cs/_static/image10.png)</span></span>

<span data-ttu-id="abd86-195">**Ilustracja 4**. interfejs użytkownika nawigacyjnego jest renderowany przy użyciu zagnieżdżonych list nieuporządkowanych ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="abd86-195">**Figure 4**: The Navigational User Interface is Rendered Using Nested Unordered Lists  ([Click to view full-size image](creating-user-accounts-cs/_static/image12.png))</span></span>

### <a name="adding-breadcrumb-navigation"></a><span data-ttu-id="abd86-196">Dodawanie nawigacji nawigacyjnej</span><span class="sxs-lookup"><span data-stu-id="abd86-196">Adding Breadcrumb Navigation</span></span>

<span data-ttu-id="abd86-197">Poza listą linków w lewej kolumnie, przyjrzyjmy się także stronom [nawigacyjnym](http://en.wikipedia.org/wiki/Breadcrumb_%28navigation%29).</span><span class="sxs-lookup"><span data-stu-id="abd86-197">In addition to the list of links in the left column, let's also have each page display a [breadcrumb](http://en.wikipedia.org/wiki/Breadcrumb_%28navigation%29).</span></span> <span data-ttu-id="abd86-198">Pasek nawigacyjny jest elementem interfejsu użytkownika nawigacji, który szybko pokazuje użytkowników ich bieżącej pozycji w hierarchii lokacji.</span><span class="sxs-lookup"><span data-stu-id="abd86-198">A breadcrumb is a navigational user interface element that quickly shows users their current position within the site hierarchy.</span></span> <span data-ttu-id="abd86-199">Kontrolka ścieżki mapy witryny korzysta z struktury mapy witryny w celu określenia lokalizacji bieżącej strony w mapie witryny, a następnie wyświetlenie stron do odłączenia na podstawie tych informacji.</span><span class="sxs-lookup"><span data-stu-id="abd86-199">The SiteMapPath control uses the Site Map framework to determine the current page's location in the site map and then displays a breadcrumb based on this information.</span></span>

<span data-ttu-id="abd86-200">W celu dodania elementu `<span>` do nagłówka strony wzorcowej `<div>` elementu i Ustaw nowy atrybut `class` elementu `<span>` na "Strona".</span><span class="sxs-lookup"><span data-stu-id="abd86-200">Specifically, add a `<span>` element to the master page's header `<div>` element, and set the new `<span>` element's `class` attribute to "breadcrumb".</span></span> <span data-ttu-id="abd86-201">(Klasa `Styles.css` zawiera regułę dla klasy "reelementer"). Następnie Dodaj ścieżki mapy witryny do tego nowego elementu `<span>`.</span><span class="sxs-lookup"><span data-stu-id="abd86-201">(The `Styles.css` class contains a rule for a "breadcrumb" class.) Next, add a SiteMapPath to this new `<span>` element.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample4.aspx)]

<span data-ttu-id="abd86-202">Rysunek 5 przedstawia dane wyjściowe ścieżki mapy witryny podczas odwiedzania `~/Membership/CreatingUserAccounts.aspx`.</span><span class="sxs-lookup"><span data-stu-id="abd86-202">Figure 5 shows the output of the SiteMapPath when visiting `~/Membership/CreatingUserAccounts.aspx`.</span></span>

<span data-ttu-id="abd86-203">[![pasek nawigacyjny wyświetla bieżącą stronę i jej elementy nadrzędne na mapie witryny](creating-user-accounts-cs/_static/image14.png)](creating-user-accounts-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="abd86-203">[![The Breadcrumb Displays the Current Page and its Ancestors in the Site Map](creating-user-accounts-cs/_static/image14.png)](creating-user-accounts-cs/_static/image13.png)</span></span>

<span data-ttu-id="abd86-204">**Rysunek 5**. pasek nawigacyjny wyświetla bieżącą stronę i jej elementy nadrzędne na mapie witryny ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-user-accounts-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="abd86-204">**Figure 5**: The Breadcrumb Displays the Current Page and its Ancestors in the Site Map  ([Click to view full-size image](creating-user-accounts-cs/_static/image15.png))</span></span>

## <a name="step-4-removing-the-custom-principal-and-identity-logic"></a><span data-ttu-id="abd86-205">Krok 4. Usuwanie niestandardowego podmiotu zabezpieczeń i logiki tożsamości</span><span class="sxs-lookup"><span data-stu-id="abd86-205">Step 4: Removing the Custom Principal and Identity Logic</span></span>

<span data-ttu-id="abd86-206">W samouczku  *<a id="_msoanchor_7">[ ](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md)</a>konfiguracja uwierzytelniania formularzy i Tematy zaawansowane* przedstawiono sposób kojarzenia niestandardowych obiektów Principal i Identity z uwierzytelnionym użytkownikiem.</span><span class="sxs-lookup"><span data-stu-id="abd86-206">In the *<a id="_msoanchor_7"></a>[Forms Authentication Configuration and Advanced Topics](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md)* tutorial we saw how to associate custom principal and identity objects to the authenticated user.</span></span> <span data-ttu-id="abd86-207">W tym celu należy utworzyć procedurę obsługi zdarzeń w `Global.asax` dla zdarzenia `PostAuthenticateRequest` aplikacji uruchamianego po pomyślnym uwierzytelnieniu przez `FormsAuthenticationModule` użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-207">We accomplished this by creating an event handler in `Global.asax` for the application's `PostAuthenticateRequest` event, which fires after the `FormsAuthenticationModule` has authenticated the user.</span></span> <span data-ttu-id="abd86-208">W tym obsłudze zdarzeń zamieniono `GenericPrincipal` i `FormsIdentity` obiekty dodane przez `FormsAuthenticationModule` z `CustomPrincipal` i `CustomIdentity` obiektów utworzonych w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="abd86-208">In this event handler we replaced the `GenericPrincipal` and `FormsIdentity` objects added by the `FormsAuthenticationModule` with the `CustomPrincipal` and `CustomIdentity` objects we created in that tutorial.</span></span>

<span data-ttu-id="abd86-209">Chociaż niestandardowe obiekty Principal i Identity są przydatne w niektórych scenariuszach, w większości przypadków `GenericPrincipal` i `FormsIdentity` obiekty są wystarczające.</span><span class="sxs-lookup"><span data-stu-id="abd86-209">While custom principal and identity objects are useful in certain scenarios, in most cases the `GenericPrincipal` and `FormsIdentity` objects are sufficient.</span></span> <span data-ttu-id="abd86-210">W związku z tym uważam, że wartościowa powróci do zachowania domyślnego.</span><span class="sxs-lookup"><span data-stu-id="abd86-210">Consequently, I think it would be worthwhile to return to the default behavior.</span></span> <span data-ttu-id="abd86-211">Wprowadź tę zmianę, usuwając lub dodając komentarz do programu obsługi zdarzeń `PostAuthenticateRequest` lub usuwając plik `Global.asax` całkowicie.</span><span class="sxs-lookup"><span data-stu-id="abd86-211">Make this change by either removing or commenting out the `PostAuthenticateRequest` event handler or by deleting the `Global.asax` file entirely.</span></span>

## <a name="step-5-programmatically-creating-a-new-user"></a><span data-ttu-id="abd86-212">Krok 5. programowe tworzenie nowego użytkownika</span><span class="sxs-lookup"><span data-stu-id="abd86-212">Step 5: Programmatically Creating a New User</span></span>

<span data-ttu-id="abd86-213">Aby utworzyć nowe konto użytkownika za pomocą platformy członkostwa, użyj [metody`CreateUser`](https://msdn.microsoft.com/library/system.web.security.membership.createuser.aspx)klasy `Membership`.</span><span class="sxs-lookup"><span data-stu-id="abd86-213">To create a new user account through the Membership framework use the `Membership` class's [`CreateUser` method](https://msdn.microsoft.com/library/system.web.security.membership.createuser.aspx).</span></span> <span data-ttu-id="abd86-214">Ta metoda zawiera parametry wejściowe dla nazwy użytkownika, hasła i innych pól związanych z użytkownikiem.</span><span class="sxs-lookup"><span data-stu-id="abd86-214">This method has input parameters for the username, password, and other user-related fields.</span></span> <span data-ttu-id="abd86-215">W wywołaniu zostaje delegowane utworzenie nowego konta użytkownika do skonfigurowanego dostawcy członkostwa, a następnie zwraca [obiekt`MembershipUser`](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx) reprezentujący właśnie utworzone konto użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-215">On invocation, it delegates the creation of the new user account to the configured Membership provider and then returns a [`MembershipUser` object](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx) representing the just-created user account.</span></span>

<span data-ttu-id="abd86-216">Metoda `CreateUser` ma cztery przeciążenia, a każdy z nich akceptuje inną liczbę parametrów wejściowych:</span><span class="sxs-lookup"><span data-stu-id="abd86-216">The `CreateUser` method has four overloads, each accepting a different number of input parameters:</span></span>

- [`CreateUser(username, password)`](https://msdn.microsoft.com/library/d8t4h2es.aspx)
- [`CreateUser(username, password, email)`](https://msdn.microsoft.com/library/t8yy6w3h.aspx)
- [`CreateUser(username, password, email, passwordQuestion, passwordAnswer, isApproved, MembershipCreateStatus)`](https://msdn.microsoft.com/library/82xx2e62.aspx)
- [`CreateUser(username, password, email, passwordQuestion, passwordAnswer, isApproved, providerUserKey, MembershipCreateStatus)`](https://msdn.microsoft.com/library/ms152012.aspx)

<span data-ttu-id="abd86-217">Te cztery przeciążenia różnią się od ilości zbieranych informacji.</span><span class="sxs-lookup"><span data-stu-id="abd86-217">These four overloads differ on the amount of information that is collected.</span></span> <span data-ttu-id="abd86-218">Pierwsze Przeciążenie, na przykład, wymaga tylko nazwy użytkownika i hasła dla nowego konta użytkownika, a drugi także wymaga adresu e-mail użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-218">The first overload, for example, requires just the username and password for the new user account, whereas the second one also requires the user's email address.</span></span>

<span data-ttu-id="abd86-219">Te przeciążenia istnieją, ponieważ informacje konieczne do utworzenia nowego konta użytkownika zależą od ustawień konfiguracji dostawcy członkostwa.</span><span class="sxs-lookup"><span data-stu-id="abd86-219">These overloads exist because the information needed to create a new user account depends on the Membership provider's configuration settings.</span></span> <span data-ttu-id="abd86-220">W samouczku  *<a id="_msoanchor_8">[ ](creating-the-membership-schema-in-sql-server-cs.md)</a>Tworzenie schematu członkostwa w programie SQL Server* sprawdzono Określanie ustawień konfiguracji dostawcy członkostwa w programie `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="abd86-220">In the *<a id="_msoanchor_8"></a>[Creating the Membership Schema in SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* tutorial we examined specifying Membership provider configuration settings in `Web.config`.</span></span> <span data-ttu-id="abd86-221">Tabela 2 zawiera pełną listę ustawień konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="abd86-221">Table 2 included a complete list of the configuration settings.</span></span>

<span data-ttu-id="abd86-222">Jednym z tych ustawień konfiguracji dostawcy członkostwa, które mają wpływ na to, jakie przeciążenia `CreateUser` mogą być używane są ustawienia `requiresQuestionAndAnswer`.</span><span class="sxs-lookup"><span data-stu-id="abd86-222">One such Membership provider configuration setting that impacts what `CreateUser` overloads may be used is the `requiresQuestionAndAnswer` setting.</span></span> <span data-ttu-id="abd86-223">Jeśli `requiresQuestionAndAnswer` jest ustawiona na `true` (domyślnie), a następnie podczas tworzenia nowego konta użytkownika należy określić pytanie zabezpieczające i odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="abd86-223">If `requiresQuestionAndAnswer` is set to `true` (the default), then when creating a new user account we must specify a security question and answer.</span></span> <span data-ttu-id="abd86-224">Te informacje są później używane, jeśli użytkownik musi zresetować lub zmienić hasło.</span><span class="sxs-lookup"><span data-stu-id="abd86-224">This information is later used if the user needs to reset or change their password.</span></span> <span data-ttu-id="abd86-225">W tym czasie są wyświetlane pytania zabezpieczające i muszą one wprowadzić poprawną odpowiedź w celu zresetowania lub zmiany hasła.</span><span class="sxs-lookup"><span data-stu-id="abd86-225">Specifically, at that time they are shown the security question and they must enter the correct answer in order to reset or change their password.</span></span> <span data-ttu-id="abd86-226">W związku z tym, jeśli `requiresQuestionAndAnswer` jest ustawiona na `true`, wywołanie jednego z dwóch pierwszych przeciążeń `CreateUser` powoduje wyjątek z powodu braku pytania zabezpieczającego i odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="abd86-226">Consequently, if the `requiresQuestionAndAnswer` is set to `true` then calling either of the first two `CreateUser` overloads results in an exception because the security question and answer are missing.</span></span> <span data-ttu-id="abd86-227">Ponieważ nasza aplikacja jest obecnie skonfigurowana do wymagania zabezpieczeń i odpowiedzi, należy użyć jednego z dwóch ostatnich przeciążeń podczas programistycznego tworzenia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-227">Since our application is currently configured to require a security question and answer, we will need to use one of the latter two overloads when creating user's programmatically.</span></span>

<span data-ttu-id="abd86-228">Aby zilustrować przy użyciu metody `CreateUser`, Utwórzmy interfejs użytkownika, w którym zostanie wyświetlony monit o podanie nazwy, hasła, wiadomości e-mail i odpowiedzi na wstępnie zdefiniowane pytanie zabezpieczające.</span><span class="sxs-lookup"><span data-stu-id="abd86-228">To illustrate using the `CreateUser` method, let's create a user interface where we prompt the user for their name, password, email, and an answer to a pre-defined security question.</span></span> <span data-ttu-id="abd86-229">Otwórz stronę `CreatingUserAccounts.aspx` w folderze `Membership` i Dodaj następujące kontrolki sieci Web do kontrolki zawartość:</span><span class="sxs-lookup"><span data-stu-id="abd86-229">Open the `CreatingUserAccounts.aspx` page in the `Membership` folder and add the following Web controls to the Content control:</span></span>

- <span data-ttu-id="abd86-230">Pole tekstowe o nazwie `Username`</span><span class="sxs-lookup"><span data-stu-id="abd86-230">A TextBox named `Username`</span></span>
- <span data-ttu-id="abd86-231">Pole tekstowe o nazwie `Password`, którego właściwość `TextMode` jest ustawiona na `Password`</span><span class="sxs-lookup"><span data-stu-id="abd86-231">A TextBox named `Password`, whose `TextMode` property is set to `Password`</span></span>
- <span data-ttu-id="abd86-232">Pole tekstowe o nazwie `Email`</span><span class="sxs-lookup"><span data-stu-id="abd86-232">A TextBox named `Email`</span></span>
- <span data-ttu-id="abd86-233">Etykieta o nazwie `SecurityQuestion` z wyczyszczoną właściwością `Text`</span><span class="sxs-lookup"><span data-stu-id="abd86-233">A Label named `SecurityQuestion` with its `Text` property cleared out</span></span>
- <span data-ttu-id="abd86-234">Pole tekstowe o nazwie `SecurityAnswer`</span><span class="sxs-lookup"><span data-stu-id="abd86-234">A TextBox named `SecurityAnswer`</span></span>
- <span data-ttu-id="abd86-235">Przycisk o nazwie `CreateAccountButton` którego właściwość Text ma wartość "Utwórz konto użytkownika".</span><span class="sxs-lookup"><span data-stu-id="abd86-235">A Button named `CreateAccountButton` whose Text property is set to "Create the User Account"</span></span>
- <span data-ttu-id="abd86-236">Kontrolka etykiety o nazwie `CreateAccountResults` z wyczyszczoną właściwością `Text`</span><span class="sxs-lookup"><span data-stu-id="abd86-236">A Label control named `CreateAccountResults` with its `Text` property cleared out</span></span>

<span data-ttu-id="abd86-237">W tym momencie ekran powinien wyglądać podobnie do zrzutu ekranu pokazanego na rysunku 6.</span><span class="sxs-lookup"><span data-stu-id="abd86-237">At this point your screen should look similar to the screen shot shown in Figure 6.</span></span>

<span data-ttu-id="abd86-238">[![dodać różne kontrolki sieci Web do strony CreatingUserAccounts. aspx](creating-user-accounts-cs/_static/image17.png)](creating-user-accounts-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="abd86-238">[![Add the Various Web Controls to the CreatingUserAccounts.aspx Page](creating-user-accounts-cs/_static/image17.png)](creating-user-accounts-cs/_static/image16.png)</span></span>

<span data-ttu-id="abd86-239">**Ilustracja 6**. Dodawanie różnych kontrolek sieci Web do strony `CreatingUserAccounts.aspx` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-user-accounts-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="abd86-239">**Figure 6**: Add the Various Web Controls to the `CreatingUserAccounts.aspx` Page  ([Click to view full-size image](creating-user-accounts-cs/_static/image18.png))</span></span>

<span data-ttu-id="abd86-240">Etykieta `SecurityQuestion` i pole tekstowe `SecurityAnswer` są przeznaczone do wyświetlania wstępnie zdefiniowanego pytania zabezpieczającego i zbierania odpowiedzi użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-240">The `SecurityQuestion` Label and `SecurityAnswer` TextBox are intended to display a pre-defined security question and collect the user's answer.</span></span> <span data-ttu-id="abd86-241">Należy zauważyć, że zarówno pytanie zabezpieczeń, jak i odpowiedź są przechowywane w zależności od użytkownika, więc można zezwolić każdemu użytkownikowi na Definiowanie własnych pytań zabezpieczających.</span><span class="sxs-lookup"><span data-stu-id="abd86-241">Note that both the security question and answer are stored on a user-by-user basis, so it is possible to allow each user to define their own security question.</span></span> <span data-ttu-id="abd86-242">Jednak na potrzeby tego przykładu postanowiono użyć uniwersalnego pytania zabezpieczającego, czyli: "jaki jest Twój ulubiony kolor?".</span><span class="sxs-lookup"><span data-stu-id="abd86-242">However, for this example I have decided to use a universal security question, namely: "What is your favorite color?"</span></span>

<span data-ttu-id="abd86-243">Aby zaimplementować to wstępnie zdefiniowane pytanie zabezpieczające, należy dodać stałą do klasy powiązanej z kodem strony o nazwie `passwordQuestion`, przypisując jej pytanie zabezpieczające.</span><span class="sxs-lookup"><span data-stu-id="abd86-243">To implement this pre-defined security question, add a constant to the page's code-behind class named `passwordQuestion`, assigning it the security question.</span></span> <span data-ttu-id="abd86-244">Następnie w obsłudze zdarzeń `Page_Load` Przypisz tę stałą do właściwości `Text` etykiety `SecurityQuestion`:</span><span class="sxs-lookup"><span data-stu-id="abd86-244">Then, in the `Page_Load` event handler, assign this constant to the `SecurityQuestion` Label's `Text` property:</span></span>

[!code-csharp[Main](creating-user-accounts-cs/samples/sample5.cs)]

<span data-ttu-id="abd86-245">Następnie Utwórz procedurę obsługi zdarzeń dla zdarzenia `Click` `CreateAccountButton`i Dodaj następujący kod:</span><span class="sxs-lookup"><span data-stu-id="abd86-245">Next, create an event handler for the `CreateAccountButton`'s `Click` event and add the following code:</span></span>

[!code-csharp[Main](creating-user-accounts-cs/samples/sample6.cs)]

<span data-ttu-id="abd86-246">Procedura obsługi zdarzeń `Click` uruchamiana przez zdefiniowanie zmiennej o nazwie `createStatus` typu [`MembershipCreateStatus`](https://msdn.microsoft.com/library/system.web.security.membershipcreatestatus.aspx).</span><span class="sxs-lookup"><span data-stu-id="abd86-246">The `Click` event handler starts by defining a variable named `createStatus` of type [`MembershipCreateStatus`](https://msdn.microsoft.com/library/system.web.security.membershipcreatestatus.aspx).</span></span> <span data-ttu-id="abd86-247">`MembershipCreateStatus` to Wyliczenie wskazujące stan operacji `CreateUser`.</span><span class="sxs-lookup"><span data-stu-id="abd86-247">`MembershipCreateStatus` is an enumeration that indicates the status of the `CreateUser` operation.</span></span> <span data-ttu-id="abd86-248">Na przykład jeśli konto użytkownika zostanie utworzone pomyślnie, wystąpienie `MembershipCreateStatus` wystąpienia zostanie ustawione na wartość `Success`; z drugiej strony, jeśli operacja nie powiedzie się, ponieważ istnieje już użytkownik o tej samej nazwie użytkownika, zostanie ona ustawiona na wartość `DuplicateUserName`.</span><span class="sxs-lookup"><span data-stu-id="abd86-248">For example, if the user account is created successfully, the resulting `MembershipCreateStatus` instance will be set to a value of `Success`; on the other hand, if the operation fails because there already exists a user with the same username, it will be set to a value of `DuplicateUserName`.</span></span> <span data-ttu-id="abd86-249">W `CreateUser` przeciążenia korzystamy z programu, musimy przekazać wystąpienie `MembershipCreateStatus` do metody jako parametr `out`.</span><span class="sxs-lookup"><span data-stu-id="abd86-249">In the `CreateUser` overload we use, we need to pass a `MembershipCreateStatus` instance into the method as an `out` parameter.</span></span> <span data-ttu-id="abd86-250">Ten parametr jest ustawiony na odpowiednią wartość w metodzie `CreateUser` i można sprawdzić jego wartość po wywołaniu metody, aby określić, czy konto użytkownika zostało pomyślnie utworzone.</span><span class="sxs-lookup"><span data-stu-id="abd86-250">This parameter is set to the appropriate value within the `CreateUser` method, and we can examine its value after the method call to determine whether the user account was successfully created.</span></span>

<span data-ttu-id="abd86-251">Po wywołaniu `CreateUser`, przekazanie `createStatus`, instrukcja `switch` jest używana do wyprowadzania odpowiedniego komunikatu w zależności od wartości przypisanej do `createStatus`.</span><span class="sxs-lookup"><span data-stu-id="abd86-251">After calling `CreateUser`, passing in `createStatus`, a `switch` statement is used to output an appropriate message depending on the value assigned to `createStatus`.</span></span> <span data-ttu-id="abd86-252">Ilustracje 7 przedstawiają dane wyjściowe w przypadku pomyślnego utworzenia nowego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-252">Figures 7 shows the output when a new user has successfully been created.</span></span> <span data-ttu-id="abd86-253">Rysunki 8 i 9 przedstawiają dane wyjściowe, jeśli konto użytkownika nie zostało utworzone.</span><span class="sxs-lookup"><span data-stu-id="abd86-253">Figures 8 and 9 show the output when the user account is not created.</span></span> <span data-ttu-id="abd86-254">Na rysunku nr 8 osoba odwiedzająca wprowadziła hasło z pięcioma literami, które nie spełnia wymagań siły hasła wpisanych w ustawieniach konfiguracji dostawcy członkostwa.</span><span class="sxs-lookup"><span data-stu-id="abd86-254">In Figure 8, the visitor entered a five-letter password, which does not meet the password strength requirements spelled out in the Membership provider's configuration settings.</span></span> <span data-ttu-id="abd86-255">Na rysunku nr 9 osoba odwiedzająca próbuje utworzyć konto użytkownika przy użyciu istniejącej nazwy użytkownika (utworzonej na rysunku 7).</span><span class="sxs-lookup"><span data-stu-id="abd86-255">In Figure 9, the visitor is attempting to create a user account with an existing username (the one created in Figure 7).</span></span>

<span data-ttu-id="abd86-256">[![pomyślnie utworzono nowe konto użytkownika](creating-user-accounts-cs/_static/image20.png)](creating-user-accounts-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="abd86-256">[![A New User Account is Successfully Created](creating-user-accounts-cs/_static/image20.png)](creating-user-accounts-cs/_static/image19.png)</span></span>

<span data-ttu-id="abd86-257">**Rysunek 7**: pomyślnie utworzono nowe konto użytkownika ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-user-accounts-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="abd86-257">**Figure 7**: A New User Account is Successfully Created  ([Click to view full-size image](creating-user-accounts-cs/_static/image21.png))</span></span>

<span data-ttu-id="abd86-258">[![konto użytkownika nie zostanie utworzone, ponieważ podane hasło jest zbyt słabe](creating-user-accounts-cs/_static/image23.png)](creating-user-accounts-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="abd86-258">[![The User Account is Not Created Because the Supplied Password is Too Weak](creating-user-accounts-cs/_static/image23.png)](creating-user-accounts-cs/_static/image22.png)</span></span>

<span data-ttu-id="abd86-259">**Ilustracja 8**. konto użytkownika nie zostało utworzone, ponieważ podane hasło jest zbyt słabe ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-user-accounts-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="abd86-259">**Figure 8**: The User Account is Not Created Because the Supplied Password is Too Weak  ([Click to view full-size image](creating-user-accounts-cs/_static/image24.png))</span></span>

<span data-ttu-id="abd86-260">[![konto użytkownika nie zostanie utworzone, ponieważ nazwa użytkownika jest już używana](creating-user-accounts-cs/_static/image26.png)](creating-user-accounts-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="abd86-260">[![The User Account is Not Created Because the Username is Already in Use](creating-user-accounts-cs/_static/image26.png)](creating-user-accounts-cs/_static/image25.png)</span></span>

<span data-ttu-id="abd86-261">**Rysunek 9**: konto użytkownika nie zostało utworzone, ponieważ nazwa użytkownika jest już używana ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-user-accounts-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="abd86-261">**Figure 9**: The User Account is Not Created Because the Username is Already in Use  ([Click to view full-size image](creating-user-accounts-cs/_static/image27.png))</span></span>

> [!NOTE]
> <span data-ttu-id="abd86-262">Być może zastanawiasz się, jak określić powodzenie lub niepowodzenie podczas korzystania z jednego z dwóch pierwszych `CreateUser` przeciążeń metod, żadna z nich nie ma parametru typu `MembershipCreateStatus`.</span><span class="sxs-lookup"><span data-stu-id="abd86-262">You may be wondering how to determine success or failure when using one of the first two `CreateUser` method overloads, neither of which has a parameter of type `MembershipCreateStatus`.</span></span> <span data-ttu-id="abd86-263">Te pierwsze dwa przeciążenia zgłaszają [wyjątek`MembershipCreateUserException`](https://msdn.microsoft.com/library/system.web.security.membershipcreateuserexception.aspx) w wyniku awarii, który zawiera [właściwość`StatusCode`](https://msdn.microsoft.com/library/system.web.security.membershipcreateuserexception.statuscode.aspx) typu `MembershipCreateStatus`.</span><span class="sxs-lookup"><span data-stu-id="abd86-263">These first two overloads throw a [`MembershipCreateUserException` exception](https://msdn.microsoft.com/library/system.web.security.membershipcreateuserexception.aspx) in the face of a failure, which includes a [`StatusCode` property](https://msdn.microsoft.com/library/system.web.security.membershipcreateuserexception.statuscode.aspx) of type `MembershipCreateStatus`.</span></span>

<span data-ttu-id="abd86-264">Po utworzeniu kilku kont użytkowników Sprawdź, czy konta zostały utworzone przez wystawienie zawartości `aspnet_Users` i `aspnet_Membership` tabel w bazie danych `SecurityTutorials.mdf`.</span><span class="sxs-lookup"><span data-stu-id="abd86-264">After creating a few user accounts, verify that the accounts have been created by listing the contents of the `aspnet_Users` and `aspnet_Membership` tables in the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="abd86-265">Jak pokazano na rysunku 10, dodaliśmy dwóch użytkowników za pośrednictwem strony `CreatingUserAccounts.aspx`: Tito i Bruce.</span><span class="sxs-lookup"><span data-stu-id="abd86-265">As Figure 10 shows, I have added two users via the `CreatingUserAccounts.aspx` page: Tito and Bruce.</span></span>

<span data-ttu-id="abd86-266">[![w magazynie użytkowników członkostwa są dwaj użytkownicy: Tito i Bruce](creating-user-accounts-cs/_static/image29.png)](creating-user-accounts-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="abd86-266">[![There are Two Users in the Membership User Store: Tito and Bruce](creating-user-accounts-cs/_static/image29.png)](creating-user-accounts-cs/_static/image28.png)</span></span>

<span data-ttu-id="abd86-267">**Rysunek 10**. w magazynie użytkowników członkostwa są dwaj użytkownicy: Tito i Bruce ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-user-accounts-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="abd86-267">**Figure 10**: There are Two Users in the Membership User Store: Tito and Bruce  ([Click to view full-size image](creating-user-accounts-cs/_static/image30.png))</span></span>

<span data-ttu-id="abd86-268">Magazyn użytkowników członkostwa zawiera teraz informacje o kontach Bruce i Tito, ale zaimplementowano jeszcze funkcję umożliwiającą Bruce lub Tito logowanie się do lokacji.</span><span class="sxs-lookup"><span data-stu-id="abd86-268">While the Membership user store now includes Bruce and Tito's account information, we have yet to implement functionality that allows for Bruce or Tito to log on to the site.</span></span> <span data-ttu-id="abd86-269">Obecnie `Login.aspx` sprawdza poprawność poświadczeń użytkownika względem zakodowanego zestawu par nazw użytkownika/hasła *— nie sprawdza poprawności* podanych poświadczeń względem struktury członkostwa.</span><span class="sxs-lookup"><span data-stu-id="abd86-269">Currently, `Login.aspx` validates the user's credentials against a hard-coded set of username/password pairs – it does *not* validate the supplied credentials against the Membership framework.</span></span> <span data-ttu-id="abd86-270">W przypadku wyświetlenia nowych kont użytkowników w `aspnet_Users`, a tabele `aspnet_Membership` będą wystarczające.</span><span class="sxs-lookup"><span data-stu-id="abd86-270">For now seeing the new user accounts in the `aspnet_Users` and `aspnet_Membership` tables will have to suffice.</span></span> <span data-ttu-id="abd86-271">W następnym samouczku  *<a id="_msoanchor_9">[ ](validating-user-credentials-against-the-membership-user-store-cs.md)</a>sprawdzanie poprawności poświadczeń użytkownika względem magazynu użytkowników członkostwa*spowoduje zaktualizowanie strony logowania w celu weryfikacji względem magazynu członkostwa.</span><span class="sxs-lookup"><span data-stu-id="abd86-271">In the next tutorial, *<a id="_msoanchor_9"></a>[Validating User Credentials Against the Membership User Store](validating-user-credentials-against-the-membership-user-store-cs.md)*, we will update the login page to validate against the Membership store.</span></span>

> [!NOTE]
> <span data-ttu-id="abd86-272">Jeśli nie widzisz żadnych użytkowników w bazie danych `SecurityTutorials.mdf`, może to być spowodowane tym, że aplikacja sieci Web używa domyślnego dostawcy członkostwa, `AspNetSqlMembershipProvider`, który korzysta z bazy danych `ASPNETDB.mdf` jako magazynu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-272">If you do not see any users in your `SecurityTutorials.mdf` database, it may be because your web application is using the default Membership provider, `AspNetSqlMembershipProvider`, which uses the `ASPNETDB.mdf` database as its user store.</span></span> <span data-ttu-id="abd86-273">Aby określić, czy jest to problem, kliknij przycisk Odśwież w Eksplorator rozwiązań.</span><span class="sxs-lookup"><span data-stu-id="abd86-273">To determine if this is the problem, click the Refresh button in the Solution Explorer.</span></span> <span data-ttu-id="abd86-274">Jeśli baza danych o nazwie `ASPNETDB.mdf` została dodana do folderu `App_Data`, jest to problem.</span><span class="sxs-lookup"><span data-stu-id="abd86-274">If a database named `ASPNETDB.mdf` has been added to the `App_Data` folder, this is the problem.</span></span> <span data-ttu-id="abd86-275">Wróć do kroku 4  *<a id="_msoanchor_10">[ ](creating-the-membership-schema-in-sql-server-cs.md)</a>tworzenia schematu członkostwa w SQL Server* samouczku, aby uzyskać instrukcje dotyczące prawidłowego konfigurowania dostawcy członkostwa.</span><span class="sxs-lookup"><span data-stu-id="abd86-275">Return to Step 4 of the *<a id="_msoanchor_10"></a>[Creating the Membership Schema in SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* tutorial for instructions on how to properly configure the Membership provider.</span></span>

<span data-ttu-id="abd86-276">W większości przypadków tworzenia scenariuszy kont użytkowników osoba odwiedzająca jest prezentowana z interfejsem, aby wprowadzić nazwę użytkownika, hasło, adres e-mail i inne istotne informacje. w tym momencie zostanie utworzone nowe konto.</span><span class="sxs-lookup"><span data-stu-id="abd86-276">In most create user account scenarios, the visitor is presented with some interface to enter their username, password, email, and other essential information, at which point a new account is created.</span></span> <span data-ttu-id="abd86-277">W tym kroku zawarto informacje na temat tworzenia takiego interfejsu za pomocą metody `Membership.CreateUser`, aby programowo dodać nowe konto użytkownika na podstawie danych wejściowych użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-277">In this step we looked at building such an interface by hand and then saw how to use the `Membership.CreateUser` method to programmatically add the new user account based on the user's inputs.</span></span> <span data-ttu-id="abd86-278">Nasz kod, ale właśnie utworzył nowe konto użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-278">Our code, however, just created the new user account.</span></span> <span data-ttu-id="abd86-279">Nie wykonano żadnych akcji uzupełniania, takich jak logowanie użytkownika do witryny w ramach właśnie utworzonego konta użytkownika lub wysyłanie potwierdzenia wiadomości e-mail do użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-279">It did not perform any follow up actions, like logging in the user to the site under the just-created user account, or sending a confirmation email to the user.</span></span> <span data-ttu-id="abd86-280">Te dodatkowe kroki wymagają dodatkowego kodu w obsłudze zdarzeń `Click` przycisku.</span><span class="sxs-lookup"><span data-stu-id="abd86-280">These additional steps would require additional code in the Button's `Click` event handler.</span></span>

<span data-ttu-id="abd86-281">ASP.NET jest dostarczany z kontrolką formancie CreateUserWizard, która jest przeznaczona do obsługi procesu tworzenia konta użytkownika, od renderowania interfejsu użytkownika na potrzeby tworzenia nowych kont użytkowników, do tworzenia konta w środowisku członkostwa i wykonywania konta zadania tworzenia, takie jak wysyłanie wiadomości e-mail z potwierdzeniem i rejestrowanie samego użytkownika utworzonego w lokacji.</span><span class="sxs-lookup"><span data-stu-id="abd86-281">ASP.NET ships with the CreateUserWizard control, which is designed to handle the user account creation process, from rendering a user interface for creating new user accounts, to creating the account in the Membership framework and performing post-account creation tasks, such as sending a confirmation email and logging the just-created user into the site.</span></span> <span data-ttu-id="abd86-282">Użycie formantu formancie CreateUserWizard jest proste, ponieważ przeciągając kontrolkę formancie CreateUserWizard z przybornika na stronę, a następnie ustawiając kilka właściwości.</span><span class="sxs-lookup"><span data-stu-id="abd86-282">Using the CreateUserWizard control is as simple as dragging the CreateUserWizard control from the Toolbox onto a page, and then setting a few properties.</span></span> <span data-ttu-id="abd86-283">W większości przypadków nie trzeba pisać jednego wiersza kodu.</span><span class="sxs-lookup"><span data-stu-id="abd86-283">In most cases, you won't need to write a single line of code.</span></span> <span data-ttu-id="abd86-284">Ta kontrolka Nifty zostanie szczegółowo omówione w kroku 6.</span><span class="sxs-lookup"><span data-stu-id="abd86-284">We will explore this nifty control in detail in Step 6.</span></span>

<span data-ttu-id="abd86-285">Jeśli nowe konta użytkowników są tworzone tylko za pośrednictwem typowej strony sieci Web tworzenia konta, prawdopodobnie trzeba będzie napisać kod, który używa metody `CreateUser`, ponieważ formant formancie CreateUserWizard będzie prawdopodobnie spełniał Twoje potrzeby.</span><span class="sxs-lookup"><span data-stu-id="abd86-285">If new user accounts are only created through a typical Create Account web page, it is unlikely that you will ever need to write code that uses the `CreateUser` method, as the CreateUserWizard control will likely meet your needs.</span></span> <span data-ttu-id="abd86-286">Jednak Metoda `CreateUser` jest użyteczna w scenariuszach, w których potrzebne jest wysoce dostosowane środowisko użytkownika tworzenia konta lub kiedy trzeba programistycznie tworzyć nowe konta użytkowników za pomocą alternatywnego interfejsu.</span><span class="sxs-lookup"><span data-stu-id="abd86-286">However, the `CreateUser` method is handy in scenarios where you need a highly customized Create Account user experience or when you need to programmatically create new user accounts through an alternative interface.</span></span> <span data-ttu-id="abd86-287">Na przykład może istnieć strona, która umożliwia użytkownikowi przekazywanie pliku XML, który zawiera informacje o użytkowniku z innej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="abd86-287">For example, you might have a page that allows a user to upload an XML file that contains user information from some other application.</span></span> <span data-ttu-id="abd86-288">Strona może analizować zawartość przekazanego pliku XML i utworzyć nowe konto dla każdego użytkownika reprezentowanego w kodzie XML przez wywołanie metody `CreateUser`.</span><span class="sxs-lookup"><span data-stu-id="abd86-288">The page might parses the contents of the uploaded XML file and create a new account for each user represented in the XML by calling the `CreateUser` method.</span></span>

## <a name="step-6-creating-a-new-user-with-the-createuserwizard-control"></a><span data-ttu-id="abd86-289">Krok 6. Tworzenie nowego użytkownika za pomocą kontrolki formancie CreateUserWizard</span><span class="sxs-lookup"><span data-stu-id="abd86-289">Step 6: Creating a New User with the CreateUserWizard Control</span></span>

<span data-ttu-id="abd86-290">ASP.NET jest dostarczany z liczbą kontrolek sieci Web logowania.</span><span class="sxs-lookup"><span data-stu-id="abd86-290">ASP.NET ships with a number of Login Web controls.</span></span> <span data-ttu-id="abd86-291">Te kontrolki mają na celu pomoc w wielu typowych scenariuszach dotyczących kont użytkowników i związanych z logowaniem.</span><span class="sxs-lookup"><span data-stu-id="abd86-291">These controls aid in many common user account- and login-related scenarios.</span></span> <span data-ttu-id="abd86-292">[Formant formancie CreateUserWizard](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/login/createuserwizard.aspx) to jedna taka kontrolka, która została zaprojektowana w celu zaprezentowania interfejsu użytkownika w celu dodania nowego konta użytkownika do struktury członkostwa.</span><span class="sxs-lookup"><span data-stu-id="abd86-292">The [CreateUserWizard control](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/login/createuserwizard.aspx) is one such control that is designed to present a user interface for adding a new user account to the Membership framework.</span></span>

<span data-ttu-id="abd86-293">Podobnie jak w przypadku wielu innych kontrolek sieci Web związanych z logowaniem, formancie CreateUserWizard można używać bez konieczności pisania jednego wiersza kodu.</span><span class="sxs-lookup"><span data-stu-id="abd86-293">Like many of the other Login-related Web controls, the CreateUserWizard can be used without writing a single line of code.</span></span> <span data-ttu-id="abd86-294">Intuicyjnie udostępnia interfejs użytkownika na podstawie ustawień konfiguracyjnych dostawcy członkostwa i wewnętrznie wywołuje metodę `CreateUser` klasy `Membership` po wprowadzeniu niezbędnych informacji przez użytkownika i kliknięciu przycisku "Utwórz użytkownika".</span><span class="sxs-lookup"><span data-stu-id="abd86-294">It intuitively provides a user interface based on the Membership provider's configuration settings and internally calls the `Membership` class's `CreateUser` method after the user enters the necessary information and clicks the "Create User" button.</span></span> <span data-ttu-id="abd86-295">Kontrolka formancie CreateUserWizard jest niezwykle dostosowywalna.</span><span class="sxs-lookup"><span data-stu-id="abd86-295">The CreateUserWizard control is extremely customizable.</span></span> <span data-ttu-id="abd86-296">Istnieje Host zdarzeń, które są uruchamiane na różnych etapach procesu tworzenia konta.</span><span class="sxs-lookup"><span data-stu-id="abd86-296">There are a host of events that fire during various stages of the account creation process.</span></span> <span data-ttu-id="abd86-297">W razie potrzeby możemy utworzyć programy obsługi zdarzeń w celu dodania logiki niestandardowej do przepływu pracy tworzenia konta.</span><span class="sxs-lookup"><span data-stu-id="abd86-297">We can create event handlers, as needed, to inject custom logic into the account creation workflow.</span></span> <span data-ttu-id="abd86-298">Co więcej, wygląd formancie CreateUserWizard jest bardzo elastyczny.</span><span class="sxs-lookup"><span data-stu-id="abd86-298">Furthermore, the CreateUserWizard's appearance is very flexible.</span></span> <span data-ttu-id="abd86-299">Istnieje wiele właściwości, które definiują wygląd interfejsu domyślnego; w razie potrzeby można dokonać konwersji kontrolki na szablon lub dodatkową rejestrację użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-299">There are a number of properties that define the appearance of the default interface; if necessary, the control can be converted into a template or additional user registration "steps" may be added.</span></span>

<span data-ttu-id="abd86-300">Zacznijmy od przyjrzeć się domyślnym interfejsem i zachowaniem formantu formancie CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="abd86-300">Let's start with a look at using the CreateUserWizard control's default interface and behavior.</span></span> <span data-ttu-id="abd86-301">Następnie będziemy dowiedzieć się, jak dostosować wygląd za pomocą właściwości i zdarzeń kontrolki.</span><span class="sxs-lookup"><span data-stu-id="abd86-301">We'll then explore how to customize the appearance via the control's properties and events.</span></span>

### <a name="examining-the-createuserwizards-default-interface-and-behavior"></a><span data-ttu-id="abd86-302">Badanie domyślnego interfejsu i zachowań formancie CreateUserWizard</span><span class="sxs-lookup"><span data-stu-id="abd86-302">Examining the CreateUserWizard's Default Interface and Behavior</span></span>

<span data-ttu-id="abd86-303">Wróć do strony `CreatingUserAccounts.aspx` w folderze `Membership`, przełącz się do trybu projektowania lub podziału, a następnie Dodaj kontrolkę formancie CreateUserWizard w górnej części strony.</span><span class="sxs-lookup"><span data-stu-id="abd86-303">Return to the `CreatingUserAccounts.aspx` page in the `Membership` folder, switch to the Design or Split mode, and then add a CreateUserWizard control to the top of the page.</span></span> <span data-ttu-id="abd86-304">Kontrolka formancie CreateUserWizard jest zarejestrowana w sekcji kontrolki logowania przybornika.</span><span class="sxs-lookup"><span data-stu-id="abd86-304">The CreateUserWizard control is filed under the Toolbox's Login controls section.</span></span> <span data-ttu-id="abd86-305">Po dodaniu kontrolki ustaw jej Właściwość `ID` na `RegisterUser`.</span><span class="sxs-lookup"><span data-stu-id="abd86-305">After adding the control, set its `ID` property to `RegisterUser`.</span></span> <span data-ttu-id="abd86-306">Ponieważ zrzut ekranu na rysunku 11 pokazuje, formancie CreateUserWizard renderuje interfejs przy użyciu pól tekstowych dla nowego użytkownika, hasła, adresu e-mail i pytania zabezpieczającego.</span><span class="sxs-lookup"><span data-stu-id="abd86-306">As the screen shot in Figure 11 shows, the CreateUserWizard renders an interface with textboxes for the new user's username, password, email address, and security question and answer.</span></span>

<span data-ttu-id="abd86-307">[![formant formancie CreateUserWizard renderuje ogólny interfejs użytkownika tworzenia](creating-user-accounts-cs/_static/image32.png)](creating-user-accounts-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="abd86-307">[![The CreateUserWizard Control Renders a Generic Create User Interface](creating-user-accounts-cs/_static/image32.png)](creating-user-accounts-cs/_static/image31.png)</span></span>

<span data-ttu-id="abd86-308">**Ilustracja 11**. kontrolka formancie CreateUserWizard renderuje ogólny interfejs użytkownika tworzenia ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="abd86-308">**Figure 11**: The CreateUserWizard Control Renders a Generic Create User Interface  ([Click to view full-size image](creating-user-accounts-cs/_static/image33.png))</span></span>

<span data-ttu-id="abd86-309">Poświęć chwilę na porównanie domyślnego interfejsu użytkownika wygenerowanego przez formant formancie CreateUserWizard z interfejsem, który został utworzony w kroku 5.</span><span class="sxs-lookup"><span data-stu-id="abd86-309">Let's take a moment to compare the default user interface generated by the CreateUserWizard control with the interface we created in Step 5.</span></span> <span data-ttu-id="abd86-310">W przypadku osób uruchamiających formant formancie CreateUserWizard umożliwia osobie odwiedzającej określenie pytania zabezpieczeń i odpowiedzi, natomiast nasz ręcznie utworzony interfejs użył wstępnie zdefiniowanego pytania zabezpieczającego.</span><span class="sxs-lookup"><span data-stu-id="abd86-310">For starters, the CreateUserWizard control allows the visitor to specify both the security question and answer, whereas our manually-created interface used a pre-defined security question.</span></span> <span data-ttu-id="abd86-311">Interfejs formantu formancie CreateUserWizard również zawiera kontrolki walidacji, podczas gdy nie zaimplementowano jeszcze walidacji pól formularza interfejsu.</span><span class="sxs-lookup"><span data-stu-id="abd86-311">The CreateUserWizard control's interface also includes validation controls, whereas we had yet to implement validation on our interface's form fields.</span></span> <span data-ttu-id="abd86-312">Interfejs formancie CreateUserWizard Control zawiera pole tekstowe "Confirm Password" (wraz z CompareValidator, aby upewnić się, że tekst wprowadzony w polach tekstowych "Password" i "Compare Password" są równe).</span><span class="sxs-lookup"><span data-stu-id="abd86-312">And the CreateUserWizard control interface includes a "Confirm Password" textbox (along with a CompareValidator to ensure that the text entered the "Password" and "Compare Password" textboxes are equal).</span></span>

<span data-ttu-id="abd86-313">Interesujący jest sposób, w jaki formant formancie CreateUserWizard sprawdza ustawienia konfiguracji dostawcy członkostwa podczas renderowania interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-313">What's interesting is that the CreateUserWizard control consults the Membership provider's configuration settings when rendering its user interface.</span></span> <span data-ttu-id="abd86-314">Na przykład pola tekstowe pytania zabezpieczeń i odpowiedzi są wyświetlane tylko wtedy, gdy `requiresQuestionAndAnswer` ma wartość true.</span><span class="sxs-lookup"><span data-stu-id="abd86-314">For example, the security question and answer textboxes are only displayed if `requiresQuestionAndAnswer` is set to True.</span></span> <span data-ttu-id="abd86-315">Podobnie formancie CreateUserWizard automatycznie dodaje kontrolkę RegularExpressionValidator, aby upewnić się, że wymagania dotyczące siły hasła zostały spełnione i ustawi `ErrorMessage` i `ValidationExpression` właściwości na podstawie ustawień konfiguracji `minRequiredPasswordLength`, `minRequiredNonalphanumericCharacters`i `passwordStrengthRegularExpression`.</span><span class="sxs-lookup"><span data-stu-id="abd86-315">Likewise, CreateUserWizard automatically adds a RegularExpressionValidator control to ensure that the password strength requirements are met, and sets its `ErrorMessage` and `ValidationExpression` properties based on the `minRequiredPasswordLength`, `minRequiredNonalphanumericCharacters`, and `passwordStrengthRegularExpression` configuration settings.</span></span>

<span data-ttu-id="abd86-316">Formant formancie CreateUserWizard, jak jego nazwa oznacza, pochodzi od [kontrolki kreatora](https://msdn.microsoft.com/library/s2etd1ek.aspx).</span><span class="sxs-lookup"><span data-stu-id="abd86-316">The CreateUserWizard control, as its name implies, is derived from the [Wizard control](https://msdn.microsoft.com/library/s2etd1ek.aspx).</span></span> <span data-ttu-id="abd86-317">Formanty kreatora zostały zaprojektowane w celu zapewnienia interfejsu do wykonywania zadań wieloetapowych.</span><span class="sxs-lookup"><span data-stu-id="abd86-317">Wizard controls are designed to provide an interface for completing multi-step tasks.</span></span> <span data-ttu-id="abd86-318">Kontrolka kreatora może mieć dowolną liczbę `WizardSteps`, z których każdy jest szablonem, który definiuje kontrolki HTML i sieci Web dla tego kroku.</span><span class="sxs-lookup"><span data-stu-id="abd86-318">A Wizard control may have an arbitrary number of `WizardSteps`, each of which is a template that defines the HTML and Web controls for that step.</span></span> <span data-ttu-id="abd86-319">Kontrolka kreatora początkowo wyświetla pierwszy `WizardStep`, wraz z kontrolkami nawigacji, które umożliwiają użytkownikowi przechodzenie z jednego kroku do następnego lub powrót do poprzednich kroków.</span><span class="sxs-lookup"><span data-stu-id="abd86-319">The Wizard control initially displays the first `WizardStep`, along with navigation controls that permit the user to proceed from one step to the next, or to return to previous steps.</span></span>

<span data-ttu-id="abd86-320">Jak znaczniki deklaratywne na rysunku 11 pokazują, domyślnym interfejsem kontrolki formancie CreateUserWizard jest dwa `WizardSteps:`</span><span class="sxs-lookup"><span data-stu-id="abd86-320">As the declarative markup in Figure 11 shows, the CreateUserWizard control's default interface includes two `WizardSteps:`</span></span>

- <span data-ttu-id="abd86-321">[`CreateUserWizardStep`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizardstep.aspx) — renderuje interfejs w celu zebrania informacji dotyczących tworzenia nowego konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-321">[`CreateUserWizardStep`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizardstep.aspx) – renders the interface to collect information for creating the new user account.</span></span> <span data-ttu-id="abd86-322">Jest to krok przedstawiony na rysunku 11.</span><span class="sxs-lookup"><span data-stu-id="abd86-322">This is the step shown in Figure 11.</span></span>
- <span data-ttu-id="abd86-323">[`CompleteWizardStep`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.completewizardstep.aspx) — renderuje komunikat informujący o tym, że konto zostało pomyślnie utworzone.</span><span class="sxs-lookup"><span data-stu-id="abd86-323">[`CompleteWizardStep`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.completewizardstep.aspx) – renders a message indicating that the account has successfully been created.</span></span>

<span data-ttu-id="abd86-324">Wygląd i zachowanie formancie CreateUserWizard można modyfikować, konwertując jeden z tych kroków na szablony lub dodając własne `WizardSteps`.</span><span class="sxs-lookup"><span data-stu-id="abd86-324">The CreateUserWizard's appearance and behavior can be modified by converting either of these steps to templates, or by adding your own `WizardSteps`.</span></span> <span data-ttu-id="abd86-325">Dowiesz się, jak dodać `WizardStep` do interfejsu rejestracji w samouczku *przechowywanie dodatkowych informacji o użytkownikach* .</span><span class="sxs-lookup"><span data-stu-id="abd86-325">We will look at adding a `WizardStep` to the registration interface in the *Storing Additional User Information* tutorial.</span></span>

<span data-ttu-id="abd86-326">Zobaczmy, jak działa kontrolka formancie CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="abd86-326">Let's see the CreateUserWizard control in action.</span></span> <span data-ttu-id="abd86-327">Odwiedź stronę `CreatingUserAccounts.aspx` za pomocą przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="abd86-327">Visit the `CreatingUserAccounts.aspx` page through a browser.</span></span> <span data-ttu-id="abd86-328">Zacznij od wprowadzenia nieprawidłowych wartości do interfejsu formancie CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="abd86-328">Start by entering some invalid values into the CreateUserWizard's interface.</span></span> <span data-ttu-id="abd86-329">Spróbuj wprowadzić hasło, które nie jest zgodne z wymaganiami dotyczącymi siły hasła lub pozostawić pole tekstowe "Nazwa użytkownika" puste.</span><span class="sxs-lookup"><span data-stu-id="abd86-329">Try entering a password that doesn't conform to the password strength requirements, or leaving the "User Name" textbox empty.</span></span> <span data-ttu-id="abd86-330">W formancie CreateUserWizard zostanie wyświetlony odpowiedni komunikat o błędzie.</span><span class="sxs-lookup"><span data-stu-id="abd86-330">The CreateUserWizard will display an appropriate error message.</span></span> <span data-ttu-id="abd86-331">Rysunek 12 przedstawia dane wyjściowe podczas próby utworzenia użytkownika z niewystarczającym silnym hasłem.</span><span class="sxs-lookup"><span data-stu-id="abd86-331">Figure 12 shows the output when attempting to create a user with an insufficiently strong password.</span></span>

<span data-ttu-id="abd86-332">[![formancie CreateUserWizard automatycznie wprowadza kontrolki walidacji](creating-user-accounts-cs/_static/image35.png)](creating-user-accounts-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="abd86-332">[![The CreateUserWizard Automatically Injects Validation Controls](creating-user-accounts-cs/_static/image35.png)](creating-user-accounts-cs/_static/image34.png)</span></span>

<span data-ttu-id="abd86-333">**Ilustracja 12**. formancie CreateUserWizard automatycznie wprowadza kontrolki walidacji ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="abd86-333">**Figure 12**: The CreateUserWizard Automatically Injects Validation Controls  ([Click to view full-size image](creating-user-accounts-cs/_static/image36.png))</span></span>

<span data-ttu-id="abd86-334">Następnie wprowadź odpowiednie wartości w formancie CreateUserWizard, a następnie kliknij przycisk "Utwórz użytkownika".</span><span class="sxs-lookup"><span data-stu-id="abd86-334">Next, enter appropriate values into the CreateUserWizard and click the "Create User" button.</span></span> <span data-ttu-id="abd86-335">Przy założeniu, że wymagane pola zostały wprowadzone, a siła hasła jest wystarczająca, formancie CreateUserWizard utworzy nowe konto użytkownika za pomocą struktury członkostwa, a następnie wyświetli interfejs `CompleteWizardStep`(Zobacz Rysunek 13).</span><span class="sxs-lookup"><span data-stu-id="abd86-335">Assuming the required fields have been entered and the password's strength is sufficient, the CreateUserWizard will create a new user account through the Membership framework and then display the `CompleteWizardStep`'s interface (see Figure 13).</span></span> <span data-ttu-id="abd86-336">W tle formancie CreateUserWizard wywołuje metodę `Membership.CreateUser`, podobnie jak w kroku 5.</span><span class="sxs-lookup"><span data-stu-id="abd86-336">Behind the scenes, the CreateUserWizard calls the `Membership.CreateUser` method, just like we did in Step 5.</span></span>

<span data-ttu-id="abd86-337">[![pomyślnie utworzono nowe konto użytkownika](creating-user-accounts-cs/_static/image38.png)](creating-user-accounts-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="abd86-337">[![A New User Account has Successfully Been Created](creating-user-accounts-cs/_static/image38.png)](creating-user-accounts-cs/_static/image37.png)</span></span>

<span data-ttu-id="abd86-338">**Rysunek 13**: nowe konto użytkownika zostało pomyślnie utworzone ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-user-accounts-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="abd86-338">**Figure 13**: A New User Account has Successfully Been Created  ([Click to view full-size image](creating-user-accounts-cs/_static/image39.png))</span></span>

> [!NOTE]
> <span data-ttu-id="abd86-339">Jak pokazano na rysunku 13, interfejs `CompleteWizardStep`zawiera przycisk Kontynuuj.</span><span class="sxs-lookup"><span data-stu-id="abd86-339">As Figure 13 shows, the `CompleteWizardStep`'s interface includes a Continue button.</span></span> <span data-ttu-id="abd86-340">Jednak po kliknięciu tej opcji po prostu wykonuje ogłaszanie zwrotne, pozostawiając odwiedzanie na tej samej stronie.</span><span class="sxs-lookup"><span data-stu-id="abd86-340">However, at this point clicking it just performs a postback, leaving the visitor on the same page.</span></span> <span data-ttu-id="abd86-341">W sekcji "Dostosowywanie wyglądu i zachowania formancie CreateUserWizard za pomocą jego właściwości" powiesz się, jak możesz mieć ten przycisk, aby wysłać gościa do `Default.aspx` (lub innej strony).</span><span class="sxs-lookup"><span data-stu-id="abd86-341">In the "Customizing the CreateUserWizard's Appearance and Behavior Through Its Properties" section we will look at how you can have this button send the visitor to `Default.aspx` (or some other page).</span></span>

<span data-ttu-id="abd86-342">Po utworzeniu nowego konta użytkownika Wróć do programu Visual Studio i sprawdź, czy `aspnet_Users` i `aspnet_Membership` tabele takie jak na rysunku nr 10, aby sprawdzić, czy konto zostało pomyślnie utworzone.</span><span class="sxs-lookup"><span data-stu-id="abd86-342">After creating a new user account, return to Visual Studio and examine the `aspnet_Users` and `aspnet_Membership` tables like we did in Figure 10 to verify that the account was successfully created.</span></span>

### <a name="customizing-the-createuserwizards-behavior-and-appearance-through-its-properties"></a><span data-ttu-id="abd86-343">Dostosowywanie zachowania i wyglądu formancie CreateUserWizard za pomocą jego właściwości</span><span class="sxs-lookup"><span data-stu-id="abd86-343">Customizing the CreateUserWizard's Behavior and Appearance Through Its Properties</span></span>

<span data-ttu-id="abd86-344">Formancie CreateUserWizard można dostosować na wiele sposobów, za pomocą właściwości, `WizardSteps`i obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="abd86-344">The CreateUserWizard can be customized in a variety of ways, through properties, `WizardSteps`, and event handlers.</span></span> <span data-ttu-id="abd86-345">W tej sekcji zawarto informacje na temat sposobu dostosowywania wyglądu kontrolki za pomocą jej właściwości. Następna sekcja sprawdza, rozszerzając zachowanie kontrolki za pomocą programów obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="abd86-345">In this section we will look at how to customize the control's appearance through its properties; the next section looks at extending the control's behavior through event handlers.</span></span>

<span data-ttu-id="abd86-346">Praktycznie cały tekst wyświetlany w domyślnym interfejsie użytkownika formantu formancie CreateUserWizard można dostosować za pomocą jego mnóstwo właściwości.</span><span class="sxs-lookup"><span data-stu-id="abd86-346">Virtually all of the text displayed in the CreateUserWizard control's default user interface can be customized through its plethora of properties.</span></span> <span data-ttu-id="abd86-347">Na przykład etykiety "Nazwa użytkownika", "hasło", "Potwierdź hasło", "adres E-mail", "pytanie zabezpieczające" i "odpowiedź zabezpieczeń" wyświetlane po lewej stronie pól tekstowych można odpowiednio dostosować o właściwościach [`UserNameLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.usernamelabeltext.aspx), [`PasswordLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.passwordlabeltext.aspx), [`ConfirmPasswordLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.confirmpasswordlabeltext.aspx), [`EmailLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.emaillabeltext.aspx), [`QuestionLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.questionlabeltext.aspx)i [`AnswerLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.answerlabeltext.aspx) .</span><span class="sxs-lookup"><span data-stu-id="abd86-347">For example, the "User Name", "Password", "Confirm Password", "E-mail", "Security Question", and "Security Answer" labels displayed to the left of the textboxes can be customized by the [`UserNameLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.usernamelabeltext.aspx), [`PasswordLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.passwordlabeltext.aspx), [`ConfirmPasswordLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.confirmpasswordlabeltext.aspx), [`EmailLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.emaillabeltext.aspx), [`QuestionLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.questionlabeltext.aspx), and [`AnswerLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.answerlabeltext.aspx) properties, respectively.</span></span> <span data-ttu-id="abd86-348">Podobnie są właściwości do określania tekstu dla przycisków "Utwórz użytkownika" i "Kontynuuj" w `CreateUserWizardStep` i `CompleteWizardStep`, a także jeśli te przyciski są renderowane jako przyciski, LinkButtons lub ImageButtons.</span><span class="sxs-lookup"><span data-stu-id="abd86-348">Likewise, there are properties for specifying the text for the "Create User" and "Continue" buttons in the `CreateUserWizardStep` and `CompleteWizardStep`, as well as if these buttons are rendered as Buttons, LinkButtons, or ImageButtons.</span></span>

<span data-ttu-id="abd86-349">Kolory, obramowania, czcionki i inne elementy wizualne można konfigurować za pomocą hosta właściwości stylu.</span><span class="sxs-lookup"><span data-stu-id="abd86-349">The colors, borders, fonts, and other visual elements are configurable through a host of style properties.</span></span> <span data-ttu-id="abd86-350">Sama kontrolka formancie CreateUserWizard ma wspólną Właściwość stylu formantu sieci Web — `BackColor`, `BorderStyle`, `CssClass`, `Font`i tak dalej — i istnieje wiele właściwości stylu służących do definiowania wyglądu określonych sekcji interfejsu formancie CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="abd86-350">The CreateUserWizard control itself has the common Web control style properties – `BackColor`, `BorderStyle`, `CssClass`, `Font`, and so on – and there are a number of style properties for defining the appearance for particular sections of the CreateUserWizard's interface.</span></span> <span data-ttu-id="abd86-351">[Właściwość`TextBoxStyle`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.textboxstyle.aspx), na przykład definiuje style dla pól tekstowych w `CreateUserWizardStep`, podczas gdy [Właściwość`TitleTextStyle`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.titletextstyle.aspx) definiuje styl tytułu ("Utwórz nowe konto").</span><span class="sxs-lookup"><span data-stu-id="abd86-351">The [`TextBoxStyle` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.textboxstyle.aspx), for instance, defines the styles for the textboxes in the `CreateUserWizardStep`, while the [`TitleTextStyle` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.titletextstyle.aspx) defines the style for the title ("Sign Up for Your New Account").</span></span>

<span data-ttu-id="abd86-352">Oprócz właściwości związanych z wyglądem istnieje wiele właściwości, które wpływają na zachowanie formantu formancie CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="abd86-352">In addition to the appearance-related properties, there are a number of properties that affect the CreateUserWizard control's behavior.</span></span> <span data-ttu-id="abd86-353">[Właściwość`DisplayCancelButton`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.wizard.displaycancelbutton.aspx), jeśli ma wartość true, wyświetla przycisk Anuluj obok przycisku "Utwórz użytkownika" (wartość domyślna to false).</span><span class="sxs-lookup"><span data-stu-id="abd86-353">The [`DisplayCancelButton` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.wizard.displaycancelbutton.aspx), if set to True, displays a Cancel button next to the "Create User" button (the default value is False).</span></span> <span data-ttu-id="abd86-354">Jeśli zostanie wyświetlony przycisk Anuluj, należy również ustawić [właściwość`CancelDestinationPageUrl`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx), która określa stronę, do której użytkownik jest wysyłany po kliknięciu przycisku Anuluj.</span><span class="sxs-lookup"><span data-stu-id="abd86-354">If you display the Cancel button, be sure to also set the [`CancelDestinationPageUrl` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx), which specifies the page the user is sent to after clicking Cancel.</span></span> <span data-ttu-id="abd86-355">Jak wskazano w poprzedniej sekcji, przycisk Kontynuuj w interfejsie `CompleteWizardStep`powoduje ogłoszenie zwrotne, ale pozostawia odwiedzanie na tej samej stronie.</span><span class="sxs-lookup"><span data-stu-id="abd86-355">As noted in the previous section, the Continue button in the `CompleteWizardStep`'s interface causes a postback, but leaves the visitor on the same page.</span></span> <span data-ttu-id="abd86-356">Aby wysłać gościa do innej strony po kliknięciu przycisku Kontynuuj, wystarczy określić adres URL we [właściwości`ContinueDestinationPageUrl`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx).</span><span class="sxs-lookup"><span data-stu-id="abd86-356">To send the visitor to some other page after clicking the Continue button, simply specify the URL in the [`ContinueDestinationPageUrl` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx).</span></span>

<span data-ttu-id="abd86-357">Zaktualizujmy `RegisterUser` kontrolkę formancie CreateUserWizard, aby wyświetlić przycisk Anuluj i aby wysłać odwiedzanie do `Default.aspx` po kliknięciu przycisków Anuluj lub Kontynuuj.</span><span class="sxs-lookup"><span data-stu-id="abd86-357">Let's update the `RegisterUser` CreateUserWizard control to show a Cancel button and to send the visitor to `Default.aspx` when the Cancel or Continue buttons are clicked.</span></span> <span data-ttu-id="abd86-358">Aby to osiągnąć, należy ustawić właściwość `DisplayCancelButton` na true, a jednocześnie właściwości `CancelDestinationPageUrl` i `ContinueDestinationPageUrl` na wartość "~/default.aspx".</span><span class="sxs-lookup"><span data-stu-id="abd86-358">To accomplish this, set the `DisplayCancelButton` property to True and both the `CancelDestinationPageUrl` and `ContinueDestinationPageUrl` properties to "~/Default.aspx".</span></span> <span data-ttu-id="abd86-359">Ilustracja 14 przedstawia zaktualizowany formancie CreateUserWizard, gdy jest wyświetlany za pomocą przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="abd86-359">Figure 14 shows the updated CreateUserWizard when viewed through a browser.</span></span>

<span data-ttu-id="abd86-360">[![Element CreateUserWizardStep zawiera przycisk Anuluj](creating-user-accounts-cs/_static/image41.png)](creating-user-accounts-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="abd86-360">[![The CreateUserWizardStep Includes a Cancel Button](creating-user-accounts-cs/_static/image41.png)](creating-user-accounts-cs/_static/image40.png)</span></span>

<span data-ttu-id="abd86-361">**Ilustracja 14**. `CreateUserWizardStep` zawiera przycisk Cancel ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="abd86-361">**Figure 14**: The `CreateUserWizardStep` Includes a Cancel Button  ([Click to view full-size image](creating-user-accounts-cs/_static/image42.png))</span></span>

<span data-ttu-id="abd86-362">Gdy osoba odwiedzająca wprowadzi nazwę użytkownika, hasło, adres e-mail i pytanie zabezpieczające i odpowiedź, a następnie kliknie przycisk "Utwórz użytkownika", zostanie utworzone nowe konto użytkownika, a osoba odwiedzająca zostanie zalogowana jako nowo utworzony użytkownik.</span><span class="sxs-lookup"><span data-stu-id="abd86-362">When a visitor enters a username, password, email address, and security question and answer and clicks "Create User," a new user account is created and the visitor is logged in as that newly created user.</span></span> <span data-ttu-id="abd86-363">Przy założeniu, że osoba odwiedzająca stronę tworzy nowe konto dla siebie, prawdopodobnie jest to żądane zachowanie.</span><span class="sxs-lookup"><span data-stu-id="abd86-363">Assuming that the person visiting the page is creating a new account for themselves, this is likely the desired behavior.</span></span> <span data-ttu-id="abd86-364">Można jednak zezwolić administratorom na dodawanie nowych kont użytkowników.</span><span class="sxs-lookup"><span data-stu-id="abd86-364">However, you may want to allow Administrators to add new user accounts.</span></span> <span data-ttu-id="abd86-365">W takim przypadku konto użytkownika zostanie utworzone, ale administrator pozostanie zalogowany jako administrator (a nie jako nowo utworzone konto).</span><span class="sxs-lookup"><span data-stu-id="abd86-365">In doing so, the user account would be created, but the Administrator would remain logged in as an Administrator (and not as the newly created account).</span></span> <span data-ttu-id="abd86-366">To zachowanie można zmodyfikować za pomocą [właściwości`LoginCreatedUser`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.logincreateduser.aspx)logicznej.</span><span class="sxs-lookup"><span data-stu-id="abd86-366">This behavior can be modified through the Boolean [`LoginCreatedUser` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.logincreateduser.aspx).</span></span>

<span data-ttu-id="abd86-367">Konta użytkowników w środowisku członkostwa zawierają zatwierdzoną flagę; Użytkownicy, którzy nie są zatwierdzeni, nie mogą zalogować się do witryny.</span><span class="sxs-lookup"><span data-stu-id="abd86-367">User accounts in the Membership framework contain an approved flag; users who are not approved are unable to log into the site.</span></span> <span data-ttu-id="abd86-368">Domyślnie nowo utworzone konto jest oznaczone jako zatwierdzone, co umożliwia użytkownikowi natychmiastowe logowanie do witryny.</span><span class="sxs-lookup"><span data-stu-id="abd86-368">By default, a newly created account is marked as approved, allowing the user to log into the site immediately.</span></span> <span data-ttu-id="abd86-369">Istnieje jednak możliwość, że nowe konta użytkowników są oznaczone jako niezatwierdzone.</span><span class="sxs-lookup"><span data-stu-id="abd86-369">It is possible, however, to have new user accounts marked as unapproved.</span></span> <span data-ttu-id="abd86-370">Być może Administrator ma ręcznie zatwierdzać nowych użytkowników przed ich zalogowaniem się; Możesz też sprawdzić, czy adres e-mail wprowadzony podczas rejestracji jest prawidłowy przed zezwoleniem użytkownikowi na zalogowanie się.</span><span class="sxs-lookup"><span data-stu-id="abd86-370">Perhaps you want an Administrator to manually approve new users before they can log in; or maybe you want to verify that the email address entered at signup is valid before permitting a user to log on.</span></span> <span data-ttu-id="abd86-371">Niezależnie od tego, czy nowo utworzone konto użytkownika może być oznaczone jako niezatwierdzone, ustawiając [właściwość`DisableCreatedUser`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.disablecreateduser.aspx) kontrolki formancie CreateUserWizard na true (wartość domyślna to false).</span><span class="sxs-lookup"><span data-stu-id="abd86-371">Whatever the case may be, you can have the newly created user account marked as unapproved by setting the CreateUserWizard control's [`DisableCreatedUser` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.disablecreateduser.aspx) to True (the default is False).</span></span>

<span data-ttu-id="abd86-372">Inne właściwości powiązane z zachowaniem uwagi obejmują `AutoGeneratePassword` i `MailDefinition`.</span><span class="sxs-lookup"><span data-stu-id="abd86-372">Other behavior-related properties of note include `AutoGeneratePassword` and `MailDefinition`.</span></span> <span data-ttu-id="abd86-373">Jeśli [właściwość`AutoGeneratePassword`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.autogeneratepassword.aspx) ma wartość True, `CreateUserWizardStep` nie będzie wyświetlać pól tekstowych "Password" i "Confirm Password". Zamiast tego nowo utworzone hasło użytkownika jest generowane automatycznie przy użyciu [metody`GeneratePassword`](https://msdn.microsoft.com/library/system.web.security.membership.generatepassword.aspx)klasy `Membership`.</span><span class="sxs-lookup"><span data-stu-id="abd86-373">If the [`AutoGeneratePassword` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.autogeneratepassword.aspx) is set to True, the `CreateUserWizardStep` does not display the "Password" and "Confirm Password" textboxes; instead, the newly-created user's password is automatically generated using the `Membership` class's [`GeneratePassword` method](https://msdn.microsoft.com/library/system.web.security.membership.generatepassword.aspx).</span></span> <span data-ttu-id="abd86-374">Metoda `GeneratePassword` konstruuje hasło o określonej długości i wystarczającej liczbie znaków innych niż alfanumeryczne w celu spełnienia skonfigurowanych wymagań dotyczących siły hasła.</span><span class="sxs-lookup"><span data-stu-id="abd86-374">The `GeneratePassword` method constructs a password of a specified length and with a sufficient number of non-alphanumeric characters to satisfy the configured password strength requirements.</span></span>

<span data-ttu-id="abd86-375">[Właściwość`MailDefinition`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.maildefinition.aspx) jest przydatna, jeśli chcesz wysłać wiadomość e-mail na adres e-mail określony podczas procesu tworzenia konta.</span><span class="sxs-lookup"><span data-stu-id="abd86-375">The [`MailDefinition` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.maildefinition.aspx) is useful if you want to send an email to the email address specified during the account creation process.</span></span> <span data-ttu-id="abd86-376">Właściwość `MailDefinition` zawiera serię podwłaściwości służącą do definiowania informacji o konstruowanej wiadomości e-mail.</span><span class="sxs-lookup"><span data-stu-id="abd86-376">The `MailDefinition` property includes a series of subproperties for defining information about the constructed email message.</span></span> <span data-ttu-id="abd86-377">Właściwości te obejmują opcje takie jak `Subject`, `Priority`, `IsBodyHtml`, `From`, `CC`i `BodyFileName`.</span><span class="sxs-lookup"><span data-stu-id="abd86-377">These subproperties include options like `Subject`, `Priority`, `IsBodyHtml`, `From`, `CC`, and `BodyFileName`.</span></span> <span data-ttu-id="abd86-378">[Właściwość`BodyFileName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.maildefinition.bodyfilename.aspx) wskazuje plik tekstowy lub HTML, który zawiera treść wiadomości e-mail.</span><span class="sxs-lookup"><span data-stu-id="abd86-378">The [`BodyFileName` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.maildefinition.bodyfilename.aspx) points to a text or HTML file that contains the body for the email message.</span></span> <span data-ttu-id="abd86-379">Treść obsługuje dwa wstępnie zdefiniowane symbole zastępcze: `<%UserName%>` i `<%Password%>`.</span><span class="sxs-lookup"><span data-stu-id="abd86-379">The body supports two pre-defined placeholders: `<%UserName%>` and `<%Password%>`.</span></span> <span data-ttu-id="abd86-380">Te symbole zastępcze, jeśli znajdują się w pliku `BodyFileName`, zostaną zastąpione nazwą i hasłem utworzonego przez samego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-380">These placeholders, if present in the `BodyFileName` file, will be replaced with the just-created user's name and password.</span></span>

> [!NOTE]
> <span data-ttu-id="abd86-381">Właściwość `MailDefinition` kontrolki `CreateUserWizard` po prostu określa szczegóły dotyczące wiadomości e-mail wysyłanej po utworzeniu nowego konta.</span><span class="sxs-lookup"><span data-stu-id="abd86-381">The `CreateUserWizard` control's `MailDefinition` property just specifies details about the email message that is sent when a new account is created.</span></span> <span data-ttu-id="abd86-382">Nie zawiera żadnych szczegółowych informacji o tym, w jaki sposób wiadomość e-mail jest wysyłana (czyli czy jest używany serwer SMTP lub katalog poczty drop mail, wszystkie informacje o uwierzytelnianiu itd.).</span><span class="sxs-lookup"><span data-stu-id="abd86-382">It does not include any details on how the email message is actually sent (that is, whether an SMTP server or mail drop directory is used, any authentication information, and so on).</span></span> <span data-ttu-id="abd86-383">Te szczegóły niskiego poziomu należy zdefiniować w sekcji `<system.net>` w `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="abd86-383">These low-level details need to be defined in the `<system.net>` section in `Web.config`.</span></span> <span data-ttu-id="abd86-384">Aby uzyskać więcej informacji na temat tych ustawień konfiguracji oraz wysyłania wiadomości e-mail z usługi ASP.NET 2,0 ogólniej, zobacz [często zadawane pytania dotyczące SystemNetMail.com](http://www.systemnetmail.com/) i mojego artykułu, [wysyłając wiadomość e-mail w ASP.NET 2,0](http://aspnet.4guysfromrolla.com/articles/072606-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="abd86-384">For more information on these configuration settings and on sending email from ASP.NET 2.0 in general, refer to the [FAQs at SystemNetMail.com](http://www.systemnetmail.com/) and my article, [Sending Email in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/072606-1.aspx).</span></span>

### <a name="extending-the-createuserwizards-behavior-using-event-handlers"></a><span data-ttu-id="abd86-385">Rozszerzanie zachowania formancie CreateUserWizard przy użyciu procedur obsługi zdarzeń</span><span class="sxs-lookup"><span data-stu-id="abd86-385">Extending the CreateUserWizard's Behavior Using Event Handlers</span></span>

<span data-ttu-id="abd86-386">Kontrolka formancie CreateUserWizard wywołuje wiele zdarzeń podczas przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="abd86-386">The CreateUserWizard control raises a number of events during its workflow.</span></span> <span data-ttu-id="abd86-387">Na przykład gdy osoba odwiedzająca wprowadzi swoją nazwę użytkownika, hasło i inne odpowiednie informacje, a następnie kliknie przycisk "Utwórz użytkownika", formant formancie CreateUserWizard zgłosi swoje [zdarzenie`CreatingUser`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.creatinguser.aspx).</span><span class="sxs-lookup"><span data-stu-id="abd86-387">For example, after a visitor enters their username, password, and other pertinent information and clicks the "Create User" button, the CreateUserWizard control raises its [`CreatingUser` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.creatinguser.aspx).</span></span> <span data-ttu-id="abd86-388">Jeśli wystąpi problem podczas procesu tworzenia, zostanie wyzwolone [zdarzenie`CreateUserError`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createusererror.aspx) . Jeśli jednak użytkownik zostanie utworzony pomyślnie, zostanie zgłoszone [zdarzenie`CreatedUser`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createduser.aspx) .</span><span class="sxs-lookup"><span data-stu-id="abd86-388">If there is a problem during the create process, the [`CreateUserError` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createusererror.aspx) is fired; however, if the user is successfully created, then the [`CreatedUser` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createduser.aspx) is raised.</span></span> <span data-ttu-id="abd86-389">Istnieją dodatkowe zdarzenia kontroli formancie CreateUserWizard, które są wywoływane, ale są to trzy najbardziej niemieckie.</span><span class="sxs-lookup"><span data-stu-id="abd86-389">There are additional CreateUserWizard control events that get raised, but these are the three most germane ones.</span></span>

<span data-ttu-id="abd86-390">W niektórych scenariuszach możemy chcieć nacisnąć przepływ pracy formancie CreateUserWizard, co możemy zrobić, tworząc procedurę obsługi zdarzeń dla odpowiedniego zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="abd86-390">In certain scenarios we may want to tap into the CreateUserWizard workflow, which we can do by creating an event handler for the appropriate event.</span></span> <span data-ttu-id="abd86-391">Aby to zilustrować, przyjrzyjmy się `RegisterUser` kontrolce formancie CreateUserWizard w celu uwzględnienia niestandardowego sprawdzania poprawności nazwy użytkownika i hasła.</span><span class="sxs-lookup"><span data-stu-id="abd86-391">To illustrate this, let's enhance the `RegisterUser` CreateUserWizard control to include some custom validation on the username and password.</span></span> <span data-ttu-id="abd86-392">W szczególności ulepszamy nasze formancie CreateUserWizard, dzięki czemu nazwy użytkowników nie mogą zawierać spacji wiodących ani końcowych, a nazwa użytkownika nie może pojawić się w dowolnym miejscu hasła.</span><span class="sxs-lookup"><span data-stu-id="abd86-392">In particular, let's enhance our CreateUserWizard so that usernames cannot contain leading or trailing spaces and the username cannot appear anywhere in the password.</span></span> <span data-ttu-id="abd86-393">W skrócie chcemy uniemożliwić komuś utworzenie nazwy użytkownika, takiej jak "Scott", lub posiadania kombinacji nazwy użytkownika i hasła, takich jak "Scott" i "Scott. 1234".</span><span class="sxs-lookup"><span data-stu-id="abd86-393">In short, we want to prevent someone from creating a username like "Scott ", or having a username/password combination like "Scott" and "Scott.1234".</span></span>

<span data-ttu-id="abd86-394">Aby to osiągnąć, utworzymy procedurę obsługi zdarzeń dla zdarzenia `CreatingUser`, aby wykonać nasze dodatkowe sprawdzenia poprawności.</span><span class="sxs-lookup"><span data-stu-id="abd86-394">To accomplish this we will create an event handler for the `CreatingUser` event to perform our extra validation checks.</span></span> <span data-ttu-id="abd86-395">Jeśli podane dane nie są prawidłowe, należy anulować proces tworzenia.</span><span class="sxs-lookup"><span data-stu-id="abd86-395">If the supplied data is not valid we need to cancel the creation process.</span></span> <span data-ttu-id="abd86-396">Należy również dodać kontrolkę sieci Web etykieta do strony, aby wyświetlić komunikat z wyjaśnieniem, że nazwa użytkownika lub hasło jest nieprawidłowe.</span><span class="sxs-lookup"><span data-stu-id="abd86-396">We also need to add a Label Web control to the page to display a message explaining that the username or password is invalid.</span></span> <span data-ttu-id="abd86-397">Zacznij od dodania kontrolki etykieta pod kontrolką formancie CreateUserWizard, ustawiając jej Właściwość `ID` na `InvalidUserNameOrPasswordMessage` i jej Właściwość `ForeColor` na `Red`.</span><span class="sxs-lookup"><span data-stu-id="abd86-397">Start by adding a Label control beneath the CreateUserWizard control, setting its `ID` property to `InvalidUserNameOrPasswordMessage` and its `ForeColor` property to `Red`.</span></span> <span data-ttu-id="abd86-398">Wyczyść Właściwość `Text` i ustaw dla jej właściwości `EnableViewState` i `Visible` wartość false.</span><span class="sxs-lookup"><span data-stu-id="abd86-398">Clear out its `Text` property and set its `EnableViewState` and `Visible` properties to False.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample7.aspx)]

<span data-ttu-id="abd86-399">Następnie Utwórz procedurę obsługi zdarzeń dla zdarzenia `CreatingUser` formantu formancie CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="abd86-399">Next, create an event handler for the CreateUserWizard control's `CreatingUser` event.</span></span> <span data-ttu-id="abd86-400">Aby utworzyć procedurę obsługi zdarzeń, zaznacz kontrolkę w projektancie, a następnie przejdź do okno Właściwości.</span><span class="sxs-lookup"><span data-stu-id="abd86-400">To create an event handler, select the control in the Designer and then go to the Properties window.</span></span> <span data-ttu-id="abd86-401">W tym miejscu kliknij ikonę błyskawicy, a następnie kliknij dwukrotnie odpowiednie zdarzenie, aby utworzyć procedurę obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="abd86-401">From there, click on the lightning bolt icon and then double-click the appropriate event to create the event handler.</span></span>

<span data-ttu-id="abd86-402">Dodaj następujący kod do programu obsługi zdarzeń `CreatingUser`:</span><span class="sxs-lookup"><span data-stu-id="abd86-402">Add the following code to the `CreatingUser` event handler:</span></span>

[!code-csharp[Main](creating-user-accounts-cs/samples/sample8.cs)]

<span data-ttu-id="abd86-403">Należy pamiętać, że nazwa użytkownika i hasło wprowadzone w kontrolce formancie CreateUserWizard są dostępne odpowiednio [`UserName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.username.aspx) i [`Password` właściwości](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.password.aspx).</span><span class="sxs-lookup"><span data-stu-id="abd86-403">Note that the username and password entered into the CreateUserWizard control are available through its [`UserName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.username.aspx) and [`Password` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.password.aspx), respectively.</span></span> <span data-ttu-id="abd86-404">Te właściwości są używane w powyższej procedurze obsługi zdarzeń, aby określić, czy podana nazwa użytkownika zawiera spacje wiodące, czy końcowe oraz czy nazwa użytkownika znajduje się w haśle.</span><span class="sxs-lookup"><span data-stu-id="abd86-404">We use these properties in the above event handler to determine whether the supplied username contains leading or trailing spaces and whether the username is found within the password.</span></span> <span data-ttu-id="abd86-405">Jeśli spełniony jest dowolny z tych warunków, zostanie wyświetlony komunikat o błędzie w etykiecie `InvalidUserNameOrPasswordMessage` i Właściwość `e.Cancel` programu obsługi zdarzeń jest ustawiona na `true`.</span><span class="sxs-lookup"><span data-stu-id="abd86-405">If either of these conditions is met, an error message is displayed in the `InvalidUserNameOrPasswordMessage` Label and the event handler's `e.Cancel` property is set to `true`.</span></span> <span data-ttu-id="abd86-406">Jeśli `e.Cancel` jest ustawiony na `true`, formancie CreateUserWizard krótkiego obwodu przepływu pracy, co skutecznie anuluje proces tworzenia konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abd86-406">If `e.Cancel` is set to `true`, the CreateUserWizard short-circuits its workflow, effectively cancelling the user account creation process.</span></span>

<span data-ttu-id="abd86-407">Rysunek 15 przedstawia zrzut ekranu `CreatingUserAccounts.aspx`, gdy użytkownik wprowadza nazwę użytkownika z spacjami wiodącymi.</span><span class="sxs-lookup"><span data-stu-id="abd86-407">Figure 15 shows a screen shot of `CreatingUserAccounts.aspx` when the user enters a username with leading spaces.</span></span>

<span data-ttu-id="abd86-408">[Nazwy użytkowników ![z wiodącymi lub końcowymi spacjami są niedozwolone](creating-user-accounts-cs/_static/image44.png)](creating-user-accounts-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="abd86-408">[![Usernames with Leading or Trailing Spaces are not Permitted](creating-user-accounts-cs/_static/image44.png)](creating-user-accounts-cs/_static/image43.png)</span></span>

<span data-ttu-id="abd86-409">**Ilustracja 15**. nazwy użytkowników z spacjami wiodącymi lub końcowymi są niedozwolone ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](creating-user-accounts-cs/_static/image45.png))</span><span class="sxs-lookup"><span data-stu-id="abd86-409">**Figure 15**: Usernames with Leading or Trailing Spaces are not Permitted  ([Click to view full-size image](creating-user-accounts-cs/_static/image45.png))</span></span>

> [!NOTE]
> <span data-ttu-id="abd86-410">Zobaczymy przykład użycia zdarzenia `CreatedUser` formantu formancie CreateUserWizard w samouczku  *<a id="_msoanchor_11">[ ](storing-additional-user-information-cs.md)</a>przechowywanie dodatkowych informacji o użytkowniku* .</span><span class="sxs-lookup"><span data-stu-id="abd86-410">We will see an example of using the CreateUserWizard control's `CreatedUser` event in the *<a id="_msoanchor_11"></a>[Storing Additional User Information](storing-additional-user-information-cs.md)* tutorial.</span></span>

## <a name="summary"></a><span data-ttu-id="abd86-411">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="abd86-411">Summary</span></span>

<span data-ttu-id="abd86-412">Metoda `CreateUser` klasy `Membership` tworzy nowe konto użytkownika w środowisku członkostwa.</span><span class="sxs-lookup"><span data-stu-id="abd86-412">The `Membership` class's `CreateUser` method creates a new user account in the Membership framework.</span></span> <span data-ttu-id="abd86-413">Jest to możliwe dzięki delegowaniu wywołania do skonfigurowanego dostawcy członkostwa.</span><span class="sxs-lookup"><span data-stu-id="abd86-413">It does so by delegating the call to the configured Membership provider.</span></span> <span data-ttu-id="abd86-414">W przypadku `SqlMembershipProvider`Metoda `CreateUser` dodaje rekord do tabel `aspnet_Users` i `aspnet_Membership` bazy danych.</span><span class="sxs-lookup"><span data-stu-id="abd86-414">In the case of the `SqlMembershipProvider`, the `CreateUser` method adds a record to the `aspnet_Users` and `aspnet_Membership` database tables.</span></span>

<span data-ttu-id="abd86-415">Chociaż nowe konta użytkowników mogą być tworzone programowo (jak zostało to opisane w kroku 5), szybszym i łatwiejszym rozwiązaniem jest użycie formantu formancie CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="abd86-415">While new user accounts can be created programmatically (as we saw in Step 5), a faster and easier approach is to use the CreateUserWizard control.</span></span> <span data-ttu-id="abd86-416">Ta kontrolka renderuje interfejs użytkownika wieloetapowego służący do zbierania informacji o użytkownikach i tworzenia nowego użytkownika w środowisku członkostwa.</span><span class="sxs-lookup"><span data-stu-id="abd86-416">This control renders a multi-step user interface for collecting user information and creating a new user in the Membership framework.</span></span> <span data-ttu-id="abd86-417">Na podstawie postanowień ta kontrolka używa tej samej metody `Membership.CreateUser`, jak to zostało zbadane w kroku 5, ale kontrolka tworzy interfejs użytkownika, kontrolki walidacji i reaguje na błędy tworzenia konta użytkownika bez konieczności pisania Lick kodu.</span><span class="sxs-lookup"><span data-stu-id="abd86-417">Underneath the covers, this control uses the same `Membership.CreateUser` method as examined in Step 5, but the control creates the user interface, validation controls, and responds to user account creation errors without having to write a lick of code.</span></span>

<span data-ttu-id="abd86-418">W tym momencie mamy wbudowaną funkcję tworzenia nowych kont użytkowników.</span><span class="sxs-lookup"><span data-stu-id="abd86-418">At this point we have the functionality in place to create new user accounts.</span></span> <span data-ttu-id="abd86-419">Jednak strona logowania nadal jest sprawdzana pod kątem tych zakodowanych poświadczeń, które zostały określone z powrotem w drugim samouczku.</span><span class="sxs-lookup"><span data-stu-id="abd86-419">However, the login page still is validating against those hard-coded credentials we specified back in the second tutorial.</span></span> <span data-ttu-id="abd86-420"><a id="_msoanchor_12"> </a>W [następnym samouczku](validating-user-credentials-against-the-membership-user-store-cs.md) będziemy aktualizować `Login.aspx` w celu zweryfikowania podanych poświadczeń użytkownika względem struktury członkostwa.</span><span class="sxs-lookup"><span data-stu-id="abd86-420">In the <a id="_msoanchor_12"></a>[next tutorial](validating-user-credentials-against-the-membership-user-store-cs.md) we will update `Login.aspx` to validate the user's supplied credentials against the Membership framework.</span></span>

<span data-ttu-id="abd86-421">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="abd86-421">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="abd86-422">Dalsze informacje</span><span class="sxs-lookup"><span data-stu-id="abd86-422">Further Reading</span></span>

<span data-ttu-id="abd86-423">Aby uzyskać więcej informacji na temat tematów omówionych w tym samouczku, zapoznaj się z następującymi zasobami:</span><span class="sxs-lookup"><span data-stu-id="abd86-423">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="abd86-424">`CreateUser` dokumentacja techniczna</span><span class="sxs-lookup"><span data-stu-id="abd86-424">`CreateUser` Technical Documentation</span></span>](https://msdn.microsoft.com/library/system.web.security.membershipprovider.createuser.aspx)
- [<span data-ttu-id="abd86-425">Formancie CreateUserWizard — informacje o formancie</span><span class="sxs-lookup"><span data-stu-id="abd86-425">CreateUserWizard Control Overview</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/login/createuserwizard.aspx)
- [<span data-ttu-id="abd86-426">Tworzenie dostawcy mapy witryny opartego na systemie plików</span><span class="sxs-lookup"><span data-stu-id="abd86-426">Creating a File System-Based Site Map Provider</span></span>](http://aspnet.4guysfromrolla.com/articles/020106-1.aspx)
- [<span data-ttu-id="abd86-427">Tworzenie interfejsu użytkownika krok po kroku przy użyciu kontrolki kreatora ASP.NET 2,0</span><span class="sxs-lookup"><span data-stu-id="abd86-427">Creating a Step-by-Step User Interface with the ASP.NET 2.0 Wizard Control</span></span>](http://aspnet.4guysfromrolla.com/articles/061406-1.aspx)
- [<span data-ttu-id="abd86-428">Badanie nawigacji w witrynie ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="abd86-428">Examining ASP.NET 2.0's Site Navigation</span></span>](http://aspnet.4guysfromrolla.com/articles/111605-1.aspx)
- [<span data-ttu-id="abd86-429">Strony wzorcowe i nawigacja w witrynie</span><span class="sxs-lookup"><span data-stu-id="abd86-429">Master Pages and Site Navigation</span></span>](https://asp.net/learn/data-access/tutorial-03-vb.aspx)
- [<span data-ttu-id="abd86-430">Dostawca mapy witryny SQL, dla którego użytkownik oczekiwał</span><span class="sxs-lookup"><span data-stu-id="abd86-430">The SQL Site Map Provider You've Been Waiting For</span></span>](https://msdn.microsoft.com/msdnmag/issues/06/02/WickedCode/default.aspx)

### <a name="about-the-author"></a><span data-ttu-id="abd86-431">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="abd86-431">About the Author</span></span>

<span data-ttu-id="abd86-432">Scott Mitchell, autor wielu książek ASP/ASP. NET Books i założyciel of 4GuysFromRolla.com, pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="abd86-432">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="abd86-433">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="abd86-433">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="abd86-434">Jego Najnowsza książka to *[Sams ASP.NET 2,0 w ciągu 24 godzin](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)* .</span><span class="sxs-lookup"><span data-stu-id="abd86-434">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="abd86-435">Scott można uzyskać w [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) lub za pośrednictwem swojego blogu w [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="abd86-435">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="abd86-436">Specjalne podziękowania dla...</span><span class="sxs-lookup"><span data-stu-id="abd86-436">Special Thanks To…</span></span>

<span data-ttu-id="abd86-437">Ta seria samouczków została sprawdzona przez wielu przydatnych recenzentów.</span><span class="sxs-lookup"><span data-stu-id="abd86-437">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="abd86-438">Recenzent potencjalnych klientów dla tego samouczka został Teresa Murphy.</span><span class="sxs-lookup"><span data-stu-id="abd86-438">Lead reviewer for this tutorial was Teresa Murphy.</span></span> <span data-ttu-id="abd86-439">Chcesz przeglądać moje nadchodzące artykuły MSDN?</span><span class="sxs-lookup"><span data-stu-id="abd86-439">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="abd86-440">Jeśli tak, upuść mi linię w [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span><span class="sxs-lookup"><span data-stu-id="abd86-440">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="abd86-441">[Poprzednie](creating-the-membership-schema-in-sql-server-cs.md)
> [dalej](validating-user-credentials-against-the-membership-user-store-cs.md)</span><span class="sxs-lookup"><span data-stu-id="abd86-441">[Previous](creating-the-membership-schema-in-sql-server-cs.md)
[Next](validating-user-credentials-against-the-membership-user-store-cs.md)</span></span>

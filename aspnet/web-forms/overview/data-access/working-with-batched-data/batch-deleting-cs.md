---
uid: web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
title: Usuwanie partii (C#) | Microsoft Docs
author: rick-anderson
description: Dowiedz się, jak usunąć wiele rekordów bazy danych w ramach jednej operacji. W warstwie interfejsu użytkownika została utworzona po rozbudowanym widoku GridView utworzonym we wcześniejszej tut...
ms.author: riande
ms.date: 06/26/2007
ms.assetid: ac6916d0-a5ab-4218-9760-7ba9e72d258c
msc.legacyurl: /web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: ed832c38b4972f440ab64c141e29c85f0a9df920
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78589531"
---
# <a name="batch-deleting-c"></a><span data-ttu-id="7f1ee-104">Usuwanie w partiach (C#)</span><span class="sxs-lookup"><span data-stu-id="7f1ee-104">Batch Deleting (C#)</span></span>

<span data-ttu-id="7f1ee-105">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="7f1ee-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="7f1ee-106">[Pobierz kod](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) lub [Pobierz plik PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="7f1ee-106">[Download Code](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) or [Download PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span></span>

> <span data-ttu-id="7f1ee-107">Dowiedz się, jak usunąć wiele rekordów bazy danych w ramach jednej operacji.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-107">Learn how to delete multiple database records in a single operation.</span></span> <span data-ttu-id="7f1ee-108">W warstwie interfejsu użytkownika została utworzona po rozbudowanym widoku GridView utworzonym w poprzednim samouczku.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-108">In the User Interface Layer we build upon an enhanced GridView created in an earlier tutorial.</span></span> <span data-ttu-id="7f1ee-109">W warstwie dostępu do danych zawijamy wiele operacji usuwania w ramach transakcji, aby upewnić się, że wszystkie operacje usuwania zakończyły się powodzeniem lub zostaną wycofane wszystkie usunięcia.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-109">In the Data Access Layer we wrap the multiple Delete operations within a transaction to ensure that all deletions succeed or all deletions are rolled back.</span></span>

## <a name="introduction"></a><span data-ttu-id="7f1ee-110">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="7f1ee-110">Introduction</span></span>

<span data-ttu-id="7f1ee-111">W [poprzednim samouczku](batch-updating-cs.md) przedstawiono sposób tworzenia interfejsu edycji partii przy użyciu w pełni edytowanego widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-111">The [preceding tutorial](batch-updating-cs.md) explored how to create a batch editing interface using a fully-editable GridView.</span></span> <span data-ttu-id="7f1ee-112">W sytuacjach, w których użytkownicy często edytują wiele rekordów jednocześnie, interfejs edytowania partii będzie wymagał znacznie mniejszego stanu ogłaszania zwrotnego i przełączania kontekstu klawiatury na klawiaturę, a tym samym podwyższenie wydajności użytkowników końcowych.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-112">In situations where users are commonly editing many records at once, a batch editing interface will require far fewer postbacks and keyboard-to-mouse context switches, thereby improving the end user s efficiency.</span></span> <span data-ttu-id="7f1ee-113">Ta technika jest podobnie przydatna w przypadku stron, na których często użytkownicy mogą usuwać wiele rekordów w jednym miejscu.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-113">This technique is similarly useful for pages where it is common for users to delete many records in one go.</span></span>

<span data-ttu-id="7f1ee-114">Każda osoba, która użyła klienta poczty e-mail w trybie online, już zna jeden z najczęstszych interfejsów usuwania usługi Batch: pole wyboru w każdym wierszu siatki z odpowiednim przyciskiem Usuń wszystkie zaznaczone elementy (patrz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="7f1ee-114">Anyone who has used an online email client is already familiar with one of the most common batch deleting interfaces: a checkbox in each row in a grid with a corresponding Delete All Checked Items button (see Figure 1).</span></span> <span data-ttu-id="7f1ee-115">Ten samouczek jest raczej niezwięzły, ponieważ w poprzednich samouczkach została już wykonana cała twarda część pracy, w której można utworzyć interfejs oparty na sieci Web i metodę usuwania serii rekordów jako pojedynczej operacji niepodzielnej.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-115">This tutorial is rather short because we ve already done all of the hard work in previous tutorials in creating both the web-based interface and a method to delete a series of records as a single atomic operation.</span></span> <span data-ttu-id="7f1ee-116">W samouczku [Dodawanie pola wyboru w kolumnie GridView](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) został utworzony widok GridView z kolumną pól wyboru i w [modyfikacjach zawijania bazy danych w ramach instrukcji Transaction](wrapping-database-modifications-within-a-transaction-cs.md) utworzyliśmy metodę w logiki biznesowej, która mogłaby używać transakcji do usuwania `List<T>` `ProductID` wartości.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-116">In the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial we created a GridView with a column of checkboxes and in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial we created a method in the BLL that would use a transaction to delete a `List<T>` of `ProductID` values.</span></span> <span data-ttu-id="7f1ee-117">W tym samouczku będziemy kompilować i scalać nasze poprzednie środowiska w celu utworzenia przykładowego programu do usuwania partii.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-117">In this tutorial, we will build upon and merge our previous experiences to create a working batch deleting example.</span></span>

<span data-ttu-id="7f1ee-118">[![każdy wiersz zawiera pole wyboru](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="7f1ee-118">[![Each Row Includes a Checkbox](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span></span>

<span data-ttu-id="7f1ee-119">**Rysunek 1**: każdy wiersz zawiera pole wyboru ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](batch-deleting-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="7f1ee-119">**Figure 1**: Each Row Includes a Checkbox ([Click to view full-size image](batch-deleting-cs/_static/image2.png))</span></span>

## <a name="step-1-creating-the-batch-deleting-interface"></a><span data-ttu-id="7f1ee-120">Krok 1. Tworzenie interfejsu usuwania wsadowego</span><span class="sxs-lookup"><span data-stu-id="7f1ee-120">Step 1: Creating the Batch Deleting Interface</span></span>

<span data-ttu-id="7f1ee-121">Ze względu na to, że został już utworzony Interfejs usuwania usługi Batch w ramach samouczka [Dodawanie tabeli w widoku GridView](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) , można po prostu skopiować go do `BatchDelete.aspx` zamiast tworzyć go od podstaw.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-121">Since we already created the batch deleting interface in the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial, we can simply copy it to `BatchDelete.aspx` rather than creating it from scratch.</span></span> <span data-ttu-id="7f1ee-122">Zacznij od otwarcia strony `BatchDelete.aspx` w folderze `BatchData` i stronie `CheckBoxField.aspx` w folderze `EnhancedGridView`.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-122">Start by opening the `BatchDelete.aspx` page in the `BatchData` folder and the `CheckBoxField.aspx` page in the `EnhancedGridView` folder.</span></span> <span data-ttu-id="7f1ee-123">Na stronie `CheckBoxField.aspx` przejdź do widoku źródła i skopiuj znaczniki między tagami `<asp:Content>`, jak pokazano na rysunku 2.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-123">From the `CheckBoxField.aspx` page, go to the Source view and copy the markup between the `<asp:Content>` tags as shown in Figure 2.</span></span>

<span data-ttu-id="7f1ee-124">[![skopiować deklaratywne znaczniki CheckBoxField. aspx do schowka](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="7f1ee-124">[![Copy the Declarative Markup of CheckBoxField.aspx to the Clipboard](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span></span>

<span data-ttu-id="7f1ee-125">**Rysunek 2**. Skopiuj deklaratywne znaczniki `CheckBoxField.aspx` do schowka ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](batch-deleting-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="7f1ee-125">**Figure 2**: Copy the Declarative Markup of `CheckBoxField.aspx` to the Clipboard ([Click to view full-size image](batch-deleting-cs/_static/image4.png))</span></span>

<span data-ttu-id="7f1ee-126">Następnie przejdź do widoku źródła w `BatchDelete.aspx` i wklej zawartość schowka w tagach `<asp:Content>`.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-126">Next, go to the Source view in `BatchDelete.aspx` and paste the contents of the clipboard within the `<asp:Content>` tags.</span></span> <span data-ttu-id="7f1ee-127">Kopiowanie i wklejanie kodu z klasy powiązanej z kodem w `CheckBoxField.aspx.cs` do w ramach klasy z kodem związanym w `BatchDelete.aspx.cs` (`DeleteSelectedProducts` przycisk `Click` programu obsługi zdarzeń, metody `ToggleCheckState` oraz obsługi zdarzeń `Click` dla przycisków `CheckAll` i `UncheckAll`).</span><span class="sxs-lookup"><span data-stu-id="7f1ee-127">Also copy and paste the code from within the code-behind class in `CheckBoxField.aspx.cs` to within the code-behind class in `BatchDelete.aspx.cs` (the `DeleteSelectedProducts` Button s `Click` event handler, the `ToggleCheckState` method, and the `Click` event handlers for the `CheckAll` and `UncheckAll` Buttons).</span></span> <span data-ttu-id="7f1ee-128">Po skopiowaniu zawartości przez tę zawartość Klasa `BatchDelete.aspx` s z kodem związanym ze stroną powinna zawierać następujący kod:</span><span class="sxs-lookup"><span data-stu-id="7f1ee-128">After copying over this content, the `BatchDelete.aspx` page s code-behind class should contain the following code:</span></span>

[!code-csharp[Main](batch-deleting-cs/samples/sample1.cs)]

<span data-ttu-id="7f1ee-129">Po skopiowaniu do deklaratywnego znacznika i kodu źródłowego Poświęć chwilę na przetestowanie `BatchDelete.aspx`, wyświetlając go za pośrednictwem przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-129">After copying over the declarative markup and source code, take a moment to test `BatchDelete.aspx` by viewing it through a browser.</span></span> <span data-ttu-id="7f1ee-130">Powinien pojawić się widok GridView zawierający pierwsze dziesięć produktów w widoku GridView z każdym wierszem zawierającym nazwę produktu, kategorię i cenę wraz z checkboxem.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-130">You should see a GridView listing the first ten products in a GridView with each row listing the product s name, category, and price along with a checkbox.</span></span> <span data-ttu-id="7f1ee-131">Powinny istnieć trzy przyciski: Zaznacz wszystko, usuń zaznaczenie wszystkich i Usuń wybrane produkty.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-131">There should be three buttons: Check All, Uncheck All, and Delete Selected Products.</span></span> <span data-ttu-id="7f1ee-132">Kliknięcie przycisku Zaznacz wszystko powoduje zaznaczenie wszystkich pól wyboru, natomiast zaznaczenie pola Wyczyść wszystkie czyści wszystkie pola wyboru.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-132">Clicking the Check All button selects all checkboxes, while Uncheck All clears all checkboxes.</span></span> <span data-ttu-id="7f1ee-133">Kliknięcie przycisku Usuń wybrane produkty powoduje wyświetlenie komunikatu zawierającego listę wartości `ProductID` wybranych produktów, ale nie powoduje usunięcia tych produktów.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-133">Clicking Delete Selected Products displays a message that lists the `ProductID` values of the selected products, but does not actually delete the products.</span></span>

<span data-ttu-id="7f1ee-134">[![interfejs z CheckBoxField. aspx został przeniesiony do BatchDeleting. aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="7f1ee-134">[![The Interface from CheckBoxField.aspx has been Moved to BatchDeleting.aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="7f1ee-135">**Rysunek 3**: interfejs z `CheckBoxField.aspx` został przeniesiony do `BatchDeleting.aspx` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](batch-deleting-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="7f1ee-135">**Figure 3**: The Interface from `CheckBoxField.aspx` has been Moved to `BatchDeleting.aspx` ([Click to view full-size image](batch-deleting-cs/_static/image6.png))</span></span>

## <a name="step-2-deleting-the-checked-products-using-transactions"></a><span data-ttu-id="7f1ee-136">Krok 2. Usuwanie zaewidencjonowanych produktów przy użyciu transakcji</span><span class="sxs-lookup"><span data-stu-id="7f1ee-136">Step 2: Deleting the Checked Products Using Transactions</span></span>

<span data-ttu-id="7f1ee-137">Gdy interfejs usuwania wsadowego został pomyślnie skopiowany do `BatchDeleting.aspx`, wszystko to jest w celu zaktualizowania kodu tak, aby przycisk Usuń wybrane produkty usuwa zaznaczone produkty przy użyciu metody `DeleteProductsWithTransaction` w klasie `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-137">With the batch deleting interface successfully copied over to `BatchDeleting.aspx`, all that remains is to update the code so that the Delete Selected Products button deletes the checked products using the `DeleteProductsWithTransaction` method in the `ProductsBLL` class.</span></span> <span data-ttu-id="7f1ee-138">Ta metoda dodana w ramach samouczka dotyczącego [zawijania bazy danych](wrapping-database-modifications-within-a-transaction-cs.md) , która akceptuje `List<T>` wartości `ProductID` i usuwa wszystkie odpowiednie `ProductID` w zakresie transakcji.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-138">This method, added in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial, accepts as its input a `List<T>` of `ProductID` values and deletes each corresponding `ProductID` within the scope of a transaction.</span></span>

<span data-ttu-id="7f1ee-139">`DeleteSelectedProducts` przycisku s `Click` obsługi zdarzeń używa obecnie następującej pętli `foreach` do iteracji przez każdy wiersz GridView:</span><span class="sxs-lookup"><span data-stu-id="7f1ee-139">The `DeleteSelectedProducts` Button s `Click` event handler currently uses the following `foreach` loop to iterate through each GridView row:</span></span>

[!code-csharp[Main](batch-deleting-cs/samples/sample2.cs)]

<span data-ttu-id="7f1ee-140">Dla każdego wiersza formant sieci Web CheckBox `ProductSelector` jest wywoływany programowo.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-140">For each row, the `ProductSelector` CheckBox Web control is programmatically referenced.</span></span> <span data-ttu-id="7f1ee-141">Jeśli ta opcja jest zaznaczona, wiersz s `ProductID` jest pobierany z kolekcji `DataKeys` i Właściwość `DeleteResults` etykieta s `Text` zostanie zaktualizowana tak, aby zawierała komunikat informujący o tym, że wiersz został wybrany do usunięcia.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-141">If it is checked, the row s `ProductID` is retrieved from the `DataKeys` collection and the `DeleteResults` Label s `Text` property is updated to include a message indicating that the row was selected for deletion.</span></span>

<span data-ttu-id="7f1ee-142">Powyższy kod nie usuwa żadnych rekordów, ponieważ wywołanie metody `Delete` `ProductsBLL` klasy s jest oznaczone jako komentarz. Czy ta logika usuwania ma zostać zastosowana, kod usunie produkty, ale nie w obrębie operacji niepodzielnej.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-142">The above code does not actually delete any records as the call to the `ProductsBLL` class s `Delete` method is commented out. Were this delete logic to be applied, the code would delete the products but not within an atomic operation.</span></span> <span data-ttu-id="7f1ee-143">Oznacza to, że jeśli pierwsze kilka usunięć w sekwencji zakończyło się pomyślnie, ale późniejsza z nich zakończyło się niepowodzeniem (prawdopodobnie z powodu naruszenia ograniczenia klucza obcego), zostanie zgłoszony wyjątek, ale te produkty już usunięte pozostaną usunięte.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-143">That is, if the first few deletes in the sequence succeeded, but a later one failed (perhaps due to a foreign key constraint violation), an exception would be thrown but those products already deleted would remain deleted.</span></span>

<span data-ttu-id="7f1ee-144">Aby zapewnić niepodzielność, musimy użyć metody `DeleteProductsWithTransaction` `ProductsBLL` Class.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-144">In order to assure atomicity, we need to instead use the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="7f1ee-145">Ponieważ ta metoda akceptuje listę wartości `ProductID`, musimy najpierw skompilować tę listę z siatki, a następnie przekazać ją jako parametr.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-145">Because this method accepts a list of `ProductID` values, we need to first compile this list from the grid and then pass it as a parameter.</span></span> <span data-ttu-id="7f1ee-146">Najpierw tworzymy wystąpienie `List<T>` typu `int`.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-146">We first create an instance of a `List<T>` of type `int`.</span></span> <span data-ttu-id="7f1ee-147">W pętli `foreach` musimy dodać wybrane produkty `ProductID` wartości do tej `List<T>`.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-147">Within the `foreach` loop we need to add the selected products `ProductID` values to this `List<T>`.</span></span> <span data-ttu-id="7f1ee-148">Gdy pętla ta `List<T>` musi zostać przeniesiona do metody `DeleteProductsWithTransaction` `ProductsBLL` Class s.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-148">After the loop this `List<T>` must be passed to the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="7f1ee-149">Zaktualizuj `Click` `DeleteSelectedProducts` przycisk programu obsługi zdarzeń przy użyciu następującego kodu:</span><span class="sxs-lookup"><span data-stu-id="7f1ee-149">Update the `DeleteSelectedProducts` Button s `Click` event handler with the following code:</span></span>

[!code-csharp[Main](batch-deleting-cs/samples/sample3.cs)]

<span data-ttu-id="7f1ee-150">Zaktualizowany kod tworzy `List<T>` typu `int` (`productIDsToDelete`) i wypełnia go wartościami `ProductID` do usunięcia.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-150">The updated code creates a `List<T>` of type `int` (`productIDsToDelete`) and populates it with the `ProductID` values to delete.</span></span> <span data-ttu-id="7f1ee-151">Po pętli `foreach`, jeśli istnieje co najmniej jeden produkt, Metoda `ProductsBLL` klasy s `DeleteProductsWithTransaction` jest wywoływana i przeszedł tę listę.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-151">After the `foreach` loop, if there is at least one product selected, the `ProductsBLL` class s `DeleteProductsWithTransaction` method is called and passed this list.</span></span> <span data-ttu-id="7f1ee-152">Zostanie również wyświetlona etykieta `DeleteResults` i dane przepowiązane z elementem GridView (w taki sposób, że nowo usunięte rekordy nie będą już wyświetlane jako wiersze w siatce).</span><span class="sxs-lookup"><span data-stu-id="7f1ee-152">The `DeleteResults` Label is also displayed and the data rebound to the GridView (so that the newly-deleted records no longer appear as rows in the grid).</span></span>

<span data-ttu-id="7f1ee-153">Rysunek 4 przedstawia widok GridView po wybraniu kilku wierszy do usunięcia.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-153">Figure 4 shows the GridView after a number of rows have been selected for deletion.</span></span> <span data-ttu-id="7f1ee-154">Rysunek 5 pokazuje ekran zaraz po kliknięciu przycisku Usuń wybrane produkty.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-154">Figure 5 shows the screen immediately after the Delete Selected Products button has been clicked.</span></span> <span data-ttu-id="7f1ee-155">Zwróć uwagę, że na rysunku 5 wartości `ProductID` usuniętych rekordów są wyświetlane w etykiecie poniżej widoku GridView i te wiersze nie znajdują się już w widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-155">Note that in Figure 5 the `ProductID` values of the deleted records are displayed in the Label beneath the GridView and those rows are no longer in the GridView.</span></span>

<span data-ttu-id="7f1ee-156">[![zostaną usunięte wybrane produkty](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="7f1ee-156">[![The Selected Products Will Be Deleted](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span></span>

<span data-ttu-id="7f1ee-157">**Ilustracja 4**. wybrane produkty zostaną usunięte (kliknij,[Aby wyświetlić obraz o pełnym rozmiarze](batch-deleting-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="7f1ee-157">**Figure 4**: The Selected Products Will Be Deleted ([Click to view full-size image](batch-deleting-cs/_static/image8.png))</span></span>

<span data-ttu-id="7f1ee-158">[![wartości ProductID usuniętych produktów są wyświetlane poniżej widoku GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="7f1ee-158">[![The Deleted Products ProductID Values are Listed Beneath the GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span></span>

<span data-ttu-id="7f1ee-159">**Rysunek 5**: usunięte produkty `ProductID` wartości są wyświetlane poniżej widoku GridView ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](batch-deleting-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="7f1ee-159">**Figure 5**: The Deleted Products `ProductID` Values are Listed Beneath the GridView ([Click to view full-size image](batch-deleting-cs/_static/image10.png))</span></span>

> [!NOTE]
> <span data-ttu-id="7f1ee-160">Aby przetestować niepodzielną metodę `DeleteProductsWithTransaction`, ręcznie Dodaj wpis dla produktu w tabeli `Order Details`, a następnie spróbuj usunąć ten produkt (razem z innymi).</span><span class="sxs-lookup"><span data-stu-id="7f1ee-160">To test the `DeleteProductsWithTransaction` method s atomicity, manually add an entry for a product in the `Order Details` table and then attempt to delete that product (along with others).</span></span> <span data-ttu-id="7f1ee-161">Podczas próby usunięcia produktu ze skojarzoną kolejnością zostanie wyświetlone naruszenie ograniczenia klucza obcego, ale należy zwrócić uwagę na to, jak zostaną wycofane inne wybrane produkty.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-161">You will receive a foreign key constraint violation when attempting to delete the product with an associated order, but note how the other selected products deletions are rolled back.</span></span>

## <a name="summary"></a><span data-ttu-id="7f1ee-162">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="7f1ee-162">Summary</span></span>

<span data-ttu-id="7f1ee-163">Tworzenie wsadowego usuwania interfejsu obejmuje dodanie widoku GridView z kolumną pól wyboru i kontrolki sieci Web przycisku, która po kliknięciu spowoduje usunięcie wszystkich zaznaczonych wierszy jako pojedynczej operacji niepodzielnej.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-163">Creating a batch deleting interface involves adding a GridView with a column of checkboxes and a Button Web control that, when clicked, will delete all of the selected rows as a single atomic operation.</span></span> <span data-ttu-id="7f1ee-164">W tym samouczku utworzyliśmy takie interfejsy przez zszywania razem pracy wykonanej w dwóch wcześniejszych samouczkach, [dodając kolumnę w widoku GridView](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) i wprowadzając [modyfikacje bazy danych w ramach transakcji](wrapping-database-modifications-within-a-transaction-cs.md).</span><span class="sxs-lookup"><span data-stu-id="7f1ee-164">In this tutorial we built such an interface by piecing together work done in two previous tutorials, [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) and [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md).</span></span> <span data-ttu-id="7f1ee-165">W pierwszym samouczku utworzyliśmy widok GridView z kolumną pól wyboru, a w tym ostatnim zaimplementowano metodę w LOGIKI biznesowej, która w przypadku przekazaną `List<T>` wartości `ProductID`, usunięto je wszystkie w zakresie transakcji.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-165">In the first tutorial we created a GridView with a column of checkboxes and in the latter we implemented a method in the BLL that, when passed a `List<T>` of `ProductID` values, deleted them all within the scope of a transaction.</span></span>

<span data-ttu-id="7f1ee-166">W następnym samouczku utworzysz interfejs do wykonywania operacji wstawiania wsadowego.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-166">In the next tutorial we'll create an interface for performing batch inserts.</span></span>

<span data-ttu-id="7f1ee-167">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="7f1ee-167">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="7f1ee-168">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="7f1ee-168">About the Author</span></span>

<span data-ttu-id="7f1ee-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor siedmiu grup ASP/ASP. NET Books i założyciel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="7f1ee-170">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-170">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="7f1ee-171">Jego Najnowsza książka to [*Sams ASP.NET 2,0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="7f1ee-171">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="7f1ee-172">Można go osiągnąć w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="7f1ee-172">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="7f1ee-173">lub za pośrednictwem swojego blogu, który można znaleźć w [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="7f1ee-173">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="7f1ee-174">Specjalne podziękowania</span><span class="sxs-lookup"><span data-stu-id="7f1ee-174">Special Thanks To</span></span>

<span data-ttu-id="7f1ee-175">Ta seria samouczków została sprawdzona przez wielu przydatnych recenzentów.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-175">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="7f1ee-176">Recenzenci liderzy dla tego samouczka to Hilton Giesenow i Teresa Murphy.</span><span class="sxs-lookup"><span data-stu-id="7f1ee-176">Lead reviewers for this tutorial were Hilton Giesenow and Teresa Murphy.</span></span> <span data-ttu-id="7f1ee-177">Chcesz przeglądać moje nadchodzące artykuły MSDN?</span><span class="sxs-lookup"><span data-stu-id="7f1ee-177">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="7f1ee-178">Jeśli tak, upuść mi linię w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="7f1ee-178">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="7f1ee-179">[Poprzednie](batch-updating-cs.md)
> [dalej](batch-inserting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="7f1ee-179">[Previous](batch-updating-cs.md)
[Next](batch-inserting-cs.md)</span></span>

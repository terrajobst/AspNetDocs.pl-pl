---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-acess-two-pages-datalist-cs
title: Filtrowanie wzorców/szczegółów na dwóch stronach (C#) | Microsoft Docs
author: rick-anderson
description: W tym samouczku pokazano, jak oddzielić Raport główny/szczegółowy na dwóch stronach. Na stronie "Master" jest używana kontrolka wzmacniak do renderowania listy CATEG...
ms.author: riande
ms.date: 10/30/2010
ms.assetid: 68b8c023-92fa-4df6-9563-1764e16e4b04
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-acess-two-pages-datalist-cs
msc.type: authoredcontent
ms.openlocfilehash: 545b24a66476c55aff88ac62d3a6528105fea6c0
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/28/2019
ms.locfileid: "74631473"
---
# <a name="masterdetail-filtering-across-two-pages-c"></a><span data-ttu-id="a805b-104">Filtrowanie rekordu głównego/szczegółów na dwóch stronach (C#)</span><span class="sxs-lookup"><span data-stu-id="a805b-104">Master/Detail Filtering Across Two Pages (C#)</span></span>

<span data-ttu-id="a805b-105">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a805b-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a805b-106">[Pobierz przykładową aplikację](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_34_CS.exe) lub [Pobierz plik PDF](master-detail-filtering-acess-two-pages-datalist-cs/_static/datatutorial34cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a805b-106">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_34_CS.exe) or [Download PDF](master-detail-filtering-acess-two-pages-datalist-cs/_static/datatutorial34cs1.pdf)</span></span>

> <span data-ttu-id="a805b-107">W tym samouczku pokazano, jak oddzielić Raport główny/szczegółowy na dwóch stronach.</span><span class="sxs-lookup"><span data-stu-id="a805b-107">In this tutorial we look at how to separate a master/detail report across two pages.</span></span> <span data-ttu-id="a805b-108">Na stronie "Master" jest używana kontrolka wzmacniak do renderowania listy kategorii, które po kliknięciu powodują przejście użytkownika do strony "Szczegóły", w której dwie kolumny DataList pokazują te produkty należące do wybranej kategorii.</span><span class="sxs-lookup"><span data-stu-id="a805b-108">In the "master" page we use a Repeater control to render a list of categories that, when clicked, will take the user to the "details" page where a two-column DataList shows those products belonging to the selected category.</span></span>

## <a name="introduction"></a><span data-ttu-id="a805b-109">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="a805b-109">Introduction</span></span>

<span data-ttu-id="a805b-110">W [poprzednim samouczku](master-detail-filtering-with-a-dropdownlist-datalist-cs.md) przedstawiono sposób wyświetlania raportów wzorzec/szczegóły na pojedynczej stronie sieci Web przy użyciu kontrolek DropDownList, aby wyświetlić rekordy "Master" i DataList, aby wyświetlić "Szczegóły".</span><span class="sxs-lookup"><span data-stu-id="a805b-110">In the [preceding tutorial](master-detail-filtering-with-a-dropdownlist-datalist-cs.md) we saw how to display master/detail reports in a single web page using DropDownLists to display the "master" records and a DataList to display the "details."</span></span> <span data-ttu-id="a805b-111">Innym typowym wzorcem używanym w raportach master/detail jest posiadanie rekordów głównych na jednej stronie sieci Web i szczegółowych informacji na drugim.</span><span class="sxs-lookup"><span data-stu-id="a805b-111">Another common pattern used for master/detail reports is to have the master records on one web page and the details on another.</span></span> <span data-ttu-id="a805b-112">W samouczku wcześniejsze [/szczegółowe filtrowanie w dwóch stronach](../masterdetail/master-detail-filtering-across-two-pages-cs.md) zostanie sprawdzony ten wzorzec przy użyciu widoku GridView, aby wyświetlić wszystkich dostawców w systemie.</span><span class="sxs-lookup"><span data-stu-id="a805b-112">In the earlier [Master/Detail Filtering Across Two Pages](../masterdetail/master-detail-filtering-across-two-pages-cs.md) tutorial, we examined this pattern using a GridView to display all of the suppliers in the system.</span></span> <span data-ttu-id="a805b-113">Ten GridView zawiera element HyperLinkField, który jest renderowany jako link do drugiej strony, przekazując `SupplierID` w ciągu QueryString.</span><span class="sxs-lookup"><span data-stu-id="a805b-113">This GridView included a HyperLinkField, which rendered as a link to a second page, passing along the `SupplierID` in the querystring.</span></span> <span data-ttu-id="a805b-114">Druga strona użyła widoku GridView, aby wyświetlić te produkty dostarczone przez wybranego dostawcę.</span><span class="sxs-lookup"><span data-stu-id="a805b-114">The second page used a GridView to list those products provided by the selected supplier.</span></span>

<span data-ttu-id="a805b-115">Takie raporty wzorzec/szczegóły dwustronicowy można również wykonywać przy użyciu kontrolek DataList i wzmacniak.</span><span class="sxs-lookup"><span data-stu-id="a805b-115">Such two-page master/detail reports can be accomplished using DataList and Repeater controls as well.</span></span> <span data-ttu-id="a805b-116">Jedyną różnicą jest to, że żadna z elementów DataList i wzmacniak nie zapewnia obsługi formantu HyperLinkField.</span><span class="sxs-lookup"><span data-stu-id="a805b-116">The only difference is that neither the DataList nor the Repeater provides support for the HyperLinkField control.</span></span> <span data-ttu-id="a805b-117">Zamiast tego należy dodać kontrolkę sieci Web hiperlinku lub zakotwiczenie elementu HTML (`<a>`) w `ItemTemplate`formantu.</span><span class="sxs-lookup"><span data-stu-id="a805b-117">Instead, we must add a HyperLink Web control or an anchor HTML element (`<a>`) within the control's `ItemTemplate`.</span></span> <span data-ttu-id="a805b-118">Właściwość `NavigateUrl` hiperłącza lub atrybut `href` zakotwiczenia można następnie dostosować przy użyciu deklaratywnych lub programistycznych metod.</span><span class="sxs-lookup"><span data-stu-id="a805b-118">The HyperLink's `NavigateUrl` property or the anchor's `href` attribute can then be customized using declarative or programmatic approaches.</span></span>

<span data-ttu-id="a805b-119">W tym samouczku zapoznajemy przykład, który wyświetla listę kategorii listy punktowanej na jednej stronie przy użyciu kontrolki wzmacniak.</span><span class="sxs-lookup"><span data-stu-id="a805b-119">In this tutorial we'll explore an example that lists the categories in a bulleted list on one page using a Repeater control.</span></span> <span data-ttu-id="a805b-120">Każdy element listy będzie zawierać nazwę i opis kategorii, z nazwą kategorii wyświetlaną jako link do drugiej strony.</span><span class="sxs-lookup"><span data-stu-id="a805b-120">Each list item will include the category's name and description, with the category name displayed as a link to a second page.</span></span> <span data-ttu-id="a805b-121">Kliknięcie tego linku spowoduje wyróżnienie użytkownika na drugiej stronie, gdzie element DataList będzie pokazywał te produkty należące do wybranej kategorii.</span><span class="sxs-lookup"><span data-stu-id="a805b-121">Clicking on this link will whisk the user to the second page, where a DataList will show those products that belong to the selected category.</span></span>

## <a name="step-1-displaying-the-categories-in-a-bulleted-list"></a><span data-ttu-id="a805b-122">Krok 1. Wyświetlanie kategorii na liście punktowanej</span><span class="sxs-lookup"><span data-stu-id="a805b-122">Step 1: Displaying the Categories in a Bulleted List</span></span>

<span data-ttu-id="a805b-123">Pierwszy krok tworzenia każdego raportu wzorzec/szczegół jest uruchamiany przez wyświetlenie rekordów "Master".</span><span class="sxs-lookup"><span data-stu-id="a805b-123">The first step in creating any master/detail report is to start by displaying the "master" records.</span></span> <span data-ttu-id="a805b-124">W związku z tym pierwsze zadanie ma wyświetlać kategorie na stronie "Master".</span><span class="sxs-lookup"><span data-stu-id="a805b-124">Therefore, our first task is to display the categories in the "master" page.</span></span> <span data-ttu-id="a805b-125">Otwórz stronę `CategoryListMaster.aspx` w folderze `DataListRepeaterFiltering`, Dodaj kontrolkę wzmacniak i z tagu inteligentnego Dodaj nowy element ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a805b-125">Open the `CategoryListMaster.aspx` page in the `DataListRepeaterFiltering` folder, add a Repeater control, and, from the smart tag, opt to add a new ObjectDataSource.</span></span> <span data-ttu-id="a805b-126">Skonfiguruj nowy element ObjectDataSource, aby miał dostęp do jego danych z metody `GetCategories` klasy `CategoriesBLL` (patrz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="a805b-126">Configure the new ObjectDataSource so that it accesses its data from the `CategoriesBLL` class's `GetCategories` method (see Figure 1).</span></span>

<span data-ttu-id="a805b-127">[![skonfigurować element ObjectDataSource do używania metody GetCategories klasy CategoriesBLL](master-detail-filtering-acess-two-pages-datalist-cs/_static/image2.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a805b-127">[![Configure the ObjectDataSource to Use the CategoriesBLL Class's GetCategories Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image2.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image1.png)</span></span>

<span data-ttu-id="a805b-128">**Rysunek 1**. Konfigurowanie elementu ObjectDataSource do używania metody `GetCategories` klasy `CategoriesBLL` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-acess-two-pages-datalist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a805b-128">**Figure 1**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class's `GetCategories` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image3.png))</span></span>

<span data-ttu-id="a805b-129">Następnie zdefiniuj szablony wzmacniania, tak aby wyświetlały nazwę kategorii i opis jako element na liście punktowanej.</span><span class="sxs-lookup"><span data-stu-id="a805b-129">Next, define the Repeater's templates such that it displays each category name and description as an item in a bulleted list.</span></span> <span data-ttu-id="a805b-130">Jeszcze nie martw się o posiadanie łącza do strony szczegółów w poszczególnych kategoriach.</span><span class="sxs-lookup"><span data-stu-id="a805b-130">Let's not yet worry about having each category link to the details page.</span></span> <span data-ttu-id="a805b-131">Poniżej przedstawiono znaczniki deklaratywne dla elementu wzmacniak i ObjectDataSource:</span><span class="sxs-lookup"><span data-stu-id="a805b-131">The following shows the declarative markup for the Repeater and ObjectDataSource:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample1.aspx)]

<span data-ttu-id="a805b-132">Po zakończeniu tego znacznika Poświęć chwilę na wyświetlenie postępu w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="a805b-132">With this markup complete, take a moment to view our progress through a browser.</span></span> <span data-ttu-id="a805b-133">Jak pokazano na rysunku 2, wzmacniak renderuje jako listę punktowaną pokazującą nazwę i opis kategorii.</span><span class="sxs-lookup"><span data-stu-id="a805b-133">As Figure 2 shows, the Repeater renders as a bulleted list showing each category's name and description.</span></span>

<span data-ttu-id="a805b-134">[![każda kategoria jest wyświetlana jako element listy punktowanej](master-detail-filtering-acess-two-pages-datalist-cs/_static/image5.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="a805b-134">[![Each Category is Displayed as a Bulleted List Item](master-detail-filtering-acess-two-pages-datalist-cs/_static/image5.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image4.png)</span></span>

<span data-ttu-id="a805b-135">**Rysunek 2**. Każda kategoria jest wyświetlana jako element listy punktowanej ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](master-detail-filtering-acess-two-pages-datalist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="a805b-135">**Figure 2**: Each Category is Displayed as a Bulleted List Item ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image6.png))</span></span>

## <a name="step-2-turning-the-category-name-into-a-link-to-the-details-page"></a><span data-ttu-id="a805b-136">Krok 2. zmiana nazwy kategorii na link do strony szczegółów</span><span class="sxs-lookup"><span data-stu-id="a805b-136">Step 2: Turning the Category Name into a Link to the Details Page</span></span>

<span data-ttu-id="a805b-137">Aby umożliwić użytkownikowi wyświetlanie informacji o szczegółach dla danej kategorii, należy dodać łącze do każdego elementu listy punktowanej, który po kliknięciu spowoduje przejście użytkownika do drugiej strony (`ProductsForCategoryDetails.aspx`).</span><span class="sxs-lookup"><span data-stu-id="a805b-137">To allow a user to display the "details" information for a given category, we need to add a link to each bulleted list item that, when clicked, will take the user to the second page (`ProductsForCategoryDetails.aspx`).</span></span> <span data-ttu-id="a805b-138">Na drugiej stronie zostaną wyświetlone produkty dla wybranej kategorii przy użyciu elementu DataList.</span><span class="sxs-lookup"><span data-stu-id="a805b-138">This second page will then display the products for the selected category using a DataList.</span></span> <span data-ttu-id="a805b-139">Aby określić kategorię, której łącze zostało kliknięte, musimy przekazywać `CategoryID` klikniętej kategorii do drugiej strony za pomocą pewnego mechanizmu.</span><span class="sxs-lookup"><span data-stu-id="a805b-139">In order to determine the category whose link was clicked, we need to pass the clicked category's `CategoryID` to the second page through some mechanism.</span></span> <span data-ttu-id="a805b-140">Najprostszym, najbardziej prostym sposobem transferu danych skalarnych z jednej strony do innej jest za pośrednictwem ciągu QueryString, który jest opcją używaną w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="a805b-140">The simplest, most straightforward way to transfer scalar data from one page to another is through the querystring, which is the option we'll use in this tutorial.</span></span> <span data-ttu-id="a805b-141">W szczególności strona `ProductsForCategoryDetails.aspx` oczekuje, że wybrana wartość *`categoryID`* zostanie przeniesiona za pomocą pola QueryString o nazwie `CategoryID`.</span><span class="sxs-lookup"><span data-stu-id="a805b-141">In particular, the `ProductsForCategoryDetails.aspx` page will expect the selected *`categoryID`* value to be passed through a querystring field named `CategoryID`.</span></span> <span data-ttu-id="a805b-142">Na przykład, aby wyświetlić produkty dla kategorii napoje, która ma `CategoryID` 1, użytkownik zostanie odwiedzany `ProductsForCategoryDetails.aspx?CategoryID=1`.</span><span class="sxs-lookup"><span data-stu-id="a805b-142">For example, to view the products for the Beverages category, which has a `CategoryID` of 1, a user would visit `ProductsForCategoryDetails.aspx?CategoryID=1`.</span></span>

<span data-ttu-id="a805b-143">Aby utworzyć hiperłącze dla każdego elementu listy punktowanej w Wzmacniake, musimy dodać do `ItemTemplate`formant sieci Web hiperlinków lub element zakotwiczenia HTML (`<a>`).</span><span class="sxs-lookup"><span data-stu-id="a805b-143">To create a hyperlink for each bulleted list item in the Repeater we need to either add a HyperLink Web control or an HTML anchor element (`<a>`) to the `ItemTemplate`.</span></span> <span data-ttu-id="a805b-144">W scenariuszach, w których hiperłącze jest wyświetlane tak samo dla każdego wiersza, każde podejście będzie wystarczające.</span><span class="sxs-lookup"><span data-stu-id="a805b-144">In scenarios where the hyperlink is displayed the same for each row, either approach will suffice.</span></span> <span data-ttu-id="a805b-145">Dla powtarzających się woli użyć elementu zakotwiczenia.</span><span class="sxs-lookup"><span data-stu-id="a805b-145">For Repeaters, I prefer using the anchor element.</span></span> <span data-ttu-id="a805b-146">Aby użyć elementu zakotwiczenia, zaktualizuj ItemTemplateka wzmacniak do:</span><span class="sxs-lookup"><span data-stu-id="a805b-146">To use the anchor element, update the Repeater's ItemTemplate to:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample2.aspx)]

<span data-ttu-id="a805b-147">Należy zauważyć, że `CategoryID` można wstrzyknąć bezpośrednio w atrybucie `href` elementu zakotwiczenia. Jednak aby to zrobić, należy rozdzielić wartość atrybutu `href` ze znakami apostrofów (i zanotować cudzysłowy), ponieważ metoda `Eval` w atrybucie `href` ogranicza swój ciąg (`"CategoryID"`) ze znakami cudzysłowu.</span><span class="sxs-lookup"><span data-stu-id="a805b-147">Note that the `CategoryID` can be injected directly within the anchor element's `href` attribute; however, to do so be certain to delimit the `href` attribute's value with apostrophes (and note quotation marks) since the `Eval` method within the `href` attribute delimits its string (`"CategoryID"`) with quotation marks.</span></span> <span data-ttu-id="a805b-148">Alternatywnie można użyć kontrolki sieci Web hiperlinku:</span><span class="sxs-lookup"><span data-stu-id="a805b-148">Alternatively, a HyperLink Web control can be used instead:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample3.aspx)]

<span data-ttu-id="a805b-149">Zwróć uwagę na sposób, w jaki statyczna część adresu URL — `ProductsForCategoryDetails.aspx?CategoryID` — jest dołączana do wyniku `Eval("CategoryID")` bezpośrednio w składni wiązania danych przy użyciu łączenia ciągów.</span><span class="sxs-lookup"><span data-stu-id="a805b-149">Note how the static portion of the URL — `ProductsForCategoryDetails.aspx?CategoryID` — is appended to the result of `Eval("CategoryID")` directly within the databinding syntax using string concatenation.</span></span>

<span data-ttu-id="a805b-150">Jedną z korzyści z używania kontrolki hiperłącze jest to, że można programowo uzyskać dostęp z programu obsługi zdarzeń `ItemDataBound` przez wzmacniak, jeśli jest to konieczne.</span><span class="sxs-lookup"><span data-stu-id="a805b-150">One benefit of using the HyperLink control is that it can be programmatically accessed from the Repeater's `ItemDataBound` event handler, if needed.</span></span> <span data-ttu-id="a805b-151">Na przykład, możesz chcieć wyświetlić nazwę kategorii jako tekst, a nie jako łącze dla kategorii bez skojarzonych produktów.</span><span class="sxs-lookup"><span data-stu-id="a805b-151">For example, you might want to display the category name as text rather than as a link for categories with no associated products.</span></span> <span data-ttu-id="a805b-152">Takie sprawdzenie może być wykonywane programowo w obsłudze zdarzeń `ItemDataBound`. w przypadku kategorii bez skojarzonych produktów Właściwość `NavigateUrl` hiperłącza może być ustawiona na pusty ciąg, co oznacza, że określona nazwa kategorii jest renderowana jako zwykły tekst (a nie jako link).</span><span class="sxs-lookup"><span data-stu-id="a805b-152">Such a check could be programmatically performed in the `ItemDataBound` event handler; for categories with no associated products, the HyperLink's `NavigateUrl` property could be set to a blank string, thereby resulting in that particular category name rendering as plain text (rather than as a link).</span></span> <span data-ttu-id="a805b-153">Zapoznaj się z artykułem [Formatowanie elementów DataList i wzmacniak w oparciu o dane](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md) , aby uzyskać więcej informacji na temat formatowania zawartości DataList i wzmacniania na podstawie logiki programowej za pośrednictwem programu obsługi zdarzeń `ItemDataBound`.</span><span class="sxs-lookup"><span data-stu-id="a805b-153">Refer back to the [Formatting the DataList and Repeater Based Upon Data](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md) tutorial for more information on formatting the DataList and Repeater's contents based on programmatic logic through the `ItemDataBound` event handler.</span></span>

<span data-ttu-id="a805b-154">Jeśli używasz następujących elementów, możesz skorzystać z metody zakotwiczenia lub kontrolki hiperłącze na stronie.</span><span class="sxs-lookup"><span data-stu-id="a805b-154">If you are following along, feel free to use either the anchor element or HyperLink control approach in your page.</span></span> <span data-ttu-id="a805b-155">Bez względu na to, że podczas wyświetlania strony za pomocą przeglądarki każda nazwa kategorii powinna być renderowana jako link do `ProductsForCategoryDetails.aspx`, przechodząc do odpowiedniej wartości `CategoryID` (patrz rysunek 3).</span><span class="sxs-lookup"><span data-stu-id="a805b-155">Regardless of the approach, when viewing the page through a browser each category name should be rendered as a link to `ProductsForCategoryDetails.aspx`, passing in the applicable `CategoryID` value (see Figure 3).</span></span>

<span data-ttu-id="a805b-156">[![teraz Połącz nazwy kategorii z ProductsForCategoryDetails. aspx](master-detail-filtering-acess-two-pages-datalist-cs/_static/image8.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a805b-156">[![The Category Names Now Link to ProductsForCategoryDetails.aspx](master-detail-filtering-acess-two-pages-datalist-cs/_static/image8.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image7.png)</span></span>

<span data-ttu-id="a805b-157">**Rysunek 3**. Nazwa kategorii teraz Link do `ProductsForCategoryDetails.aspx` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](master-detail-filtering-acess-two-pages-datalist-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="a805b-157">**Figure 3**: The Category Names Now Link to `ProductsForCategoryDetails.aspx` ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image9.png))</span></span>

## <a name="step-3-listing-the-products-that-belong-to-the-selected-category"></a><span data-ttu-id="a805b-158">Krok 3. Wyświetlanie listy produktów należących do wybranej kategorii</span><span class="sxs-lookup"><span data-stu-id="a805b-158">Step 3: Listing the Products that Belong to the Selected Category</span></span>

<span data-ttu-id="a805b-159">Gdy strona `CategoryListMaster.aspx` zostanie ukończona, jesteśmy gotowi do zaimplementowania strony "Szczegóły", `ProductsForCategoryDetails.aspx`.</span><span class="sxs-lookup"><span data-stu-id="a805b-159">With the `CategoryListMaster.aspx` page complete, we're ready to turn our attention to implementing the "details" page, `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="a805b-160">Otwórz Tę stronę, przeciągnij element DataList z przybornika do projektanta i ustaw jego właściwość `ID` na `ProductsInCategory`.</span><span class="sxs-lookup"><span data-stu-id="a805b-160">Open this page, drag a DataList from the Toolbox onto the Designer, and set its `ID` property to `ProductsInCategory`.</span></span> <span data-ttu-id="a805b-161">Następnie z tagu inteligentnego DataList wybierz, aby dodać nowy element ObjectDataSource do strony, nadając mu nazwę `ProductsInCategoryDataSource`.</span><span class="sxs-lookup"><span data-stu-id="a805b-161">Next, from the DataList's smart tag choose to add a new ObjectDataSource to the page, naming it `ProductsInCategoryDataSource`.</span></span> <span data-ttu-id="a805b-162">Skonfiguruj ją tak, aby wywołuje metodę `GetProductsByCategoryID(categoryID)` klasy `ProductsBLL`; Ustaw listę rozwijaną na kartach Wstawianie, aktualizowanie i usuwanie na (brak).</span><span class="sxs-lookup"><span data-stu-id="a805b-162">Configure it such that it calls the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method; set the drop-down lists in the INSERT, UPDATE, and DELETE tabs to (None).</span></span>

<span data-ttu-id="a805b-163">[![skonfigurować element ObjectDataSource do używania metody GetProductsByCategoryID (IDKategorii) klasy ProductsBLL](master-detail-filtering-acess-two-pages-datalist-cs/_static/image11.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="a805b-163">[![Configure the ObjectDataSource to Use the ProductsBLL Class's GetProductsByCategoryID(categoryID) Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image11.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image10.png)</span></span>

<span data-ttu-id="a805b-164">**Rysunek 4**. Konfigurowanie elementu ObjectDataSource do używania metody `GetProductsByCategoryID(categoryID)` `ProductsBLL` klasy ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-acess-two-pages-datalist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="a805b-164">**Figure 4**: Configure the ObjectDataSource to Use the `ProductsBLL` Class's `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image12.png))</span></span>

<span data-ttu-id="a805b-165">Ponieważ metoda `GetProductsByCategoryID(categoryID)` akceptuje parametr wejściowy ( *`categoryID`* ), Kreator wybierania źródła danych oferuje nam możliwość określenia źródła parametru.</span><span class="sxs-lookup"><span data-stu-id="a805b-165">Since the `GetProductsByCategoryID(categoryID)` method accepts an input parameter (*`categoryID`*), the Choose Data Source wizard offers us an opportunity to specify the parameter's source.</span></span> <span data-ttu-id="a805b-166">Ustaw Źródło parametru na QueryString przy użyciu `CategoryID`QueryStringField.</span><span class="sxs-lookup"><span data-stu-id="a805b-166">Set the parameter source to QueryString using the QueryStringField `CategoryID`.</span></span>

<span data-ttu-id="a805b-167">[![użyć IDKategorii pola QueryString jako źródła parametru](master-detail-filtering-acess-two-pages-datalist-cs/_static/image14.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="a805b-167">[![Use the Querystring Field CategoryID as the Parameter's Source](master-detail-filtering-acess-two-pages-datalist-cs/_static/image14.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image13.png)</span></span>

<span data-ttu-id="a805b-168">**Rysunek 5**. Użyj pola QueryString `CategoryID` jako źródła parametru ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](master-detail-filtering-acess-two-pages-datalist-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="a805b-168">**Figure 5**: Use the Querystring Field `CategoryID` as the Parameter's Source ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image15.png))</span></span>

<span data-ttu-id="a805b-169">Jak widać w poprzednich samouczkach, po zakończeniu działania kreatora wybierania źródła danych program Visual Studio automatycznie tworzy `ItemTemplate` dla elementu DataList zawierającego listę poszczególnych nazw i wartości pól danych.</span><span class="sxs-lookup"><span data-stu-id="a805b-169">As we've seen in previous tutorials, after completing the Choose Data Source wizard, Visual Studio automatically creates an `ItemTemplate` for the DataList that lists each data field name and value.</span></span> <span data-ttu-id="a805b-170">Zastąp ten szablon, który zawiera tylko nazwę produktu, dostawcę i cenę.</span><span class="sxs-lookup"><span data-stu-id="a805b-170">Replace this template with one that lists only the product's name, supplier, and price.</span></span> <span data-ttu-id="a805b-171">Ponadto ustaw właściwość `RepeatColumns` DataList na 2.</span><span class="sxs-lookup"><span data-stu-id="a805b-171">Also, set the DataList's `RepeatColumns` property to 2.</span></span> <span data-ttu-id="a805b-172">Po wprowadzeniu tych zmian elementy DataList i znaczniki deklaratywne elementu ObjectDataSource powinny wyglądać podobnie do następujących:</span><span class="sxs-lookup"><span data-stu-id="a805b-172">After these changes, your DataList and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample4.aspx)]

<span data-ttu-id="a805b-173">Aby wyświetlić tę stronę w akcji, Zacznij od strony `CategoryListMaster.aspx`. następnie kliknij link na liście Kategorie listy punktowanej.</span><span class="sxs-lookup"><span data-stu-id="a805b-173">To view this page in action, start from the `CategoryListMaster.aspx` page; next, click on a link in the categories bulleted list.</span></span> <span data-ttu-id="a805b-174">Wykonanie tej czynności spowoduje przejście do `ProductsForCategoryDetails.aspx`, przekazanie `CategoryID` przez ciąg QueryString.</span><span class="sxs-lookup"><span data-stu-id="a805b-174">Doing so will take you to `ProductsForCategoryDetails.aspx`, passing along the `CategoryID` through the querystring.</span></span> <span data-ttu-id="a805b-175">`ProductsInCategoryDataSource` element ObjectDataSource w `ProductsForCategoryDetails.aspx` następnie pobierze tylko te produkty dla określonej kategorii i wyświetli je w elemencie DataList, który renderuje dwa produkty na wiersz.</span><span class="sxs-lookup"><span data-stu-id="a805b-175">The `ProductsInCategoryDataSource` ObjectDataSource in `ProductsForCategoryDetails.aspx` will then get just those products for the specified category and display them in the DataList, which renders two products per row.</span></span> <span data-ttu-id="a805b-176">Rysunek 6 przedstawia zrzut ekranu `ProductsForCategoryDetails.aspx` podczas wyświetlania napojów.</span><span class="sxs-lookup"><span data-stu-id="a805b-176">Figure 6 shows a screenshot of `ProductsForCategoryDetails.aspx` when viewing the Beverages.</span></span>

<span data-ttu-id="a805b-177">[![są wyświetlane napoje, dwa na wiersz](master-detail-filtering-acess-two-pages-datalist-cs/_static/image17.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="a805b-177">[![The Beverages are Displayed, Two per Row](master-detail-filtering-acess-two-pages-datalist-cs/_static/image17.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image16.png)</span></span>

<span data-ttu-id="a805b-178">**Ilustracja 6**. wszystkie napoje są wyświetlane, dwa na wiersz ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-acess-two-pages-datalist-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="a805b-178">**Figure 6**: The Beverages are Displayed, Two per Row ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image18.png))</span></span>

## <a name="step-4-displaying-category-information-on-productsforcategorydetailsaspx"></a><span data-ttu-id="a805b-179">Krok 4. Wyświetlanie informacji o kategorii w ProductsForCategoryDetails. aspx</span><span class="sxs-lookup"><span data-stu-id="a805b-179">Step 4: Displaying Category Information on ProductsForCategoryDetails.aspx</span></span>

<span data-ttu-id="a805b-180">Po kliknięciu przez użytkownika kategorii w `CategoryListMaster.aspx`są one brane pod `ProductsForCategoryDetails.aspx` i pokazują produkty należące do wybranej kategorii.</span><span class="sxs-lookup"><span data-stu-id="a805b-180">When a user clicks on a category in `CategoryListMaster.aspx`, they are taken to `ProductsForCategoryDetails.aspx` and shown the products that belong to the selected category.</span></span> <span data-ttu-id="a805b-181">Jednak w `ProductsForCategoryDetails.aspx` nie ma żadnych wskazówek wizualnych dotyczących wyboru kategorii.</span><span class="sxs-lookup"><span data-stu-id="a805b-181">However, in `ProductsForCategoryDetails.aspx` there are no visual cues as to what category was selected.</span></span> <span data-ttu-id="a805b-182">Użytkownik, który chce klikać napoje, ale przypadkowo kliknął przyprawy, nie ma żadnego wpływu na ich pomyłkę, gdy docierają do `ProductsForCategoryDetails.aspx`.</span><span class="sxs-lookup"><span data-stu-id="a805b-182">A user that meant to click Beverages, but accidentally clicked Condiments, has no way of realizing their mistake once they reach `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="a805b-183">Aby uniknąć tego potencjalnego problemu, można wyświetlić informacje o wybranej kategorii — jej nazwie i opisie — w górnej części strony `ProductsForCategoryDetails.aspx`.</span><span class="sxs-lookup"><span data-stu-id="a805b-183">To alleviate this potential problem, we can display information about the selected category — its name and description — at the top of the `ProductsForCategoryDetails.aspx` page.</span></span>

<span data-ttu-id="a805b-184">Aby to osiągnąć, Dodaj kontrolkę FormView nad formantem wzmacniania w `ProductsForCategoryDetails.aspx`.</span><span class="sxs-lookup"><span data-stu-id="a805b-184">To accomplish this, add a FormView above the Repeater control in `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="a805b-185">Następnie Dodaj nowy element ObjectDataSource do strony z tagu inteligentnego FormView o nazwie `CategoryDataSource` i skonfiguruj go tak, aby korzystał z metody `GetCategoryByCategoryID(categoryID)` klasy `CategoriesBLL`.</span><span class="sxs-lookup"><span data-stu-id="a805b-185">Next, add a new ObjectDataSource to the page from the FormView's smart tag named `CategoryDataSource` and configure it to use the `CategoriesBLL` class's `GetCategoryByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="a805b-186">[![dostęp do informacji o kategorii za pomocą metody GetCategoryByCategoryID (IDKategorii) klasy CategoriesBLL](master-detail-filtering-acess-two-pages-datalist-cs/_static/image20.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="a805b-186">[![Access Information about the Category through the CategoriesBLL Class's GetCategoryByCategoryID(categoryID) Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image20.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image19.png)</span></span>

<span data-ttu-id="a805b-187">**Rysunek 7**. dostęp do informacji o kategorii za pomocą metody `GetCategoryByCategoryID(categoryID)` klasy `CategoriesBLL` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-acess-two-pages-datalist-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="a805b-187">**Figure 7**: Access Information about the Category through the `CategoriesBLL` Class's `GetCategoryByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image21.png))</span></span>

<span data-ttu-id="a805b-188">Podobnie jak w przypadku `ProductsInCategoryDataSource` element ObjectDataSource dodany w kroku 3, Kreator konfiguracji źródła danych `CategoryDataSource`monitu o podanie źródła dla parametru wejściowego metody `GetCategoryByCategoryID(categoryID)`.</span><span class="sxs-lookup"><span data-stu-id="a805b-188">As with the `ProductsInCategoryDataSource` ObjectDataSource added in Step 3, the `CategoryDataSource`'s Configure Data Source wizard prompts us for a source for the `GetCategoryByCategoryID(categoryID)` method's input parameter.</span></span> <span data-ttu-id="a805b-189">Użyj dokładnie tych samych ustawień co poprzednio, ustawiając Źródło parametru na QueryString i wartość QueryStringField na `CategoryID` (zobacz rysunek 5).</span><span class="sxs-lookup"><span data-stu-id="a805b-189">Use the exact same settings as before, setting the parameter source to QueryString and the QueryStringField value to `CategoryID` (refer back to Figure 5).</span></span>

<span data-ttu-id="a805b-190">Po zakończeniu działania kreatora program Visual Studio automatycznie tworzy `ItemTemplate`, `EditItemTemplate`i `InsertItemTemplate` dla widoku FormView.</span><span class="sxs-lookup"><span data-stu-id="a805b-190">After completing the wizard, Visual Studio automatically creates an `ItemTemplate`, `EditItemTemplate`, and `InsertItemTemplate` for the FormView.</span></span> <span data-ttu-id="a805b-191">Ponieważ udostępniamy interfejs tylko do odczytu, możesz usunąć `EditItemTemplate` i `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a805b-191">Since we're providing a read-only interface, feel free to remove the `EditItemTemplate` and `InsertItemTemplate`.</span></span> <span data-ttu-id="a805b-192">Ponadto możesz dostosowywać `ItemTemplate`FormView.</span><span class="sxs-lookup"><span data-stu-id="a805b-192">Also, feel free to customize the FormView's `ItemTemplate`.</span></span> <span data-ttu-id="a805b-193">Po usunięciu zbędnych szablonów i dostosowaniu ItemTemplate, znaczniki deklaratywne FormView i ObjectDataSource powinny wyglądać podobnie do następujących:</span><span class="sxs-lookup"><span data-stu-id="a805b-193">After removing the superfluous templates and customizing the ItemTemplate, your FormView and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample5.aspx)]

<span data-ttu-id="a805b-194">Rysunek 8 przedstawia zrzut ekranu podczas wyświetlania tej strony za pomocą przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="a805b-194">Figure 8 shows a screen shot when viewing this page through a browser.</span></span>

> [!NOTE]
> <span data-ttu-id="a805b-195">Oprócz FormView Dodaliśmy także kontrolkę HyperLink nad FormView, która przeniesie użytkownika z powrotem do listy kategorii (`CategoryListMaster.aspx`).</span><span class="sxs-lookup"><span data-stu-id="a805b-195">In addition to the FormView, I've also added a HyperLink control above the FormView that will take the user back to the list of categories (`CategoryListMaster.aspx`).</span></span> <span data-ttu-id="a805b-196">Możesz bezpłatnie umieścić ten link w innym miejscu lub całkowicie pominąć.</span><span class="sxs-lookup"><span data-stu-id="a805b-196">Feel free to place this link elsewhere or to omit it altogether.</span></span>

<span data-ttu-id="a805b-197">[Informacje o kategorii ![są teraz wyświetlane u góry strony](master-detail-filtering-acess-two-pages-datalist-cs/_static/image23.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="a805b-197">[![Category Information is Now Displayed at the Top of the Page](master-detail-filtering-acess-two-pages-datalist-cs/_static/image23.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image22.png)</span></span>

<span data-ttu-id="a805b-198">**Ilustracja 8**. Informacje o kategorii są teraz wyświetlane w górnej części strony ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](master-detail-filtering-acess-two-pages-datalist-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="a805b-198">**Figure 8**: Category Information is Now Displayed at the Top of the Page ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image24.png))</span></span>

## <a name="step-5-displaying-a-message-if-no-products-belong-to-the-selected-category"></a><span data-ttu-id="a805b-199">Krok 5. wyświetlanie komunikatu w przypadku braku produktów należących do wybranej kategorii</span><span class="sxs-lookup"><span data-stu-id="a805b-199">Step 5: Displaying a Message if No Products Belong to the Selected Category</span></span>

<span data-ttu-id="a805b-200">Na stronie `CategoryListMaster.aspx` są wyświetlane wszystkie kategorie w systemie, niezależnie od tego, czy istnieją powiązane produkty.</span><span class="sxs-lookup"><span data-stu-id="a805b-200">The `CategoryListMaster.aspx` page lists all categories in the system, regardless of whether there are any associated products.</span></span> <span data-ttu-id="a805b-201">Jeśli użytkownik kliknie kategorię bez skojarzonych produktów, element DataList w `ProductsForCategoryDetails.aspx` nie będzie renderowany, ponieważ jego źródło danych nie będzie zawierało żadnych elementów.</span><span class="sxs-lookup"><span data-stu-id="a805b-201">If a user clicks on a category with no associated products, the DataList in `ProductsForCategoryDetails.aspx` will not be rendered, as its data source will not have any items.</span></span> <span data-ttu-id="a805b-202">Jak widać w poprzednich samouczkach, widok GridView zawiera właściwość `EmptyDataText`, której można użyć do określenia wiadomości tekstowej, która ma być wyświetlana w przypadku braku rekordów w źródle danych.</span><span class="sxs-lookup"><span data-stu-id="a805b-202">As we've seen in past tutorials, the GridView provides an `EmptyDataText` property that can be used to specify a text message to display if there are no records in its data source.</span></span> <span data-ttu-id="a805b-203">Niestety, ani element DataList ani wzmacniak nie mają takiej właściwości.</span><span class="sxs-lookup"><span data-stu-id="a805b-203">Unfortunately, neither the DataList nor Repeater has such a property.</span></span>

<span data-ttu-id="a805b-204">Aby wyświetlić komunikat informujący użytkownika, że nie ma pasujących produktów dla wybranej kategorii, musimy dodać kontrolkę etykieta do strony, której Właściwość `Text` ma przypisany komunikat, który ma być wyświetlany w przypadku braku pasujących produktów.</span><span class="sxs-lookup"><span data-stu-id="a805b-204">In order to display a message informing the user that there are no matching products for the selected category, we need to add a Label control to the page whose `Text` property is assigned the message to display in the event that there are no matching products.</span></span> <span data-ttu-id="a805b-205">Następnie musimy programowo ustawić właściwość `Visible` w zależności od tego, czy element DataList zawiera elementy.</span><span class="sxs-lookup"><span data-stu-id="a805b-205">We then need to programmatically set its `Visible` property based on whether or not the DataList contains any items.</span></span>

<span data-ttu-id="a805b-206">Aby to osiągnąć, Zacznij od dodania etykiety poniżej elementu DataList.</span><span class="sxs-lookup"><span data-stu-id="a805b-206">To accomplish this, start by adding a Label beneath the DataList.</span></span> <span data-ttu-id="a805b-207">Ustaw jej Właściwość `ID` na `NoProductsMessage` i jej Właściwość `Text` na "nie ma produktów dla wybranej kategorii..." Następnie musimy programowo ustawić właściwość `Visible` tej etykiety na podstawie tego, czy dane zostały powiązane z `ProductsInCategory` DataList.</span><span class="sxs-lookup"><span data-stu-id="a805b-207">Set its `ID` property to `NoProductsMessage` and its `Text` property to "There are no products for the selected category…" Next, we need to programmatically set this Label's `Visible` property based on whether or not any data was bound to the `ProductsInCategory` DataList.</span></span> <span data-ttu-id="a805b-208">To przypisanie należy wykonać po powiązaniu danych z elementem DataList.</span><span class="sxs-lookup"><span data-stu-id="a805b-208">This assignment must be made after the data has been bound to the DataList.</span></span> <span data-ttu-id="a805b-209">Dla widoku GridView, DetailsView i FormView możemy utworzyć procedurę obsługi zdarzeń dla zdarzenia `DataBound` kontrolki, która jest uruchamiana po zakończeniu wiązania.</span><span class="sxs-lookup"><span data-stu-id="a805b-209">For the GridView, DetailsView, and FormView, we could create an event handler for the control's `DataBound` event, which fires after databinding has completed.</span></span> <span data-ttu-id="a805b-210">Jednak ani element DataList ani wzmacniak nie mają dostępnego zdarzenia `DataBound`.</span><span class="sxs-lookup"><span data-stu-id="a805b-210">However, neither the DataList nor the Repeater has a `DataBound` event available.</span></span>

<span data-ttu-id="a805b-211">W tym konkretnym przykładzie można przypisać właściwość `Visible` etykiety w obsłudze zdarzeń `Page_Load`, ponieważ dane zostaną przypisane do elementu DataList przed zdarzeniem `Load` strony.</span><span class="sxs-lookup"><span data-stu-id="a805b-211">For this particular example we can assign the Label's `Visible` property in the `Page_Load` event handler, since the data will have been assigned to the DataList prior to the page's `Load` event.</span></span> <span data-ttu-id="a805b-212">Jednakże takie podejście nie będzie działać w ogólnym przypadku, ponieważ dane z elementu ObjectDataSource mogą być powiązane z elementem DataList później w cyklu życia strony.</span><span class="sxs-lookup"><span data-stu-id="a805b-212">However, this approach would not work in the general case, as the data from the ObjectDataSource might be bound to the DataList later in the page's lifecycle.</span></span> <span data-ttu-id="a805b-213">Na przykład, jeśli wyświetlane dane są oparte na wartości w innej kontrolce, takiej jak podczas wyświetlania raportu wzorzec/szczegóły przy użyciu DropDownList do przechowywania rekordów "Master", dane mogą nie być ponownie powiązane z formantem sieci Web danych, dopóki `PreRender` etap cyklu życia strony.</span><span class="sxs-lookup"><span data-stu-id="a805b-213">For example, if the displayed data is based upon the value in another control, such as it is when displaying a master/detail report using a DropDownList to hold the "master" records, the data may not rebound to the data Web control until the `PreRender` stage in the page's life cycle.</span></span>

<span data-ttu-id="a805b-214">Jednym z rozwiązań, które będą działały we wszystkich przypadkach, jest przypisanie właściwości `Visible` do `False` w programie obsługi zdarzeń `ItemDataBound` (lub `ItemCreated`) elementu DataList w przypadku powiązania typu elementów `Item` lub `AlternatingItem`.</span><span class="sxs-lookup"><span data-stu-id="a805b-214">One solution which will work for all cases is to assign the `Visible` property to `False` in the DataList's `ItemDataBound` (or `ItemCreated`) event handler when binding an item type of `Item` or `AlternatingItem`.</span></span> <span data-ttu-id="a805b-215">W takim przypadku wiemy, że istnieje co najmniej jeden element danych w źródle danych i w związku z tym można ukryć etykietę `NoProductsMessage`.</span><span class="sxs-lookup"><span data-stu-id="a805b-215">In such a case we know that there is at least one data item in the data source and therefore can hide the `NoProductsMessage` Label.</span></span> <span data-ttu-id="a805b-216">Oprócz tego programu obsługi zdarzeń potrzebujemy również obsługi zdarzeń dla zdarzenia `DataBinding` elementu DataList, w którym zostanie zainicjowana Właściwość `Visible` etykiety do `True`.</span><span class="sxs-lookup"><span data-stu-id="a805b-216">In addition to this event handler, we also need an event handler for the DataList's `DataBinding` event, where we initialize the Label's `Visible` property to `True`.</span></span> <span data-ttu-id="a805b-217">Ponieważ zdarzenie `DataBinding` wyzwalane przed zdarzeniami `ItemDataBound`, właściwość `Visible` etykiety zostanie początkowo ustawiona na `True`; Jeśli jednak istnieją jakieś elementy danych, zostanie ona ustawiona na `False`.</span><span class="sxs-lookup"><span data-stu-id="a805b-217">Since the `DataBinding` event fires before the `ItemDataBound` events, the Label's `Visible` property will initially be set to `True`; if there are any data items, however, it will be set to `False`.</span></span> <span data-ttu-id="a805b-218">Poniższy kod implementuje tę logikę:</span><span class="sxs-lookup"><span data-stu-id="a805b-218">The following code implements this logic:</span></span>

[!code-csharp[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample6.cs)]

<span data-ttu-id="a805b-219">Wszystkie kategorie w bazie danych Northwind są skojarzone z co najmniej jednym wyrobem.</span><span class="sxs-lookup"><span data-stu-id="a805b-219">All of the categories in the Northwind database are associated with one or more products.</span></span> <span data-ttu-id="a805b-220">Aby przetestować tę funkcję, ręcznie dostosowano bazę danych Northwind dla tego samouczka, należy ponownie przypisać wszystkie produkty skojarzone z kategorią produktu (`CategoryID` = 7) do kategorii ryby (`CategoryID` = 8).</span><span class="sxs-lookup"><span data-stu-id="a805b-220">To test this feature, I've manually adjusted the Northwind database for this tutorial, reassigning all products associated with the Produce category (`CategoryID` = 7) to the Seafood category (`CategoryID` = 8).</span></span> <span data-ttu-id="a805b-221">Można to zrobić z poziomu Eksplorator serwera, wybierając pozycję nowe zapytanie i używając następującej instrukcji `UPDATE`:</span><span class="sxs-lookup"><span data-stu-id="a805b-221">This can be accomplished from the Server Explorer by choosing New Query and using the following `UPDATE` statement:</span></span>

[!code-sql[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample7.sql)]

<span data-ttu-id="a805b-222">Po odpowiednio zaktualizuj bazę danych Wróć do strony `CategoryListMaster.aspx` i kliknij link.</span><span class="sxs-lookup"><span data-stu-id="a805b-222">After updating the database accordingly, return to the `CategoryListMaster.aspx` page and click on the Produce link.</span></span> <span data-ttu-id="a805b-223">Ponieważ nie istnieją już żadne produkty należące do kategorii produkcji, zobaczysz, że nie ma żadnych produktów dla wybranej kategorii... " komunikat, jak pokazano na rysunku 9.</span><span class="sxs-lookup"><span data-stu-id="a805b-223">Since there are no longer any products belonging to the Produce category, you should see the "There are no products for the selected category…" message, as shown in Figure 9.</span></span>

<span data-ttu-id="a805b-224">[![komunikat jest wyświetlany, jeśli nie ma żadnych produktów należących do wybranej kategorii](master-detail-filtering-acess-two-pages-datalist-cs/_static/image26.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="a805b-224">[![A Message is Displayed if there are No Products Belonging to the Selected Category](master-detail-filtering-acess-two-pages-datalist-cs/_static/image26.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image25.png)</span></span>

<span data-ttu-id="a805b-225">**Rysunek 9**. komunikat jest wyświetlany, jeśli nie ma żadnych produktów należących do wybranej kategorii ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-acess-two-pages-datalist-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="a805b-225">**Figure 9**: A Message is Displayed if there are No Products Belonging to the Selected Category ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image27.png))</span></span>

## <a name="summary"></a><span data-ttu-id="a805b-226">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="a805b-226">Summary</span></span>

<span data-ttu-id="a805b-227">Raporty master/detail mogą wyświetlać zarówno rekordy główne, jak i szczegółowe na jednej stronie, w wielu witrynach sieci Web, które są rozdzielane na dwie strony internetowe.</span><span class="sxs-lookup"><span data-stu-id="a805b-227">While master/detail reports can display both the master and detail records on a single page, in many websites they are separated out across two web pages.</span></span> <span data-ttu-id="a805b-228">W tym samouczku przedstawiono sposób implementacji takiego raportu wzorzec/szczegóły przez posiadanie kategorii wymienionych na liście punktowanej przy użyciu wzmacniak na stronie sieci Web "Master" i skojarzonych produktów wymienionych na stronie "Szczegóły".</span><span class="sxs-lookup"><span data-stu-id="a805b-228">In this tutorial we looked at how to implement such a master/detail report by having the categories listed in a bulleted list using a Repeater in the "master" web page and the associated products listed in the "details" page.</span></span> <span data-ttu-id="a805b-229">Każdy element listy na nadrzędnej stronie sieci Web zawiera link do strony szczegółów, która została przeniesiona wzdłuż wartości `CategoryID` wiersza.</span><span class="sxs-lookup"><span data-stu-id="a805b-229">Each list item in the master web page contained a link to the details page that passed along the row's `CategoryID` value.</span></span>

<span data-ttu-id="a805b-230">Na stronie szczegółów pobieranie tych produktów dla określonego dostawcy zostało wykonane za pomocą metody `GetProductsByCategoryID(categoryID)` klasy `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="a805b-230">In the details page retrieving those products for the specified supplier was accomplished through the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="a805b-231">Wartość parametru *`categoryID`* została określona deklaratywnie przy użyciu `CategoryID` wartości QueryString jako źródła parametru.</span><span class="sxs-lookup"><span data-stu-id="a805b-231">The *`categoryID`* parameter value was specified declaratively using the `CategoryID` querystring value as the parameter source.</span></span> <span data-ttu-id="a805b-232">Przeglądamy również sposób wyświetlania szczegółów kategorii na stronie szczegółów przy użyciu widoku FormView i sposobu wyświetlania komunikatu w przypadku braku produktów należących do wybranej kategorii.</span><span class="sxs-lookup"><span data-stu-id="a805b-232">We also looked at how to display category details in the details page using a FormView and how to display a message if there were no products belonging to the selected category.</span></span>

<span data-ttu-id="a805b-233">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="a805b-233">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="a805b-234">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="a805b-234">About the Author</span></span>

<span data-ttu-id="a805b-235">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor siedmiu grup ASP/ASP. NET Books i założyciel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="a805b-235">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a805b-236">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="a805b-236">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a805b-237">Jego Najnowsza książka to [*Sams ASP.NET 2,0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="a805b-237">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a805b-238">Można go osiągnąć w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a805b-238">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="a805b-239">lub za pośrednictwem swojego blogu, który można znaleźć w [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="a805b-239">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="a805b-240">Specjalne podziękowania dla...</span><span class="sxs-lookup"><span data-stu-id="a805b-240">Special Thanks To…</span></span>

<span data-ttu-id="a805b-241">Ta seria samouczków została sprawdzona przez wielu przydatnych recenzentów.</span><span class="sxs-lookup"><span data-stu-id="a805b-241">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="a805b-242">Recenzenci liderzy dla tego samouczka to Zack Kowalski i Liz Shulok.</span><span class="sxs-lookup"><span data-stu-id="a805b-242">Lead reviewers for this tutorial were Zack Jones and Liz Shulok.</span></span> <span data-ttu-id="a805b-243">Chcesz przeglądać moje nadchodzące artykuły MSDN?</span><span class="sxs-lookup"><span data-stu-id="a805b-243">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="a805b-244">Jeśli tak, upuść mi linię w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a805b-244">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a805b-245">[Poprzednie](master-detail-filtering-with-a-dropdownlist-datalist-cs.md)
> [dalej](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)</span><span class="sxs-lookup"><span data-stu-id="a805b-245">[Previous](master-detail-filtering-with-a-dropdownlist-datalist-cs.md)
[Next](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)</span></span>

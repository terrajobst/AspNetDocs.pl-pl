---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-with-a-dropdownlist-datalist-cs
title: Filtrowanie rekordu głównego/szczegółów przy użyciu kontrolki DropDownList (C#) | Dokumentacja firmy Microsoft
author: rick-anderson
description: W tym samouczku zobaczymy, jak wyświetlać raporty wzorzec/szczegół w pojedynczej strony sieci web za pomocą kontrolek DROPDOWNLIST do wyświetlania rekordów "master" i kontrolką DataList displ...
ms.author: riande
ms.date: 07/18/2007
ms.assetid: 07fa47ae-e491-4a2f-b265-d342b9ddef46
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-with-a-dropdownlist-datalist-cs
msc.type: authoredcontent
ms.openlocfilehash: bfd6f02fe30f4fe5d82d6f72eba6935e1a776c99
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/06/2019
ms.locfileid: "65134492"
---
# <a name="masterdetail-filtering-with-a-dropdownlist-c"></a><span data-ttu-id="fb79d-103">Filtrowanie rekordu głównego/szczegółów przy użyciu kontrolki DropDownList (C#)</span><span class="sxs-lookup"><span data-stu-id="fb79d-103">Master/Detail Filtering With a DropDownList (C#)</span></span>

<span data-ttu-id="fb79d-104">przez [Bento Scott](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="fb79d-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="fb79d-105">[Pobierz przykładową aplikację](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_33_CS.exe) lub [Pobierz plik PDF](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/datatutorial33cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="fb79d-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_33_CS.exe) or [Download PDF](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/datatutorial33cs1.pdf)</span></span>

> <span data-ttu-id="fb79d-106">W tym samouczku widzimy, jak wyświetlać raporty wzorzec/szczegół w pojedynczej strony sieci web za pomocą kontrolek DROPDOWNLIST do wyświetlenia DataList, aby wyświetlić "szczegóły" i "główną" rekordów.</span><span class="sxs-lookup"><span data-stu-id="fb79d-106">In this tutorial we see how to display master/detail reports in a single web page using DropDownLists to display the "master" records and a DataList to display the "details".</span></span>

## <a name="introduction"></a><span data-ttu-id="fb79d-107">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="fb79d-107">Introduction</span></span>

<span data-ttu-id="fb79d-108">Raportu wzorzec/szczegół pierwszego utworzenia korzystający z kontrolki GridView we wcześniejszych przykładach [wzorzec/szczegół filtrowanie przy użyciu kontrolki DropDownList](../masterdetail/master-detail-filtering-with-a-dropdownlist-cs.md) samouczek, rozpoczyna się poprzez wyświetlenie niektórych zestawu rekordów "główną".</span><span class="sxs-lookup"><span data-stu-id="fb79d-108">The master/detail report, which we first created using a GridView in the earlier [Master/Detail Filtering With a DropDownList](../masterdetail/master-detail-filtering-with-a-dropdownlist-cs.md) tutorial, begins by showing some set of "master" records.</span></span> <span data-ttu-id="fb79d-109">Użytkownika można następnie przejść do jednego z rekordów wzorca ten sposób wyświetlania tego rekordu głównego "szczegółowych informacji."</span><span class="sxs-lookup"><span data-stu-id="fb79d-109">The user can then drill down into one of the master records, thereby viewing that master record's "details."</span></span> <span data-ttu-id="fb79d-110">Wzorzec/szczegół raporty są idealnym wyborem dla wizualizacji relacji jeden do wielu i wyświetlanie szczegółowych informacji z szczególnie "szerokiego" tabel (te, które mają wiele kolumn).</span><span class="sxs-lookup"><span data-stu-id="fb79d-110">Master/detail reports are an ideal choice for visualizing one-to-many relationships and for displaying detailed information from particularly "wide" tables (ones that have a lot of columns).</span></span> <span data-ttu-id="fb79d-111">Po rozważyliśmy, jak wdrożyć raporty wzorzec/szczegół za pomocą kontrolki GridView i DetailsView w poprzednich samouczkach.</span><span class="sxs-lookup"><span data-stu-id="fb79d-111">We've explored how to implement master/detail reports using the GridView and DetailsView controls in previous tutorials.</span></span> <span data-ttu-id="fb79d-112">W tym samouczku i kolejne dwa firma Microsoft będzie reexamine te pojęcia, ale skoncentrować się na za pomocą kontrolek DataList i Repeater kontroluje zamiast tego.</span><span class="sxs-lookup"><span data-stu-id="fb79d-112">In this tutorial and the next two, we'll reexamine these concepts, but focus on using DataList and Repeater controls instead.</span></span>

<span data-ttu-id="fb79d-113">W tym samouczku Zapoznamy się przy użyciu kontrolki DropDownList zawiera rekordy "główną", za pomocą wyświetlanych w kontrolkach DataList rekordów "szczegóły".</span><span class="sxs-lookup"><span data-stu-id="fb79d-113">In this tutorial, we'll look at using a DropDownList to contain the "master" records, with the "details" records displayed in a DataList.</span></span>

## <a name="step-1-adding-the-masterdetail-tutorial-web-pages"></a><span data-ttu-id="fb79d-114">Krok 1. Dodawanie stron sieci Web z samouczka wzorzec/szczegół</span><span class="sxs-lookup"><span data-stu-id="fb79d-114">Step 1: Adding the Master/Detail Tutorial Web Pages</span></span>

<span data-ttu-id="fb79d-115">Zanim zaczniemy, w tym samouczku, najpierw Spójrzmy chwilę, aby dodać folder i stron ASP.NET, który należy do tego samouczka i kolejne dwa rozwiązywania problemów związanych z raportami wzorzec/szczegół za pomocą kontrolek DataList i Repeater.</span><span class="sxs-lookup"><span data-stu-id="fb79d-115">Before we start this tutorial, let's first take a moment to add the folder and ASP.NET pages we'll need for this tutorial and the next two dealing with master/detail reports using the DataList and Repeater controls.</span></span> <span data-ttu-id="fb79d-116">Rozpocznij od utworzenia nowego folderu w projekcie o nazwie `DataListRepeaterFiltering`.</span><span class="sxs-lookup"><span data-stu-id="fb79d-116">Start by creating a new folder in the project named `DataListRepeaterFiltering`.</span></span> <span data-ttu-id="fb79d-117">Następnie dodaj następujące pięć strony ASP.NET, w tym folderze każdego z nich jest skonfigurowany do używania strony wzorcowej `Site.master`:</span><span class="sxs-lookup"><span data-stu-id="fb79d-117">Next, add the following five ASP.NET pages to this folder, having all of them configured to use the master page `Site.master`:</span></span>

- `Default.aspx`
- `FilterByDropDownList.aspx`
- `CategoryListMaster.aspx`
- `ProductsForCategoryDetails.aspx`
- `CategoriesAndProducts.aspx`

![Utwórz DataListRepeaterFiltering Folder i dodawanie stron samouczek platformy ASP.NET](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image1.png)

<span data-ttu-id="fb79d-119">**Rysunek 1**: Utwórz `DataListRepeaterFiltering` Folder i dodawanie stron samouczek platformy ASP.NET</span><span class="sxs-lookup"><span data-stu-id="fb79d-119">**Figure 1**: Create a `DataListRepeaterFiltering` Folder and Add the Tutorial ASP.NET Pages</span></span>

<span data-ttu-id="fb79d-120">Następnie otwórz `Default.aspx` strony, a następnie przeciągnij `SectionLevelTutorialListing.ascx` kontrolki użytkownika od `UserControls` folder na powierzchnię projektu.</span><span class="sxs-lookup"><span data-stu-id="fb79d-120">Next, open the `Default.aspx` page and drag the `SectionLevelTutorialListing.ascx` User Control from the `UserControls` folder onto the Design surface.</span></span> <span data-ttu-id="fb79d-121">Ten formant użytkownika, które utworzyliśmy w [strony wzorcowe i nawigacja w witrynie](../introduction/master-pages-and-site-navigation-cs.md) samouczek, wylicza mapy witryny i wyświetla samouczków z bieżącej sekcji na liście punktowanej.</span><span class="sxs-lookup"><span data-stu-id="fb79d-121">This User Control, which we created in the [Master Pages and Site Navigation](../introduction/master-pages-and-site-navigation-cs.md) tutorial, enumerates the site map and displays the tutorials from the current section in a bulleted list.</span></span>

<span data-ttu-id="fb79d-122">[![Dodaj formant użytkownika SectionLevelTutorialListing.ascx na Default.aspx](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image3.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="fb79d-122">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image3.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image2.png)</span></span>

<span data-ttu-id="fb79d-123">**Rysunek 2**: Dodaj `SectionLevelTutorialListing.ascx` kontrolki użytkownika do `Default.aspx` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="fb79d-123">**Figure 2**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image4.png))</span></span>

<span data-ttu-id="fb79d-124">W celu wyświetlania listy punktowanej samouczki wzorzec/szczegół, firma Microsoft będzie tworzony, należy dodać je do mapy witryny.</span><span class="sxs-lookup"><span data-stu-id="fb79d-124">In order to have the bulleted list display the master/detail tutorials we'll be creating, we need to add them to the site map.</span></span> <span data-ttu-id="fb79d-125">Otwórz `Web.sitemap` pliku i Dodaj następujący kod po znaczników węzeł mapy witryny "Wyświetlanie danych za pomocą kontrolek DataList i Repeater":</span><span class="sxs-lookup"><span data-stu-id="fb79d-125">Open the `Web.sitemap` file and add the following markup after the "Displaying Data with the DataList and Repeater" site map node markup:</span></span>

[!code-xml[Main](master-detail-filtering-with-a-dropdownlist-datalist-cs/samples/sample1.xml)]

![Aktualizacja mapy witryny, aby uwzględnić nowe strony ASP.NET](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image5.png)

<span data-ttu-id="fb79d-127">**Rysunek 3**: Aktualizacja mapy witryny, aby uwzględnić nowe strony ASP.NET</span><span class="sxs-lookup"><span data-stu-id="fb79d-127">**Figure 3**: Update the Site Map to Include the New ASP.NET Pages</span></span>

## <a name="step-2-displaying-the-categories-in-a-dropdownlist"></a><span data-ttu-id="fb79d-128">Krok 2. Wyświetlanie kategorii w kontrolki DropDownList</span><span class="sxs-lookup"><span data-stu-id="fb79d-128">Step 2: Displaying the Categories in a DropDownList</span></span>

<span data-ttu-id="fb79d-129">Raport wzorzec/szczegół spowoduje wyświetlenie listy kategorii z kontrolki DropDownList, za pomocą elementu wybranej listy produktów wyświetlane dalej na dół strony w kontrolkach DataList.</span><span class="sxs-lookup"><span data-stu-id="fb79d-129">Our master/detail report will list the categories in a DropDownList, with the selected list item's products displayed further down in the page in a DataList.</span></span> <span data-ttu-id="fb79d-130">Pierwsze zadanie w przód od nas, następnie jest kategorie wyświetlane w kontrolki DropDownList.</span><span class="sxs-lookup"><span data-stu-id="fb79d-130">The first task ahead of us, then, is to have the categories displayed in a DropDownList.</span></span> <span data-ttu-id="fb79d-131">Zacznij od otwarcia `FilterByDropDownList.aspx` stronie `DataListRepeaterFiltering` folder i przeciągnij kontrolki DropDownList z przybornika do projektanta strony.</span><span class="sxs-lookup"><span data-stu-id="fb79d-131">Start by opening the `FilterByDropDownList.aspx` page in the `DataListRepeaterFiltering` folder and drag a DropDownList from the Toolbox onto the page's designer.</span></span> <span data-ttu-id="fb79d-132">Następnym etapem jest skonfigurowanie DropDownList `ID` właściwość `Categories`.</span><span class="sxs-lookup"><span data-stu-id="fb79d-132">Next, set the DropDownList's `ID` property to `Categories`.</span></span> <span data-ttu-id="fb79d-133">Kliknij łącze Wybierz źródło danych z kontrolki DropDownList tagów inteligentnych i utworzyć nowe kontrolki ObjectDataSource, o nazwie `CategoriesDataSource`.</span><span class="sxs-lookup"><span data-stu-id="fb79d-133">Click on the Choose Data Source link from the DropDownList's smart tag and create a new ObjectDataSource named `CategoriesDataSource`.</span></span>

<span data-ttu-id="fb79d-134">[![Dodawanie nowego elementu ObjectDataSource, o nazwie CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image7.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="fb79d-134">[![Add a New ObjectDataSource Named CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image7.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image6.png)</span></span>

<span data-ttu-id="fb79d-135">**Rysunek 4**: Dodaj nazwę nowej kontrolki ObjectDataSource `CategoriesDataSource` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="fb79d-135">**Figure 4**: Add a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image8.png))</span></span>

<span data-ttu-id="fb79d-136">Konfigurowanie nowej kontrolki ObjectDataSource w taki sposób, że wywołuje `CategoriesBLL` klasy `GetCategories()` metody.</span><span class="sxs-lookup"><span data-stu-id="fb79d-136">Configure the new ObjectDataSource such that it invokes the `CategoriesBLL` class's `GetCategories()` method.</span></span> <span data-ttu-id="fb79d-137">Po skonfigurowaniu ObjectDataSource musimy nadal określić które pole źródła danych powinny być wyświetlane w metody DropDownList i jedną powinna być skojarzona jako wartość dla każdego elementu listy.</span><span class="sxs-lookup"><span data-stu-id="fb79d-137">After configuring the ObjectDataSource we still need to specify what data source field should be displayed in the DropDownList and which one should be associated as the value for each list item.</span></span> <span data-ttu-id="fb79d-138">Masz `CategoryName` pola jako ekran i `CategoryID` jako wartość dla każdego elementu listy.</span><span class="sxs-lookup"><span data-stu-id="fb79d-138">Have the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>

<span data-ttu-id="fb79d-139">[![Masz wyświetlana lista DropDownList na pole CategoryName i użyj CategoryID jako wartość](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image10.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="fb79d-139">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image10.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image9.png)</span></span>

<span data-ttu-id="fb79d-140">**Rysunek 5**: Ma ekran DropDownList `CategoryName` pola i użyj `CategoryID` jako wartość ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="fb79d-140">**Figure 5**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image11.png))</span></span>

<span data-ttu-id="fb79d-141">W tym momencie mamy wypełniony rekordy z kontrolki DropDownList `Categories` tabeli (wszystkie wykonywane w ciągu około sześciu sekund).</span><span class="sxs-lookup"><span data-stu-id="fb79d-141">At this point we have a DropDownList control that's populated with the records from the `Categories` table (all accomplished in about six seconds).</span></span> <span data-ttu-id="fb79d-142">Rysunek 6. pokazuje nasz postęp tej pory, podczas wyświetlania za pośrednictwem przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="fb79d-142">Figure 6 shows our progress thus far when viewed through a browser.</span></span>

<span data-ttu-id="fb79d-143">[![Menu rozwijane zawiera listę bieżących kategorii](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image13.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="fb79d-143">[![A Drop-Down Lists the Current Categories](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image13.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image12.png)</span></span>

<span data-ttu-id="fb79d-144">**Rysunek 6**: Wyświetla listę rozwijaną listę bieżących kategorii ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="fb79d-144">**Figure 6**: A Drop-Down Lists the Current Categories ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image14.png))</span></span>

## <a name="step-2-adding-the-products-datalist"></a><span data-ttu-id="fb79d-145">Krok 2. Dodawanie kontrolki DataList produktów</span><span class="sxs-lookup"><span data-stu-id="fb79d-145">Step 2: Adding the Products DataList</span></span>

<span data-ttu-id="fb79d-146">Ostatnim krokiem w naszego raportu wzorzec/szczegół jest aby wyświetlić listę produktów skojarzonych z wybranej kategorii.</span><span class="sxs-lookup"><span data-stu-id="fb79d-146">The last step in our master/detail report is to list the products associated with the selected category.</span></span> <span data-ttu-id="fb79d-147">W tym celu na stronie Dodaj kontrolką DataList i utworzyć nowe kontrolki ObjectDataSource, o nazwie `ProductsByCategoryDataSource`.</span><span class="sxs-lookup"><span data-stu-id="fb79d-147">To accomplish this, add a DataList to the page and create a new ObjectDataSource named `ProductsByCategoryDataSource`.</span></span> <span data-ttu-id="fb79d-148">Ma `ProductsByCategoryDataSource` kontroli pobierania danych z `ProductsBLL` klasy `GetProductsByCategoryID(categoryID)` metody.</span><span class="sxs-lookup"><span data-stu-id="fb79d-148">Have the `ProductsByCategoryDataSource` control retrieve its data from the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="fb79d-149">Ponieważ ten raport wzorzec/szczegół jest tylko do odczytu, wybierz opcję (Brak) na kartach INSERT, UPDATE i DELETE.</span><span class="sxs-lookup"><span data-stu-id="fb79d-149">Since this master/detail report is read-only, choose the (None) option in the INSERT, UPDATE, and DELETE tabs.</span></span>

<span data-ttu-id="fb79d-150">[![Wybierz metodę GetProductsByCategoryID(categoryID)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image16.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="fb79d-150">[![Select the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image16.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image15.png)</span></span>

<span data-ttu-id="fb79d-151">**Rysunek 7**: Wybierz `GetProductsByCategoryID(categoryID)` — metoda ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="fb79d-151">**Figure 7**: Select the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image17.png))</span></span>

<span data-ttu-id="fb79d-152">Po kliknięciu przycisku Dalej, Kreator ObjectDataSource nam monituje o podanie źródła wartość `GetProductsByCategoryID(categoryID)` metody *`categoryID`* parametru.</span><span class="sxs-lookup"><span data-stu-id="fb79d-152">After clicking Next, the ObjectDataSource wizard prompts us for the source of the value for the `GetProductsByCategoryID(categoryID)` method's *`categoryID`* parameter.</span></span> <span data-ttu-id="fb79d-153">Aby użyć wartości wybranych `categories` elementu DropDownList Ustaw źródło parametru do kontroli i ControlID do `Categories`.</span><span class="sxs-lookup"><span data-stu-id="fb79d-153">To use the value of the selected `categories` DropDownList item set the Parameter source to Control and the ControlID to `Categories`.</span></span>

<span data-ttu-id="fb79d-154">[![Ustaw categoryID parametru na wartość DropDownList kategorii](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image19.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="fb79d-154">[![Set the categoryID Parameter to the Value of the Categories DropDownList](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image19.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image18.png)</span></span>

<span data-ttu-id="fb79d-155">**Rysunek 8**: Ustaw *`categoryID`* parametru na wartość `Categories` DropDownList ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="fb79d-155">**Figure 8**: Set the *`categoryID`* Parameter to the Value of the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image20.png))</span></span>

<span data-ttu-id="fb79d-156">Po ukończeniu pracy kreatora Konfigurowanie źródła danych, program Visual Studio automatycznie wygeneruje `ItemTemplate` dla DataList, który wyświetla nazwę i wartość każdego pola danych.</span><span class="sxs-lookup"><span data-stu-id="fb79d-156">Upon completing the Configure Data Source wizard, Visual Studio will automatically generate an `ItemTemplate` for the DataList that displays the name and value of each data field.</span></span> <span data-ttu-id="fb79d-157">Możemy poprawić DataList użyć zamiast tego `ItemTemplate` wyświetlającą tylko nazwę produktu, kategorii, dostawca, ilość na jednostkę, a cena wraz z `SeparatorTemplate` , wprowadza `<hr>` element między poszczególne elementy.</span><span class="sxs-lookup"><span data-stu-id="fb79d-157">Let's enhance the DataList to instead use an `ItemTemplate` that displays just the product's name, category, supplier, quantity per unit, and price along with a `SeparatorTemplate` that injects an `<hr>` element between each item.</span></span> <span data-ttu-id="fb79d-158">Zamierzam używać `ItemTemplate` z przykładu w [wyświetlanie danych za pomocą kontrolek DataList i Repeater](../displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls-cs.md) samouczka, ale możesz użyć dowolnego oznaczenia szablonu, możesz znaleźć najbardziej atrakcyjnego.</span><span class="sxs-lookup"><span data-stu-id="fb79d-158">I'm going to use the `ItemTemplate` from an example in the [Displaying Data with the DataList and Repeater Controls](../displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls-cs.md) tutorial, but feel free to use whatever template markup you find most visually appealing.</span></span>

<span data-ttu-id="fb79d-159">Po wprowadzeniu tych zmian, listy DataList i jego ObjectDataSource znaczników powinien wyglądać podobnie do następującego:</span><span class="sxs-lookup"><span data-stu-id="fb79d-159">After making these changes, your DataList and its ObjectDataSource's markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-datalist-cs/samples/sample2.aspx)]

<span data-ttu-id="fb79d-160">Poświęć chwilę, aby wyewidencjonować postępach w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="fb79d-160">Take a moment to check out our progress in a browser.</span></span> <span data-ttu-id="fb79d-161">Po raz pierwszy, odwiedzając stronę, tych produktów należących do wybranej kategorii (Beverages) są wyświetlane (jak pokazano na rysunku 9), ale zmiana metody DropDownList nie powoduje aktualizacji danych.</span><span class="sxs-lookup"><span data-stu-id="fb79d-161">When first visiting the page, those products belonging to the selected category (Beverages) are displayed (as shown in Figure 9), but changing the DropDownList doesn't update the data.</span></span> <span data-ttu-id="fb79d-162">Jest to spowodowane ogłaszania zwrotnego musi nastąpić DataList do zaktualizowania.</span><span class="sxs-lookup"><span data-stu-id="fb79d-162">This is because a postback must occur for the DataList to update.</span></span> <span data-ttu-id="fb79d-163">W tym firma Microsoft może albo ustawić DropDownList `AutoPostBack` właściwości `true` lub dodać kontrolkę przycisku w sieci Web do strony.</span><span class="sxs-lookup"><span data-stu-id="fb79d-163">To accomplish this we can either set the DropDownList's `AutoPostBack` property to `true` or add a Button Web control to the page.</span></span> <span data-ttu-id="fb79d-164">W tym samouczku załączania mogę ustawić DropDownList `AutoPostBack` właściwość `true`.</span><span class="sxs-lookup"><span data-stu-id="fb79d-164">For this tutorial, I've opted to set the DropDownList's `AutoPostBack` property to `true`.</span></span>

<span data-ttu-id="fb79d-165">Rysunki 9 i 10 ilustrują raportu wzorzec/szczegół w działaniu.</span><span class="sxs-lookup"><span data-stu-id="fb79d-165">Figures 9 and 10 illustrate the master/detail report in action.</span></span>

<span data-ttu-id="fb79d-166">[![Po pierwsze, odwiedzając stronę, są wyświetlane produkty spożywczy](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image22.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="fb79d-166">[![When First Visiting the Page, the Beverage Products are Displayed](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image22.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image21.png)</span></span>

<span data-ttu-id="fb79d-167">**Rysunek 9**: Po pierwsze, odwiedzając stronę, są wyświetlane produkty spożywczy ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="fb79d-167">**Figure 9**: When First Visiting the Page, the Beverage Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image23.png))</span></span>

<span data-ttu-id="fb79d-168">[![Zaznaczenie nowego produktu (produkty) automatycznie powoduje odświeżenie strony, aktualizowanie kontrolki DataList](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image25.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="fb79d-168">[![Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the DataList](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image25.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image24.png)</span></span>

<span data-ttu-id="fb79d-169">**Na rysunku nr 10**: Zaznaczenie nowego produktu (produkty) automatycznie powoduje odświeżenie strony, aktualizowanie kontrolki DataList ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="fb79d-169">**Figure 10**: Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the DataList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image26.png))</span></span>

## <a name="adding-a----choose-a-category----list-item"></a><span data-ttu-id="fb79d-170">Dodawanie elementu listy "— Wybierz kategorię--"</span><span class="sxs-lookup"><span data-stu-id="fb79d-170">Adding a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="fb79d-171">Podczas odwiedzania najpierw `FilterByDropDownList.aspx` stronie kategorii pierwszego elementu listy przez kontrolki DropDownList (Beverages) jest zaznaczona domyślnie, przedstawiający produktów spożywczy w elemencie DataList.</span><span class="sxs-lookup"><span data-stu-id="fb79d-171">When first visiting the `FilterByDropDownList.aspx` page the categories DropDownList's first list item (Beverages) is selected by default, showing the beverage products in the DataList.</span></span> <span data-ttu-id="fb79d-172">W *wzorzec/szczegół filtrowanie przy użyciu kontrolki DropDownList* samouczek dodaliśmy opcję "--Wybierz kategorię--" do metody DropDownList została zaznaczona domyślnie, a następnie po wybraniu wyświetlane *wszystkich* programu produkty w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="fb79d-172">In the *Master/Detail Filtering With a DropDownList* tutorial we added a "-- Choose a Category --" option to the DropDownList that was selected by default and, when selected, displayed *all* of the products in the database.</span></span> <span data-ttu-id="fb79d-173">Takie podejście był zarządzany zawierającą listę produktów w GridView, ponieważ każdy wiersz produktu zajmował niewielkiej powierzchnię ekranu.</span><span class="sxs-lookup"><span data-stu-id="fb79d-173">Such an approach was manageable when listing the products in a GridView, as each product row took up a small amount of screen real estate.</span></span> <span data-ttu-id="fb79d-174">Za pomocą kontrolek DataList jednak informacji każdego produktu zużywa dużo większe fragment ekranu.</span><span class="sxs-lookup"><span data-stu-id="fb79d-174">With the DataList, however, each product's information consumes a much larger chunk of the screen.</span></span> <span data-ttu-id="fb79d-175">Nadal teraz dodać opcji "--Wybierz kategorię —" jest domyślnie zaznaczone, a zamiast go Pokaż wszystkie produkty po wybraniu Skonfigurujmy ją tak, aby pokazywał żadnych produktów.</span><span class="sxs-lookup"><span data-stu-id="fb79d-175">Let's still add a "-- Choose a Category --" option and have it selected by default, but instead of having it show all products when selected, let's configure it so that it shows no products.</span></span>

<span data-ttu-id="fb79d-176">Aby dodać nowy element listy do metody DropDownList, przejdź do okna właściwości, a następnie kliknąć wielokropek w `Items` właściwości.</span><span class="sxs-lookup"><span data-stu-id="fb79d-176">To add a new list item to the DropDownList, go to the Properties window and click on the ellipses in the `Items` property.</span></span> <span data-ttu-id="fb79d-177">Dodaj nowy element listy z `Text` "— Wybierz kategorię--" i `Value` `0`.</span><span class="sxs-lookup"><span data-stu-id="fb79d-177">Add a new list item with the `Text` "-- Choose a Category --" and the `Value` `0`.</span></span>

![Dodaj](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image27.png)

<span data-ttu-id="fb79d-179">**Rysunek 11**: Dodawanie elementu listy "— Wybierz kategorię--"</span><span class="sxs-lookup"><span data-stu-id="fb79d-179">**Figure 11**: Add a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="fb79d-180">Alternatywnie można dodać elementu listy, dodając następujący kod do metody DropDownList:</span><span class="sxs-lookup"><span data-stu-id="fb79d-180">Alternatively, you can add the list item by adding the following markup to the DropDownList:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-datalist-cs/samples/sample3.aspx)]

<span data-ttu-id="fb79d-181">Ponadto musimy kontrolki DropDownList `AppendDataBoundItems` do `true` ponieważ jeśli jest równa `false` (ustawienie domyślne), w przypadku kategorie są powiązane z metody DropDownList z kontrolki ObjectDataSource zostanie zastąpiona się wszystkie listy dodane ręcznie elementy.</span><span class="sxs-lookup"><span data-stu-id="fb79d-181">Additionally, we need to set the DropDownList control's `AppendDataBoundItems` to `true` because if it's set to `false` (the default), when the categories are bound to the DropDownList from the ObjectDataSource they'll overwrite any manually-added list items.</span></span>

![Ustaw właściwość AppendDataBoundItems na wartość True](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image28.png)

<span data-ttu-id="fb79d-183">**Rysunek 12**: Ustaw `AppendDataBoundItems` właściwości na wartość True</span><span class="sxs-lookup"><span data-stu-id="fb79d-183">**Figure 12**: Set the `AppendDataBoundItems` Property to True</span></span>

<span data-ttu-id="fb79d-184">Przyczyna została wybrana wartość `0` dla listy "— Wybierz kategorię--" elementu jest, ponieważ nie ma żadnych kategorii w systemie o wartości `0`, dlatego zostaną zwrócone żadne rekordy nie produktu po wybraniu elementu listy "— Wybierz kategorię--".</span><span class="sxs-lookup"><span data-stu-id="fb79d-184">The reason we chose the value `0` for the "-- Choose a Category --" list item is because there are no categories in the system with a value of `0`, hence no product records will be returned when the "-- Choose a Category --" list item is selected.</span></span> <span data-ttu-id="fb79d-185">Można to potwierdzić, Poświęć chwilę, aby odwiedzić stronę za pośrednictwem przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="fb79d-185">To confirm this, take a moment to visit the page through a browser.</span></span> <span data-ttu-id="fb79d-186">Tak jak pokazano rysunek 13, gdy początkowo wyświetlanie strony elementu listy "— Wybierz kategorię--" jest zaznaczone, a produkty nie są wyświetlane.</span><span class="sxs-lookup"><span data-stu-id="fb79d-186">As Figure 13 shows, when initially viewing the page the "-- Choose a Category --" list item is selected and no products are displayed.</span></span>

<span data-ttu-id="fb79d-187">[![Gdy](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image30.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="fb79d-187">[![When the](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image30.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image29.png)</span></span>

<span data-ttu-id="fb79d-188">**Rysunek 13**: Po wybraniu elementu listy "— Wybierz kategorię--" produkty nie są wyświetlane ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="fb79d-188">**Figure 13**: When the "-- Choose a Category --" List Item is Selected, No Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image31.png))</span></span>

<span data-ttu-id="fb79d-189">Jeśli wolisz będzie wyświetlane *wszystkich* produktów po wybraniu opcji "--Wybierz kategorię —" Użyj wartości `-1` zamiast tego.</span><span class="sxs-lookup"><span data-stu-id="fb79d-189">If you'd rather display *all* of the products when the "-- Choose a Category --" option is selected, use a value of `-1` instead.</span></span> <span data-ttu-id="fb79d-190">Uważni czytnik będzie przypominać tej kopii w *wzorzec/szczegół filtrowanie przy użyciu kontrolki DropDownList* samouczek Zaktualizowaliśmy `ProductsBLL` klasy `GetProductsByCategoryID(categoryID)` metody, aby Jeśli *`categoryID`* wartość `-1` przekazaną produktu wszystkie rekordy zostały zwrócone.</span><span class="sxs-lookup"><span data-stu-id="fb79d-190">The astute reader will recall that back in the *Master/Detail Filtering With a DropDownList* tutorial we updated the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method so that if a *`categoryID`* value of `-1` was passed in, all product records were returned.</span></span>

## <a name="summary"></a><span data-ttu-id="fb79d-191">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="fb79d-191">Summary</span></span>

<span data-ttu-id="fb79d-192">Podczas wyświetlania danych powiązanych hierarchicznie, często pomaga do prezentowania danych za pomocą raportów wzorzec/szczegół, z których użytkownik może uruchomić perusing dane z góry hierarchii i przechodzenie do szczegółów.</span><span class="sxs-lookup"><span data-stu-id="fb79d-192">When displaying hierarchically-related data, it often helps to present the data using master/detail reports, from which the user can start perusing the data from the top of the hierarchy and drill down into details.</span></span> <span data-ttu-id="fb79d-193">W tym samouczku zbadaliśmy tworzenia raportu proste wzorzec/szczegół wyświetlanie wybranej kategorii produktów.</span><span class="sxs-lookup"><span data-stu-id="fb79d-193">In this tutorial we examined building a simple master/detail report showing a selected category's products.</span></span> <span data-ttu-id="fb79d-194">To było wykonywane przy użyciu kontrolki DropDownList dla listy kategorii i DataList produktów należących do wybranej kategorii.</span><span class="sxs-lookup"><span data-stu-id="fb79d-194">This was accomplished by using a DropDownList for the list of categories and a DataList for the products belonging to the selected category.</span></span>

<span data-ttu-id="fb79d-195">W następnym samouczku Zapoznamy się oddzielenie wzorzec i szczegóły rekordów na dwóch stronach.</span><span class="sxs-lookup"><span data-stu-id="fb79d-195">In the next tutorial we'll look at separating the master and details records across two pages.</span></span> <span data-ttu-id="fb79d-196">Na pierwszej stronie listy rekordów "główną" pojawi się Link, aby wyświetlić szczegóły.</span><span class="sxs-lookup"><span data-stu-id="fb79d-196">In the first page, a list of "master" records will be displayed, with a link to view the details.</span></span> <span data-ttu-id="fb79d-197">Kliknięcie łącza spowoduje whisk użytkownika do drugiej strony wyświetli szczegóły wybranego rekordu głównego.</span><span class="sxs-lookup"><span data-stu-id="fb79d-197">Clicking on the link will whisk the user to the second page, which will display the details for the selected master record.</span></span>

<span data-ttu-id="fb79d-198">Wszystkiego najlepszego programowania!</span><span class="sxs-lookup"><span data-stu-id="fb79d-198">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="fb79d-199">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="fb79d-199">About the Author</span></span>

<span data-ttu-id="fb79d-200">[Scott Bento](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor siedem ASP/ASP.NET książek i założycielem [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracował nad przy użyciu technologii Microsoft Web od 1998 r.</span><span class="sxs-lookup"><span data-stu-id="fb79d-200">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="fb79d-201">Scott działa jako niezależny Konsultant, trainer i składnika zapisywania.</span><span class="sxs-lookup"><span data-stu-id="fb79d-201">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="fb79d-202">Jego najnowszą książkę Stephena [ *Sams uczyć się ASP.NET 2.0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="fb79d-202">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="fb79d-203">ADAM można z Tobą skontaktować w [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="fb79d-203">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="fb79d-204">lub za pośrednictwem jego blogu, który znajduje się w temacie [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="fb79d-204">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="fb79d-205">Specjalne podziękowania dla...</span><span class="sxs-lookup"><span data-stu-id="fb79d-205">Special Thanks To…</span></span>

<span data-ttu-id="fb79d-206">W tej serii samouczków został zrecenzowany przez wielu recenzentów pomocne.</span><span class="sxs-lookup"><span data-stu-id="fb79d-206">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="fb79d-207">Weryfikacja potencjalnych klientów w ramach tego samouczka został Randy Schmidt.</span><span class="sxs-lookup"><span data-stu-id="fb79d-207">Lead reviewer for this tutorial was Randy Schmidt.</span></span> <span data-ttu-id="fb79d-208">Zainteresowani zapoznaniem Moje kolejnych artykułów MSDN?</span><span class="sxs-lookup"><span data-stu-id="fb79d-208">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="fb79d-209">Jeśli tak, Porzuć mnie linii w [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="fb79d-209">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="fb79d-210">Next</span><span class="sxs-lookup"><span data-stu-id="fb79d-210">Next</span></span>](master-detail-filtering-acess-two-pages-datalist-cs.md)

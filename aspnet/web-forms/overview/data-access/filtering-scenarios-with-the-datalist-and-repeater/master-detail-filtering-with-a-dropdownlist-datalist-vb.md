---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-with-a-dropdownlist-datalist-vb
title: Filtrowanie wzorców/szczegółów przy użyciu DropDownList (VB) | Microsoft Docs
author: rick-anderson
description: W tym samouczku pokazano, jak wyświetlić raporty wzorzec/szczegóły na pojedynczej stronie sieci Web przy użyciu kontrolek DropDownList, aby wyświetlić rekordy "Master" i DataList do DISPL...
ms.author: riande
ms.date: 07/18/2007
ms.assetid: ad0f1014-1eff-465f-bdc6-93058de00e44
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-with-a-dropdownlist-datalist-vb
msc.type: authoredcontent
ms.openlocfilehash: 537f8e76bc0cbfa759a014b63ae5f68b5d3ca64d
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78606422"
---
# <a name="masterdetail-filtering-with-a-dropdownlist-vb"></a><span data-ttu-id="376ef-103">Filtrowanie rekordu głównego/szczegółów przy użyciu kontrolki DropDownList (VB)</span><span class="sxs-lookup"><span data-stu-id="376ef-103">Master/Detail Filtering With a DropDownList (VB)</span></span>

<span data-ttu-id="376ef-104">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="376ef-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="376ef-105">[Pobierz przykładową aplikację](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_33_VB.exe) lub [Pobierz plik PDF](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/datatutorial33vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="376ef-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_33_VB.exe) or [Download PDF](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/datatutorial33vb1.pdf)</span></span>

> <span data-ttu-id="376ef-106">W tym samouczku przedstawiono sposób wyświetlania raportów wzorzec/szczegóły na pojedynczej stronie sieci Web przy użyciu kontrolek DropDownList do wyświetlania "Master" rekordów i DataList, aby wyświetlić "Szczegóły".</span><span class="sxs-lookup"><span data-stu-id="376ef-106">In this tutorial we see how to display master/detail reports in a single web page using DropDownLists to display the "master" records and a DataList to display the "details".</span></span>

## <a name="introduction"></a><span data-ttu-id="376ef-107">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="376ef-107">Introduction</span></span>

<span data-ttu-id="376ef-108">Raport główny/szczegółowy, który został najpierw utworzony przy użyciu widoku GridView w wcześniejszym [filtrowaniu wzorzec/szczegóły za pomocą](../masterdetail/master-detail-filtering-with-a-dropdownlist-vb.md) samouczka DropDownList, rozpoczyna się od wyświetlania pewnego zestawu rekordów "Master".</span><span class="sxs-lookup"><span data-stu-id="376ef-108">The master/detail report, which we first created using a GridView in the earlier [Master/Detail Filtering With a DropDownList](../masterdetail/master-detail-filtering-with-a-dropdownlist-vb.md) tutorial, begins by showing some set of "master" records.</span></span> <span data-ttu-id="376ef-109">Następnie użytkownik może przejść do szczegółów jednego z rekordów głównych, co spowoduje wyświetlenie "szczegółów" tego rekordu głównego.</span><span class="sxs-lookup"><span data-stu-id="376ef-109">The user can then drill down into one of the master records, thereby viewing that master record's "details."</span></span> <span data-ttu-id="376ef-110">Raporty wzorzec/szczegóły są idealnym wyborem dla wizualizacji relacji jeden-do-wielu i wyświetlania szczegółowych informacji z szczególnie "szerokich" tabel (z których każda zawiera wiele kolumn).</span><span class="sxs-lookup"><span data-stu-id="376ef-110">Master/detail reports are an ideal choice for visualizing one-to-many relationships and for displaying detailed information from particularly "wide" tables (ones that have a lot of columns).</span></span> <span data-ttu-id="376ef-111">Poznasz sposób implementacji raportów master/detail przy użyciu kontrolek GridView i DetailsView w poprzednich samouczkach.</span><span class="sxs-lookup"><span data-stu-id="376ef-111">We've explored how to implement master/detail reports using the GridView and DetailsView controls in previous tutorials.</span></span> <span data-ttu-id="376ef-112">W tym samouczku i następnych dwóch, będziemy ponownie poznać te koncepcje, ale zamiast tego skup się na nich przy użyciu kontrolek DataList i wzmacniak.</span><span class="sxs-lookup"><span data-stu-id="376ef-112">In this tutorial and the next two, we'll reexamine these concepts, but focus on using DataList and Repeater controls instead.</span></span>

<span data-ttu-id="376ef-113">W tym samouczku Przyjrzyjmy się użyciu DropDownList, aby zawierała rekordy "Master" z rekordami "Details" wyświetlanymi w elemencie DataList.</span><span class="sxs-lookup"><span data-stu-id="376ef-113">In this tutorial, we'll look at using a DropDownList to contain the "master" records, with the "details" records displayed in a DataList.</span></span>

## <a name="step-1-adding-the-masterdetail-tutorial-web-pages"></a><span data-ttu-id="376ef-114">Krok 1. Dodawanie stron sieci Web samouczka głównego/szczegółów</span><span class="sxs-lookup"><span data-stu-id="376ef-114">Step 1: Adding the Master/Detail Tutorial Web Pages</span></span>

<span data-ttu-id="376ef-115">Przed rozpoczęciem pracy z tym samouczkiem Poświęćmy chwilę na dodanie folderu i ASP.NET stron, które będziemy potrzebować dla tego samouczka, a następnie dwie instrukcje dotyczące raportów wzorzec/szczegóły przy użyciu kontrolek DataList i wzmacniak.</span><span class="sxs-lookup"><span data-stu-id="376ef-115">Before we start this tutorial, let's first take a moment to add the folder and ASP.NET pages we'll need for this tutorial and the next two dealing with master/detail reports using the DataList and Repeater controls.</span></span> <span data-ttu-id="376ef-116">Zacznij od utworzenia nowego folderu w projekcie o nazwie `DataListRepeaterFiltering`.</span><span class="sxs-lookup"><span data-stu-id="376ef-116">Start by creating a new folder in the project named `DataListRepeaterFiltering`.</span></span> <span data-ttu-id="376ef-117">Następnie Dodaj następujące pięć stron ASP.NET do tego folderu, z których wszystkie są skonfigurowane do korzystania z strony wzorcowej `Site.master`:</span><span class="sxs-lookup"><span data-stu-id="376ef-117">Next, add the following five ASP.NET pages to this folder, having all of them configured to use the master page `Site.master`:</span></span>

- `Default.aspx`
- `FilterByDropDownList.aspx`
- `CategoryListMaster.aspx`
- `ProductsForCategoryDetails.aspx`
- `CategoriesAndProducts.aspx`

![Utwórz folder DataListRepeaterFiltering i Dodaj samouczek ASP.NET stron](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image1.png)

<span data-ttu-id="376ef-119">**Rysunek 1**. tworzenie folderu `DataListRepeaterFiltering` i dodawanie stron samouczka ASP.NET</span><span class="sxs-lookup"><span data-stu-id="376ef-119">**Figure 1**: Create a `DataListRepeaterFiltering` Folder and Add the Tutorial ASP.NET Pages</span></span>

<span data-ttu-id="376ef-120">Następnie otwórz stronę `Default.aspx` i przeciągnij kontrolkę użytkownika `SectionLevelTutorialListing.ascx` z folderu `UserControls` na powierzchnię projektu.</span><span class="sxs-lookup"><span data-stu-id="376ef-120">Next, open the `Default.aspx` page and drag the `SectionLevelTutorialListing.ascx` User Control from the `UserControls` folder onto the Design surface.</span></span> <span data-ttu-id="376ef-121">Ta kontrolka użytkownika, utworzona na [stronach wzorcowych i](../introduction/master-pages-and-site-navigation-vb.md) w samouczku nawigacji po witrynie, wylicza mapę witryny i wyświetla samouczki z bieżącej sekcji na liście punktowanej.</span><span class="sxs-lookup"><span data-stu-id="376ef-121">This User Control, which we created in the [Master Pages and Site Navigation](../introduction/master-pages-and-site-navigation-vb.md) tutorial, enumerates the site map and displays the tutorials from the current section in a bulleted list.</span></span>

<span data-ttu-id="376ef-122">[![dodać kontrolkę użytkownika SectionLevelTutorialListing. ascx do default. aspx](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image3.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="376ef-122">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image3.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image2.png)</span></span>

<span data-ttu-id="376ef-123">**Rysunek 2**. Dodawanie kontrolki użytkownika `SectionLevelTutorialListing.ascx` do `Default.aspx` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="376ef-123">**Figure 2**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image4.png))</span></span>

<span data-ttu-id="376ef-124">Aby na liście punktowanej były wyświetlane samouczki wzorca/szczegółów, które będą tworzone, należy dodać je do mapy witryny.</span><span class="sxs-lookup"><span data-stu-id="376ef-124">In order to have the bulleted list display the master/detail tutorials we'll be creating, we need to add them to the site map.</span></span> <span data-ttu-id="376ef-125">Otwórz plik `Web.sitemap` i Dodaj następujący znacznik po "Wyświetlanie danych z elementem DataList i wzmacniak" znacznikiem węzła mapy witryny:</span><span class="sxs-lookup"><span data-stu-id="376ef-125">Open the `Web.sitemap` file and add the following markup after the "Displaying Data with the DataList and Repeater" site map node markup:</span></span>

[!code-xml[Main](master-detail-filtering-with-a-dropdownlist-datalist-vb/samples/sample1.xml)]

![Aktualizowanie mapy witryny w celu uwzględnienia nowych stron ASP.NET](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image5.png)

<span data-ttu-id="376ef-127">**Rysunek 3**. aktualizowanie mapy witryny w celu uwzględnienia nowych stron ASP.NET</span><span class="sxs-lookup"><span data-stu-id="376ef-127">**Figure 3**: Update the Site Map to Include the New ASP.NET Pages</span></span>

## <a name="step-2-displaying-the-categories-in-a-dropdownlist"></a><span data-ttu-id="376ef-128">Krok 2. Wyświetlanie kategorii w DropDownList</span><span class="sxs-lookup"><span data-stu-id="376ef-128">Step 2: Displaying the Categories in a DropDownList</span></span>

<span data-ttu-id="376ef-129">Nasz Raport główny/szczegółowy wyświetli listę kategorii w DropDownList, z których produkty wybranego elementu listy są wyświetlane w dalszej części na stronie elementu DataList.</span><span class="sxs-lookup"><span data-stu-id="376ef-129">Our master/detail report will list the categories in a DropDownList, with the selected list item's products displayed further down in the page in a DataList.</span></span> <span data-ttu-id="376ef-130">Pierwsze zadanie przed nami, a następnie, ma mieć kategorie wyświetlane w DropDownList.</span><span class="sxs-lookup"><span data-stu-id="376ef-130">The first task ahead of us, then, is to have the categories displayed in a DropDownList.</span></span> <span data-ttu-id="376ef-131">Aby rozpocząć, Otwórz stronę `FilterByDropDownList.aspx` w folderze `DataListRepeaterFiltering` i przeciągnij DropDownList z przybornika na projektanta strony.</span><span class="sxs-lookup"><span data-stu-id="376ef-131">Start by opening the `FilterByDropDownList.aspx` page in the `DataListRepeaterFiltering` folder and drag a DropDownList from the Toolbox onto the page's designer.</span></span> <span data-ttu-id="376ef-132">Następnie ustaw właściwość `ID` DropDownList na `Categories`.</span><span class="sxs-lookup"><span data-stu-id="376ef-132">Next, set the DropDownList's `ID` property to `Categories`.</span></span> <span data-ttu-id="376ef-133">Kliknij link wybierz źródło danych z tagu inteligentnego DropDownList i Utwórz nowy element ObjectDataSource o nazwie `CategoriesDataSource`.</span><span class="sxs-lookup"><span data-stu-id="376ef-133">Click on the Choose Data Source link from the DropDownList's smart tag and create a new ObjectDataSource named `CategoriesDataSource`.</span></span>

<span data-ttu-id="376ef-134">[![dodać nowego elementu ObjectDataSource o nazwie CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image7.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="376ef-134">[![Add a New ObjectDataSource Named CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image7.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image6.png)</span></span>

<span data-ttu-id="376ef-135">**Ilustracja 4**. Dodawanie nowego elementu ObjectDataSource o nazwie `CategoriesDataSource` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="376ef-135">**Figure 4**: Add a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image8.png))</span></span>

<span data-ttu-id="376ef-136">Skonfiguruj nowy element ObjectDataSource, który wywołuje metodę `GetCategories()` klasy `CategoriesBLL`.</span><span class="sxs-lookup"><span data-stu-id="376ef-136">Configure the new ObjectDataSource such that it invokes the `CategoriesBLL` class's `GetCategories()` method.</span></span> <span data-ttu-id="376ef-137">Po skonfigurowaniu elementu ObjectDataSource nadal musimy określić, jakie pole źródła danych ma być wyświetlane w DropDownList, a które należy skojarzyć z wartością dla każdego elementu listy.</span><span class="sxs-lookup"><span data-stu-id="376ef-137">After configuring the ObjectDataSource we still need to specify what data source field should be displayed in the DropDownList and which one should be associated as the value for each list item.</span></span> <span data-ttu-id="376ef-138">Pole `CategoryName`, które ma być wyświetlane i `CategoryID`, jako wartość dla każdego elementu listy.</span><span class="sxs-lookup"><span data-stu-id="376ef-138">Have the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>

<span data-ttu-id="376ef-139">[![wyświetlać DropDownList pole CategoryName i używać IDkategorii jako wartości](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image10.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="376ef-139">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image10.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image9.png)</span></span>

<span data-ttu-id="376ef-140">**Rysunek 5**. DropDownList wyświetlić pola `CategoryName` i użyj `CategoryID` jako wartości ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="376ef-140">**Figure 5**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image11.png))</span></span>

<span data-ttu-id="376ef-141">W tym momencie mamy kontrolkę DropDownList, która jest wypełniana rekordami z tabeli `Categories` (wszystkie wykonane przez około 6 sekund).</span><span class="sxs-lookup"><span data-stu-id="376ef-141">At this point we have a DropDownList control that's populated with the records from the `Categories` table (all accomplished in about six seconds).</span></span> <span data-ttu-id="376ef-142">Rysunek 6 przedstawia postęp z tego względu, gdy jest wyświetlany za pomocą przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="376ef-142">Figure 6 shows our progress thus far when viewed through a browser.</span></span>

<span data-ttu-id="376ef-143">[![listy rozwijanej z bieżącymi kategoriami](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image13.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="376ef-143">[![A Drop-Down Lists the Current Categories](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image13.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image12.png)</span></span>

<span data-ttu-id="376ef-144">**Ilustracja 6**. Lista rozwijana z bieżącymi kategoriami ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="376ef-144">**Figure 6**: A Drop-Down Lists the Current Categories ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image14.png))</span></span>

## <a name="step-2-adding-the-products-datalist"></a><span data-ttu-id="376ef-145">Krok 2. Dodawanie elementu DataList produktów</span><span class="sxs-lookup"><span data-stu-id="376ef-145">Step 2: Adding the Products DataList</span></span>

<span data-ttu-id="376ef-146">Ostatnim krokiem w naszym raporcie głównym/szczegółowym jest wyświetlenie listy produktów skojarzonych z wybraną kategorią.</span><span class="sxs-lookup"><span data-stu-id="376ef-146">The last step in our master/detail report is to list the products associated with the selected category.</span></span> <span data-ttu-id="376ef-147">Aby to osiągnąć, Dodaj element DataList do strony i Utwórz nowy element ObjectDataSource o nazwie `ProductsByCategoryDataSource`.</span><span class="sxs-lookup"><span data-stu-id="376ef-147">To accomplish this, add a DataList to the page and create a new ObjectDataSource named `ProductsByCategoryDataSource`.</span></span> <span data-ttu-id="376ef-148">Czy formant `ProductsByCategoryDataSource` pobiera swoje dane z metody `GetProductsByCategoryID(categoryID)` klasy `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="376ef-148">Have the `ProductsByCategoryDataSource` control retrieve its data from the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="376ef-149">Ponieważ ten Raport główny/szczegółowy jest tylko do odczytu, wybierz opcję (brak) na kartach Wstawianie, aktualizowanie i usuwanie.</span><span class="sxs-lookup"><span data-stu-id="376ef-149">Since this master/detail report is read-only, choose the (None) option in the INSERT, UPDATE, and DELETE tabs.</span></span>

<span data-ttu-id="376ef-150">[![wybrać metodę GetProductsByCategoryID (IDKategorii)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image16.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="376ef-150">[![Select the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image16.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image15.png)</span></span>

<span data-ttu-id="376ef-151">**Rysunek 7**. wybierz metodę `GetProductsByCategoryID(categoryID)` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="376ef-151">**Figure 7**: Select the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image17.png))</span></span>

<span data-ttu-id="376ef-152">Po kliknięciu przycisku Dalej Kreator ObjectDataSource poprosi nas o źródło wartości parametru *`categoryID`* `GetProductsByCategoryID(categoryID)` metody.</span><span class="sxs-lookup"><span data-stu-id="376ef-152">After clicking Next, the ObjectDataSource wizard prompts us for the source of the value for the `GetProductsByCategoryID(categoryID)` method's *`categoryID`* parameter.</span></span> <span data-ttu-id="376ef-153">Aby użyć wartości wybranego `categories` elementu DropDownList Ustaw Źródło parametru na Control i ControlID, aby `Categories`.</span><span class="sxs-lookup"><span data-stu-id="376ef-153">To use the value of the selected `categories` DropDownList item set the Parameter source to Control and the ControlID to `Categories`.</span></span>

<span data-ttu-id="376ef-154">[![ustawić dla parametru IDKategorii wartości kategorii DropDownList](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image19.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="376ef-154">[![Set the categoryID Parameter to the Value of the Categories DropDownList](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image19.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image18.png)</span></span>

<span data-ttu-id="376ef-155">**Ilustracja 8**. ustaw parametr *`categoryID`* na wartość `Categories` DropDownList ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="376ef-155">**Figure 8**: Set the *`categoryID`* Parameter to the Value of the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image20.png))</span></span>

<span data-ttu-id="376ef-156">Po zakończeniu działania Kreatora konfiguracji źródła danych program Visual Studio automatycznie wygeneruje `ItemTemplate` dla elementu DataList, który wyświetla nazwę i wartość każdego pola danych.</span><span class="sxs-lookup"><span data-stu-id="376ef-156">Upon completing the Configure Data Source wizard, Visual Studio will automatically generate an `ItemTemplate` for the DataList that displays the name and value of each data field.</span></span> <span data-ttu-id="376ef-157">Aby zamiast tego użyć `ItemTemplate`, w którym jest wyświetlana tylko nazwa produktu, Kategoria, dostawca, ilość na jednostkę i cena oraz `SeparatorTemplate`, które wprowadzają element `<hr>` między każdym elementem, przystąpi do.</span><span class="sxs-lookup"><span data-stu-id="376ef-157">Let's enhance the DataList to instead use an `ItemTemplate` that displays just the product's name, category, supplier, quantity per unit, and price along with a `SeparatorTemplate` that injects an `<hr>` element between each item.</span></span> <span data-ttu-id="376ef-158">Używam `ItemTemplate` z przykładu w [wyświetlanych danych za pomocą samouczka z kontrolkami DataList i wzmacniak](../displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls-vb.md) , ale możesz korzystać z dowolnego znacznika szablonu, który znajdziesz najbardziej atrakcyjny wizualnie.</span><span class="sxs-lookup"><span data-stu-id="376ef-158">I'm going to use the `ItemTemplate` from an example in the [Displaying Data with the DataList and Repeater Controls](../displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls-vb.md) tutorial, but feel free to use whatever template markup you find most visually appealing.</span></span>

<span data-ttu-id="376ef-159">Po wprowadzeniu tych zmian element DataList i jego znaczniki elementu ObjectDataSource powinny wyglądać podobnie do następujących:</span><span class="sxs-lookup"><span data-stu-id="376ef-159">After making these changes, your DataList and its ObjectDataSource's markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-datalist-vb/samples/sample2.aspx)]

<span data-ttu-id="376ef-160">Poświęć chwilę, aby zaewidencjonować nasz postęp w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="376ef-160">Take a moment to check out our progress in a browser.</span></span> <span data-ttu-id="376ef-161">Podczas pierwszego odwiedzania strony są wyświetlane te produkty należące do wybranej kategorii (napoje) (jak pokazano na rysunku 9), ale zmiana DropDownList nie aktualizuje danych.</span><span class="sxs-lookup"><span data-stu-id="376ef-161">When first visiting the page, those products belonging to the selected category (Beverages) are displayed (as shown in Figure 9), but changing the DropDownList doesn't update the data.</span></span> <span data-ttu-id="376ef-162">Wynika to z faktu, że w celu zaktualizowania elementu DataList musi wystąpić ogłoszenie zwrotne.</span><span class="sxs-lookup"><span data-stu-id="376ef-162">This is because a postback must occur for the DataList to update.</span></span> <span data-ttu-id="376ef-163">Aby to osiągnąć, można ustawić właściwość `AutoPostBack` DropDownList na `true` lub dodać formant sieci Web przycisku do strony.</span><span class="sxs-lookup"><span data-stu-id="376ef-163">To accomplish this we can either set the DropDownList's `AutoPostBack` property to `true` or add a Button Web control to the page.</span></span> <span data-ttu-id="376ef-164">Na potrzeby tego samouczka ustawiłem Właściwość `AutoPostBack` DropDownList na `true`.</span><span class="sxs-lookup"><span data-stu-id="376ef-164">For this tutorial, I've opted to set the DropDownList's `AutoPostBack` property to `true`.</span></span>

<span data-ttu-id="376ef-165">Ilustracje 9 i 10 ilustrują Raport główny/szczegółowy w działaniu.</span><span class="sxs-lookup"><span data-stu-id="376ef-165">Figures 9 and 10 illustrate the master/detail report in action.</span></span>

<span data-ttu-id="376ef-166">[![podczas pierwszego odwiedzania strony zostaną wyświetlone produkty napoje](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image22.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="376ef-166">[![When First Visiting the Page, the Beverage Products are Displayed](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image22.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image21.png)</span></span>

<span data-ttu-id="376ef-167">**Rysunek 9**. podczas pierwszego odwiedzania strony są wyświetlane produkty napoje ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="376ef-167">**Figure 9**: When First Visiting the Page, the Beverage Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image23.png))</span></span>

<span data-ttu-id="376ef-168">[![wybranie nowego produktu (produkt) automatycznie spowoduje odświeżenie, zaktualizowanie elementu DataList](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image25.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="376ef-168">[![Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the DataList](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image25.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image24.png)</span></span>

<span data-ttu-id="376ef-169">**Ilustracja 10**: wybranie nowego produktu (produkt) powoduje automatyczne wypróbowanie ogłaszania zwrotnego, aktualizowanie elementu DataList ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="376ef-169">**Figure 10**: Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the DataList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image26.png))</span></span>

## <a name="adding-a----choose-a-category----list-item"></a><span data-ttu-id="376ef-170">Dodawanie elementu listy "--Wybierz kategorię--"</span><span class="sxs-lookup"><span data-stu-id="376ef-170">Adding a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="376ef-171">Gdy po raz pierwszy zostanie odwiedzana strona `FilterByDropDownList.aspx` kategorii (napoje) pierwszego elementu listy DropDownList są domyślnie zaznaczone, pokazując produkty napoje w elemencie DataList.</span><span class="sxs-lookup"><span data-stu-id="376ef-171">When first visiting the `FilterByDropDownList.aspx` page the categories DropDownList's first list item (Beverages) is selected by default, showing the beverage products in the DataList.</span></span> <span data-ttu-id="376ef-172">W przypadku *filtrowania wzorzec/szczegóły przy użyciu* samouczka DropDownList dodaliśmy opcję "--Wybierz kategorię--" do DropDownList, która została wybrana domyślnie i, po wybraniu, wyświetla *wszystkie* produkty w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="376ef-172">In the *Master/Detail Filtering With a DropDownList* tutorial we added a "-- Choose a Category --" option to the DropDownList that was selected by default and, when selected, displayed *all* of the products in the database.</span></span> <span data-ttu-id="376ef-173">Takie podejście było zarządzane podczas tworzenia listy produktów w widoku GridView, ponieważ każdy wiersz produktu zajęł niewielką ilość ekranu.</span><span class="sxs-lookup"><span data-stu-id="376ef-173">Such an approach was manageable when listing the products in a GridView, as each product row took up a small amount of screen real estate.</span></span> <span data-ttu-id="376ef-174">Z elementem DataList, jednak informacje każdego produktu zużywają znacznie większy fragment ekranu.</span><span class="sxs-lookup"><span data-stu-id="376ef-174">With the DataList, however, each product's information consumes a much larger chunk of the screen.</span></span> <span data-ttu-id="376ef-175">Nadal dodamy opcję "--Wybierz kategorię--" i wybrano ją domyślnie, ale zamiast wyświetlać wszystkie produkty po zaznaczeniu, skonfiguruj ją tak, aby nie pokazywała żadnych produktów.</span><span class="sxs-lookup"><span data-stu-id="376ef-175">Let's still add a "-- Choose a Category --" option and have it selected by default, but instead of having it show all products when selected, let's configure it so that it shows no products.</span></span>

<span data-ttu-id="376ef-176">Aby dodać nowy element listy do DropDownList, przejdź do okno Właściwości i kliknij wielokropek we właściwości `Items`.</span><span class="sxs-lookup"><span data-stu-id="376ef-176">To add a new list item to the DropDownList, go to the Properties window and click on the ellipses in the `Items` property.</span></span> <span data-ttu-id="376ef-177">Dodaj nowy element listy z `Text` "--Wybierz kategorię--" i `Value` `0`.</span><span class="sxs-lookup"><span data-stu-id="376ef-177">Add a new list item with the `Text` "-- Choose a Category --" and the `Value` `0`.</span></span>

![Dodaj](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image27.png)

<span data-ttu-id="376ef-179">**Ilustracja 11**. Dodawanie elementu "--Wybierz kategorię--"</span><span class="sxs-lookup"><span data-stu-id="376ef-179">**Figure 11**: Add a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="376ef-180">Alternatywnie możesz dodać element listy, dodając następujący znacznik do DropDownList:</span><span class="sxs-lookup"><span data-stu-id="376ef-180">Alternatively, you can add the list item by adding the following markup to the DropDownList:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-datalist-vb/samples/sample3.aspx)]

<span data-ttu-id="376ef-181">Ponadto musimy ustawić `AppendDataBoundItems` kontrolki DropDownList na `true`, ponieważ jest ona ustawiona na `false` (wartość domyślna), gdy kategorie są powiązane z DropDownList z elementu ObjectDataSource, zastąpią wszystkie ręcznie dodane elementy listy.</span><span class="sxs-lookup"><span data-stu-id="376ef-181">Additionally, we need to set the DropDownList control's `AppendDataBoundItems` to `true` because if it's set to `false` (the default), when the categories are bound to the DropDownList from the ObjectDataSource they'll overwrite any manually-added list items.</span></span>

![Ustaw właściwość AppendDataBoundItems na wartość true](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image28.png)

<span data-ttu-id="376ef-183">**Ilustracja 12**. ustaw właściwość `AppendDataBoundItems` na wartość true</span><span class="sxs-lookup"><span data-stu-id="376ef-183">**Figure 12**: Set the `AppendDataBoundItems` Property to True</span></span>

<span data-ttu-id="376ef-184">Z powodu wybrania wartości `0` dla elementu "--Wybierz kategorię--" występuje, ponieważ w systemie nie ma kategorii z wartością `0`, dlatego nie zostanie zwrócony żaden rekord produktu, gdy zostanie wybrany element listy "--Wybierz kategorię--".</span><span class="sxs-lookup"><span data-stu-id="376ef-184">The reason we chose the value `0` for the "-- Choose a Category --" list item is because there are no categories in the system with a value of `0`, hence no product records will be returned when the "-- Choose a Category --" list item is selected.</span></span> <span data-ttu-id="376ef-185">Aby to potwierdzić, poświęć chwilę na odwiedzenie strony za pomocą przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="376ef-185">To confirm this, take a moment to visit the page through a browser.</span></span> <span data-ttu-id="376ef-186">Jak pokazano na rysunku 13, podczas pierwszego wyświetlania strony jest zaznaczone pole wyboru "--Wybierz kategorię--" i nie są wyświetlane żadne produkty.</span><span class="sxs-lookup"><span data-stu-id="376ef-186">As Figure 13 shows, when initially viewing the page the "-- Choose a Category --" list item is selected and no products are displayed.</span></span>

<span data-ttu-id="376ef-187">[![, gdy](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image30.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="376ef-187">[![When the](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image30.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image29.png)</span></span>

<span data-ttu-id="376ef-188">**Rysunek 13**. po wybraniu elementu listy "--Wybierz kategorię--" nie są wyświetlane żadne produkty ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="376ef-188">**Figure 13**: When the "-- Choose a Category --" List Item is Selected, No Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image31.png))</span></span>

<span data-ttu-id="376ef-189">Jeśli nie chcesz wyświetlać *wszystkich* produktów, gdy wybrana jest opcja "--Wybierz kategorię--", Użyj zamiast niej wartości `-1`.</span><span class="sxs-lookup"><span data-stu-id="376ef-189">If you'd rather display *all* of the products when the "-- Choose a Category --" option is selected, use a value of `-1` instead.</span></span> <span data-ttu-id="376ef-190">Czytnik uważni będzie odwoływać ten element z powrotem w przypadku *filtrowania wzorzec/szczegóły za pomocą DropDownListego* samouczka zaktualizowaliśmy metodę `GetProductsByCategoryID(categoryID)` klasy `ProductsBLL` tak, aby w przypadku przekazanie *`categoryID`* wartości `-1` wszystkie rekordy produktów zostały zwrócone.</span><span class="sxs-lookup"><span data-stu-id="376ef-190">The astute reader will recall that back in the *Master/Detail Filtering With a DropDownList* tutorial we updated the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method so that if a *`categoryID`* value of `-1` was passed in, all product records were returned.</span></span>

## <a name="summary"></a><span data-ttu-id="376ef-191">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="376ef-191">Summary</span></span>

<span data-ttu-id="376ef-192">Podczas wyświetlania danych zależnych od hierarchii często pomocne jest prezentowanie danych przy użyciu raportów master/detail, z których użytkownik może rozpocząć Peru danych od góry hierarchii i przejść do szczegółów.</span><span class="sxs-lookup"><span data-stu-id="376ef-192">When displaying hierarchically-related data, it often helps to present the data using master/detail reports, from which the user can start perusing the data from the top of the hierarchy and drill down into details.</span></span> <span data-ttu-id="376ef-193">W tym samouczku sprawdzono Tworzenie prostego raportu głównego/szczegółów pokazującego produkty wybranej kategorii.</span><span class="sxs-lookup"><span data-stu-id="376ef-193">In this tutorial we examined building a simple master/detail report showing a selected category's products.</span></span> <span data-ttu-id="376ef-194">Zostało to osiągnięte przy użyciu DropDownList dla listy kategorii i elementu DataList dla produktów należących do wybranej kategorii.</span><span class="sxs-lookup"><span data-stu-id="376ef-194">This was accomplished by using a DropDownList for the list of categories and a DataList for the products belonging to the selected category.</span></span>

<span data-ttu-id="376ef-195">W następnym samouczku powiesz się, jak oddzielić wzorzec i szczegółowe informacje na dwóch stronach.</span><span class="sxs-lookup"><span data-stu-id="376ef-195">In the next tutorial we'll look at separating the master and details records across two pages.</span></span> <span data-ttu-id="376ef-196">Na pierwszej stronie zostanie wyświetlona lista "Master" z linkiem umożliwiającym wyświetlenie szczegółów.</span><span class="sxs-lookup"><span data-stu-id="376ef-196">In the first page, a list of "master" records will be displayed, with a link to view the details.</span></span> <span data-ttu-id="376ef-197">Kliknięcie linku spowoduje wyróżnienie użytkownika na drugą stronę, co spowoduje wyświetlenie szczegółowych informacji o wybranym rekordzie głównym.</span><span class="sxs-lookup"><span data-stu-id="376ef-197">Clicking on the link will whisk the user to the second page, which will display the details for the selected master record.</span></span>

<span data-ttu-id="376ef-198">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="376ef-198">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="376ef-199">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="376ef-199">About the Author</span></span>

<span data-ttu-id="376ef-200">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor siedmiu grup ASP/ASP. NET Books i założyciel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="376ef-200">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="376ef-201">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="376ef-201">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="376ef-202">Jego Najnowsza książka to [*Sams ASP.NET 2,0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="376ef-202">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="376ef-203">Można go osiągnąć w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="376ef-203">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="376ef-204">lub za pośrednictwem swojego blogu, który można znaleźć w [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="376ef-204">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="376ef-205">Specjalne podziękowania dla...</span><span class="sxs-lookup"><span data-stu-id="376ef-205">Special Thanks To…</span></span>

<span data-ttu-id="376ef-206">Ta seria samouczków została sprawdzona przez wielu przydatnych recenzentów.</span><span class="sxs-lookup"><span data-stu-id="376ef-206">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="376ef-207">Recenzent potencjalnych klientów dla tego samouczka został Randy Schmidt.</span><span class="sxs-lookup"><span data-stu-id="376ef-207">Lead reviewer for this tutorial was Randy Schmidt.</span></span> <span data-ttu-id="376ef-208">Chcesz przeglądać moje nadchodzące artykuły MSDN?</span><span class="sxs-lookup"><span data-stu-id="376ef-208">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="376ef-209">Jeśli tak, upuść mi linię w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="376ef-209">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="376ef-210">[Poprzednie](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)
> [dalej](master-detail-filtering-acess-two-pages-datalist-vb.md)</span><span class="sxs-lookup"><span data-stu-id="376ef-210">[Previous](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)
[Next](master-detail-filtering-acess-two-pages-datalist-vb.md)</span></span>

---
uid: web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/nested-data-web-controls-cs
title: Zagnieżdżone kontrolki internetowe danychC#() | Microsoft Docs
author: rick-anderson
description: W tym samouczku dowiesz się, jak używać elementu wzmacniak zagnieżdżonego w innym Wzmacniake. Przykłady pokazują, jak wypełnić wewnętrzny wzmacniak zarówno d...
ms.author: riande
ms.date: 09/13/2006
ms.assetid: ad3cb0ec-26cf-42d7-b81b-184a34ec9f86
msc.legacyurl: /web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/nested-data-web-controls-cs
msc.type: authoredcontent
ms.openlocfilehash: 8ef15bebb2c29976274b0cca1d6ace434ccc55ce
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78594970"
---
# <a name="nested-data-web-controls-c"></a><span data-ttu-id="f15cd-104">Zagnieżdżone kontrolki internetowe danych (C#)</span><span class="sxs-lookup"><span data-stu-id="f15cd-104">Nested Data Web Controls (C#)</span></span>

<span data-ttu-id="f15cd-105">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f15cd-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f15cd-106">[Pobierz przykładową aplikację](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_32_CS.exe) lub [Pobierz plik PDF](nested-data-web-controls-cs/_static/datatutorial32cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="f15cd-106">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_32_CS.exe) or [Download PDF](nested-data-web-controls-cs/_static/datatutorial32cs1.pdf)</span></span>

> <span data-ttu-id="f15cd-107">W tym samouczku dowiesz się, jak używać elementu wzmacniak zagnieżdżonego w innym Wzmacniake.</span><span class="sxs-lookup"><span data-stu-id="f15cd-107">In this tutorial we will explore how to use a Repeater nested inside another Repeater.</span></span> <span data-ttu-id="f15cd-108">Przykłady pokazują, jak wypełnić wewnętrzny wzmacniak jednocześnie i programowo.</span><span class="sxs-lookup"><span data-stu-id="f15cd-108">The examples will illustrate how to populate the inner Repeater both declaratively and programmatically.</span></span>

## <a name="introduction"></a><span data-ttu-id="f15cd-109">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="f15cd-109">Introduction</span></span>

<span data-ttu-id="f15cd-110">Oprócz statycznej składni HTML i powiązania DataBinding szablony mogą również obejmować formanty sieci Web i kontrolki użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f15cd-110">In addition to static HTML and databinding syntax, templates can also include Web controls and User Controls.</span></span> <span data-ttu-id="f15cd-111">Te kontrolki sieci Web mogą mieć przypisane do nich właściwości za pośrednictwem instrukcji deklaracyjnej, wiązania z danymi lub można programistycznie uzyskiwać dostęp do odpowiednich programów obsługi zdarzeń po stronie serwera.</span><span class="sxs-lookup"><span data-stu-id="f15cd-111">These Web controls can have their properties assigned via declarative, databinding syntax, or can be accessed programmatically in the appropriate server-side event handlers.</span></span>

<span data-ttu-id="f15cd-112">Osadzając kontrolki w szablonie, można dostosować i ulepszyć środowisko użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f15cd-112">By embedding controls within a template, the appearance and user experience can be customized and improved upon.</span></span> <span data-ttu-id="f15cd-113">Na przykład w przypadku korzystania z używanie TemplateField w ramach samouczka [kontrolki GridView](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) dowiesz się, jak dostosować wyświetlanie widoku GridView, dodając kontrolkę Calendar w TemplateField, aby pokazać datę zatrudnienia pracownika. w obszarze [Dodawanie kontrolek weryfikacji do edycji i wstawiania interfejsów](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) i dostosowywania samouczków dotyczących [interfejsu modyfikacji danych](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) przedstawiono sposób dostosowywania edycji i wstawiania interfejsów przez dodanie formantów sprawdzania poprawności, pól tekstowych, kontrolek DropDownList i innych kontrolek sieci Web.</span><span class="sxs-lookup"><span data-stu-id="f15cd-113">For example, in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) tutorial, we saw how to customize the GridView s display by adding a Calendar control in a TemplateField to show an employee s hire date; in the [Adding Validation Controls to the Editing and Inserting Interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) and [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorials, we saw how to customize the editing and inserting interfaces by adding validation controls, TextBoxes, DropDownLists, and other Web controls.</span></span>

<span data-ttu-id="f15cd-114">Szablony mogą również zawierać inne kontrolki sieci Web danych.</span><span class="sxs-lookup"><span data-stu-id="f15cd-114">Templates can also contain other data Web controls.</span></span> <span data-ttu-id="f15cd-115">Oznacza to, że możemy mieć element DataList, który zawiera inną wartość DataList (lub wzmacniak lub GridView lub DetailsView itd.) w ramach swoich szablonów.</span><span class="sxs-lookup"><span data-stu-id="f15cd-115">That is, we can have a DataList that contains another DataList (or Repeater or GridView or DetailsView, and so on) within its templates.</span></span> <span data-ttu-id="f15cd-116">Wyzwanie z takim interfejsem wiąże odpowiednie dane z wewnętrznym formantem sieci Web danych.</span><span class="sxs-lookup"><span data-stu-id="f15cd-116">The challenge with such an interface is binding the appropriate data to the inner data Web control.</span></span> <span data-ttu-id="f15cd-117">Istnieje kilka różnych metod, od opcji deklaratywnych używających elementu ObjectDataSource do programowania.</span><span class="sxs-lookup"><span data-stu-id="f15cd-117">There are a few different approaches available, ranging from declarative options using the ObjectDataSource to programmatic ones.</span></span>

<span data-ttu-id="f15cd-118">W tym samouczku dowiesz się, jak używać elementu wzmacniak zagnieżdżonego w innym Wzmacniake.</span><span class="sxs-lookup"><span data-stu-id="f15cd-118">In this tutorial we will explore how to use a Repeater nested inside another Repeater.</span></span> <span data-ttu-id="f15cd-119">Wzmacniak zewnętrzny będzie zawierać element dla każdej kategorii w bazie danych, wyświetlając nazwę i opis kategorii.</span><span class="sxs-lookup"><span data-stu-id="f15cd-119">The outer Repeater will contain an item for each category in the database, displaying the category s name and description.</span></span> <span data-ttu-id="f15cd-120">Każdy element kategorii-wzmacniak wewnętrzny będzie wyświetlał informacje dla każdego produktu należącego do tej kategorii (patrz rysunek 1) na liście punktowanej.</span><span class="sxs-lookup"><span data-stu-id="f15cd-120">Each category item s inner Repeater will display information for each product belonging to that category (see Figure 1) in a bulleted list.</span></span> <span data-ttu-id="f15cd-121">Nasze przykłady pokazują, jak wypełnić wewnętrzny wzmacniak jednocześnie i programowo.</span><span class="sxs-lookup"><span data-stu-id="f15cd-121">Our examples will illustrate how to populate the inner Repeater both declaratively and programmatically.</span></span>

<span data-ttu-id="f15cd-122">[![każdej kategorii wraz z jej produktami są wymienione](nested-data-web-controls-cs/_static/image2.png)](nested-data-web-controls-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f15cd-122">[![Each Category, Along with its Products, are Listed](nested-data-web-controls-cs/_static/image2.png)](nested-data-web-controls-cs/_static/image1.png)</span></span>

<span data-ttu-id="f15cd-123">**Rysunek 1**. na liście są wyświetlane wszystkie kategorie wraz z produktami ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](nested-data-web-controls-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="f15cd-123">**Figure 1**: Each Category, Along with its Products, are Listed ([Click to view full-size image](nested-data-web-controls-cs/_static/image3.png))</span></span>

## <a name="step-1-creating-the-category-listing"></a><span data-ttu-id="f15cd-124">Krok 1. Tworzenie listy kategorii</span><span class="sxs-lookup"><span data-stu-id="f15cd-124">Step 1: Creating the Category Listing</span></span>

<span data-ttu-id="f15cd-125">Podczas kompilowania strony korzystającej z zagnieżdżonych kontrolek sieci Web, łatwiej jest zaprojektować, utworzyć i przetestować zewnętrzną kontrolkę sieci Web, bez nawet martw się o wewnętrzną kontrolkę zagnieżdżoną.</span><span class="sxs-lookup"><span data-stu-id="f15cd-125">When building a page that uses nested data Web controls, I find it helpful to design, create, and test the outermost data Web control first, without even worrying about the inner nested control.</span></span> <span data-ttu-id="f15cd-126">W związku z tym Zacznijmy od kroków niezbędnych do dodania do strony, która zawiera nazwę i opis każdej kategorii.</span><span class="sxs-lookup"><span data-stu-id="f15cd-126">Therefore, let s start by walking through the steps necessary to add a Repeater to the page that lists the name and description for each category.</span></span>

<span data-ttu-id="f15cd-127">Aby rozpocząć, Otwórz stronę `NestedControls.aspx` w folderze `DataListRepeaterBasics` i Dodaj kontrolkę wzmacniak do strony, ustawiając jej Właściwość `ID` na `CategoryList`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-127">Start by opening the `NestedControls.aspx` page in the `DataListRepeaterBasics` folder and add a Repeater control to the page, setting its `ID` property to `CategoryList`.</span></span> <span data-ttu-id="f15cd-128">Z tagu inteligentnego wzmacniaka wybierz, aby utworzyć nowy element ObjectDataSource o nazwie `CategoriesDataSource`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-128">From the Repeater s smart tag, choose to create a new ObjectDataSource named `CategoriesDataSource`.</span></span>

<span data-ttu-id="f15cd-129">[Nazwa ![nowego elementu ObjectDataSource CategoriesDataSource](nested-data-web-controls-cs/_static/image5.png)](nested-data-web-controls-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="f15cd-129">[![Name the New ObjectDataSource CategoriesDataSource](nested-data-web-controls-cs/_static/image5.png)](nested-data-web-controls-cs/_static/image4.png)</span></span>

<span data-ttu-id="f15cd-130">**Rysunek 2**. nazwa nowego `CategoriesDataSource` elementu ObjectDataSource ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](nested-data-web-controls-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="f15cd-130">**Figure 2**: Name the New ObjectDataSource `CategoriesDataSource` ([Click to view full-size image](nested-data-web-controls-cs/_static/image6.png))</span></span>

<span data-ttu-id="f15cd-131">Skonfiguruj element ObjectDataSource w taki sposób, aby pobierał swoje dane z metody `GetCategories` `CategoriesBLL` Class.</span><span class="sxs-lookup"><span data-stu-id="f15cd-131">Configure the ObjectDataSource so that it pulls its data from the `CategoriesBLL` class s `GetCategories` method.</span></span>

<span data-ttu-id="f15cd-132">[![skonfigurować element ObjectDataSource do używania metody GetCategories klasy CategoriesBLL](nested-data-web-controls-cs/_static/image8.png)](nested-data-web-controls-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f15cd-132">[![Configure the ObjectDataSource to Use the CategoriesBLL Class s GetCategories Method](nested-data-web-controls-cs/_static/image8.png)](nested-data-web-controls-cs/_static/image7.png)</span></span>

<span data-ttu-id="f15cd-133">**Rysunek 3**. Konfigurowanie elementu ObjectDataSource do używania metody `GetCategories` `CategoriesBLL` Class (kliknij,[Aby wyświetlić obraz w pełnym rozmiarze](nested-data-web-controls-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="f15cd-133">**Figure 3**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class s `GetCategories` Method ([Click to view full-size image](nested-data-web-controls-cs/_static/image9.png))</span></span>

<span data-ttu-id="f15cd-134">Aby określić zawartość szablonu wzmacniaka, należy przejść do widoku źródła i ręcznie wprowadzić składnię deklaratywną.</span><span class="sxs-lookup"><span data-stu-id="f15cd-134">To specify the Repeater s template content we need to go to the Source view and manually enter the declarative syntax.</span></span> <span data-ttu-id="f15cd-135">Dodaj `ItemTemplate`, który wyświetla nazwę kategorii w elemencie `<h4>` i opis kategorii s w elemencie Paragraph (`<p>`).</span><span class="sxs-lookup"><span data-stu-id="f15cd-135">Add an `ItemTemplate` that displays the category s name in an `<h4>` element and the category s description in a paragraph element (`<p>`).</span></span> <span data-ttu-id="f15cd-136">Ponadto poinformuj każdą kategorię z regułą poziomą (`<hr>`).</span><span class="sxs-lookup"><span data-stu-id="f15cd-136">Furthermore, let s separate each category with a horizontal rule (`<hr>`).</span></span> <span data-ttu-id="f15cd-137">Po wprowadzeniu tych zmian strona powinna zawierać składnię deklaratywną dla elementu wzmacniak i ObjectDataSource, która jest podobna do następującej:</span><span class="sxs-lookup"><span data-stu-id="f15cd-137">After making these changes your page should contain declarative syntax for the Repeater and ObjectDataSource that is similar to the following:</span></span>

[!code-aspx[Main](nested-data-web-controls-cs/samples/sample1.aspx)]

<span data-ttu-id="f15cd-138">Na rysunku 4 przedstawiono postęp wyświetlania w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="f15cd-138">Figure 4 shows our progress when viewed through a browser.</span></span>

<span data-ttu-id="f15cd-139">[![każda nazwa i opis kategorii s są wyświetlane według reguły poziomej](nested-data-web-controls-cs/_static/image11.png)](nested-data-web-controls-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="f15cd-139">[![Each Category s Name and Description is Listed, Separated by a Horizontal Rule](nested-data-web-controls-cs/_static/image11.png)](nested-data-web-controls-cs/_static/image10.png)</span></span>

<span data-ttu-id="f15cd-140">**Ilustracja 4**. nazwa i opis kategorii s są wyświetlane według reguły poziomej ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](nested-data-web-controls-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="f15cd-140">**Figure 4**: Each Category s Name and Description is Listed, Separated by a Horizontal Rule ([Click to view full-size image](nested-data-web-controls-cs/_static/image12.png))</span></span>

## <a name="step-2-adding-the-nested-product-repeater"></a><span data-ttu-id="f15cd-141">Krok 2. Dodawanie zagnieżdżonego wzmacniaka produktu</span><span class="sxs-lookup"><span data-stu-id="f15cd-141">Step 2: Adding the Nested Product Repeater</span></span>

<span data-ttu-id="f15cd-142">Po zakończeniu tworzenia listy kategorii następnym zadaniem jest dodanie wzmacniak do `CategoryList` s `ItemTemplate`, który wyświetla informacje o tych produktach należących do odpowiedniej kategorii.</span><span class="sxs-lookup"><span data-stu-id="f15cd-142">With the category listing complete, our next task is to add a Repeater to the `CategoryList` s `ItemTemplate` that displays information about those products belonging to the appropriate category.</span></span> <span data-ttu-id="f15cd-143">Istnieje kilka sposobów, dla których możemy pobrać dane dla tego dwukierunkowego wzmacniaka, z którego korzystamy wkrótce.</span><span class="sxs-lookup"><span data-stu-id="f15cd-143">There are a number of ways we can retrieve the data for this inner Repeater, two of which we'll explore shortly.</span></span> <span data-ttu-id="f15cd-144">Na razie pozwól, aby po prostu utworzyć Wzmacniakę produktów w ramach `ItemTemplate``CategoryList`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-144">For now, let s just create the products Repeater within the `CategoryList` Repeater s `ItemTemplate`.</span></span> <span data-ttu-id="f15cd-145">W szczególności poinformuj, że każdy produkt na liście punktowanej zawiera wzmacniak z każdym elementem listy, w tym nazwę produktu i cenę.</span><span class="sxs-lookup"><span data-stu-id="f15cd-145">Specifically, let s have the product Repeater display each product in a bulleted list with each list item including the product s name and price.</span></span>

<span data-ttu-id="f15cd-146">Aby utworzyć ten wzmacniak, należy ręcznie wprowadzić wewnętrzną składnię i szablony deklaracyjnego wzmacniania w `CategoryList` s `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-146">To create this Repeater we need to manually enter the inner Repeater s declarative syntax and templates into the `CategoryList` s `ItemTemplate`.</span></span> <span data-ttu-id="f15cd-147">Dodaj następującą adiustację w `ItemTemplate``CategoryList` wzmacniak:</span><span class="sxs-lookup"><span data-stu-id="f15cd-147">Add the following markup within the `CategoryList` Repeater s `ItemTemplate`:</span></span>

[!code-aspx[Main](nested-data-web-controls-cs/samples/sample2.aspx)]

## <a name="step-3-binding-the-category-specific-products-to-the-productsbycategorylist-repeater"></a><span data-ttu-id="f15cd-148">Krok 3. powiązanie produktów specyficznych dla kategorii z ProductsByCategoryList</span><span class="sxs-lookup"><span data-stu-id="f15cd-148">Step 3: Binding the Category-Specific Products to the ProductsByCategoryList Repeater</span></span>

<span data-ttu-id="f15cd-149">Jeśli w tym momencie odwiedzasz stronę za pomocą przeglądarki, Twój ekran będzie wyglądać tak samo jak na rysunku 4, ponieważ jeszcze tu powiążemy wszelkie dane z Wzmacniaką.</span><span class="sxs-lookup"><span data-stu-id="f15cd-149">If you visit the page through a browser at this point, your screen will look the same as in Figure 4 because we ve yet to bind any data to the Repeater.</span></span> <span data-ttu-id="f15cd-150">Istnieje kilka sposobów, dzięki którym możemy pobrać odpowiednie rekordy produktu i powiązać je z Wzmacniaką, a bardziej wydajniej niż inne.</span><span class="sxs-lookup"><span data-stu-id="f15cd-150">There are a few ways that we can grab the appropriate product records and bind them to the Repeater, some more efficient than others.</span></span> <span data-ttu-id="f15cd-151">Głównym wyzwaniem w tym miejscu jest przywrócenie odpowiednich produktów dla określonej kategorii.</span><span class="sxs-lookup"><span data-stu-id="f15cd-151">The main challenge here is getting back the appropriate products for the specified category.</span></span>

<span data-ttu-id="f15cd-152">Do danych, które mają być powiązane z wewnętrznym formantem wzmacniania, można uzyskać deklaratywnie dostęp za pośrednictwem elementu ObjectDataSource w `ItemTemplate``CategoryList`ego, lub programowo, na stronie ASP.NET strony z kodem.</span><span class="sxs-lookup"><span data-stu-id="f15cd-152">The data to bind to the inner Repeater control can either be accessed declaratively, through an ObjectDataSource in the `CategoryList` Repeater s `ItemTemplate`, or programmatically, from the ASP.NET page s code-behind page.</span></span> <span data-ttu-id="f15cd-153">Podobnie te dane mogą być powiązane z wewnętrznym Wzmacniakem, w sposób deklaratywny przez wewnętrzną właściwość "Wzmacniake" `DataSourceID` lub za pomocą składniowej funkcji DataBinding lub programowo poprzez odwołanie do wewnętrznego wzmacniak w obsłudze zdarzeń `ItemDataBound` wzmacniak `CategoryList`, programowe Ustawianie jego właściwości `DataSource` i wywoływanie jego metody `DataBind()`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-153">Similarly, this data can be bound to the inner Repeater either declaratively - through the inner Repeater s `DataSourceID` property or through declarative databinding syntax or programmatically by referencing the inner Repeater in the `CategoryList` Repeater s `ItemDataBound` event handler, programmatically setting its `DataSource` property, and calling its `DataBind()` method.</span></span> <span data-ttu-id="f15cd-154">Zapoznaj się z każdą z tych metod.</span><span class="sxs-lookup"><span data-stu-id="f15cd-154">Let s explore each of these approaches.</span></span>

## <a name="accessing-the-data-declaratively-with-an-objectdatasource-control-and-theitemdataboundevent-handler"></a><span data-ttu-id="f15cd-155">Uzyskiwanie dostępu do danych w sposób deklaratywny przy użyciu kontrolki ObjectDataSource i programu obsługi zdarzeń`ItemDataBound`</span><span class="sxs-lookup"><span data-stu-id="f15cd-155">Accessing the Data Declaratively with an ObjectDataSource Control and the`ItemDataBound`Event Handler</span></span>

<span data-ttu-id="f15cd-156">Ponieważ niedawno użyto elementu ObjectDataSource w całości w tej serii samouczków, najbardziej naturalną opcją uzyskiwania dostępu do danych na potrzeby tego przykładu jest naklejenie z elementem ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="f15cd-156">Since we ve used the ObjectDataSource extensively throughout this tutorial series, the most natural choice for accessing data for this example is to stick with the ObjectDataSource.</span></span> <span data-ttu-id="f15cd-157">Klasa `ProductsBLL` ma metodę `GetProductsByCategoryID(categoryID)`, która zwraca informacje o tych produktach, które należą do określonego *`categoryID`* .</span><span class="sxs-lookup"><span data-stu-id="f15cd-157">The `ProductsBLL` class has a `GetProductsByCategoryID(categoryID)` method that returns information about those products that belong to the specified *`categoryID`*.</span></span> <span data-ttu-id="f15cd-158">W związku z tym możemy dodać element ObjectDataSource do `ItemTemplate` `CategoryList` wzmacniak i skonfigurować go do uzyskiwania dostępu do danych z tej metody klasy s.</span><span class="sxs-lookup"><span data-stu-id="f15cd-158">Therefore, we can add an ObjectDataSource to the `CategoryList` Repeater s `ItemTemplate` and configure it to access its data from this class s method.</span></span>

<span data-ttu-id="f15cd-159">Niestety, wzmacniak nie zezwoli na edycję jego szablonów za pomocą widok Projekt, dlatego musimy ręcznie dodać składnię deklaratywną dla tej kontrolki ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="f15cd-159">Unfortunately, the Repeater doesn t allow its templates to be edited through the Design view so we need to add the declarative syntax for this ObjectDataSource control by hand.</span></span> <span data-ttu-id="f15cd-160">Poniższa składnia przedstawia `CategoryList` wzmacniak `ItemTemplate` po dodaniu nowego elementu ObjectDataSource (`ProductsByCategoryDataSource`):</span><span class="sxs-lookup"><span data-stu-id="f15cd-160">The following syntax shows the `CategoryList` Repeater s `ItemTemplate` after adding this new ObjectDataSource (`ProductsByCategoryDataSource`):</span></span>

[!code-aspx[Main](nested-data-web-controls-cs/samples/sample3.aspx)]

<span data-ttu-id="f15cd-161">W przypadku korzystania z metody ObjectDataSource musimy ustawić właściwość `ProductsByCategoryList` wzmacniak `DataSourceID` do `ID` elementu ObjectDataSource (`ProductsByCategoryDataSource`).</span><span class="sxs-lookup"><span data-stu-id="f15cd-161">When using the ObjectDataSource approach we need to set the `ProductsByCategoryList` Repeater s `DataSourceID` property to the `ID` of the ObjectDataSource (`ProductsByCategoryDataSource`).</span></span> <span data-ttu-id="f15cd-162">Należy również zauważyć, że nasz element ObjectDataSource ma `<asp:Parameter>` elementu, który określa *`categoryID`* wartość, która zostanie przeniesiona do metody `GetProductsByCategoryID(categoryID)`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-162">Also, notice that our ObjectDataSource has an `<asp:Parameter>` element that specifies the *`categoryID`* value that will be passed into the `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="f15cd-163">Ale jak określamy tę wartość?</span><span class="sxs-lookup"><span data-stu-id="f15cd-163">But how do we specify this value?</span></span> <span data-ttu-id="f15cd-164">W idealnym przypadku można po prostu ustawić właściwość `DefaultValue` elementu `<asp:Parameter>` przy użyciu składni DataBinding, na przykład:</span><span class="sxs-lookup"><span data-stu-id="f15cd-164">Ideally, we d be able to just set the `DefaultValue` property of the `<asp:Parameter>` element using databinding syntax, like so:</span></span>

[!code-aspx[Main](nested-data-web-controls-cs/samples/sample4.aspx)]

<span data-ttu-id="f15cd-165">Niestety, składnia DataBinding jest prawidłowa tylko w kontrolkach, które mają zdarzenie `DataBinding`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-165">Unfortunately, databinding syntax is only valid in controls that have a `DataBinding` event.</span></span> <span data-ttu-id="f15cd-166">Klasa `Parameter` nie ma takiego zdarzenia, w związku z czym powyższa składnia jest niedozwolona i spowoduje błąd w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="f15cd-166">The `Parameter` class lacks such an event and therefore the above syntax is illegal and will result in a runtime error.</span></span>

<span data-ttu-id="f15cd-167">Aby ustawić tę wartość, musimy utworzyć procedurę obsługi zdarzeń dla zdarzenia `ItemDataBound` `CategoryList`owego.</span><span class="sxs-lookup"><span data-stu-id="f15cd-167">To set this value, we need to create an event handler for the `CategoryList` Repeater s `ItemDataBound` event.</span></span> <span data-ttu-id="f15cd-168">Odwołaj, że zdarzenie `ItemDataBound` wyzwalane jednokrotnie dla każdego elementu powiązanego z Wzmacniaką.</span><span class="sxs-lookup"><span data-stu-id="f15cd-168">Recall that the `ItemDataBound` event fires once for each item bound to the Repeater.</span></span> <span data-ttu-id="f15cd-169">W związku z tym, za każdym razem, gdy to zdarzenie jest wyzwalane przez wzmacniak zewnętrzny, możemy przypisać bieżącą wartość `CategoryID` do parametru `ProductsByCategoryDataSource` ObjectDataSource s `CategoryID`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-169">Therefore, each time this event fires for the outer Repeater we can assign the current `CategoryID` value to the `ProductsByCategoryDataSource` ObjectDataSource s `CategoryID` parameter.</span></span>

<span data-ttu-id="f15cd-170">Utwórz procedurę obsługi zdarzeń dla zdarzenia `CategoryList` wzmacniak `ItemDataBound` za pomocą następującego kodu:</span><span class="sxs-lookup"><span data-stu-id="f15cd-170">Create an event handler for the `CategoryList` Repeater s `ItemDataBound` event with the following code:</span></span>

[!code-csharp[Main](nested-data-web-controls-cs/samples/sample5.cs)]

<span data-ttu-id="f15cd-171">Ta procedura obsługi zdarzeń rozpoczyna się od zagwarantowania, że będziemy odprowadzić się do elementu danych, a nie nagłówka, stopki lub elementu separatora.</span><span class="sxs-lookup"><span data-stu-id="f15cd-171">This event handler starts by ensuring that we re dealing with a data item rather than the header, footer, or separator item.</span></span> <span data-ttu-id="f15cd-172">Następnie odwołujemy się do rzeczywistego wystąpienia `CategoriesRow`, które zostało właśnie powiązane z bieżącym `RepeaterItem`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-172">Next, we reference the actual `CategoriesRow` instance that has just been bound to the current `RepeaterItem`.</span></span> <span data-ttu-id="f15cd-173">Na koniec odwołujemy się do elementu ObjectDataSource w `ItemTemplate` i przypisz jego wartość parametru `CategoryID` do `CategoryID` bieżącej `RepeaterItem`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-173">Finally, we reference the ObjectDataSource in the `ItemTemplate` and assign its `CategoryID` parameter value to the `CategoryID` of the current `RepeaterItem`.</span></span>

<span data-ttu-id="f15cd-174">W przypadku tego programu obsługi zdarzeń `ProductsByCategoryList` wzmacniak w każdym `RepeaterItem` jest powiązany z tymi produktami w kategorii `RepeaterItem` s.</span><span class="sxs-lookup"><span data-stu-id="f15cd-174">With this event handler, the `ProductsByCategoryList` Repeater in each `RepeaterItem` is bound to those products in the `RepeaterItem` s category.</span></span> <span data-ttu-id="f15cd-175">Rysunek 5 pokazuje zrzut ekranu przedstawiający wynikowe dane wyjściowe.</span><span class="sxs-lookup"><span data-stu-id="f15cd-175">Figure 5 shows a screen shot of the resulting output.</span></span>

<span data-ttu-id="f15cd-176">[![zewnętrzny wzmacniak list każdej kategorii; Wewnętrzny element zawiera listę produktów dla tej kategorii](nested-data-web-controls-cs/_static/image14.png)](nested-data-web-controls-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="f15cd-176">[![The Outer Repeater Lists Each Category; the Inner One Lists the Products for that Category](nested-data-web-controls-cs/_static/image14.png)](nested-data-web-controls-cs/_static/image13.png)</span></span>

<span data-ttu-id="f15cd-177">**Ilustracja 5**. wzmacniak zewnętrzny wymienia każdą kategorię; Wewnętrzny element zawiera listę produktów dla tej kategorii ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](nested-data-web-controls-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="f15cd-177">**Figure 5**: The Outer Repeater Lists Each Category; the Inner One Lists the Products for that Category ([Click to view full-size image](nested-data-web-controls-cs/_static/image15.png))</span></span>

## <a name="accessing-the-products-by-category-data-programmatically"></a><span data-ttu-id="f15cd-178">Programistyczne uzyskiwanie dostępu do produktów według kategorii</span><span class="sxs-lookup"><span data-stu-id="f15cd-178">Accessing the Products by Category Data Programmatically</span></span>

<span data-ttu-id="f15cd-179">Zamiast używać elementu ObjectDataSource do pobrania produktów dla bieżącej kategorii, możemy utworzyć metodę w klasie ASP.NET strony powiązanej z kodem (lub w folderze `App_Code` lub w oddzielnym projekcie biblioteki klas), która zwraca odpowiedni zestaw produktów w przypadku przekazywania ich do `CategoryID`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-179">Instead of using an ObjectDataSource to retrieve the products for the current category, we could create a method in our ASP.NET page s code-behind class (or in the `App_Code` folder or in a separate Class Library project) that returns the appropriate set of products when passed in a `CategoryID`.</span></span> <span data-ttu-id="f15cd-180">Załóżmy, że mamy taką metodę w klasie z kodem związanym ze stroną ASP.NET i że została ona nazwana `GetProductsInCategory(categoryID)`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-180">Imagine that we had such a method in our ASP.NET page s code-behind class and that it was named `GetProductsInCategory(categoryID)`.</span></span> <span data-ttu-id="f15cd-181">Przy użyciu tej metody można powiązać produkty z bieżącą kategorią z wewnętrznym Wzmacniakem przy użyciu następującej składni deklaracyjnej:</span><span class="sxs-lookup"><span data-stu-id="f15cd-181">With this method in place we could bind the products for the current category to the inner Repeater using the following declarative syntax:</span></span>

[!code-aspx[Main](nested-data-web-controls-cs/samples/sample6.aspx)]

<span data-ttu-id="f15cd-182">Właściwość `DataSource` wzmacniak używa składni wiązania danych, aby wskazać, że jej dane pochodzą z metody `GetProductsInCategory(categoryID)`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-182">The Repeater s `DataSource` property uses the databinding syntax to indicate that its data comes from the `GetProductsInCategory(categoryID)` method.</span></span> <span data-ttu-id="f15cd-183">Ponieważ `Eval("CategoryID")` zwraca wartość typu `Object`, rzutowanie obiektu na `Integer` przed przekazaniem go do metody `GetProductsInCategory(categoryID)`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-183">Since `Eval("CategoryID")` returns a value of type `Object`, we cast the object to an `Integer` before passing it into the `GetProductsInCategory(categoryID)` method.</span></span> <span data-ttu-id="f15cd-184">Należy pamiętać, że `CategoryID` dostępnym w tym miejscu za pośrednictwem składni wiązania danych jest `CategoryID` w wzmacniake *zewnętrznym* (`CategoryList`), który jest powiązany z rekordami w tabeli `Categories`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-184">Note that the `CategoryID` accessed here via the databinding syntax is the `CategoryID` in the *outer* Repeater (`CategoryList`), the one that s bound to the records in the `Categories` table.</span></span> <span data-ttu-id="f15cd-185">W związku z tym wiemy, że `CategoryID` nie może być wartością `NULL` bazy danych, co oznacza, że możemy odrzucać metodę `Eval` bez sprawdzania, czy będziemy ponownie korzystać z `DBNull`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-185">Therefore, we know that `CategoryID` cannot be a database `NULL` value, which is why we can blindly cast the `Eval` method without checking if we re dealing with a `DBNull`.</span></span>

<span data-ttu-id="f15cd-186">W tym podejściu musimy utworzyć metodę `GetProductsInCategory(categoryID)` i pobrać odpowiedni zestaw produktów z uwzględnieniem podanej *`categoryID`* .</span><span class="sxs-lookup"><span data-stu-id="f15cd-186">With this approach, we need to create the `GetProductsInCategory(categoryID)` method and have it retrieve the appropriate set of products given the supplied *`categoryID`*.</span></span> <span data-ttu-id="f15cd-187">Możemy to zrobić, po prostu zwracając `ProductsDataTable` zwrócone przez metodę `ProductsBLL` klasy s `GetProductsByCategoryID(categoryID)`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-187">We can do this by simply returning the `ProductsDataTable` returned by the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="f15cd-188">Niech s utworzy metodę `GetProductsInCategory(categoryID)` w klasie powiązanej z kodem dla naszej strony `NestedControls.aspx`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-188">Let s create the `GetProductsInCategory(categoryID)` method in the code-behind class for our `NestedControls.aspx` page.</span></span> <span data-ttu-id="f15cd-189">Należy to zrobić przy użyciu następującego kodu:</span><span class="sxs-lookup"><span data-stu-id="f15cd-189">Do so using the following code:</span></span>

[!code-csharp[Main](nested-data-web-controls-cs/samples/sample7.cs)]

<span data-ttu-id="f15cd-190">Ta metoda po prostu tworzy wystąpienie metody `ProductsBLL` i zwraca wyniki metody `GetProductsByCategoryID(categoryID)`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-190">This method simply creates an instance of the `ProductsBLL` method and returns the results of the `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="f15cd-191">Należy zauważyć, że metoda musi być oznaczona `Public` lub `Protected`; Jeśli metoda jest oznaczona `Private`, nie będzie dostępna ze znaczników deklaratywnych ASP.NET strony.</span><span class="sxs-lookup"><span data-stu-id="f15cd-191">Note that the method must be marked `Public` or `Protected`; if the method is marked `Private`, it will not be accessible from the ASP.NET page s declarative markup.</span></span>

<span data-ttu-id="f15cd-192">Po wprowadzeniu tych zmian w celu skorzystania z tej nowej techniki Poświęć chwilę na wyświetlenie strony za pomocą przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="f15cd-192">After making these changes to use this new technique, take a moment to view the page through a browser.</span></span> <span data-ttu-id="f15cd-193">Dane wyjściowe powinny być identyczne z danymi wyjściowymi przy użyciu metody obsługi zdarzeń ObjectDataSource i `ItemDataBound` (patrz z powrotem do rysunku 5, aby wyświetlić zrzut ekranu).</span><span class="sxs-lookup"><span data-stu-id="f15cd-193">The output should be identical to the output when using the ObjectDataSource and `ItemDataBound` event handler approach (refer back to Figure 5 to see a screen shot).</span></span>

> [!NOTE]
> <span data-ttu-id="f15cd-194">Może się wydawać, że pracy utworzyć metodę `GetProductsInCategory(categoryID)` w klasie z kodem ASP.NET strony.</span><span class="sxs-lookup"><span data-stu-id="f15cd-194">It may seem like busywork to create the `GetProductsInCategory(categoryID)` method in the ASP.NET page s code-behind class.</span></span> <span data-ttu-id="f15cd-195">Po wykonaniu tej metody po prostu tworzy wystąpienie klasy `ProductsBLL` i zwraca wyniki metody `GetProductsByCategoryID(categoryID)`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-195">After all, this method simply creates an instance of the `ProductsBLL` class and returns the results of its `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="f15cd-196">Dlaczego nie tylko Wywołaj tę metodę bezpośrednio ze składni wiązania danych w Wzmacniake wewnętrznym, np. `DataSource='<%# ProductsBLL.GetProductsByCategoryID((int)(Eval("CategoryID"))) %>'`?</span><span class="sxs-lookup"><span data-stu-id="f15cd-196">Why not just call this method directly from the databinding syntax in the inner Repeater, like: `DataSource='<%# ProductsBLL.GetProductsByCategoryID((int)(Eval("CategoryID"))) %>'`?</span></span> <span data-ttu-id="f15cd-197">Mimo że ta składnia nie będzie współdziałać z bieżącą implementacją klasy `ProductsBLL` (ponieważ metoda `GetProductsByCategoryID(categoryID)` jest metodą wystąpienia), można zmodyfikować `ProductsBLL` w celu uwzględnienia statycznej metody `GetProductsByCategoryID(categoryID)` lub dodać do klasy statyczną metodę `Instance()`, aby zwrócić nowe wystąpienie klasy `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-197">Although this syntax won't work with our current implementation of the `ProductsBLL` class (since the `GetProductsByCategoryID(categoryID)` method is an instance method), you could modify `ProductsBLL` to include a static `GetProductsByCategoryID(categoryID)` method or have the class include a static `Instance()` method to return a new instance of the `ProductsBLL` class.</span></span>

<span data-ttu-id="f15cd-198">Chociaż takie modyfikacje eliminują potrzebę `GetProductsInCategory(categoryID)` metody w klasie z kodem związanym ze stroną ASP.NET, metoda klasy związanej z kodem zapewnia większą elastyczność podczas pracy z pobranymi danymi, ponieważ wkrótce zobaczymy.</span><span class="sxs-lookup"><span data-stu-id="f15cd-198">While such modifications would eliminate the need for the `GetProductsInCategory(categoryID)` method in the ASP.NET page s code-behind class, the code-behind class method gives us more flexibility in working with the data retrieved, as we'll see shortly.</span></span>

## <a name="retrieving-all-of-the-product-information-at-once"></a><span data-ttu-id="f15cd-199">Pobieranie wszystkich informacji o produkcie jednocześnie</span><span class="sxs-lookup"><span data-stu-id="f15cd-199">Retrieving All of the Product Information at Once</span></span>

<span data-ttu-id="f15cd-200">Dwie metody poprzedniej zostały zbadane, aby pobrały te produkty dla bieżącej kategorii przez nadanie wywołania metody `GetProductsByCategoryID(categoryID)` klasy `ProductsBLL` (pierwsze podejście zostało wykonane przez element ObjectDataSource, drugi za pomocą metody `GetProductsInCategory(categoryID)` w klasie związanej z kodem).</span><span class="sxs-lookup"><span data-stu-id="f15cd-200">The two pervious techniques we ve examined grab those products for the current category by making a call to the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method (the first approach did so through an ObjectDataSource, the second through the `GetProductsInCategory(categoryID)` method in the code-behind class).</span></span> <span data-ttu-id="f15cd-201">Za każdym razem, gdy ta metoda jest wywoływana, Warstwa logiki biznesowej wywołuje do warstwy dostępu do danych, która wysyła zapytanie do bazy danych za pomocą instrukcji SQL, która zwraca wiersze z tabeli `Products`, której pole `CategoryID` pasuje do podanego parametru wejściowego.</span><span class="sxs-lookup"><span data-stu-id="f15cd-201">Each time this method is invoked, the Business Logic Layer calls down to the Data Access Layer, which queries the database with a SQL statement that returns rows from the `Products` table whose `CategoryID` field matches the supplied input parameter.</span></span>

<span data-ttu-id="f15cd-202">W systemie nie ma określonych kategorii *n* , tym podejście polega na tym, że połączenie *n* + 1 wywołuje do bazy danych jedno zapytanie bazy danych, aby uzyskać wszystkie kategorie, a następnie *N* wywołania, aby uzyskać odpowiednie produkty dla każdej kategorii.</span><span class="sxs-lookup"><span data-stu-id="f15cd-202">Given *N* categories in the system, this approach nets *N* + 1 calls to the database one database query to get all of the categories and then *N* calls to get the products specific to each category.</span></span> <span data-ttu-id="f15cd-203">Firma Microsoft może jednak pobrać wszystkie potrzebne dane w zaledwie dwóch wywołaniach, aby pobrać wszystkie kategorie i inne, aby uzyskać wszystkie produkty.</span><span class="sxs-lookup"><span data-stu-id="f15cd-203">We can, however, retrieve all the needed data in just two database calls one call to get all of the categories and another to get all of the products.</span></span> <span data-ttu-id="f15cd-204">Gdy mamy wszystkie produkty, możemy odfiltrować te produkty, aby tylko produkty pasujące do bieżącego `CategoryID` były powiązane z tym Wzmacniakem wewnętrznym kategorii.</span><span class="sxs-lookup"><span data-stu-id="f15cd-204">Once we have all of the products, we can filter those products so that only the products matching the current `CategoryID` are bound to that category s inner Repeater.</span></span>

<span data-ttu-id="f15cd-205">Aby zapewnić tę funkcjonalność, należy jedynie wprowadzić niewielką modyfikację metody `GetProductsInCategory(categoryID)` w naszej klasie z kodem ASP.NET Page s.</span><span class="sxs-lookup"><span data-stu-id="f15cd-205">To provide this functionality, we only need to make a slight modification to the `GetProductsInCategory(categoryID)` method in our ASP.NET page s code-behind class.</span></span> <span data-ttu-id="f15cd-206">Zamiast odwracania wyników metody `GetProductsByCategoryID(categoryID)` klasy `ProductsBLL`, można w pierwszej kolejności uzyskać dostęp do *wszystkich* produktów (jeśli nie były już dostępne), a następnie zwrócić tylko przefiltrowany widok produktów w oparciu o zatwierdzono `CategoryID`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-206">Rather than blindly returning the results of the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method, we can instead first access *all* of the products (if they haven't been accessed already) and then return just the filtered view of the products based on the passed-in `CategoryID`.</span></span>

[!code-csharp[Main](nested-data-web-controls-cs/samples/sample8.cs)]

<span data-ttu-id="f15cd-207">Zwróć uwagę na dodanie zmiennej poziomu strony, `allProducts`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-207">Note the addition of the page-level variable, `allProducts`.</span></span> <span data-ttu-id="f15cd-208">Zawiera informacje o wszystkich produktach i jest wypełniane podczas pierwszego wywołania metody `GetProductsInCategory(categoryID)`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-208">This holds information about all of the products and is populated the first time the `GetProductsInCategory(categoryID)` method is invoked.</span></span> <span data-ttu-id="f15cd-209">Po upewnieniu się, że obiekt `allProducts` został utworzony i wypełniony, Metoda filtruje wyniki tabeli DataTable, tak aby były dostępne tylko wiersze, których `CategoryID` odpowiadają określonym `CategoryID`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-209">After ensuring that the `allProducts` object has been created and populated, the method filters the DataTable s results such that only those rows whose `CategoryID` matches the specified `CategoryID` are accessible.</span></span> <span data-ttu-id="f15cd-210">Takie podejście zmniejsza liczbę prób uzyskania dostępu do bazy danych z *N* + 1 do dwóch.</span><span class="sxs-lookup"><span data-stu-id="f15cd-210">This approach reduces the number of times the database is accessed from *N* + 1 down to two.</span></span>

<span data-ttu-id="f15cd-211">To ulepszenie nie wprowadza żadnych zmian do renderowanego oznakowania strony ani nie zmniejsza liczby rekordów niż inne podejście.</span><span class="sxs-lookup"><span data-stu-id="f15cd-211">This enhancement does not introduce any change to the rendered markup of the page, nor does it bring back fewer records than the other approach.</span></span> <span data-ttu-id="f15cd-212">Po prostu zmniejsza liczbę wywołań do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f15cd-212">It simply reduces the number of calls to the database.</span></span>

> [!NOTE]
> <span data-ttu-id="f15cd-213">Jeden z nich może mieć intuicyjny powód, aby zmniejszyć liczbę dostępu do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f15cd-213">One might intuitively reason that reducing the number of database accesses would assuredly improve performance.</span></span> <span data-ttu-id="f15cd-214">Jednak taka sytuacja może nie być taka sama.</span><span class="sxs-lookup"><span data-stu-id="f15cd-214">However, this might not be the case.</span></span> <span data-ttu-id="f15cd-215">Jeśli masz dużą liczbę produktów, których `CategoryID` jest `NULL`, na przykład wywołanie metody `GetProducts` zwraca liczbę produktów, które nigdy nie są wyświetlane.</span><span class="sxs-lookup"><span data-stu-id="f15cd-215">If you have a large number of products whose `CategoryID` is `NULL`, for example, then the call to the `GetProducts` method returns a number of products that are never displayed.</span></span> <span data-ttu-id="f15cd-216">Ponadto zwracanie wszystkich produktów może być wasteful, jeśli zostanie wyświetlony tylko podzbiór kategorii, co może być przypadekem, jeśli wdrożono stronicowanie.</span><span class="sxs-lookup"><span data-stu-id="f15cd-216">Moreover, returning all of the products can be wasteful if you re only showing a subset of the categories, which might be the case if you have implemented paging.</span></span>

<span data-ttu-id="f15cd-217">Tak jak zawsze, gdy chodzi o analizowanie wydajności dwóch technik, jedyną miarą Surefire jest uruchamianie kontrolowanych testów, które są dostosowane do typowych scenariuszy przypadków aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f15cd-217">As always, when it comes to analyzing the performance of two techniques, the only surefire measure is to run controlled tests tailored for your application s common case scenarios.</span></span>

## <a name="summary"></a><span data-ttu-id="f15cd-218">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="f15cd-218">Summary</span></span>

<span data-ttu-id="f15cd-219">W tym samouczku przedstawiono sposób zagnieżdżania jednej kontrolki sieci Web danych w innym, szczególnie badanie, w jaki sposób mamy zewnętrzny wzmacniak wyświetlić element dla każdej kategorii z wewnętrznym Wzmacniakem zawierającym listę produktów dla każdej kategorii na liście punktowanej.</span><span class="sxs-lookup"><span data-stu-id="f15cd-219">In this tutorial we saw how to nest one data Web control within another, specifically examining how to have an outer Repeater display an item for each category with an inner Repeater listing the products for each category in a bulleted list.</span></span> <span data-ttu-id="f15cd-220">Głównym wyzwaniem w tworzeniu zagnieżdżonego interfejsu użytkownika jest uzyskiwanie dostępu do i powiązywanie prawidłowych danych w wewnętrznej kontrolce danych w sieci Web.</span><span class="sxs-lookup"><span data-stu-id="f15cd-220">The main challenge in building a nested user interface lies in accessing and binding the correct data to the inner data Web control.</span></span> <span data-ttu-id="f15cd-221">Dostępne są różne techniki, z których każda została sprawdzona w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="f15cd-221">There are a variety of techniques available, two of which we examined in this tutorial.</span></span> <span data-ttu-id="f15cd-222">Pierwsze podejście zbadał użycie elementu ObjectDataSource w zewnętrznym formancie sieci Web `ItemTemplate`, który został powiązany z wewnętrzną kontrolką danych w sieci Web za pomocą właściwości `DataSourceID`.</span><span class="sxs-lookup"><span data-stu-id="f15cd-222">The first approach examined used an ObjectDataSource in the outer data Web control s `ItemTemplate` that was bound to the inner data Web control through its `DataSourceID` property.</span></span> <span data-ttu-id="f15cd-223">Druga technika uzyskała dostęp do danych za pośrednictwem metody w klasie z kodem ASP.NET Page s.</span><span class="sxs-lookup"><span data-stu-id="f15cd-223">The second technique accessed the data via a method in the ASP.NET page s code-behind class.</span></span> <span data-ttu-id="f15cd-224">Tę metodę można następnie powiązać z właściwością wewnętrznej formantu sieci Web danych `DataSource` za pomocą składni DataBinding.</span><span class="sxs-lookup"><span data-stu-id="f15cd-224">This method can then be bound to the inner data Web control s `DataSource` property through databinding syntax.</span></span>

<span data-ttu-id="f15cd-225">Chociaż zagnieżdżony interfejs użytkownika, który został zbadany w tym samouczku, użył elementu wzmacniak zagnieżdżonego w obrębie wzmacniaka, techniki te można rozszerzyć na inne kontrolki sieci Web danych.</span><span class="sxs-lookup"><span data-stu-id="f15cd-225">While the nested user interface examined in this tutorial used a Repeater nested within a Repeater, these techniques can be extended to the other data Web controls.</span></span> <span data-ttu-id="f15cd-226">Można zagnieżdżać wzmacniak w widoku GridView lub GridView w obrębie elementu DataList i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="f15cd-226">You can nest a Repeater within a GridView, or a GridView within a DataList, and so on.</span></span>

<span data-ttu-id="f15cd-227">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="f15cd-227">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="f15cd-228">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="f15cd-228">About the Author</span></span>

<span data-ttu-id="f15cd-229">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor siedmiu grup ASP/ASP. NET Books i założyciel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="f15cd-229">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f15cd-230">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="f15cd-230">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f15cd-231">Jego Najnowsza książka to [*Sams ASP.NET 2,0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="f15cd-231">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="f15cd-232">Można go osiągnąć w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f15cd-232">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="f15cd-233">lub za pośrednictwem swojego blogu, który można znaleźć w [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="f15cd-233">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="f15cd-234">Specjalne podziękowania</span><span class="sxs-lookup"><span data-stu-id="f15cd-234">Special Thanks To</span></span>

<span data-ttu-id="f15cd-235">Ta seria samouczków została sprawdzona przez wielu przydatnych recenzentów.</span><span class="sxs-lookup"><span data-stu-id="f15cd-235">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="f15cd-236">Recenzenci liderzy dla tego samouczka to Zack Kowalski i Liz Shulok.</span><span class="sxs-lookup"><span data-stu-id="f15cd-236">Lead reviewers for this tutorial were Zack Jones and Liz Shulok.</span></span> <span data-ttu-id="f15cd-237">Chcesz przeglądać moje nadchodzące artykuły MSDN?</span><span class="sxs-lookup"><span data-stu-id="f15cd-237">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="f15cd-238">Jeśli tak, upuść mi linię w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f15cd-238">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f15cd-239">[Poprzednie](showing-multiple-records-per-row-with-the-datalist-control-cs.md)
> [dalej](displaying-data-with-the-datalist-and-repeater-controls-vb.md)</span><span class="sxs-lookup"><span data-stu-id="f15cd-239">[Previous](showing-multiple-records-per-row-with-the-datalist-control-cs.md)
[Next](displaying-data-with-the-datalist-and-repeater-controls-vb.md)</span></span>

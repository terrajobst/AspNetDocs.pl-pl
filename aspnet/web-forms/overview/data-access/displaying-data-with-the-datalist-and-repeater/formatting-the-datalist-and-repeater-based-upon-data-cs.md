---
uid: web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs
title: Formatowanie elementu DataList i wzmacniak na podstawie danych (C#) | Microsoft Docs
author: rick-anderson
description: W tym samouczku poznasz Przykłady sposobu formatowania wyglądu kontrolek DataList i wzmacniak przy użyciu funkcji formatowania z...
ms.author: riande
ms.date: 09/13/2006
ms.assetid: 83e3d759-82b8-41e6-8d62-f0f4b3edec41
msc.legacyurl: /web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs
msc.type: authoredcontent
ms.openlocfilehash: 68de3450ed97fc7bd0efb27e089d9db8e3e85fb0
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78611637"
---
# <a name="formatting-the-datalist-and-repeater-based-upon-data-c"></a><span data-ttu-id="1f545-103">Formatowanie elementów DataList i Repeater na podstawie danych (C#)</span><span class="sxs-lookup"><span data-stu-id="1f545-103">Formatting the DataList and Repeater Based Upon Data (C#)</span></span>

<span data-ttu-id="1f545-104">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="1f545-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="1f545-105">[Pobierz przykładową aplikację](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_30_CS.exe) lub [Pobierz plik PDF](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/datatutorial30cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="1f545-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_30_CS.exe) or [Download PDF](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/datatutorial30cs1.pdf)</span></span>

> <span data-ttu-id="1f545-106">W tym samouczku przejdziemy przez Przykłady sposobu formatowania wyglądu kontrolek DataList i wzmacniak przy użyciu funkcji formatowania w szablonach lub przez obsługę zdarzenia powiązanego z danymi.</span><span class="sxs-lookup"><span data-stu-id="1f545-106">In this tutorial we'll step through examples of how we format the appearance of the DataList and Repeater controls, either by using formatting functions within templates or by handling the DataBound event.</span></span>

## <a name="introduction"></a><span data-ttu-id="1f545-107">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="1f545-107">Introduction</span></span>

<span data-ttu-id="1f545-108">Jak zostało to opisane w poprzednim samouczku, element DataList oferuje wiele właściwości związanych z stylem, które wpływają na jego wygląd.</span><span class="sxs-lookup"><span data-stu-id="1f545-108">As we saw in the preceding tutorial, the DataList offers a number of style-related properties that affect its appearance.</span></span> <span data-ttu-id="1f545-109">W szczególności przedstawiono sposób przypisywania domyślnych klas CSS do właściwości DataList s `HeaderStyle`, `ItemStyle`, `AlternatingItemStyle`i `SelectedItemStyle`.</span><span class="sxs-lookup"><span data-stu-id="1f545-109">In particular, we saw how to assign default CSS classes to the DataList s `HeaderStyle`, `ItemStyle`, `AlternatingItemStyle`, and `SelectedItemStyle` properties.</span></span> <span data-ttu-id="1f545-110">Oprócz tych czterech właściwości, element DataList zawiera wiele innych właściwości związanych z stylem, takich jak `Font`, `ForeColor`, `BackColor`i `BorderWidth`, aby nazwać kilka.</span><span class="sxs-lookup"><span data-stu-id="1f545-110">In addition to these four properties, the DataList includes a number of other style-related properties, such as `Font`, `ForeColor`, `BackColor`, and `BorderWidth`, to name a few.</span></span> <span data-ttu-id="1f545-111">Formant wzmacniania nie zawiera żadnych właściwości związanych z stylem.</span><span class="sxs-lookup"><span data-stu-id="1f545-111">The Repeater control does not contain any style-related properties.</span></span> <span data-ttu-id="1f545-112">Wszystkie takie ustawienia stylu muszą być wprowadzane bezpośrednio w znacznikach w szablonach wzmacniania.</span><span class="sxs-lookup"><span data-stu-id="1f545-112">Any such style settings must be made directly within the markup in the Repeater s templates.</span></span>

<span data-ttu-id="1f545-113">Często jednak, jak dane powinny być formatowane, zależy od samych danych.</span><span class="sxs-lookup"><span data-stu-id="1f545-113">Often, though, how data should be formatted depends on the data itself.</span></span> <span data-ttu-id="1f545-114">Na przykład podczas tworzenia listy produktów firma Microsoft może chcieć wyświetlić informacje o produkcie w kolorze szarej czcionki, jeśli jest on nieaktywny lub chcemy wyróżnić wartość `UnitsInStock`, jeśli jest równa zero.</span><span class="sxs-lookup"><span data-stu-id="1f545-114">For example, when listing products we might want to display the product information in a light gray font color if it is discontinued, or we may want to highlight the `UnitsInStock` value if it is zero.</span></span> <span data-ttu-id="1f545-115">Jak pokazano w poprzednich samouczkach, widok GridView, DetailsView i FormView oferuje dwa różne sposoby formatowania ich wyglądu w oparciu o dane:</span><span class="sxs-lookup"><span data-stu-id="1f545-115">As we saw in previous tutorials, the GridView, DetailsView, and FormView offer two distinct ways to format their appearance based on their data:</span></span>

- <span data-ttu-id="1f545-116">**Zdarzenie `DataBound`** Utwórz procedurę obsługi zdarzeń dla odpowiedniego zdarzenia `DataBound`, które zostanie wyzwolone po powiązaniu danych z każdym elementem (dla widoku GridView była to zdarzenie `RowDataBound`; dla elementu DataList i wzmacniak jest to zdarzenie `ItemDataBound`).</span><span class="sxs-lookup"><span data-stu-id="1f545-116">**The `DataBound` event** create an event handler for the appropriate `DataBound` event, which fires after the data has been bound to each item (for the GridView it was the `RowDataBound` event; for the DataList and Repeater it is the `ItemDataBound` event).</span></span> <span data-ttu-id="1f545-117">W tym obsłudze zdarzeń można zbadać, że dane są powiązane, a podejmowane decyzje dotyczące formatowania.</span><span class="sxs-lookup"><span data-stu-id="1f545-117">In that event handler, the data just bound can be examined and formatting decisions made.</span></span> <span data-ttu-id="1f545-118">Ta technika została sprawdzona w przypadku [formatowania niestandardowego na podstawie](../custom-formatting/custom-formatting-based-upon-data-cs.md) samouczka dotyczącego danych.</span><span class="sxs-lookup"><span data-stu-id="1f545-118">We examined this technique in the [Custom Formatting Based Upon Data](../custom-formatting/custom-formatting-based-upon-data-cs.md) tutorial.</span></span>
- <span data-ttu-id="1f545-119">Funkcja **formatowania w szablonach** w przypadku używania używanie TemplateField w kontrolkach DetailsView lub GridView, lub szablon w kontrolce FormView, możemy dodać funkcję formatowania do klasy "ASP.NET" powiązanej z kodem strony, warstwy logiki biznesowej lub innej biblioteki klas dostępnej z aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="1f545-119">**Formatting Functions in Templates** when using TemplateFields in the DetailsView or GridView controls, or a template in the FormView control, we can add a formatting function to the ASP.NET page s code-behind class, the Business Logic Layer, or any other class library that is accessible from the web application.</span></span> <span data-ttu-id="1f545-120">Ta funkcja formatowania może akceptować dowolną liczbę parametrów wejściowych, ale musi zwrócić kod HTML, aby renderować w szablonie.</span><span class="sxs-lookup"><span data-stu-id="1f545-120">This formatting function can accept an arbitrary number of input parameters, but must return the HTML to render in the template.</span></span> <span data-ttu-id="1f545-121">Funkcja formatowania została najpierw sprawdzona w [Używanie TemplateField Using w samouczku kontrolki GridView](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="1f545-121">Formatting functions were first examined in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) tutorial.</span></span>

<span data-ttu-id="1f545-122">Obie te techniki formatowania są dostępne z kontrolkami DataList i wzmacniak.</span><span class="sxs-lookup"><span data-stu-id="1f545-122">Both of these formatting techniques are available with the DataList and Repeater controls.</span></span> <span data-ttu-id="1f545-123">W tym samouczku przejdziemy do przykładów przy użyciu obu technik dla obu formantów.</span><span class="sxs-lookup"><span data-stu-id="1f545-123">In this tutorial we'll step through examples using both techniques for both controls.</span></span>

## <a name="using-theitemdataboundevent-handler"></a><span data-ttu-id="1f545-124">Korzystanie z programu obsługi zdarzeń`ItemDataBound`</span><span class="sxs-lookup"><span data-stu-id="1f545-124">Using the`ItemDataBound`Event Handler</span></span>

<span data-ttu-id="1f545-125">Gdy dane są powiązane z elementem DataList, albo z kontrolki źródła danych lub programowo przypisują dane do właściwości Control-`DataSource` i wywołując metodę `DataBind()`, wyzwalane jest zdarzenie DataList s `DataBinding`, zostało ono wyliczone, a każdy rekord danych jest powiązany z elementem DataList.</span><span class="sxs-lookup"><span data-stu-id="1f545-125">When data is bound to a DataList, either from a data source control or through programmatically assigning data to the control s `DataSource` property and calling its `DataBind()` method, the DataList s `DataBinding` event fires, the data source enumerated, and each data record is bound to the DataList.</span></span> <span data-ttu-id="1f545-126">Dla każdego rekordu w źródle danych, element DataList tworzy obiekt [`DataListItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.aspx) , który następnie jest powiązany z bieżącym rekordem.</span><span class="sxs-lookup"><span data-stu-id="1f545-126">For each record in the data source, the DataList creates a [`DataListItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.aspx) object that is then bound to the current record.</span></span> <span data-ttu-id="1f545-127">W trakcie tego procesu, ta DataList wywołuje dwa zdarzenia:</span><span class="sxs-lookup"><span data-stu-id="1f545-127">During this process, the DataList raises two events:</span></span>

- <span data-ttu-id="1f545-128">**`ItemCreated`** uruchamiany po utworzeniu `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="1f545-128">**`ItemCreated`** fires after the `DataListItem` has been created</span></span>
- <span data-ttu-id="1f545-129">**`ItemDataBound`** uruchamiany po powiązaniu bieżącego rekordu z `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="1f545-129">**`ItemDataBound`** fires after the current record has been bound to the `DataListItem`</span></span>

<span data-ttu-id="1f545-130">Poniższe kroki przedstawiają proces powiązania danych dla formantu DataList.</span><span class="sxs-lookup"><span data-stu-id="1f545-130">The following steps outline the data binding process for the DataList control.</span></span>

1. <span data-ttu-id="1f545-131">Wyzwolono [zdarzenie`DataBinding`](https://msdn.microsoft.com/library/system.web.ui.control.databinding.aspx) DataList s</span><span class="sxs-lookup"><span data-stu-id="1f545-131">The DataList s [`DataBinding` event](https://msdn.microsoft.com/library/system.web.ui.control.databinding.aspx) fires</span></span>
2. <span data-ttu-id="1f545-132">Dane są powiązane z elementem DataList</span><span class="sxs-lookup"><span data-stu-id="1f545-132">The data is bound to the DataList</span></span>  
  
   <span data-ttu-id="1f545-133">Dla każdego rekordu w źródle danych</span><span class="sxs-lookup"><span data-stu-id="1f545-133">For each record in the data source</span></span> 

    1. <span data-ttu-id="1f545-134">Tworzenie obiektu `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="1f545-134">Create a `DataListItem` object</span></span>
    2. <span data-ttu-id="1f545-135">Wyzwalanie [zdarzenia`ItemCreated`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemcreated.aspx)</span><span class="sxs-lookup"><span data-stu-id="1f545-135">Fire the [`ItemCreated` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemcreated.aspx)</span></span>
    3. <span data-ttu-id="1f545-136">Powiąż rekord z `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="1f545-136">Bind the record to the `DataListItem`</span></span>
    4. <span data-ttu-id="1f545-137">Wyzwalanie [zdarzenia`ItemDataBound`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)</span><span class="sxs-lookup"><span data-stu-id="1f545-137">Fire the [`ItemDataBound` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)</span></span>
    5. <span data-ttu-id="1f545-138">Dodawanie `DataListItem` do kolekcji `Items`</span><span class="sxs-lookup"><span data-stu-id="1f545-138">Add the `DataListItem` to the `Items` collection</span></span>

<span data-ttu-id="1f545-139">Po powiązaniu danych z formantem wzmacniania Postęp przechodzi przez dokładnie tę samą sekwencję kroków.</span><span class="sxs-lookup"><span data-stu-id="1f545-139">When binding data to the Repeater control, it progresses through the exact same sequence of steps.</span></span> <span data-ttu-id="1f545-140">Jedyną różnicą jest to, że zamiast tworzonych wystąpień `DataListItem` wzmacniak używa [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem(VS.80).aspx)s.</span><span class="sxs-lookup"><span data-stu-id="1f545-140">The only difference is that instead of `DataListItem` instances being created, the Repeater uses [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem(VS.80).aspx)s.</span></span>

> [!NOTE]
> <span data-ttu-id="1f545-141">Czytnik uważni mógł zauważyć niewielką anomalię między sekwencją kroków, które wykonywanych, gdy element DataList i wzmacniak są powiązane z danymi, a gdy GridView jest powiązany z danymi.</span><span class="sxs-lookup"><span data-stu-id="1f545-141">The astute reader may have noticed a slight anomaly between the sequence of steps that transpire when the DataList and Repeater are bound to data versus when the GridView is bound to data.</span></span> <span data-ttu-id="1f545-142">Na końcu procesu powiązania danych element GridView wywołuje zdarzenie `DataBound`; Jednakże ani formant DataList ani wzmacniak nie mają takiego zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="1f545-142">At the tail end of the data binding process, the GridView raises the `DataBound` event; however, neither the DataList nor Repeater control have such an event.</span></span> <span data-ttu-id="1f545-143">Wynika to z faktu, że kontrolki DataList i wzmacniak zostały utworzone z powrotem w ASP.NET 1. x.</span><span class="sxs-lookup"><span data-stu-id="1f545-143">This is because the DataList and Repeater controls were created back in the ASP.NET 1.x timeframe, before the pre- and post-level event handler pattern had become common.</span></span>

<span data-ttu-id="1f545-144">Podobnie jak w przypadku widoku GridView, jedną z opcji formatowania na podstawie danych jest utworzenie programu obsługi zdarzeń dla zdarzenia `ItemDataBound`.</span><span class="sxs-lookup"><span data-stu-id="1f545-144">Like with the GridView, one option for formatting based on the data is to create an event handler for the `ItemDataBound` event.</span></span> <span data-ttu-id="1f545-145">Ta procedura obsługi zdarzeń sprawdzi dane, które zostały właśnie powiązane z `DataListItem` lub `RepeaterItem` i wpływają na formatowanie kontrolki zgodnie z wymaganiami.</span><span class="sxs-lookup"><span data-stu-id="1f545-145">This event handler would inspect the data that had just been bound to the `DataListItem` or `RepeaterItem` and affect the formatting of the control as needed.</span></span>

<span data-ttu-id="1f545-146">W przypadku formantu DataList zmiany formatowania dla całego elementu można zaimplementować przy użyciu właściwości `DataListItem` s, które obejmują `Font`standardowe, `ForeColor`, `BackColor`, `CssClass`itd.</span><span class="sxs-lookup"><span data-stu-id="1f545-146">For the DataList control, formatting changes for the entire item can be implemented using the `DataListItem` s style-related properties, which include the standard `Font`, `ForeColor`, `BackColor`, `CssClass`, and so on.</span></span> <span data-ttu-id="1f545-147">Aby mieć wpływ na formatowanie określonych kontrolek sieci Web w ramach szablonu DataList s, musimy programowo uzyskać dostęp do stylu tych formantów sieci Web i zmodyfikować go.</span><span class="sxs-lookup"><span data-stu-id="1f545-147">To affect the formatting of particular Web controls within the DataList s template, we need to programmatically access and modify the style of those Web controls.</span></span> <span data-ttu-id="1f545-148">Znaleźliśmy, jak to zrobić z powrotem w *niestandardowym formatowaniu opartym* na samouczku danych.</span><span class="sxs-lookup"><span data-stu-id="1f545-148">We saw how to accomplish this back in the *Custom Formatting Based Upon Data* tutorial.</span></span> <span data-ttu-id="1f545-149">Podobnie jak w przypadku kontrolki wzmacniak, Klasa `RepeaterItem` nie ma właściwości związanych z stylem; w związku z tym wszystkie zmiany dotyczące stylu wprowadzone do `RepeaterItem` w programie obsługi zdarzeń `ItemDataBound` muszą zostać wykonane przez programowe uzyskiwanie dostępu do formantów sieci Web w ramach szablonu i aktualizowanie ich.</span><span class="sxs-lookup"><span data-stu-id="1f545-149">Like the Repeater control, the `RepeaterItem` class has no style-related properties; therefore, all style-related changes made to a `RepeaterItem` in the `ItemDataBound` event handler must be done by programmatically accessing and updating Web controls within the template.</span></span>

<span data-ttu-id="1f545-150">Ponieważ technika formatowania `ItemDataBound` dla elementu DataList i wzmacniak jest niemal identyczna, nasz przykład zakoncentruje się na użyciu elementu DataList.</span><span class="sxs-lookup"><span data-stu-id="1f545-150">Since the `ItemDataBound` formatting technique for the DataList and Repeater are virtually identical, our example will focus on using the DataList.</span></span>

## <a name="step-1-displaying-product-information-in-the-datalist"></a><span data-ttu-id="1f545-151">Krok 1. Wyświetlanie informacji o produkcie w elemencie DataList</span><span class="sxs-lookup"><span data-stu-id="1f545-151">Step 1: Displaying Product Information in the DataList</span></span>

<span data-ttu-id="1f545-152">Przed zajmować się formatowaniem należy najpierw utworzyć stronę, która używa elementu DataList do wyświetlania informacji o produkcie.</span><span class="sxs-lookup"><span data-stu-id="1f545-152">Before we worry about the formatting, let s first create a page that uses a DataList to display product information.</span></span> <span data-ttu-id="1f545-153">W [poprzednim samouczku](displaying-data-with-the-datalist-and-repeater-controls-cs.md) utworzyliśmy element DataList, którego `ItemTemplate` wyświetlać każdą nazwę produktu, kategorię, dostawcę, ilość na jednostkę i cenę.</span><span class="sxs-lookup"><span data-stu-id="1f545-153">In the [previous tutorial](displaying-data-with-the-datalist-and-repeater-controls-cs.md) we created a DataList whose `ItemTemplate` displayed each product s name, category, supplier, quantity per unit, and price.</span></span> <span data-ttu-id="1f545-154">Pozwól, aby w tym samouczku powtórzyć tę funkcję.</span><span class="sxs-lookup"><span data-stu-id="1f545-154">Let s repeat this functionality here in this tutorial.</span></span> <span data-ttu-id="1f545-155">Aby to osiągnąć, można utworzyć ponownie element DataList i jego element ObjectDataSource od podstaw albo skopiować te kontrolki ze strony utworzonej w poprzednim samouczku (`Basics.aspx`) i wkleić je do strony dla tego samouczka (`Formatting.aspx`).</span><span class="sxs-lookup"><span data-stu-id="1f545-155">To accomplish this, you can either recreate the DataList and its ObjectDataSource from scratch, or you can copy over those controls from the page created in the previous tutorial (`Basics.aspx`) and paste them into the page for this tutorial (`Formatting.aspx`).</span></span>

<span data-ttu-id="1f545-156">Po przeprowadzeniu replikacji funkcji DataList i ObjectDataSource z `Basics.aspx` do `Formatting.aspx`Poświęć chwilę na zmianę właściwości `ID` DataList s z `DataList1` na bardziej opisowy `ItemDataBoundFormattingExample`.</span><span class="sxs-lookup"><span data-stu-id="1f545-156">Once you have replicated the DataList and ObjectDataSource functionality from `Basics.aspx` into `Formatting.aspx`, take a moment to change the DataList s `ID` property from `DataList1` to a more descriptive `ItemDataBoundFormattingExample`.</span></span> <span data-ttu-id="1f545-157">Następnie Wyświetl element DataList w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="1f545-157">Next, view the DataList in a browser.</span></span> <span data-ttu-id="1f545-158">Jak pokazano na rysunku 1, jedyną różnicą formatowania między każdym produktem jest to, że kolor tła jest alternatywny.</span><span class="sxs-lookup"><span data-stu-id="1f545-158">As Figure 1 shows, the only formatting difference between each product is that the background color alternates.</span></span>

<span data-ttu-id="1f545-159">[![produkty są wymienione w kontrolce DataList](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image2.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="1f545-159">[![The Products are Listed in the DataList Control](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image2.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image1.png)</span></span>

<span data-ttu-id="1f545-160">**Rysunek 1**. produkty są wymienione w kontrolce DataList ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="1f545-160">**Figure 1**: The Products are Listed in the DataList Control ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image3.png))</span></span>

<span data-ttu-id="1f545-161">W tym samouczku pomożemy sformatować element DataList w taki sposób, że każdy produkt o cenie mniejszej niż $20,00 będzie miał wartość Nazwa i cena jednostkowa wyróżnione kolorem żółtym.</span><span class="sxs-lookup"><span data-stu-id="1f545-161">For this tutorial, let s format the DataList such that any products with a price less than $20.00 will have both its name and unit price highlighted yellow.</span></span>

## <a name="step-2-programmatically-determining-the-value-of-the-data-in-the-itemdatabound-event-handler"></a><span data-ttu-id="1f545-162">Krok 2. programistyczne Określanie wartości danych w programie obsługi zdarzeń ItemDataBound</span><span class="sxs-lookup"><span data-stu-id="1f545-162">Step 2: Programmatically Determining the Value of the Data in the ItemDataBound Event Handler</span></span>

<span data-ttu-id="1f545-163">Ze względu na to, że tylko produkty z ceną poniżej $20,00 będą miały zastosowane niestandardowe formatowanie, musi być w stanie określić cenę produktu s.</span><span class="sxs-lookup"><span data-stu-id="1f545-163">Since only those products with a price under $20.00 will have the custom formatting applied, we must be able to determine each product s price.</span></span> <span data-ttu-id="1f545-164">Podczas wiązania danych z elementem DataList element DataList wylicza rekordy w źródle danych, a dla każdego rekordu tworzy wystąpienie `DataListItem`, wiążąc rekord źródła danych z `DataListItem`.</span><span class="sxs-lookup"><span data-stu-id="1f545-164">When binding data to a DataList, the DataList enumerates the records in its data source and, for each record, creates a `DataListItem` instance, binding the data source record to the `DataListItem`.</span></span> <span data-ttu-id="1f545-165">Gdy dane określonego rekordu s zostaną powiązane z bieżącym obiektem `DataListItem`, zostanie wyzwolone zdarzenie "`ItemDataBound`a DataList s".</span><span class="sxs-lookup"><span data-stu-id="1f545-165">After the particular record s data has been bound to the current `DataListItem` object, the DataList s `ItemDataBound` event is fired.</span></span> <span data-ttu-id="1f545-166">Możemy utworzyć procedurę obsługi zdarzeń dla tego zdarzenia, aby sprawdzić wartości danych dla bieżącego `DataListItem` i, na podstawie tych wartości, wprowadzić wszelkie zmiany formatowania.</span><span class="sxs-lookup"><span data-stu-id="1f545-166">We can create an event handler for this event to inspect the data values for the current `DataListItem` and, based upon those values, make any formatting changes necessary.</span></span>

<span data-ttu-id="1f545-167">Utwórz zdarzenie `ItemDataBound` dla elementu DataList i Dodaj następujący kod:</span><span class="sxs-lookup"><span data-stu-id="1f545-167">Create an `ItemDataBound` event for the DataList and add the following code:</span></span>

[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample1.cs)]

<span data-ttu-id="1f545-168">Chociaż koncepcja i semantyka za pomocą procedury obsługi zdarzeń `ItemDataBound` DataList są takie same jak te, które są używane przez program obsługi zdarzeń GridView s `RowDataBound` w *niestandardowym formatowaniu opartym* na samouczku danych, Składnia różni się nieznacznie.</span><span class="sxs-lookup"><span data-stu-id="1f545-168">While the concept and semantics behind the DataList s `ItemDataBound` event handler are the same as those used by the GridView s `RowDataBound` event handler in the *Custom Formatting Based Upon Data* tutorial, the syntax differs slightly.</span></span> <span data-ttu-id="1f545-169">Po wyjściu zdarzenia `ItemDataBound`, `DataListItem` jedynie powiązane z danymi są przesyłane do odpowiedniej procedury obsługi zdarzeń za pośrednictwem `e.Item` (zamiast `e.Row`, podobnie jak w przypadku programu obsługi zdarzeń `RowDataBound` GridView s).</span><span class="sxs-lookup"><span data-stu-id="1f545-169">When the `ItemDataBound` event fires, the `DataListItem` just bound to data is passed into corresponding event handler via `e.Item` (instead of `e.Row`, as with the GridView s `RowDataBound` event handler).</span></span> <span data-ttu-id="1f545-170">Procedura obsługi zdarzeń `ItemDataBound` DataList s jest wyzwalana dla *każdego* wiersza dodanego do elementu DataList, w tym wierszy nagłówka, wierszy stopki i wierszy separatora.</span><span class="sxs-lookup"><span data-stu-id="1f545-170">The DataList s `ItemDataBound` event handler fires for *each* row added to the DataList, including header rows, footer rows, and separator rows.</span></span> <span data-ttu-id="1f545-171">Informacje o produkcie są jednak powiązane tylko z wierszami danych.</span><span class="sxs-lookup"><span data-stu-id="1f545-171">However, the product information is only bound to the data rows.</span></span> <span data-ttu-id="1f545-172">W związku z tym, w przypadku użycia zdarzenia `ItemDataBound` do sprawdzenia danych powiązanych z elementem DataList, musimy najpierw upewnić się, że pracujemy nad danymi.</span><span class="sxs-lookup"><span data-stu-id="1f545-172">Therefore, when using the `ItemDataBound` event to inspect the data bound to the DataList, we need to first ensure that we re working with a data item.</span></span> <span data-ttu-id="1f545-173">Można to osiągnąć, sprawdzając [właściwość`ItemType`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.itemtype.aspx)`DataListItem` s, która może mieć jedną z [następujących ośmiu wartości](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listitemtype.aspx):</span><span class="sxs-lookup"><span data-stu-id="1f545-173">This can be accomplished by checking the `DataListItem` s [`ItemType` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.itemtype.aspx), which can have one of [the following eight values](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listitemtype.aspx):</span></span>

- `AlternatingItem`
- `EditItem`
- `Footer`
- `Header`
- `Item`
- `Pager`
- `SelectedItem`
- `Separator`

<span data-ttu-id="1f545-174">Oba `Item` i `AlternatingItem``DataListItem` s korzeń elementy danych DataList s.</span><span class="sxs-lookup"><span data-stu-id="1f545-174">Both `Item` and `AlternatingItem``DataListItem` s makeup the DataList s data items.</span></span> <span data-ttu-id="1f545-175">Przy założeniu, że pracujemy z `Item` lub `AlternatingItem`, uzyskujemy dostęp do rzeczywistego wystąpienia `ProductsRow` powiązanego z bieżącym `DataListItem`.</span><span class="sxs-lookup"><span data-stu-id="1f545-175">Assuming we re working with an `Item` or `AlternatingItem`, we access the actual `ProductsRow` instance that was bound to the current `DataListItem`.</span></span> <span data-ttu-id="1f545-176">[Właściwość`DataItem`](https://msdn.microsoft.com/system.web.ui.webcontrols.datalistitem.dataitem.aspx) `DataListItem` s zawiera odwołanie do obiektu `DataRowView`, którego właściwość `Row` zawiera odwołanie do rzeczywistego obiektu `ProductsRow`.</span><span class="sxs-lookup"><span data-stu-id="1f545-176">The `DataListItem` s [`DataItem` property](https://msdn.microsoft.com/system.web.ui.webcontrols.datalistitem.dataitem.aspx) contains a reference to the `DataRowView` object, whose `Row` property provides a reference to the actual `ProductsRow` object.</span></span>

<span data-ttu-id="1f545-177">Następnie sprawdzimy Właściwość `ProductsRow` wystąpienia s `UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="1f545-177">Next, we check the `ProductsRow` instance s `UnitPrice` property.</span></span> <span data-ttu-id="1f545-178">Ponieważ pole "`UnitPrice` Products" umożliwia `NULL` wartości, przed podjęciem próby uzyskania dostępu do właściwości `UnitPrice` należy najpierw sprawdzić, czy ma ona `NULL` wartość przy użyciu metody `IsUnitPriceNull()`.</span><span class="sxs-lookup"><span data-stu-id="1f545-178">Since the Products table s `UnitPrice` field allows `NULL` values, before attempting to access the `UnitPrice` property we should first check to see if it has a `NULL` value using the `IsUnitPriceNull()` method.</span></span> <span data-ttu-id="1f545-179">Jeśli wartość `UnitPrice` nie jest `NULL`, Sprawdzamy, czy nie są one mniejsze niż $20,00.</span><span class="sxs-lookup"><span data-stu-id="1f545-179">If the `UnitPrice` value is not `NULL`, we then check to see if it s less than $20.00.</span></span> <span data-ttu-id="1f545-180">Jeśli wartość jest równa $20,00, należy zastosować niestandardowe formatowanie.</span><span class="sxs-lookup"><span data-stu-id="1f545-180">If it is indeed under $20.00, we then need to apply the custom formatting.</span></span>

## <a name="step-3-highlighting-the-product-s-name-and-price"></a><span data-ttu-id="1f545-181">Krok 3. wyróżnianie nazwy produktu i ceny</span><span class="sxs-lookup"><span data-stu-id="1f545-181">Step 3: Highlighting the Product s Name and Price</span></span>

<span data-ttu-id="1f545-182">Gdy będziemy wiedzieć, że cena produktu s jest mniejsza niż $20,00, wszystko to jest w celu wyróżnienia jego nazwy i ceny.</span><span class="sxs-lookup"><span data-stu-id="1f545-182">Once we know that a product s price is less than $20.00, all that remains is to highlight its name and price.</span></span> <span data-ttu-id="1f545-183">Aby to osiągnąć, należy najpierw programowo odwoływać się do kontrolek etykiet w `ItemTemplate`, w których wyświetlana jest nazwa i cena produktu.</span><span class="sxs-lookup"><span data-stu-id="1f545-183">To accomplish this, we must first programmatically reference the Label controls in the `ItemTemplate` that display the product s name and price.</span></span> <span data-ttu-id="1f545-184">Następnie musimy wyświetlić żółte tło.</span><span class="sxs-lookup"><span data-stu-id="1f545-184">Next, we need to have them display a yellow background.</span></span> <span data-ttu-id="1f545-185">Informacje o formatowaniu można zastosować bezpośrednio modyfikując etykiety `BackColor` właściwości (`LabelID.BackColor = Color.Yellow`); najlepiej, chociaż wszystkie kwestie dotyczące wyświetlania powinny być wyrażone za pośrednictwem kaskadowych arkuszy stylów.</span><span class="sxs-lookup"><span data-stu-id="1f545-185">This formatting information can be applied by directly modifying the Labels `BackColor` properties (`LabelID.BackColor = Color.Yellow`); ideally, though, all display-related matters should be expressed through cascading stylesheets.</span></span> <span data-ttu-id="1f545-186">W rzeczywistości mamy już arkusz stylów, który udostępnia wymagane formatowanie zdefiniowane w `Styles.css` - `AffordablePriceEmphasis`, który został utworzony i omówiony w sekcji *formatowanie niestandardowe na podstawie* samouczka dotyczącego danych.</span><span class="sxs-lookup"><span data-stu-id="1f545-186">In fact, we already have a stylesheet that provides the desired formatting defined in `Styles.css` - `AffordablePriceEmphasis`, which was created and discussed in the *Custom Formatting Based Upon Data* tutorial.</span></span>

<span data-ttu-id="1f545-187">Aby zastosować formatowanie, po prostu ustaw dwie kontrolki sieci Web etykiet `CssClass` właściwości `AffordablePriceEmphasis`, jak pokazano w poniższym kodzie:</span><span class="sxs-lookup"><span data-stu-id="1f545-187">To apply the formatting, simply set the two Label Web controls `CssClass` properties to `AffordablePriceEmphasis`, as shown in the following code:</span></span>

[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample2.cs)]

<span data-ttu-id="1f545-188">Po ukończeniu obsługi zdarzeń `ItemDataBound` ponownie odwiedź stronę `Formatting.aspx` w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="1f545-188">With the `ItemDataBound` event handler completed, revisit the `Formatting.aspx` page in a browser.</span></span> <span data-ttu-id="1f545-189">Jak pokazano na rysunku 2, produkty z ceną w kategorii $20,00 mają wyróżnioną nazwę i cenę.</span><span class="sxs-lookup"><span data-stu-id="1f545-189">As Figure 2 illustrates, those products with a price under $20.00 have both their name and price highlighted.</span></span>

<span data-ttu-id="1f545-190">[![te produkty poniżej $20,00 są wyróżnione](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image5.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="1f545-190">[![Those Products Less than $20.00 are Highlighted](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image5.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image4.png)</span></span>

<span data-ttu-id="1f545-191">**Rysunek 2**. te produkty poniżej $20,00 są wyróżnione ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="1f545-191">**Figure 2**: Those Products Less than $20.00 are Highlighted ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image6.png))</span></span>

> [!NOTE]
> <span data-ttu-id="1f545-192">Ponieważ element DataList jest renderowany jako `<table>`HTML, jego wystąpienia `DataListItem` mają właściwości związane z stylem, które można ustawić w celu zastosowania określonego stylu do całego elementu.</span><span class="sxs-lookup"><span data-stu-id="1f545-192">Since the DataList is rendered as an HTML `<table>`, its `DataListItem` instances have style-related properties that can be set to apply a specific style to the entire item.</span></span> <span data-ttu-id="1f545-193">Na przykład jeśli chcemy wyróżnić *cały* element żółty, gdy jego cena była mniejsza niż $20,00, mogła zamienić kod, który odwołuje się do etykiet i ustawić `CssClass` właściwości w następującym wierszu kodu: `e.Item.CssClass = "AffordablePriceEmphasis"` (patrz rysunek 3).</span><span class="sxs-lookup"><span data-stu-id="1f545-193">For example, if we wanted to highlight the *entire* item yellow when its price was less than $20.00, we could have replaced the code that referenced the Labels and set their `CssClass` properties with the following line of code: `e.Item.CssClass = "AffordablePriceEmphasis"` (see Figure 3).</span></span>

<span data-ttu-id="1f545-194">`RepeaterItem` s, które tworzą formant wzmacniający, ale nie oferują takich właściwości na poziomie stylu.</span><span class="sxs-lookup"><span data-stu-id="1f545-194">The `RepeaterItem` s that make up the Repeater control, however, don t offer such style-level properties.</span></span> <span data-ttu-id="1f545-195">W związku z tym stosowanie niestandardowego formatowania do wzmacniania wymaga zastosowania właściwości stylu do kontrolek sieci Web w ramach szablonów wzmacniania, podobnie jak na rysunku 2.</span><span class="sxs-lookup"><span data-stu-id="1f545-195">Therefore, applying custom formatting to the Repeater requires the application of style properties to the Web controls within the Repeater s templates, just like we did in Figure 2.</span></span>

<span data-ttu-id="1f545-196">[![cały produkt zostanie wyróżniony dla produktów poniżej $20,00](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image8.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="1f545-196">[![The Entire Product Item is Highlighted for Products Under $20.00](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image8.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image7.png)</span></span>

<span data-ttu-id="1f545-197">**Rysunek 3**. cały element produktu został wyróżniony dla produktów w obszarze $20,00 ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="1f545-197">**Figure 3**: The Entire Product Item is Highlighted for Products Under $20.00 ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image9.png))</span></span>

## <a name="using-formatting-functions-from-within-the-template"></a><span data-ttu-id="1f545-198">Używanie funkcji formatowania z poziomu szablonu</span><span class="sxs-lookup"><span data-stu-id="1f545-198">Using Formatting Functions from Within the Template</span></span>

<span data-ttu-id="1f545-199">W samouczku *Używanie TemplateField w formancie GridView* pokazano, jak używać funkcji formatowania w widoku GridView TemplateField, aby zastosować niestandardowe formatowanie na podstawie danych powiązanych z wierszami GridView.</span><span class="sxs-lookup"><span data-stu-id="1f545-199">In the *Using TemplateFields in the GridView Control* tutorial we saw how to use a formatting function within a GridView TemplateField to apply custom formatting based upon the data bound to the GridView s rows.</span></span> <span data-ttu-id="1f545-200">Funkcja formatowania jest metodą, którą można wywołać z szablonu i zwraca kod HTML, który ma być emitowany w jego miejscu.</span><span class="sxs-lookup"><span data-stu-id="1f545-200">A formatting function is a method that can be invoked from a template and returns the HTML to be emitted in its place.</span></span> <span data-ttu-id="1f545-201">Funkcje formatowania mogą znajdować się w klasie ASP.NET Page s lub mogą być scentralizowane do plików klas w folderze `App_Code` lub w oddzielnym projekcie biblioteki klas.</span><span class="sxs-lookup"><span data-stu-id="1f545-201">Formatting functions can reside in the ASP.NET page s code-behind class or can be centralized into class files in the `App_Code` folder or in a separate Class Library project.</span></span> <span data-ttu-id="1f545-202">Przeniesienie funkcji formatowania poza klasę ASP.NET strony powiązanej z kodem jest idealnym rozwiązaniem, jeśli planujesz używanie tej samej funkcji formatowania na wielu stronach ASP.NET lub w innych aplikacjach sieci Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1f545-202">Moving the formatting function out of the ASP.NET page s code-behind class is ideal if you plan on using the same formatting function in multiple ASP.NET pages or in other ASP.NET web applications.</span></span>

<span data-ttu-id="1f545-203">Aby zademonstrować funkcje formatowania, niech s zawierają informacje o produkcie, a w przypadku, gdy nie jest to konieczne, jest to tekst [WYCOFANe] obok nazwy produktu.</span><span class="sxs-lookup"><span data-stu-id="1f545-203">To demonstrate formatting functions, let s have the product information include the text [DISCONTINUED] next to the product s name if it s discontinued.</span></span> <span data-ttu-id="1f545-204">Ponadto poinformuj o tym, że cena została wyróżniona żółtym, jeśli liczba s jest mniejsza niż $20,00 (tak jak w przykładzie `ItemDataBound` obsługi zdarzeń); Jeśli cena ma wartość $20,00 lub wyższą, niech nie wyświetlaj rzeczywistej ceny, ale zamiast tekstu, zadzwoń do oferty cenowej.</span><span class="sxs-lookup"><span data-stu-id="1f545-204">Also, let s have the price highlighted yellow if it s less than $20.00 (as we did in the `ItemDataBound` event handler example); if the price is $20.00 or higher, let s not display the actual price, but instead the text, Please call for a price quote.</span></span> <span data-ttu-id="1f545-205">Na rysunku 4 przedstawiono zrzut ekranu przedstawiający listę produktów, których dotyczą te reguły formatowania.</span><span class="sxs-lookup"><span data-stu-id="1f545-205">Figure 4 shows a screen shot of the products listing with these formatting rules applied.</span></span>

<span data-ttu-id="1f545-206">[![kosztownych produktów, Cena jest zastępowana tekstem, wywołaj w celu uzyskania oferty cenowej](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image11.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="1f545-206">[![For Expensive Products, the Price is Replaced with the Text, Please call for a price quote](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image11.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image10.png)</span></span>

<span data-ttu-id="1f545-207">**Ilustracja 4**. w przypadku kosztownych produktów cena jest zastępowana tekstem, wywołaj w celu uzyskania oferty cenowej ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="1f545-207">**Figure 4**: For Expensive Products, the Price is Replaced with the Text, Please call for a price quote ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image12.png))</span></span>

## <a name="step-1-create-the-formatting-functions"></a><span data-ttu-id="1f545-208">Krok 1. Tworzenie funkcji formatowania</span><span class="sxs-lookup"><span data-stu-id="1f545-208">Step 1: Create the Formatting Functions</span></span>

<span data-ttu-id="1f545-209">Na potrzeby tego przykładu potrzebujemy dwóch funkcji formatowania, takich, które wyświetlają nazwę produktu wraz z tekstem [uncontinued], w razie potrzeby, a drugie, które wyświetla wyróżnioną cenę, jeśli nie jest ona mniejsza niż $20,00, lub tekst, w przeciwnym razie Wywołaj dla oferty cenowej.</span><span class="sxs-lookup"><span data-stu-id="1f545-209">For this example we need two formatting functions, one that displays the product name along with the text [DISCONTINUED], if needed, and another that displays either a highlighted price if it s less than $20.00, or the text, Please call for a price quote otherwise.</span></span> <span data-ttu-id="1f545-210">Zezwól programowi na tworzenie tych funkcji w klasie powiązanej z kodem ASP.NET strony i nadaj im nazwę `DisplayProductNameAndDiscontinuedStatus` i `DisplayPrice`.</span><span class="sxs-lookup"><span data-stu-id="1f545-210">Let s create these functions in the ASP.NET page s code-behind class and name them `DisplayProductNameAndDiscontinuedStatus` and `DisplayPrice`.</span></span> <span data-ttu-id="1f545-211">Obie metody muszą zwrócić kod HTML w celu renderowania jako ciąg i oba muszą być oznaczone `Protected` (lub `Public`), aby można było je wywołać ze ASP.NETej składni deklaracyjnej strony.</span><span class="sxs-lookup"><span data-stu-id="1f545-211">Both methods need to return the HTML to render as a string and both need to be marked `Protected` (or `Public`) in order to be invoked from the ASP.NET page s declarative syntax portion.</span></span> <span data-ttu-id="1f545-212">Poniżej przedstawiono kod dla następujących dwóch metod:</span><span class="sxs-lookup"><span data-stu-id="1f545-212">The code for these two methods follows:</span></span>

[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample3.cs)]

<span data-ttu-id="1f545-213">Należy zauważyć, że metoda `DisplayProductNameAndDiscontinuedStatus` akceptuje wartości pól `productName` i `discontinued` danych jako wartości skalarnych, podczas gdy metoda `DisplayPrice` akceptuje wystąpienie `ProductsRow` (a nie `unitPrice` wartość skalarną).</span><span class="sxs-lookup"><span data-stu-id="1f545-213">Note that the `DisplayProductNameAndDiscontinuedStatus` method accepts the values of the `productName` and `discontinued` data fields as scalar values, whereas the `DisplayPrice` method accepts a `ProductsRow` instance (rather than a `unitPrice` scalar value).</span></span> <span data-ttu-id="1f545-214">Jedno z tych rozwiązań będzie działało; Jeśli jednak funkcja formatowania działa z wartościami skalarnymi, które mogą zawierać wartości `NULL` bazy danych (takie jak `UnitPrice`; nie `ProductName` ani `Discontinued` zezwalać na `NULL` wartości), szczególną uwagę należy zwrócić w ramach obsługi tych skalarnych danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="1f545-214">Either approach will work; however, if the formatting function is working with scalar values that can contain database `NULL` values (such as `UnitPrice`; neither `ProductName` nor `Discontinued` allow `NULL` values), special care must be taken in handling these scalar inputs.</span></span>

<span data-ttu-id="1f545-215">W szczególności parametr wejściowy musi być typu `Object`, ponieważ wartością przychodzącą może być wystąpienie `DBNull` zamiast oczekiwanego typu danych.</span><span class="sxs-lookup"><span data-stu-id="1f545-215">In particular, the input parameter must be of type `Object` since the incoming value might be a `DBNull` instance instead of the expected data type.</span></span> <span data-ttu-id="1f545-216">Ponadto należy przeprowadzić kontrolę, aby określić, czy wartość przychodząca jest wartością `NULL` bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1f545-216">Additionally, a check must be made to determine whether or not the incoming value is a database `NULL` value.</span></span> <span data-ttu-id="1f545-217">Oznacza to, że jeśli chcemy, aby Metoda `DisplayPrice` akceptowała cenę jako wartość skalarną, należy użyć następującego kodu:</span><span class="sxs-lookup"><span data-stu-id="1f545-217">That is, if we wanted the `DisplayPrice` method to accept the price as a scalar value, we d have to use the following code:</span></span>

[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample4.cs)]

<span data-ttu-id="1f545-218">Należy zauważyć, że `unitPrice` parametr wejściowy jest typu `Object` i że Instrukcja warunkowa została zmodyfikowana w celu sprawdzenia, czy `unitPrice` jest `DBNull`, czy nie.</span><span class="sxs-lookup"><span data-stu-id="1f545-218">Note that the `unitPrice` input parameter is of type `Object` and that the conditional statement has been modified to ascertain if `unitPrice` is `DBNull` or not.</span></span> <span data-ttu-id="1f545-219">Ponadto, ponieważ parametr wejściowy `unitPrice` jest przenoszona jako `Object`, musi być rzutowany do wartości dziesiętnej.</span><span class="sxs-lookup"><span data-stu-id="1f545-219">Furthermore, since the `unitPrice` input parameter is passed in as an `Object`, it must be cast to a decimal value.</span></span>

## <a name="step-2-calling-the-formatting-function-from-the-datalist-s-itemtemplate"></a><span data-ttu-id="1f545-220">Krok 2: wywoływanie funkcji formatowania z elementu DataList s ItemTemplate</span><span class="sxs-lookup"><span data-stu-id="1f545-220">Step 2: Calling the Formatting Function from the DataList s ItemTemplate</span></span>

<span data-ttu-id="1f545-221">Za pomocą funkcji formatowania dodanych do naszej klasy ASP.NET strony powiązanej z kodem, wszystkie, które pozostają, są wywoływane te funkcje formatowania z `ItemTemplate`DataList.</span><span class="sxs-lookup"><span data-stu-id="1f545-221">With the formatting functions added to our ASP.NET page s code-behind class, all that remains is to invoke these formatting functions from the DataList s `ItemTemplate`.</span></span> <span data-ttu-id="1f545-222">Aby wywołać funkcję formatowania z szablonu, umieść wywołanie funkcji w ramach składni DataBinding:</span><span class="sxs-lookup"><span data-stu-id="1f545-222">To call a formatting function from a template, place the function call within the databinding syntax:</span></span>

[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample5.aspx)]

<span data-ttu-id="1f545-223">W obszarze DataList s `ItemTemplate` kontrolka sieci Web `ProductNameLabel` etykieta Wyświetla obecnie nazwę produktu, przypisując jej Właściwość `Text` wyniku `<%# Eval("ProductName") %>`.</span><span class="sxs-lookup"><span data-stu-id="1f545-223">In the DataList s `ItemTemplate` the `ProductNameLabel` Label Web control currently displays the product s name by assigning its `Text` property the result of `<%# Eval("ProductName") %>`.</span></span> <span data-ttu-id="1f545-224">Aby wyświetlić nazwę i tekst [nieobsługiwane], w razie potrzeby zaktualizuj składnię deklaratywną, tak aby przypisze Właściwość `Text` wartość metody `DisplayProductNameAndDiscontinuedStatus`.</span><span class="sxs-lookup"><span data-stu-id="1f545-224">In order to have it display the name plus the text [DISCONTINUED], if needed, update the declarative syntax so that it instead assigns the `Text` property the value of the `DisplayProductNameAndDiscontinuedStatus` method.</span></span> <span data-ttu-id="1f545-225">W takim przypadku musimy przekazać nazwę produktu i wartości wycofane przy użyciu składni `Eval("columnName")`.</span><span class="sxs-lookup"><span data-stu-id="1f545-225">When doing so, we must pass in the product s name and discontinued values using the `Eval("columnName")` syntax.</span></span> <span data-ttu-id="1f545-226">`Eval` zwraca wartość typu `Object`, ale metoda `DisplayProductNameAndDiscontinuedStatus` oczekuje parametrów wejściowych typu `String` i `Boolean`; w związku z tym należy rzutować wartości zwracane przez metodę `Eval` na oczekiwane typy parametrów wejściowych, na przykład:</span><span class="sxs-lookup"><span data-stu-id="1f545-226">`Eval` returns a value of type `Object`, but the `DisplayProductNameAndDiscontinuedStatus` method expects input parameters of type `String` and `Boolean`; therefore, we must cast the values returned by the `Eval` method to the expected input parameter types, like so:</span></span>

[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample6.aspx)]

<span data-ttu-id="1f545-227">Aby wyświetlić cenę, można po prostu ustawić właściwość `UnitPriceLabel` Label s `Text` na wartość zwróconą przez metodę `DisplayPrice`, podobnie jak w przypadku wyświetlania nazwy produktu i tekstu [uncontinued].</span><span class="sxs-lookup"><span data-stu-id="1f545-227">To display the price, we can simply set the `UnitPriceLabel` Label s `Text` property to the value returned by the `DisplayPrice` method, just like we did for displaying the product s name and [DISCONTINUED] text.</span></span> <span data-ttu-id="1f545-228">Jednak zamiast przekazywania w `UnitPrice` jako skalarnego parametru wejściowego, zamiast tego przejdziemy do całego wystąpienia `ProductsRow`:</span><span class="sxs-lookup"><span data-stu-id="1f545-228">However, instead of passing in the `UnitPrice` as a scalar input parameter, we instead pass in the entire `ProductsRow` instance:</span></span>

[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample7.aspx)]

<span data-ttu-id="1f545-229">W przypadku wywołań funkcji formatowania na miejscu zapoznaj się z postępem w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="1f545-229">With the calls to the formatting functions in place, take a moment to view our progress in a browser.</span></span> <span data-ttu-id="1f545-230">Ekran powinien wyglądać podobnie do rysunku 5, a wycofane produkty, takie jak tekst [WYCOFANe], są wyceniane ponad $20,00, jeśli cena została zamieniona na tekst, zadzwoń do oferty cenowej.</span><span class="sxs-lookup"><span data-stu-id="1f545-230">Your screen should look similar to Figure 5, with the discontinued products including the text [DISCONTINUED] and those products costing more than $20.00 having their price replaced with the text Please call for a price quote .</span></span>

<span data-ttu-id="1f545-231">[![kosztownych produktów, Cena jest zastępowana tekstem, wywołaj w celu uzyskania oferty cenowej](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image14.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="1f545-231">[![For Expensive Products, the Price is Replaced with the Text, Please call for a price quote](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image14.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image13.png)</span></span>

<span data-ttu-id="1f545-232">**Rysunek 5**. w przypadku kosztownych produktów cena jest zastępowana tekstem, wywołaj w celu uzyskania oferty cenowej ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="1f545-232">**Figure 5**: For Expensive Products, the Price is Replaced with the Text, Please call for a price quote ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image15.png))</span></span>

## <a name="summary"></a><span data-ttu-id="1f545-233">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="1f545-233">Summary</span></span>

<span data-ttu-id="1f545-234">Formatowanie zawartości formantu DataList lub wzmacniania na podstawie danych można wykonać przy użyciu dwóch technik.</span><span class="sxs-lookup"><span data-stu-id="1f545-234">Formatting the contents of a DataList or Repeater control based upon the data can be accomplished using two techniques.</span></span> <span data-ttu-id="1f545-235">Pierwszą techniką jest utworzenie procedury obsługi zdarzeń dla zdarzenia `ItemDataBound`, co spowoduje, że każdy rekord w źródle danych jest powiązany z nowym `DataListItem` lub `RepeaterItem`.</span><span class="sxs-lookup"><span data-stu-id="1f545-235">The first technique is to create an event handler for the `ItemDataBound` event, which fires as each record in the data source is bound to a new `DataListItem` or `RepeaterItem`.</span></span> <span data-ttu-id="1f545-236">W obsłudze zdarzeń `ItemDataBound` można sprawdzić bieżące dane elementu, a następnie można zastosować formatowanie do zawartości szablonu lub, dla `DataListItem` s, do całego elementu.</span><span class="sxs-lookup"><span data-stu-id="1f545-236">In the `ItemDataBound` event handler, the current item s data can be examined and then formatting can be applied to the contents of the template or, for `DataListItem` s, to the entire item itself.</span></span>

<span data-ttu-id="1f545-237">Alternatywnie formatowanie niestandardowe może być zrealizowane za poorednictwem funkcji formatowania.</span><span class="sxs-lookup"><span data-stu-id="1f545-237">Alternatively, custom formatting can be realized through formatting functions.</span></span> <span data-ttu-id="1f545-238">Funkcja formatowania to metoda, która może być wywoływana z szablonów DataList lub wzmacniak, które zwracają kod HTML, aby emitować w jego miejscu.</span><span class="sxs-lookup"><span data-stu-id="1f545-238">A formatting function is a method that can be invoked from the DataList or Repeater s templates that returns the HTML to emit in its place.</span></span> <span data-ttu-id="1f545-239">Często kod HTML zwracany przez funkcję formatowania jest określany przez wartości, które są powiązane z bieżącym elementem.</span><span class="sxs-lookup"><span data-stu-id="1f545-239">Often, the HTML returned by a formatting function is determined by the values being bound to the current item.</span></span> <span data-ttu-id="1f545-240">Te wartości mogą być przekazywane do funkcji formatowania jako wartości skalarne lub przez przekazanie całego obiektu, który jest powiązany z elementem (na przykład wystąpieniem `ProductsRow`).</span><span class="sxs-lookup"><span data-stu-id="1f545-240">These values can be passed into the formatting function, either as scalar values or by passing in the entire object being bound to the item (such as the `ProductsRow` instance).</span></span>

<span data-ttu-id="1f545-241">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="1f545-241">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="1f545-242">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="1f545-242">About the Author</span></span>

<span data-ttu-id="1f545-243">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor siedmiu grup ASP/ASP. NET Books i założyciel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="1f545-243">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="1f545-244">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="1f545-244">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="1f545-245">Jego Najnowsza książka to [*Sams ASP.NET 2,0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="1f545-245">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="1f545-246">Można go osiągnąć w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="1f545-246">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="1f545-247">lub za pośrednictwem swojego blogu, który można znaleźć w [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="1f545-247">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="1f545-248">Specjalne podziękowania</span><span class="sxs-lookup"><span data-stu-id="1f545-248">Special Thanks To</span></span>

<span data-ttu-id="1f545-249">Ta seria samouczków została sprawdzona przez wielu przydatnych recenzentów.</span><span class="sxs-lookup"><span data-stu-id="1f545-249">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="1f545-250">Recenzenci liderzy dla tego samouczka to Yaakov Ellis, Randy Schmidt i Liz Shulok.</span><span class="sxs-lookup"><span data-stu-id="1f545-250">Lead reviewers for this tutorial were Yaakov Ellis, Randy Schmidt, and Liz Shulok.</span></span> <span data-ttu-id="1f545-251">Chcesz przeglądać moje nadchodzące artykuły MSDN?</span><span class="sxs-lookup"><span data-stu-id="1f545-251">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="1f545-252">Jeśli tak, upuść mi linię w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="1f545-252">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="1f545-253">[Poprzednie](displaying-data-with-the-datalist-and-repeater-controls-cs.md)
> [dalej](showing-multiple-records-per-row-with-the-datalist-control-cs.md)</span><span class="sxs-lookup"><span data-stu-id="1f545-253">[Previous](displaying-data-with-the-datalist-and-repeater-controls-cs.md)
[Next](showing-multiple-records-per-row-with-the-datalist-control-cs.md)</span></span>

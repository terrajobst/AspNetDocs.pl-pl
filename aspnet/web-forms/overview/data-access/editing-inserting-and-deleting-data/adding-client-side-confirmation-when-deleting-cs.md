---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs
title: Dodawanie potwierdzenia po stronie klienta podczas usuwania (C#) | Microsoft Docs
author: rick-anderson
description: W interfejsach, które zostały już utworzone, użytkownik może przypadkowo usunąć dane, klikając przycisk Usuń po kliknięciu przycisku Edytuj. W tym t...
ms.author: riande
ms.date: 07/17/2006
ms.assetid: f6e2a12a-2b5e-48fd-8db3-1e94a500c19a
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: e7d53bc65fdbbfa9ce9bfa5fbdbfa0dea598eebe
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/28/2019
ms.locfileid: "74623556"
---
# <a name="adding-client-side-confirmation-when-deleting-c"></a><span data-ttu-id="0b4cc-104">Dodawanie potwierdzenia po stronie klienta podczas usuwania (C#)</span><span class="sxs-lookup"><span data-stu-id="0b4cc-104">Adding Client-Side Confirmation When Deleting (C#)</span></span>

<span data-ttu-id="0b4cc-105">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="0b4cc-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="0b4cc-106">[Pobierz przykładową aplikację](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_22_CS.exe) lub [Pobierz plik PDF](adding-client-side-confirmation-when-deleting-cs/_static/datatutorial22cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="0b4cc-106">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_22_CS.exe) or [Download PDF](adding-client-side-confirmation-when-deleting-cs/_static/datatutorial22cs1.pdf)</span></span>

> <span data-ttu-id="0b4cc-107">W interfejsach, które zostały już utworzone, użytkownik może przypadkowo usunąć dane, klikając przycisk Usuń po kliknięciu przycisku Edytuj.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-107">In the interfaces we've created so far, a user can accidentally delete data by clicking the Delete button when they meant to click the Edit button.</span></span> <span data-ttu-id="0b4cc-108">W tym samouczku dodamy okno dialogowe potwierdzenia po stronie klienta, które pojawia się po kliknięciu przycisku Usuń.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-108">In this tutorial we'll add a client-side confirmation dialog box that appears when the Delete button is clicked.</span></span>

## <a name="introduction"></a><span data-ttu-id="0b4cc-109">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="0b4cc-109">Introduction</span></span>

<span data-ttu-id="0b4cc-110">W ciągu ostatnich kilku samouczków zaobserwowano, jak korzystać z naszej architektury aplikacji, elementu ObjectDataSource i kontrolek sieci Web danych w ramach uzgodnienia, aby zapewnić możliwość wstawiania, edytowania i usuwania.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-110">Over the past several tutorials we ve seen how to use our application architecture, ObjectDataSource, and the data Web controls in concert to provide inserting, editing, and deleting capabilities.</span></span> <span data-ttu-id="0b4cc-111">Usunięte interfejsy, które w tej chwili zostały wykonane, zostały złożone z przycisku usuwania, który po kliknięciu powoduje odświeżenie i wywołanie metody ObjectDataSource s `Delete()`.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-111">The deleting interfaces we ve examined thus far have been composed of a Delete button that, when clicked, causes a postback and invokes the ObjectDataSource s `Delete()` method.</span></span> <span data-ttu-id="0b4cc-112">Metoda `Delete()` następnie wywołuje skonfigurowaną metodę z warstwy logiki biznesowej, która propaguje wywołanie do warstwy dostępu do danych, wydając rzeczywistą instrukcję `DELETE` do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-112">The `Delete()` method then invokes the configured method from the Business Logic Layer, which propagates the call down to the Data Access Layer, issuing the actual `DELETE` statement to the database.</span></span>

<span data-ttu-id="0b4cc-113">Ten interfejs użytkownika umożliwia osobom odwiedzającym usuwanie rekordów za pomocą kontrolek GridView, DetailsView lub FormView, ale nie ma żadnych potwierdzeń, gdy użytkownik kliknie przycisk Usuń.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-113">While this user interface enables visitors to delete records through the GridView, DetailsView, or FormView controls, it lacks any sort of confirmation when the user clicks the Delete button.</span></span> <span data-ttu-id="0b4cc-114">Jeśli użytkownik przypadkowo kliknie przycisk Usuń, gdy klikniesz przycisk Edytuj, rekord, który ma zostać zaktualizowany, zostanie usunięty.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-114">If a user accidentally clicks the Delete button when they meant to click Edit, the record they meant to update will instead be deleted.</span></span> <span data-ttu-id="0b4cc-115">Aby temu zapobiec, w tym samouczku dodamy okno dialogowe potwierdzenia po stronie klienta, które pojawia się po kliknięciu przycisku Usuń.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-115">To help prevent this, in this tutorial we'll add a client-side confirmation dialog box that appears when the Delete button is clicked.</span></span>

<span data-ttu-id="0b4cc-116">Funkcja JavaScript `confirm(string)` wyświetla swój parametr wejściowy ciągu jako tekst wewnątrz modalnego okna dialogowego, które zawiera dwa przyciski — OK i Anuluj (patrz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="0b4cc-116">The JavaScript `confirm(string)` function displays its string input parameter as the text inside a modal dialog box that comes equipped with two buttons - OK and Cancel (see Figure 1).</span></span> <span data-ttu-id="0b4cc-117">Funkcja `confirm(string)` zwraca wartość logiczną w zależności od tego, jaki przycisk jest kliknięty (`true`, jeśli użytkownik kliknie OK, i `false` Jeśli kliknie przycisk Anuluj).</span><span class="sxs-lookup"><span data-stu-id="0b4cc-117">The `confirm(string)` function returns a Boolean value depending on what button is clicked (`true`, if the user clicks OK, and `false` if they click Cancel).</span></span>

![Metoda Confirm (String) języka JavaScript wyświetla modalne, po stronie klienta](adding-client-side-confirmation-when-deleting-cs/_static/image1.png)

<span data-ttu-id="0b4cc-119">**Rysunek 1**. Metoda `confirm(string)` JavaScript wyświetla modalne, po stronie klienta</span><span class="sxs-lookup"><span data-stu-id="0b4cc-119">**Figure 1**: The JavaScript `confirm(string)` Method Displays a Modal, Client-Side Messagebox</span></span>

<span data-ttu-id="0b4cc-120">W trakcie przekazywania formularza, jeśli wartość `false` jest zwracana z programu obsługi zdarzeń po stronie klienta, przesyłanie formularza zostanie anulowane.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-120">During a form submission, if a value of `false` is returned from a client-side event handler then the form submission is cancelled.</span></span> <span data-ttu-id="0b4cc-121">Korzystając z tej funkcji, można użyć przycisku Usuń s po stronie klienta `onclick` obsługi zdarzeń zwraca wartość wywołania do `confirm("Are you sure you want to delete this product?")`.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-121">Using this feature, we can have the Delete button s client-side `onclick` event handler return the value of a call to `confirm("Are you sure you want to delete this product?")`.</span></span> <span data-ttu-id="0b4cc-122">Jeśli użytkownik kliknie przycisk Anuluj, `confirm(string)` zwróci wartość false, co spowoduje anulowanie przesłania formularza.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-122">If the user clicks Cancel, `confirm(string)` will return false, thereby causing the form submission to cancel.</span></span> <span data-ttu-id="0b4cc-123">Bez ogłaszania zwrotnego produkt, którego przycisk usuwania został kliknięty, nie zostanie usunięty.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-123">With no postback, the product whose Delete button was clicked won't be deleted.</span></span> <span data-ttu-id="0b4cc-124">Jeśli jednak użytkownik kliknie przycisk OK w oknie dialogowym potwierdzenia, ogłaszanie zwrotne będzie kontynuowane unabated i produkt zostanie usunięty.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-124">If, however, the user clicks OK in the confirmation dialog box, the postback will continue unabated and the product will be deleted.</span></span> <span data-ttu-id="0b4cc-125">Aby uzyskać więcej informacji na temat tej techniki, należy zapoznać się z tematem [Używanie metody `confirm()` JavaScript s do sterowania przesyłaniem formularzy](http://www.webreference.com/programming/javascript/confirm/) .</span><span class="sxs-lookup"><span data-stu-id="0b4cc-125">Consult [Using JavaScript s `confirm()` Method to Control Form Submission](http://www.webreference.com/programming/javascript/confirm/) for more information on this technique.</span></span>

<span data-ttu-id="0b4cc-126">Dodawanie niezbędnego skryptu po stronie klienta różni się nieco w przypadku używania szablonów niż w przypadku używania CommandField.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-126">Adding the necessary client-side script differs slightly if using templates than when using a CommandField.</span></span> <span data-ttu-id="0b4cc-127">Dlatego w tym samouczku zobaczymy zarówno widok FormView, jak i widok GridView.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-127">Therefore, in this tutorial we will look at both a FormView and GridView example.</span></span>

> [!NOTE]
> <span data-ttu-id="0b4cc-128">Przy użyciu technik potwierdzeń po stronie klienta, takich jak te omówione w tym samouczku, zakłada się, że użytkownicy odwiedzają przeglądarki obsługujące język JavaScript i obsługujące JavaScript.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-128">Using client-side confirmation techniques, like the ones discussed in this tutorial, assumes that your users are visiting with browsers that support JavaScript and that they have JavaScript enabled.</span></span> <span data-ttu-id="0b4cc-129">Jeśli jedno z tych założeń nie jest prawdziwe dla określonego użytkownika, kliknięcie przycisku Usuń spowoduje natychmiastowe zakończenie ogłaszania zwrotnego (bez wyświetlania potwierdzenia MessageBox).</span><span class="sxs-lookup"><span data-stu-id="0b4cc-129">If either of these assumptions are not true for a particular user, clicking the Delete button will immediately cause a postback (not displaying a confirm messagebox).</span></span>

## <a name="step-1-creating-a-formview-that-supports-deletion"></a><span data-ttu-id="0b4cc-130">Krok 1. Tworzenie widoku FormView, który obsługuje usuwanie</span><span class="sxs-lookup"><span data-stu-id="0b4cc-130">Step 1: Creating a FormView That Supports Deletion</span></span>

<span data-ttu-id="0b4cc-131">Zacznij od dodania widoku FormView do strony `ConfirmationOnDelete.aspx` w folderze `EditInsertDelete`, aby powiązać ją z nowym elementem ObjectDataSource, który pobiera informacje o produkcie za pomocą metody `GetProducts()` `ProductsBLL` Class s.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-131">Start by adding a FormView to the `ConfirmationOnDelete.aspx` page in the `EditInsertDelete` folder, binding it to a new ObjectDataSource that pulls back the product information via the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="0b4cc-132">Należy również skonfigurować element ObjectDataSource tak, aby Metoda `DeleteProduct(productID)` `ProductsBLL` klasy s została zamapowana na metodę `Delete()` ObjectDataSource s; Upewnij się, że listy rozwijane kart Wstawianie i aktualizacja są ustawione na wartość (brak).</span><span class="sxs-lookup"><span data-stu-id="0b4cc-132">Also configure the ObjectDataSource so that the `ProductsBLL` class s `DeleteProduct(productID)` method is mapped to the ObjectDataSource s `Delete()` method; ensure that the INSERT and UPDATE tabs drop-down lists are set to (None).</span></span> <span data-ttu-id="0b4cc-133">Na koniec zaznacz pole wyboru Włącz stronicowanie w tagu inteligentnym FormView.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-133">Finally, check the Enable Paging checkbox in the FormView s smart tag.</span></span>

<span data-ttu-id="0b4cc-134">Po wykonaniu tych kroków nowe oznakowanie deklaracyjne języka ObjectDataSource będzie wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="0b4cc-134">After these steps, the new ObjectDataSource s declarative markup will look like the following:</span></span>

[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample1.aspx)]

<span data-ttu-id="0b4cc-135">Jak w poprzednich przykładach, które nie korzystały z optymistycznej współbieżności, poświęć chwilę na wyczyszczenie właściwości `OldValuesParameterFormatString` ObjectDataSource s.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-135">As in our past examples that did not use optimistic concurrency, take a moment to clear out the ObjectDataSource s `OldValuesParameterFormatString` property.</span></span>

<span data-ttu-id="0b4cc-136">Ponieważ został on powiązany z kontrolką ObjectDataSource, która obsługuje tylko usuwanie, tylko `ItemTemplate` FormView oferuje tylko przycisk Usuń, bez przycisków New i Update.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-136">Since it has been bound to an ObjectDataSource control that only supports deleting, the FormView s `ItemTemplate` offers only the Delete button, lacking the New and Update buttons.</span></span> <span data-ttu-id="0b4cc-137">Znaczniki deklaratywne FormView, jednak zawierają zbędne `EditItemTemplate` i `InsertItemTemplate`, które mogą zostać usunięte.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-137">The FormView s declarative markup, however, includes a superfluous `EditItemTemplate` and `InsertItemTemplate`, which can be removed.</span></span> <span data-ttu-id="0b4cc-138">Poświęć chwilę na dostosowanie `ItemTemplate` tak, aby pokazywała tylko podzestaw pól danych produktu.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-138">Take a moment to customize the `ItemTemplate` so that is shows only a subset of the product data fields.</span></span> <span data-ttu-id="0b4cc-139">Chcę, aby nazwa produktu była wyświetlana w `<h3>` nagłówku powyżej jego dostawcy i nazwy kategorii (wraz z przyciskiem Usuń).</span><span class="sxs-lookup"><span data-stu-id="0b4cc-139">I ve configured mine to show the product s name in an `<h3>` heading above its supplier and category names (along with the Delete button).</span></span>

[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample2.aspx)]

<span data-ttu-id="0b4cc-140">Dzięki tym zmianom mamy w pełni funkcjonalną stronę sieci Web, która umożliwia użytkownikowi jednokrotne przełączanie się między produktami, z możliwością usunięcia produktu przez kliknięcie przycisku Usuń.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-140">With these changes, we have a fully functional web page that allows a user to toggle through the products one at a time, with the ability to delete a product by simply clicking the Delete button.</span></span> <span data-ttu-id="0b4cc-141">Rysunek 2 przedstawia zrzut ekranu dotyczący postępu z tego względu, gdy jest wyświetlany za pomocą przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-141">Figure 2 shows a screen shot of our progress thus far when viewed through a browser.</span></span>

<span data-ttu-id="0b4cc-142">[![FormView pokazuje informacje o pojedynczym produkcie](adding-client-side-confirmation-when-deleting-cs/_static/image3.png)](adding-client-side-confirmation-when-deleting-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="0b4cc-142">[![The FormView Shows Information About a Single Product](adding-client-side-confirmation-when-deleting-cs/_static/image3.png)](adding-client-side-confirmation-when-deleting-cs/_static/image2.png)</span></span>

<span data-ttu-id="0b4cc-143">**Rysunek 2**: FormView pokazuje informacje o pojedynczym produkcie ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-client-side-confirmation-when-deleting-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="0b4cc-143">**Figure 2**: The FormView Shows Information About a Single Product ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image4.png))</span></span>

## <a name="step-2-calling-the-confirmstring-function-from-the-delete-buttons-client-side-onclick-event"></a><span data-ttu-id="0b4cc-144">Krok 2: wywoływanie funkcji Confirm (String) z poziomu zdarzenia onkliknięcia po stronie klienta</span><span class="sxs-lookup"><span data-stu-id="0b4cc-144">Step 2: Calling the confirm(string) Function from the Delete Buttons Client-Side onclick Event</span></span>

<span data-ttu-id="0b4cc-145">Po utworzeniu FormView, ostatnim krokiem jest skonfigurowanie przycisku Usuń, tak aby po kliknięciu jego przez osobę odwiedzającą została wywołana funkcja JavaScript `confirm(string)`.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-145">With the FormView created, the final step is to configure the Delete button such that when it s clicked by the visitor, the JavaScript `confirm(string)` function is invoked.</span></span> <span data-ttu-id="0b4cc-146">Dodawanie skryptu po stronie klienta do przycisku, element LinkButton lub kliknięto element ImageButton s zdarzenia `onclick` po stronie klienta można wykonać przy użyciu `OnClientClick property`, który jest nowy dla ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-146">Adding client-side script to a Button, LinkButton, or ImageButton s client-side `onclick` event can be accomplished through the use of the `OnClientClick property`, which is new to ASP.NET 2.0.</span></span> <span data-ttu-id="0b4cc-147">Ponieważ chcemy mieć wartość zwracaną przez funkcję `confirm(string)`, po prostu ustaw tę właściwość na: `return confirm('Are you certain that you want to delete this product?');`</span><span class="sxs-lookup"><span data-stu-id="0b4cc-147">Since we want to have the value of the `confirm(string)` function returned, simply set this property to: `return confirm('Are you certain that you want to delete this product?');`</span></span>

<span data-ttu-id="0b4cc-148">Po wprowadzeniu tej zmiany Składnia deklaratywna usuwania element LinkButton powinna wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="0b4cc-148">After this change the Delete LinkButton s declarative syntax should look something like:</span></span>

[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample3.aspx)]

<span data-ttu-id="0b4cc-149">Wszystko, co wszystko jest gotowe!</span><span class="sxs-lookup"><span data-stu-id="0b4cc-149">That s all there is to it!</span></span> <span data-ttu-id="0b4cc-150">Rysunek 3 pokazuje zrzut ekranu przedstawiający to potwierdzenie w akcji.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-150">Figure 3 shows a screen shot of this confirmation in action.</span></span> <span data-ttu-id="0b4cc-151">Kliknięcie przycisku Usuń powoduje wyświetlenie okna dialogowego potwierdzenia.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-151">Clicking the Delete button brings up the confirm dialog box.</span></span> <span data-ttu-id="0b4cc-152">Jeśli użytkownik kliknie przycisk Anuluj, ogłaszanie zwrotne zostanie anulowane, a produkt nie zostanie usunięty.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-152">If the user clicks Cancel, the postback is cancelled and the product is not deleted.</span></span> <span data-ttu-id="0b4cc-153">Jeśli jednak użytkownik kliknie przycisk OK, ogłaszanie zwrotne będzie kontynuowane, a metoda ObjectDataSource s `Delete()` zostanie wywołana, culminating w usuwanym rekordzie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-153">If, however, the user clicks OK, the postback continues and the ObjectDataSource s `Delete()` method is invoked, culminating in the database record being deleted.</span></span>

> [!NOTE]
> <span data-ttu-id="0b4cc-154">Ciąg przesłany do funkcji JavaScript `confirm(string)` jest rozdzielany znakami apostrofów (a nie cudzysłowów).</span><span class="sxs-lookup"><span data-stu-id="0b4cc-154">The string passed into the `confirm(string)` JavaScript function is delimited with apostrophes (rather than quotation marks).</span></span> <span data-ttu-id="0b4cc-155">W języku JavaScript ciągi mogą być rozdzielane przy użyciu dowolnego znaku.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-155">In JavaScript, strings can be delimited using either character.</span></span> <span data-ttu-id="0b4cc-156">W tym miejscu są używane apostrofy, dzięki czemu ograniczniki ciągu przechodzą do `confirm(string)` nie wprowadzają niejednoznaczności ograniczników używanych dla wartości właściwości `OnClientClick`.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-156">We use apostrophes here so that the delimiters for the string passed into `confirm(string)` do not introduce an ambiguity with the delimiters used for the `OnClientClick` property value.</span></span>

<span data-ttu-id="0b4cc-157">[![potwierdzenie jest teraz wyświetlane po kliknięciu przycisku Usuń](adding-client-side-confirmation-when-deleting-cs/_static/image6.png)](adding-client-side-confirmation-when-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="0b4cc-157">[![A Confirmation is Now Displayed When Clicking the Delete Button](adding-client-side-confirmation-when-deleting-cs/_static/image6.png)](adding-client-side-confirmation-when-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="0b4cc-158">**Rysunek 3**. potwierdzenie jest teraz wyświetlane po kliknięciu przycisku Usuń (kliknij,[Aby wyświetlić obraz w pełnym rozmiarze](adding-client-side-confirmation-when-deleting-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="0b4cc-158">**Figure 3**: A Confirmation is Now Displayed When Clicking the Delete Button ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image7.png))</span></span>

## <a name="step-3-configuring-the-onclientclick-property-for-the-delete-button-in-a-commandfield"></a><span data-ttu-id="0b4cc-159">Krok 3. Konfigurowanie właściwości OnClientClick przycisku Usuń w CommandField</span><span class="sxs-lookup"><span data-stu-id="0b4cc-159">Step 3: Configuring the OnClientClick Property for the Delete Button in a CommandField</span></span>

<span data-ttu-id="0b4cc-160">Podczas pracy z przyciskiem, element LinkButton lub kliknięto element ImageButton bezpośrednio w szablonie, można z nim skojarzyć okno dialogowe potwierdzenia przez skonfigurowanie jego właściwości `OnClientClick`, aby zwracała wyniki funkcji `confirm(string)` JavaScript.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-160">When working with a Button, LinkButton, or ImageButton directly in a template, a confirmation dialog box can be associated with it by simply configuring its `OnClientClick` property to return the results of the JavaScript `confirm(string)` function.</span></span> <span data-ttu-id="0b4cc-161">Jednak CommandField, który dodaje pole usuwania przycisków do widoku GridView lub DetailsView-nie ma właściwości `OnClientClick`, która może być ustawiona deklaratywnie.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-161">However, the CommandField - which adds a field of Delete buttons to a GridView or DetailsView - does not have an `OnClientClick` property that can be set declaratively.</span></span> <span data-ttu-id="0b4cc-162">Zamiast tego należy programistycznie odwoływać się do przycisku Usuń w obszarze GridView lub DetailsView s odpowiednie `DataBound` obsługi zdarzeń, a następnie ustawić jego właściwość `OnClientClick`.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-162">Instead, we must programmatically reference the Delete button in the GridView or DetailsView s appropriate `DataBound` event handler, and then set its `OnClientClick` property there.</span></span>

> [!NOTE]
> <span data-ttu-id="0b4cc-163">Podczas ustawiania właściwości `OnClientClick` przycisku Usuń w odpowiedniej procedurze obsługi zdarzeń `DataBound`, mamy dostęp do danych powiązanych z bieżącym rekordem.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-163">When setting the Delete button s `OnClientClick` property in the appropriate `DataBound` event handler, we have access to the data was bound to the current record.</span></span> <span data-ttu-id="0b4cc-164">Oznacza to, że możemy rozłożyć komunikat potwierdzający, aby uwzględnić szczegóły dotyczące konkretnego rekordu, takiego jak "czy na pewno chcesz usunąć produkt Chai?".</span><span class="sxs-lookup"><span data-stu-id="0b4cc-164">This means we can extend the confirmation message to include details about the particular record, such as, "Are you sure you want to delete the Chai product?"</span></span> <span data-ttu-id="0b4cc-165">Takie dostosowanie jest również możliwe w szablonach przy użyciu składni wiązania danych.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-165">Such customization is also possible in templates using databinding syntax.</span></span>

<span data-ttu-id="0b4cc-166">Aby dopuścić do ustawienia właściwości `OnClientClick` przycisków usuwania w CommandField, Dodaj widok GridView do strony.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-166">To practice setting the `OnClientClick` property for the Delete button(s) in a CommandField, let s add a GridView to the page.</span></span> <span data-ttu-id="0b4cc-167">Skonfiguruj ten widok GridView, aby używał tego samego formantu ObjectDataSource, który jest używany przez FormView.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-167">Configure this GridView to use the same ObjectDataSource control that the FormView uses.</span></span> <span data-ttu-id="0b4cc-168">Ogranicz również widok GridView BoundFields, aby zawierał tylko nazwę produktu, kategorię i dostawcę.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-168">Also limit the GridView s BoundFields to only include the product s name, category, and supplier.</span></span> <span data-ttu-id="0b4cc-169">Na koniec zaznacz pole wyboru Włącz usuwanie w tagu inteligentnym GridView.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-169">Lastly, check the Enable Deleting checkbox from the GridView s smart tag.</span></span> <span data-ttu-id="0b4cc-170">Spowoduje to dodanie CommandField do kolekcji GridView s `Columns` z właściwością `ShowDeleteButton` ustawioną na `true`.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-170">This will add a CommandField to the GridView s `Columns` collection with its `ShowDeleteButton` property set to `true`.</span></span>

<span data-ttu-id="0b4cc-171">Po wprowadzeniu tych zmian znaczniki deklaratywne GridView powinny wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="0b4cc-171">After making these changes, your GridView s declarative markup should look like the following:</span></span>

[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample4.aspx)]

<span data-ttu-id="0b4cc-172">CommandField zawiera pojedyncze wystąpienie klasy Delete element LinkButton, do którego można uzyskać dostęp programowo przy użyciu programu obsługi zdarzeń `RowDataBound` GridView.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-172">The CommandField contains a single Delete LinkButton instance that can be accessed programmatically from the GridView s `RowDataBound` event handler.</span></span> <span data-ttu-id="0b4cc-173">Po odwołaniu można ustawić odpowiednio jej Właściwość `OnClientClick`.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-173">Once referenced, we can set its `OnClientClick` property accordingly.</span></span> <span data-ttu-id="0b4cc-174">Utwórz procedurę obsługi zdarzeń dla zdarzenia `RowDataBound` przy użyciu następującego kodu:</span><span class="sxs-lookup"><span data-stu-id="0b4cc-174">Create an event handler for the `RowDataBound` event using the following code:</span></span>

[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample5.cs)]

<span data-ttu-id="0b4cc-175">Ta procedura obsługi zdarzeń działa z wierszami danych (tymi, które będą miały przycisk Usuń) i rozpoczyna się programowo, odwołując się do przycisku Usuń.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-175">This event handler works with data rows (those that will have the Delete button) and begins by programmatically referencing the Delete button.</span></span> <span data-ttu-id="0b4cc-176">Ogólnie rzecz biorąc, użyj następującego wzorca:</span><span class="sxs-lookup"><span data-stu-id="0b4cc-176">In general use the following pattern:</span></span>

[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample6.cs)]

<span data-ttu-id="0b4cc-177">*ButtonType* jest typem przycisku używanym przez CommandField-Button, element LinkButton lub kliknięto element ImageButton.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-177">*ButtonType* is the type of button being used by the CommandField - Button, LinkButton, or ImageButton.</span></span> <span data-ttu-id="0b4cc-178">Domyślnie CommandField używa LinkButtons, ale można go dostosować za pośrednictwem CommandField s `ButtonType property`.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-178">By default, the CommandField uses LinkButtons, but this can be customized via the CommandField s `ButtonType property`.</span></span> <span data-ttu-id="0b4cc-179">*CommandFieldIndex* jest indeksem porządkowym CommandField w kolekcji `Columns` GridView, podczas gdy *controlIndex* jest indeksem przycisku usuwania w kolekcji CommandField s `Controls`.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-179">The *commandFieldIndex* is the ordinal index of the CommandField within the GridView s `Columns` collection, whereas the *controlIndex* is the index of the Delete button within the CommandField s `Controls` collection.</span></span> <span data-ttu-id="0b4cc-180">Wartość *controlIndex* zależy od pozycji przycisku w odniesieniu do innych przycisków w CommandField.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-180">The *controlIndex* value depends on the button s position relative to other buttons in the CommandField.</span></span> <span data-ttu-id="0b4cc-181">Na przykład, jeśli jedynym przyciskiem wyświetlanym w CommandField jest przycisk Usuń, Użyj indeksu 0.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-181">For example, if the only button displayed in the CommandField is the Delete button, use an index of 0.</span></span> <span data-ttu-id="0b4cc-182">Jeśli jednak przycisk Edytuj, który poprzedza przycisk Usuń, Użyj indeksu 2.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-182">If, however, there s an Edit button that precedes the Delete button, use an index of 2.</span></span> <span data-ttu-id="0b4cc-183">Przyczyną jest użycie indeksu 2 jest spowodowane tym, że dwie kontrolki są dodawane przez CommandField przed przyciskiem Usuń: przycisk Edytuj i LiteralControl, które służy do dodawania miejsca między przyciskami Edytuj i Usuń.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-183">The reason an index of 2 is used is because two controls are added by the CommandField before the Delete button: the Edit button and a LiteralControl that s used to add some space between the Edit and Delete buttons.</span></span>

<span data-ttu-id="0b4cc-184">W naszym konkretnym przykładzie CommandField korzysta z LinkButtons i, że pole z lewej strony ma wartość *commandFieldIndex* równą 0.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-184">For our particular example, the CommandField uses LinkButtons and, being the left-most field, has a *commandFieldIndex* of 0.</span></span> <span data-ttu-id="0b4cc-185">Ponieważ nie ma żadnych innych przycisków, ale przycisk Usuń w CommandField, używamy *controlIndex* 0.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-185">Since there are no other buttons but the Delete button in the CommandField, we use a *controlIndex* of 0.</span></span>

<span data-ttu-id="0b4cc-186">Po odwołaniu się do przycisku Usuń w CommandField następnym zapoznaj się z informacjami o produkcie powiązanym z bieżącym wierszem GridView.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-186">After referencing the Delete button in the CommandField, we next grab information about the product bound to the current GridView row.</span></span> <span data-ttu-id="0b4cc-187">Na koniec ustawimy Właściwość `OnClientClick` przycisku Usuń na odpowiednią JavaScript, która zawiera nazwę produktu.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-187">Finally, we set the Delete button s `OnClientClick` property to the appropriate JavaScript, which includes the product s name.</span></span> <span data-ttu-id="0b4cc-188">Ponieważ ciąg JavaScript przesłany do funkcji `confirm(string)` jest rozdzielany przy użyciu apostrofów, musimy wprowadzić wszelkie apostrofy, które pojawiają się w ramach nazwy produktu.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-188">Since the JavaScript string passed into the `confirm(string)` function is delimited using apostrophes we must escape any apostrophes that appear within the product s name.</span></span> <span data-ttu-id="0b4cc-189">W szczególności wszystkie apostrofy w nazwie produktu są oznaczone jako "`\'`".</span><span class="sxs-lookup"><span data-stu-id="0b4cc-189">In particular, any apostrophes in the product s name are escaped with "`\'`".</span></span>

<span data-ttu-id="0b4cc-190">Po zakończeniu tych zmian kliknięcie przycisku Usuń w widoku GridView spowoduje wyświetlenie niestandardowego okna dialogowego potwierdzenia (patrz rysunek 4).</span><span class="sxs-lookup"><span data-stu-id="0b4cc-190">With these changes complete, clicking on a Delete button in the GridView displays a customized confirmation dialog box (see Figure 4).</span></span> <span data-ttu-id="0b4cc-191">Podobnie jak w przypadku potwierdzenia MessageBox z widoku FormView, jeśli użytkownik kliknie przycisk Anuluj ogłaszanie zwrotne zostanie anulowane, co uniemożliwi usunięcie.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-191">As with the confirmation messagebox from the FormView, if the user clicks Cancel the postback is cancelled, thereby preventing the deletion from occurring.</span></span>

> [!NOTE]
> <span data-ttu-id="0b4cc-192">Tej techniki można również użyć do programistycznego dostępu do przycisku Usuń w CommandField w widoku DetailsView.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-192">This technique can also be used to programmatically access the Delete button in the CommandField in a DetailsView.</span></span> <span data-ttu-id="0b4cc-193">Dla widoku DetailsView można jednak utworzyć procedurę obsługi zdarzeń dla zdarzenia `DataBound`, ponieważ w widoku DetailsView nie ma zdarzenia `RowDataBound`.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-193">For the DetailsView, however, you d create an event handler for the `DataBound` event, since the DetailsView does not have a `RowDataBound` event.</span></span>

<span data-ttu-id="0b4cc-194">[![kliknięcie przycisku Usuń w widoku GridView powoduje wyświetlenie niestandardowego okna dialogowego potwierdzenia](adding-client-side-confirmation-when-deleting-cs/_static/image9.png)](adding-client-side-confirmation-when-deleting-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="0b4cc-194">[![Clicking the GridView s Delete Button Displays a Customized Confirmation Dialog Box](adding-client-side-confirmation-when-deleting-cs/_static/image9.png)](adding-client-side-confirmation-when-deleting-cs/_static/image8.png)</span></span>

<span data-ttu-id="0b4cc-195">**Ilustracja 4**. kliknięcie przycisku Usuń w widoku GridView powoduje wyświetlenie niestandardowego okna dialogowego potwierdzenia ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-client-side-confirmation-when-deleting-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="0b4cc-195">**Figure 4**: Clicking the GridView s Delete Button Displays a Customized Confirmation Dialog Box ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image10.png))</span></span>

## <a name="using-templatefields"></a><span data-ttu-id="0b4cc-196">Korzystanie z używanie TemplateField</span><span class="sxs-lookup"><span data-stu-id="0b4cc-196">Using TemplateFields</span></span>

<span data-ttu-id="0b4cc-197">Jedną z wad CommandField jest to, że jego przyciski muszą być dostępne za pomocą indeksowania i że obiekt wyniku musi być rzutowany do odpowiedniego typu przycisku (Button, element LinkButton lub kliknięto element ImageButton).</span><span class="sxs-lookup"><span data-stu-id="0b4cc-197">One of the disadvantages of the CommandField is that its buttons must be accessed through indexing and that the resulting object must be cast to the appropriate button type (Button, LinkButton, or ImageButton).</span></span> <span data-ttu-id="0b4cc-198">Korzystanie z typów "Magic Numbers" i "zakodowanych" zaprasza problemy, których nie można odnaleźć do czasu wykonania.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-198">Using "magic numbers" and hard-coded types invites problems that cannot be discovered until runtime.</span></span> <span data-ttu-id="0b4cc-199">Na przykład, jeśli ty lub inny programista, dodaje nowe przyciski do CommandField w pewnym momencie w przyszłości (na przykład przycisk Edytuj) lub zmienia właściwość `ButtonType`, istniejący kod nadal będzie kompilować bez błędu, ale odwiedzanie strony może spowodować wyjątek lub nieoczekiwane zachowanie, w zależności od tego, jak zapisano kod i jakie zmiany zostały wprowadzone.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-199">For example, if you, or another developer, adds new buttons to the CommandField at some point in the future (such as an Edit button) or changes the `ButtonType` property, the existing code will still compile without error, but visiting the page may cause an exception or unexpected behavior, depending on how your code was written and what changes were made.</span></span>

<span data-ttu-id="0b4cc-200">Alternatywnym podejściem jest konwertowanie widoku GridView i widoku DetailsView s CommandFields na używanie TemplateField.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-200">An alternative approach is to convert the GridView and DetailsView s CommandFields into TemplateFields.</span></span> <span data-ttu-id="0b4cc-201">Spowoduje to wygenerowanie TemplateField z `ItemTemplate`, który ma element LinkButton (lub kliknięto element ImageButton) dla każdego przycisku w CommandField.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-201">This will generate a TemplateField with an `ItemTemplate` that has a LinkButton (or Button or ImageButton) for each button in the CommandField.</span></span> <span data-ttu-id="0b4cc-202">Te przyciski `OnClientClick` właściwości mogą być przypisywane deklaratywnie, jak w widoku FormView lub można programistycznie uzyskać `DataBound` do nich dostęp przy użyciu następującego wzorca:</span><span class="sxs-lookup"><span data-stu-id="0b4cc-202">These buttons `OnClientClick` properties can be assigned declaratively, as we saw with the FormView, or can be programmatically accessed in the appropriate `DataBound` event handler using the following pattern:</span></span>

[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample7.cs)]

<span data-ttu-id="0b4cc-203">Gdzie *controlID* jest wartością właściwości `ID` przycisku.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-203">Where *controlID* is the value of the button s `ID` property.</span></span> <span data-ttu-id="0b4cc-204">Chociaż ten wzorzec nadal wymaga ustalonego typu dla rzutowania, eliminuje konieczność indeksowania, co pozwala na zmianę układu bez powodu błędu czasu wykonywania.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-204">While this pattern still requires a hard-coded type for the cast, it removes the need for indexing, allowing for the layout to change without resulting in a runtime error.</span></span>

## <a name="summary"></a><span data-ttu-id="0b4cc-205">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="0b4cc-205">Summary</span></span>

<span data-ttu-id="0b4cc-206">Funkcja JavaScript `confirm(string)` jest powszechnie stosowaną techniką służącą do sterowania przepływem pracy tworzenia formularzy.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-206">The JavaScript `confirm(string)` function is a commonly used technique for controlling form submission workflow.</span></span> <span data-ttu-id="0b4cc-207">Po wykonaniu funkcja wyświetla modalne okno dialogowe po stronie klienta, które zawiera dwa przyciski, OK i Anuluj.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-207">When executed, the function displays a modal, client-side dialog box that includes two buttons, OK and Cancel.</span></span> <span data-ttu-id="0b4cc-208">Jeśli użytkownik kliknie przycisk OK, funkcja `confirm(string)` zwróci `true`; Kliknięcie przycisku Anuluj zwraca `false`.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-208">If the user clicks OK, the `confirm(string)` function returns `true`; clicking Cancel returns `false`.</span></span> <span data-ttu-id="0b4cc-209">Ta funkcja, w połączeniu z zachowaniem przeglądarki, umożliwia anulowanie przesłania formularza, jeśli program obsługi zdarzeń w procesie przesłaniania zwróci `false`, może być używany do wyświetlania elementu MessageBox potwierdzenia podczas usuwania rekordu.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-209">This functionality, coupled with a browser s behavior to cancel a form submission if an event handler during the submission process returns `false`, can be used to display a confirmation messagebox when deleting a record.</span></span>

<span data-ttu-id="0b4cc-210">Funkcja `confirm(string)` może być skojarzona z obsługą zdarzeń `onclick` po stronie klienta i kontrolki sieci Web na przycisku, korzystając z właściwości Control s `OnClientClick`.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-210">The `confirm(string)` function can be associated with a Button Web control s client-side `onclick` event handler through the control s `OnClientClick` property.</span></span> <span data-ttu-id="0b4cc-211">Podczas pracy z przyciskiem Usuń w szablonie — w jednym z szablonów FormView lub w TemplateField w widoku DetailsView lub GridView — tę właściwość można ustawić jako deklaratywną lub programowo, jak pokazano w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-211">When working with a Delete button in a template - either in one of the FormView s templates or in a TemplateField in the DetailsView or GridView - this property can be set either declaratively or programmatically, as we saw in this tutorial.</span></span>

<span data-ttu-id="0b4cc-212">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="0b4cc-212">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="0b4cc-213">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="0b4cc-213">About the Author</span></span>

<span data-ttu-id="0b4cc-214">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor siedmiu grup ASP/ASP. NET Books i założyciel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-214">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="0b4cc-215">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="0b4cc-215">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="0b4cc-216">Jego Najnowsza książka to [*Sams ASP.NET 2,0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="0b4cc-216">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="0b4cc-217">Można go osiągnąć w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="0b4cc-217">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="0b4cc-218">lub za pośrednictwem swojego blogu, który można znaleźć w [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="0b4cc-218">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="0b4cc-219">[Poprzednie](implementing-optimistic-concurrency-cs.md)
> [dalej](limiting-data-modification-functionality-based-on-the-user-cs.md)</span><span class="sxs-lookup"><span data-stu-id="0b4cc-219">[Previous](implementing-optimistic-concurrency-cs.md)
[Next](limiting-data-modification-functionality-based-on-the-user-cs.md)</span></span>

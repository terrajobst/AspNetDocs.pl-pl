---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
title: Dodawanie kontrolek weryfikacji do interfejsów edycji i wstawiania (C#) | Microsoft Docs
author: rick-anderson
description: W tym samouczku dowiesz się, jak łatwo można dodać kontrolki weryfikacji do EditItemTemplate i InsertItemTemplate kontrolki sieci Web danych, aby uzyskać więcej...
ms.author: riande
ms.date: 07/17/2006
ms.assetid: 2086cb1a-ab78-49ae-9c0b-03891c69776a
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
msc.type: authoredcontent
ms.openlocfilehash: 110ee08f1d0707664ef6268f34ceab9da30a3e61
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78610195"
---
# <a name="adding-validation-controls-to-the-editing-and-inserting-interfaces-c"></a><span data-ttu-id="72167-103">Dodawanie kontrolek walidacji do interfejsów edycji i wstawiania (C#)</span><span class="sxs-lookup"><span data-stu-id="72167-103">Adding Validation Controls to the Editing and Inserting Interfaces (C#)</span></span>

<span data-ttu-id="72167-104">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="72167-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="72167-105">[Pobierz przykładową aplikację](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe) lub [Pobierz plik PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="72167-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe) or [Download PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span></span>

> <span data-ttu-id="72167-106">W tym samouczku dowiesz się, jak łatwo można dodać kontrolki weryfikacji do EditItemTemplate i InsertItemTemplate kontrolki sieci Web danych, aby zapewnić bardziej foolproof interfejs użytkownika.</span><span class="sxs-lookup"><span data-stu-id="72167-106">In this tutorial we'll see how easy it is to add validation controls to the EditItemTemplate and InsertItemTemplate of a data Web control, to provide a more foolproof user interface.</span></span>

## <a name="introduction"></a><span data-ttu-id="72167-107">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="72167-107">Introduction</span></span>

<span data-ttu-id="72167-108">Kontrolki GridView i DetailsView w przykładach w ostatnich trzech samouczkach zostały złożone z BoundFields i CheckBoxFields (typy pól automatycznie dodawane przez program Visual Studio podczas wiązania widoku GridView lub DetailsView ze źródłem danych). kontrolowanie za pomocą tagu inteligentnego).</span><span class="sxs-lookup"><span data-stu-id="72167-108">The GridView and DetailsView controls in the examples we've explored over the past three tutorials have all been composed of BoundFields and CheckBoxFields (the field types automatically added by Visual Studio when binding a GridView or DetailsView to a data source control through the smart tag).</span></span> <span data-ttu-id="72167-109">Podczas edytowania wiersza w widoku GridView lub DetailsView te BoundFields, które nie są tylko do odczytu, są konwertowane na pola tekstowe, z których użytkownik końcowy może modyfikować istniejące dane.</span><span class="sxs-lookup"><span data-stu-id="72167-109">When editing a row in a GridView or DetailsView, those BoundFields that are not read-only are converted into textboxes, from which the end user can modify the existing data.</span></span> <span data-ttu-id="72167-110">Podobnie podczas wstawiania nowego rekordu do kontrolki DetailsView, te BoundFields, których właściwość `InsertVisible` jest ustawiona na `true` (wartość domyślna) są renderowane jako puste pola tekstowe, w których użytkownik może podać wartości pól nowego rekordu.</span><span class="sxs-lookup"><span data-stu-id="72167-110">Similarly, when inserting a new record into a DetailsView control, those BoundFields whose `InsertVisible` property is set to `true` (the default) are rendered as empty textboxes, into which the user can provide the new record's field values.</span></span> <span data-ttu-id="72167-111">Podobnie CheckBoxFields, które są wyłączone w standardowym interfejsie tylko do odczytu, są konwertowane na pola wyboru włączone w interfejsie edytowanie i wstawianie.</span><span class="sxs-lookup"><span data-stu-id="72167-111">Likewise, CheckBoxFields, which are disabled in the standard, read-only interface, are converted into enabled checkboxes in the editing and inserting interfaces.</span></span>

<span data-ttu-id="72167-112">Podczas gdy domyślne edytowanie i wstawianie interfejsów dla BoundField i CheckBoxField mogą być przydatne, interfejs nie ma żadnego sortowania walidacji.</span><span class="sxs-lookup"><span data-stu-id="72167-112">While the default editing and inserting interfaces for the BoundField and CheckBoxField can be helpful, the interface lacks any sort of validation.</span></span> <span data-ttu-id="72167-113">Jeśli użytkownik dokonuje błędu wpisu danych, na przykład pomijania pola `ProductName` lub wprowadzenia nieprawidłowej wartości dla `UnitsInStock` (na przykład-50), wyjątek zostanie zgłoszony z poziomu głębokości architektury aplikacji.</span><span class="sxs-lookup"><span data-stu-id="72167-113">If a user makes a data entry mistake - such as omitting the `ProductName` field or entering an invalid value for `UnitsInStock` (such as -50) an exception will be raised from within the depths of the application architecture.</span></span> <span data-ttu-id="72167-114">Chociaż ten wyjątek można bezpiecznie obsłużyć, jak pokazano w [poprzednim samouczku](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md), w idealnym przypadku edytowanie lub wstawianie interfejsu użytkownika obejmuje kontrolki sprawdzania poprawności, które uniemożliwiają użytkownikowi wprowadzanie takich nieprawidłowych danych w pierwszym miejscu.</span><span class="sxs-lookup"><span data-stu-id="72167-114">While this exception can be gracefully handled as demonstrated in the [previous tutorial](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md), ideally the editing or inserting user interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="72167-115">Aby zapewnić dostosowaną edycję lub wstawianie interfejsu, należy zamienić BoundField lub CheckBoxField na TemplateField.</span><span class="sxs-lookup"><span data-stu-id="72167-115">In order to provide a customized editing or inserting interface, we need to replace the BoundField or CheckBoxField with a TemplateField.</span></span> <span data-ttu-id="72167-116">Używanie TemplateField, który był tematem dyskusji w używanie TemplateField, [w kontrolce GridView](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) i [przy użyciu używanie TemplateField w samouczkach kontrolek DetailsView](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md) , może składać się z wielu szablonów definiujących oddzielne interfejsy dla różnych stanów wiersza.</span><span class="sxs-lookup"><span data-stu-id="72167-116">TemplateFields, which were the topic of discussion in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) and [Using TemplateFields in the DetailsView Control](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md) tutorials, can consist of multiple templates defining separate interfaces for different row states.</span></span> <span data-ttu-id="72167-117">`ItemTemplate` TemplateField jest używany do renderowania pól tylko do odczytu lub wierszy w kontrolkach DetailsView lub GridView, podczas gdy `EditItemTemplate` i `InsertItemTemplate` wskazują interfejsy do użycia w trybach edycji i wstawiania.</span><span class="sxs-lookup"><span data-stu-id="72167-117">The TemplateField's `ItemTemplate` is used to when rendering read-only fields or rows in the DetailsView or GridView controls, whereas the `EditItemTemplate` and `InsertItemTemplate` indicate the interfaces to use for the editing and inserting modes, respectively.</span></span>

<span data-ttu-id="72167-118">W tym samouczku dowiesz się, jak łatwo można dodać kontrolki weryfikacji do `EditItemTemplate` i `InsertItemTemplate`, aby zapewnić bardziej foolproof interfejs użytkownika.</span><span class="sxs-lookup"><span data-stu-id="72167-118">In this tutorial we'll see how easy it is to add validation controls to the TemplateField's `EditItemTemplate` and `InsertItemTemplate` to provide a more foolproof user interface.</span></span> <span data-ttu-id="72167-119">W tym samouczku przedstawiono przykład utworzony w ramach [badania zdarzeń skojarzonych z wstawianiem, aktualizowaniem i usuwaniem](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) samouczka oraz rozszerza edytowanie i wstawianie interfejsów w celu uwzględnienia odpowiedniej weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="72167-119">Specifically, this tutorial takes the example created in the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial and augments the editing and inserting interfaces to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromexamining-the-events-associated-with-inserting-updating-and-deleting"></a><span data-ttu-id="72167-120">Krok 1. replikowanie przykładu z[badania zdarzeń skojarzonych z wstawianiem, aktualizowaniem i usuwaniem](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="72167-120">Step 1: Replicating the Example from[Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span></span>

<span data-ttu-id="72167-121">W oknie [badanie zdarzeń skojarzonych z wstawianiem, aktualizowaniem i usuwaniem](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) samouczka została utworzona strona z nazwami i cenami produktów w edytowalnym widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="72167-121">In the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial we created a page that listed the names and prices of the products in an editable GridView.</span></span> <span data-ttu-id="72167-122">Ponadto strona zawiera element DetailsView, którego właściwość `DefaultMode` została ustawiona na `Insert`, a tym samym zawsze Renderuj w trybie wstawiania.</span><span class="sxs-lookup"><span data-stu-id="72167-122">Additionally, the page included a DetailsView whose `DefaultMode` property was set to `Insert`, thereby always rendering in insert mode.</span></span> <span data-ttu-id="72167-123">Z tego widoku DetailsView użytkownik może wprowadzić nazwę i cenę nowego produktu, kliknąć pozycję Wstaw, a następnie dodać do systemu (patrz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="72167-123">From this DetailsView, the user could enter the name and price for a new product, click Insert, and have it added to the system (see Figure 1).</span></span>

<span data-ttu-id="72167-124">[![w poprzednim przykładzie użytkownicy mogą dodawać nowe produkty i edytować istniejące.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="72167-124">[![The Previous Example Allows Users to Add New Products and Edit Existing Ones](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span></span>

<span data-ttu-id="72167-125">**Rysunek 1**. w poprzednim przykładzie użytkownicy mogą dodawać nowe produkty i edytować istniejące. ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="72167-125">**Figure 1**: The Previous Example Allows Users to Add New Products and Edit Existing Ones ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png))</span></span>

<span data-ttu-id="72167-126">Naszym celem tego samouczka jest rozszerzenie widoku DetailsView i GridView w celu zapewnienia kontroli poprawności.</span><span class="sxs-lookup"><span data-stu-id="72167-126">Our goal for this tutorial is to augment the DetailsView and GridView to provide validation controls.</span></span> <span data-ttu-id="72167-127">W szczególności nasza logika walidacji będzie:</span><span class="sxs-lookup"><span data-stu-id="72167-127">In particular, our validation logic will:</span></span>

- <span data-ttu-id="72167-128">Wymagaj, aby nazwa była podana podczas wstawiania lub edytowania produktu</span><span class="sxs-lookup"><span data-stu-id="72167-128">Require that the name be provided when inserting or editing a product</span></span>
- <span data-ttu-id="72167-129">Wymagaj, aby cena była podawana podczas wstawiania rekordu; Podczas edytowania rekordu nadal będzie wymagana Cena, ale będzie ona używać logiki programowej w programie obsługi zdarzeń `RowUpdating` GridView, który jest już obecny w poprzednim samouczku</span><span class="sxs-lookup"><span data-stu-id="72167-129">Require that the price be provided when inserting a record; when editing a record, we will still require a price, but will use the programmatic logic in the GridView's `RowUpdating` event handler already present from the earlier tutorial</span></span>
- <span data-ttu-id="72167-130">Upewnij się, że wartość wprowadzona dla ceny jest prawidłowym formatem waluty</span><span class="sxs-lookup"><span data-stu-id="72167-130">Ensure that the value entered for the price is a valid currency format</span></span>

<span data-ttu-id="72167-131">Zanim będziemy mogli zapoznać się z poprzednim przykładem w celu uwzględnienia walidacji, najpierw należy przeprowadzić replikację przykładu ze strony `DataModificationEvents.aspx` na stronie tego samouczka `UIValidation.aspx`.</span><span class="sxs-lookup"><span data-stu-id="72167-131">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `DataModificationEvents.aspx` page to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="72167-132">Aby to osiągnąć, należy skopiować zarówno znaczniki deklaratywne `DataModificationEvents.aspx` strony, jak i kod źródłowy.</span><span class="sxs-lookup"><span data-stu-id="72167-132">To accomplish this we need to copy over both the `DataModificationEvents.aspx` page's declarative markup and its source code.</span></span> <span data-ttu-id="72167-133">Najpierw należy skopiować znaczniki deklaratywne, wykonując następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="72167-133">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="72167-134">Otwórz stronę `DataModificationEvents.aspx` w programie Visual Studio</span><span class="sxs-lookup"><span data-stu-id="72167-134">Open the `DataModificationEvents.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="72167-135">Przejdź do znacznika deklaracyjnego strony (kliknij przycisk Źródło w dolnej części strony).</span><span class="sxs-lookup"><span data-stu-id="72167-135">Go to the page's declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="72167-136">Skopiuj tekst w `<asp:Content>` i `</asp:Content>` tagów (wiersze od 3 do 44), jak pokazano na rysunku 2.</span><span class="sxs-lookup"><span data-stu-id="72167-136">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 44), as shown in Figure 2.</span></span>

<span data-ttu-id="72167-137">[![skopiować tekst w &lt;ASP: zawartość kontrolki&gt;](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="72167-137">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span></span>

<span data-ttu-id="72167-138">**Rysunek 2**. Skopiuj tekst w kontrolce `<asp:Content>` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="72167-138">**Figure 2**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))</span></span>

1. <span data-ttu-id="72167-139">Otwórz stronę `UIValidation.aspx`</span><span class="sxs-lookup"><span data-stu-id="72167-139">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="72167-140">Przejdź do znacznika deklaracyjnego strony</span><span class="sxs-lookup"><span data-stu-id="72167-140">Go to the page's declarative markup</span></span>
3. <span data-ttu-id="72167-141">Wklej tekst w kontrolce `<asp:Content>`.</span><span class="sxs-lookup"><span data-stu-id="72167-141">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="72167-142">Aby skopiować kod źródłowy, Otwórz stronę `DataModificationEvents.aspx.cs` i skopiuj tylko tekst *w* klasie `EditInsertDelete_DataModificationEvents`.</span><span class="sxs-lookup"><span data-stu-id="72167-142">To copy over the source code, open the `DataModificationEvents.aspx.cs` page and copy just the text *within* the `EditInsertDelete_DataModificationEvents` class.</span></span> <span data-ttu-id="72167-143">Skopiuj trzy procedury obsługi zdarzeń (`Page_Load`, `GridView1_RowUpdating`i `ObjectDataSource1_Inserting`), ale **nie** Kopiuj deklaracji klasy ani instrukcji `using`.</span><span class="sxs-lookup"><span data-stu-id="72167-143">Copy the three event handlers (`Page_Load`, `GridView1_RowUpdating`, and `ObjectDataSource1_Inserting`), but do **not** copy the class declaration or `using` statements.</span></span> <span data-ttu-id="72167-144">Wklej *skopiowany tekst w* klasie `EditInsertDelete_UIValidation` w `UIValidation.aspx.cs`.</span><span class="sxs-lookup"><span data-stu-id="72167-144">Paste the copied text *within* the `EditInsertDelete_UIValidation` class in `UIValidation.aspx.cs`.</span></span>

<span data-ttu-id="72167-145">Po przeniesieniu zawartości i kodu z `DataModificationEvents.aspx` do `UIValidation.aspx`Poświęć chwilę na przetestowanie postępu w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="72167-145">After moving over the content and code from `DataModificationEvents.aspx` to `UIValidation.aspx`, take a moment to test out your progress in a browser.</span></span> <span data-ttu-id="72167-146">Należy zobaczyć te same dane wyjściowe i korzystać z tych samych funkcji na każdej z tych dwóch stron (zapoznaj się z powrotem do rysunku 1, aby zrzut ekranu `DataModificationEvents.aspx` w działaniu).</span><span class="sxs-lookup"><span data-stu-id="72167-146">You should see the same output and experience the same functionality in each of these two pages (refer back to Figure 1 for a screen shot of `DataModificationEvents.aspx` in action).</span></span>

## <a name="step-2-converting-the-boundfields-into-templatefields"></a><span data-ttu-id="72167-147">Krok 2: konwertowanie BoundFields na używanie TemplateField</span><span class="sxs-lookup"><span data-stu-id="72167-147">Step 2: Converting the BoundFields Into TemplateFields</span></span>

<span data-ttu-id="72167-148">Aby dodać kontrolki weryfikacji do interfejsów edycji i wstawiania, BoundFields używany przez kontrolki DetailsView i GridView muszą zostać przekonwertowane na używanie TemplateField.</span><span class="sxs-lookup"><span data-stu-id="72167-148">To add validation controls to the editing and inserting interfaces, the BoundFields used by the DetailsView and GridView controls need to be converted into TemplateFields.</span></span> <span data-ttu-id="72167-149">Aby to osiągnąć, kliknij odpowiednio linki Edytuj kolumny i edytuj pola w tagach inteligentnych GridView i DetailsView.</span><span class="sxs-lookup"><span data-stu-id="72167-149">To achieve this, click on the Edit Columns and Edit Fields links in the GridView and DetailsView's smart tags, respectively.</span></span> <span data-ttu-id="72167-150">Zaznacz wszystkie BoundFields i kliknij link "Konwertuj to pole na TemplateField".</span><span class="sxs-lookup"><span data-stu-id="72167-150">There, select each of the BoundFields and click the "Convert this field into a TemplateField" link.</span></span>

<span data-ttu-id="72167-151">[![przekonwertować wszystkie BoundFieldsy widoku DetailsView i GridView na używanie TemplateField](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="72167-151">[![Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span></span>

<span data-ttu-id="72167-152">**Rysunek 3**. Przekonwertuj wszystkie BoundFieldsy widoku DetailsView i GridView na używanie TemplateField ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="72167-152">**Figure 3**: Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png))</span></span>

<span data-ttu-id="72167-153">Konwersja BoundField na TemplateField za pomocą okna dialogowego pola generuje TemplateField, który wykazuje te same tylko do odczytu, edycji i wstawiania interfejsów jako samego BoundField.</span><span class="sxs-lookup"><span data-stu-id="72167-153">Converting a BoundField into a TemplateField through the Fields dialog box generates a TemplateField that exhibits the same read-only, editing, and inserting interfaces as the BoundField itself.</span></span> <span data-ttu-id="72167-154">Poniższe znaczniki przedstawiają składnię deklaratywną dla pola `ProductName` w widoku DetailsView po przekształceniu jej w TemplateField:</span><span class="sxs-lookup"><span data-stu-id="72167-154">The following markup shows the declarative syntax for the `ProductName` field in the DetailsView after it has been converted into a TemplateField:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample1.aspx)]

<span data-ttu-id="72167-155">Należy zauważyć, że te TemplateField miały trzy szablony, które są automatycznie tworzone `ItemTemplate`, `EditItemTemplate`i `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="72167-155">Note that this TemplateField had three templates automatically created `ItemTemplate`, `EditItemTemplate`, and `InsertItemTemplate`.</span></span> <span data-ttu-id="72167-156">`ItemTemplate` Wyświetla pojedynczą wartość pola danych (`ProductName`) przy użyciu kontrolki sieci Web etykieta, podczas gdy `EditItemTemplate` i `InsertItemTemplate` przedstawiają wartość pola danych w formancie sieci Web TextBox, który kojarzy pole danych z właściwością `Text`ą pola tekstowego przy użyciu wielokierunkowego wiązania z danymi.</span><span class="sxs-lookup"><span data-stu-id="72167-156">The `ItemTemplate` displays a single data field value (`ProductName`) using a Label Web control, while the `EditItemTemplate` and `InsertItemTemplate` present the data field value in a TextBox Web control that associates the data field with the TextBox's `Text` property using two-way databinding.</span></span> <span data-ttu-id="72167-157">Ponieważ korzystamy tylko z widoku DetailsView na tej stronie do wstawiania, możesz usunąć `ItemTemplate` i `EditItemTemplate` z dwóch używanie TemplateField, chociaż nie ma żadnych szkód w opuszczaniu tych danych.</span><span class="sxs-lookup"><span data-stu-id="72167-157">Since we are only using the DetailsView in this page for inserting, you may remove the `ItemTemplate` and `EditItemTemplate` from the two TemplateFields, although there's no harm in leaving them.</span></span>

<span data-ttu-id="72167-158">Ponieważ GridView nie obsługuje wbudowanej funkcji wstawiania w widoku DetailsView, przekonwertowanie pola `ProductName` GridView na TemplateField powoduje tylko `ItemTemplate` i `EditItemTemplate`:</span><span class="sxs-lookup"><span data-stu-id="72167-158">Since the GridView does not support the built-in inserting features of the DetailsView, converting the GridView's `ProductName` field into a TemplateField results in only an `ItemTemplate` and `EditItemTemplate`:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample2.aspx)]

<span data-ttu-id="72167-159">Klikając "Konwertuj to pole na TemplateField", program Visual Studio utworzył TemplateField, którego szablony naśladuje interfejs użytkownika przekonwertowanego BoundField.</span><span class="sxs-lookup"><span data-stu-id="72167-159">By clicking the "Convert this field into a TemplateField," Visual Studio has created a TemplateField whose templates mimic the user interface of the converted BoundField.</span></span> <span data-ttu-id="72167-160">Możesz to sprawdzić, odwiedzając tę stronę za pomocą przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="72167-160">You can verify this by visiting this page through a browser.</span></span> <span data-ttu-id="72167-161">Wygląd i zachowanie używanie TemplateField są takie same, jak w przypadku użycia BoundFields.</span><span class="sxs-lookup"><span data-stu-id="72167-161">You'll find that the appearance and behavior of the TemplateFields is identical to the experience when BoundFields were used instead.</span></span>

> [!NOTE]
> <span data-ttu-id="72167-162">W razie potrzeby możesz dostosować interfejsy edycji w szablonach.</span><span class="sxs-lookup"><span data-stu-id="72167-162">Feel free to customize the editing interfaces in the templates as needed.</span></span> <span data-ttu-id="72167-163">Na przykład możemy chcieć, aby pole tekstowe w `UnitPrice` używanie TemplateField renderowane jako mniejsze pole tekstowe niż `ProductName` pole tekstowe.</span><span class="sxs-lookup"><span data-stu-id="72167-163">For example, we may want to have the TextBox in the `UnitPrice` TemplateFields rendered as a smaller textbox than the `ProductName` textbox.</span></span> <span data-ttu-id="72167-164">Aby to osiągnąć, można ustawić właściwość `Columns` pola tekstowego na odpowiednią wartość lub podać absolutną szerokość za pomocą właściwości `Width`.</span><span class="sxs-lookup"><span data-stu-id="72167-164">To accomplish this you can set the TextBox's `Columns` property to an appropriate value or provide an absolute width via the `Width` property.</span></span> <span data-ttu-id="72167-165">W następnym samouczku zobaczymy, jak całkowicie dostosować interfejs edycji, zastępując pole tekstowe alternatywnym formantem sieci Web wprowadzania danych.</span><span class="sxs-lookup"><span data-stu-id="72167-165">In the next tutorial we'll see how to completely customize the editing interface by replacing the TextBox with an alternate data entry Web control.</span></span>

## <a name="step-3-adding-the-validation-controls-to-the-gridviewsedititemtemplate-s"></a><span data-ttu-id="72167-166">Krok 3. Dodawanie kontrolek weryfikacji do`EditItemTemplate` GridView</span><span class="sxs-lookup"><span data-stu-id="72167-166">Step 3: Adding the Validation Controls to the GridView's`EditItemTemplate` s</span></span>

<span data-ttu-id="72167-167">Podczas konstruowania formularzy wprowadzania danych ważne jest, aby użytkownicy wprowadzali wszystkie wymagane pola, a wszystkie podane dane wejściowe są prawidłowymi, właściwie sformatowanymi wartościami.</span><span class="sxs-lookup"><span data-stu-id="72167-167">When constructing data entry forms, it is important that users enter any required fields and that all provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="72167-168">Aby zapewnić, że dane wejściowe użytkownika są prawidłowe, ASP.NET zapewnia pięć wbudowanych kontrolek walidacji, które są przeznaczone do użycia w celu sprawdzenia wartości pojedynczej kontrolki wejściowej:</span><span class="sxs-lookup"><span data-stu-id="72167-168">To help ensure that a user's inputs are valid, ASP.NET provides five built-in validation controls that are designed to be used to validate the value of a single input control:</span></span>

- <span data-ttu-id="72167-169">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) gwarantuje, że została podana wartość</span><span class="sxs-lookup"><span data-stu-id="72167-169">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="72167-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) sprawdza wartość pod kątem innej wartości kontrolki sieci Web lub wartości stałej lub gwarantuje, że format wartości jest dozwolony dla określonego typu danych</span><span class="sxs-lookup"><span data-stu-id="72167-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value's format is legal for a specified data type</span></span>
- <span data-ttu-id="72167-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) gwarantuje, że wartość znajduje się w zakresie wartości</span><span class="sxs-lookup"><span data-stu-id="72167-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="72167-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) sprawdza poprawność wartości względem [wyrażenia regularnego](http://en.wikipedia.org/wiki/Regular_expression)</span><span class="sxs-lookup"><span data-stu-id="72167-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="72167-173">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) sprawdza poprawność wartości względem niestandardowej, zdefiniowanej przez użytkownika metody</span><span class="sxs-lookup"><span data-stu-id="72167-173">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="72167-174">Aby uzyskać więcej informacji na temat tych pięciu kontrolek, zapoznaj się z [sekcją kontrolki walidacji](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) [samouczków szybkiego startu ASP.NET](https://asp.net/QuickStart/aspnet/).</span><span class="sxs-lookup"><span data-stu-id="72167-174">For more information on these five controls, check out the [Validation Controls section](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://asp.net/QuickStart/aspnet/).</span></span>

<span data-ttu-id="72167-175">W naszym samouczku będziemy musieli użyć elementu RequiredFieldValidator zarówno w widoku `ProductName` DetailsView, jak i GridView, a RequiredFieldValidator w TemplateField `UnitPrice` DetailsView.</span><span class="sxs-lookup"><span data-stu-id="72167-175">For our tutorial we'll need to use a RequiredFieldValidator in both the DetailsView and GridView's `ProductName` TemplateFields and a RequiredFieldValidator in the DetailsView's `UnitPrice` TemplateField.</span></span> <span data-ttu-id="72167-176">Ponadto należy dodać CompareValidator do obu formantów "`UnitPrice` używanie TemplateField, które zapewniają, że wprowadzona cena ma wartość większą lub równą 0 i jest prezentowana w prawidłowym formacie waluty.</span><span class="sxs-lookup"><span data-stu-id="72167-176">Furthermore, we'll need to add a CompareValidator to both controls' `UnitPrice` TemplateFields that ensures that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="72167-177">Chociaż ASP.NET 1. x miała te same pięć kontrolek weryfikacyjnych, ASP.NET 2,0 dodaliśmy kilka ulepszeń, główne dwa z nich obsługują skrypty po stronie klienta dla przeglądarek innych niż Internet Explorer i możliwość partycjonowania formantów walidacji na stronie grupy walidacji.</span><span class="sxs-lookup"><span data-stu-id="72167-177">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers other than Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="72167-178">Aby uzyskać więcej informacji na temat nowych funkcji kontroli walidacji w 2,0, zapoznaj się z artykułem dotyczącym wypełniania [kontrolek weryfikacji w ASP.NET 2,0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="72167-178">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>

<span data-ttu-id="72167-179">Zacznijmy od dodania wymaganych kontrolek weryfikacji do `EditItemTemplate` s w używanie TemplateField GridView.</span><span class="sxs-lookup"><span data-stu-id="72167-179">Let's start by adding the necessary validation controls to the `EditItemTemplate` s in the GridView's TemplateFields.</span></span> <span data-ttu-id="72167-180">Aby to osiągnąć, kliknij link Edytuj szablony w tagu inteligentnym GridView, aby wyświetlić interfejs edycji szablonu.</span><span class="sxs-lookup"><span data-stu-id="72167-180">To accomplish this, click on the Edit Templates link from the GridView's smart tag to bring up the template editing interface.</span></span> <span data-ttu-id="72167-181">W tym miejscu możesz wybrać szablon do edycji z listy rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="72167-181">From here, you can select which template to edit from the drop-down list.</span></span> <span data-ttu-id="72167-182">Ponieważ chcemy rozszerzyć interfejs edycji, musimy dodać kontrolki weryfikacji do `ProductName` i `UnitPrice``EditItemTemplate` s.</span><span class="sxs-lookup"><span data-stu-id="72167-182">Since we want to augment the editing interface, we need to add validation controls to the `ProductName` and `UnitPrice`'s `EditItemTemplate` s.</span></span>

<span data-ttu-id="72167-183">[![musimy zwiększyć EditItemTemplates ProductName i CenaJednostkowa](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="72167-183">[![We Need to Extend the ProductName and UnitPrice's EditItemTemplates](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span></span>

<span data-ttu-id="72167-184">**Rysunek 4**. musimy zwiększyć `ProductName` i `UnitPrice``EditItemTemplate` s ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="72167-184">**Figure 4**: We Need to Extend the `ProductName` and `UnitPrice`'s `EditItemTemplate` s ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png))</span></span>

<span data-ttu-id="72167-185">W `EditItemTemplate``ProductName` Dodaj RequiredFieldValidator, przeciągając go z przybornika do interfejsu edycji szablonu, umieszczając po elemencie TextBox.</span><span class="sxs-lookup"><span data-stu-id="72167-185">In the `ProductName` `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing after the TextBox.</span></span>

<span data-ttu-id="72167-186">[![dodać RequiredFieldValidator do EditItemTemplate ProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="72167-186">[![Add a RequiredFieldValidator to the ProductName EditItemTemplate](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span></span>

<span data-ttu-id="72167-187">**Rysunek 5**. Dodawanie RequiredFieldValidator do `EditItemTemplate` `ProductName` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="72167-187">**Figure 5**: Add a RequiredFieldValidator to the `ProductName` `EditItemTemplate` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))</span></span>

<span data-ttu-id="72167-188">Wszystkie kontrolki walidacji działają, sprawdzając poprawność danych wejściowych pojedynczej kontrolki sieci Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="72167-188">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="72167-189">W związku z tym musimy wskazać, że RequiredFieldValidator dodaliśmy powinien sprawdzić poprawność względem pola tekstowego w `EditItemTemplate`; jest to realizowane przez ustawienie [Właściwości ControlToValidate obiektu](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) kontrolki walidacji na `ID` odpowiedniej kontrolki sieci Web.</span><span class="sxs-lookup"><span data-stu-id="72167-189">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the TextBox in the `EditItemTemplate`; this is accomplished by setting the validation control's [ControlToValidate property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control.</span></span> <span data-ttu-id="72167-190">Pole tekstowe ma obecnie nondescript `ID` `TextBox1`, ale zmienimy je na bardziej odpowiednie.</span><span class="sxs-lookup"><span data-stu-id="72167-190">The TextBox currently has the rather nondescript `ID` of `TextBox1`, but let's change it to something more appropriate.</span></span> <span data-ttu-id="72167-191">Kliknij pole tekstowe w szablonie, a następnie w okno Właściwości zmień `ID` `TextBox1` na `EditProductName`.</span><span class="sxs-lookup"><span data-stu-id="72167-191">Click on the TextBox in the template and then, from the Properties window, change the `ID` from `TextBox1` to `EditProductName`.</span></span>

<span data-ttu-id="72167-192">[![zmienić identyfikatora pola tekstowego na EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="72167-192">[![Change the TextBox's ID to EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span></span>

<span data-ttu-id="72167-193">**Ilustracja 6**. zmiana `ID` pola tekstowego na `EditProductName` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="72167-193">**Figure 6**: Change the TextBox's `ID` to `EditProductName` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png))</span></span>

<span data-ttu-id="72167-194">Następnie ustaw właściwość `ControlToValidate` RequiredFieldValidator na `EditProductName`.</span><span class="sxs-lookup"><span data-stu-id="72167-194">Next, set the RequiredFieldValidator's `ControlToValidate` property to `EditProductName`.</span></span> <span data-ttu-id="72167-195">Na koniec Ustaw [Właściwość ErrorMessage](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) na "należy podać nazwę produktu" i [właściwość Text](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) na "\*".</span><span class="sxs-lookup"><span data-stu-id="72167-195">Finally, set the [ErrorMessage property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to "You must provide the product's name" and the [Text property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to "\*".</span></span> <span data-ttu-id="72167-196">Wartość właściwości `Text`, jeśli podana, to tekst wyświetlany przez kontrolkę walidacji w przypadku niepowodzenia walidacji.</span><span class="sxs-lookup"><span data-stu-id="72167-196">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="72167-197">Wartość właściwości `ErrorMessage`, która jest wymagana, jest używana przez formant podsumowania walidacji; Jeśli `Text` wartość właściwości zostanie pominięta, wartość właściwości `ErrorMessage` jest również tekstem wyświetlanym przez kontrolkę walidacji dla nieprawidłowych danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="72167-197">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is also the text displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="72167-198">Po ustawieniu tych trzech właściwości RequiredFieldValidator ekran powinien wyglądać podobnie do rysunku 7.</span><span class="sxs-lookup"><span data-stu-id="72167-198">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 7.</span></span>

<span data-ttu-id="72167-199">[![ustawić właściwości ControlToValidate obiektu, ErrorMessage i Text elementu RequiredFieldValidator](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="72167-199">[![Set the RequiredFieldValidator's ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span></span>

<span data-ttu-id="72167-200">**Rysunek 7**. ustawianie właściwości `ControlToValidate`, `ErrorMessage`i `Text` dla RequiredFieldValidator (kliknij,[Aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="72167-200">**Figure 7**: Set the RequiredFieldValidator's `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))</span></span>

<span data-ttu-id="72167-201">Po dodaniu RequiredFieldValidator do `EditItemTemplate``ProductName` wszystko to, co ma na celu dodanie niezbędnej walidacji `UnitPrice` `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="72167-201">With the RequiredFieldValidator added to the `ProductName` `EditItemTemplate`, all that remains is to add the necessary validation to the `UnitPrice` `EditItemTemplate`.</span></span> <span data-ttu-id="72167-202">Ze względu na to, że na tej stronie `UnitPrice` jest opcjonalne podczas edytowania rekordu, nie musimy dodawać RequiredFieldValidator.</span><span class="sxs-lookup"><span data-stu-id="72167-202">Since we've decided that, for this page, the `UnitPrice` is optional when editing a record, we don't need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="72167-203">Należy jednak dodać CompareValidator, aby upewnić się, że `UnitPrice`, jeśli jest podany, jest poprawnie sformatowana jako waluta i jest większa lub równa 0.</span><span class="sxs-lookup"><span data-stu-id="72167-203">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="72167-204">Przed dodaniem CompareValidator do `EditItemTemplate``UnitPrice` należy najpierw zmienić identyfikator kontrolki sieci Web TextBox z `TextBox2` na `EditUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="72167-204">Before we add the CompareValidator to the `UnitPrice` `EditItemTemplate`, let's first change the TextBox Web control's ID from `TextBox2` to `EditUnitPrice`.</span></span> <span data-ttu-id="72167-205">Po wprowadzeniu tej zmiany Dodaj CompareValidator, ustawiając jej Właściwość `ControlToValidate` na `EditUnitPrice`, jej Właściwość `ErrorMessage` na wartość "Cena musi być większa niż lub równa zero i nie może zawierać symbolu waluty" i jego właściwości `Text` na "\*".</span><span class="sxs-lookup"><span data-stu-id="72167-205">After making this change, add the CompareValidator, setting its `ControlToValidate` property to `EditUnitPrice`, its `ErrorMessage` property to "The price must be greater than or equal to zero and cannot include the currency symbol", and its `Text` property to "\*".</span></span>

<span data-ttu-id="72167-206">Aby wskazać, że wartość `UnitPrice` musi być większa lub równa 0, ustaw [Właściwość operator](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) CompareValidator na `GreaterThanEqual`, jej [Właściwość ValueToCompare](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) na wartość "0", a jej [Właściwość Type](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) na `Currency`.</span><span class="sxs-lookup"><span data-stu-id="72167-206">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator's [Operator property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [ValueToCompare property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to "0", and its [Type property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span> <span data-ttu-id="72167-207">W następującej składni deklaracyjnej przedstawiono `EditItemTemplate` `UnitPrice` TemplateField po wprowadzeniu tych zmian:</span><span class="sxs-lookup"><span data-stu-id="72167-207">The following declarative syntax shows the `UnitPrice` TemplateField's `EditItemTemplate` after these changes have been made:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample3.aspx)]

<span data-ttu-id="72167-208">Po wprowadzeniu tych zmian Otwórz stronę w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="72167-208">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="72167-209">Jeśli spróbujesz pominąć nazwę lub wprowadzić nieprawidłową wartość ceny podczas edytowania produktu, obok pola tekstowego pojawia się gwiazdka.</span><span class="sxs-lookup"><span data-stu-id="72167-209">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="72167-210">Jak pokazano na rysunku 8, wartość ceny, która zawiera symbol waluty, na przykład $19,95, jest uznawana za nieprawidłową.</span><span class="sxs-lookup"><span data-stu-id="72167-210">As Figure 8 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="72167-211">CompareValidator `Currency` `Type` umożliwia używanie separatorów cyfr (takich jak przecinki lub kropki, w zależności od ustawień kultury) i wiodącego znaku plus lub minus, ale *nie zezwala na* symbol waluty.</span><span class="sxs-lookup"><span data-stu-id="72167-211">The CompareValidator's `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="72167-212">Takie zachowanie może Perplex użytkowników jako interfejs edycji obecnie renderuje `UnitPrice` przy użyciu formatu waluty.</span><span class="sxs-lookup"><span data-stu-id="72167-212">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="72167-213">Odwołaj się to w przypadku *zdarzeń skojarzonych z wstawianiem, aktualizowaniem i usuwaniem* samouczka ustawimy Właściwość `DataFormatString` BoundField na `{0:c}`, aby sformatować ją jako walutę.</span><span class="sxs-lookup"><span data-stu-id="72167-213">Recall that in the *Events Associated with Inserting, Updating, and Deleting* tutorial we set the BoundField's `DataFormatString` property to `{0:c}` in order to format it as a currency.</span></span> <span data-ttu-id="72167-214">Ponadto ustawimy Właściwość `ApplyFormatInEditMode` na wartość true, co spowoduje, że interfejs edycyjny w programie GridView sformatuje `UnitPrice` jako walutę.</span><span class="sxs-lookup"><span data-stu-id="72167-214">Furthermore, we set the `ApplyFormatInEditMode` property to true, causing the GridView's editing interface to format the `UnitPrice` as a currency.</span></span> <span data-ttu-id="72167-215">Podczas konwertowania BoundField na TemplateField, program Visual Studio zauważał te ustawienia i sformatował Właściwość `Text` TextBox jako walutę przy użyciu składni DataBinding `<%# Bind("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="72167-215">When converting the BoundField into a TemplateField, Visual Studio noted these settings and formatted the TextBox's `Text` property as a currency using the databinding syntax `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span>

<span data-ttu-id="72167-216">[![gwiazdki pojawia się obok pól tekstowych z nieprawidłowymi danymi wejściowymi](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="72167-216">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span></span>

<span data-ttu-id="72167-217">**Ilustracja 8**. obok pól tekstowych pojawia się gwiazdka z nieprawidłowymi danymi wejściowymi ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="72167-217">**Figure 8**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png))</span></span>

<span data-ttu-id="72167-218">Gdy walidacja działa tak, jak to jest, użytkownik musi ręcznie usunąć symbol waluty podczas edytowania rekordu, co nie jest akceptowalne.</span><span class="sxs-lookup"><span data-stu-id="72167-218">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="72167-219">W celu rozwiązania tego problemu dostępne są trzy opcje:</span><span class="sxs-lookup"><span data-stu-id="72167-219">To remedy this, we have three options:</span></span>

1. <span data-ttu-id="72167-220">Skonfiguruj `EditItemTemplate` tak, aby wartość `UnitPrice` nie była sformatowana jako waluta.</span><span class="sxs-lookup"><span data-stu-id="72167-220">Configure the `EditItemTemplate` so that the `UnitPrice` value is not formatted as a currency.</span></span>
2. <span data-ttu-id="72167-221">Zezwalaj użytkownikowi na wprowadzanie symbolu waluty przez usunięcie CompareValidator i zastąpienie go RegularExpressionValidator, który prawidłowo sprawdza prawidłowo sformatowaną wartość waluty.</span><span class="sxs-lookup"><span data-stu-id="72167-221">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that properly checks for a properly formatted currency value.</span></span> <span data-ttu-id="72167-222">Problem polega na tym, że wyrażenie regularne służące do sprawdzania poprawności wartości walutowej nie jest dość i wymagałoby pisania kodu, jeśli chcemy uwzględnić ustawienia kultury.</span><span class="sxs-lookup"><span data-stu-id="72167-222">The problem here is that the regular expression to validate a currency value is not pretty and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="72167-223">Całkowicie Usuń kontrolę weryfikacji i Polegaj na logice walidacji po stronie serwera w programie obsługi zdarzeń `RowUpdating` GridView.</span><span class="sxs-lookup"><span data-stu-id="72167-223">Remove the validation control altogether and rely on server-side validation logic in the GridView's `RowUpdating` event handler.</span></span>

<span data-ttu-id="72167-224">Przejdźmy do opcji #1 dla tego ćwiczenia.</span><span class="sxs-lookup"><span data-stu-id="72167-224">Let's go with option #1 for this exercise.</span></span> <span data-ttu-id="72167-225">Obecnie `UnitPrice` jest sformatowana jako waluta ze względu na wyrażenie wiązania danych dla pola tekstowego w `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="72167-225">Currently the `UnitPrice` is formatted as a currency due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="72167-226">Zmień instrukcję bind na `Bind("UnitPrice", "{0:n2}")`, która formatuje wynik jako liczbę z dwiema cyframi precyzji.</span><span class="sxs-lookup"><span data-stu-id="72167-226">Change the Bind statement to `Bind("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="72167-227">Można to zrobić bezpośrednio poprzez składnię deklaratywną lub klikając łącze Edytuj powiązania danych z `EditUnitPrice` TextBox w `EditItemTemplate` `UnitPrice` TemplateField (zobacz ilustracje 9 i 10).</span><span class="sxs-lookup"><span data-stu-id="72167-227">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `EditUnitPrice` TextBox in the `UnitPrice` TemplateField's `EditItemTemplate` (see Figures 9 and 10).</span></span>

<span data-ttu-id="72167-228">[![kliknij link Edytuj powiązania danych w polu tekstowym](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="72167-228">[![Click on the TextBox's Edit DataBindings link](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span></span>

<span data-ttu-id="72167-229">**Ilustracja 9**. Kliknij link Edytuj powiązania danych w polu tekstowym (kliknij,[Aby wyświetlić obraz o pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="72167-229">**Figure 9**: Click on the TextBox's Edit DataBindings link ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png))</span></span>

<span data-ttu-id="72167-230">[![określić specyfikator formatu w instrukcji bind](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="72167-230">[![Specify the Format Specifier in the Bind Statement](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span></span>

<span data-ttu-id="72167-231">**Ilustracja 10**. Określanie specyfikatora formatu w instrukcji `Bind` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="72167-231">**Figure 10**: Specify the Format Specifier in the `Bind` Statement ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))</span></span>

<span data-ttu-id="72167-232">W przypadku tej zmiany sformatowana cena w interfejsie edycji obejmuje przecinki jako separator grupy i kropkę jako separator dziesiętny, ale pozostawia symbol waluty.</span><span class="sxs-lookup"><span data-stu-id="72167-232">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="72167-233">`EditItemTemplate` `UnitPrice` nie zawiera elementu RequiredFieldValidator, co pozwala na rozpoczęcie procesu ogłaszania zwrotnego i logiki aktualizowania.</span><span class="sxs-lookup"><span data-stu-id="72167-233">The `UnitPrice` `EditItemTemplate` doesn't include a RequiredFieldValidator, allowing the postback to ensue and the updating logic to commence.</span></span> <span data-ttu-id="72167-234">Niemniej jednak program obsługi zdarzeń `RowUpdating` skopiowany za pomocą funkcji *badania zdarzeń skojarzonych z wstawianiem, aktualizowaniem i usuwaniem* samouczka zawiera kontrolę programistyczną, która zapewnia, że `UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="72167-234">However, the `RowUpdating` event handler copied over from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial includes a programmatic check that ensures that the `UnitPrice` is provided.</span></span> <span data-ttu-id="72167-235">Możesz usunąć tę logikę, pozostawić ją w niezmienionej postaci lub dodać RequiredFieldValidator do `EditItemTemplate``UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="72167-235">Feel free to remove this logic, leave it in as-is, or add a RequiredFieldValidator to the `UnitPrice` `EditItemTemplate`.</span></span>

## <a name="step-4-summarizing-data-entry-problems"></a><span data-ttu-id="72167-236">Krok 4. podsumowanie problemów z wprowadzaniem danych</span><span class="sxs-lookup"><span data-stu-id="72167-236">Step 4: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="72167-237">Oprócz pięciu kontrolek weryfikacyjnych ASP.NET zawiera [kontrolkę podsumowania walidacji](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), która wyświetla `ErrorMessage` s tych kontrolek sprawdzania poprawności, które wykryły nieprawidłowe dane.</span><span class="sxs-lookup"><span data-stu-id="72167-237">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="72167-238">Te dane podsumowujące mogą być wyświetlane jako tekst na stronie sieci Web lub przez modalne, po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="72167-238">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="72167-239">Ulepszamy ten samouczek, aby dołączyć element MessageBox po stronie klienta podsumowujący wszelkie problemy z walidacją.</span><span class="sxs-lookup"><span data-stu-id="72167-239">Let's enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="72167-240">Aby to osiągnąć, przeciągnij formant podsumowania walidacji z przybornika do projektanta.</span><span class="sxs-lookup"><span data-stu-id="72167-240">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="72167-241">Lokalizacja kontroli poprawności nie jest w rzeczywistości kwestią, ponieważ skonfigurujemy ją tak, aby wyświetlała tylko podsumowanie jako element MessageBox.</span><span class="sxs-lookup"><span data-stu-id="72167-241">The location of the Validation control doesn't really matter, since we're going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="72167-242">Po dodaniu kontrolki ustaw jej [Właściwość ShowSummary](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) na wartość `false` i jej [właściwość ShowMessageBox](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) na `true`.</span><span class="sxs-lookup"><span data-stu-id="72167-242">After adding the control, set its [ShowSummary property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `false` and its [ShowMessageBox property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `true`.</span></span> <span data-ttu-id="72167-243">W tym przypadku wszelkie błędy sprawdzania poprawności są sumowane w elemencie MessageBox po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="72167-243">With this addition, any validation errors are summarized in a client-side messagebox.</span></span>

<span data-ttu-id="72167-244">[![błędy walidacji są sumowane w elemencie MessageBox po stronie klienta](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="72167-244">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span></span>

<span data-ttu-id="72167-245">**Ilustracja 11**. błędy walidacji są sumowane w elemencie MessageBox po stronie klienta ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="72167-245">**Figure 11**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png))</span></span>

## <a name="step-5-adding-the-validation-controls-to-the-detailsviewsinsertitemtemplate"></a><span data-ttu-id="72167-246">Krok 5. Dodawanie kontrolek weryfikacji do`InsertItemTemplate` DetailsView</span><span class="sxs-lookup"><span data-stu-id="72167-246">Step 5: Adding the Validation Controls to the DetailsView's`InsertItemTemplate`</span></span>

<span data-ttu-id="72167-247">Wszystkie te, które pozostają na potrzeby tego samouczka, to dodawanie kontrolek weryfikacji do interfejsu wstawiania w widoku DetailsView.</span><span class="sxs-lookup"><span data-stu-id="72167-247">All that remains for this tutorial is to add the validation controls to the DetailsView's inserting interface.</span></span> <span data-ttu-id="72167-248">Proces dodawania kontrolek weryfikacji do szablonów DetailsView jest identyczny z tym, co zostało zbadane w kroku 3. w związku z tym będziemy Breeze przez zadanie w tym kroku.</span><span class="sxs-lookup"><span data-stu-id="72167-248">The process of adding validation controls to the DetailsView's templates is identical to that examined in Step 3; therefore, we'll breeze through the task in this step.</span></span> <span data-ttu-id="72167-249">Tak jak w przypadku `EditItemTemplate`u GridView, zachęcamy do zmiany nazwy `ID` s pól textnondescript `TextBox1` i `TextBox2` `InsertProductName` i `InsertUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="72167-249">As we did with the GridView's `EditItemTemplate` s, I encourage you to rename the `ID` s of the TextBoxes from the nondescript `TextBox1` and `TextBox2` to `InsertProductName` and `InsertUnitPrice`.</span></span>

<span data-ttu-id="72167-250">Dodaj RequiredFieldValidator do `InsertItemTemplate``ProductName`.</span><span class="sxs-lookup"><span data-stu-id="72167-250">Add a RequiredFieldValidator to the `ProductName` `InsertItemTemplate`.</span></span> <span data-ttu-id="72167-251">Ustaw `ControlToValidate` na `ID` pola tekstowego w szablonie, jego właściwość `Text` na "\*" i jego właściwość `ErrorMessage` na "musisz podać nazwę produktu".</span><span class="sxs-lookup"><span data-stu-id="72167-251">Set the `ControlToValidate` to the `ID` of the TextBox in the template, its `Text` property to "\*" and its `ErrorMessage` property to "You must provide the product's name".</span></span>

<span data-ttu-id="72167-252">Ponieważ `UnitPrice` jest wymagana dla tej strony podczas dodawania nowego rekordu, Dodaj element RequiredFieldValidator do `InsertItemTemplate``UnitPrice`, odpowiednio ustawiając jego właściwości `ControlToValidate`, `Text`i `ErrorMessage`.</span><span class="sxs-lookup"><span data-stu-id="72167-252">Since the `UnitPrice` is required for this page when adding a new record, add a RequiredFieldValidator to the `UnitPrice` `InsertItemTemplate`, setting its `ControlToValidate`, `Text`, and `ErrorMessage` properties appropriately.</span></span> <span data-ttu-id="72167-253">Na koniec Dodaj również CompareValidator do `InsertItemTemplate` `UnitPrice`, konfigurując `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`i `ValueToCompare` właściwości, podobnie jak w przypadku `UnitPrice`CompareValidator w `EditItemTemplate`GridView.</span><span class="sxs-lookup"><span data-stu-id="72167-253">Finally, add a CompareValidator to the `UnitPrice` `InsertItemTemplate` as well, configuring its `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`, and `ValueToCompare` properties just like we did with the `UnitPrice`'s CompareValidator in the GridView's `EditItemTemplate`.</span></span>

<span data-ttu-id="72167-254">Po dodaniu tych kontrolek weryfikacyjnych nowy produkt nie może zostać dodany do systemu, jeśli jego nazwa nie została podana lub jego cena jest liczbą ujemną lub niesformatowaną.</span><span class="sxs-lookup"><span data-stu-id="72167-254">After adding these validation controls, a new product cannot be added to the system if its name is not supplied or if its price is a negative number or illegally formatted.</span></span>

<span data-ttu-id="72167-255">[![logiki walidacji została dodana do interfejsu wstawiania w widoku DetailsView](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="72167-255">[![Validation Logic has been Added to the DetailsView's Inserting Interface](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span></span>

<span data-ttu-id="72167-256">**Ilustracja 12**. Logika walidacji została dodana do interfejsu wstawiania w widoku DetailsView ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="72167-256">**Figure 12**: Validation Logic has been Added to the DetailsView's Inserting Interface ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png))</span></span>

## <a name="step-6-partitioning-the-validation-controls-into-validation-groups"></a><span data-ttu-id="72167-257">Krok 6. partycjonowanie kontrolek weryfikacji do grup walidacji</span><span class="sxs-lookup"><span data-stu-id="72167-257">Step 6: Partitioning the Validation Controls Into Validation Groups</span></span>

<span data-ttu-id="72167-258">Nasza strona zawiera dwa logicznie różne zestawy kontrolek weryfikacji: te, które są zgodne z interfejsem edycyjnym GridView oraz te, które odpowiadają wstawianiu interfejsu w widoku DetailsView.</span><span class="sxs-lookup"><span data-stu-id="72167-258">Our page consists of two logically disparate sets of validation controls: those that correspond to the GridView's editing interface and those that correspond to the DetailsView's inserting interface.</span></span> <span data-ttu-id="72167-259">Domyślnie, gdy następuje ogłaszanie zwrotne *wszystkie* kontrolki walidacji na stronie są sprawdzane.</span><span class="sxs-lookup"><span data-stu-id="72167-259">By default, when a postback occurs *all* validation controls on the page are checked.</span></span> <span data-ttu-id="72167-260">Jednak podczas edytowania rekordu nie chcemy, aby kontrolki sprawdzania poprawności interfejsu w widoku DetailsView były weryfikowane.</span><span class="sxs-lookup"><span data-stu-id="72167-260">However, when editing a record we don't want the DetailsView's inserting interface's validation controls to validate.</span></span> <span data-ttu-id="72167-261">Na rysunku 13 przedstawiono bieżące dylematem, gdy użytkownik edytuje produkt przy użyciu idealnie dozwolonych wartości, a kliknięcie przycisku Aktualizuj powoduje błąd walidacji, ponieważ nazwy i wartości cen w interfejsie wstawiania są puste.</span><span class="sxs-lookup"><span data-stu-id="72167-261">Figure 13 illustrates our current dilemma when a user is editing a product with perfectly legal values, clicking Update causes a validation error because the name and price values in the inserting interface are blank.</span></span>

<span data-ttu-id="72167-262">[![zaktualizowanie produktu powoduje, że kontrolki walidacji interfejsu wstawiania są uruchamiane](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="72167-262">[![Updating a Product Causes the Inserting Interface's Validation Controls to Fire](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span></span>

<span data-ttu-id="72167-263">**Ilustracja 13**. Aktualizacja produktu powoduje, że kontrolki sprawdzania poprawności interfejsu wstawiania są uruchamiane ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="72167-263">**Figure 13**: Updating a Product Causes the Inserting Interface's Validation Controls to Fire ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png))</span></span>

<span data-ttu-id="72167-264">Kontrolki walidacji w ASP.NET 2,0 mogą być partycjonowane w grupach walidacji za pomocą ich właściwości `ValidationGroup`.</span><span class="sxs-lookup"><span data-stu-id="72167-264">The validation controls in ASP.NET 2.0 can be partitioned into validation groups through their `ValidationGroup` property.</span></span> <span data-ttu-id="72167-265">Aby skojarzyć zestaw kontrolek weryfikacji w grupie, po prostu ustaw ich Właściwość `ValidationGroup` na taką samą wartość.</span><span class="sxs-lookup"><span data-stu-id="72167-265">To associate a set of validation controls in a group, simply set their `ValidationGroup` property to the same value.</span></span> <span data-ttu-id="72167-266">W naszym samouczku Ustaw `ValidationGroup` właściwości kontrolek walidacji w używanie TemplateField GridView na `EditValidationControls` i `ValidationGroup` właściwości używanie TemplateField widoku DetailsView do `InsertValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="72167-266">For our tutorial, set the `ValidationGroup` properties of the validation controls in the GridView's TemplateFields to `EditValidationControls` and the `ValidationGroup` properties of the DetailsView's TemplateFields to `InsertValidationControls`.</span></span> <span data-ttu-id="72167-267">Te zmiany można wykonać bezpośrednio w znacznikach deklaratywnych lub za pośrednictwem okno Właściwości w przypadku korzystania z interfejsu szablonu edycji w projektancie.</span><span class="sxs-lookup"><span data-stu-id="72167-267">These changes can be done directly in the declarative markup or through the Properties window when using the Designer's edit template interface.</span></span>

<span data-ttu-id="72167-268">Oprócz kontrolek walidacji kontrolki powiązane z przyciskiem i przyciskiem w ASP.NET 2,0 zawierają również właściwość `ValidationGroup`.</span><span class="sxs-lookup"><span data-stu-id="72167-268">In addition to the validation controls, the Button and Button-related controls in ASP.NET 2.0 also include a `ValidationGroup` property.</span></span> <span data-ttu-id="72167-269">Walidacje grupy sprawdzania poprawności są sprawdzane pod kątem poprawności tylko wtedy, gdy proces ogłaszania zwrotnego jest wywoływany przez przycisk, który ma takie samo `ValidationGroup` ustawienie właściwości.</span><span class="sxs-lookup"><span data-stu-id="72167-269">A validation group's validators are checked for validity only when a postback is induced by a Button that has the same `ValidationGroup` property setting.</span></span> <span data-ttu-id="72167-270">Na przykład aby można było wyzwolić przycisk wstawiania w widoku DetailsView `InsertValidationControls` grupę sprawdzania poprawności, należy ustawić właściwość `ValidationGroup` CommandField na `InsertValidationControls` (zobacz rysunek 14).</span><span class="sxs-lookup"><span data-stu-id="72167-270">For example, in order for the DetailsView's Insert button to trigger the `InsertValidationControls` validation group we need to set the CommandField's `ValidationGroup` property to `InsertValidationControls` (see Figure 14).</span></span> <span data-ttu-id="72167-271">Ponadto ustaw właściwość CommandField's `ValidationGroup` widoku GridView na `EditValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="72167-271">Additionally, set the GridView's CommandField's `ValidationGroup` property to `EditValidationControls`.</span></span>

<span data-ttu-id="72167-272">[![ustawić właściwość CommandField's walidacji widoku DetailsView na InsertValidationControls](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="72167-272">[![Set the DetailsView's CommandField's ValidationGroup property to InsertValidationControls](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span></span>

<span data-ttu-id="72167-273">**Ilustracja 14**. Ustaw właściwość CommandField's `ValidationGroup` widoku DetailsView na `InsertValidationControls` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="72167-273">**Figure 14**: Set the DetailsView's CommandField's `ValidationGroup` property to `InsertValidationControls` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png))</span></span>

<span data-ttu-id="72167-274">Po wprowadzeniu tych zmian elementy używanie TemplateField i CommandFields widoku GridView powinny wyglądać podobnie do następujących:</span><span class="sxs-lookup"><span data-stu-id="72167-274">After these changes, the DetailsView and GridView's TemplateFields and CommandFields should look similar to the following:</span></span>

<span data-ttu-id="72167-275">Używanie TemplateField i CommandField w widoku DetailsView</span><span class="sxs-lookup"><span data-stu-id="72167-275">The DetailsView's TemplateFields and CommandField</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample4.aspx)]

<span data-ttu-id="72167-276">CommandField i używanie TemplateField GridView</span><span class="sxs-lookup"><span data-stu-id="72167-276">The GridView's CommandField and TemplateFields</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample5.aspx)]

<span data-ttu-id="72167-277">W tym momencie kontrolki walidacji specyficzne dla edycji są wyzwalane tylko wtedy, gdy kliknięto przycisk aktualizacji GridView, a kontrolki walidacji dotyczące wstawiania są wyzwalane tylko wtedy, gdy kliknięto przycisk wstawiania w widoku DetailsView, rozpuszczenie problemu wyróżnionego na rysunku 13.</span><span class="sxs-lookup"><span data-stu-id="72167-277">At this point the edit-specific validation controls fire only when the GridView's Update button is clicked and the insert-specific validation controls fire only when the DetailsView's Insert button is clicked, resolving the problem highlighted by Figure 13.</span></span> <span data-ttu-id="72167-278">Jednak w przypadku zmiany podsumowania walidacji formant nie jest już wyświetlany podczas wprowadzania nieprawidłowych danych.</span><span class="sxs-lookup"><span data-stu-id="72167-278">However, with this change our ValidationSummary control no longer displays when entering invalid data.</span></span> <span data-ttu-id="72167-279">Kontrolka podsumowania walidacji zawiera również właściwość `ValidationGroup` i zawiera tylko podsumowanie informacji o tych kontrolkach sprawdzania poprawności w swojej grupie walidacji.</span><span class="sxs-lookup"><span data-stu-id="72167-279">The ValidationSummary control also contains a `ValidationGroup` property and only shows summary information for those validation controls in its validation group.</span></span> <span data-ttu-id="72167-280">W związku z tym muszą mieć dwie kontrolki walidacji na tej stronie, jedną dla grupy walidacji `InsertValidationControls` i jeden dla `EditValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="72167-280">Therefore, we need to have two validation controls in this page, one for the `InsertValidationControls` validation group and one for `EditValidationControls`.</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample6.aspx)]

<span data-ttu-id="72167-281">Dzięki temu samouczek został ukończony!</span><span class="sxs-lookup"><span data-stu-id="72167-281">With this addition our tutorial is complete!</span></span>

## <a name="summary"></a><span data-ttu-id="72167-282">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="72167-282">Summary</span></span>

<span data-ttu-id="72167-283">Chociaż BoundFields może zapewnić interfejs wstawiania i edytowania, interfejs nie jest dostosowywany.</span><span class="sxs-lookup"><span data-stu-id="72167-283">While BoundFields can provide both an inserting and editing interface, the interface is not customizable.</span></span> <span data-ttu-id="72167-284">Często chcemy dodać kontrolki weryfikacji do interfejsu edycji i wstawiania, aby upewnić się, że użytkownik wprowadzi wymagane dane wejściowe w dozwolonym formacie.</span><span class="sxs-lookup"><span data-stu-id="72167-284">Commonly, we want to add validation controls to the editing and inserting interface to ensure that the user enters required inputs in a legal format.</span></span> <span data-ttu-id="72167-285">Aby to osiągnąć, należy przekonwertować BoundFields na używanie TemplateField i dodać kontrolki weryfikacji do odpowiednich szablonów.</span><span class="sxs-lookup"><span data-stu-id="72167-285">To accomplish this we must convert the BoundFields into TemplateFields and add the validation controls to the appropriate template(s).</span></span> <span data-ttu-id="72167-286">W tym samouczku przedłużono przykład z *badania zdarzeń skojarzonych z wstawianiem, aktualizowaniem i usuwaniem* samouczka, Dodawanie kontrolek weryfikacji do interfejsu wstawiania w widoku DetailsView oraz do interfejsu edycji GridView.</span><span class="sxs-lookup"><span data-stu-id="72167-286">In this tutorial we extended the example from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial, adding validation controls to both the DetailsView's inserting interface and the GridView's editing interface.</span></span> <span data-ttu-id="72167-287">Ponadto pokazano, jak wyświetlać podsumowanie informacji o walidacji za pomocą kontrolki podsumowania walidacji oraz jak podzielić kontrolki walidacji na stronie na różne grupy sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="72167-287">Moreover, we saw how to display summary validation information using the ValidationSummary control and how to partition the validation controls on the page into distinct validation groups.</span></span>

<span data-ttu-id="72167-288">Jak zostało to opisane w tym samouczku, używanie TemplateField zezwolić na rozszerzanie interfejsów edycji i wstawiania, aby obejmowały kontrolki walidacji.</span><span class="sxs-lookup"><span data-stu-id="72167-288">As we saw in this tutorial, TemplateFields allow the editing and inserting interfaces to be augmented to include validation controls.</span></span> <span data-ttu-id="72167-289">Używanie TemplateField można także rozszerzyć w celu uwzględnienia dodatkowych kontrolek sieci Web, co umożliwia zamienienie pola tekstowego przez bardziej odpowiedni formant sieci Web.</span><span class="sxs-lookup"><span data-stu-id="72167-289">TemplateFields can also be extended to include additional input Web controls, enabling the TextBox to be replaced by a more suitable Web control.</span></span> <span data-ttu-id="72167-290">W naszym następnym samouczku zobaczymy, jak zastąpić formant TextBox za pomocą kontrolki DropDownList powiązanej z danymi, która jest idealnym rozwiązaniem podczas edytowania klucza obcego (takiego jak `CategoryID` lub `SupplierID` w tabeli `Products`).</span><span class="sxs-lookup"><span data-stu-id="72167-290">In our next tutorial we'll see how to replace the TextBox control with a data-bound DropDownList control, which is ideal when editing a foreign key (such as `CategoryID` or `SupplierID` in the `Products` table).</span></span>

<span data-ttu-id="72167-291">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="72167-291">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="72167-292">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="72167-292">About the Author</span></span>

<span data-ttu-id="72167-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor siedmiu grup ASP/ASP. NET Books i założyciel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="72167-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="72167-294">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="72167-294">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="72167-295">Jego Najnowsza książka to [*Sams ASP.NET 2,0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="72167-295">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="72167-296">Można go osiągnąć w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="72167-296">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="72167-297">lub za pośrednictwem swojego blogu, który można znaleźć w [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="72167-297">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="72167-298">Specjalne podziękowania</span><span class="sxs-lookup"><span data-stu-id="72167-298">Special Thanks To</span></span>

<span data-ttu-id="72167-299">Ta seria samouczków została sprawdzona przez wielu przydatnych recenzentów.</span><span class="sxs-lookup"><span data-stu-id="72167-299">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="72167-300">Recenzenci liderzy dla tego samouczka to Liz Shulok i Zack Kowalski.</span><span class="sxs-lookup"><span data-stu-id="72167-300">Lead reviewers for this tutorial were Liz Shulok and Zack Jones.</span></span> <span data-ttu-id="72167-301">Chcesz przeglądać moje nadchodzące artykuły MSDN?</span><span class="sxs-lookup"><span data-stu-id="72167-301">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="72167-302">Jeśli tak, upuść mi linię w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="72167-302">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="72167-303">[Poprzednie](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
> [dalej](customizing-the-data-modification-interface-cs.md)</span><span class="sxs-lookup"><span data-stu-id="72167-303">[Previous](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
[Next](customizing-the-data-modification-interface-cs.md)</span></span>

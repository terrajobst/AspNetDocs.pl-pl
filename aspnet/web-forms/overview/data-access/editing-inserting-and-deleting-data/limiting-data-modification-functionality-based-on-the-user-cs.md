---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/limiting-data-modification-functionality-based-on-the-user-cs
title: Ograniczanie funkcji modyfikacji danych na podstawie użytkownika (C#) | Microsoft Docs
author: rick-anderson
description: W aplikacji sieci Web, która umożliwia użytkownikom edytowanie danych, różne konta użytkowników mogą mieć różne uprawnienia do edycji danych. W tym samouczku sprawdzimy, jak t...
ms.author: riande
ms.date: 07/17/2006
ms.assetid: 2b251c82-77cf-4e36-baa9-b648eddaa394
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/limiting-data-modification-functionality-based-on-the-user-cs
msc.type: authoredcontent
ms.openlocfilehash: c3cacaddb7e9b493ba39718f41dcaab360d36fd9
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/28/2019
ms.locfileid: "74580704"
---
# <a name="limiting-data-modification-functionality-based-on-the-user-c"></a><span data-ttu-id="f41d5-104">Ograniczanie funkcji modyfikacji danych na podstawie użytkownika (C#)</span><span class="sxs-lookup"><span data-stu-id="f41d5-104">Limiting Data Modification Functionality Based on the User (C#)</span></span>

<span data-ttu-id="f41d5-105">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f41d5-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f41d5-106">[Pobierz przykładową aplikację](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_23_CS.exe) lub [Pobierz plik PDF](limiting-data-modification-functionality-based-on-the-user-cs/_static/datatutorial23cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="f41d5-106">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_23_CS.exe) or [Download PDF](limiting-data-modification-functionality-based-on-the-user-cs/_static/datatutorial23cs1.pdf)</span></span>

> <span data-ttu-id="f41d5-107">W aplikacji sieci Web, która umożliwia użytkownikom edytowanie danych, różne konta użytkowników mogą mieć różne uprawnienia do edycji danych.</span><span class="sxs-lookup"><span data-stu-id="f41d5-107">In a web application that allows users to edit data, different user accounts may have different data-editing privileges.</span></span> <span data-ttu-id="f41d5-108">W tym samouczku sprawdzimy, jak dynamicznie dostosować możliwości modyfikacji danych na podstawie odwiedzanego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f41d5-108">In this tutorial we'll examine how to dynamically adjust the data modification capabilities based on the visiting user.</span></span>

## <a name="introduction"></a><span data-ttu-id="f41d5-109">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="f41d5-109">Introduction</span></span>

<span data-ttu-id="f41d5-110">Wiele aplikacji sieci Web obsługuje konta użytkowników i udostępnia różne opcje, raporty i funkcje w oparciu o zalogowanego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f41d5-110">A number of web applications support user accounts and provide different options, reports, and functionality based on the logged in user.</span></span> <span data-ttu-id="f41d5-111">Na przykład dzięki naszym samouczkom firma Microsoft może chcieć zezwolić użytkownikom z firm dostawców na logowanie do witryny i aktualizowanie ogólnych informacji o ich produktach — ich nazwy i ilości na jednostkę, prawdopodobnie wraz z informacjami o dostawcach, takimi jak nazwa firmy, adres, informacje o osobach kontaktowych i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="f41d5-111">For example, with our tutorials we might want to allow users from the supplier companies to log on to the site and update general information about their products - their name and quantity per unit, perhaps - along with supplier information, such as their company name, address, the contact person s information, and so on.</span></span> <span data-ttu-id="f41d5-112">Ponadto firma Microsoft może chcieć uwzględnić niektóre konta użytkowników dla osób z naszej firmy, aby mogli logować się i aktualizować informacje o produkcie, takie jak jednostki na giełdie, poziom zmiany kolejności itd.</span><span class="sxs-lookup"><span data-stu-id="f41d5-112">Furthermore, we might want to include some user accounts for people from our company so that they can log on and update product information like units on stock, reorder level, and so forth.</span></span> <span data-ttu-id="f41d5-113">Nasza aplikacja sieci Web może również zezwalać anonimowym użytkownikom na odwiedzenie (osoby, które nie zalogował się), ale ograniczą je do wyświetlania tylko danych.</span><span class="sxs-lookup"><span data-stu-id="f41d5-113">Our web application might also allow anonymous users to visit (people who have not logged on), but would limit them to just viewing data.</span></span> <span data-ttu-id="f41d5-114">Dzięki takiemu systemowi kont użytkowników będziemy chcieć, aby formanty sieci Web na naszych stronach ASP.NET oferowały funkcje wstawiania, edytowania i usuwania odpowiednie dla aktualnie zalogowanego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f41d5-114">With such a user account system in place, we would want the data Web controls in our ASP.NET pages to offer the inserting, editing, and deleting capabilities appropriate for the currently logged on user.</span></span>

<span data-ttu-id="f41d5-115">W tym samouczku sprawdzimy, jak dynamicznie dostosować możliwości modyfikacji danych na podstawie odwiedzanego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f41d5-115">In this tutorial we'll examine how to dynamically adjust the data modification capabilities based on the visiting user.</span></span> <span data-ttu-id="f41d5-116">W szczególności utworzymy stronę wyświetlającą informacje o dostawcach w edytowalnej widoku DetailsView wraz z elementem GridView zawierającym listę produktów dostarczonych przez dostawcę.</span><span class="sxs-lookup"><span data-stu-id="f41d5-116">In particular, we'll create a page that displays the suppliers information in an editable DetailsView along with a GridView that lists the products provided by the supplier.</span></span> <span data-ttu-id="f41d5-117">Jeśli użytkownik odwiedze stronę od firmy, może: wyświetlić informacje o dostawcy s; Edytuj swój adres; i Edytuj informacje dla każdego produktu dostarczonego przez dostawcę.</span><span class="sxs-lookup"><span data-stu-id="f41d5-117">If the user visiting the page is from our company, they can: view any supplier s information; edit their address; and edit the information for any product provided by the supplier.</span></span> <span data-ttu-id="f41d5-118">Jeśli jednak użytkownik należy do konkretnej firmy, może wyświetlać i edytować własne informacje o adresie, a także edytować swoje produkty, które nie zostały oznaczone jako nieobsługiwane.</span><span class="sxs-lookup"><span data-stu-id="f41d5-118">If, however, the user is from a particular company, they can only view and edit their own address information and can only edit their products that have not been marked as discontinued.</span></span>

<span data-ttu-id="f41d5-119">[![użytkownik z naszej firmy może edytować wszystkie informacje o dostawcy](limiting-data-modification-functionality-based-on-the-user-cs/_static/image2.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f41d5-119">[![A User from Our Company Can Edit Any Supplier s Information](limiting-data-modification-functionality-based-on-the-user-cs/_static/image2.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image1.png)</span></span>

<span data-ttu-id="f41d5-120">**Rysunek 1**: użytkownik z naszej firmy może edytować wszystkie informacje o dostawcy ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](limiting-data-modification-functionality-based-on-the-user-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="f41d5-120">**Figure 1**: A User from Our Company Can Edit Any Supplier s Information ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image3.png))</span></span>

<span data-ttu-id="f41d5-121">[![użytkownika z określonego dostawcy mogą tylko wyświetlać i edytować swoje informacje](limiting-data-modification-functionality-based-on-the-user-cs/_static/image5.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="f41d5-121">[![A User from a Particular Supplier Can Only View and Edit their Information](limiting-data-modification-functionality-based-on-the-user-cs/_static/image5.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image4.png)</span></span>

<span data-ttu-id="f41d5-122">**Rysunek 2**. użytkownik od określonego dostawcy może tylko wyświetlać i edytować swoje informacje ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](limiting-data-modification-functionality-based-on-the-user-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="f41d5-122">**Figure 2**: A User from a Particular Supplier Can Only View and Edit their Information ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image6.png))</span></span>

<span data-ttu-id="f41d5-123">Zacznij korzystać z aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f41d5-123">Let s get started!</span></span>

> [!NOTE]
> <span data-ttu-id="f41d5-124">System członkostwa w systemie ASP.NET 2,0 s oferuje ustandaryzowaną, rozszerzalną platformę do tworzenia i weryfikowania kont użytkowników oraz zarządzania nimi.</span><span class="sxs-lookup"><span data-stu-id="f41d5-124">ASP.NET 2.0 s membership system provides a standardized, extensible platform for creating, managing, and validating user accounts.</span></span> <span data-ttu-id="f41d5-125">Ze względu na to, że badanie systemu członkostwa wykracza poza zakres tych samouczków, ten samouczek zamiast tego ma członkostwo "sztuczne", dzięki czemu anonimowi użytkownicy mogą zdecydować, czy pochodzą od określonego dostawcy, czy z naszej firmy.</span><span class="sxs-lookup"><span data-stu-id="f41d5-125">Since an examination of the membership system is beyond the scope of these tutorials, this tutorial instead "fakes" membership by allowing anonymous visitors to choose whether they are from a particular supplier or from our company.</span></span> <span data-ttu-id="f41d5-126">Aby uzyskać więcej informacji na temat członkostwa, zapoznaj się z artykułem moje [ASP.NET 2,0 s członkostwo, role i profile](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx) seria artykułów.</span><span class="sxs-lookup"><span data-stu-id="f41d5-126">For more on membership, refer to my [Examining ASP.NET 2.0 s Membership, Roles, and Profile](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx) article series.</span></span>

## <a name="step-1-allowing-the-user-to-specify-their-access-rights"></a><span data-ttu-id="f41d5-127">Krok 1. umożliwienie użytkownikowi określenia praw dostępu</span><span class="sxs-lookup"><span data-stu-id="f41d5-127">Step 1: Allowing the User to Specify their Access Rights</span></span>

<span data-ttu-id="f41d5-128">W rzeczywistej aplikacji sieci Web informacje o koncie użytkownika są uwzględniane przez firmę Microsoft lub dla określonego dostawcy, a informacje te byłyby programistycznie dostępne z naszych stron ASP.NET po zalogowaniu się użytkownika do witryny.</span><span class="sxs-lookup"><span data-stu-id="f41d5-128">In a real-world web application, a user s account information would include whether they worked for our company or for a particular supplier, and this information would be programmatically accessible from our ASP.NET pages once the user has logged on to the site.</span></span> <span data-ttu-id="f41d5-129">Te informacje mogą być przechwytywane za pośrednictwem systemu ról ASP.NET 2,0 s, jako informacje o koncie użytkownika za pośrednictwem systemu profilu lub przez niektóre niestandardowe środki.</span><span class="sxs-lookup"><span data-stu-id="f41d5-129">This information could be captured through ASP.NET 2.0 s roles system, as user-level account information through the profile system, or through some custom means.</span></span>

<span data-ttu-id="f41d5-130">Ponieważ celem tego samouczka jest przedstawienie sposobu dostosowywania możliwości modyfikacji danych na podstawie zalogowanego użytkownika i nie ma potrzeby zaprezentowania ASP.NET 2,0 s członkostwa, ról i systemów profilów, użyjemy bardzo prostego mechanizmu, aby określić możliwości użytkownika odwiedzają stronę — DropDownList, z której użytkownik może wskazać, czy powinien być w stanie wyświetlać i edytować informacje o dostawcach, czy też informacje o określonych dostawcach, które mogą być wyświetlane i edytowane.</span><span class="sxs-lookup"><span data-stu-id="f41d5-130">Since the aim of this tutorial is to demonstrate adjusting the data modification capabilities based on the logged on user, and is not meant to showcase ASP.NET 2.0 s membership, roles, and profile systems, we'll use a very simply mechanism to determine the capabilities for the user visiting the page - a DropDownList from which the user can indicate if they should be able to view and edit any of the suppliers information or, alternatively, what particular supplier s information they can view and edit.</span></span> <span data-ttu-id="f41d5-131">Jeśli użytkownik wskaże, że może wyświetlać i edytować wszystkie informacje o dostawcach (domyślnie), może uzyskać dostęp do wszystkich dostawców, edytować wszystkie informacje o adresie dostawcy i zmienić nazwę i ilość na jednostkę dla każdego produktu dostarczonego przez wybranego dostawcę.</span><span class="sxs-lookup"><span data-stu-id="f41d5-131">If the user indicates that she can view and edit all supplier information (the default), she can page through all suppliers, edit any supplier s address information, and edit the name and quantity per unit for any product provided by the selected supplier.</span></span> <span data-ttu-id="f41d5-132">Jeśli użytkownik wskaże, że może tylko wyświetlać i edytować określonego dostawcę, może jedynie wyświetlić szczegóły i produkty dla tego samego dostawcy i zaktualizować tylko nazwę i ilość na informacje o jednostce dla tych produktów, które *nie* zostały wycofane.</span><span class="sxs-lookup"><span data-stu-id="f41d5-132">If the user indicates that she can only view and edit a particular supplier, however, then she can only view the details and products for that one supplier and can only update the name and quantity per unit information for those products that are *not* discontinued.</span></span>

<span data-ttu-id="f41d5-133">Pierwszym krokiem w tym samouczku jest utworzenie tej DropDownList i wypełnienie jej dostawcami w systemie.</span><span class="sxs-lookup"><span data-stu-id="f41d5-133">Our first step in this tutorial, then, is to create this DropDownList and populate it with the suppliers in the system.</span></span> <span data-ttu-id="f41d5-134">Otwórz stronę `UserLevelAccess.aspx` w folderze `EditInsertDelete`, Dodaj element DropDownList, którego właściwość `ID` jest ustawiona na wartość `Suppliers`i Powiąż ten DropDownList z nowym elementem ObjectDataSource o nazwie `AllSuppliersDataSource`.</span><span class="sxs-lookup"><span data-stu-id="f41d5-134">Open the `UserLevelAccess.aspx` page in the `EditInsertDelete` folder, add a DropDownList whose `ID` property is set to `Suppliers`, and bind this DropDownList to a new ObjectDataSource named `AllSuppliersDataSource`.</span></span>

<span data-ttu-id="f41d5-135">[![utworzyć nowego elementu ObjectDataSource o nazwie AllSuppliersDataSource](limiting-data-modification-functionality-based-on-the-user-cs/_static/image8.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f41d5-135">[![Create a New ObjectDataSource Named AllSuppliersDataSource](limiting-data-modification-functionality-based-on-the-user-cs/_static/image8.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image7.png)</span></span>

<span data-ttu-id="f41d5-136">**Rysunek 3**. Tworzenie nowego elementu ObjectDataSource o nazwie `AllSuppliersDataSource` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](limiting-data-modification-functionality-based-on-the-user-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="f41d5-136">**Figure 3**: Create a New ObjectDataSource Named `AllSuppliersDataSource` ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image9.png))</span></span>

<span data-ttu-id="f41d5-137">Ponieważ chcemy, aby ta DropDownList obejmowała wszystkich dostawców, skonfiguruj element ObjectDataSource, aby wywoływał metodę `GetSuppliers()` klasy `SuppliersBLL`.</span><span class="sxs-lookup"><span data-stu-id="f41d5-137">Since we want this DropDownList to include all suppliers, configure the ObjectDataSource to invoke the `SuppliersBLL` class s `GetSuppliers()` method.</span></span> <span data-ttu-id="f41d5-138">Upewnij się również, że metoda `Update()` ObjectDataSource s jest zamapowana na metodę `UpdateSupplierAddress` klasy `SuppliersBLL`, ponieważ ten element ObjectDataSource będzie również używany przez element DetailsView, który zostanie dodany w kroku 2.</span><span class="sxs-lookup"><span data-stu-id="f41d5-138">Also ensure that the ObjectDataSource s `Update()` method is mapped to the `SuppliersBLL` class s `UpdateSupplierAddress` method, as this ObjectDataSource will also be used by the DetailsView we'll be adding in Step 2.</span></span>

<span data-ttu-id="f41d5-139">Po zakończeniu pracy z kreatorem elementu ObjectDataSource wykonaj kroki, konfigurując `Suppliers` DropDownList w taki sposób, aby pokazywały pole danych `CompanyName` i używało pola dane `SupplierID` jako wartości dla każdego `ListItem`u.</span><span class="sxs-lookup"><span data-stu-id="f41d5-139">After completing the ObjectDataSource wizard, complete the steps by configuring the `Suppliers` DropDownList such that it shows the `CompanyName` data field and uses the `SupplierID` data field as the value for each `ListItem`.</span></span>

<span data-ttu-id="f41d5-140">[![skonfigurować dostawców DropDownList do używania pól danych NazwaFirmy i IDDostawcy](limiting-data-modification-functionality-based-on-the-user-cs/_static/image11.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="f41d5-140">[![Configure the Suppliers DropDownList to Use the CompanyName and SupplierID Data Fields](limiting-data-modification-functionality-based-on-the-user-cs/_static/image11.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image10.png)</span></span>

<span data-ttu-id="f41d5-141">**Rysunek 4**. Konfigurowanie `Suppliers` DropDownList do używania pól danych `CompanyName` i `SupplierID` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](limiting-data-modification-functionality-based-on-the-user-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="f41d5-141">**Figure 4**: Configure the `Suppliers` DropDownList to Use the `CompanyName` and `SupplierID` Data Fields ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image12.png))</span></span>

<span data-ttu-id="f41d5-142">W tym momencie DropDownList wyświetla nazwy firm dostawców w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="f41d5-142">At this point, the DropDownList lists the company names of the suppliers in the database.</span></span> <span data-ttu-id="f41d5-143">Należy jednak również uwzględnić opcję "Pokaż/Edytuj wszystkie dostawcy" w DropDownList.</span><span class="sxs-lookup"><span data-stu-id="f41d5-143">However, we also need to include a "Show/Edit ALL Suppliers" option to the DropDownList.</span></span> <span data-ttu-id="f41d5-144">Aby to osiągnąć, należy ustawić właściwość `Suppliers` DropDownList s `AppendDataBoundItems` na `true`, a następnie dodać `ListItem`, której Właściwość `Text` to "Pokaż/Edytuj wszystkich dostawców" i której wartość jest `-1`.</span><span class="sxs-lookup"><span data-stu-id="f41d5-144">To accomplish this, set the `Suppliers` DropDownList s `AppendDataBoundItems` property to `true` and then add a `ListItem` whose `Text` property is "Show/Edit ALL Suppliers" and whose value is `-1`.</span></span> <span data-ttu-id="f41d5-145">Można to dodać bezpośrednio za pośrednictwem znaczników deklaratywnych lub przez projektanta, przechodząc do okno Właściwości i klikając wielokropek we właściwości `Items` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="f41d5-145">This can be added directly through the declarative markup or through the Designer by going to the Properties window and clicking on the ellipses in the DropDownList s `Items` property.</span></span>

> [!NOTE]
> <span data-ttu-id="f41d5-146">Zapoznaj się z powrotem do [*filtrowania wzorzec/szczegóły za pomocą*](../masterdetail/master-detail-filtering-with-a-dropdownlist-cs.md) samouczka DropDownList, aby uzyskać bardziej szczegółową dyskusję na temat dodawania elementu Select All do DataBound DropDownList.</span><span class="sxs-lookup"><span data-stu-id="f41d5-146">Refer back to the [*Master/Detail Filtering With a DropDownList*](../masterdetail/master-detail-filtering-with-a-dropdownlist-cs.md) tutorial for a more detailed discussion on adding a Select All item to a databound DropDownList.</span></span>

<span data-ttu-id="f41d5-147">Po ustawieniu właściwości `AppendDataBoundItems` i dodaniu `ListItem`, znaczniki deklaratywne DropDownList s powinny wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="f41d5-147">After the `AppendDataBoundItems` property has been set and the `ListItem` added, the DropDownList s declarative markup should look like:</span></span>

[!code-aspx[Main](limiting-data-modification-functionality-based-on-the-user-cs/samples/sample1.aspx)]

<span data-ttu-id="f41d5-148">Rysunek 5 przedstawia zrzut ekranu bieżącego postępu, który jest wyświetlany za pomocą przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="f41d5-148">Figure 5 shows a screen shot of our current progress, when viewed through a browser.</span></span>

<span data-ttu-id="f41d5-149">[![dostawcy DropDownList zawiera wszystkie listy, a także jeden dla każdego dostawcy](limiting-data-modification-functionality-based-on-the-user-cs/_static/image14.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="f41d5-149">[![The Suppliers DropDownList Contains a Show ALL ListItem, Plus One for Each Supplier](limiting-data-modification-functionality-based-on-the-user-cs/_static/image14.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image13.png)</span></span>

<span data-ttu-id="f41d5-150">**Rysunek 5**: DropDownList `Suppliers` zawiera wszystkie `ListItem`i jeden dla każdego dostawcy ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](limiting-data-modification-functionality-based-on-the-user-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="f41d5-150">**Figure 5**: The `Suppliers` DropDownList Contains a Show ALL `ListItem`, Plus One for Each Supplier ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image15.png))</span></span>

<span data-ttu-id="f41d5-151">Ponieważ chcemy zaktualizować interfejs użytkownika natychmiast po zmianie zaznaczenia przez użytkownika, ustaw właściwość `Suppliers` DropDownList s `AutoPostBack` na `true`.</span><span class="sxs-lookup"><span data-stu-id="f41d5-151">Since we want to update the user interface immediately after the user has changed their selection, set the `Suppliers` DropDownList s `AutoPostBack` property to `true`.</span></span> <span data-ttu-id="f41d5-152">W kroku 2 utworzysz formant DetailsView, który będzie przedstawiał informacje dla dostawców w oparciu o wybór DropDownList.</span><span class="sxs-lookup"><span data-stu-id="f41d5-152">In Step 2 we'll create a DetailsView control that will show the information for the supplier(s) based on the DropDownList selection.</span></span> <span data-ttu-id="f41d5-153">Następnie w kroku 3 utworzymy procedurę obsługi zdarzeń dla tego zdarzenia DropDownList `SelectedIndexChanged`, w którym dodamy kod, który wiąże odpowiednie informacje o dostawcach w widoku DetailsView na podstawie wybranego dostawcy.</span><span class="sxs-lookup"><span data-stu-id="f41d5-153">Then, in Step 3, we'll create an event handler for this DropDownList s `SelectedIndexChanged` event, in which we'll add code that binds the appropriate supplier information to the DetailsView based upon the selected supplier.</span></span>

## <a name="step-2-adding-a-detailsview-control"></a><span data-ttu-id="f41d5-154">Krok 2. Dodawanie kontrolki DetailsView</span><span class="sxs-lookup"><span data-stu-id="f41d5-154">Step 2: Adding a DetailsView Control</span></span>

<span data-ttu-id="f41d5-155">Zezwól usłudze s na wyświetlanie informacji o dostawcach.</span><span class="sxs-lookup"><span data-stu-id="f41d5-155">Let s use a DetailsView to show supplier information.</span></span> <span data-ttu-id="f41d5-156">W przypadku użytkownika, który może wyświetlać i edytować wszystkich dostawców, widok DetailsView będzie obsługiwał stronicowanie, co umożliwia użytkownikowi przechodzenie przez jeden rekord informacji o dostawcach w danym momencie.</span><span class="sxs-lookup"><span data-stu-id="f41d5-156">For the user who can view and edit all suppliers, the DetailsView will support paging, allowing the user to step through the supplier information one record at a time.</span></span> <span data-ttu-id="f41d5-157">Jeśli użytkownik pracuje z konkretnym dostawcą, w widoku DetailsView będą wyświetlane tylko informacje o określonych dostawcach i nie będzie on zawierał interfejsu stronicowania.</span><span class="sxs-lookup"><span data-stu-id="f41d5-157">If the user works for a particular supplier, however, the DetailsView will show only that particular supplier s information and will not include a paging interface.</span></span> <span data-ttu-id="f41d5-158">W obu przypadkach DetailsView musi zezwolić użytkownikowi na edytowanie pól adres dostawcy, miasto i kraj.</span><span class="sxs-lookup"><span data-stu-id="f41d5-158">In either case, the DetailsView needs to allow the user to edit the supplier s address, city, and country fields.</span></span>

<span data-ttu-id="f41d5-159">Dodaj element DetailsView do strony pod `Suppliers` DropDownList, ustaw jej Właściwość `ID` na `SupplierDetails`i powiąż ją z `AllSuppliersDataSource`m elementem ObjectDataSource utworzonym w poprzednim kroku.</span><span class="sxs-lookup"><span data-stu-id="f41d5-159">Add a DetailsView to the page beneath the `Suppliers` DropDownList, set its `ID` property to `SupplierDetails`, and bind it to the `AllSuppliersDataSource` ObjectDataSource created in the previous step.</span></span> <span data-ttu-id="f41d5-160">Następnie zaznacz pola wyboru Włącz stronicowanie i Włącz edycję ze znacznika inteligentnego DetailsView s.</span><span class="sxs-lookup"><span data-stu-id="f41d5-160">Next, check the Enable Paging and Enable Editing checkboxes from the DetailsView s smart tag.</span></span>

> [!NOTE]
> <span data-ttu-id="f41d5-161">Jeśli nie widzisz opcji Włącz edytowanie w tagu inteligentnym mapy inteligentnej, ponieważ metoda `Update()` ObjectDataSource s nie została zamapowana na metodę `SuppliersBLL` klasy s `UpdateSupplierAddress`.</span><span class="sxs-lookup"><span data-stu-id="f41d5-161">If you don t see an Enable Editing option in the DetailsView s smart tag it s because you did not map the ObjectDataSource s `Update()` method to the `SuppliersBLL` class s `UpdateSupplierAddress` method.</span></span> <span data-ttu-id="f41d5-162">Poczekaj chwilę na odwrócić i wprowadź tę zmianę konfiguracji, po której opcja Włącz edycję powinna pojawić się w tagu inteligentnym DetailsView s.</span><span class="sxs-lookup"><span data-stu-id="f41d5-162">Take a moment to go back and make this configuration change, after which the Enable Editing option should appear in the DetailsView s smart tag.</span></span>

<span data-ttu-id="f41d5-163">Ponieważ metoda `UpdateSupplierAddress` `SuppliersBLL` Class akceptuje tylko cztery parametry-`supplierID`, `address`, `city`i `country` — zmodyfikuj s BoundFields, tak aby `CompanyName` i `Phone` BoundFields są tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="f41d5-163">Since the `SuppliersBLL` class s `UpdateSupplierAddress` method only accepts four parameters - `supplierID`, `address`, `city`, and `country` - modify the DetailsView s BoundFields so that the `CompanyName` and `Phone` BoundFields are read-only.</span></span> <span data-ttu-id="f41d5-164">Dodatkowo Usuń `SupplierID` BoundField.</span><span class="sxs-lookup"><span data-stu-id="f41d5-164">Additionally, remove the `SupplierID` BoundField altogether.</span></span> <span data-ttu-id="f41d5-165">Na koniec `AllSuppliersDataSource` element ObjectDataSource ma obecnie Właściwość `OldValuesParameterFormatString` ustawioną na `original_{0}`.</span><span class="sxs-lookup"><span data-stu-id="f41d5-165">Finally, the `AllSuppliersDataSource` ObjectDataSource currently has its `OldValuesParameterFormatString` property set to `original_{0}`.</span></span> <span data-ttu-id="f41d5-166">Poświęć chwilę na całkowite usunięcie tego ustawienia właściwości z składni deklaratywnej lub ustaw ją na wartość domyślną, `{0}`.</span><span class="sxs-lookup"><span data-stu-id="f41d5-166">Take a moment to remove this property setting from the declarative syntax altogether, or set it to the default value, `{0}`.</span></span>

<span data-ttu-id="f41d5-167">Po skonfigurowaniu `SupplierDetails` DetailsView i `AllSuppliersDataSource` elementu ObjectDataSource będziemy mieć następujące deklaratywne znaczniki:</span><span class="sxs-lookup"><span data-stu-id="f41d5-167">After configuring the `SupplierDetails` DetailsView and `AllSuppliersDataSource` ObjectDataSource, we will have the following declarative markup:</span></span>

[!code-aspx[Main](limiting-data-modification-functionality-based-on-the-user-cs/samples/sample2.aspx)]

<span data-ttu-id="f41d5-168">W tym momencie można stronicować dane w widoku DetailsView oraz zaktualizować wybrane informacje o adresie dostawcy, niezależnie od wyboru dokonanego w `Suppliers` DropDownList (zobacz rysunek 6).</span><span class="sxs-lookup"><span data-stu-id="f41d5-168">At this point the DetailsView can be paged through and the selected supplier s address information can be updated, regardless of the selection made in the `Suppliers` DropDownList (see Figure 6).</span></span>

<span data-ttu-id="f41d5-169">[![można przeglądać informacji o dostawcach i zaktualizować ich adresy](limiting-data-modification-functionality-based-on-the-user-cs/_static/image17.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="f41d5-169">[![Any Suppliers Information Can Be Viewed, and Its Address Updated](limiting-data-modification-functionality-based-on-the-user-cs/_static/image17.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image16.png)</span></span>

<span data-ttu-id="f41d5-170">**Ilustracja 6**. wszystkie informacje o dostawcach mogą być wyświetlane, a jego adres został zaktualizowany ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](limiting-data-modification-functionality-based-on-the-user-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="f41d5-170">**Figure 6**: Any Suppliers Information Can Be Viewed, and Its Address Updated ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image18.png))</span></span>

## <a name="step-3-displaying-only-the-selected-supplier-s-information"></a><span data-ttu-id="f41d5-171">Krok 3. Wyświetlanie tylko wybranych informacji o dostawcy</span><span class="sxs-lookup"><span data-stu-id="f41d5-171">Step 3: Displaying Only the Selected Supplier s Information</span></span>

<span data-ttu-id="f41d5-172">Na naszej stronie są obecnie wyświetlane informacje dla wszystkich dostawców, niezależnie od tego, czy dany dostawca został wybrany z `Suppliers` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="f41d5-172">Our page currently displays the information for all suppliers regardless of whether a particular supplier has been selected from the `Suppliers` DropDownList.</span></span> <span data-ttu-id="f41d5-173">Aby wyświetlić tylko informacje o dostawcy dla wybranego dostawcy, należy dodać kolejny element ObjectDataSource do naszej strony, który pobiera informacje o konkretnym dostawcy.</span><span class="sxs-lookup"><span data-stu-id="f41d5-173">In order to display just the supplier information for the selected supplier we need to add another ObjectDataSource to our page, one that retrieves information about a particular supplier.</span></span>

<span data-ttu-id="f41d5-174">Dodaj nowy element ObjectDataSource do strony, nadając mu nazwę `SingleSupplierDataSource`.</span><span class="sxs-lookup"><span data-stu-id="f41d5-174">Add a new ObjectDataSource to the page, naming it `SingleSupplierDataSource`.</span></span> <span data-ttu-id="f41d5-175">W tagu inteligentnym kliknij link Konfiguruj źródło danych i użyj metody `GetSupplierBySupplierID(supplierID)` `SuppliersBLL` Class s.</span><span class="sxs-lookup"><span data-stu-id="f41d5-175">From its smart tag, click the Configure Data Source link and have it use the `SuppliersBLL` class s `GetSupplierBySupplierID(supplierID)` method.</span></span> <span data-ttu-id="f41d5-176">Podobnie jak w przypadku elementu `AllSuppliersDataSource` ObjectDataSource, należy mieć metodę `SingleSupplierDataSource` ObjectDataSource s `Update()` zamapowana do metody `SuppliersBLL` klasy s `UpdateSupplierAddress`.</span><span class="sxs-lookup"><span data-stu-id="f41d5-176">As with the `AllSuppliersDataSource` ObjectDataSource, have the `SingleSupplierDataSource` ObjectDataSource s `Update()` method mapped to the `SuppliersBLL` class s `UpdateSupplierAddress` method.</span></span>

<span data-ttu-id="f41d5-177">[![skonfigurować element ObjectDataSource SingleSupplierDataSource do używania metody GetSupplierBySupplierID (IDDostawcy)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image20.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="f41d5-177">[![Configure the SingleSupplierDataSource ObjectDataSource to Use the GetSupplierBySupplierID(supplierID) Method](limiting-data-modification-functionality-based-on-the-user-cs/_static/image20.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image19.png)</span></span>

<span data-ttu-id="f41d5-178">**Rysunek 7**. Konfigurowanie `SingleSupplierDataSource` elementu ObjectDataSource do używania metody `GetSupplierBySupplierID(supplierID)` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](limiting-data-modification-functionality-based-on-the-user-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="f41d5-178">**Figure 7**: Configure the `SingleSupplierDataSource` ObjectDataSource to Use the `GetSupplierBySupplierID(supplierID)` Method ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image21.png))</span></span>

<span data-ttu-id="f41d5-179">Następnie ponownie zostanie wyświetlony monit o określenie źródła parametrów dla `GetSupplierBySupplierID(supplierID)` Metoda s `supplierID` parametr wejściowy.</span><span class="sxs-lookup"><span data-stu-id="f41d5-179">Next, we re prompted to specify the parameter source for the `GetSupplierBySupplierID(supplierID)` method s `supplierID` input parameter.</span></span> <span data-ttu-id="f41d5-180">Ponieważ chcemy wyświetlić informacje dla dostawcy wybranego z DropDownList, użyj właściwości `Suppliers` DropDownList s `SelectedValue` jako źródła parametru.</span><span class="sxs-lookup"><span data-stu-id="f41d5-180">Since we want to show the information for the supplier selected from the DropDownList, use the `Suppliers` DropDownList s `SelectedValue` property as the parameter source.</span></span>

<span data-ttu-id="f41d5-181">[![używać dostawców DropDownList jako źródła parametrów IDDostawcy](limiting-data-modification-functionality-based-on-the-user-cs/_static/image23.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="f41d5-181">[![Use the Suppliers DropDownList as the supplierID Parameter Source](limiting-data-modification-functionality-based-on-the-user-cs/_static/image23.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image22.png)</span></span>

<span data-ttu-id="f41d5-182">**Ilustracja 8**. Użyj `Suppliers` DropDownList jako źródła parametrów `supplierID` (kliknij,[Aby wyświetlić obraz o pełnym rozmiarze](limiting-data-modification-functionality-based-on-the-user-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="f41d5-182">**Figure 8**: Use the `Suppliers` DropDownList as the `supplierID` Parameter Source ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image24.png))</span></span>

<span data-ttu-id="f41d5-183">Nawet po dodaniu drugiego elementu ObjectDataSource formant DetailsView jest obecnie skonfigurowany tak, aby zawsze używał `AllSuppliersDataSource` ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="f41d5-183">Even with this second ObjectDataSource added, the DetailsView control is currently configured to always use the `AllSuppliersDataSource` ObjectDataSource.</span></span> <span data-ttu-id="f41d5-184">Musimy dodać logikę, aby dostosować źródło danych używane w widoku DetailsView w zależności od wybranego `Suppliers` elementu DropDownList.</span><span class="sxs-lookup"><span data-stu-id="f41d5-184">We need to add logic to adjust the data source used by the DetailsView depending on the `Suppliers` DropDownList item selected.</span></span> <span data-ttu-id="f41d5-185">Aby to osiągnąć, Utwórz procedurę obsługi zdarzeń `SelectedIndexChanged` dla dostawców DropDownList.</span><span class="sxs-lookup"><span data-stu-id="f41d5-185">To accomplish this, create a `SelectedIndexChanged` event handler for the Suppliers DropDownList.</span></span> <span data-ttu-id="f41d5-186">Można to łatwo utworzyć przez dwukrotne kliknięcie DropDownList w projektancie.</span><span class="sxs-lookup"><span data-stu-id="f41d5-186">This can most easily be created by double-clicking the DropDownList in the Designer.</span></span> <span data-ttu-id="f41d5-187">Ten program obsługi zdarzeń musi określić źródło danych, które ma być używane, i musi ponownie powiązać dane z tym DetailsView.</span><span class="sxs-lookup"><span data-stu-id="f41d5-187">This event handler needs to determine what data source to use and must rebind the data to the DetailsView.</span></span> <span data-ttu-id="f41d5-188">Jest to realizowane przy użyciu następującego kodu:</span><span class="sxs-lookup"><span data-stu-id="f41d5-188">This is accomplished with the following code:</span></span>

[!code-csharp[Main](limiting-data-modification-functionality-based-on-the-user-cs/samples/sample3.cs)]

<span data-ttu-id="f41d5-189">Procedura obsługi zdarzeń rozpoczyna się od określenia, czy wybrano opcję "Pokaż/Edytuj wszystkie dostawcy".</span><span class="sxs-lookup"><span data-stu-id="f41d5-189">The event handler begins by determining whether the "Show/Edit ALL Suppliers" option was selected.</span></span> <span data-ttu-id="f41d5-190">Jeśli tak, ustawia `SupplierDetails` widoku DetailsView `DataSourceID`, aby `AllSuppliersDataSource` i zwraca użytkownika do pierwszego rekordu w zestawie dostawców przez ustawienie właściwości `PageIndex` na 0.</span><span class="sxs-lookup"><span data-stu-id="f41d5-190">If it was, it sets the `SupplierDetails` DetailsView s `DataSourceID` to `AllSuppliersDataSource` and returns the user to the first record in the set of suppliers by setting the `PageIndex` property to 0.</span></span> <span data-ttu-id="f41d5-191">Jeśli jednak użytkownik wybrał określonego dostawcę z DropDownList, `DataSourceID` DetailsView s zostanie przypisany do `SingleSuppliersDataSource`.</span><span class="sxs-lookup"><span data-stu-id="f41d5-191">If, however, the user has selected a particular supplier from the DropDownList, the DetailsView s `DataSourceID` is assigned to `SingleSuppliersDataSource`.</span></span> <span data-ttu-id="f41d5-192">Bez względu na to, jakie źródło danych jest używane, tryb `SuppliersDetails` jest przywracany do trybu tylko do odczytu, a dane są ponownie powiązane z DetailsView przez wywołanie metody `SuppliersDetails` Control s `DataBind()`.</span><span class="sxs-lookup"><span data-stu-id="f41d5-192">Regardless of what data source is used, the `SuppliersDetails` mode is reverted back to the read-only mode and the data is rebound to the DetailsView by a call to the `SuppliersDetails` control s `DataBind()` method.</span></span>

<span data-ttu-id="f41d5-193">Po zastosowaniu tego programu obsługi zdarzeń kontrolka DetailsView wyświetla teraz wybranego dostawcę, chyba że wybrano opcję "Pokaż/Edytuj wszystkie dostawcy", w tym przypadku wszyscy dostawcy mogą być wyświetlani za pomocą interfejsu stronicowania.</span><span class="sxs-lookup"><span data-stu-id="f41d5-193">With this event handler in place, the DetailsView control now shows the selected supplier, unless the "Show/Edit ALL Suppliers" option was selected, in which case all of the suppliers can be viewed through the paging interface.</span></span> <span data-ttu-id="f41d5-194">Na rysunku nr 9 zostanie wyświetlona strona z wybraną opcją "Pokaż/Edytuj wszystkie dostawcy"; Należy zauważyć, że interfejs stronicowania jest obecny, umożliwiając użytkownikowi odwiedzenie i zaktualizowanie dowolnego dostawcy.</span><span class="sxs-lookup"><span data-stu-id="f41d5-194">Figure 9 shows the page with the "Show/Edit ALL Suppliers" option selected; note that the paging interface is present, allowing the user to visit and update any supplier.</span></span> <span data-ttu-id="f41d5-195">Na rysunku nr 10 przedstawiono stronę z wybranym dostawcą ma Maison.</span><span class="sxs-lookup"><span data-stu-id="f41d5-195">Figure 10 shows the page with the Ma Maison supplier selected.</span></span> <span data-ttu-id="f41d5-196">W tym przypadku tylko ma informacje o Maison s.</span><span class="sxs-lookup"><span data-stu-id="f41d5-196">Only Ma Maison s information is viewable and editable in this case.</span></span>

<span data-ttu-id="f41d5-197">[![wszystkie informacje o dostawcach mogą być wyświetlane i edytowane.](limiting-data-modification-functionality-based-on-the-user-cs/_static/image26.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="f41d5-197">[![All of the Suppliers Information Can Be Viewed and Edited](limiting-data-modification-functionality-based-on-the-user-cs/_static/image26.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image25.png)</span></span>

<span data-ttu-id="f41d5-198">**Ilustracja 9**. Wyświetlanie i edytowanie wszystkich informacji o dostawcach ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](limiting-data-modification-functionality-based-on-the-user-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="f41d5-198">**Figure 9**: All of the Suppliers Information Can Be Viewed and Edited ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image27.png))</span></span>

<span data-ttu-id="f41d5-199">[![można wyświetlać i edytować tylko wybrane informacje dostawcy.](limiting-data-modification-functionality-based-on-the-user-cs/_static/image29.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="f41d5-199">[![Only the Selected Supplier s Information Can Be Viewed and Edited](limiting-data-modification-functionality-based-on-the-user-cs/_static/image29.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image28.png)</span></span>

<span data-ttu-id="f41d5-200">**Rysunek 10**. Wyświetlanie i edytowanie tylko wybranych informacji o dostawcy ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](limiting-data-modification-functionality-based-on-the-user-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="f41d5-200">**Figure 10**: Only the Selected Supplier s Information Can Be Viewed and Edited ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image30.png))</span></span>

> [!NOTE]
> <span data-ttu-id="f41d5-201">Dla tego samouczka `EnableViewState` kontrolki DropDownList i DetailsView muszą mieć ustawioną wartość `true` (domyślnie), ponieważ zmiany właściwości DropDownList s `SelectedIndex` i DetailsView s `DataSourceID` muszą być zapamiętywane na stronach ogłaszania zwrotnego.</span><span class="sxs-lookup"><span data-stu-id="f41d5-201">For this tutorial, both the DropDownList and DetailsView control s `EnableViewState` must be set to `true` (the default) because the DropDownList s `SelectedIndex` and the DetailsView s `DataSourceID` property s changes must be remembered across postbacks.</span></span>

## <a name="step-4-listing-the-suppliers-products-in-an-editable-gridview"></a><span data-ttu-id="f41d5-202">Krok 4. Tworzenie listy produktów dostawców w edytowalnym widoku GridView</span><span class="sxs-lookup"><span data-stu-id="f41d5-202">Step 4: Listing the Suppliers Products in an Editable GridView</span></span>

<span data-ttu-id="f41d5-203">W przypadku ukończenia widoku DetailsView następnym krokiem jest uwzględnienie edytowalnego widoku GridView, który wyświetla listę produktów dostarczonych przez wybranego dostawcę.</span><span class="sxs-lookup"><span data-stu-id="f41d5-203">With the DetailsView complete, our next step is to include an editable GridView that lists those products provided by the selected supplier.</span></span> <span data-ttu-id="f41d5-204">Ten element GridView powinien zezwalać na edycję tylko `ProductName` i `QuantityPerUnit` pól.</span><span class="sxs-lookup"><span data-stu-id="f41d5-204">This GridView should allow edits to only the `ProductName` and `QuantityPerUnit` fields.</span></span> <span data-ttu-id="f41d5-205">Ponadto, jeśli użytkownik odwiedzający stronę pochodzi od określonego dostawcy, powinien zezwalać tylko na aktualizacje tych produktów, które *nie* zostały wycofane.</span><span class="sxs-lookup"><span data-stu-id="f41d5-205">Moreover, if the user visiting the page is from a particular supplier, it should only allow updates to those products that are *not* discontinued.</span></span> <span data-ttu-id="f41d5-206">Aby to osiągnąć, należy najpierw dodać Przeciążenie metody `ProductsBLL` klasy s `UpdateProducts`, która przyjmuje jako dane wejściowe tylko `ProductID`, `ProductName`i `QuantityPerUnit`.</span><span class="sxs-lookup"><span data-stu-id="f41d5-206">To accomplish this we'll need to first add an overload of the `ProductsBLL` class s `UpdateProducts` method that takes in just the `ProductID`, `ProductName`, and `QuantityPerUnit` fields as inputs.</span></span> <span data-ttu-id="f41d5-207">W tej chwili omawiamy ten proces wcześniej w wielu samouczkach, dlatego poinformuj o tym tutaj kod, który należy dodać do `ProductsBLL`:</span><span class="sxs-lookup"><span data-stu-id="f41d5-207">We ve stepped through this process beforehand in numerous tutorials, so let s just look at the code here, which should be added to `ProductsBLL`:</span></span>

[!code-csharp[Main](limiting-data-modification-functionality-based-on-the-user-cs/samples/sample4.cs)]

<span data-ttu-id="f41d5-208">Po utworzeniu tego przeciążenia będziemy ponownie gotowy dodać formant GridView i skojarzony z nim element ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="f41d5-208">With this overload created, we re ready to add the GridView control and its associated ObjectDataSource.</span></span> <span data-ttu-id="f41d5-209">Dodaj nowy element GridView do strony, ustaw jej Właściwość `ID` na `ProductsBySupplier`i skonfiguruj ją tak, aby korzystała z nowego elementu ObjectDataSource o nazwie `ProductsBySupplierDataSource`.</span><span class="sxs-lookup"><span data-stu-id="f41d5-209">Add a new GridView to the page, set its `ID` property to `ProductsBySupplier`, and configure it to use a new ObjectDataSource named `ProductsBySupplierDataSource`.</span></span> <span data-ttu-id="f41d5-210">Ponieważ ten widok GridView ma wyświetlać te produkty według wybranego dostawcy, użyj metody `GetProductsBySupplierID(supplierID)` `ProductsBLL` Class.</span><span class="sxs-lookup"><span data-stu-id="f41d5-210">Since we want this GridView to list those products by the selected supplier, use the `ProductsBLL` class s `GetProductsBySupplierID(supplierID)` method.</span></span> <span data-ttu-id="f41d5-211">Zamapuj również metodę `Update()` na nowe Przeciążenie `UpdateProduct`, który właśnie został utworzony.</span><span class="sxs-lookup"><span data-stu-id="f41d5-211">Also map the `Update()` method to the new `UpdateProduct` overload we just created.</span></span>

<span data-ttu-id="f41d5-212">[![skonfigurować element ObjectDataSource do używania właśnie utworzonego przeciążenia UpdateProduct](limiting-data-modification-functionality-based-on-the-user-cs/_static/image32.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="f41d5-212">[![Configure the ObjectDataSource to Use the UpdateProduct Overload Just Created](limiting-data-modification-functionality-based-on-the-user-cs/_static/image32.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image31.png)</span></span>

<span data-ttu-id="f41d5-213">**Ilustracja 11**. Konfigurowanie elementu ObjectDataSource do używania właśnie utworzonego przeciążenia `UpdateProduct` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](limiting-data-modification-functionality-based-on-the-user-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="f41d5-213">**Figure 11**: Configure the ObjectDataSource to Use the `UpdateProduct` Overload Just Created ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image33.png))</span></span>

<span data-ttu-id="f41d5-214">Zostanie wyświetlony monit o wybranie źródła parametrów dla `GetProductsBySupplierID(supplierID)` metody s `supplierID` parametr wejściowy.</span><span class="sxs-lookup"><span data-stu-id="f41d5-214">We re prompted to select the parameter source for the `GetProductsBySupplierID(supplierID)` method s `supplierID` input parameter.</span></span> <span data-ttu-id="f41d5-215">Ze względu na to, że chcemy wyświetlić produkty dla dostawcy wybranego w widoku DetailsView, użyj właściwości `SuppliersDetails` DetailsView formantu s `SelectedValue` jako źródła parametru.</span><span class="sxs-lookup"><span data-stu-id="f41d5-215">Since we want to show the products for the supplier selected in the DetailsView, use the `SuppliersDetails` DetailsView control s `SelectedValue` property as the parameter source.</span></span>

<span data-ttu-id="f41d5-216">[![użyć właściwości SuppliersDetails widoku DetailsView s SelectedValue jako źródła parametru](limiting-data-modification-functionality-based-on-the-user-cs/_static/image35.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="f41d5-216">[![Use the SuppliersDetails DetailsView s SelectedValue Property as the Parameter Source](limiting-data-modification-functionality-based-on-the-user-cs/_static/image35.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image34.png)</span></span>

<span data-ttu-id="f41d5-217">**Ilustracja 12**. użyj właściwości `SuppliersDetails` DetailsView s `SelectedValue` jako źródła parametru ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](limiting-data-modification-functionality-based-on-the-user-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="f41d5-217">**Figure 12**: Use the `SuppliersDetails` DetailsView s `SelectedValue` Property as the Parameter Source ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image36.png))</span></span>

<span data-ttu-id="f41d5-218">Wróć do widoku GridView, Usuń wszystkie pola GridView z wyjątkiem `ProductName`, `QuantityPerUnit`i `Discontinued`, zaznaczając `Discontinued` CheckBoxField jako tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="f41d5-218">Returning to the GridView, remove all of the GridView fields except for `ProductName`, `QuantityPerUnit`, and `Discontinued`, marking the `Discontinued` CheckBoxField as read-only.</span></span> <span data-ttu-id="f41d5-219">Sprawdź również opcję Włącz edytowanie w tagu inteligentnym GridView.</span><span class="sxs-lookup"><span data-stu-id="f41d5-219">Also, check the Enable Editing option from the GridView s smart tag.</span></span> <span data-ttu-id="f41d5-220">Po wprowadzeniu tych zmian znaczniki deklaratywne dla elementu GridView i ObjectDataSource powinny wyglądać podobnie do następujących:</span><span class="sxs-lookup"><span data-stu-id="f41d5-220">After these changes have been made, the declarative markup for the GridView and ObjectDataSource should look similar to the following:</span></span>

[!code-aspx[Main](limiting-data-modification-functionality-based-on-the-user-cs/samples/sample5.aspx)]

<span data-ttu-id="f41d5-221">Tak jak w przypadku poprzednich ObjectDataSourceów, ta właściwość s `OldValuesParameterFormatString` jest ustawiona na `original_{0}`, co spowoduje problemy podczas próby zaktualizowania nazwy produktu lub ilości na jednostkę.</span><span class="sxs-lookup"><span data-stu-id="f41d5-221">As with our previous ObjectDataSources, this one s `OldValuesParameterFormatString` property is set to `original_{0}`, which will cause problems when attempting to update a product s name or quantity per unit.</span></span> <span data-ttu-id="f41d5-222">Całkowicie Usuń tę właściwość ze składni deklaratywnej lub ustaw ją jako domyślną, `{0}`.</span><span class="sxs-lookup"><span data-stu-id="f41d5-222">Remove this property from the declarative syntax altogether or set it to its default, `{0}`.</span></span>

<span data-ttu-id="f41d5-223">Po ukończeniu tej konfiguracji nasza strona zawiera teraz produkty dostarczone przez dostawcę wybranego w widoku GridView (patrz rysunek 13).</span><span class="sxs-lookup"><span data-stu-id="f41d5-223">With this configuration complete, our page now lists the products provided by the supplier selected in the GridView (see Figure 13).</span></span> <span data-ttu-id="f41d5-224">Obecnie można aktualizować *wszystkie* nazwy produktów lub ilości na jednostkę.</span><span class="sxs-lookup"><span data-stu-id="f41d5-224">Currently *any* product s name or quantity per unit can be updated.</span></span> <span data-ttu-id="f41d5-225">Należy jednak zaktualizować naszą logikę strony, aby zapewnić, że funkcje te będą zabronione dla nieprawidłowych produktów dla użytkowników skojarzonych z określonym dostawcą.</span><span class="sxs-lookup"><span data-stu-id="f41d5-225">However, we need to update our page logic so that such functionality is prohibited for discontinued products for users associated with a particular supplier.</span></span> <span data-ttu-id="f41d5-226">Zajmiemy się tym ostatnim elementem w kroku 5.</span><span class="sxs-lookup"><span data-stu-id="f41d5-226">We'll tackle this final piece in Step 5.</span></span>

<span data-ttu-id="f41d5-227">[![są wyświetlane produkty dostarczone przez wybranego dostawcę](limiting-data-modification-functionality-based-on-the-user-cs/_static/image38.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="f41d5-227">[![The Products Provided by the Selected Supplier are Displayed](limiting-data-modification-functionality-based-on-the-user-cs/_static/image38.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image37.png)</span></span>

<span data-ttu-id="f41d5-228">**Ilustracja 13**. wyświetlane są produkty dostarczone przez wybranego dostawcę ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](limiting-data-modification-functionality-based-on-the-user-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="f41d5-228">**Figure 13**: The Products Provided by the Selected Supplier are Displayed ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image39.png))</span></span>

> [!NOTE]
> <span data-ttu-id="f41d5-229">Dodanie tego edytowalnego widoku GridView `Suppliers` DropDownList s `SelectedIndexChanged` obsługi zdarzeń należy zaktualizować, aby przywrócić widok GridView do stanu tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="f41d5-229">With the addition of this editable GridView the `Suppliers` DropDownList s `SelectedIndexChanged` event handler should be updated to return the GridView to a read-only state.</span></span> <span data-ttu-id="f41d5-230">W przeciwnym razie, jeśli w trakcie edytowania informacji o produkcie zostanie wybrany inny dostawca, będzie również można edytować odpowiedni indeks w widoku GridView dla nowego dostawcy.</span><span class="sxs-lookup"><span data-stu-id="f41d5-230">Otherwise, if a different supplier is selected while in the middle of editing product information, the corresponding index in the GridView for the new supplier will also be editable.</span></span> <span data-ttu-id="f41d5-231">Aby tego uniknąć, po prostu ustaw właściwość GridView s `EditIndex` na `-1` w programie obsługi zdarzeń `SelectedIndexChanged`.</span><span class="sxs-lookup"><span data-stu-id="f41d5-231">To prevent this, simply set the GridView s `EditIndex` property to `-1` in the `SelectedIndexChanged` event handler.</span></span>

<span data-ttu-id="f41d5-232">Ponadto należy odwołać się, że stan widoku GridView jest włączony (domyślne zachowanie).</span><span class="sxs-lookup"><span data-stu-id="f41d5-232">Also, recall that it is important that the GridView s view state be enabled (the default behavior).</span></span> <span data-ttu-id="f41d5-233">Jeśli ustawisz właściwość GridView s `EnableViewState` na `false`, zostanie uruchomione ryzyko przypadkowego usunięcia lub edycji rekordów przez współbieżnych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="f41d5-233">If you set the GridView s `EnableViewState` property to `false`, you run the risk of having concurrent users unintentionally deleting or editing records.</span></span> <span data-ttu-id="f41d5-234">Zobacz [Ostrzeżenie: problem współbieżności z elementem ASP.NET 2,0 gridviews/DetailsView/FormView, który obsługuje edytowanie i/lub usuwanie stanu widoku,](http://scottonwriting.net/sowblog/posts/10054.aspx) Aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="f41d5-234">See [WARNING: Concurrency Issue with ASP.NET 2.0 GridViews/DetailsView/FormViews that Support Editing and/or Deleting and Whose View State is Disabled](http://scottonwriting.net/sowblog/posts/10054.aspx) for more information.</span></span>

## <a name="step-5-disallow-editing-for-discontinued-products-when-showedit-all-suppliers-is-not-selected"></a><span data-ttu-id="f41d5-235">Krok 5. nie Zezwalaj na edytowanie nieprawidłowych produktów, gdy nie wybrano Pokaż/Edytuj wszystkich dostawców</span><span class="sxs-lookup"><span data-stu-id="f41d5-235">Step 5: Disallow Editing for Discontinued Products When Show/Edit ALL Suppliers is Not Selected</span></span>

<span data-ttu-id="f41d5-236">`ProductsBySupplier` GridView jest w pełni funkcjonalny, obecnie przyznaje zbyt dużo dostępu do tych użytkowników, którzy pochodzą z danego dostawcy.</span><span class="sxs-lookup"><span data-stu-id="f41d5-236">While the `ProductsBySupplier` GridView is fully functional, it currently grants too much access to those users who are from a particular supplier.</span></span> <span data-ttu-id="f41d5-237">Zgodnie z naszymi regułami biznesowymi użytkownicy nie powinni być w stanie aktualizować wycofanych produktów.</span><span class="sxs-lookup"><span data-stu-id="f41d5-237">Per our business rules, such users should not be able to update discontinued products.</span></span> <span data-ttu-id="f41d5-238">Aby to wymusić, można ukryć (lub wyłączyć) przycisk Edytuj w tych wierszach GridView z nieprawidłowymi produktami, gdy strona jest odwiedzana przez użytkownika od dostawcy.</span><span class="sxs-lookup"><span data-stu-id="f41d5-238">To enforce this, we can hide (or disable) the Edit button in those GridView rows with discontinued products when the page is being visited by a user from a supplier.</span></span>

<span data-ttu-id="f41d5-239">Utwórz procedurę obsługi zdarzeń dla zdarzenia `RowDataBound` GridView.</span><span class="sxs-lookup"><span data-stu-id="f41d5-239">Create an event handler for the GridView s `RowDataBound` event.</span></span> <span data-ttu-id="f41d5-240">W ramach tego programu obsługi zdarzeń musimy określić, czy użytkownik jest skojarzony z konkretnym dostawcą, który w tym samouczku może zostać określony przez sprawdzenie właściwości dostawcy DropDownList s `SelectedValue` — jeśli jest to wartość inna niż-1, wówczas użytkownik jest skojarzony z określonym dostawcą.</span><span class="sxs-lookup"><span data-stu-id="f41d5-240">In this event handler we need to determine whether or not the user is associated with a particular supplier, which, for this tutorial, can be determined by checking the Suppliers DropDownList s `SelectedValue` property - if it s something other than -1, then the user is associated with a particular supplier.</span></span> <span data-ttu-id="f41d5-241">W przypadku takich użytkowników należy określić, czy produkt jest nieobsługiwany.</span><span class="sxs-lookup"><span data-stu-id="f41d5-241">For such users, we then need to determine whether or not the product is discontinued.</span></span> <span data-ttu-id="f41d5-242">Możemy pobrać odwołanie do rzeczywistego wystąpienia `ProductRow` powiązanego z wierszem GridView za pośrednictwem właściwości `e.Row.DataItem`, zgodnie z opisem w temacie [*Wyświetlanie podsumowania informacji zawartych w samouczku w stopce widoku GridView*](../custom-formatting/displaying-summary-information-in-the-gridview-s-footer-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="f41d5-242">We can grab a reference to the actual `ProductRow` instance bound to the GridView row via the `e.Row.DataItem` property, as discussed in the [*Displaying Summary Information in the GridView s Footer*](../custom-formatting/displaying-summary-information-in-the-gridview-s-footer-cs.md) tutorial.</span></span> <span data-ttu-id="f41d5-243">Jeśli produkt zostanie wycofany, możemy pobrać informacje programistyczne do przycisku Edytuj w widoku GridView s CommandField przy użyciu technik omówionych w poprzednim samouczku, co powoduje [*dodanie potwierdzenia po stronie klienta podczas usuwania*](adding-client-side-confirmation-when-deleting-cs.md).</span><span class="sxs-lookup"><span data-stu-id="f41d5-243">If the product is discontinued, we can grab a programmatic reference to the Edit button in the GridView s CommandField using the techniques discussed in the previous tutorial, [*Adding Client-Side Confirmation When Deleting*](adding-client-side-confirmation-when-deleting-cs.md).</span></span> <span data-ttu-id="f41d5-244">Gdy mamy odwołanie, możemy go ukryć lub wyłączyć.</span><span class="sxs-lookup"><span data-stu-id="f41d5-244">Once we have a reference we can then hide or disable the button.</span></span>

[!code-csharp[Main](limiting-data-modification-functionality-based-on-the-user-cs/samples/sample6.cs)]

<span data-ttu-id="f41d5-245">W przypadku korzystania z tej procedury obsługi zdarzeń podczas odwiedzania tej strony jako użytkownik z określonego dostawcy nie można edytować produktów, które nie są dostępne, ponieważ przycisk Edytuj jest ukryty dla tych produktów.</span><span class="sxs-lookup"><span data-stu-id="f41d5-245">With this event handler in place, when visiting this page as a user from a specific supplier those products that are discontinued are not editable, as the Edit button is hidden for these products.</span></span> <span data-ttu-id="f41d5-246">Na przykład Chef Anton s Gumbo mix to wycofany produkt dla nowego dostawcy Orleans Cajun.</span><span class="sxs-lookup"><span data-stu-id="f41d5-246">For example, Chef Anton s Gumbo Mix is a discontinued product for the New Orleans Cajun Delights supplier.</span></span> <span data-ttu-id="f41d5-247">Podczas odwiedzania strony dla tego konkretnego dostawcy przycisk Edytuj dla tego produktu jest ukryty przed wzrokiem (zobacz rysunek 14).</span><span class="sxs-lookup"><span data-stu-id="f41d5-247">When visiting the page for this particular supplier, the Edit button for this product is hidden from sight (see Figure 14).</span></span> <span data-ttu-id="f41d5-248">Jednak podczas odwiedzania przy użyciu opcji "Pokaż/Edytuj wszyscy dostawcy" przycisk Edytuj jest dostępny (zobacz rysunek 15).</span><span class="sxs-lookup"><span data-stu-id="f41d5-248">However, when visiting using the "Show/Edit ALL Suppliers," the Edit button is available (see Figure 15).</span></span>

<span data-ttu-id="f41d5-249">[![dla użytkowników specyficznych dla dostawcy przycisk Edytuj dla Chef Anton s Gumbo mix jest ukryty](limiting-data-modification-functionality-based-on-the-user-cs/_static/image41.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="f41d5-249">[![For Supplier-Specific Users the Edit Button for Chef Anton s Gumbo Mix is Hidden](limiting-data-modification-functionality-based-on-the-user-cs/_static/image41.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image40.png)</span></span>

<span data-ttu-id="f41d5-250">**Ilustracja 14**. dla użytkowników specyficznych dla dostawcy przycisk Edytuj dla Chef Anton s Gumbo mix jest ukryty ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](limiting-data-modification-functionality-based-on-the-user-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="f41d5-250">**Figure 14**: For Supplier-Specific Users the Edit Button for Chef Anton s Gumbo Mix is Hidden ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image42.png))</span></span>

<span data-ttu-id="f41d5-251">[![do wyświetlania/edycji wszystkich użytkowników dostawcy, wyświetlany jest przycisk Edytuj dla Chef Anton s Gumbo mix](limiting-data-modification-functionality-based-on-the-user-cs/_static/image44.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="f41d5-251">[![For Show/Edit ALL Suppliers Users, the Edit Button for Chef Anton s Gumbo Mix is Displayed](limiting-data-modification-functionality-based-on-the-user-cs/_static/image44.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image43.png)</span></span>

<span data-ttu-id="f41d5-252">**Ilustracja 15**. Aby wyświetlić/edytować wszystkich użytkowników dostawcy, wyświetlany jest przycisk Edytuj dla Chef Anton s Gumbo mix ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](limiting-data-modification-functionality-based-on-the-user-cs/_static/image45.png))</span><span class="sxs-lookup"><span data-stu-id="f41d5-252">**Figure 15**: For Show/Edit ALL Suppliers Users, the Edit Button for Chef Anton s Gumbo Mix is Displayed ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image45.png))</span></span>

## <a name="checking-for-access-rights-in-the-business-logic-layer"></a><span data-ttu-id="f41d5-253">Sprawdzanie praw dostępu w warstwie logiki biznesowej</span><span class="sxs-lookup"><span data-stu-id="f41d5-253">Checking for Access Rights in the Business Logic Layer</span></span>

<span data-ttu-id="f41d5-254">W tym samouczku strona ASP.NET obsługuje całą logikę w odniesieniu do informacji, które użytkownik może zobaczyć i jakie produkty mogą zostać zaktualizowane.</span><span class="sxs-lookup"><span data-stu-id="f41d5-254">In this tutorial the ASP.NET page handles all logic with regards to what information the user can see and what products he can update.</span></span> <span data-ttu-id="f41d5-255">W idealnym przypadku ta logika również będzie obecna w warstwie logiki biznesowej.</span><span class="sxs-lookup"><span data-stu-id="f41d5-255">Ideally, this logic would also be present at the Business Logic Layer.</span></span> <span data-ttu-id="f41d5-256">Na przykład Metoda `SuppliersBLL` klasy `GetSuppliers()` s (zwracająca wszystkich dostawców) może obejmować sprawdzenie, czy aktualnie zalogowany użytkownik *nie* jest skojarzony z określonym dostawcą.</span><span class="sxs-lookup"><span data-stu-id="f41d5-256">For example, the `SuppliersBLL` class s `GetSuppliers()` method (which returns all suppliers) might include a check to ensure that the currently logged on user is *not* associated with a specific supplier.</span></span> <span data-ttu-id="f41d5-257">Podobnie Metoda `UpdateSupplierAddress` może obejmować kontrolę, aby upewnić się, że aktualnie zalogowany użytkownik pracował dla naszej firmy (i w związku z tym może zaktualizować wszystkie informacje o adresie dostawcy) lub jest skojarzony z dostawcą, którego dane są aktualizowane.</span><span class="sxs-lookup"><span data-stu-id="f41d5-257">Likewise, the `UpdateSupplierAddress` method could include a check to ensure that the currently logged on user either worked for our company (and therefore can update all suppliers address information) or is associated with the supplier whose data is being updated.</span></span>

<span data-ttu-id="f41d5-258">W tym miejscu nie zostały uwzględnione takie LOGIKI BIZNESOWEJe, ponieważ w naszym samouczku prawa użytkownika są określane przez DropDownList na stronie, której klasy LOGIKI biznesowej nie mogą uzyskać dostępu.</span><span class="sxs-lookup"><span data-stu-id="f41d5-258">I did not include such BLL-layer checks here because in our tutorial the user s rights are determined by a DropDownList on the page, which the BLL classes cannot access.</span></span> <span data-ttu-id="f41d5-259">W przypadku korzystania z systemu członkostwa lub jednego z gotowych do użycia schematów uwierzytelniania udostępnianych przez ASP.NET (takich jak uwierzytelnianie systemu Windows) aktualnie zalogowany użytkownik i informacje o rolach są dostępne z LOGIKI biznesowej, co sprawia, że taki dostęp możliwe jest sprawdzenie praw zarówno w przypadku prezentacji, jak i warstw LOGIKI biznesowej.</span><span class="sxs-lookup"><span data-stu-id="f41d5-259">When using the membership system or one of the out-of-the box authentication schemes provided by ASP.NET (such as Windows authentication), the currently logged on user s information and roles information can be accessed from the BLL, thereby making such access rights checks possible at both the presentation and BLL layers.</span></span>

## <a name="summary"></a><span data-ttu-id="f41d5-260">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="f41d5-260">Summary</span></span>

<span data-ttu-id="f41d5-261">Większość lokacji, które zapewniają konta użytkowników, musi dostosować interfejs modyfikacji danych na podstawie zalogowanego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f41d5-261">Most sites that provide user accounts need to customize the data modification interface based upon the logged in user.</span></span> <span data-ttu-id="f41d5-262">Użytkownicy administracyjni mogą mieć możliwość usuwania i edytowania dowolnego rekordu, podczas gdy użytkownicy niebędący administratorami mogą być ograniczeni wyłącznie do aktualizowania lub usuwania utworzonych przez siebie rekordów.</span><span class="sxs-lookup"><span data-stu-id="f41d5-262">Administrative users may be able to delete and edit any record, whereas non-administrative users may be limited to only updating or deleting records they created themselves.</span></span> <span data-ttu-id="f41d5-263">Niezależnie od tego, co może być scenariuszem, klasy kontrolki sieci Web, elementy ObjectDataSource i warstwy logiki biznesowej można rozszerzyć w celu dodania lub odmowy pewnych funkcji na podstawie zalogowanego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f41d5-263">Whatever the scenario may be, the data Web controls, ObjectDataSource, and Business Logic Layer classes can be extended to add or deny certain functionality based on the logged on user.</span></span> <span data-ttu-id="f41d5-264">W tym samouczku przedstawiono sposób ograniczania dostępnych i edytowalnych danych w zależności od tego, czy użytkownik został skojarzony z konkretnym dostawcą, czy też pracował nad firmą.</span><span class="sxs-lookup"><span data-stu-id="f41d5-264">In this tutorial we saw how to limit the viewable and editable data depending on whether the user was associated with a particular supplier or if they worked for our company.</span></span>

<span data-ttu-id="f41d5-265">W tym samouczku zakończymy badanie wstawiania, aktualizowania i usuwania danych za pomocą kontrolek GridView, DetailsView i FormView.</span><span class="sxs-lookup"><span data-stu-id="f41d5-265">This tutorial concludes our examination of inserting, updating, and deleting data using the GridView, DetailsView, and FormView controls.</span></span> <span data-ttu-id="f41d5-266">Począwszy od następnego samouczka, będziemy zachęcamy do dodawania obsługi stronicowania i sortowania.</span><span class="sxs-lookup"><span data-stu-id="f41d5-266">Starting with the next tutorial, we'll turn our attention to adding paging and sorting support.</span></span>

<span data-ttu-id="f41d5-267">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="f41d5-267">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="f41d5-268">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="f41d5-268">About the Author</span></span>

<span data-ttu-id="f41d5-269">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor siedmiu grup ASP/ASP. NET Books i założyciel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="f41d5-269">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f41d5-270">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="f41d5-270">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f41d5-271">Jego Najnowsza książka to [*Sams ASP.NET 2,0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="f41d5-271">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="f41d5-272">Można go osiągnąć w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f41d5-272">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="f41d5-273">lub za pośrednictwem swojego blogu, który można znaleźć w [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="f41d5-273">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f41d5-274">[Poprzednie](adding-client-side-confirmation-when-deleting-cs.md)
> [dalej](an-overview-of-inserting-updating-and-deleting-data-vb.md)</span><span class="sxs-lookup"><span data-stu-id="f41d5-274">[Previous](adding-client-side-confirmation-when-deleting-cs.md)
[Next](an-overview-of-inserting-updating-and-deleting-data-vb.md)</span></span>

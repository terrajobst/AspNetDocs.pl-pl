---
uid: web-forms/overview/data-access/advanced-data-access-scenarios/debugging-stored-procedures-cs
title: Debugowanie procedur składowanychC#() | Microsoft Docs
author: rick-anderson
description: Wersje Visual Studio Professional i Team System umożliwiają ustawianie punktów przerwania i wykonywanie kroków w procedurach składowanych w ramach SQL Server i przechowywanie przechowywanych debugowania...
ms.author: riande
ms.date: 08/03/2007
ms.assetid: c655c324-2ffa-4c21-8265-a254d79a693d
msc.legacyurl: /web-forms/overview/data-access/advanced-data-access-scenarios/debugging-stored-procedures-cs
msc.type: authoredcontent
ms.openlocfilehash: 12a8500b107345b9cc9ab457016fdef09ca1bb9d
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/28/2019
ms.locfileid: "74604818"
---
# <a name="debugging-stored-procedures-c"></a><span data-ttu-id="1111f-103">Debugowanie procedur składowanych (C#)</span><span class="sxs-lookup"><span data-stu-id="1111f-103">Debugging Stored Procedures (C#)</span></span>

<span data-ttu-id="1111f-104">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="1111f-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="1111f-105">[Pobierz kod](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_74_CS.zip) lub [Pobierz plik PDF](debugging-stored-procedures-cs/_static/datatutorial74cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="1111f-105">[Download Code](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_74_CS.zip) or [Download PDF](debugging-stored-procedures-cs/_static/datatutorial74cs1.pdf)</span></span>

> <span data-ttu-id="1111f-106">Wersje Visual Studio Professional i Team System umożliwiają ustawienie punktów przerwania i przechodzenie do procedur składowanych w ramach SQL Server, dzięki czemu debugowanie procedur składowanych jest łatwe jak Debugowanie kodu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1111f-106">Visual Studio Professional and Team System editions allow you to set breakpoints and step in to stored procedures within SQL Server, making debugging stored procedures as easy as debugging application code.</span></span> <span data-ttu-id="1111f-107">W tym samouczku przedstawiono bezpośrednie debugowanie bazy danych i debugowanie aplikacji procedur składowanych.</span><span class="sxs-lookup"><span data-stu-id="1111f-107">This tutorial demonstrates direct database debugging and application debugging of stored procedures.</span></span>

## <a name="introduction"></a><span data-ttu-id="1111f-108">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="1111f-108">Introduction</span></span>

<span data-ttu-id="1111f-109">Program Visual Studio oferuje bogate środowisko debugowania.</span><span class="sxs-lookup"><span data-stu-id="1111f-109">Visual Studio provides a rich debugging experience.</span></span> <span data-ttu-id="1111f-110">Za pomocą kilku naciśnięć klawiszy lub kliknięć myszą można użyć punktów przerwania do zatrzymania wykonywania programu i sprawdzenia jego stanu i przepływu sterowania.</span><span class="sxs-lookup"><span data-stu-id="1111f-110">With a few keystrokes or clicks of the mouse, it s possible to use breakpoints to stop execution of a program and examine its state and control flow.</span></span> <span data-ttu-id="1111f-111">Wraz z kodem aplikacji debugowania program Visual Studio oferuje obsługę debugowania procedur składowanych z poziomu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1111f-111">Along with debugging application code, Visual Studio offers support for debugging stored procedures from within SQL Server.</span></span> <span data-ttu-id="1111f-112">Podobnie jak punkty przerwania można ustawić w kodzie klasy ASP.NET lub klasy logiki biznesowej, tak aby można było ich umieścić w procedurach składowanych.</span><span class="sxs-lookup"><span data-stu-id="1111f-112">Just like breakpoints can be set within the code of an ASP.NET code-behind class or Business Logic Layer class, so too can they be placed within stored procedures.</span></span>

<span data-ttu-id="1111f-113">W tym samouczku omówiono procedurę składowaną z Eksplorator serwera w programie Visual Studio, a także jak ustawiać punkty przerwania, które są trafień, gdy procedura składowana zostanie wywołana z działającej aplikacji ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1111f-113">In this tutorial we will look at stepping into stored procedures from the Server Explorer within Visual Studio as well as how to set breakpoints that are hit when the stored procedure is called from the running ASP.NET application.</span></span>

> [!NOTE]
> <span data-ttu-id="1111f-114">Niestety, procedury składowane można wykonać tylko w wersjach Professional i Team Systems programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1111f-114">Unfortunately, stored procedures can only be stepped into and debugged through the Professional and Team Systems versions of Visual Studio.</span></span> <span data-ttu-id="1111f-115">W przypadku korzystania z programu Visual Web Developer lub standardowej wersji programu Visual Studio, można zapoznać się z instrukcjami, które są niezbędne do debugowania procedur składowanych, ale nie będzie można replikować tych kroków na maszynie.</span><span class="sxs-lookup"><span data-stu-id="1111f-115">If you are using Visual Web Developer or the standard version of Visual Studio, you are welcome to read along as we walk through the steps necessary to debug stored procedures, but you will not be able to replicate these steps on your machine.</span></span>

## <a name="sql-server-debugging-concepts"></a><span data-ttu-id="1111f-116">SQL Server pojęć dotyczących debugowania</span><span class="sxs-lookup"><span data-stu-id="1111f-116">SQL Server Debugging Concepts</span></span>

<span data-ttu-id="1111f-117">Microsoft SQL Server 2005 został zaprojektowany w celu zapewnienia integracji ze [środowiskiem uruchomieniowym języka wspólnego (CLR)](https://msdn.microsoft.com/netframework/aa497266.aspx), który jest używany przez wszystkie zestawy .NET.</span><span class="sxs-lookup"><span data-stu-id="1111f-117">Microsoft SQL Server 2005 was designed to provide integration with the [Common Language Runtime (CLR)](https://msdn.microsoft.com/netframework/aa497266.aspx), which is the runtime used by all .NET assemblies.</span></span> <span data-ttu-id="1111f-118">W związku z tym SQL Server 2005 obsługuje obiekty zarządzanej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1111f-118">Consequently, SQL Server 2005 supports managed database objects.</span></span> <span data-ttu-id="1111f-119">Oznacza to, że można tworzyć obiekty bazy danych, takie jak procedury składowane i funkcje zdefiniowane przez użytkownika (UDF) C# jako metody w klasie.</span><span class="sxs-lookup"><span data-stu-id="1111f-119">That is, you can create database objects like stored procedures and User-Defined Functions (UDFs) as methods in a C# class.</span></span> <span data-ttu-id="1111f-120">Dzięki temu te procedury składowane i UDF mogą korzystać z funkcji w .NET Framework i z własnych klas niestandardowych.</span><span class="sxs-lookup"><span data-stu-id="1111f-120">This enables these stored procedures and UDFs to utilize functionality in the .NET Framework and from your own custom classes.</span></span> <span data-ttu-id="1111f-121">Oczywiście SQL Server 2005 zapewnia również obsługę obiektów usługi T-SQL Database.</span><span class="sxs-lookup"><span data-stu-id="1111f-121">Of course, SQL Server 2005 also provides support for T-SQL database objects.</span></span>

<span data-ttu-id="1111f-122">SQL Server 2005 oferuje obsługę debugowania zarówno dla obiektów T-SQL, jak i zarządzanych baz danych.</span><span class="sxs-lookup"><span data-stu-id="1111f-122">SQL Server 2005 offers debugging support for both T-SQL and managed database objects.</span></span> <span data-ttu-id="1111f-123">Jednak te obiekty mogą być debugowane tylko za poorednictwem wersji programu Visual Studio 2005 Professional i Team Systems.</span><span class="sxs-lookup"><span data-stu-id="1111f-123">However, these objects can only be debugged through Visual Studio 2005 Professional and Team Systems editions.</span></span> <span data-ttu-id="1111f-124">W tym samouczku sprawdzimy debugowanie obiektów bazy danych T-SQL.</span><span class="sxs-lookup"><span data-stu-id="1111f-124">In this tutorial we will examine debugging T-SQL database objects.</span></span> <span data-ttu-id="1111f-125">W kolejnym samouczku pokazano, jak debugować zarządzane obiekty bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1111f-125">The subsequent tutorial looks at debugging managed database objects.</span></span>

<span data-ttu-id="1111f-126">[Omówienie debugowania języka T-SQL i środowiska CLR w blogu SQL Server 2005](https://blogs.msdn.com/sqlclr/archive/2006/06/29/651644.aspx) z poziomu [zespołu integracji SQL Server 2005 dla środowiska CLR](https://blogs.msdn.com/sqlclr/default.aspx) wyróżnia trzy sposoby debugowania SQL Server 2005 obiektów z programu Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="1111f-126">The [Overview of T-SQL and CLR Debugging in SQL Server 2005](https://blogs.msdn.com/sqlclr/archive/2006/06/29/651644.aspx) blog entry from the [SQL Server 2005 CLR Integration team](https://blogs.msdn.com/sqlclr/default.aspx) highlights the three ways to debug SQL Server 2005 objects from Visual Studio:</span></span>

- <span data-ttu-id="1111f-127">**Bezpośrednie debugowanie bazy danych (DDD)** — od Eksplorator serwera możemy przejść do dowolnego obiektu bazy danych T-SQL, takiego jak procedury składowane i UDF.</span><span class="sxs-lookup"><span data-stu-id="1111f-127">**Direct Database Debugging (DDD)** - from Server Explorer we can step into any T-SQL database object, such as stored procedures and UDFs.</span></span> <span data-ttu-id="1111f-128">Sprawdzimy DDD w kroku 1.</span><span class="sxs-lookup"><span data-stu-id="1111f-128">We will examine DDD in Step 1.</span></span>
- <span data-ttu-id="1111f-129">**Debugowanie aplikacji** — można ustawić punkty przerwania w obiekcie bazy danych, a następnie uruchomić naszą aplikację ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1111f-129">**Application Debugging** - we can set breakpoints within a database object and then run our ASP.NET application.</span></span> <span data-ttu-id="1111f-130">Gdy obiekt bazy danych jest wykonywany, punkt przerwania zostanie trafiony i kontrola zostanie włączona.</span><span class="sxs-lookup"><span data-stu-id="1111f-130">When the database object is executed, the breakpoint will be hit and control turned over to the debugger.</span></span> <span data-ttu-id="1111f-131">Należy pamiętać, że z debugowaniem aplikacji nie można wkroczyć do obiektu bazy danych z kodu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1111f-131">Note that with application debugging we cannot step into a database object from application code.</span></span> <span data-ttu-id="1111f-132">Należy jawnie ustawić punkty przerwania w tych procedurach składowanych lub UDF, gdy chcemy, aby debuger zatrzymał działanie.</span><span class="sxs-lookup"><span data-stu-id="1111f-132">We must explicitly set breakpoints in those stored procedures or UDFs where we want the debugger to stop.</span></span> <span data-ttu-id="1111f-133">Debugowanie aplikacji jest badane począwszy od kroku 2.</span><span class="sxs-lookup"><span data-stu-id="1111f-133">Application debugging is examined starting in Step 2.</span></span>
- <span data-ttu-id="1111f-134">**Debugowanie z SQL Server Project** -Visual Studio Professional i Team Systems edition zawiera SQL Server typ projektu, który jest często używany do tworzenia obiektów zarządzanych baz danych.</span><span class="sxs-lookup"><span data-stu-id="1111f-134">**Debugging from a SQL Server Project** - Visual Studio Professional and Team Systems editions include a SQL Server Project type that is commonly used to create managed database objects.</span></span> <span data-ttu-id="1111f-135">Będziemy badali użycie SQL Server projektów i debugowanie ich zawartości w następnym samouczku.</span><span class="sxs-lookup"><span data-stu-id="1111f-135">We will examine using SQL Server Projects and debugging their contents in the next tutorial.</span></span>

<span data-ttu-id="1111f-136">Program Visual Studio może debugować procedury składowane w lokalnych i zdalnych wystąpieniach SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1111f-136">Visual Studio can debug stored procedures on local and remote SQL Server instances.</span></span> <span data-ttu-id="1111f-137">Lokalne wystąpienie SQL Server to takie, które jest zainstalowane na tym samym komputerze co program Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1111f-137">A local SQL Server instance is one that is installed on the same machine as Visual Studio.</span></span> <span data-ttu-id="1111f-138">Jeśli używana baza danych SQL Server nie znajduje się na komputerze deweloperskim, jest uznawana za wystąpienie zdalne.</span><span class="sxs-lookup"><span data-stu-id="1111f-138">If the SQL Server database you are using is not located on your development machine, then it is considered a remote instance.</span></span> <span data-ttu-id="1111f-139">Dla tych samouczków używamy lokalnych wystąpień SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1111f-139">For these tutorials we have been using local SQL Server instances.</span></span> <span data-ttu-id="1111f-140">Debugowanie procedur składowanych w zdalnym wystąpieniu programu SQL Server wymaga większej liczby kroków konfiguracyjnych niż podczas debugowania procedur składowanych w wystąpieniu lokalnym.</span><span class="sxs-lookup"><span data-stu-id="1111f-140">Debugging stored procedures on a remote SQL server instance requires more configuration steps than when debugging stored procedures on a local instance.</span></span>

<span data-ttu-id="1111f-141">Jeśli używasz lokalnego SQL Server wystąpienia, możesz zacząć od kroku 1 i wykonać kroki opisane w tym samouczku na końcu.</span><span class="sxs-lookup"><span data-stu-id="1111f-141">If you are using a local SQL Server instance, you can start with Step 1 and work through this tutorial to the end.</span></span> <span data-ttu-id="1111f-142">Jeśli jest używane zdalne wystąpienie SQL Server, należy najpierw upewnić się, że podczas debugowania na komputerze deweloperskim zostanie zarejestrowane konto użytkownika systemu Windows, które ma SQL Server logowaniu w wystąpieniu zdalnym.</span><span class="sxs-lookup"><span data-stu-id="1111f-142">If you are using a remote SQL Server instance, however, you will first need to ensure that when debugging you are logged to your development machine with a Windows user account that has a SQL Server login on the remote instance.</span></span> <span data-ttu-id="1111f-143">Ponadto zarówno identyfikator logowania bazy danych, jak i identyfikator logowania bazy danych używane do łączenia się z bazą danych z działającej aplikacji ASP.NET muszą być członkami roli `sysadmin`.</span><span class="sxs-lookup"><span data-stu-id="1111f-143">Moreover, both this database login and the database login used to connect to the database from the running ASP.NET application must be members of the `sysadmin` role.</span></span> <span data-ttu-id="1111f-144">Więcej informacji na temat konfigurowania programu Visual Studio i SQL Server do debugowania wystąpienia zdalnego znajduje się w sekcji debugowanie obiektów T-SQL Database w zdalnych wystąpieniach.</span><span class="sxs-lookup"><span data-stu-id="1111f-144">See the Debugging T-SQL Database Objects on Remote Instances section at the end of this tutorial for more information on configuring Visual Studio and SQL Server to debug a remote instance.</span></span>

<span data-ttu-id="1111f-145">Na koniec należy pamiętać, że obsługa debugowania dla obiektów usługi T-SQL Database nie jest funkcją zaawansowaną jako obsługa debugowania dla aplikacji .NET.</span><span class="sxs-lookup"><span data-stu-id="1111f-145">Finally, understand that debugging support for T-SQL database objects is not as feature rich as debugging support for .NET applications.</span></span> <span data-ttu-id="1111f-146">Na przykład warunki i filtry punktu przerwania nie są obsługiwane. dostępne są tylko podzbiór okien debugowania, ale nie można używać elementów Edit i Continue. okno bezpośrednie jest renderowane jako bezużyteczne i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="1111f-146">For example, breakpoint conditions and filters are not supported, only a subset of the debugging windows are available, you cannot use Edit and Continue, the Immediate window is rendered useless, and so forth.</span></span> <span data-ttu-id="1111f-147">Aby uzyskać więcej informacji [, zobacz ograniczenia dotyczące poleceń debugera i funkcji](https://msdn.microsoft.com/library/ms165035(VS.80).aspx) .</span><span class="sxs-lookup"><span data-stu-id="1111f-147">See [Limitations on Debugger Commands and Features](https://msdn.microsoft.com/library/ms165035(VS.80).aspx) for more information.</span></span>

## <a name="step-1-directly-stepping-into-a-stored-procedure"></a><span data-ttu-id="1111f-148">Krok 1. bezpośrednie przechodzenie do procedury składowanej</span><span class="sxs-lookup"><span data-stu-id="1111f-148">Step 1: Directly Stepping Into a Stored Procedure</span></span>

<span data-ttu-id="1111f-149">Program Visual Studio ułatwia bezpośrednią debugowanie obiektu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1111f-149">Visual Studio makes it easy to directly debug a database object.</span></span> <span data-ttu-id="1111f-150">Pozwól, jak używać funkcji bezpośrednie debugowanie bazy danych (DDD), aby przejść do procedury składowanej `Products_SelectByCategoryID` w bazie danych Northwind.</span><span class="sxs-lookup"><span data-stu-id="1111f-150">Let s look at how to use the Direct Database Debugging (DDD) feature to step into the `Products_SelectByCategoryID` stored procedure in the Northwind database.</span></span> <span data-ttu-id="1111f-151">Jako że jego nazwa oznacza, `Products_SelectByCategoryID` zwraca informacje o produkcie dla określonej kategorii; został on utworzony w [istniejących procedurach składowanych dla danego TableAdaptersego samouczka zestawu danych](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="1111f-151">As its name implies, `Products_SelectByCategoryID` returns product information for a particular category; it was created in the [Using Existing Stored Procedures for the Typed DataSet s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) tutorial.</span></span> <span data-ttu-id="1111f-152">Zacznij od przechodzenia do Eksplorator serwera i rozwiń węzeł bazy danych Northwind.</span><span class="sxs-lookup"><span data-stu-id="1111f-152">Start by going to the Server Explorer and expand the Northwind database node.</span></span> <span data-ttu-id="1111f-153">Następnie przejdź do szczegółów w folderze procedury składowane, kliknij prawym przyciskiem myszy `Products_SelectByCategoryID` procedury składowanej i wybierz opcję wejdź do procedury składowanej z menu kontekstowego.</span><span class="sxs-lookup"><span data-stu-id="1111f-153">Next, drill down into the Stored Procedures folder, right-click on the `Products_SelectByCategoryID` stored procedure, and choose the Step Into Stored Procedure option from the context menu.</span></span> <span data-ttu-id="1111f-154">Spowoduje to uruchomienie debugera.</span><span class="sxs-lookup"><span data-stu-id="1111f-154">This will start the debugger.</span></span>

<span data-ttu-id="1111f-155">Ponieważ `Products_SelectByCategoryID` procedury składowanej oczekuje `@CategoryID` parametr wejściowy, zostanie wyświetlony monit o podanie tej wartości.</span><span class="sxs-lookup"><span data-stu-id="1111f-155">Since the `Products_SelectByCategoryID` stored procedure expects a `@CategoryID` input parameter, we are asked to provide this value.</span></span> <span data-ttu-id="1111f-156">Wprowadź wartość 1, która zwróci informacje o napojach.</span><span class="sxs-lookup"><span data-stu-id="1111f-156">Enter 1, which will return information about the beverages.</span></span>

![Użyj wartości 1 dla parametru @CategoryID](debugging-stored-procedures-cs/_static/image1.png)

<span data-ttu-id="1111f-158">**Rysunek 1**. Użyj wartości 1 dla parametru `@CategoryID`</span><span class="sxs-lookup"><span data-stu-id="1111f-158">**Figure 1**: Use the Value 1 for the `@CategoryID` Parameter</span></span>

<span data-ttu-id="1111f-159">Po podaniu wartości parametru `@CategoryID` wykonywana jest procedura składowana.</span><span class="sxs-lookup"><span data-stu-id="1111f-159">After supplying the value for the `@CategoryID` parameter, the stored procedure is executed.</span></span> <span data-ttu-id="1111f-160">W przeciwieństwie do ukończenia, debuger zatrzymuje wykonywanie na pierwszej instrukcji.</span><span class="sxs-lookup"><span data-stu-id="1111f-160">Rather than running to completion, though, the debugger halts execution on the first statement.</span></span> <span data-ttu-id="1111f-161">Zwróć uwagę na żółtą strzałkę na marginesie wskazującą bieżącą lokalizację w procedurze składowanej.</span><span class="sxs-lookup"><span data-stu-id="1111f-161">Note the yellow arrow in the margin, indicating the current location in the stored procedure.</span></span> <span data-ttu-id="1111f-162">Można wyświetlać i edytować wartości parametrów za pomocą okno wyrażeń kontrolnych lub przez umieszczenie kursora nad nazwą parametru w procedurze składowanej.</span><span class="sxs-lookup"><span data-stu-id="1111f-162">You can view and edit parameter values through the Watch window or by hovering over the parameter name in the stored procedure.</span></span>

<span data-ttu-id="1111f-163">[![debuger został zatrzymany na pierwszej instrukcji procedury składowanej](debugging-stored-procedures-cs/_static/image3.png)](debugging-stored-procedures-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="1111f-163">[![The Debugger has Halted on the First Statement of the Stored Procedure](debugging-stored-procedures-cs/_static/image3.png)](debugging-stored-procedures-cs/_static/image2.png)</span></span>

<span data-ttu-id="1111f-164">**Rysunek 2**. debuger został zatrzymany na pierwszej instrukcji procedury składowanej ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](debugging-stored-procedures-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="1111f-164">**Figure 2**: The Debugger has Halted on the First Statement of the Stored Procedure ([Click to view full-size image](debugging-stored-procedures-cs/_static/image4.png))</span></span>

<span data-ttu-id="1111f-165">Aby krokowo wykonać procedurę składowaną o jednej instrukcji w danym momencie, kliknij przycisk Przekrocz na pasku narzędzi lub naciśnij klawisz F10.</span><span class="sxs-lookup"><span data-stu-id="1111f-165">To step through the stored procedure one statement at a time, click the Step Over button in the Toolbar or hit the F10 key.</span></span> <span data-ttu-id="1111f-166">Procedura składowana `Products_SelectByCategoryID` zawiera jedną instrukcję `SELECT`, więc naciśnięcie klawisza F10 spowoduje przekroczenie pojedynczej instrukcji i zakończenie wykonywania procedury składowanej.</span><span class="sxs-lookup"><span data-stu-id="1111f-166">The `Products_SelectByCategoryID` stored procedure contains a single `SELECT` statement, so hitting F10 will Step over the single statement and complete the execution of the stored procedure.</span></span> <span data-ttu-id="1111f-167">Po zakończeniu procedury składowanej jej dane wyjściowe pojawią się w oknie danych wyjściowych, a debuger zostanie przerwany.</span><span class="sxs-lookup"><span data-stu-id="1111f-167">After the stored procedure has completed, its output will appear in the Output window and the debugger will terminate.</span></span>

> [!NOTE]
> <span data-ttu-id="1111f-168">Debugowanie T-SQL odbywa się na poziomie instrukcji; nie można przejść do instrukcji `SELECT`.</span><span class="sxs-lookup"><span data-stu-id="1111f-168">T-SQL debugging occurs at the statement level; you cannot Step into a `SELECT` statement.</span></span>

## <a name="step-2-configuring-the-website-for-application-debugging"></a><span data-ttu-id="1111f-169">Krok 2. Konfigurowanie witryny sieci Web na potrzeby debugowania aplikacji</span><span class="sxs-lookup"><span data-stu-id="1111f-169">Step 2: Configuring the Website for Application Debugging</span></span>

<span data-ttu-id="1111f-170">Debugowanie procedury składowanej bezpośrednio z Eksplorator serwera jest przydatne w wielu scenariuszach, które są bardziej interesujące podczas debugowania procedury składowanej, gdy jest wywoływana z naszej aplikacji ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1111f-170">While debugging a stored procedure directly from the Server Explorer is handy, in many scenarios we are more interested in debugging the stored procedure when it is called from our ASP.NET application.</span></span> <span data-ttu-id="1111f-171">Możemy dodać punkty przerwania do procedury składowanej z poziomu programu Visual Studio, a następnie rozpocząć debugowanie aplikacji ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1111f-171">We can add breakpoints to a stored procedure from within Visual Studio and then start debugging the ASP.NET application.</span></span> <span data-ttu-id="1111f-172">Gdy procedura składowana z punktami przerwania jest wywoływana z aplikacji, wykonywanie zostanie zatrzymane w punkcie przerwania i będzie można wyświetlać i zmieniać wartości parametrów procedury składowanej oraz krokowo, podobnie jak w kroku 1.</span><span class="sxs-lookup"><span data-stu-id="1111f-172">When a stored procedure with breakpoints is invoked from the application, execution will halt at the breakpoint and we can view and change the stored procedure s parameter values and step through its statements, just like we did in Step 1.</span></span>

<span data-ttu-id="1111f-173">Zanim będziemy mogli rozpocząć debugowanie procedur składowanych wywoływanych z aplikacji, musimy nakazać aplikacji sieci Web ASP.NET integrację z debugerem SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1111f-173">Before we can start debugging stored procedures called from the application, we need to instruct the ASP.NET web application to integrate with the SQL Server debugger.</span></span> <span data-ttu-id="1111f-174">Zacznij od kliknięcia prawym przyciskiem myszy nazwy witryny sieci Web w Eksplorator rozwiązań (`ASPNET_Data_Tutorial_74_CS`).</span><span class="sxs-lookup"><span data-stu-id="1111f-174">Start by right-clicking on the website name in the Solution Explorer (`ASPNET_Data_Tutorial_74_CS`).</span></span> <span data-ttu-id="1111f-175">Wybierz opcję strony właściwości z menu kontekstowego, wybierz pozycję Opcje uruchomienia po lewej stronie, a następnie zaznacz pole wyboru SQL Server w sekcji debugery (zobacz rysunek 3).</span><span class="sxs-lookup"><span data-stu-id="1111f-175">Choose the Property Pages option from the context menu, select the Start Options item on the left, and check the SQL Server checkbox in the Debuggers section (see Figure 3).</span></span>

<span data-ttu-id="1111f-176">[![zaznaczyć pole wyboru SQL Server na stronach właściwości aplikacji](debugging-stored-procedures-cs/_static/image6.png)](debugging-stored-procedures-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="1111f-176">[![Check the SQL Server Checkbox in the Application s Property Pages](debugging-stored-procedures-cs/_static/image6.png)](debugging-stored-procedures-cs/_static/image5.png)</span></span>

<span data-ttu-id="1111f-177">**Rysunek 3**. Zaznacz pole wyboru SQL Server na stronach właściwości aplikacji (kliknij,[Aby wyświetlić obraz o pełnym rozmiarze](debugging-stored-procedures-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="1111f-177">**Figure 3**: Check the SQL Server Checkbox in the Application s Property Pages ([Click to view full-size image](debugging-stored-procedures-cs/_static/image7.png))</span></span>

<span data-ttu-id="1111f-178">Ponadto należy zaktualizować parametry połączenia z bazą danych używane przez aplikację, aby pule połączeń były wyłączone.</span><span class="sxs-lookup"><span data-stu-id="1111f-178">Additionally, we need to update the database connection string used by the application so that connection pooling is disabled.</span></span> <span data-ttu-id="1111f-179">Gdy połączenie z bazą danych jest zamknięte, odpowiedni obiekt `SqlConnection` jest umieszczany w puli dostępnych połączeń.</span><span class="sxs-lookup"><span data-stu-id="1111f-179">When a connection to a database is closed, the corresponding `SqlConnection` object is placed in a pool of available connections.</span></span> <span data-ttu-id="1111f-180">Podczas ustanawiania połączenia z bazą danych można pobrać dostępny obiekt połączenia z tej puli zamiast tworzyć i ustanawiać nowe połączenie.</span><span class="sxs-lookup"><span data-stu-id="1111f-180">When establishing a connection to a database, an available connection object can be retrieved from this pool rather than having to create and establish a new connection.</span></span> <span data-ttu-id="1111f-181">Ta Pula obiektów połączeń jest ulepszeniem wydajności i jest domyślnie włączona.</span><span class="sxs-lookup"><span data-stu-id="1111f-181">This pooling of connection objects is a performance enhancement and is enabled by default.</span></span> <span data-ttu-id="1111f-182">Jednak podczas debugowania chcemy wyłączyć buforowanie połączeń, ponieważ infrastruktura debugowania nie jest poprawnie ponownie ustanawiana podczas pracy z połączeniem, które zostało wykonane z puli.</span><span class="sxs-lookup"><span data-stu-id="1111f-182">However, when debugging we want to turn off connection pooling because the debugging infrastructure is not correctly reestablished when working with a connection that was taken from the pool.</span></span>

<span data-ttu-id="1111f-183">Aby wyłączyć buforowanie połączeń, zaktualizuj `NORTHWNDConnectionString` w `Web.config` tak, aby obejmował `Pooling=false` ustawienia.</span><span class="sxs-lookup"><span data-stu-id="1111f-183">To disabled connection pooling, update the `NORTHWNDConnectionString` in `Web.config` so that it includes the setting `Pooling=false` .</span></span>

[!code-xml[Main](debugging-stored-procedures-cs/samples/sample1.xml)]

> [!NOTE]
> <span data-ttu-id="1111f-184">Po zakończeniu debugowania SQL Server za pośrednictwem aplikacji ASP.NET upewnij się, że pula połączeń zostanie przywrócona, usuwając ustawienie `Pooling` z parametrów połączenia (lub ustawiając je na `Pooling=true`).</span><span class="sxs-lookup"><span data-stu-id="1111f-184">Once you have finished debugging SQL Server through the ASP.NET application be sure to reinstate connection pooling by removing the `Pooling` setting from the connection string (or by setting it to `Pooling=true` ).</span></span>

<span data-ttu-id="1111f-185">W tym momencie aplikacja ASP.NET została skonfigurowana, aby umożliwić programowi Visual Studio debugowanie SQL Server obiektów bazy danych po wywołaniu za pomocą aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="1111f-185">At this point the ASP.NET application has been configured to allow Visual Studio to debug SQL Server database objects when invoked through the web application.</span></span> <span data-ttu-id="1111f-186">Wszystkie te, które pozostają teraz, to dodanie punktu przerwania do procedury składowanej i rozpoczęcie debugowania.</span><span class="sxs-lookup"><span data-stu-id="1111f-186">All that remains now is to add a breakpoint to a stored procedure and start debugging!</span></span>

## <a name="step-3-adding-a-breakpoint-and-debugging"></a><span data-ttu-id="1111f-187">Krok 3. Dodawanie punktu przerwania i debugowania</span><span class="sxs-lookup"><span data-stu-id="1111f-187">Step 3: Adding a Breakpoint and Debugging</span></span>

<span data-ttu-id="1111f-188">Otwórz `Products_SelectByCategoryID` procedury składowanej i ustaw punkt przerwania na początku instrukcji `SELECT`, klikając margines w odpowiednim miejscu lub umieszczając kursor na początku instrukcji `SELECT` i naciskając klawisz F9.</span><span class="sxs-lookup"><span data-stu-id="1111f-188">Open the `Products_SelectByCategoryID` stored procedure and set a breakpoint at the start of the `SELECT` statement by clicking in the margin at the appropriate place or by placing your cursor at the start of the `SELECT` statement and hitting F9.</span></span> <span data-ttu-id="1111f-189">Jak pokazano na rysunku 4, punkt przerwania pojawia się jako czerwony okrąg na marginesie.</span><span class="sxs-lookup"><span data-stu-id="1111f-189">As Figure 4 illustrates, the breakpoint appears as a red circle in the margin.</span></span>

<span data-ttu-id="1111f-190">[![ustawić punktu przerwania w procedurze składowanej Products_SelectByCategoryID](debugging-stored-procedures-cs/_static/image9.png)](debugging-stored-procedures-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="1111f-190">[![Set a Breakpoint in the Products_SelectByCategoryID Stored Procedure](debugging-stored-procedures-cs/_static/image9.png)](debugging-stored-procedures-cs/_static/image8.png)</span></span>

<span data-ttu-id="1111f-191">**Rysunek 4**. Ustawianie punktu przerwania w procedurze składowanej `Products_SelectByCategoryID` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](debugging-stored-procedures-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="1111f-191">**Figure 4**: Set a Breakpoint in the `Products_SelectByCategoryID` Stored Procedure ([Click to view full-size image](debugging-stored-procedures-cs/_static/image10.png))</span></span>

<span data-ttu-id="1111f-192">Aby obiekt bazy danych SQL był debugowany za pomocą aplikacji klienckiej, należy bezwzględnie skonfigurować bazę danych do obsługi debugowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1111f-192">In order for a SQL database object to be debugged through a client application, it is imperative that the database be configured to support application debugging.</span></span> <span data-ttu-id="1111f-193">Gdy po raz pierwszy ustawisz punkt przerwania, to ustawienie powinno być automatycznie włączane, ale ostrożne sprawdzanie podwójne.</span><span class="sxs-lookup"><span data-stu-id="1111f-193">When you first set a breakpoint, this setting should automatically be switched on, but it is prudent to double-check.</span></span> <span data-ttu-id="1111f-194">Kliknij prawym przyciskiem myszy węzeł `NORTHWND.MDF` w Eksplorator serwera.</span><span class="sxs-lookup"><span data-stu-id="1111f-194">Right-click on the `NORTHWND.MDF` node in the Server Explorer.</span></span> <span data-ttu-id="1111f-195">Menu kontekstowe powinno zawierać element menu wyboru o nazwie debugowanie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1111f-195">The context menu should include a checked menu item named Application Debugging .</span></span>

![Upewnij się, że opcja debugowania aplikacji jest włączona](debugging-stored-procedures-cs/_static/image11.png)

<span data-ttu-id="1111f-197">**Rysunek 5**. Upewnij się, że opcja debugowania aplikacji jest włączona</span><span class="sxs-lookup"><span data-stu-id="1111f-197">**Figure 5**: Ensure that the Application Debugging Option is Enabled</span></span>

<span data-ttu-id="1111f-198">Po włączeniu zestawu punktów przerwania i włączonej opcji debugowania aplikacji jesteśmy gotowi do debugowania procedury składowanej w przypadku wywołania z aplikacji ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1111f-198">With the breakpoint set and the Application Debugging option enabled, we are ready to debug the stored procedure when called from the ASP.NET application.</span></span> <span data-ttu-id="1111f-199">Uruchom Debuger, przechodząc do menu Debuguj i wybierając pozycję Rozpocznij debugowanie, naciskając klawisz F5 lub klikając zieloną ikonę odtwarzania na pasku narzędzi.</span><span class="sxs-lookup"><span data-stu-id="1111f-199">Start the debugger by going to the Debug menu and choosing Start Debugging, by hitting F5, or by clicking the green play icon in the Toolbar.</span></span> <span data-ttu-id="1111f-200">Spowoduje to uruchomienie debugera i uruchomienie witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="1111f-200">This will start the debugger and launch the website.</span></span>

<span data-ttu-id="1111f-201">Procedura składowana `Products_SelectByCategoryID` została utworzona w [istniejących procedurach składowanych dla tego samouczka z określonym zestawem danych s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="1111f-201">The `Products_SelectByCategoryID` stored procedure was created in the [Using Existing Stored Procedures for the Typed DataSet s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) tutorial.</span></span> <span data-ttu-id="1111f-202">Odpowiadająca jej Strona sieci Web (`~/AdvancedDAL/ExistingSprocs.aspx`) zawiera widok GridView, który wyświetla wyniki zwrócone przez tę procedurę składowaną.</span><span class="sxs-lookup"><span data-stu-id="1111f-202">Its corresponding web page (`~/AdvancedDAL/ExistingSprocs.aspx`) contains a GridView that displays the results returned by this stored procedure.</span></span> <span data-ttu-id="1111f-203">Odwiedź Tę stronę za pomocą przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="1111f-203">Visit this page through the browser.</span></span> <span data-ttu-id="1111f-204">Po osiągnięciu strony punkt przerwania w `Products_SelectByCategoryID` procedury składowanej zostanie trafiony i kontrolka zwróci do programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1111f-204">Upon reaching the page, the breakpoint in the `Products_SelectByCategoryID` stored procedure will be hit and control returned to Visual Studio.</span></span> <span data-ttu-id="1111f-205">Podobnie jak w kroku 1, można przejść przez instrukcje procedury składowanej i wyświetlić i zmodyfikować wartości parametrów.</span><span class="sxs-lookup"><span data-stu-id="1111f-205">Just like in Step 1, you can step through the stored procedure s statements and view and modify the parameter values.</span></span>

<span data-ttu-id="1111f-206">[![Strona ExistingSprocs. aspx zawiera początkowo napoje](debugging-stored-procedures-cs/_static/image13.png)](debugging-stored-procedures-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="1111f-206">[![The ExistingSprocs.aspx Page Initially Displays the Beverages](debugging-stored-procedures-cs/_static/image13.png)](debugging-stored-procedures-cs/_static/image12.png)</span></span>

<span data-ttu-id="1111f-207">**Ilustracja 6**. Strona `ExistingSprocs.aspx` początkowo wyświetla napoje (kliknij,[Aby wyświetlić obraz w pełnym rozmiarze](debugging-stored-procedures-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="1111f-207">**Figure 6**: The `ExistingSprocs.aspx` Page Initially Displays the Beverages ([Click to view full-size image](debugging-stored-procedures-cs/_static/image14.png))</span></span>

<span data-ttu-id="1111f-208">[![punkt przerwania procedury składowanej s został osiągnięty](debugging-stored-procedures-cs/_static/image16.png)](debugging-stored-procedures-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="1111f-208">[![The Stored Procedure s Breakpoint has been Reached](debugging-stored-procedures-cs/_static/image16.png)](debugging-stored-procedures-cs/_static/image15.png)</span></span>

<span data-ttu-id="1111f-209">**Rysunek 7**: punkt przerwania procedury składowanej s został osiągnięty ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](debugging-stored-procedures-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="1111f-209">**Figure 7**: The Stored Procedure s Breakpoint has been Reached ([Click to view full-size image](debugging-stored-procedures-cs/_static/image17.png))</span></span>

<span data-ttu-id="1111f-210">Jak okno wyrażeń kontrolnych na rysunku 7 pokazuje wartość parametru `@CategoryID` to 1.</span><span class="sxs-lookup"><span data-stu-id="1111f-210">As the Watch window in Figure 7 shows, the value of the `@CategoryID` parameter is 1.</span></span> <span data-ttu-id="1111f-211">Dzieje się tak, ponieważ na stronie `ExistingSprocs.aspx` początkowo są wyświetlane produkty w kategorii napoje, która ma `CategoryID` wartość 1.</span><span class="sxs-lookup"><span data-stu-id="1111f-211">This is because the `ExistingSprocs.aspx` page initially displays products in the beverages category, which has a `CategoryID` value of 1.</span></span> <span data-ttu-id="1111f-212">Wybierz inną kategorię z listy rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="1111f-212">Choose a different category from the drop-down list.</span></span> <span data-ttu-id="1111f-213">Spowoduje to wygenerowanie ogłaszania zwrotnego i ponowne uruchomienie `Products_SelectByCategoryID` procedury składowanej.</span><span class="sxs-lookup"><span data-stu-id="1111f-213">Doing so causes a postback and re-executes the `Products_SelectByCategoryID` stored procedure.</span></span> <span data-ttu-id="1111f-214">Punkt przerwania został ponownie trafiony, ale ten czas `@CategoryID` wartość parametru s odzwierciedla wybrany element listy rozwijanej `CategoryID`.</span><span class="sxs-lookup"><span data-stu-id="1111f-214">The breakpoint is hit again, but this time the `@CategoryID` parameter s value reflects the selected drop-down list item s `CategoryID`.</span></span>

<span data-ttu-id="1111f-215">[![wybrać inną kategorię z listy rozwijanej](debugging-stored-procedures-cs/_static/image19.png)](debugging-stored-procedures-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="1111f-215">[![Choose a Different Category from the Drop-Down List](debugging-stored-procedures-cs/_static/image19.png)](debugging-stored-procedures-cs/_static/image18.png)</span></span>

<span data-ttu-id="1111f-216">**Ilustracja 8**. Wybierz inną kategorię z listy rozwijanej ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](debugging-stored-procedures-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="1111f-216">**Figure 8**: Choose a Different Category from the Drop-Down List ([Click to view full-size image](debugging-stored-procedures-cs/_static/image20.png))</span></span>

<span data-ttu-id="1111f-217">[![parametr @CategoryID odzwierciedla kategorię wybraną ze strony sieci Web](debugging-stored-procedures-cs/_static/image22.png)](debugging-stored-procedures-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="1111f-217">[![The @CategoryID Parameter Reflects the Category Selected from the Web Page](debugging-stored-procedures-cs/_static/image22.png)](debugging-stored-procedures-cs/_static/image21.png)</span></span>

<span data-ttu-id="1111f-218">**Ilustracja 9**. parametr `@CategoryID` odzwierciedla kategorię wybraną ze strony sieci Web ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](debugging-stored-procedures-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="1111f-218">**Figure 9**: The `@CategoryID` Parameter Reflects the Category Selected from the Web Page ([Click to view full-size image](debugging-stored-procedures-cs/_static/image23.png))</span></span>

> [!NOTE]
> <span data-ttu-id="1111f-219">Jeśli punkt przerwania w `Products_SelectByCategoryID` procedurze składowanej nie zostanie trafiony podczas odwiedzania `ExistingSprocs.aspx` strony, upewnij się, że pole wyboru SQL Server zostało zaznaczone w sekcji debugera na stronie właściwości aplikacji ASP.NET, że pule połączeń zostały wyłączone i że opcja debugowania aplikacji bazy danych jest włączona.</span><span class="sxs-lookup"><span data-stu-id="1111f-219">If the breakpoint in the `Products_SelectByCategoryID` stored procedure is not hit when visiting the `ExistingSprocs.aspx` page, make sure that the SQL Server checkbox has been checked in the Debuggers section of the ASP.NET application s Properties Page, that connection pooling has been disabled, and that the database s Application Debugging option is enabled.</span></span> <span data-ttu-id="1111f-220">Jeśli nadal występują problemy, uruchom ponownie program Visual Studio i spróbuj ponownie.</span><span class="sxs-lookup"><span data-stu-id="1111f-220">If you re still having problems, restart Visual Studio and try again.</span></span>

## <a name="debugging-t-sql-database-objects-on-remote-instances"></a><span data-ttu-id="1111f-221">Debugowanie obiektów T-SQL Database w wystąpieniach zdalnych</span><span class="sxs-lookup"><span data-stu-id="1111f-221">Debugging T-SQL Database Objects on Remote Instances</span></span>

<span data-ttu-id="1111f-222">Debugowanie obiektów bazy danych za pomocą programu Visual Studio jest dość proste, gdy wystąpienie bazy danych SQL Server znajduje się na tym samym komputerze co program Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1111f-222">Debugging database objects through Visual Studio is fairly straightforward when the SQL Server database instance is on the same machine as Visual Studio.</span></span> <span data-ttu-id="1111f-223">Jeśli jednak SQL Server i program Visual Studio znajdują się na różnych maszynach, w celu poprawnego działania wszystkiego konieczna jest pewna konfiguracja.</span><span class="sxs-lookup"><span data-stu-id="1111f-223">However, if SQL Server and Visual Studio reside on different machines then some careful configuration is required to get everything working properly.</span></span> <span data-ttu-id="1111f-224">Istnieją dwa podstawowe zadania, do których prowadzimy:</span><span class="sxs-lookup"><span data-stu-id="1111f-224">There are two core tasks we are faced with:</span></span>

- <span data-ttu-id="1111f-225">Upewnij się, że logowanie używane do nawiązania połączenia z bazą danych za pośrednictwem ADO.NET należy do roli `sysadmin`.</span><span class="sxs-lookup"><span data-stu-id="1111f-225">Ensure that the login used to connect to the database via ADO.NET belongs to the `sysadmin` role.</span></span>
- <span data-ttu-id="1111f-226">Upewnij się, że konto użytkownika systemu Windows używane przez program Visual Studio na komputerze deweloperskim jest prawidłowym kontem logowania SQL Server, które należy do roli `sysadmin`.</span><span class="sxs-lookup"><span data-stu-id="1111f-226">Ensure that the Windows user account used by Visual Studio on the development machine is a valid SQL Server login account that belongs to the `sysadmin` role.</span></span>

<span data-ttu-id="1111f-227">Pierwszy krok jest stosunkowo nieskomplikowany.</span><span class="sxs-lookup"><span data-stu-id="1111f-227">The first step is relatively straightforward.</span></span> <span data-ttu-id="1111f-228">Najpierw Zidentyfikuj konto użytkownika używane do nawiązania połączenia z bazą danych z aplikacji ASP.NET, a następnie z SQL Server Management Studio Dodaj to konto logowania do roli `sysadmin`.</span><span class="sxs-lookup"><span data-stu-id="1111f-228">First, identify the user account used to connect to the database from the ASP.NET application and then, from SQL Server Management Studio, add that login account to the `sysadmin` role.</span></span>

<span data-ttu-id="1111f-229">Drugie zadanie wymaga, aby konto użytkownika systemu Windows używane do debugowania aplikacji było prawidłową nazwą logowania w zdalnej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="1111f-229">The second task requires that the Windows user account you use to debug the application be a valid login on the remote database.</span></span> <span data-ttu-id="1111f-230">Jednak prawdopodobnie konto systemu Windows, które zostało zalogowane na stacji roboczej, nie jest prawidłową nazwą logowania w SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1111f-230">However, chances are the Windows account you logged on to your workstation with is not a valid login on SQL Server.</span></span> <span data-ttu-id="1111f-231">Zamiast dodawać określone konto logowania do SQL Server, lepszym wyborem będzie wyznaczenie konta użytkownika systemu Windows jako konta debugowania SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1111f-231">Rather than adding your particular login account to SQL Server, a better choice would be to designate some Windows user account as the SQL Server debugging account.</span></span> <span data-ttu-id="1111f-232">Następnie w celu debugowania obiektów bazy danych zdalnego wystąpienia SQL Server można uruchomić program Visual Studio przy użyciu poświadczeń konta logowania systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="1111f-232">Then, to debug the database objects of a remote SQL Server instance, you would run Visual Studio using that Windows login account s credentials.</span></span>

<span data-ttu-id="1111f-233">Przykład powinien ułatwić wyjaśnienie rzeczy.</span><span class="sxs-lookup"><span data-stu-id="1111f-233">An example should help clarify things.</span></span> <span data-ttu-id="1111f-234">Załóżmy, że istnieje konto systemu Windows o nazwie `SQLDebug` w domenie systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="1111f-234">Imagine that there is a Windows account named `SQLDebug` within the Windows domain.</span></span> <span data-ttu-id="1111f-235">To konto należy dodać do zdalnego wystąpienia SQL Server jako prawidłowe logowanie i jako element członkowski roli `sysadmin`.</span><span class="sxs-lookup"><span data-stu-id="1111f-235">This account would need to be added to the remote SQL Server instance as a valid login and as a member of the `sysadmin` role.</span></span> <span data-ttu-id="1111f-236">Następnie, aby debugować wystąpienie SQL Server zdalnego z programu Visual Studio, musimy uruchomić program Visual Studio jako użytkownik `SQLDebug`.</span><span class="sxs-lookup"><span data-stu-id="1111f-236">Then, to debug the remote SQL Server instance from Visual Studio, we would need to run Visual Studio as the `SQLDebug` user.</span></span> <span data-ttu-id="1111f-237">Można to zrobić, logując się z naszej stacji roboczej, logując się jako `SQLDebug`, a następnie uruchamiając program Visual Studio, ale prostszym podejściem jest zalogowanie się do naszej stacji roboczej przy użyciu własnych poświadczeń, a następnie użycie `runas.exe` do uruchomienia programu Visual Studio jako użytkownik `SQLDebug`.</span><span class="sxs-lookup"><span data-stu-id="1111f-237">This could be done by logging out of our workstation, logging back in as `SQLDebug`, and then launching Visual Studio, but a simpler approach would be to login to our workstation using our own credentials and then use `runas.exe` to launch Visual Studio as the `SQLDebug` user.</span></span> <span data-ttu-id="1111f-238">`runas.exe` umożliwia wykonywanie konkretnej aplikacji w ramach Guise innego konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1111f-238">`runas.exe` allows a particular application to be executed under the guise of a different user account.</span></span> <span data-ttu-id="1111f-239">Aby uruchomić program Visual Studio jako `SQLDebug`, w wierszu polecenia można wprowadzić następującą instrukcję:</span><span class="sxs-lookup"><span data-stu-id="1111f-239">To launch Visual Studio as `SQLDebug`, you could enter the following statement at the command line:</span></span>

[!code-console[Main](debugging-stored-procedures-cs/samples/sample2.cmd)]

<span data-ttu-id="1111f-240">Aby zapoznać się z bardziej szczegółowym wyjaśnieniem tego procesu, zobacz [William R. Vaughn](http://betav.com/BLOG/billva/) s *hitchhiker s w programie Visual Studio i SQL Server, siódmej wersji* , jak również [: Ustawianie uprawnień SQL Server dla debugowania](https://msdn.microsoft.com/library/w1bhybwz(VS.80).aspx).</span><span class="sxs-lookup"><span data-stu-id="1111f-240">For a more detailed explanation on this process, see [William R. Vaughn](http://betav.com/BLOG/billva/) s *Hitchhiker s Guide to Visual Studio and SQL Server, Seventh Edition* as well as [How To: Set SQL Server Permissions for Debugging](https://msdn.microsoft.com/library/w1bhybwz(VS.80).aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="1111f-241">Jeśli na komputerze deweloperskim jest uruchomiony system Windows XP z dodatkiem Service Pack 2, należy skonfigurować zaporę połączenia internetowego, aby zezwalała na zdalne debugowanie.</span><span class="sxs-lookup"><span data-stu-id="1111f-241">If your development machine is running Windows XP Service Pack 2 you will need to configure the Internet Connection Firewall to allow remote debugging.</span></span> <span data-ttu-id="1111f-242">Artykuł [How to: Enable SQL Server 2005 Debug](https://msdn.microsoft.com/library/s0fk6z6e(VS.80).aspx) uwagi, że dotyczy to dwóch kroków: (a) na komputerze hosta programu Visual Studio, należy dodać `Devenv.exe` do listy wyjątków i otworzyć port TCP 135; i (b) na komputerze zdalnym (SQL), należy otworzyć port TCP 135 i dodać `sqlservr.exe` do listy wyjątków.</span><span class="sxs-lookup"><span data-stu-id="1111f-242">[The How To: Enable SQL Server 2005 Debugging](https://msdn.microsoft.com/library/s0fk6z6e(VS.80).aspx) article notes that this involves two steps: (a) On the Visual Studio host machine, you must add `Devenv.exe` to the Exceptions list and open the TCP 135 port; and (b) On the remote (SQL) machine, you must open the TCP 135 port and add `sqlservr.exe` to the Exceptions list.</span></span> <span data-ttu-id="1111f-243">Jeśli zasady domeny wymagają komunikacji sieciowej za pomocą protokołu IPSec, należy otworzyć porty UDP 4500 i UDP 500.</span><span class="sxs-lookup"><span data-stu-id="1111f-243">If your domain policy requires network communication to be done through IPSec, you must open the UDP 4500 and UDP 500 ports.</span></span>

## <a name="summary"></a><span data-ttu-id="1111f-244">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="1111f-244">Summary</span></span>

<span data-ttu-id="1111f-245">Oprócz zapewniania obsługi debugowania kodu aplikacji .NET program Visual Studio udostępnia również różne opcje debugowania dla SQL Server 2005.</span><span class="sxs-lookup"><span data-stu-id="1111f-245">In addition to providing debugging support for .NET application code, Visual Studio also provides a variety of debugging options for SQL Server 2005.</span></span> <span data-ttu-id="1111f-246">W tym samouczku przedstawiono dwie z tych opcji: bezpośrednie debugowanie bazy danych i debugowanie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1111f-246">In this tutorial we looked at two of those options: Direct Database Debugging and application debugging.</span></span> <span data-ttu-id="1111f-247">Aby bezpośrednio debugować obiekt bazy danych T-SQL, zlokalizuj obiekt za pomocą Eksplorator serwera a następnie kliknij go prawym przyciskiem myszy i wybierz polecenie Wkrocz do.</span><span class="sxs-lookup"><span data-stu-id="1111f-247">To directly debug a T-SQL database object, locate the object through the Server Explorer then right-click on it and choose Step Into.</span></span> <span data-ttu-id="1111f-248">Spowoduje to uruchomienie debugera i zatrzymanie pierwszej instrukcji w obiekcie bazy danych, w tym momencie można wykonać krokowo przez instrukcje obiektu i wyświetlić i zmodyfikować wartości parametrów.</span><span class="sxs-lookup"><span data-stu-id="1111f-248">This starts the debugger and halts on the first statement in the database object, at which point you can step through the object s statements and view and modify parameter values.</span></span> <span data-ttu-id="1111f-249">W kroku 1 Ta metoda została użyta, aby przejść do procedury składowanej `Products_SelectByCategoryID`.</span><span class="sxs-lookup"><span data-stu-id="1111f-249">In Step 1 we used this approach to step into the `Products_SelectByCategoryID` stored procedure.</span></span>

<span data-ttu-id="1111f-250">Debugowanie aplikacji umożliwia ustawianie punktów przerwania bezpośrednio w obiektach bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1111f-250">Application debugging allows breakpoints to be set directly within the database objects.</span></span> <span data-ttu-id="1111f-251">Gdy obiekt bazy danych z punktami przerwania jest wywoływany z aplikacji klienckiej (takiej jak aplikacja sieci Web ASP.NET), program zostaje zatrzymany, gdy debuger przejęcia.</span><span class="sxs-lookup"><span data-stu-id="1111f-251">When a database object with breakpoints is invoked from a client application (such as an ASP.NET web application), the program halts as the debugger takes over.</span></span> <span data-ttu-id="1111f-252">Debugowanie aplikacji jest przydatne, ponieważ bardziej jasno pokazuje działanie aplikacji, która powoduje wywoływanie określonego obiektu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1111f-252">Application debugging is useful because it more clearly shows what application action causes a particular database object to be invoked.</span></span> <span data-ttu-id="1111f-253">Jednak wymaga to nieco większej konfiguracji i instalacji niż bezpośrednie debugowanie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1111f-253">However, it requires a bit more configuration and setup than Direct Database Debugging.</span></span>

<span data-ttu-id="1111f-254">Obiekty bazy danych mogą być również debugowane za poorednictwem projektów SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1111f-254">Database objects can also be debugged through SQL Server Projects.</span></span> <span data-ttu-id="1111f-255">Będziemy przeglądać projekty SQL Server i sposoby ich używania do tworzenia i debugowania obiektów zarządzanych baz danych w następnym samouczku.</span><span class="sxs-lookup"><span data-stu-id="1111f-255">We will look at using SQL Server Projects and how to use them to create and debug managed database objects in the next tutorial.</span></span>

<span data-ttu-id="1111f-256">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="1111f-256">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="1111f-257">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="1111f-257">About the Author</span></span>

<span data-ttu-id="1111f-258">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor siedmiu grup ASP/ASP. NET Books i założyciel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="1111f-258">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="1111f-259">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="1111f-259">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="1111f-260">Jego Najnowsza książka to [*Sams ASP.NET 2,0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="1111f-260">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="1111f-261">Można go osiągnąć w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="1111f-261">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="1111f-262">lub za pośrednictwem swojego blogu, który można znaleźć w [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="1111f-262">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="1111f-263">[Poprzednie](protecting-connection-strings-and-other-configuration-information-cs.md)
> [dalej](creating-stored-procedures-and-user-defined-functions-with-managed-code-cs.md)</span><span class="sxs-lookup"><span data-stu-id="1111f-263">[Previous](protecting-connection-strings-and-other-configuration-information-cs.md)
[Next](creating-stored-procedures-and-user-defined-functions-with-managed-code-cs.md)</span></span>

---
uid: web-forms/overview/data-access/advanced-data-access-scenarios/working-with-computed-columns-cs
title: Praca z kolumnami obliczanymi (C#) | Microsoft Docs
author: rick-anderson
description: Podczas tworzenia tabeli bazy danych Microsoft SQL Server umożliwia zdefiniowanie kolumny obliczanej, której wartość jest obliczana na podstawie wyrażenia, które zwykle referen...
ms.author: riande
ms.date: 08/03/2007
ms.assetid: 57459065-ed7c-4dfe-ac9c-54c093abc261
msc.legacyurl: /web-forms/overview/data-access/advanced-data-access-scenarios/working-with-computed-columns-cs
msc.type: authoredcontent
ms.openlocfilehash: ad6a96f2721510c2478f707c8eed018ae797f27a
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/28/2019
ms.locfileid: "74603474"
---
# <a name="working-with-computed-columns-c"></a><span data-ttu-id="79e97-103">Praca z kolumnami obliczanymi (C#)</span><span class="sxs-lookup"><span data-stu-id="79e97-103">Working with Computed Columns (C#)</span></span>

<span data-ttu-id="79e97-104">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="79e97-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="79e97-105">[Pobierz kod](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_71_CS.zip) lub [Pobierz plik PDF](working-with-computed-columns-cs/_static/datatutorial71cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="79e97-105">[Download Code](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_71_CS.zip) or [Download PDF](working-with-computed-columns-cs/_static/datatutorial71cs1.pdf)</span></span>

> <span data-ttu-id="79e97-106">Podczas tworzenia tabeli bazy danych Microsoft SQL Server umożliwia zdefiniowanie kolumny obliczanej, której wartość jest obliczana na podstawie wyrażenia, które zwykle odwołuje się do innych wartości w tym samym rekordzie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="79e97-106">When creating a database table, Microsoft SQL Server allows you to define a computed column whose value is calculated from an expression that usually references other values in the same database record.</span></span> <span data-ttu-id="79e97-107">Takie wartości są tylko do odczytu w bazie danych, co wymaga specjalnych zagadnień podczas pracy z TableAdapters.</span><span class="sxs-lookup"><span data-stu-id="79e97-107">Such values are read-only at the database, which requires special considerations when working with TableAdapters.</span></span> <span data-ttu-id="79e97-108">W tym samouczku dowiesz się, jak sprostać wyzwaniom związanym z kolumnami obliczanymi.</span><span class="sxs-lookup"><span data-stu-id="79e97-108">In this tutorial we learn how to meet the challenges posed by computed columns.</span></span>

## <a name="introduction"></a><span data-ttu-id="79e97-109">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="79e97-109">Introduction</span></span>

<span data-ttu-id="79e97-110">Microsoft SQL Server umożliwia używanie *[kolumn obliczanych](https://msdn.microsoft.com/library/ms191250.aspx)* , które są kolumnami, których wartości są obliczane na podstawie wyrażenia, które zwykle odwołuje się do wartości z innych kolumn w tej samej tabeli.</span><span class="sxs-lookup"><span data-stu-id="79e97-110">Microsoft SQL Server allows for *[computed columns](https://msdn.microsoft.com/library/ms191250.aspx)*, which are columns whose values are calculated from an expression that usually references the values from other columns in the same table.</span></span> <span data-ttu-id="79e97-111">Przykładowo model danych śledzenia czasu może mieć tabelę o nazwie `ServiceLog` z kolumnami, w tym `ServicePerformed`, `EmployeeID`, `Rate`i `Duration`, między innymi.</span><span class="sxs-lookup"><span data-stu-id="79e97-111">As an example, a time tracking data model might have a table named `ServiceLog` with columns including `ServicePerformed`, `EmployeeID`, `Rate`, and `Duration`, among others.</span></span> <span data-ttu-id="79e97-112">Chociaż kwota należna za każdy element usługi (jest to stawka pomnożona przez czas trwania), może być obliczana za pomocą strony sieci Web lub innego interfejsu programistycznego, ale może być przydatna do uwzględnienia kolumny w tabeli `ServiceLog` o nazwie `AmountDue`, która zgłosiła te informacje.</span><span class="sxs-lookup"><span data-stu-id="79e97-112">While the amount due per service item (being the rate multiplied by the duration) could be calculated through a web page or other programmatic interface, it might be handy to include a column in the `ServiceLog` table named `AmountDue` that reported this information.</span></span> <span data-ttu-id="79e97-113">Tę kolumnę można utworzyć jako normalną kolumnę, ale należy ją zaktualizować w dowolnym momencie, gdy wartości kolumn `Rate` lub `Duration` zostaną zmienione.</span><span class="sxs-lookup"><span data-stu-id="79e97-113">This column could be created as a normal column, but it would need to be updated anytime the `Rate` or `Duration` column values changed.</span></span> <span data-ttu-id="79e97-114">Lepszym rozwiązaniem byłoby, aby kolumna `AmountDue` była kolumną obliczaną przy użyciu wyrażenia `Rate * Duration`.</span><span class="sxs-lookup"><span data-stu-id="79e97-114">A better approach would be to make the `AmountDue` column a computed column using the expression `Rate * Duration`.</span></span> <span data-ttu-id="79e97-115">Wykonanie tej operacji spowodowałoby SQL Server automatyczne obliczenie `AmountDue` wartości kolumny za każdym razem, gdy odwołuje się do zapytania.</span><span class="sxs-lookup"><span data-stu-id="79e97-115">Doing so would cause SQL Server to automatically calculate the `AmountDue` column value whenever it was referenced in a query.</span></span>

<span data-ttu-id="79e97-116">Ponieważ obliczona wartość kolumny s jest określana na podstawie wyrażenia, takie kolumny są tylko do odczytu i w związku z tym nie mogą mieć przypisanych do nich wartości w instrukcji `INSERT` lub `UPDATE`.</span><span class="sxs-lookup"><span data-stu-id="79e97-116">Since a computed column s value is determined by an expression, such columns are read-only and therefore cannot have values assigned to them in `INSERT` or `UPDATE` statements.</span></span> <span data-ttu-id="79e97-117">Jednak gdy kolumny obliczane są częścią zapytania głównego dla TableAdapter, który używa instrukcji SQL ad hoc, są one automatycznie uwzględniane w `INSERT` automatycznie generowanych i `UPDATE`.</span><span class="sxs-lookup"><span data-stu-id="79e97-117">However, when computed columns are part of the main query for a TableAdapter that uses ad-hoc SQL statements, they are automatically included in the auto-generated `INSERT` and `UPDATE` statements.</span></span> <span data-ttu-id="79e97-118">W związku z tym TableAdapter s `INSERT` i `UPDATE` zapytania oraz `InsertCommand` i `UpdateCommand` właściwości muszą zostać zaktualizowane, aby usunąć odwołania do dowolnych kolumn obliczanych.</span><span class="sxs-lookup"><span data-stu-id="79e97-118">Consequently, the TableAdapter s `INSERT` and `UPDATE` queries and `InsertCommand` and `UpdateCommand` properties must be updated to remove references to any computed columns.</span></span>

<span data-ttu-id="79e97-119">Jednym z wyzwań używania kolumn obliczanych z TableAdapter, które używają ad hoc instrukcji SQL, jest to, że TableAdapter s `INSERT` i `UPDATE` zapytania są automatycznie generowane ponownie za każdym razem, gdy Kreator konfiguracji TableAdapter zostanie ukończony.</span><span class="sxs-lookup"><span data-stu-id="79e97-119">One challenge of using computed columns with a TableAdapter that uses ad-hoc SQL statements is that the TableAdapter s `INSERT` and `UPDATE` queries are automatically regenerated any time the TableAdapter Configuration wizard is completed.</span></span> <span data-ttu-id="79e97-120">W związku z tym kolumny obliczane ręcznie usunięte z `INSERT` i `UPDATE` zapytania zostaną wyświetlone ponownie po ponownym uruchomieniu kreatora.</span><span class="sxs-lookup"><span data-stu-id="79e97-120">Therefore, the computed columns manually removed from the `INSERT` and `UPDATE` queries will reappear if the wizard is re-run.</span></span> <span data-ttu-id="79e97-121">Chociaż TableAdapters korzystające z procedur składowanych nie poniosły z tego brittleness, mają własne osobliwości, które będziemy zająć w kroku 3.</span><span class="sxs-lookup"><span data-stu-id="79e97-121">Although TableAdapters that use stored procedures don t suffer from this brittleness, they do have their own quirks that we will address in Step 3.</span></span>

<span data-ttu-id="79e97-122">W tym samouczku dodamy kolumnę obliczaną do tabeli `Suppliers` w bazie danych Northwind, a następnie utworzysz odpowiednie TableAdapter do pracy z tą tabelą i jej kolumną obliczaną.</span><span class="sxs-lookup"><span data-stu-id="79e97-122">In this tutorial we will add a computed column to the `Suppliers` table in the Northwind database and then create a corresponding TableAdapter to work with this table and its computed column.</span></span> <span data-ttu-id="79e97-123">Nasze TableAdapter będą używać procedur składowanych zamiast instrukcji SQL ad hoc, dzięki czemu nasze dostosowania nie zostaną utracone po użyciu Kreatora konfiguracji TableAdapter.</span><span class="sxs-lookup"><span data-stu-id="79e97-123">We will have our TableAdapter use stored procedures instead of ad-hoc SQL statements so that our customizations aren't lost when the TableAdapter Configuration wizard is used.</span></span>

<span data-ttu-id="79e97-124">Zacznij korzystać z aplikacji.</span><span class="sxs-lookup"><span data-stu-id="79e97-124">Let s get started!</span></span>

## <a name="step-1-adding-a-computed-column-to-thesupplierstable"></a><span data-ttu-id="79e97-125">Krok 1. Dodawanie kolumny obliczanej do tabeli`Suppliers`</span><span class="sxs-lookup"><span data-stu-id="79e97-125">Step 1: Adding a Computed Column to the`Suppliers`Table</span></span>

<span data-ttu-id="79e97-126">Baza danych Northwind nie ma żadnych kolumn obliczanych, więc konieczne będzie dodanie jednego wypróbujemy.</span><span class="sxs-lookup"><span data-stu-id="79e97-126">The Northwind database does not have any computed columns so we will need to add one ourselves.</span></span> <span data-ttu-id="79e97-127">W tym samouczku Dodaj kolumnę obliczaną do tabeli `Suppliers` o nazwie `FullContactName`, która zwraca nazwę kontaktu, tytuł i firmę, dla których działają, w następującym formacie: `ContactName` (`ContactTitle`, `CompanyName`).</span><span class="sxs-lookup"><span data-stu-id="79e97-127">For this tutorial let s add a computed column to the `Suppliers` table called `FullContactName` that returns the contact s name, title, and the company they work for in the following format: `ContactName` (`ContactTitle`, `CompanyName`).</span></span> <span data-ttu-id="79e97-128">Ta kolumna obliczana może być używana w raportach w przypadku wyświetlania informacji o dostawcach.</span><span class="sxs-lookup"><span data-stu-id="79e97-128">This computed column might be used in reports when displaying information about suppliers.</span></span>

<span data-ttu-id="79e97-129">Rozpocznij od otworzenia definicji tabeli `Suppliers`, klikając prawym przyciskiem myszy tabelę `Suppliers` w Eksplorator serwera i wybierając polecenie Otwórz definicję tabeli z menu kontekstowego.</span><span class="sxs-lookup"><span data-stu-id="79e97-129">Start by opening the `Suppliers` table definition by right-clicking on the `Suppliers` table in the Server Explorer and choosing Open Table Definition from the context-menu.</span></span> <span data-ttu-id="79e97-130">Spowoduje to wyświetlenie kolumn tabeli i ich właściwości, takich jak typ danych, niezależnie od tego, czy zezwalają one na `NULL` s i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="79e97-130">This will display the columns of the table and their properties, such as their data type, whether they allow `NULL` s, and so forth.</span></span> <span data-ttu-id="79e97-131">Aby dodać kolumnę obliczaną, Zacznij od wpisania nazwy kolumny do definicji tabeli.</span><span class="sxs-lookup"><span data-stu-id="79e97-131">To add a computed column, start by typing in the name of the column into the table definition.</span></span> <span data-ttu-id="79e97-132">Następnie wprowadź wyrażenie do pola tekstowego (Formula) w sekcji Specyfikacja kolumn obliczanych w kolumnie okno Właściwości (patrz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="79e97-132">Next, enter its expression into the (Formula) textbox under the Computed Column Specification section in the Column Properties window (see Figure 1).</span></span> <span data-ttu-id="79e97-133">Nadaj nazwę kolumnie obliczanej `FullContactName` i użyj następującego wyrażenia:</span><span class="sxs-lookup"><span data-stu-id="79e97-133">Name the computed column `FullContactName` and use the following expression:</span></span>

[!code-sql[Main](working-with-computed-columns-cs/samples/sample1.sql)]

<span data-ttu-id="79e97-134">Należy zauważyć, że ciągi mogą być połączone w języku SQL przy użyciu operatora `+`.</span><span class="sxs-lookup"><span data-stu-id="79e97-134">Note that strings can be concatenated in SQL using the `+` operator.</span></span> <span data-ttu-id="79e97-135">Instrukcji `CASE` można użyć jak warunku w tradycyjnym języku programowania.</span><span class="sxs-lookup"><span data-stu-id="79e97-135">The `CASE` statement can be used like a conditional in a traditional programming language.</span></span> <span data-ttu-id="79e97-136">W powyższym wyrażeniu instrukcja `CASE` może zostać odczytana jako: Jeśli `ContactTitle` nie `NULL` następnie dane wyjściowe `ContactTitle` wartości połączone z przecinkiem, w przeciwnym razie nic nie emituj.</span><span class="sxs-lookup"><span data-stu-id="79e97-136">In the above expression the `CASE` statement can be read as: If `ContactTitle` is not `NULL` then output the `ContactTitle` value concatenated with a comma, otherwise emit nothing.</span></span> <span data-ttu-id="79e97-137">Aby uzyskać więcej informacji na temat użyteczności instrukcji `CASE`, zobacz [moc instrukcji SQL `CASE`](http://www.4guysfromrolla.com/webtech/102704-1.shtml).</span><span class="sxs-lookup"><span data-stu-id="79e97-137">For more on the usefulness of the `CASE` statement, see [The Power of SQL `CASE` Statements](http://www.4guysfromrolla.com/webtech/102704-1.shtml).</span></span>

> [!NOTE]
> <span data-ttu-id="79e97-138">Zamiast korzystać z instrukcji `CASE` w tym miejscu, możemy użyć również `ISNULL(ContactTitle, '')`.</span><span class="sxs-lookup"><span data-stu-id="79e97-138">Instead of using a `CASE` statement here, we could have alternatively used `ISNULL(ContactTitle, '')`.</span></span> <span data-ttu-id="79e97-139">[`ISNULL(checkExpression, replacementValue)`](https://msdn.microsoft.com/library/ms184325.aspx) zwraca *checkExpression* , jeśli nie ma wartości null, w przeciwnym razie zwraca *replacementValue*.</span><span class="sxs-lookup"><span data-stu-id="79e97-139">[`ISNULL(checkExpression, replacementValue)`](https://msdn.microsoft.com/library/ms184325.aspx) returns *checkExpression* if it is non-NULL, otherwise it returns *replacementValue*.</span></span> <span data-ttu-id="79e97-140">Mimo że `ISNULL` lub `CASE` będą działać w tym wystąpieniu, istnieje więcej intricateych scenariuszy, w których elastyczność instrukcji `CASE` nie można dopasować do `ISNULL`.</span><span class="sxs-lookup"><span data-stu-id="79e97-140">While either `ISNULL` or `CASE` will work in this instance, there are more intricate scenarios where the flexibility of the `CASE` statement cannot be matched by `ISNULL`.</span></span>

<span data-ttu-id="79e97-141">Po dodaniu tej kolumny obliczanej ekran powinien wyglądać jak zrzut ekranu na rysunku 1.</span><span class="sxs-lookup"><span data-stu-id="79e97-141">After adding this computed column your screen should look like the screen shot in Figure 1.</span></span>

<span data-ttu-id="79e97-142">[![dodać kolumnę obliczaną o nazwie FullContactName do tabeli dostawcy](working-with-computed-columns-cs/_static/image2.png)](working-with-computed-columns-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="79e97-142">[![Add a Computed Column Named FullContactName to the Suppliers Table](working-with-computed-columns-cs/_static/image2.png)](working-with-computed-columns-cs/_static/image1.png)</span></span>

<span data-ttu-id="79e97-143">**Rysunek 1**. Dodawanie kolumny obliczanej o nazwie `FullContactName` do tabeli `Suppliers` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](working-with-computed-columns-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="79e97-143">**Figure 1**: Add a Computed Column Named `FullContactName` to the `Suppliers` Table ([Click to view full-size image](working-with-computed-columns-cs/_static/image3.png))</span></span>

<span data-ttu-id="79e97-144">Po nadaniu nazwy kolumnie obliczanej i wprowadzeniu jej wyrażenia Zapisz zmiany w tabeli, klikając ikonę Zapisz na pasku narzędzi, naciskając klawisze CTRL + S lub wybierając polecenie Zapisz `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="79e97-144">After naming the computed column and entering its expression, save the changes to the table by clicking the Save icon in the toolbar, by hitting Ctrl+S, or by going to the File menu and choosing Save `Suppliers`.</span></span>

<span data-ttu-id="79e97-145">Zapisanie tabeli powinno spowodować odświeżenie Eksplorator serwera, łącznie z dodaną kolumną z listy kolumn `Suppliers` tabeli s.</span><span class="sxs-lookup"><span data-stu-id="79e97-145">Saving the table should refresh the Server Explorer, including the just-added column in the `Suppliers` table s column list.</span></span> <span data-ttu-id="79e97-146">Ponadto wyrażenie wprowadzone do pola tekstowego (Formula) automatycznie dostosowuje się do równoważnego wyrażenia, które dzieli zbędne odstępy, otacza nazwy kolumn nawiasami (`[]`) i zawiera nawiasy, aby dokładniej pokazać kolejność operacji:</span><span class="sxs-lookup"><span data-stu-id="79e97-146">Furthermore, the expression entered into the (Formula) textbox will automatically adjust to an equivalent expression that strips unnecessary whitespace, surrounds column names with brackets (`[]`), and includes parentheses to more explicitly show the order of operations:</span></span>

[!code-sql[Main](working-with-computed-columns-cs/samples/sample2.sql)]

<span data-ttu-id="79e97-147">Aby uzyskać więcej informacji na temat kolumn obliczanych w Microsoft SQL Server, zapoznaj się z [dokumentacją techniczną](https://msdn.microsoft.com/library/ms191250.aspx).</span><span class="sxs-lookup"><span data-stu-id="79e97-147">For more information on computed columns in Microsoft SQL Server, refer to the [technical documentation](https://msdn.microsoft.com/library/ms191250.aspx).</span></span> <span data-ttu-id="79e97-148">Zapoznaj się również z [tematem: Określanie kolumn obliczanych](https://msdn.microsoft.com/library/ms188300.aspx) dla przewodnika krok po kroku tworzenia kolumn obliczanych.</span><span class="sxs-lookup"><span data-stu-id="79e97-148">Also check out the [How to: Specify Computed Columns](https://msdn.microsoft.com/library/ms188300.aspx) for a step-by-step walkthrough of creating computed columns.</span></span>

> [!NOTE]
> <span data-ttu-id="79e97-149">Domyślnie kolumny obliczane nie są fizycznie przechowywane w tabeli, ale zamiast tego są ponownie obliczane za każdym razem, gdy odwołują się do zapytania.</span><span class="sxs-lookup"><span data-stu-id="79e97-149">By default, computed columns are not physically stored in the table but are instead recalculated each time they are referenced in a query.</span></span> <span data-ttu-id="79e97-150">Sprawdzając, czy jest to utrwalone pole wyboru, można wydać SQL Server, aby fizycznie przechowywać kolumnę obliczaną w tabeli.</span><span class="sxs-lookup"><span data-stu-id="79e97-150">By checking the Is Persisted checkbox, however, you can instruct SQL Server to physically store the computed column in the table.</span></span> <span data-ttu-id="79e97-151">Dzięki temu można utworzyć indeks w kolumnie obliczanej, co może zwiększyć wydajność zapytań, które używają wartości kolumny obliczanej w ich klauzulach `WHERE`.</span><span class="sxs-lookup"><span data-stu-id="79e97-151">Doing so allows an index to be created on the computed column, which can improve the performance of queries that use the computed column value in their `WHERE` clauses.</span></span> <span data-ttu-id="79e97-152">Aby uzyskać więcej informacji, zobacz [Tworzenie indeksów w kolumnach obliczanych](https://msdn.microsoft.com/library/ms189292.aspx) .</span><span class="sxs-lookup"><span data-stu-id="79e97-152">See [Creating Indexes on Computed Columns](https://msdn.microsoft.com/library/ms189292.aspx) for more information.</span></span>

## <a name="step-2-viewing-the-computed-column-s-values"></a><span data-ttu-id="79e97-153">Krok 2. Wyświetlanie wartości kolumn obliczanych</span><span class="sxs-lookup"><span data-stu-id="79e97-153">Step 2: Viewing the Computed Column s Values</span></span>

<span data-ttu-id="79e97-154">Zanim zaczniemy pracę nad warstwą dostępu do danych, poświęć chwilę, aby wyświetlić wartości `FullContactName`.</span><span class="sxs-lookup"><span data-stu-id="79e97-154">Before we start work on the Data Access Layer, let s take a minute to view the `FullContactName` values.</span></span> <span data-ttu-id="79e97-155">W Eksplorator serwera kliknij prawym przyciskiem myszy nazwę tabeli `Suppliers` i wybierz polecenie nowe zapytanie z menu kontekstowego.</span><span class="sxs-lookup"><span data-stu-id="79e97-155">From the Server Explorer, right-click on the `Suppliers` table name and choose New Query from the context-menu.</span></span> <span data-ttu-id="79e97-156">Spowoduje to wyświetlenie okna zapytania z prośbą o wybranie tabel do uwzględnienia w zapytaniu.</span><span class="sxs-lookup"><span data-stu-id="79e97-156">This will bring up a Query window that prompts us to choose what tables to include in the query.</span></span> <span data-ttu-id="79e97-157">Dodaj tabelę `Suppliers` i kliknij przycisk Zamknij.</span><span class="sxs-lookup"><span data-stu-id="79e97-157">Add the `Suppliers` table and click Close.</span></span> <span data-ttu-id="79e97-158">Następnie sprawdź kolumny `CompanyName`, `ContactName`, `ContactTitle`i `FullContactName` z tabeli dostawcy.</span><span class="sxs-lookup"><span data-stu-id="79e97-158">Next, check the `CompanyName`, `ContactName`, `ContactTitle`, and `FullContactName` columns from the Suppliers table.</span></span> <span data-ttu-id="79e97-159">Na koniec kliknij ikonę czerwony wykrzyknika na pasku narzędzi, aby wykonać zapytanie i wyświetlić wyniki.</span><span class="sxs-lookup"><span data-stu-id="79e97-159">Finally, click the red exclamation point icon in the Toolbar to execute the query and view the results.</span></span>

<span data-ttu-id="79e97-160">Jak pokazano na rysunku 2, wyniki zawierają `FullContactName`, które wyświetlają kolumny `CompanyName`, `ContactName`i `ContactTitle` przy użyciu formatu ldquo;`ContactName` (`ContactTitle`, `CompanyName`).</span><span class="sxs-lookup"><span data-stu-id="79e97-160">As Figure 2 shows, the results include `FullContactName`, which lists the `CompanyName`, `ContactName`, and `ContactTitle` columns using the format ldquo;`ContactName` (`ContactTitle`, `CompanyName`) .</span></span>

<span data-ttu-id="79e97-161">[![FullContactName używa formatu ContactName (ContactTitle, NazwaFirmy)](working-with-computed-columns-cs/_static/image5.png)](working-with-computed-columns-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="79e97-161">[![The FullContactName Uses the Format ContactName (ContactTitle, CompanyName)](working-with-computed-columns-cs/_static/image5.png)](working-with-computed-columns-cs/_static/image4.png)</span></span>

<span data-ttu-id="79e97-162">**Rysunek 2**. `FullContactName` używa formatu `ContactName` (`ContactTitle`, `CompanyName`) (kliknij,[Aby wyświetlić obraz o pełnym rozmiarze](working-with-computed-columns-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="79e97-162">**Figure 2**: The `FullContactName` Uses the Format `ContactName` (`ContactTitle`, `CompanyName`) ([Click to view full-size image](working-with-computed-columns-cs/_static/image6.png))</span></span>

## <a name="step-3-adding-thesupplierstableadapterto-the-data-access-layer"></a><span data-ttu-id="79e97-163">Krok 3. Dodawanie`SuppliersTableAdapter`do warstwy dostępu do danych</span><span class="sxs-lookup"><span data-stu-id="79e97-163">Step 3: Adding the`SuppliersTableAdapter`to the Data Access Layer</span></span>

<span data-ttu-id="79e97-164">Aby móc korzystać z informacji o dostawcy w naszej aplikacji, musisz najpierw utworzyć TableAdapter i DataTable w naszym DAL.</span><span class="sxs-lookup"><span data-stu-id="79e97-164">In order to work with the supplier information in our application we need to first create a TableAdapter and DataTable in our DAL.</span></span> <span data-ttu-id="79e97-165">W idealnym przypadku można to zrobić przy użyciu tych samych prostych kroków, które zostały sprawdzone w poprzednich samouczkach.</span><span class="sxs-lookup"><span data-stu-id="79e97-165">Ideally, this would be accomplished using the same straightforward steps examined in earlier tutorials.</span></span> <span data-ttu-id="79e97-166">Jednak praca z kolumnami obliczanymi wprowadza kilka wrinklesów, które są charakterystyczne dla dyskusji.</span><span class="sxs-lookup"><span data-stu-id="79e97-166">However, working with computed columns introduces a few wrinkles that merit discussion.</span></span>

<span data-ttu-id="79e97-167">Jeśli używasz TableAdapter, który używa instrukcji SQL ad hoc, możesz po prostu dołączyć kolumnę obliczaną w głównym zapytaniu TableAdapter s za pośrednictwem Kreatora konfiguracji TableAdapter.</span><span class="sxs-lookup"><span data-stu-id="79e97-167">If you are using a TableAdapter that uses ad-hoc SQL statements, you can simply include the computed column in the TableAdapter s main query via the TableAdapter Configuration wizard.</span></span> <span data-ttu-id="79e97-168">Jednak spowoduje to automatyczne wygenerowanie instrukcji `INSERT` i `UPDATE`, które zawierają kolumnę obliczaną.</span><span class="sxs-lookup"><span data-stu-id="79e97-168">This, however, will auto-generate `INSERT` and `UPDATE` statements that include the computed column.</span></span> <span data-ttu-id="79e97-169">Jeśli podjęto próbę wykonania jednej z tych metod, `SqlException` z komunikatem nie można zmodyfikować kolumny " *ColumnName* ", ponieważ jest to kolumna obliczana albo wynik operatora Union zostanie wygenerowany.</span><span class="sxs-lookup"><span data-stu-id="79e97-169">If you attempt to execute one of these methods, a `SqlException` with the message The column *ColumnName* cannot be modified because it is either a computed column or is the result of a UNION operator will be thrown.</span></span> <span data-ttu-id="79e97-170">Chociaż instrukcje `INSERT` i `UPDATE` można korygować ręcznie za pomocą właściwości TableAdapter s `InsertCommand` i `UpdateCommand`, te dostosowania zostaną utracone po każdym ponownym uruchomieniu Kreatora konfiguracji TableAdapter.</span><span class="sxs-lookup"><span data-stu-id="79e97-170">While the `INSERT` and `UPDATE` statement can be manually adjusted through the TableAdapter s `InsertCommand` and `UpdateCommand` properties, these customizations will be lost whenever the TableAdapter Configuration wizard is re-run.</span></span>

<span data-ttu-id="79e97-171">Ze względu na brittleness TableAdapters, który używa instrukcji SQL ad hoc, zaleca się korzystanie z procedur składowanych podczas pracy z kolumnami obliczanymi.</span><span class="sxs-lookup"><span data-stu-id="79e97-171">Due to the brittleness of TableAdapters that use ad-hoc SQL statements, it is recommended that we use stored procedures when working with computed columns.</span></span> <span data-ttu-id="79e97-172">Jeśli używasz istniejących procedur składowanych, po prostu Skonfiguruj TableAdapter zgodnie z opisem w temacie [using Existing procedurs for the datasetd zestaw danych s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="79e97-172">If you are using existing stored procedures, simply configure the TableAdapter as discussed in the [Using Existing Stored Procedures for the Typed DataSet s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) tutorial.</span></span> <span data-ttu-id="79e97-173">W przypadku tworzenia przez kreatora TableAdapter procedur składowanych należy jednak najpierw pominąć wszystkie kolumny obliczane z głównego zapytania.</span><span class="sxs-lookup"><span data-stu-id="79e97-173">If you have the TableAdapter wizard create the stored procedures for you, however, it is important to initially omit any computed columns from the main query.</span></span> <span data-ttu-id="79e97-174">Jeśli w zapytaniu głównym dołączysz kolumnę obliczaną, Kreator konfiguracji TableAdapter wyświetli powiadomienie po zakończeniu, że nie może utworzyć odpowiednich procedur składowanych.</span><span class="sxs-lookup"><span data-stu-id="79e97-174">If you include a computed column in the main query, the TableAdapter Configuration wizard will inform you, upon completion, that it cannot create the corresponding stored procedures.</span></span> <span data-ttu-id="79e97-175">Krótko mówiąc, najpierw musimy skonfigurować TableAdapter przy użyciu kwerendy głównej z obliczanymi kolumnami, a następnie ręcznie zaktualizować odpowiednią procedurę składowaną oraz `SelectCommand` TableAdapter s w celu uwzględnienia kolumny obliczanej.</span><span class="sxs-lookup"><span data-stu-id="79e97-175">In short, we need to initially configure the TableAdapter using a computed column-free main query and then manually update the corresponding stored procedure and the TableAdapter s `SelectCommand` to include the computed column.</span></span> <span data-ttu-id="79e97-176">Takie podejście jest podobne do tej, która jest używana *w`JOIN`* [TableAdapter](updating-the-tableadapter-to-use-joins-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="79e97-176">This approach is similar to the one used in the [Updating the TableAdapter to Use](updating-the-tableadapter-to-use-joins-cs.md)`JOIN`*s* tutorial.</span></span>

<span data-ttu-id="79e97-177">W tym samouczku dodamy do usługi s nowe TableAdapter i automatycznie utworzysz procedury składowane.</span><span class="sxs-lookup"><span data-stu-id="79e97-177">For this tutorial, let s add a new TableAdapter and have it automatically create the stored procedures for us.</span></span> <span data-ttu-id="79e97-178">W związku z tym musimy najpierw pominąć `FullContactName` kolumnę obliczaną z głównego zapytania.</span><span class="sxs-lookup"><span data-stu-id="79e97-178">Consequently, we will need to initially omit the `FullContactName` computed column from the main query.</span></span>

<span data-ttu-id="79e97-179">Zacznij od otwarcia `NorthwindWithSprocs` zestawu danych w folderze `~/App_Code/DAL`.</span><span class="sxs-lookup"><span data-stu-id="79e97-179">Start by opening the `NorthwindWithSprocs` DataSet in the `~/App_Code/DAL` folder.</span></span> <span data-ttu-id="79e97-180">Kliknij prawym przyciskiem myszy w projektancie, a następnie z menu kontekstowego wybierz polecenie, aby dodać nowy TableAdapter.</span><span class="sxs-lookup"><span data-stu-id="79e97-180">Right-click in the Designer and, from the context-menu, choose to add a new TableAdapter.</span></span> <span data-ttu-id="79e97-181">Spowoduje to uruchomienie Kreatora konfiguracji TableAdapter.</span><span class="sxs-lookup"><span data-stu-id="79e97-181">This will launch the TableAdapter Configuration wizard.</span></span> <span data-ttu-id="79e97-182">Określ bazę danych, z której mają być przeszukiwane dane (`NORTHWNDConnectionString` from `Web.config`), a następnie kliknij przycisk Dalej.</span><span class="sxs-lookup"><span data-stu-id="79e97-182">Specify the database to query data from (`NORTHWNDConnectionString` from `Web.config`) and click Next.</span></span> <span data-ttu-id="79e97-183">Ponieważ nie zostały jeszcze utworzone żadne procedury składowane służące do wykonywania zapytań lub modyfikowania tabeli `Suppliers`, wybierz opcję Utwórz nowe procedury składowane, aby Kreator utworzy je dla nas, i kliknij przycisk Dalej.</span><span class="sxs-lookup"><span data-stu-id="79e97-183">Since we have not yet created any stored procedures for querying or modifying the `Suppliers` table, select the Create new stored procedures option so that the wizard will create them for us and click Next.</span></span>

<span data-ttu-id="79e97-184">[![wybrać opcję Utwórz nowe procedury składowane](working-with-computed-columns-cs/_static/image8.png)](working-with-computed-columns-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="79e97-184">[![Choose the Create new stored procedures Option](working-with-computed-columns-cs/_static/image8.png)](working-with-computed-columns-cs/_static/image7.png)</span></span>

<span data-ttu-id="79e97-185">**Rysunek 3**. Wybierz opcję Utwórz nowe procedury składowane ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](working-with-computed-columns-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="79e97-185">**Figure 3**: Choose the Create new stored procedures Option ([Click to view full-size image](working-with-computed-columns-cs/_static/image9.png))</span></span>

<span data-ttu-id="79e97-186">W następnym kroku zostanie wyświetlony komunikat z prośbą o zapytanie główne.</span><span class="sxs-lookup"><span data-stu-id="79e97-186">The subsequent step prompts us for the main query.</span></span> <span data-ttu-id="79e97-187">Wprowadź następujące zapytanie, które zwraca kolumny `SupplierID`, `CompanyName`, `ContactName`i `ContactTitle` dla każdego dostawcy.</span><span class="sxs-lookup"><span data-stu-id="79e97-187">Enter the following query, which returns the `SupplierID`, `CompanyName`, `ContactName`, and `ContactTitle` columns for each supplier.</span></span> <span data-ttu-id="79e97-188">Zwróć uwagę, że to zapytanie celowo całkowicie pomija kolumnę obliczaną (`FullContactName`); będziemy aktualizować odpowiednią procedurę przechowywaną, aby uwzględnić tę kolumnę w kroku 4.</span><span class="sxs-lookup"><span data-stu-id="79e97-188">Note that this query purposefully omits the computed column (`FullContactName`); we will update the corresponding stored procedure to include this column in Step 4.</span></span>

[!code-sql[Main](working-with-computed-columns-cs/samples/sample3.sql)]

<span data-ttu-id="79e97-189">Po wprowadzeniu głównego zapytania i kliknięciu przycisku Dalej Kreator umożliwi nam nadawanie nazw wygenerowanym przez niego procedur składowanych.</span><span class="sxs-lookup"><span data-stu-id="79e97-189">After entering the main query and clicking Next, the wizard allows us to name the four stored procedures it will generate.</span></span> <span data-ttu-id="79e97-190">Nazwij te procedury składowane `Suppliers_Select`, `Suppliers_Insert`, `Suppliers_Update`i `Suppliers_Delete`, jak pokazano na rysunku 4.</span><span class="sxs-lookup"><span data-stu-id="79e97-190">Name these stored procedures `Suppliers_Select`, `Suppliers_Insert`, `Suppliers_Update`, and `Suppliers_Delete`, as Figure 4 illustrates.</span></span>

<span data-ttu-id="79e97-191">[![dostosować nazwy automatycznie generowanych procedur składowanych](working-with-computed-columns-cs/_static/image11.png)](working-with-computed-columns-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="79e97-191">[![Customize the Names of the Auto-Generated Stored Procedures](working-with-computed-columns-cs/_static/image11.png)](working-with-computed-columns-cs/_static/image10.png)</span></span>

<span data-ttu-id="79e97-192">**Ilustracja 4**. Dostosowywanie nazw automatycznie generowanych procedur składowanych ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](working-with-computed-columns-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="79e97-192">**Figure 4**: Customize the Names of the Auto-Generated Stored Procedures ([Click to view full-size image](working-with-computed-columns-cs/_static/image12.png))</span></span>

<span data-ttu-id="79e97-193">Następny krok kreatora umożliwia nawiązanie nazwy metod TableAdapter i określenie wzorców używanych do uzyskiwania dostępu do danych i ich aktualizowania.</span><span class="sxs-lookup"><span data-stu-id="79e97-193">The next wizard step allows us to name the TableAdapter s methods and specify the patterns used to access and update data.</span></span> <span data-ttu-id="79e97-194">Pozostaw wszystkie trzy pola wyboru zaznaczone, ale Zmień nazwę metody `GetData` na `GetSuppliers`.</span><span class="sxs-lookup"><span data-stu-id="79e97-194">Leave all three checkboxes checked, but rename the `GetData` method to `GetSuppliers`.</span></span> <span data-ttu-id="79e97-195">Kliknij przycisk Zakończ, aby zakończyć pracę kreatora.</span><span class="sxs-lookup"><span data-stu-id="79e97-195">Click Finish to complete the wizard.</span></span>

<span data-ttu-id="79e97-196">[![zmienić nazwy metody GetData na getdostawcs](working-with-computed-columns-cs/_static/image14.png)](working-with-computed-columns-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="79e97-196">[![Rename the GetData Method to GetSuppliers](working-with-computed-columns-cs/_static/image14.png)](working-with-computed-columns-cs/_static/image13.png)</span></span>

<span data-ttu-id="79e97-197">**Rysunek 5**. zmiana nazwy metody `GetData` na `GetSuppliers` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](working-with-computed-columns-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="79e97-197">**Figure 5**: Rename the `GetData` Method to `GetSuppliers` ([Click to view full-size image](working-with-computed-columns-cs/_static/image15.png))</span></span>

<span data-ttu-id="79e97-198">Po kliknięciu przycisku Zakończ Kreator utworzy cztery procedury składowane i doda TableAdapter i odpowiednią wartość DataTable do określonego zestawu danych.</span><span class="sxs-lookup"><span data-stu-id="79e97-198">Upon clicking Finish, the wizard will create the four stored procedures and add the TableAdapter and corresponding DataTable to the Typed DataSet.</span></span>

## <a name="step-4-including-the-computed-column-in-the-tableadapter-s-main-query"></a><span data-ttu-id="79e97-199">Krok 4. uwzględnienie kolumny obliczanej w kwerendzie głównej TableAdapter s</span><span class="sxs-lookup"><span data-stu-id="79e97-199">Step 4: Including the Computed Column in the TableAdapter s Main Query</span></span>

<span data-ttu-id="79e97-200">Teraz należy zaktualizować TableAdapter i DataTable utworzone w kroku 3, aby uwzględnić kolumnę obliczaną `FullContactName`.</span><span class="sxs-lookup"><span data-stu-id="79e97-200">We now need to update the TableAdapter and DataTable created in Step 3 to include the `FullContactName` computed column.</span></span> <span data-ttu-id="79e97-201">Obejmuje to dwie czynności:</span><span class="sxs-lookup"><span data-stu-id="79e97-201">This involves two steps:</span></span>

1. <span data-ttu-id="79e97-202">Aktualizowanie `Suppliers_Select` procedury składowanej w celu zwrócenia `FullContactName` kolumny obliczanej i</span><span class="sxs-lookup"><span data-stu-id="79e97-202">Updating the `Suppliers_Select` stored procedure to return the `FullContactName` computed column, and</span></span>
2. <span data-ttu-id="79e97-203">Aktualizowanie elementu DataTable w celu uwzględnienia odpowiedniej kolumny `FullContactName`.</span><span class="sxs-lookup"><span data-stu-id="79e97-203">Updating the DataTable to include a corresponding `FullContactName` column.</span></span>

<span data-ttu-id="79e97-204">Zacznij od przejścia do Eksplorator serwera i przechodzenia do szczegółów w folderze procedury składowane.</span><span class="sxs-lookup"><span data-stu-id="79e97-204">Start by navigating to the Server Explorer and drilling down into the Stored Procedures folder.</span></span> <span data-ttu-id="79e97-205">Otwórz `Suppliers_Select` procedury składowanej i zaktualizuj zapytanie `SELECT`, aby zawierało `FullContactName` kolumnę obliczaną:</span><span class="sxs-lookup"><span data-stu-id="79e97-205">Open the `Suppliers_Select` stored procedure and update the `SELECT` query to include the `FullContactName` computed column:</span></span>

[!code-sql[Main](working-with-computed-columns-cs/samples/sample4.sql)]

<span data-ttu-id="79e97-206">Zapisz zmiany w procedurze składowanej, klikając ikonę Zapisz na pasku narzędzi, naciskając klawisze CTRL + S lub wybierając opcję Zapisz `Suppliers_Select` z menu plik.</span><span class="sxs-lookup"><span data-stu-id="79e97-206">Save the changes to the stored procedure by clicking the Save icon in the Toolbar, by hitting Ctrl+S, or by choosing the Save `Suppliers_Select` option from the File menu.</span></span>

<span data-ttu-id="79e97-207">Następnie wróć do projektanta obiektów DataSet, kliknij prawym przyciskiem myszy `SuppliersTableAdapter`i wybierz polecenie Konfiguruj z menu kontekstowego.</span><span class="sxs-lookup"><span data-stu-id="79e97-207">Next, return to the DataSet Designer, right-click on the `SuppliersTableAdapter`, and choose Configure from the context-menu.</span></span> <span data-ttu-id="79e97-208">Należy pamiętać, że kolumna `Suppliers_Select` zawiera teraz kolumnę `FullContactName` w kolekcji kolumn danych.</span><span class="sxs-lookup"><span data-stu-id="79e97-208">Note that the `Suppliers_Select` column now includes the `FullContactName` column in its Data Columns collection.</span></span>

<span data-ttu-id="79e97-209">[![uruchomić Kreatora konfiguracji TableAdapter s w celu zaktualizowania kolumn DataTable s](working-with-computed-columns-cs/_static/image17.png)](working-with-computed-columns-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="79e97-209">[![Run the TableAdapter s Configuration Wizard to Update the DataTable s Columns](working-with-computed-columns-cs/_static/image17.png)](working-with-computed-columns-cs/_static/image16.png)</span></span>

<span data-ttu-id="79e97-210">**Ilustracja 6**. uruchomienie Kreatora konfiguracji TableAdapter s w celu zaktualizowania kolumn DataTable s ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](working-with-computed-columns-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="79e97-210">**Figure 6**: Run the TableAdapter s Configuration Wizard to Update the DataTable s Columns ([Click to view full-size image](working-with-computed-columns-cs/_static/image18.png))</span></span>

<span data-ttu-id="79e97-211">Kliknij przycisk Zakończ, aby zakończyć pracę kreatora.</span><span class="sxs-lookup"><span data-stu-id="79e97-211">Click Finish to complete the wizard.</span></span> <span data-ttu-id="79e97-212">Spowoduje to automatyczne dodanie odpowiedniej kolumny do `SuppliersDataTable`.</span><span class="sxs-lookup"><span data-stu-id="79e97-212">This will automatically add a corresponding column to the `SuppliersDataTable`.</span></span> <span data-ttu-id="79e97-213">Kreator TableAdapter jest wystarczająco inteligentny, aby wykryć, że kolumna `FullContactName` jest kolumną obliczaną i w związku z tym tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="79e97-213">The TableAdapter wizard is smart enough to detect that the `FullContactName` column is a computed column and therefore read-only.</span></span> <span data-ttu-id="79e97-214">W związku z tym ustawia Właściwość Column s `ReadOnly` na `true`.</span><span class="sxs-lookup"><span data-stu-id="79e97-214">Consequently, it sets the column s `ReadOnly` property to `true`.</span></span> <span data-ttu-id="79e97-215">Aby to sprawdzić, wybierz kolumnę z `SuppliersDataTable` a następnie przejdź do okno Właściwości (patrz rysunek 7).</span><span class="sxs-lookup"><span data-stu-id="79e97-215">To verify this, select the column from the `SuppliersDataTable` and then go to the Properties window (see Figure 7).</span></span> <span data-ttu-id="79e97-216">Należy pamiętać, że `FullContactName` kolumn `DataType` i `MaxLength` właściwości są również odpowiednio ustawiane.</span><span class="sxs-lookup"><span data-stu-id="79e97-216">Note that the `FullContactName` column s `DataType` and `MaxLength` properties are also set accordingly.</span></span>

<span data-ttu-id="79e97-217">[![kolumna FullContactName jest oznaczona jako tylko do odczytu](working-with-computed-columns-cs/_static/image20.png)](working-with-computed-columns-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="79e97-217">[![The FullContactName Column is Marked as Read-Only](working-with-computed-columns-cs/_static/image20.png)](working-with-computed-columns-cs/_static/image19.png)</span></span>

<span data-ttu-id="79e97-218">**Rysunek 7**: kolumna `FullContactName` jest oznaczona jako tylko do odczytu ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](working-with-computed-columns-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="79e97-218">**Figure 7**: The `FullContactName` Column is Marked as Read-Only ([Click to view full-size image](working-with-computed-columns-cs/_static/image21.png))</span></span>

## <a name="step-5-adding-agetsupplierbysupplieridmethod-to-the-tableadapter"></a><span data-ttu-id="79e97-219">Krok 5. Dodawanie metody`GetSupplierBySupplierID`do TableAdapter</span><span class="sxs-lookup"><span data-stu-id="79e97-219">Step 5: Adding a`GetSupplierBySupplierID`Method to the TableAdapter</span></span>

<span data-ttu-id="79e97-220">W tym samouczku utworzymy stronę ASP.NET, która będzie wyświetlać dostawców w siatce z aktualizowalną aktualizacją.</span><span class="sxs-lookup"><span data-stu-id="79e97-220">For this tutorial we will create an ASP.NET page that displays the suppliers in an updateable grid.</span></span> <span data-ttu-id="79e97-221">W poprzednich samouczkach Zaktualizowaliśmy pojedynczy rekord z warstwy logiki biznesowej, pobierając ten konkretny rekord z DAL jako element DataTable o jednoznacznie określonym typie, aktualizując jego właściwości, a następnie wysyłając zaktualizowany element DataTable z powrotem do DAL w celu propagowania zmian do Baza danych programu.</span><span class="sxs-lookup"><span data-stu-id="79e97-221">In past tutorials we have updated a single record from the Business Logic Layer by retrieving that particular record from the DAL as a strongly-typed DataTable, updating its properties, and then sending the updated DataTable back to the DAL to propagate the changes to the database.</span></span> <span data-ttu-id="79e97-222">Aby wykonać ten pierwszy krok — pobranie zaktualizowanego rekordu z DAL — musimy najpierw dodać metodę `GetSupplierBySupplierID(supplierID)` do DAL.</span><span class="sxs-lookup"><span data-stu-id="79e97-222">To accomplish this first step - retrieving the record being updated from the DAL - we need to first add a `GetSupplierBySupplierID(supplierID)` method to the DAL.</span></span>

<span data-ttu-id="79e97-223">Kliknij prawym przyciskiem myszy `SuppliersTableAdapter` w projekcie zestawu danych i wybierz opcję Dodaj zapytanie z menu kontekstowego.</span><span class="sxs-lookup"><span data-stu-id="79e97-223">Right-click on the `SuppliersTableAdapter` in the DataSet Design and choose the Add Query option from the context-menu.</span></span> <span data-ttu-id="79e97-224">Tak jak w kroku 3, niech Kreator wygeneruje nową procedurę składowaną dla nas, wybierając opcję Utwórz nową procedurę składowaną (zapoznaj się z powrotem do rysunku 3 dla zrzutu ekranu tego kroku kreatora).</span><span class="sxs-lookup"><span data-stu-id="79e97-224">As we did in Step 3, let the wizard generate a new stored procedure for us by selecting the Create new stored procedure option (refer back to Figure 3 for a screenshot of this wizard step).</span></span> <span data-ttu-id="79e97-225">Ponieważ ta metoda zwróci rekord z wieloma kolumnami, wskaż, że chcemy użyć zapytania SQL, które zwraca wiersze, a następnie kliknij przycisk Dalej.</span><span class="sxs-lookup"><span data-stu-id="79e97-225">Since this method will return a record with multiple columns, indicate that we want to use a SQL query that is a SELECT which returns rows and click Next.</span></span>

<span data-ttu-id="79e97-226">[![wybierz opcję Wybierz, która zwraca wiersze](working-with-computed-columns-cs/_static/image23.png)](working-with-computed-columns-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="79e97-226">[![Choose the SELECT which returns rows Option](working-with-computed-columns-cs/_static/image23.png)](working-with-computed-columns-cs/_static/image22.png)</span></span>

<span data-ttu-id="79e97-227">**Ilustracja 8**. Wybierz opcję Wybierz, która zwraca wiersze ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](working-with-computed-columns-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="79e97-227">**Figure 8**: Choose the SELECT which returns rows Option ([Click to view full-size image](working-with-computed-columns-cs/_static/image24.png))</span></span>

<span data-ttu-id="79e97-228">W następnym kroku zostanie wyświetlony komunikat z prośbą o zapytanie, które ma być używane dla tej metody.</span><span class="sxs-lookup"><span data-stu-id="79e97-228">The subsequent step prompts us for the query to use for this method.</span></span> <span data-ttu-id="79e97-229">Wprowadź następujące polecenie, które zwraca te same pola danych co główne zapytanie, ale dla określonego dostawcy.</span><span class="sxs-lookup"><span data-stu-id="79e97-229">Enter the following, which returns the same data fields as the main query but for a particular supplier.</span></span>

[!code-sql[Main](working-with-computed-columns-cs/samples/sample5.sql)]

<span data-ttu-id="79e97-230">Na następnym ekranie poprosimy nas o podanie nazwy procedury przechowywanej, która zostanie wygenerowana automatycznie.</span><span class="sxs-lookup"><span data-stu-id="79e97-230">The next screen asks us to name the stored procedure that will be auto-generated.</span></span> <span data-ttu-id="79e97-231">Nadaj nazwę tej procedurze składowanej `Suppliers_SelectBySupplierID` a następnie kliknij przycisk Dalej.</span><span class="sxs-lookup"><span data-stu-id="79e97-231">Name this stored procedure `Suppliers_SelectBySupplierID` and click Next.</span></span>

<span data-ttu-id="79e97-232">[![nazwę procedury składowanej Suppliers_SelectBySupplierID](working-with-computed-columns-cs/_static/image26.png)](working-with-computed-columns-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="79e97-232">[![Name the Stored Procedure Suppliers_SelectBySupplierID](working-with-computed-columns-cs/_static/image26.png)](working-with-computed-columns-cs/_static/image25.png)</span></span>

<span data-ttu-id="79e97-233">**Ilustracja 9**. nazwa `Suppliers_SelectBySupplierID` procedury składowanej ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](working-with-computed-columns-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="79e97-233">**Figure 9**: Name the Stored Procedure `Suppliers_SelectBySupplierID` ([Click to view full-size image](working-with-computed-columns-cs/_static/image27.png))</span></span>

<span data-ttu-id="79e97-234">Na koniec Kreator poprosi nas o wzorce dostępu do danych i nazwy metod, które mają być używane dla TableAdapter.</span><span class="sxs-lookup"><span data-stu-id="79e97-234">Lastly, the wizard prompts us for the data access patterns and method names to use for the TableAdapter.</span></span> <span data-ttu-id="79e97-235">Pozostaw zaznaczone pole wyboru, ale Zmień nazwę `FillBy` i `GetDataBy` metody na odpowiednio `FillBySupplierID` i `GetSupplierBySupplierID`.</span><span class="sxs-lookup"><span data-stu-id="79e97-235">Leave both checkboxes checked, but rename the `FillBy` and `GetDataBy` methods to `FillBySupplierID` and `GetSupplierBySupplierID`, respectively.</span></span>

<span data-ttu-id="79e97-236">[Nazwa ![TableAdapter FillBySupplierID i GetSupplierBySupplierID](working-with-computed-columns-cs/_static/image29.png)](working-with-computed-columns-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="79e97-236">[![Name the TableAdapter Methods FillBySupplierID and GetSupplierBySupplierID](working-with-computed-columns-cs/_static/image29.png)](working-with-computed-columns-cs/_static/image28.png)</span></span>

<span data-ttu-id="79e97-237">**Ilustracja 10**. Nazwij metody TableAdapter `FillBySupplierID` i `GetSupplierBySupplierID` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](working-with-computed-columns-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="79e97-237">**Figure 10**: Name the TableAdapter Methods `FillBySupplierID` and `GetSupplierBySupplierID` ([Click to view full-size image](working-with-computed-columns-cs/_static/image30.png))</span></span>

<span data-ttu-id="79e97-238">Kliknij przycisk Zakończ, aby zakończyć pracę kreatora.</span><span class="sxs-lookup"><span data-stu-id="79e97-238">Click Finish to complete the wizard.</span></span>

## <a name="step-6-creating-the-business-logic-layer"></a><span data-ttu-id="79e97-239">Krok 6. Tworzenie warstwy logiki biznesowej</span><span class="sxs-lookup"><span data-stu-id="79e97-239">Step 6: Creating the Business Logic Layer</span></span>

<span data-ttu-id="79e97-240">Przed utworzeniem strony ASP.NET, która używa kolumny obliczanej utworzonej w kroku 1, najpierw musimy dodać odpowiednie metody w LOGIKI biznesowej.</span><span class="sxs-lookup"><span data-stu-id="79e97-240">Before we create an ASP.NET page that uses the computed column created in Step 1, we first need to add the corresponding methods in the BLL.</span></span> <span data-ttu-id="79e97-241">Nasza strona ASP.NET, która zostanie utworzona w kroku 7, umożliwi użytkownikom wyświetlanie i edytowanie dostawców.</span><span class="sxs-lookup"><span data-stu-id="79e97-241">Our ASP.NET page, which we will create in Step 7, will allow users to view and edit suppliers.</span></span> <span data-ttu-id="79e97-242">W związku z tym potrzebujemy naszej LOGIKI biznesowej, aby zapewnić wszystkim dostawcom i innym podmiotom, aby zaktualizować określonego dostawcę.</span><span class="sxs-lookup"><span data-stu-id="79e97-242">Therefore, we need our BLL to provide, at minimum, a method to get all of the suppliers and another to update a particular supplier.</span></span>

<span data-ttu-id="79e97-243">Utwórz nowy plik klasy o nazwie `SuppliersBLLWithSprocs` w folderze `~/App_Code/BLL` i Dodaj następujący kod:</span><span class="sxs-lookup"><span data-stu-id="79e97-243">Create a new class file named `SuppliersBLLWithSprocs` in the `~/App_Code/BLL` folder and add the following code:</span></span>

[!code-csharp[Main](working-with-computed-columns-cs/samples/sample6.cs)]

<span data-ttu-id="79e97-244">Podobnie jak w przypadku innych klas LOGIKI biznesowej, `SuppliersBLLWithSprocs` ma właściwość `protected` `Adapter`, która zwraca wystąpienie klasy `SuppliersTableAdapter` oraz dwie metody `public`: `GetSuppliers` i `UpdateSupplier`.</span><span class="sxs-lookup"><span data-stu-id="79e97-244">Like the other BLL classes, `SuppliersBLLWithSprocs` has a `protected` `Adapter` property that returns an instance of the `SuppliersTableAdapter` class along with two `public` methods: `GetSuppliers` and `UpdateSupplier`.</span></span> <span data-ttu-id="79e97-245">Metoda `GetSuppliers` wywołuje i zwraca `SuppliersDataTable` zwracany przez odpowiednią metodę `GetSupplier` w warstwie dostępu do danych.</span><span class="sxs-lookup"><span data-stu-id="79e97-245">The `GetSuppliers` method calls and returns the `SuppliersDataTable` returned by the corresponding `GetSupplier` method in the Data Access Layer.</span></span> <span data-ttu-id="79e97-246">Metoda `UpdateSupplier` pobiera informacje o konkretnym dostawcy, które są aktualizowane za pośrednictwem wywołania metody `GetSupplierBySupplierID(supplierID)` DAL s.</span><span class="sxs-lookup"><span data-stu-id="79e97-246">The `UpdateSupplier` method retrieves information about the particular supplier being updated via a call to the DAL s `GetSupplierBySupplierID(supplierID)` method.</span></span> <span data-ttu-id="79e97-247">Następnie aktualizuje `CategoryName`, `ContactName`i `ContactTitle` właściwości i zatwierdza te zmiany w bazie danych, wywołując metodę dostępu do danych `Update` metodzie, przekazując do zmodyfikowanego obiektu `SuppliersRow`.</span><span class="sxs-lookup"><span data-stu-id="79e97-247">It then updates the `CategoryName`, `ContactName`, and `ContactTitle` properties and commits these changes to the database by calling the Data Access Layer s `Update` method, passing in the modified `SuppliersRow` object.</span></span>

> [!NOTE]
> <span data-ttu-id="79e97-248">Z wyjątkiem `SupplierID` i `CompanyName`wszystkie kolumny w tabeli dostawcy zezwalają na wartości `NULL`.</span><span class="sxs-lookup"><span data-stu-id="79e97-248">Except for `SupplierID` and `CompanyName`, all columns in the Suppliers table allow `NULL` values.</span></span> <span data-ttu-id="79e97-249">W związku z tym, jeśli `contactName` `contactTitle` lub parametry, które zostały przesłane, są `null` musimy ustawić odpowiednie `ContactName` i `ContactTitle` do wartości bazy danych `NULL` odpowiednio przy użyciu metod `SetContactNameNull` i `SetContactTitleNull`.</span><span class="sxs-lookup"><span data-stu-id="79e97-249">Therefore, if the passed-in `contactName` or `contactTitle` parameters are `null` we need to set the corresponding `ContactName` and `ContactTitle` properties to a `NULL` database value using the `SetContactNameNull` and `SetContactTitleNull` methods, respectively.</span></span>

## <a name="step-7-working-with-the-computed-column-from-the-presentation-layer"></a><span data-ttu-id="79e97-250">Krok 7. Praca z kolumną obliczaną z warstwy prezentacji</span><span class="sxs-lookup"><span data-stu-id="79e97-250">Step 7: Working with the Computed Column from the Presentation Layer</span></span>

<span data-ttu-id="79e97-251">Dzięki kolumnie obliczanej dodawanej do tabeli `Suppliers`, a DAL i LOGIKI biznesowej odpowiednio zaktualizowane, jesteśmy gotowi do skompilowania strony ASP.NET, która współpracuje z `FullContactName` kolumną obliczaną.</span><span class="sxs-lookup"><span data-stu-id="79e97-251">With the computed column added to the `Suppliers` table and the DAL and BLL updated accordingly, we are ready to build an ASP.NET page that works with the `FullContactName` computed column.</span></span> <span data-ttu-id="79e97-252">Zacznij od otworzenia strony `ComputedColumns.aspx` w folderze `AdvancedDAL` i przeciągnij widok GridView z przybornika na projektanta.</span><span class="sxs-lookup"><span data-stu-id="79e97-252">Start by opening the `ComputedColumns.aspx` page in the `AdvancedDAL` folder and drag a GridView from the Toolbox onto the Designer.</span></span> <span data-ttu-id="79e97-253">Ustaw właściwość GridView s `ID` na `Suppliers` i, z jej tagu inteligentnego, powiąż ją z nowym elementem ObjectDataSource o nazwie `SuppliersDataSource`.</span><span class="sxs-lookup"><span data-stu-id="79e97-253">Set the GridView s `ID` property to `Suppliers` and, from its smart tag, bind it to a new ObjectDataSource named `SuppliersDataSource`.</span></span> <span data-ttu-id="79e97-254">Skonfiguruj element ObjectDataSource, aby używał klasy `SuppliersBLLWithSprocs`, która została dodana z powrotem w kroku 6, a następnie kliknij przycisk Dalej.</span><span class="sxs-lookup"><span data-stu-id="79e97-254">Configure the ObjectDataSource to use the `SuppliersBLLWithSprocs` class we added back in Step 6 and click Next.</span></span>

<span data-ttu-id="79e97-255">[![skonfigurować element ObjectDataSource do używania klasy SuppliersBLLWithSprocs](working-with-computed-columns-cs/_static/image32.png)](working-with-computed-columns-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="79e97-255">[![Configure the ObjectDataSource to Use the SuppliersBLLWithSprocs Class](working-with-computed-columns-cs/_static/image32.png)](working-with-computed-columns-cs/_static/image31.png)</span></span>

<span data-ttu-id="79e97-256">**Ilustracja 11**. Konfigurowanie elementu ObjectDataSource do używania klasy `SuppliersBLLWithSprocs` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](working-with-computed-columns-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="79e97-256">**Figure 11**: Configure the ObjectDataSource to Use the `SuppliersBLLWithSprocs` Class ([Click to view full-size image](working-with-computed-columns-cs/_static/image33.png))</span></span>

<span data-ttu-id="79e97-257">W klasie `SuppliersBLLWithSprocs` są zdefiniowane tylko dwie metody: `GetSuppliers` i `UpdateSupplier`.</span><span class="sxs-lookup"><span data-stu-id="79e97-257">There are only two methods defined in the `SuppliersBLLWithSprocs` class: `GetSuppliers` and `UpdateSupplier`.</span></span> <span data-ttu-id="79e97-258">Upewnij się, że te dwie metody są odpowiednio określone na kartach wybierz i Aktualizuj, a następnie kliknij przycisk Zakończ, aby zakończyć konfigurację elementu ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="79e97-258">Ensure that these two methods are specified in the SELECT and UPDATE tabs, respectively, and click Finish to complete the configuration of the ObjectDataSource.</span></span>

<span data-ttu-id="79e97-259">Po zakończeniu pracy Kreatora konfiguracji źródła danych program Visual Studio doda BoundField dla każdego zwróconego pola danych.</span><span class="sxs-lookup"><span data-stu-id="79e97-259">Upon completion of the Data Source Configuration wizard, Visual Studio will add a BoundField for each of the data fields returned.</span></span> <span data-ttu-id="79e97-260">Usuń `SupplierID` BoundField i zmień właściwości `HeaderText` `CompanyName`, `ContactName`, `ContactTitle`i `FullContactName` BoundFields na nazwę firmy, kontakt, tytuł i pełną nazwę kontaktu.</span><span class="sxs-lookup"><span data-stu-id="79e97-260">Remove the `SupplierID` BoundField and change the `HeaderText` properties of the `CompanyName`, `ContactName`, `ContactTitle`, and `FullContactName` BoundFields to Company, Contact Name, Title, and Full Contact Name, respectively.</span></span> <span data-ttu-id="79e97-261">W tagu inteligentnym zaznacz pole wyboru Włącz edycję, aby włączyć wbudowane funkcje edycji GridView.</span><span class="sxs-lookup"><span data-stu-id="79e97-261">From the smart tag, check the Enable Editing checkbox to turn on the GridView s built-in editing capabilities.</span></span>

<span data-ttu-id="79e97-262">Oprócz dodawania BoundFields do widoku GridView, ukończenie kreatora źródła danych powoduje również, że program Visual Studio ustawił Właściwość ObjectDataSource s `OldValuesParameterFormatString` na oryginalny\_{0}.</span><span class="sxs-lookup"><span data-stu-id="79e97-262">In addition to adding BoundFields to the GridView, completion of the Data Source Wizard also causes Visual Studio to set the ObjectDataSource s `OldValuesParameterFormatString` property to original\_{0}.</span></span> <span data-ttu-id="79e97-263">Przywróć wartość domyślną, {0}.</span><span class="sxs-lookup"><span data-stu-id="79e97-263">Revert this setting back to its default value, {0} .</span></span>

<span data-ttu-id="79e97-264">Po wprowadzeniu tych zmian do elementów GridView i ObjectDataSource, ich deklaratywne znaczniki powinny wyglądać podobnie do następujących:</span><span class="sxs-lookup"><span data-stu-id="79e97-264">After making these edits to the GridView and ObjectDataSource, their declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](working-with-computed-columns-cs/samples/sample7.aspx)]

<span data-ttu-id="79e97-265">Następnie odwiedź tę stronę za pomocą przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="79e97-265">Next, visit this page through a browser.</span></span> <span data-ttu-id="79e97-266">Jak pokazano na rysunku 12, każdy dostawca jest wyświetlany w siatce zawierającej kolumnę `FullContactName`, której wartość jest po prostu połączeniem innych trzech kolumn sformatowanych jako `ContactName` (`ContactTitle`, `CompanyName`).</span><span class="sxs-lookup"><span data-stu-id="79e97-266">As Figure 12 shows, each supplier is listed in a grid that includes the `FullContactName` column, whose value is simply the concatenation of the other three columns formatted as `ContactName` (`ContactTitle`, `CompanyName`) .</span></span>

<span data-ttu-id="79e97-267">[![każdy dostawca znajduje się na liście w siatce](working-with-computed-columns-cs/_static/image35.png)](working-with-computed-columns-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="79e97-267">[![Each Supplier is Listed in the Grid](working-with-computed-columns-cs/_static/image35.png)](working-with-computed-columns-cs/_static/image34.png)</span></span>

<span data-ttu-id="79e97-268">**Rysunek 12**: każdy dostawca jest wymieniony w siatce ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](working-with-computed-columns-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="79e97-268">**Figure 12**: Each Supplier is Listed in the Grid ([Click to view full-size image](working-with-computed-columns-cs/_static/image36.png))</span></span>

<span data-ttu-id="79e97-269">Kliknięcie przycisku Edytuj dla danego dostawcy powoduje odświeżenie i odwzorowanie tego wiersza w interfejsie edycji (Zobacz Rysunek 13).</span><span class="sxs-lookup"><span data-stu-id="79e97-269">Clicking the Edit button for a particular supplier causes a postback and has that row rendered in its editing interface (see Figure 13).</span></span> <span data-ttu-id="79e97-270">Pierwsze trzy kolumny renderują w domyślnym interfejsie edycji — kontrolka TextBox, której Właściwość `Text` jest ustawiona na wartość pola dane.</span><span class="sxs-lookup"><span data-stu-id="79e97-270">The first three columns render in their default editing interface - a TextBox control whose `Text` property is set to the value of the data field.</span></span> <span data-ttu-id="79e97-271">Kolumna `FullContactName`, jednak pozostanie jako tekst.</span><span class="sxs-lookup"><span data-stu-id="79e97-271">The `FullContactName` column, however, remains as text.</span></span> <span data-ttu-id="79e97-272">Gdy BoundFields zostały dodane do widoku GridView po zakończeniu pracy Kreatora konfiguracji źródła danych, właściwość `FullContactName` BoundField s `ReadOnly` została ustawiona na `true`, ponieważ odpowiadająca kolumna `FullContactName` w `SuppliersDataTable` ma właściwość `ReadOnly` ustawioną na `true`.</span><span class="sxs-lookup"><span data-stu-id="79e97-272">When the BoundFields were added to the GridView at the completion of the Data Source Configuration wizard, the `FullContactName` BoundField s `ReadOnly` property was set to `true` because the corresponding `FullContactName` column in the `SuppliersDataTable` has its `ReadOnly` property set to `true`.</span></span> <span data-ttu-id="79e97-273">Jak wskazano w kroku 4, właściwość `FullContactName` s `ReadOnly` została ustawiona na `true`, ponieważ TableAdapter wykrył, że kolumna była kolumną obliczaną.</span><span class="sxs-lookup"><span data-stu-id="79e97-273">As noted in Step 4, the `FullContactName` s `ReadOnly` property was set to `true` because the TableAdapter detected that the column was a computed column.</span></span>

<span data-ttu-id="79e97-274">[![nie można edytować kolumny FullContactName](working-with-computed-columns-cs/_static/image38.png)](working-with-computed-columns-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="79e97-274">[![The FullContactName Column is Not Editable](working-with-computed-columns-cs/_static/image38.png)](working-with-computed-columns-cs/_static/image37.png)</span></span>

<span data-ttu-id="79e97-275">**Ilustracja 13**. kolumna `FullContactName` nie jest edytowalna ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](working-with-computed-columns-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="79e97-275">**Figure 13**: The `FullContactName` Column is Not Editable ([Click to view full-size image](working-with-computed-columns-cs/_static/image39.png))</span></span>

<span data-ttu-id="79e97-276">Przejdź dalej i zaktualizuj wartość jednej lub kilku edytowalnych kolumn, a następnie kliknij przycisk Aktualizuj.</span><span class="sxs-lookup"><span data-stu-id="79e97-276">Go ahead and update the value of one or more of the editable columns and click Update.</span></span> <span data-ttu-id="79e97-277">Zwróć uwagę, jak wartość `FullContactName` s jest automatycznie aktualizowana w celu odzwierciedlenia zmiany.</span><span class="sxs-lookup"><span data-stu-id="79e97-277">Note how the `FullContactName` s value is automatically updated to reflect the change.</span></span>

> [!NOTE]
> <span data-ttu-id="79e97-278">W widoku GridView są obecnie stosowane BoundFields do pól edytowalnych, co spowodowało domyślny interfejs edycji.</span><span class="sxs-lookup"><span data-stu-id="79e97-278">The GridView currently uses BoundFields for the editable fields, resulting in the default editing interface.</span></span> <span data-ttu-id="79e97-279">Ponieważ pole `CompanyName` jest wymagane, powinno być konwertowane na TemplateField, które zawiera RequiredFieldValidator.</span><span class="sxs-lookup"><span data-stu-id="79e97-279">Since the `CompanyName` field is required, it should be converted into a TemplateField that includes a RequiredFieldValidator.</span></span> <span data-ttu-id="79e97-280">Jestem to ćwiczenie dla interesującego czytnika.</span><span class="sxs-lookup"><span data-stu-id="79e97-280">I leave this as an exercise for the interested reader.</span></span> <span data-ttu-id="79e97-281">Aby uzyskać instrukcje krok po kroku dotyczące konwertowania BoundField na TemplateField i dodawania kontrolek sprawdzania poprawności, zapoznaj się z tematem [Dodawanie kontrolek weryfikacji do okna Edycja i wstawianie interfejsów](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="79e97-281">Consult the [Adding Validation Controls to the Editing and Inserting Interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) tutorial for step-by-step instructions on converting a BoundField to a TemplateField and adding validation controls.</span></span>

## <a name="summary"></a><span data-ttu-id="79e97-282">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="79e97-282">Summary</span></span>

<span data-ttu-id="79e97-283">Podczas definiowania schematu dla tabeli Microsoft SQL Server umożliwia uwzględnienie kolumn obliczanych.</span><span class="sxs-lookup"><span data-stu-id="79e97-283">When defining the schema for a table, Microsoft SQL Server allows the inclusion of computed columns.</span></span> <span data-ttu-id="79e97-284">Są to kolumny, których wartości są obliczane na podstawie wyrażenia, które zwykle odwołuje się do wartości z innych kolumn w tym samym rekordzie.</span><span class="sxs-lookup"><span data-stu-id="79e97-284">These are columns whose values are calculated from an expression that usually references the values from other columns in the same record.</span></span> <span data-ttu-id="79e97-285">Ponieważ wartości kolumn obliczanych opierają się na wyrażeniu, są one tylko do odczytu i nie można przypisać wartości w instrukcji `INSERT` lub `UPDATE`.</span><span class="sxs-lookup"><span data-stu-id="79e97-285">Since the values for computed columns are based on an expression, they are read-only and cannot be assigned a value in an `INSERT` or `UPDATE` statement.</span></span> <span data-ttu-id="79e97-286">W ten sposób wprowadzono wyzwania podczas korzystania z kolumny obliczanej w głównym zapytaniu TableAdapter, które próbuje automatycznie generować odpowiednie instrukcje `INSERT`, `UPDATE`i `DELETE`.</span><span class="sxs-lookup"><span data-stu-id="79e97-286">This introduces challenges when using a computed column in the main query of a TableAdapter that tries to automatically generate corresponding `INSERT`, `UPDATE`, and `DELETE` statements.</span></span>

<span data-ttu-id="79e97-287">W tym samouczku omówiono techniki obejścia wyzwań powodowanych przez kolumny obliczane.</span><span class="sxs-lookup"><span data-stu-id="79e97-287">In this tutorial we discussed techniques for circumventing the challenges posed by computed columns.</span></span> <span data-ttu-id="79e97-288">W szczególności zostały użyte procedury składowane w naszym TableAdapter, aby przezwyciężyć brittleness nieodłączne w TableAdapters, które używają ad hoc instrukcji SQL.</span><span class="sxs-lookup"><span data-stu-id="79e97-288">In particular, we used stored procedures in our TableAdapter to overcome the brittleness inherent in TableAdapters that use ad-hoc SQL statements.</span></span> <span data-ttu-id="79e97-289">Gdy Kreator TableAdapter tworzy nowe procedury składowane, ważne jest, aby najpierw pominąć wszystkie kolumny obliczane, ponieważ ich obecność uniemożliwia wygenerowanie procedur składowanych modyfikacji danych.</span><span class="sxs-lookup"><span data-stu-id="79e97-289">When having the TableAdapter wizard create new stored procedures, it is important that we have the main query initially omit any computed columns because their presence prevents the data modification stored procedures from being generated.</span></span> <span data-ttu-id="79e97-290">Po wstępnym skonfigurowaniu TableAdapter `SelectCommand` procedury składowanej można ponownie dołączyć do dowolnych kolumn obliczanych.</span><span class="sxs-lookup"><span data-stu-id="79e97-290">After the TableAdapter has been initially configured, its `SelectCommand` stored procedure can be retooled to include any computed columns.</span></span>

<span data-ttu-id="79e97-291">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="79e97-291">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="79e97-292">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="79e97-292">About the Author</span></span>

<span data-ttu-id="79e97-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor siedmiu grup ASP/ASP. NET Books i założyciel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="79e97-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="79e97-294">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="79e97-294">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="79e97-295">Jego Najnowsza książka to [*Sams ASP.NET 2,0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="79e97-295">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="79e97-296">Można go osiągnąć w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="79e97-296">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="79e97-297">lub za pośrednictwem swojego blogu, który można znaleźć w [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="79e97-297">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="79e97-298">Specjalne podziękowania</span><span class="sxs-lookup"><span data-stu-id="79e97-298">Special Thanks To</span></span>

<span data-ttu-id="79e97-299">Ta seria samouczków została sprawdzona przez wielu przydatnych recenzentów.</span><span class="sxs-lookup"><span data-stu-id="79e97-299">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="79e97-300">Recenzenci liderzy dla tego samouczka to Hilton Geisenow i Teresa Murphy.</span><span class="sxs-lookup"><span data-stu-id="79e97-300">Lead reviewers for this tutorial were Hilton Geisenow and Teresa Murphy.</span></span> <span data-ttu-id="79e97-301">Chcesz przeglądać moje nadchodzące artykuły MSDN?</span><span class="sxs-lookup"><span data-stu-id="79e97-301">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="79e97-302">Jeśli tak, upuść mi linię w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="79e97-302">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="79e97-303">[Poprzednie](adding-additional-datatable-columns-cs.md)
> [dalej](configuring-the-data-access-layer-s-connection-and-command-level-settings-cs.md)</span><span class="sxs-lookup"><span data-stu-id="79e97-303">[Previous](adding-additional-datatable-columns-cs.md)
[Next](configuring-the-data-access-layer-s-connection-and-command-level-settings-cs.md)</span></span>

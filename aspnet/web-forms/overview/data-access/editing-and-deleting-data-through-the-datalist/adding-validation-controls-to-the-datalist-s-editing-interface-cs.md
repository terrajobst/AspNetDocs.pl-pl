---
uid: web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/adding-validation-controls-to-the-datalist-s-editing-interface-cs
title: Dodawanie kontrolek weryfikacji do interfejsu edycji elementu DataList (C#) | Microsoft Docs
author: rick-anderson
description: W tym samouczku dowiesz się, jak łatwo można dodać kontrolki walidacji do EditItemTemplatea elementu DataList, aby zapewnić większą foolproof edycji int użytkownika...
ms.author: riande
ms.date: 10/30/2006
ms.assetid: 3ecc21c5-da0e-40ab-abb4-fac1e47398ad
msc.legacyurl: /web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/adding-validation-controls-to-the-datalist-s-editing-interface-cs
msc.type: authoredcontent
ms.openlocfilehash: e3c14b7098da832bd28f57026e81dcb7f7ba7130
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/28/2019
ms.locfileid: "74640525"
---
# <a name="adding-validation-controls-to-the-datalists-editing-interface-c"></a><span data-ttu-id="f2229-103">Dodawanie kontrolek walidacji do interfejsu edycji kontrolki DataList (C#)</span><span class="sxs-lookup"><span data-stu-id="f2229-103">Adding Validation Controls to the DataList's Editing Interface (C#)</span></span>

<span data-ttu-id="f2229-104">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f2229-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f2229-105">[Pobierz przykładową aplikację](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_39_CS.exe) lub [Pobierz plik PDF](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/datatutorial39cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="f2229-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_39_CS.exe) or [Download PDF](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/datatutorial39cs1.pdf)</span></span>

> <span data-ttu-id="f2229-106">W tym samouczku dowiesz się, jak łatwo można dodać kontrolki weryfikacji do EditItemTemplatea elementu DataList, aby zapewnić bardziej foolproofy interfejs użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f2229-106">In this tutorial we'll see how easy it is to add validation controls to the DataList's EditItemTemplate in order to provide a more foolproof editing user interface.</span></span>

## <a name="introduction"></a><span data-ttu-id="f2229-107">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="f2229-107">Introduction</span></span>

<span data-ttu-id="f2229-108">W tym przypadku w samouczkach do edycji elementu DataList te interfejsy edytowania danych nie zawierały żadnych funkcji weryfikacji aktywnego użytkownika, nawet jeśli nieprawidłowe dane wejściowe użytkownika, takie jak brakująca Nazwa produktu lub cena ujemna, powodują wyjątek.</span><span class="sxs-lookup"><span data-stu-id="f2229-108">In the DataList editing tutorials thus far, the DataLists editing interfaces have not included any proactive user input validation even though invalid user input such as a missing product name or negative price results in an exception.</span></span> <span data-ttu-id="f2229-109">W [poprzednim samouczku](handling-bll-and-dal-level-exceptions-cs.md) sprawdziłmy, jak dodać kod obsługi wyjątków do procedury obsługi zdarzeń `UpdateCommand` DataList, aby przechwycić i bezpiecznie wyświetlić informacje o wszelkich zgłoszonych wyjątkach.</span><span class="sxs-lookup"><span data-stu-id="f2229-109">In the [preceding tutorial](handling-bll-and-dal-level-exceptions-cs.md) we examined how to add exception handling code to the DataList s `UpdateCommand` event handler in order to catch and gracefully display information about any exceptions that were raised.</span></span> <span data-ttu-id="f2229-110">W idealnym przypadku interfejs edytowania obejmuje kontrolki sprawdzania poprawności, które uniemożliwiają użytkownikowi wprowadzanie takich nieprawidłowych danych w pierwszym miejscu.</span><span class="sxs-lookup"><span data-stu-id="f2229-110">Ideally, however, the editing interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="f2229-111">W tym samouczku dowiesz się, jak łatwo można dodać kontrolki walidacji do `EditItemTemplate` DataList, aby zapewnić bardziej foolproofą edycję interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f2229-111">In this tutorial we'll see how easy it is to add validation controls to the DataList s `EditItemTemplate` in order to provide a more foolproof editing user interface.</span></span> <span data-ttu-id="f2229-112">W tym samouczku przedstawiono przykład utworzony w poprzednim samouczku i rozszerza interfejs edycji w celu uwzględnienia odpowiedniej weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="f2229-112">Specifically, this tutorial takes the example created in the preceding tutorial and augments the editing interface to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromhandling-bll--and-dal-level-exceptionshandling-bll-and-dal-level-exceptions-csmd"></a><span data-ttu-id="f2229-113">Krok 1. replikowanie przykładu z[obsługi wyjątków logiki biznesowej i dal](handling-bll-and-dal-level-exceptions-cs.md)</span><span class="sxs-lookup"><span data-stu-id="f2229-113">Step 1: Replicating the Example from[Handling BLL- and DAL-Level Exceptions](handling-bll-and-dal-level-exceptions-cs.md)</span></span>

<span data-ttu-id="f2229-114">W samouczku [Obsługa wyjątków logiki biznesowej-i dal](handling-bll-and-dal-level-exceptions-cs.md) została utworzona strona z nazwami i cenami produktów w dwukolumnowej, edytowalnej nazwie DataList.</span><span class="sxs-lookup"><span data-stu-id="f2229-114">In the [Handling BLL- and DAL-Level Exceptions](handling-bll-and-dal-level-exceptions-cs.md) tutorial we created a page that listed the names and prices of the products in a two-column, editable DataList.</span></span> <span data-ttu-id="f2229-115">Naszym celem tego samouczka jest rozszerzenie interfejsu edycji DataList s w celu uwzględnienia formantów walidacji.</span><span class="sxs-lookup"><span data-stu-id="f2229-115">Our goal for this tutorial is to augment the DataList s editing interface to include validation controls.</span></span> <span data-ttu-id="f2229-116">W szczególności nasza logika walidacji będzie:</span><span class="sxs-lookup"><span data-stu-id="f2229-116">In particular, our validation logic will:</span></span>

- <span data-ttu-id="f2229-117">Wymagaj podania nazwy produktu</span><span class="sxs-lookup"><span data-stu-id="f2229-117">Require that the product s name be provided</span></span>
- <span data-ttu-id="f2229-118">Upewnij się, że wartość wprowadzona dla ceny jest prawidłowym formatem waluty</span><span class="sxs-lookup"><span data-stu-id="f2229-118">Ensure that the value entered for the price is a valid currency format</span></span>
- <span data-ttu-id="f2229-119">Upewnij się, że wartość wprowadzona dla ceny jest większa lub równa zero, ponieważ ujemna `UnitPrice` wartość jest niedozwolona</span><span class="sxs-lookup"><span data-stu-id="f2229-119">Ensure that the value entered for the price is greater than or equal to zero, since a negative `UnitPrice` value is illegal</span></span>

<span data-ttu-id="f2229-120">Zanim będziemy mogli zapoznać się z poprzednim przykładem w celu uwzględnienia weryfikacji, najpierw musimy replikować przykład ze strony `ErrorHandling.aspx` w folderze `EditDeleteDataList` na stronie tego samouczka `UIValidation.aspx`.</span><span class="sxs-lookup"><span data-stu-id="f2229-120">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `ErrorHandling.aspx` page in the `EditDeleteDataList` folder to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="f2229-121">Aby to osiągnąć, należy skopiować zarówno znacznik deklaratywny `ErrorHandling.aspx` strony, jak i jego kod źródłowy.</span><span class="sxs-lookup"><span data-stu-id="f2229-121">To achieve this we need to copy over both the `ErrorHandling.aspx` page s declarative markup and its source code.</span></span> <span data-ttu-id="f2229-122">Najpierw należy skopiować znaczniki deklaratywne, wykonując następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="f2229-122">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="f2229-123">Otwórz stronę `ErrorHandling.aspx` w programie Visual Studio</span><span class="sxs-lookup"><span data-stu-id="f2229-123">Open the `ErrorHandling.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="f2229-124">Przejdź do znacznika deklaracyjnego strony (kliknij przycisk Źródło w dolnej części strony).</span><span class="sxs-lookup"><span data-stu-id="f2229-124">Go to the page s declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="f2229-125">Skopiuj tekst w `<asp:Content>` i `</asp:Content>` tagów (wiersze od 3 do 32), jak pokazano na rysunku 1.</span><span class="sxs-lookup"><span data-stu-id="f2229-125">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 32), as shown in Figure 1.</span></span>

<span data-ttu-id="f2229-126">[![skopiować tekst w &lt;ASP: zawartość kontrolki&gt;](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image2.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f2229-126">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image2.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image1.png)</span></span>

<span data-ttu-id="f2229-127">**Rysunek 1**. Skopiuj tekst w kontrolce `<asp:Content>` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="f2229-127">**Figure 1**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image3.png))</span></span>

1. <span data-ttu-id="f2229-128">Otwórz stronę `UIValidation.aspx`</span><span class="sxs-lookup"><span data-stu-id="f2229-128">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="f2229-129">Przejdź do znacznika deklaracyjnego strony</span><span class="sxs-lookup"><span data-stu-id="f2229-129">Go to the page s declarative markup</span></span>
3. <span data-ttu-id="f2229-130">Wklej tekst w kontrolce `<asp:Content>`.</span><span class="sxs-lookup"><span data-stu-id="f2229-130">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="f2229-131">Aby skopiować kod źródłowy, Otwórz stronę `ErrorHandling.aspx.vb` i skopiuj tylko tekst *w* klasie `EditDeleteDataList_ErrorHandling`.</span><span class="sxs-lookup"><span data-stu-id="f2229-131">To copy over the source code, open the `ErrorHandling.aspx.vb` page and copy just the text *within* the `EditDeleteDataList_ErrorHandling` class.</span></span> <span data-ttu-id="f2229-132">Skopiuj trzy procedury obsługi zdarzeń (`Products_EditCommand`, `Products_CancelCommand`i `Products_UpdateCommand`) wraz z metodą `DisplayExceptionDetails`, ale **nie** Kopiuj deklaracji klasy ani instrukcji `using`.</span><span class="sxs-lookup"><span data-stu-id="f2229-132">Copy the three event handlers (`Products_EditCommand`, `Products_CancelCommand`, and `Products_UpdateCommand`) along with the `DisplayExceptionDetails` method, but do **not** copy the class declaration or `using` statements.</span></span> <span data-ttu-id="f2229-133">Wklej *skopiowany tekst w* klasie `EditDeleteDataList_UIValidation` w `UIValidation.aspx.vb`.</span><span class="sxs-lookup"><span data-stu-id="f2229-133">Paste the copied text *within* the `EditDeleteDataList_UIValidation` class in `UIValidation.aspx.vb`.</span></span>

<span data-ttu-id="f2229-134">Po przeniesieniu zawartości i kodu z `ErrorHandling.aspx` do `UIValidation.aspx`Poświęć chwilę na przetestowanie stron w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="f2229-134">After moving over the content and code from `ErrorHandling.aspx` to `UIValidation.aspx`, take a moment to test out the pages in a browser.</span></span> <span data-ttu-id="f2229-135">Te same dane wyjściowe powinny być widoczne dla każdej z tych dwóch stron (patrz rysunek 2).</span><span class="sxs-lookup"><span data-stu-id="f2229-135">You should see the same output and experience the same functionality in each of these two pages (see Figure 2).</span></span>

<span data-ttu-id="f2229-136">[![Strona UIValidation. aspx naśladuje funkcjonalność w ErrorHandling. aspx](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image5.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="f2229-136">[![The UIValidation.aspx Page Mimics the Functionality in ErrorHandling.aspx](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image5.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image4.png)</span></span>

<span data-ttu-id="f2229-137">**Rysunek 2**. Strona `UIValidation.aspx` naśladuje funkcjonalność w `ErrorHandling.aspx` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="f2229-137">**Figure 2**: The `UIValidation.aspx` Page Mimics the Functionality in `ErrorHandling.aspx` ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image6.png))</span></span>

## <a name="step-2-adding-the-validation-controls-to-the-datalist-s-edititemtemplate"></a><span data-ttu-id="f2229-138">Krok 2. Dodawanie kontrolek walidacji do elementu DataList s EditItemTemplate</span><span class="sxs-lookup"><span data-stu-id="f2229-138">Step 2: Adding the Validation Controls to the DataList s EditItemTemplate</span></span>

<span data-ttu-id="f2229-139">Podczas konstruowania formularzy wprowadzania danych ważne jest, aby użytkownicy wprowadzali wszystkie wymagane pola, a wszystkie podane dane wejściowe są prawidłowymi, właściwie sformatowanymi wartościami.</span><span class="sxs-lookup"><span data-stu-id="f2229-139">When constructing data entry forms, it is important that users enter any required fields and that all their provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="f2229-140">Aby zapewnić, że dane wejściowe użytkownika są prawidłowe, ASP.NET zapewnia pięć wbudowanych kontrolek weryfikacji, które są przeznaczone do sprawdzania poprawności wartości pojedynczej wejściowej kontrolki sieci Web:</span><span class="sxs-lookup"><span data-stu-id="f2229-140">To help ensure that a user s inputs are valid, ASP.NET provides five built-in validation controls that are designed to validate the value of a single input Web control:</span></span>

- <span data-ttu-id="f2229-141">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) gwarantuje, że została podana wartość</span><span class="sxs-lookup"><span data-stu-id="f2229-141">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="f2229-142">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) sprawdza wartość pod kątem innej wartości kontrolki sieci Web lub wartości stałej lub gwarantuje, że format wartości s jest dozwolony dla określonego typu danych</span><span class="sxs-lookup"><span data-stu-id="f2229-142">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value s format is legal for a specified data type</span></span>
- <span data-ttu-id="f2229-143">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) gwarantuje, że wartość znajduje się w zakresie wartości</span><span class="sxs-lookup"><span data-stu-id="f2229-143">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="f2229-144">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) sprawdza poprawność wartości względem [wyrażenia regularnego](http://en.wikipedia.org/wiki/Regular_expression)</span><span class="sxs-lookup"><span data-stu-id="f2229-144">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="f2229-145">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) sprawdza poprawność wartości względem niestandardowej, zdefiniowanej przez użytkownika metody</span><span class="sxs-lookup"><span data-stu-id="f2229-145">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="f2229-146">Aby uzyskać więcej informacji na temat tych pięciu kontrolek, zapoznaj się z artykułem [Dodawanie kontrolek walidacji do edycji i wstawiania interfejsów](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) lub zapoznaj się z [sekcją kontroli walidacji](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/validation/default.aspx) [samouczków szybkiego startu ASP.NET](https://quickstarts.asp.net).</span><span class="sxs-lookup"><span data-stu-id="f2229-146">For more information on these five controls refer back to the [Adding Validation Controls to the Editing and Inserting Interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) tutorial or check out the [Validation Controls section](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://quickstarts.asp.net).</span></span>

<span data-ttu-id="f2229-147">W naszym samouczku będziemy musieli użyć elementu RequiredFieldValidator, aby upewnić się, że podano wartość dla nazwy produktu i CompareValidator, aby zapewnić, że wprowadzona cena ma wartość większą lub równą 0 i jest prezentowana w prawidłowym formacie waluty.</span><span class="sxs-lookup"><span data-stu-id="f2229-147">For our tutorial we'll need to use a RequiredFieldValidator to ensure that a value for the product name has been supplied and a CompareValidator to ensure that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="f2229-148">Chociaż ASP.NET 1. x miała te same pięć kontrolek weryfikacyjnych, ASP.NET 2,0 dodaliśmy kilka ulepszeń, główne dwa z nich obsługują skrypty po stronie klienta dla przeglądarek oprócz programu Internet Explorer i możliwość partycjonowania formantów walidacji na stronie do grupy walidacji.</span><span class="sxs-lookup"><span data-stu-id="f2229-148">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers in addition to Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="f2229-149">Aby uzyskać więcej informacji na temat nowych funkcji kontroli walidacji w 2,0, zapoznaj się z artykułem dotyczącym wypełniania [kontrolek weryfikacji w ASP.NET 2,0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="f2229-149">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>

<span data-ttu-id="f2229-150">Aby rozpocząć, Dodaj wymagane kontrolki weryfikacji do `EditItemTemplate`DataList.</span><span class="sxs-lookup"><span data-stu-id="f2229-150">Let s start by adding the necessary validation controls to the DataList s `EditItemTemplate`.</span></span> <span data-ttu-id="f2229-151">To zadanie można wykonać za pomocą projektanta, klikając łącze Edytuj szablony z taga inteligentnego DataList s lub stosując składnię deklaratywną.</span><span class="sxs-lookup"><span data-stu-id="f2229-151">This task can be performed through the Designer by clicking on the Edit Templates link from the DataList s smart tag, or through the declarative syntax.</span></span> <span data-ttu-id="f2229-152">Pozwól na przechodzenie przez proces przy użyciu opcji Edytuj szablony z widok Projekt.</span><span class="sxs-lookup"><span data-stu-id="f2229-152">Let s step through the process using the Edit Templates option from the Design view.</span></span> <span data-ttu-id="f2229-153">Po wybraniu edycji `EditItemTemplate`DataList, Dodaj element RequiredFieldValidator, przeciągając go z przybornika do interfejsu edycji szablonu, umieszczając go po `ProductName` polu tekstowym.</span><span class="sxs-lookup"><span data-stu-id="f2229-153">After choosing to edit the DataList s `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing it after the `ProductName` TextBox.</span></span>

<span data-ttu-id="f2229-154">[![dodać RequiredFieldValidator do EditItemTemplate po polu tekstowym ProductName](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image8.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f2229-154">[![Add a RequiredFieldValidator to the EditItemTemplate After the ProductName TextBox](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image8.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image7.png)</span></span>

<span data-ttu-id="f2229-155">**Rysunek 3**. Dodawanie RequiredFieldValidator do `EditItemTemplate After` `ProductName` pole tekstowe (kliknij,[Aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="f2229-155">**Figure 3**: Add a RequiredFieldValidator to the `EditItemTemplate After` the `ProductName` TextBox ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image9.png))</span></span>

<span data-ttu-id="f2229-156">Wszystkie kontrolki walidacji działają, sprawdzając poprawność danych wejściowych pojedynczej kontrolki sieci Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="f2229-156">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="f2229-157">W związku z tym musimy wskazać, że dodaliśmy RequiredFieldValidator powinna sprawdzić poprawność względem pola tekstowego `ProductName`; w tym celu należy ustawić [właściwość`ControlToValidate`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) kontrolki walidacji na `ID` odpowiedniej kontrolce sieci Web (`ProductName`w tym wystąpieniu).</span><span class="sxs-lookup"><span data-stu-id="f2229-157">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the `ProductName` TextBox; this is done by setting the validation control s [`ControlToValidate` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control (`ProductName`, in this instance).</span></span> <span data-ttu-id="f2229-158">Następnie ustaw [właściwość`ErrorMessage`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) na wartość należy podać nazwę produktu i [Właściwość`Text`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) , aby \*.</span><span class="sxs-lookup"><span data-stu-id="f2229-158">Next, set the [`ErrorMessage` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to You must provide the product s name and the [`Text` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to \*.</span></span> <span data-ttu-id="f2229-159">Wartość właściwości `Text`, jeśli podana, to tekst wyświetlany przez kontrolkę walidacji w przypadku niepowodzenia walidacji.</span><span class="sxs-lookup"><span data-stu-id="f2229-159">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="f2229-160">Wartość właściwości `ErrorMessage`, która jest wymagana, jest używana przez formant podsumowania walidacji; w przypadku pominięcia wartości właściwości `Text` Właściwość `ErrorMessage` zostanie wyświetlona przez kontrolkę walidacji dla nieprawidłowych danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="f2229-160">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="f2229-161">Po ustawieniu tych trzech właściwości RequiredFieldValidator ekran powinien wyglądać podobnie do rysunku 4.</span><span class="sxs-lookup"><span data-stu-id="f2229-161">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 4.</span></span>

<span data-ttu-id="f2229-162">[![ustawić właściwości RequiredFieldValidator s ControlToValidate obiektu, ErrorMessage i text](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image11.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="f2229-162">[![Set the RequiredFieldValidator s ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image11.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image10.png)</span></span>

<span data-ttu-id="f2229-163">**Rysunek 4**. Ustawianie właściwości RequiredFieldValidator `ControlToValidate`, `ErrorMessage`i `Text` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="f2229-163">**Figure 4**: Set the RequiredFieldValidator s `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image12.png))</span></span>

<span data-ttu-id="f2229-164">Po dodaniu RequiredFieldValidator do `EditItemTemplate`wszystko to, co ma na celu dodanie niezbędnej weryfikacji dla pola tekstowego cena produktu.</span><span class="sxs-lookup"><span data-stu-id="f2229-164">With the RequiredFieldValidator added to the `EditItemTemplate`, all that remains is to add the necessary validation for the product s price TextBox.</span></span> <span data-ttu-id="f2229-165">Ponieważ `UnitPrice` jest opcjonalne podczas edytowania rekordu, nie musimy dodawać RequiredFieldValidator.</span><span class="sxs-lookup"><span data-stu-id="f2229-165">Since the `UnitPrice` is optional when editing a record, we don t need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="f2229-166">Należy jednak dodać CompareValidator, aby upewnić się, że `UnitPrice`, jeśli jest podany, jest poprawnie sformatowana jako waluta i jest większa lub równa 0.</span><span class="sxs-lookup"><span data-stu-id="f2229-166">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="f2229-167">Dodaj CompareValidator do `EditItemTemplate` i ustaw jej Właściwość `ControlToValidate` na `UnitPrice`, jej Właściwość `ErrorMessage` na wartość Price musi być większa lub równa zero i nie może zawierać symbolu waluty oraz jego właściwości `Text`, aby \*.</span><span class="sxs-lookup"><span data-stu-id="f2229-167">Add the CompareValidator into the `EditItemTemplate` and set its `ControlToValidate` property to `UnitPrice`, its `ErrorMessage` property to The price must be greater than or equal to zero and cannot include the currency symbol, and its `Text` property to \*.</span></span> <span data-ttu-id="f2229-168">Aby wskazać, że wartość `UnitPrice` musi być większa lub równa 0, ustaw właściwość CompareValidator s [`Operator`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) na `GreaterThanEqual`, jej [Właściwość`ValueToCompare`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) na wartość 0, a jej [Właściwość`Type`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) na `Currency`.</span><span class="sxs-lookup"><span data-stu-id="f2229-168">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator s [`Operator` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [`ValueToCompare` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to 0, and its [`Type` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span>

<span data-ttu-id="f2229-169">Po dodaniu tych dwóch kontrolek walidacji, składnia deklaracyjne s `EditItemTemplate` s powinna wyglądać podobnie do poniższego:</span><span class="sxs-lookup"><span data-stu-id="f2229-169">After adding these two validation controls, the DataList s `EditItemTemplate` s declarative syntax should look similar to the following:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-datalist-s-editing-interface-cs/samples/sample1.aspx)]

<span data-ttu-id="f2229-170">Po wprowadzeniu tych zmian Otwórz stronę w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="f2229-170">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="f2229-171">Jeśli spróbujesz pominąć nazwę lub wprowadzić nieprawidłową wartość ceny podczas edytowania produktu, obok pola tekstowego pojawia się gwiazdka.</span><span class="sxs-lookup"><span data-stu-id="f2229-171">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="f2229-172">Jak pokazano na rysunku 5, wartość ceny, która zawiera symbol waluty, na przykład $19,95, jest uznawana za nieprawidłową.</span><span class="sxs-lookup"><span data-stu-id="f2229-172">As Figure 5 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="f2229-173">CompareValidator s `Currency` `Type` umożliwia używanie separatorów cyfr (takich jak przecinki lub kropki, w zależności od ustawień kultury) i wiodącego znaku plus lub minus, ale *nie zezwala na* symbol waluty.</span><span class="sxs-lookup"><span data-stu-id="f2229-173">The CompareValidator s `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="f2229-174">Takie zachowanie może Perplex użytkowników jako interfejs edycji obecnie renderuje `UnitPrice` przy użyciu formatu waluty.</span><span class="sxs-lookup"><span data-stu-id="f2229-174">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>

<span data-ttu-id="f2229-175">[![gwiazdki pojawia się obok pól tekstowych z nieprawidłowymi danymi wejściowymi](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image14.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="f2229-175">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image14.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image13.png)</span></span>

<span data-ttu-id="f2229-176">**Ilustracja 5**. obok pól tekstowych pojawia się gwiazdka z nieprawidłowymi danymi wejściowymi ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="f2229-176">**Figure 5**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image15.png))</span></span>

<span data-ttu-id="f2229-177">Gdy walidacja działa tak, jak to jest, użytkownik musi ręcznie usunąć symbol waluty podczas edytowania rekordu, co nie jest akceptowalne.</span><span class="sxs-lookup"><span data-stu-id="f2229-177">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="f2229-178">Ponadto jeśli w interfejsie edycyjnym są nieprawidłowe dane wejściowe, a przyciski Aktualizuj i Anuluj nie zostaną wywołane, program wywoła ogłaszanie zwrotne.</span><span class="sxs-lookup"><span data-stu-id="f2229-178">Moreover, if there are invalid inputs in the editing interface neither the Update nor Cancel buttons, when clicked, will invoke a postback.</span></span> <span data-ttu-id="f2229-179">Najlepiej, gdy przycisk Anuluj zwróci wartość DataList do stanu sprzed edycji, niezależnie od ważności danych wejściowych użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f2229-179">Ideally, the Cancel button would return the DataList to its pre-editing state regardless of the validity of the user s inputs.</span></span> <span data-ttu-id="f2229-180">Ponadto musimy upewnić się, że dane strony są prawidłowe przed zaktualizowaniem informacji o produkcie w programie obsługi zdarzeń DataList s `UpdateCommand`, ponieważ sprawdzanie poprawności logiki po stronie klienta może zostać pominięte przez użytkowników, których przeglądarki nie obsługują języka JavaScript lub których obsługa została wyłączona.</span><span class="sxs-lookup"><span data-stu-id="f2229-180">Also, we need to ensure that the page s data is valid before updating the product information in the DataList s `UpdateCommand` event handler, as the validation controls client-side logic can be bypassed by users whose browsers either don t support JavaScript or have its support disabled.</span></span>

## <a name="removing-the-currency-symbol-from-the-edititemtemplate-s-unitprice-textbox"></a><span data-ttu-id="f2229-181">Usuwanie symbolu waluty z pola tekstowego CenaJednostkowa EditItemTemplate s</span><span class="sxs-lookup"><span data-stu-id="f2229-181">Removing the Currency Symbol from the EditItemTemplate s UnitPrice TextBox</span></span>

<span data-ttu-id="f2229-182">W przypadku używania CompareValidator s `Currency``Type`sprawdzanie poprawności nie może zawierać żadnych symboli walut.</span><span class="sxs-lookup"><span data-stu-id="f2229-182">When using the CompareValidator s `Currency``Type`, the input being validated must not include any currency symbols.</span></span> <span data-ttu-id="f2229-183">Obecność takich symboli powoduje, że CompareValidator oznacza, że dane wejściowe są nieprawidłowe.</span><span class="sxs-lookup"><span data-stu-id="f2229-183">The presence of such symbols causes the CompareValidator to mark the input as invalid.</span></span> <span data-ttu-id="f2229-184">Jednak nasz interfejs edycji zawiera obecnie symbol waluty w `UnitPrice` TextBox, co oznacza, że użytkownik musi jawnie usunąć symbol waluty przed zapisaniem zmian.</span><span class="sxs-lookup"><span data-stu-id="f2229-184">However, our editing interface currently includes a currency symbol in the `UnitPrice` TextBox, meaning the user must explicitly remove the currency symbol before saving their changes.</span></span> <span data-ttu-id="f2229-185">Aby rozwiązać ten sposób, mamy trzy opcje:</span><span class="sxs-lookup"><span data-stu-id="f2229-185">To remedy this we have three options:</span></span>

1. <span data-ttu-id="f2229-186">Skonfiguruj `EditItemTemplate` tak, aby wartość TextBox `UnitPrice` nie była sformatowana jako waluta.</span><span class="sxs-lookup"><span data-stu-id="f2229-186">Configure the `EditItemTemplate` so that the `UnitPrice` TextBox value is not formatted as a currency.</span></span>
2. <span data-ttu-id="f2229-187">Zezwalaj użytkownikowi na wprowadzanie symbolu waluty przez usunięcie CompareValidator i zastąpienie go RegularExpressionValidator, który sprawdza prawidłowo sformatowaną wartość waluty.</span><span class="sxs-lookup"><span data-stu-id="f2229-187">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that checks for a properly formatted currency value.</span></span> <span data-ttu-id="f2229-188">Wezwanie w tym miejscu polega na tym, że wyrażenie regularne służące do sprawdzania poprawności wartości walutowej nie jest tak proste jak CompareValidator i wymagało pisania kodu, jeśli chcemy uwzględnić ustawienia kultury.</span><span class="sxs-lookup"><span data-stu-id="f2229-188">The challenge here is that the regular expression to validate a currency value is not as straightforward as the CompareValidator and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="f2229-189">Całkowicie Usuń kontrolkę walidacji i zależą od niestandardowej logiki walidacji po stronie serwera w programie obsługi zdarzeń `RowUpdating` GridView.</span><span class="sxs-lookup"><span data-stu-id="f2229-189">Remove the validation control altogether and rely on custom server-side validation logic in the GridView s `RowUpdating` event handler.</span></span>

<span data-ttu-id="f2229-190">Zezwól na pracę z opcją 1 dla tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="f2229-190">Let s go with option 1 for this tutorial.</span></span> <span data-ttu-id="f2229-191">Obecnie `UnitPrice` jest sformatowana jako wartość walutowa ze względu na wyrażenie wiązania danych dla pola tekstowego w `EditItemTemplate`: `<%# Eval("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="f2229-191">Currently the `UnitPrice` is formatted as a currency value due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Eval("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="f2229-192">Zmień instrukcję `Eval` na `Eval("UnitPrice", "{0:n2}")`, która formatuje wynik jako liczbę z dwiema cyframi precyzji.</span><span class="sxs-lookup"><span data-stu-id="f2229-192">Change the `Eval` statement to `Eval("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="f2229-193">Można to zrobić bezpośrednio poprzez składnię deklaratywną lub klikając łącze Edytuj powiązania danych z `UnitPrice` TextBox w `EditItemTemplate`DataList.</span><span class="sxs-lookup"><span data-stu-id="f2229-193">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `UnitPrice` TextBox in the DataList s `EditItemTemplate`.</span></span>

<span data-ttu-id="f2229-194">W przypadku tej zmiany sformatowana cena w interfejsie edycji obejmuje przecinki jako separator grupy i kropkę jako separator dziesiętny, ale pozostawia symbol waluty.</span><span class="sxs-lookup"><span data-stu-id="f2229-194">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="f2229-195">W przypadku usuwania formatu waluty z interfejsu edytowalnego warto ułatwić umieszczenie symbolu waluty jako tekstu spoza pola tekstowego.</span><span class="sxs-lookup"><span data-stu-id="f2229-195">When removing the currency format from the editable interface, I find it helpful to put the currency symbol as text outside the TextBox.</span></span> <span data-ttu-id="f2229-196">Służy to jako Wskazówka dla użytkownika, że nie muszą podawać symbolu waluty.</span><span class="sxs-lookup"><span data-stu-id="f2229-196">This serves as a hint to the user that they do not need to provide the currency symbol.</span></span>

## <a name="fixing-the-cancel-button"></a><span data-ttu-id="f2229-197">Naprawianie przycisku Anuluj</span><span class="sxs-lookup"><span data-stu-id="f2229-197">Fixing the Cancel Button</span></span>

<span data-ttu-id="f2229-198">Domyślnie formanty sieci Web walidacji emitują kod JavaScript, aby przeprowadzić walidację po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="f2229-198">By default, the validation Web controls emit JavaScript to perform validation on the client-side.</span></span> <span data-ttu-id="f2229-199">Gdy zostanie kliknięty przycisk, element LinkButton lub kliknięto element ImageButton, kontrolki walidacji na stronie są sprawdzane po stronie klienta przed wykonaniem ogłaszania zwrotnego.</span><span class="sxs-lookup"><span data-stu-id="f2229-199">When a Button, LinkButton, or ImageButton is clicked, the validation controls on the page are checked on the client-side before the postback occurs.</span></span> <span data-ttu-id="f2229-200">Jeśli istnieją jakieś nieprawidłowe dane, ogłaszanie zwrotne zostanie anulowane.</span><span class="sxs-lookup"><span data-stu-id="f2229-200">If there is any invalid data, the postback is cancelled.</span></span> <span data-ttu-id="f2229-201">W przypadku niektórych przycisków ważność danych może być nieistotna. w takim przypadku unieważnienie ogłaszania zwrotnego zostało anulowane z powodu nieprawidłowych danych.</span><span class="sxs-lookup"><span data-stu-id="f2229-201">For certain Buttons, though, the validity of the data might be immaterial; in such a case, having the postback cancelled due to invalid data is a nuisance.</span></span>

<span data-ttu-id="f2229-202">Przycisk Anuluj to przykład.</span><span class="sxs-lookup"><span data-stu-id="f2229-202">The Cancel button is such an example.</span></span> <span data-ttu-id="f2229-203">Załóżmy, że użytkownik wprowadza nieprawidłowe dane, takie jak pominięcie nazwy produktu, a następnie decydowanie o tym, że nie chcesz, aby zapisał produkt po wszystko i trafi przycisk Anuluj.</span><span class="sxs-lookup"><span data-stu-id="f2229-203">Imagine that a user enters invalid data, such as omitting the product s name, and then decides she doesn t want to save the product after all and hits the Cancel button.</span></span> <span data-ttu-id="f2229-204">Obecnie przycisk Anuluj wyzwala kontrolki walidacji na stronie, w której raport nie ma nazwy produktu i uniemożliwia ogłaszanie zwrotne.</span><span class="sxs-lookup"><span data-stu-id="f2229-204">Currently, the Cancel button triggers the validation controls on the page, which report that the product name is missing and prevent the postback.</span></span> <span data-ttu-id="f2229-205">Użytkownik musi wpisać jakiś tekst w polu tekstowym `ProductName` po prostu, aby anulować proces edycji.</span><span class="sxs-lookup"><span data-stu-id="f2229-205">Our user has to type some text into the `ProductName` TextBox just to cancel out of the editing process.</span></span>

<span data-ttu-id="f2229-206">Na szczęście przycisk, element LinkButton i kliknięto element ImageButton mają [właściwość`CausesValidation`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.button.causesvalidation.aspx) , która może wskazywać, czy kliknięcie przycisku powinno inicjować logikę walidacji (domyślnie `True`).</span><span class="sxs-lookup"><span data-stu-id="f2229-206">Fortunately, the Button, LinkButton, and ImageButton have a [`CausesValidation` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.button.causesvalidation.aspx) that can indicate whether or not clicking the Button should initiate the validation logic (defaults to `True`).</span></span> <span data-ttu-id="f2229-207">Ustaw właściwość `CausesValidation` przycisku Anuluj na `False`.</span><span class="sxs-lookup"><span data-stu-id="f2229-207">Set the Cancel Button s `CausesValidation` property to `False`.</span></span>

## <a name="ensuring-the-inputs-are-valid-in-the-updatecommand-event-handler"></a><span data-ttu-id="f2229-208">Upewnienie się, że dane wejściowe są prawidłowe w programie obsługi zdarzeń elementu UpdateCommand</span><span class="sxs-lookup"><span data-stu-id="f2229-208">Ensuring the Inputs are Valid in the UpdateCommand Event Handler</span></span>

<span data-ttu-id="f2229-209">Ze względu na skrypt po stronie klienta emitowany przez kontrolki walidacji, jeśli użytkownik wprowadzi nieprawidłowe dane wejściowe, kontrolki walidacji anulują wszelkie ogłaszania zwrotne zainicjowane przez przycisk, element LinkButton lub kliknięto element ImageButton, których właściwości `CausesValidation` są `True` (wartość domyślna).</span><span class="sxs-lookup"><span data-stu-id="f2229-209">Due to the client-side script emitted by the validation controls, if a user enters invalid input the validation controls cancel any postbacks initiated by Button, LinkButton, or ImageButton controls whose `CausesValidation` properties are `True` (the default).</span></span> <span data-ttu-id="f2229-210">Jeśli jednak użytkownik zostanie odwiedzany przy użyciu przeglądarki antiquated lub jednej z nich, której obsługa języka JavaScript została wyłączona, sprawdzanie poprawności po stronie klienta nie zostanie wykonane.</span><span class="sxs-lookup"><span data-stu-id="f2229-210">However, if a user is visiting with an antiquated browser or one whose JavaScript support has been disabled, the client-side validation checks will not execute.</span></span>

<span data-ttu-id="f2229-211">Wszystkie kontrolki walidacji ASP.NET powtarzają swoją logikę weryfikacji natychmiast po odświeżeniu i raportują ogólną ważność danych wejściowych stron za pośrednictwem [właściwości`Page.IsValid`](https://msdn.microsoft.com/library/system.web.ui.page.isvalid.aspx).</span><span class="sxs-lookup"><span data-stu-id="f2229-211">All of the ASP.NET validation controls repeat their validation logic immediately upon postback and report the overall validity of the page s inputs via the [`Page.IsValid` property](https://msdn.microsoft.com/library/system.web.ui.page.isvalid.aspx).</span></span> <span data-ttu-id="f2229-212">Jednak przepływ strony nie zostanie przerwany ani zatrzymany w sposób oparty na wartości `Page.IsValid`.</span><span class="sxs-lookup"><span data-stu-id="f2229-212">However, the page flow is not interrupted or stopped in any way based on the value of `Page.IsValid`.</span></span> <span data-ttu-id="f2229-213">Deweloperzy mogą upewnić się, że właściwość `Page.IsValid` ma wartość `True` przed kontynuowaniem kodu, który przyjmuje prawidłowe dane wejściowe.</span><span class="sxs-lookup"><span data-stu-id="f2229-213">As developers, it is our responsibility to ensure that the `Page.IsValid` property has a value of `True` before proceeding with code that assumes valid input data.</span></span>

<span data-ttu-id="f2229-214">Jeśli użytkownik ma wyłączony kod JavaScript, odwiedza naszą stronę, edytuje produkt, wprowadza wartość ceny zbyt kosztowną i klika przycisk Aktualizuj, po stronie klienta zostanie pominięte, a proces ogłaszania zwrotnego zostanie przesunięty.</span><span class="sxs-lookup"><span data-stu-id="f2229-214">If a user has JavaScript disabled, visits our page, edits a product, enters a price value of Too expensive, and clicks the Update button, the client-side validation will be bypassed and a postback will ensue.</span></span> <span data-ttu-id="f2229-215">W przypadku ogłaszania zwrotnego ASP.NET stronę `UpdateCommand` s programu obsługi zdarzeń i występuje wyjątek podczas próby przeanalizowania zbyt kosztownych `Decimal`.</span><span class="sxs-lookup"><span data-stu-id="f2229-215">On postback, the ASP.NET page s `UpdateCommand` event handler executes and an exception is raised when attempting to parse Too expensive to a `Decimal`.</span></span> <span data-ttu-id="f2229-216">Ze względu na to, że mamy obsługę wyjątków, taki wyjątek będzie obsłużony w sposób płynny, ale możemy zapobiec poślizgu nieprawidłowych danych w pierwszym miejscu przez wykonanie procedury obsługi zdarzeń `UpdateCommand`, jeśli `Page.IsValid` ma wartość `True`.</span><span class="sxs-lookup"><span data-stu-id="f2229-216">Since we have exception handling, such an exception will be handled gracefully, but we could prevent the invalid data from slipping through in the first place by only proceeding with the `UpdateCommand` event handler if `Page.IsValid` has a value of `True`.</span></span>

<span data-ttu-id="f2229-217">Dodaj następujący kod na początku procedury obsługi zdarzeń `UpdateCommand` bezpośrednio przed blokiem `Try`:</span><span class="sxs-lookup"><span data-stu-id="f2229-217">Add the following code to the start of the `UpdateCommand` event handler, immediately before the `Try` block:</span></span>

[!code-csharp[Main](adding-validation-controls-to-the-datalist-s-editing-interface-cs/samples/sample2.cs)]

<span data-ttu-id="f2229-218">Dzięki temu produkt będzie podejmować próby aktualizacji tylko wtedy, gdy przesłane dane są prawidłowe.</span><span class="sxs-lookup"><span data-stu-id="f2229-218">With this addition, the product will attempt to be updated only if the submitted data is valid.</span></span> <span data-ttu-id="f2229-219">Większość użytkowników nie będzie w stanie ogłaszać nieprawidłowych danych z powodu weryfikacji skryptów po stronie klienta, ale użytkownicy, których przeglądarki nie obsługują języka JavaScript lub których obsługa języka JavaScript została wyłączona, mogą ominąć sprawdzanie po stronie klienta i przesłać nieprawidłowe dane.</span><span class="sxs-lookup"><span data-stu-id="f2229-219">Most users won't be able to postback invalid data due to the validation controls client-side scripts, but users whose browsers don t support JavaScript or that have JavaScript support disabled, can bypass the client-side checks and submit invalid data.</span></span>

> [!NOTE]
> <span data-ttu-id="f2229-220">Czytnik uważni będzie się odwoływać, gdy aktualizujesz dane przy użyciu widoku GridView, nie musimy jawnie sprawdzać właściwości `Page.IsValid` w klasie powiązanej z kodem strony.</span><span class="sxs-lookup"><span data-stu-id="f2229-220">The astute reader will recall that when updating data with the GridView, we didn't need to explicitly check the `Page.IsValid` property in our page s code-behind class.</span></span> <span data-ttu-id="f2229-221">Jest to spowodowane tym, że widok GridView sprawdza Właściwość `Page.IsValid` dla nas i tylko kontynuuje aktualizację tylko wtedy, gdy zwróci wartość `True`.</span><span class="sxs-lookup"><span data-stu-id="f2229-221">This is because the GridView consults the `Page.IsValid` property for us and only proceeds with the update only if it returns a value of `True`.</span></span>

## <a name="step-3-summarizing-data-entry-problems"></a><span data-ttu-id="f2229-222">Krok 3. podsumowanie problemów z wprowadzaniem danych</span><span class="sxs-lookup"><span data-stu-id="f2229-222">Step 3: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="f2229-223">Oprócz pięciu kontrolek weryfikacyjnych ASP.NET zawiera [kontrolkę podsumowania walidacji](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), która wyświetla `ErrorMessage` s tych kontrolek sprawdzania poprawności, które wykryły nieprawidłowe dane.</span><span class="sxs-lookup"><span data-stu-id="f2229-223">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="f2229-224">Te dane podsumowujące mogą być wyświetlane jako tekst na stronie sieci Web lub przez modalne, po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="f2229-224">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="f2229-225">Pozwól usłudze s ulepszyć ten samouczek, aby dołączyć element MessageBox po stronie klienta podsumowujący wszelkie problemy z walidacją.</span><span class="sxs-lookup"><span data-stu-id="f2229-225">Let s enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="f2229-226">Aby to osiągnąć, przeciągnij formant podsumowania walidacji z przybornika do projektanta.</span><span class="sxs-lookup"><span data-stu-id="f2229-226">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="f2229-227">Lokalizacja kontrolki podsumowania walidacji jest niezależna, ponieważ będziemy ją skonfigurować tak, aby wyświetlała tylko podsumowanie jako element MessageBox.</span><span class="sxs-lookup"><span data-stu-id="f2229-227">The location of the ValidationSummary control doesn t really matter, since we re going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="f2229-228">Po dodaniu kontrolki ustaw jej [właściwość`ShowSummary`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) na `False` i jej [właściwość`ShowMessageBox`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) na `True`.</span><span class="sxs-lookup"><span data-stu-id="f2229-228">After adding the control, set its [`ShowSummary` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `False` and its [`ShowMessageBox` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `True`.</span></span> <span data-ttu-id="f2229-229">W tym przypadku wszelkie błędy sprawdzania poprawności są podsumowywane w elemencie MessageBox po stronie klienta (patrz rysunek 6).</span><span class="sxs-lookup"><span data-stu-id="f2229-229">With this addition, any validation errors are summarized in a client-side messagebox (see Figure 6).</span></span>

<span data-ttu-id="f2229-230">[![błędy walidacji są sumowane w elemencie MessageBox po stronie klienta](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image17.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="f2229-230">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image17.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image16.png)</span></span>

<span data-ttu-id="f2229-231">**Ilustracja 6**. błędy sprawdzania poprawności są sumowane w elemencie MessageBox po stronie klienta ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="f2229-231">**Figure 6**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image18.png))</span></span>

## <a name="summary"></a><span data-ttu-id="f2229-232">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="f2229-232">Summary</span></span>

<span data-ttu-id="f2229-233">W tym samouczku przedstawiono sposób zmniejszania prawdopodobieństwa wyjątków przy użyciu kontrolek weryfikacji, aby aktywnie upewnić się, że nasze dane wejściowe użytkowników są prawidłowe przed podjęciem próby użycia ich w przepływie aktualizacji.</span><span class="sxs-lookup"><span data-stu-id="f2229-233">In this tutorial we saw how to reduce the likelihood of exceptions by using validation controls to proactively ensure that our users inputs are valid before attempting to use them in the updating workflow.</span></span> <span data-ttu-id="f2229-234">Program ASP.NET zapewnia pięć kontrolek sieci Web weryfikacji, które są przeznaczone do inspekcji określonego danych wejściowych kontrolki sieci Web i raportują z powrotem do danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="f2229-234">ASP.NET provides five validation Web controls that are designed to inspect a particular Web control s input and report back on the input s validity.</span></span> <span data-ttu-id="f2229-235">W tym samouczku użyto dwóch z pięciu kontrolek RequiredFieldValidator i CompareValidator, aby upewnić się, że podano nazwę produktu i że cena miała format waluty o wartości większej lub równej zero.</span><span class="sxs-lookup"><span data-stu-id="f2229-235">In this tutorial we used two of those five controls the RequiredFieldValidator and the CompareValidator to ensure that the product s name was supplied and that the price had a currency format with a value greater than or equal to zero.</span></span>

<span data-ttu-id="f2229-236">Dodawanie kontrolek weryfikacji do interfejsu edycji DataList s jest tak proste, jak przeciąganie ich do `EditItemTemplate` z przybornika i Ustawianie kilku właściwości.</span><span class="sxs-lookup"><span data-stu-id="f2229-236">Adding validation controls to the DataList s editing interface is as simple as dragging them onto the `EditItemTemplate` from the Toolbox and setting a handful of properties.</span></span> <span data-ttu-id="f2229-237">Domyślnie formanty walidacji automatycznie emitują skrypt walidacji po stronie klienta; udostępniają one również weryfikację po stronie serwera na serwerze ogłaszania zwrotnego, przechowując łączny wynik we właściwości `Page.IsValid`.</span><span class="sxs-lookup"><span data-stu-id="f2229-237">By default, the validation controls automatically emit client-side validation script; they also provide server-side validation on postback, storing the cumulative result in the `Page.IsValid` property.</span></span> <span data-ttu-id="f2229-238">Aby pominąć walidację po stronie klienta po kliknięciu przycisku, element LinkButton lub kliknięto element ImageButton, należy ustawić właściwość Button-`CausesValidation` na `False`.</span><span class="sxs-lookup"><span data-stu-id="f2229-238">To bypass the client-side validation when a Button, LinkButton, or ImageButton is clicked, set the button s `CausesValidation` property to `False`.</span></span> <span data-ttu-id="f2229-239">Ponadto przed wykonaniem jakichkolwiek zadań z danymi przesłanymi na stronie ogłaszania zwrotnego upewnij się, że właściwość `Page.IsValid` zwraca `True`.</span><span class="sxs-lookup"><span data-stu-id="f2229-239">Also, before performing any tasks with the data submitted on postback, ensure that the `Page.IsValid` property returns `True`.</span></span>

<span data-ttu-id="f2229-240">Wszystkie samouczki edycji elementu DataList zostały zbadane, więc bardzo proste edytowanie interfejsów to pole tekstowe dla nazwy produktu i innej ceny.</span><span class="sxs-lookup"><span data-stu-id="f2229-240">All of the DataList editing tutorials we ve examined so far have had very simple editing interfaces a TextBox for the product s name and another for the price.</span></span> <span data-ttu-id="f2229-241">Interfejs edytowania, jednak może zawierać kombinację różnych kontrolek sieci Web, takich jak kontrolek DropDownList, Calendars, RadioButtons, CheckBoxs i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="f2229-241">The editing interface, however, can contain a mix of different Web controls, such as DropDownLists, Calendars, RadioButtons, CheckBoxes, and so on.</span></span> <span data-ttu-id="f2229-242">W naszym następnym samouczku dowiesz się, jak utworzyć interfejs, który używa różnych kontrolek sieci Web.</span><span class="sxs-lookup"><span data-stu-id="f2229-242">In our next tutorial we'll look at building an interface that uses a variety of Web controls.</span></span>

<span data-ttu-id="f2229-243">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="f2229-243">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="f2229-244">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="f2229-244">About the Author</span></span>

<span data-ttu-id="f2229-245">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor siedmiu grup ASP/ASP. NET Books i założyciel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="f2229-245">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f2229-246">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="f2229-246">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f2229-247">Jego Najnowsza książka to [*Sams ASP.NET 2,0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="f2229-247">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="f2229-248">Można go osiągnąć w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f2229-248">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="f2229-249">lub za pośrednictwem swojego blogu, który można znaleźć w [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="f2229-249">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="f2229-250">Specjalne podziękowania</span><span class="sxs-lookup"><span data-stu-id="f2229-250">Special Thanks To</span></span>

<span data-ttu-id="f2229-251">Ta seria samouczków została sprawdzona przez wielu przydatnych recenzentów.</span><span class="sxs-lookup"><span data-stu-id="f2229-251">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="f2229-252">Recenzenci liderzy dla tego samouczka to Dennis Patterson, Krzysztof Pespisa i Liz Shulok.</span><span class="sxs-lookup"><span data-stu-id="f2229-252">Lead reviewers for this tutorial were Dennis Patterson, Ken Pespisa, and Liz Shulok.</span></span> <span data-ttu-id="f2229-253">Chcesz przeglądać moje nadchodzące artykuły MSDN?</span><span class="sxs-lookup"><span data-stu-id="f2229-253">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="f2229-254">Jeśli tak, upuść mi linię w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f2229-254">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f2229-255">[Poprzednie](handling-bll-and-dal-level-exceptions-cs.md)
> [dalej](customizing-the-datalist-s-editing-interface-cs.md)</span><span class="sxs-lookup"><span data-stu-id="f2229-255">[Previous](handling-bll-and-dal-level-exceptions-cs.md)
[Next](customizing-the-datalist-s-editing-interface-cs.md)</span></span>

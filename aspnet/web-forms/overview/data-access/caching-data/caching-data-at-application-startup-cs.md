---
uid: web-forms/overview/data-access/caching-data/caching-data-at-application-startup-cs
title: Buforowanie danych przy uruchamianiu aplikacjiC#() | Microsoft Docs
author: rick-anderson
description: Niektóre dane aplikacji sieci Web są często używane, a niektóre dane będą rzadko używane. Możemy ulepszyć wydajność naszej aplikacji ASP.NET b...
ms.author: riande
ms.date: 05/30/2007
ms.assetid: 22ca8efa-7cd1-45a7-b9ce-ce6eb3b3ff95
msc.legacyurl: /web-forms/overview/data-access/caching-data/caching-data-at-application-startup-cs
msc.type: authoredcontent
ms.openlocfilehash: a0b55b0df1b7843120de284891e16178df23fabe
ms.sourcegitcommit: fe5c7512383a9b0a05d321ff10d3cca1611556f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/05/2019
ms.locfileid: "70386563"
---
# <a name="caching-data-at-application-startup-c"></a><span data-ttu-id="760da-104">Buforowanie danych przy uruchamianiu aplikacji (C#)</span><span class="sxs-lookup"><span data-stu-id="760da-104">Caching Data at Application Startup (C#)</span></span>

<span data-ttu-id="760da-105">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="760da-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="760da-106">Pobierz plik PDF</span><span class="sxs-lookup"><span data-stu-id="760da-106">Download PDF</span></span>](caching-data-at-application-startup-cs/_static/datatutorial60cs1.pdf)

> <span data-ttu-id="760da-107">Niektóre dane aplikacji sieci Web są często używane, a niektóre dane będą rzadko używane.</span><span class="sxs-lookup"><span data-stu-id="760da-107">In any Web application some data will be frequently used and some data will be infrequently used.</span></span> <span data-ttu-id="760da-108">Możemy ulepszyć wydajność naszej aplikacji ASP.NET, ładując z wyprzedzeniem często używane dane, technikę znaną jako pamięć podręczna.</span><span class="sxs-lookup"><span data-stu-id="760da-108">We can improve the performance of our ASP.NET application by loading in advance the frequently-used data, a technique known as Caching.</span></span> <span data-ttu-id="760da-109">W tym samouczku przedstawiono jedno podejście do aktywnego ładowania, które polega na załadowaniu danych do pamięci podręcznej podczas uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="760da-109">This tutorial demonstrates one approach to proactive loading, which is to load data into the cache at application startup.</span></span>

## <a name="introduction"></a><span data-ttu-id="760da-110">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="760da-110">Introduction</span></span>

<span data-ttu-id="760da-111">Dwa poprzednie samouczki szukały buforowania danych w prezentacji i warstwach pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="760da-111">The two previous tutorials looked at caching data in the Presentation and Caching Layers.</span></span> <span data-ttu-id="760da-112">W obszarze [buforowanie danych za](caching-data-with-the-objectdatasource-cs.md)pomocą elementu ObjectDataSource oglądamy użycie funkcji pamięci podręcznej ObjectDataSource do buforowania danych w warstwie prezentacji.</span><span class="sxs-lookup"><span data-stu-id="760da-112">In [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md), we looked at using the ObjectDataSource's caching features to cache data in the Presentation Layer.</span></span> <span data-ttu-id="760da-113">[Buforowanie danych w architekturze](caching-data-in-the-architecture-cs.md) zbada buforowanie w nowej, oddzielnej warstwie pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="760da-113">[Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) examined caching in a new, separate Caching Layer.</span></span> <span data-ttu-id="760da-114">Oba z tych samouczków używały *reaktywnego ładowania* podczas pracy z pamięcią podręczną danych.</span><span class="sxs-lookup"><span data-stu-id="760da-114">Both of these tutorials used *reactive loading* in working with the data cache.</span></span> <span data-ttu-id="760da-115">Przy próbie ponownego załadowania, za każdym razem, gdy dane są żądane, system najpierw sprawdza, czy znajduje się w pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="760da-115">With reactive loading, each time the data is requested, the system first checks if it's in the cache.</span></span> <span data-ttu-id="760da-116">W przeciwnym razie dane pochodzą ze źródła źródłowego, takiego jak baza danych, a następnie są przechowywane w pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="760da-116">If not, it grabs the data from the originating source, such as the database, and then stores it in the cache.</span></span> <span data-ttu-id="760da-117">Główną zaletą dla reaktywnego ładowania jest jego łatwość wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="760da-117">The main advantage to reactive loading is its ease of implementation.</span></span> <span data-ttu-id="760da-118">Jedną z jej wad jest nierówna wydajność między żądaniami.</span><span class="sxs-lookup"><span data-stu-id="760da-118">One of its disadvantages is its uneven performance across requests.</span></span> <span data-ttu-id="760da-119">Załóżmy, że strona, która używa warstwy buforowania z poprzedniego samouczka, umożliwia wyświetlenie informacji o produkcie.</span><span class="sxs-lookup"><span data-stu-id="760da-119">Imagine a page that uses the Caching Layer from the preceding tutorial to display product information.</span></span> <span data-ttu-id="760da-120">Gdy ta strona jest odwiedzana po raz pierwszy lub po raz pierwszy po usunięciu danych z pamięci podręcznej z powodu ograniczeń pamięci lub osiągnięcia określonego czasu wygaśnięcia, dane muszą zostać pobrane z bazy danych.</span><span class="sxs-lookup"><span data-stu-id="760da-120">When this page is visited for the first time, or visited for the first time after the cached data has been evicted due to memory constraints or the specified expiry having been reached, the data must be retrieved from the database.</span></span> <span data-ttu-id="760da-121">W związku z tym te żądania użytkowników będą trwać dłużej niż żądania użytkowników, które mogą być obsługiwane przez pamięć podręczną.</span><span class="sxs-lookup"><span data-stu-id="760da-121">Therefore, these users requests will take longer than users requests that can be served by the cache.</span></span>

<span data-ttu-id="760da-122">Funkcja *aktywnego ładowania* zapewnia niezbędną strategię zarządzania pamięcią podręczną, która wygładza wydajność między żądaniami przez załadowanie danych z pamięci podręcznej przed ich zainstalowaniem.</span><span class="sxs-lookup"><span data-stu-id="760da-122">*Proactive loading* provides an alternative cache management strategy that smoothes out the performance across requests by loading the cached data before it's needed.</span></span> <span data-ttu-id="760da-123">Zazwyczaj proaktywne ładowanie używa pewnego procesu, który okresowo sprawdza lub jest powiadamiany, gdy została przekazana aktualizacja danych źródłowych.</span><span class="sxs-lookup"><span data-stu-id="760da-123">Typically, proactive loading uses some process that either periodically checks or is notified when there has been an update to the underlying data.</span></span> <span data-ttu-id="760da-124">Następnie ten proces aktualizuje pamięć podręczną, aby zachować jej świeżość.</span><span class="sxs-lookup"><span data-stu-id="760da-124">This process then updates the cache to keep it fresh.</span></span> <span data-ttu-id="760da-125">Proaktywne ładowanie jest szczególnie przydatne, jeśli dane podstawowe pochodzą z wolnego połączenia z bazą danych, usługi sieci Web lub innego, szczególnie powolnego źródła danych.</span><span class="sxs-lookup"><span data-stu-id="760da-125">Proactive loading is especially useful if the underlying data comes from a slow database connection, a Web service, or some other particularly sluggish data source.</span></span> <span data-ttu-id="760da-126">Jednak to podejście do aktywnego ładowania jest trudniejsze do zaimplementowania, ponieważ wymaga tworzenia, zarządzania i wdrażania procesu w celu sprawdzenia pod kątem zmian i zaktualizowania pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="760da-126">But this approach to proactive loading is more difficult to implement, as it requires creating, managing, and deploying a process to check for changes and update the cache.</span></span>

<span data-ttu-id="760da-127">Inna wersja aktywnego ładowania i typ, który będziemy eksplorować w tym samouczku, ładuje dane do pamięci podręcznej podczas uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="760da-127">Another flavor of proactive loading, and the type we'll be exploring in this tutorial, is loading data into the cache at application startup.</span></span> <span data-ttu-id="760da-128">To podejście jest szczególnie przydatne w przypadku buforowania danych statycznych, takich jak rekordy w tabelach odnośników bazy danych.</span><span class="sxs-lookup"><span data-stu-id="760da-128">This approach is especially useful for caching static data, such as the records in database lookup tables.</span></span>

> [!NOTE]
> <span data-ttu-id="760da-129">Dokładniejsze Omówienie różnic między aktywnym i reaktywnym ładowaniem, a także listami informatyków, wad i zaleceń dotyczących implementacji można znaleźć w sekcji [Zarządzanie zawartością pamięci podręcznej](https://msdn.microsoft.com/library/ms978503.aspx) w [przewodniku po architekturze platformy .NET. Aplikacje struktury](https://msdn.microsoft.com/library/ms978498.aspx).</span><span class="sxs-lookup"><span data-stu-id="760da-129">For a more in-depth look at the differences between proactive and reactive loading, as well as lists of pros, cons, and implementation recommendations, refer to the [Managing the Contents of a Cache](https://msdn.microsoft.com/library/ms978503.aspx) section of the [Caching Architecture Guide for .NET Framework Applications](https://msdn.microsoft.com/library/ms978498.aspx).</span></span>

## <a name="step-1-determining-what-data-to-cache-at-application-startup"></a><span data-ttu-id="760da-130">Krok 1. Określanie, które dane mają być buforowane przy uruchamianiu aplikacji</span><span class="sxs-lookup"><span data-stu-id="760da-130">Step 1: Determining What Data to Cache at Application Startup</span></span>

<span data-ttu-id="760da-131">Przykłady buforowania korzystające z ponownej ładowania, które zostały zbadane w poprzednich dwóch samouczkach, działają prawidłowo i dane mogą być okresowo zmieniane i nie trwają exorbitantly.</span><span class="sxs-lookup"><span data-stu-id="760da-131">The caching examples using reactive loading that we examined in the previous two tutorials work well with data that may periodically change and does not take exorbitantly long to generate.</span></span> <span data-ttu-id="760da-132">Ale jeśli dane w pamięci podręcznej nigdy nie ulegną zmianie, wygaśnięcie czasu używane przez ponowne ładowanie jest zbędne.</span><span class="sxs-lookup"><span data-stu-id="760da-132">But if the cached data never changes, the expiry used by reactive loading is superfluous.</span></span> <span data-ttu-id="760da-133">Podobnie, jeśli dane przechowywane w pamięci podręcznej zajmują zbyt dużo czasu na wygenerowanie, wówczas Ci użytkownicy, których żądania znajdą pustą pamięć podręczną, będą musieli nadmiernie poczekać podczas pobierania danych źródłowych.</span><span class="sxs-lookup"><span data-stu-id="760da-133">Likewise, if the data being cached takes an exceedingly long time to generate, then those users whose requests find the cache empty will have to endure a lengthy wait while the underlying data is retrieved.</span></span> <span data-ttu-id="760da-134">Należy rozważyć buforowanie danych statycznych i danych, które trwają wyjątkowo długo do generowania podczas uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="760da-134">Consider caching static data and data that takes an exceptionally long time to generate at application startup.</span></span>

<span data-ttu-id="760da-135">Bazy danych mają wiele dynamicznych, często zmieniających się wartości, a większość z nich również ma godziwą ilość danych statycznych.</span><span class="sxs-lookup"><span data-stu-id="760da-135">While databases have many dynamic, frequently-changing values, most also have a fair amount of static data.</span></span> <span data-ttu-id="760da-136">Na przykład praktycznie wszystkie modele danych mają jedną lub więcej kolumn, które zawierają określoną wartość z ustalonego zestawu opcji.</span><span class="sxs-lookup"><span data-stu-id="760da-136">For example, virtually all data models have one or more columns that contain a particular value from a fixed set of choices.</span></span> <span data-ttu-id="760da-137">Tabela bazy danych może mieć kolumnę, której zestaw wartości może być w języku angielskim, hiszpańskim, francuskim, japońskim i tak dalej. `PrimaryLanguage` `Patients`</span><span class="sxs-lookup"><span data-stu-id="760da-137">A `Patients` database table might have a `PrimaryLanguage` column, whose set of values could be English, Spanish, French, Russian, Japanese, and so on.</span></span> <span data-ttu-id="760da-138">Często, te typy kolumn są implementowane przy użyciu *tabel odnośników*.</span><span class="sxs-lookup"><span data-stu-id="760da-138">Oftentimes, these types of columns are implemented using *lookup tables*.</span></span> <span data-ttu-id="760da-139">Zamiast przechowywania ciągu w języku angielskim lub francuskim w `Patients` tabeli, tworzona jest druga tabela, która ma często dwie kolumny — unikatowy identyfikator i opis ciągu — z rekordem dla każdej możliwej wartości.</span><span class="sxs-lookup"><span data-stu-id="760da-139">Rather than storing the string English or French in the `Patients` table, a second table is created that has, commonly, two columns - a unique identifier and a string description - with a record for each possible value.</span></span> <span data-ttu-id="760da-140">`PrimaryLanguage` Kolumna`Patients` w tabeli przechowuje odpowiedni unikatowy identyfikator w tabeli odnośników.</span><span class="sxs-lookup"><span data-stu-id="760da-140">The `PrimaryLanguage` column in the `Patients` table stores the corresponding unique identifier in the lookup table.</span></span> <span data-ttu-id="760da-141">Na rysunku 1 język podstawowy pacjenta John Nowak jest w języku angielskim, a Ed Johnsonem jest rosyjski.</span><span class="sxs-lookup"><span data-stu-id="760da-141">In Figure 1, patient John Doe's primary language is English, while Ed Johnson's is Russian.</span></span>

![Tabela języków jest tabelą odnośników używaną w tabeli pacjentów](caching-data-at-application-startup-cs/_static/image1.png)

<span data-ttu-id="760da-143">**Rysunek 1**. Tabela jest tabelą odnośników używaną `Patients` w tabeli `Languages`</span><span class="sxs-lookup"><span data-stu-id="760da-143">**Figure 1**: The `Languages` Table is a Lookup Table Used by the `Patients` Table</span></span>

<span data-ttu-id="760da-144">Interfejs użytkownika służący do edytowania lub tworzenia nowego pacjenta będzie zawierać listę rozwijaną z dozwolonych języków wypełnianych przez rekordy w `Languages` tabeli.</span><span class="sxs-lookup"><span data-stu-id="760da-144">The user interface for editing or creating a new patient would include a drop-down list of allowable languages populated by the records in the `Languages` table.</span></span> <span data-ttu-id="760da-145">Bez buforowania, za każdym razem, gdy ten interfejs jest odwiedzany `Languages` , system musi wykonać zapytanie do tabeli.</span><span class="sxs-lookup"><span data-stu-id="760da-145">Without caching, each time this interface is visited the system must query the `Languages` table.</span></span> <span data-ttu-id="760da-146">Jest to wasteful i niepotrzebne, ponieważ wartości tabeli odnośników zmieniają się bardzo rzadko, jeśli kiedykolwiek wcześniej.</span><span class="sxs-lookup"><span data-stu-id="760da-146">This is wasteful and unnecessary since lookup table values change very infrequently, if ever.</span></span>

<span data-ttu-id="760da-147">Możemy buforować `Languages` dane przy użyciu tych samych, reaktywnych technik ładowania, które zostały sprawdzone w poprzednich samouczkach.</span><span class="sxs-lookup"><span data-stu-id="760da-147">We could cache the `Languages` data using the same reactive loading techniques examined in the previous tutorials.</span></span> <span data-ttu-id="760da-148">Ponowne ładowanie nie jest jednak zgodne z upływem czasu, który nie jest wymagany w przypadku danych tabeli odnośników statycznych.</span><span class="sxs-lookup"><span data-stu-id="760da-148">Reactive loading, however, uses a time-based expiry, which is not needed for static lookup table data.</span></span> <span data-ttu-id="760da-149">Buforowanie przy użyciu ponownej ładowania jest lepiej niż w przypadku braku buforowania, najlepszym rozwiązaniem jest załadowanie danych tabeli wyszukiwania do pamięci podręcznej podczas uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="760da-149">While caching using reactive loading would be better than no caching at all, the best approach would be to proactively load the lookup table data into the cache at application startup.</span></span>

<span data-ttu-id="760da-150">W tym samouczku pokazano, jak buforować dane tabeli odnośników i inne informacje statyczne.</span><span class="sxs-lookup"><span data-stu-id="760da-150">In this tutorial we will look at how to cache lookup table data and other static information.</span></span>

## <a name="step-2-examining-the-different-ways-to-cache-data"></a><span data-ttu-id="760da-151">Krok 2. Badanie różnych sposobów buforowania danych</span><span class="sxs-lookup"><span data-stu-id="760da-151">Step 2: Examining the Different Ways to Cache Data</span></span>

<span data-ttu-id="760da-152">Informacje mogą być programowane w pamięci podręcznej w aplikacji ASP.NET przy użyciu różnych metod.</span><span class="sxs-lookup"><span data-stu-id="760da-152">Information can be programmatically cached in an ASP.NET application using a variety of approaches.</span></span> <span data-ttu-id="760da-153">W poprzednich samouczkach zaobserwowano już korzystanie z pamięci podręcznej danych.</span><span class="sxs-lookup"><span data-stu-id="760da-153">We ve already seen how to use the data cache in previous tutorials.</span></span> <span data-ttu-id="760da-154">Alternatywnie obiekty mogą być programowane w pamięci podręcznej przy użyciu *statycznych elementów członkowskich* lub *stanu aplikacji*.</span><span class="sxs-lookup"><span data-stu-id="760da-154">Alternatively, objects can be programmatically cached using *static members* or *application state*.</span></span>

<span data-ttu-id="760da-155">Podczas pracy z klasą, zazwyczaj należy najpierw utworzyć wystąpienie klasy przed uzyskaniem dostępu do jej elementów członkowskich.</span><span class="sxs-lookup"><span data-stu-id="760da-155">When working with a class, typically the class must first be instantiated before its members can be accessed.</span></span> <span data-ttu-id="760da-156">Na przykład w celu wywołania metody z jednej z klas w naszej warstwie logiki biznesowej należy najpierw utworzyć wystąpienie klasy:</span><span class="sxs-lookup"><span data-stu-id="760da-156">For example, in order to invoke a method from one of the classes in our Business Logic Layer, we must first create an instance of the class:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample1.cs)]

<span data-ttu-id="760da-157">Przed wywołaniem funkcji *SomeMethod* lub pracy z *SomeProperty*należy najpierw utworzyć wystąpienie `new` klasy za pomocą słowa kluczowego.</span><span class="sxs-lookup"><span data-stu-id="760da-157">Before we can invoke *SomeMethod* or work with *SomeProperty*, we must first create an instance of the class using the `new` keyword.</span></span> <span data-ttu-id="760da-158">*SomeMethod* i *SomeProperty* są skojarzone z określonym wystąpieniem.</span><span class="sxs-lookup"><span data-stu-id="760da-158">*SomeMethod* and *SomeProperty* are associated with a particular instance.</span></span> <span data-ttu-id="760da-159">Okres istnienia tych członków jest powiązany z okresem istnienia skojarzonego z nim obiektu.</span><span class="sxs-lookup"><span data-stu-id="760da-159">The lifetime of these members is tied to the lifetime of their associated object.</span></span> <span data-ttu-id="760da-160">*Statyczne składowe*, z drugiej strony, to zmienne, właściwości i metody, które są współużytkowane przez *wszystkie* wystąpienia klasy, a w związku z tym mają okres istnienia, tak długo, jak Klasa.</span><span class="sxs-lookup"><span data-stu-id="760da-160">*Static members*, on the other hand, are variables, properties, and methods that are shared among *all* instances of the class and, consequently, have a lifetime as long as the class.</span></span> <span data-ttu-id="760da-161">Statyczne elementy członkowskie są oznaczane słowem kluczowym `static`.</span><span class="sxs-lookup"><span data-stu-id="760da-161">Static members are denoted by the keyword `static`.</span></span>

<span data-ttu-id="760da-162">Oprócz statycznych elementów członkowskich dane mogą być buforowane przy użyciu stanu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="760da-162">In addition to static members, data can be cached using application state.</span></span> <span data-ttu-id="760da-163">Każda aplikacja ASP.NET obsługuje kolekcję nazwa/wartość, która jest współużytkowana przez wszystkich użytkowników i strony aplikacji.</span><span class="sxs-lookup"><span data-stu-id="760da-163">Each ASP.NET application maintains a name/value collection that's shared across all users and pages of the application.</span></span> <span data-ttu-id="760da-164">Dostęp do tej kolekcji można uzyskać przy [ `HttpContext` ](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)użyciu [ `Application` właściwości](https://msdn.microsoft.com/library/system.web.httpcontext.application.aspx)klasy i używanej z klasy ASP.NET strony z kodem, tak więc:</span><span class="sxs-lookup"><span data-stu-id="760da-164">This collection can be accessed using the [`HttpContext` class](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)'s [`Application` property](https://msdn.microsoft.com/library/system.web.httpcontext.application.aspx), and used from an ASP.NET page's code-behind class like so:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample2.cs)]

<span data-ttu-id="760da-165">Pamięć podręczna danych zapewnia znacznie bogatszy interfejs API służący do buforowania danych, zapewniając mechanizmy dla wygasających czasu i zależności, priorytety elementów pamięci podręcznej i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="760da-165">The data cache provides a much richer API for caching data, providing mechanisms for time- and dependency-based expiries, cache item priorities, and so forth.</span></span> <span data-ttu-id="760da-166">Ze statycznymi składowymi i stanem aplikacji takie funkcje muszą być ręcznie dodawane przez dewelopera strony.</span><span class="sxs-lookup"><span data-stu-id="760da-166">With static members and application state, such features must be manually added by the page developer.</span></span> <span data-ttu-id="760da-167">W przypadku buforowania danych podczas uruchamiania aplikacji przez okres istnienia aplikacji Niemniej jednak zalety pamięci podręcznej danych to Moot.</span><span class="sxs-lookup"><span data-stu-id="760da-167">When caching data at application startup for the lifetime of the application, however, the data cache's advantages are moot.</span></span> <span data-ttu-id="760da-168">W tym samouczku zaobserwujemy kod, który używa wszystkich trzech technik buforowania danych statycznych.</span><span class="sxs-lookup"><span data-stu-id="760da-168">In this tutorial we'll look at code that uses all three techniques for caching static data.</span></span>

## <a name="step-3-caching-thesupplierstable-data"></a><span data-ttu-id="760da-169">Krok 3. Buforowanie danych`Suppliers`tabeli</span><span class="sxs-lookup"><span data-stu-id="760da-169">Step 3: Caching the`Suppliers`Table Data</span></span>

<span data-ttu-id="760da-170">Tabele bazy danych Northwind zaimplementowane do daty nie zawierają żadnych tradycyjnych tabel odnośników.</span><span class="sxs-lookup"><span data-stu-id="760da-170">The Northwind database tables we ve implemented to date do not include any traditional lookup tables.</span></span> <span data-ttu-id="760da-171">Cztery tabeli DataTables zaimplementowane w naszej DAL wszystkie tabele modelu, których wartości nie są statyczne.</span><span class="sxs-lookup"><span data-stu-id="760da-171">The four DataTables implemented in our DAL all model tables whose values are non-static.</span></span> <span data-ttu-id="760da-172">Zamiast poświęcać czas na dodanie nowej tabeli DataTable do dal, a następnie nowej klasy i metod do logiki biznesowej, na potrzeby tego samouczka się, że `Suppliers` dane tabeli są statyczne.</span><span class="sxs-lookup"><span data-stu-id="760da-172">Rather than spending the time to add a new DataTable to the DAL and then a new class and methods to the BLL, for this tutorial let's just pretend that the `Suppliers` table's data is static.</span></span> <span data-ttu-id="760da-173">W związku z tym możemy buforować te dane przy uruchamianiu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="760da-173">Therefore, we could cache this data at application startup.</span></span>

<span data-ttu-id="760da-174">Aby rozpocząć, Utwórz nową klasę o nazwie `StaticCache.cs` `CL` w folderze.</span><span class="sxs-lookup"><span data-stu-id="760da-174">To start, create a new class named `StaticCache.cs` in the `CL` folder.</span></span>

![Tworzenie klasy StaticCache.cs w folderze CL](caching-data-at-application-startup-cs/_static/image2.png)

<span data-ttu-id="760da-176">**Rysunek 2**. `StaticCache.cs` Utwórz klasę`CL` w folderze</span><span class="sxs-lookup"><span data-stu-id="760da-176">**Figure 2**: Create the `StaticCache.cs` Class in the `CL` Folder</span></span>

<span data-ttu-id="760da-177">Musimy dodać metodę, która ładuje dane przy uruchamianiu do odpowiedniego magazynu pamięci podręcznej, a także metod, które zwracają dane z tej pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="760da-177">We need to add a method that loads the data at startup into the appropriate cache store, as well as methods that return data from this cache.</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample3.cs)]

<span data-ttu-id="760da-178">Powyższy kod używa statycznej zmiennej składowej `suppliers`,, aby przechowywać wyniki `SuppliersBLL` z `GetSuppliers()` metody klasy, która jest wywoływana z `LoadStaticCache()` metody.</span><span class="sxs-lookup"><span data-stu-id="760da-178">The above code uses a static member variable, `suppliers`, to hold the results from the `SuppliersBLL` class's `GetSuppliers()` method, which is called from the `LoadStaticCache()` method.</span></span> <span data-ttu-id="760da-179">`LoadStaticCache()` Metoda jest przeznaczona do wywołania podczas uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="760da-179">The `LoadStaticCache()` method is meant to be called during the application's start.</span></span> <span data-ttu-id="760da-180">Gdy te dane zostaną załadowane podczas uruchamiania aplikacji, każda Strona, która wymaga pracy z danymi dostawcy, może wywołać `StaticCache` `GetSuppliers()` metodę klasy.</span><span class="sxs-lookup"><span data-stu-id="760da-180">Once this data has been loaded at application startup, any page that needs to work with supplier data can call the `StaticCache` class's `GetSuppliers()` method.</span></span> <span data-ttu-id="760da-181">W związku z tym połączenie z bazą danych, aby uzyskać dostawców, odbywa się tylko raz, podczas uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="760da-181">Therefore, the call to the database to get the suppliers only happens once, at application start.</span></span>

<span data-ttu-id="760da-182">Zamiast używać statycznej zmiennej składowej jako magazynu pamięci podręcznej, możemy użyć Alternatywnie stanu aplikacji lub pamięci podręcznej danych.</span><span class="sxs-lookup"><span data-stu-id="760da-182">Rather than using a static member variable as the cache store, we could have alternatively used application state or the data cache.</span></span> <span data-ttu-id="760da-183">Poniższy kod przedstawia klasę reprezentowaną przez narzędzie do korzystania z stanu aplikacji:</span><span class="sxs-lookup"><span data-stu-id="760da-183">The following code shows the class retooled to use application state:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample4.cs)]

<span data-ttu-id="760da-184">W `LoadStaticCache()`programie Informacje o dostawcach są przechowywane w *kluczu*zmiennej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="760da-184">In `LoadStaticCache()`, the supplier information is stored to the application variable *key*.</span></span> <span data-ttu-id="760da-185">Jest zwracany jako odpowiedni typ (`Northwind.SuppliersDataTable`) z. `GetSuppliers()`</span><span class="sxs-lookup"><span data-stu-id="760da-185">It's returned as the appropriate type (`Northwind.SuppliersDataTable`) from `GetSuppliers()`.</span></span> <span data-ttu-id="760da-186">Gdy stan aplikacji jest dostępny w klasach ASP.NET stron za pomocą `Application["key"]`programu, w architekturze, do których należy użyć `HttpContext.Current.Application["key"]` , aby uzyskać aktualność `HttpContext`.</span><span class="sxs-lookup"><span data-stu-id="760da-186">While application state can be accessed in the code-behind classes of ASP.NET pages using `Application["key"]`, in the architecture we must use `HttpContext.Current.Application["key"]` in order to get the current `HttpContext`.</span></span>

<span data-ttu-id="760da-187">Podobnie pamięć podręczna danych może być używana jako magazyn pamięci podręcznej, jak pokazano w poniższym kodzie:</span><span class="sxs-lookup"><span data-stu-id="760da-187">Likewise, the data cache can be used as a cache store, as the following code shows:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample5.cs)]

<span data-ttu-id="760da-188">Aby dodać element do pamięci podręcznej danych bez czasu wygaśnięcia opartego na czasie, użyj `System.Web.Caching.Cache.NoAbsoluteExpiration` wartości `System.Web.Caching.Cache.NoSlidingExpiration` i jako parametrów wejściowych.</span><span class="sxs-lookup"><span data-stu-id="760da-188">To add an item to the data cache with no time-based expiry, use the `System.Web.Caching.Cache.NoAbsoluteExpiration` and `System.Web.Caching.Cache.NoSlidingExpiration` values as input parameters.</span></span> <span data-ttu-id="760da-189">To konkretne Przeciążenie `Insert` metody pamięci podręcznej danych zostało zaznaczone, aby można było określić *priorytet* elementu pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="760da-189">This particular overload of the data cache's `Insert` method was selected so that we could specify the *priority* of the cache item.</span></span> <span data-ttu-id="760da-190">Priorytet jest używany do określenia elementów, które mają być oczyszczane z pamięci podręcznej, gdy ilość dostępnej pamięci jest niska.</span><span class="sxs-lookup"><span data-stu-id="760da-190">The priority is used to determine what items to scavenge from the cache when available memory runs low.</span></span> <span data-ttu-id="760da-191">Tutaj korzystamy z priorytetu `NotRemovable`, który zapewnia, że ten element pamięci podręcznej nie zostanie usunięty.</span><span class="sxs-lookup"><span data-stu-id="760da-191">Here we use the priority `NotRemovable`, which ensures that this cache item won't be scavenged.</span></span>

> [!NOTE]
> <span data-ttu-id="760da-192">Ten samouczek zawiera implementację `StaticCache` klasy przy użyciu podejścia statycznej zmiennej składowej.</span><span class="sxs-lookup"><span data-stu-id="760da-192">This tutorial's download implements the `StaticCache` class using the static member variable approach.</span></span> <span data-ttu-id="760da-193">Kod dla technik dotyczących stanu aplikacji i pamięci podręcznej danych jest dostępny w komentarzach w pliku klasy.</span><span class="sxs-lookup"><span data-stu-id="760da-193">The code for the application state and data cache techniques is available in the comments in the class file.</span></span>

## <a name="step-4-executing-code-at-application-startup"></a><span data-ttu-id="760da-194">Krok 4. Wykonywanie kodu podczas uruchamiania aplikacji</span><span class="sxs-lookup"><span data-stu-id="760da-194">Step 4: Executing Code at Application Startup</span></span>

<span data-ttu-id="760da-195">Aby wykonać kod podczas pierwszego uruchomienia aplikacji sieci Web, musimy utworzyć specjalny plik o nazwie `Global.asax`.</span><span class="sxs-lookup"><span data-stu-id="760da-195">To execute code when a web application first starts, we need to create a special file named `Global.asax`.</span></span> <span data-ttu-id="760da-196">Ten plik może zawierać programy obsługi zdarzeń dla zdarzeń aplikacji, sesji i na poziomie żądania. w tym miejscu można dodać kod, który będzie wykonywany przy każdym uruchomieniu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="760da-196">This file can contain event handlers for application-, session-, and request-level events, and it is here where we can add code that will be executed whenever the application starts.</span></span>

<span data-ttu-id="760da-197">Aby dodać `Global.asax` plik do katalogu głównego aplikacji sieci Web, kliknij prawym przyciskiem myszy nazwę projektu witryny sieci Web w Eksplorator rozwiązań programu Visual Studio i wybierz polecenie Dodaj nowy element.</span><span class="sxs-lookup"><span data-stu-id="760da-197">Add the `Global.asax` file to your web application's root directory by right-clicking on the website project name in Visual Studio's Solution Explorer and choosing Add New Item.</span></span> <span data-ttu-id="760da-198">W oknie dialogowym Dodaj nowy element wybierz pozycję Globalna Klasa aplikacji typ, a następnie kliknij przycisk Dodaj.</span><span class="sxs-lookup"><span data-stu-id="760da-198">From the Add New Item dialog box, select the Global Application Class item type and then click the Add button.</span></span>

> [!NOTE]
> <span data-ttu-id="760da-199">Jeśli masz `Global.asax` już plik w projekcie, typ elementu globalnej klasy aplikacji nie będzie wyświetlany w oknie dialogowym Dodaj nowy element.</span><span class="sxs-lookup"><span data-stu-id="760da-199">If you already have a `Global.asax` file in your project, the Global Application Class item type will not be listed in the Add New Item dialog box.</span></span>

<span data-ttu-id="760da-200">[![Dodaj plik Global. asax do katalogu głównego aplikacji sieci Web](caching-data-at-application-startup-cs/_static/image4.png)](caching-data-at-application-startup-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="760da-200">[![Add the Global.asax File to Your Web Application's Root Directory](caching-data-at-application-startup-cs/_static/image4.png)](caching-data-at-application-startup-cs/_static/image3.png)</span></span>

<span data-ttu-id="760da-201">**Rysunek 3**. Dodaj plik do katalogu głównego aplikacji sieci Web ([kliknij, aby wyświetlić obraz o pełnym rozmiarze)](caching-data-at-application-startup-cs/_static/image5.png) `Global.asax`</span><span class="sxs-lookup"><span data-stu-id="760da-201">**Figure 3**: Add the `Global.asax` File to Your Web Application's Root Directory ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image5.png))</span></span>

<span data-ttu-id="760da-202">Domyślny `Global.asax` szablon pliku zawiera pięć metod w tagu po stronie `<script>` serwera:</span><span class="sxs-lookup"><span data-stu-id="760da-202">The default `Global.asax` file template includes five methods within a server-side `<script>` tag:</span></span>

- <span data-ttu-id="760da-203">**`Application_Start`** wykonuje się po pierwszym uruchomieniu aplikacji sieci Web</span><span class="sxs-lookup"><span data-stu-id="760da-203">**`Application_Start`** executes when the web application first starts</span></span>
- <span data-ttu-id="760da-204">**`Application_End`** uruchamiany podczas zamykania aplikacji</span><span class="sxs-lookup"><span data-stu-id="760da-204">**`Application_End`** runs when the application is shutting down</span></span>
- <span data-ttu-id="760da-205">**`Application_Error`** wykonuje się za każdym razem, gdy nieobsługiwany wyjątek osiągnie aplikację</span><span class="sxs-lookup"><span data-stu-id="760da-205">**`Application_Error`** executes whenever an unhandled exception reaches the application</span></span>
- <span data-ttu-id="760da-206">**`Session_Start`** wykonuje się, gdy zostanie utworzona nowa sesja</span><span class="sxs-lookup"><span data-stu-id="760da-206">**`Session_Start`** executes when a new session is created</span></span>
- <span data-ttu-id="760da-207">**`Session_End`** uruchamiany, gdy sesja wygasła lub została porzucona</span><span class="sxs-lookup"><span data-stu-id="760da-207">**`Session_End`** runs when a session is expired or abandoned</span></span>

<span data-ttu-id="760da-208">Procedura `Application_Start` obsługi zdarzeń jest wywoływana tylko raz podczas cyklu życia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="760da-208">The `Application_Start` event handler is called only once during an application's life cycle.</span></span> <span data-ttu-id="760da-209">Aplikacja uruchamia się przy pierwszym żądaniu zasobu ASP.NET z aplikacji i kontynuuje działanie do momentu ponownego uruchomienia aplikacji, co może się zdarzyć, modyfikując zawartość `/Bin` folderu, modyfikując `Global.asax`, modyfikując zawartość w `App_Code` folderze lub `Web.config` modyfikacja pliku, między innymi przyczynami.</span><span class="sxs-lookup"><span data-stu-id="760da-209">The application starts the first time an ASP.NET resource is requested from the application and continues to run until the application is restarted, which can happen by modifying the contents of the `/Bin` folder, modifying `Global.asax`, modifying the contents in the `App_Code` folder, or modifying the `Web.config` file, among other causes.</span></span> <span data-ttu-id="760da-210">Więcej szczegółowych informacji na temat cyklu życia aplikacji można znaleźć w temacie [ASP.NET cykl życia aplikacji](https://msdn.microsoft.com/library/ms178473.aspx) .</span><span class="sxs-lookup"><span data-stu-id="760da-210">Refer to [ASP.NET Application Life Cycle Overview](https://msdn.microsoft.com/library/ms178473.aspx) for a more detailed discussion on the application life cycle.</span></span>

<span data-ttu-id="760da-211">W przypadku tych samouczków wystarczy dodać kod do `Application_Start` metody, aby usunąć inne.</span><span class="sxs-lookup"><span data-stu-id="760da-211">For these tutorials we only need to add code to the `Application_Start` method, so feel free to remove the others.</span></span> <span data-ttu-id="760da-212">W `Application_Start`, po prostu `StaticCache` Wywołaj `LoadStaticCache()` metodę klasy, która będzie ładować i przechować informacje o dostawcy:</span><span class="sxs-lookup"><span data-stu-id="760da-212">In `Application_Start`, simply call the `StaticCache` class's `LoadStaticCache()` method, which will load and cache the supplier information:</span></span>

[!code-aspx[Main](caching-data-at-application-startup-cs/samples/sample6.aspx)]

<span data-ttu-id="760da-213">To wszystko.</span><span class="sxs-lookup"><span data-stu-id="760da-213">That's all there is to it!</span></span> <span data-ttu-id="760da-214">Przy uruchamianiu `LoadStaticCache()` aplikacji Metoda powiąże informacje o dostawcy z logiki biznesowej i zapisze ją w statycznej zmiennej składowej (lub dowolnego magazynu pamięci podręcznej, który został `StaticCache` zakończony przy użyciu w klasie).</span><span class="sxs-lookup"><span data-stu-id="760da-214">At application startup, the `LoadStaticCache()` method will grab the supplier information from the BLL, and store it in a static member variable (or whatever cache store you ended up using in the `StaticCache` class).</span></span> <span data-ttu-id="760da-215">Aby sprawdzić to zachowanie, ustaw punkt przerwania w `Application_Start` metodzie i uruchom aplikację.</span><span class="sxs-lookup"><span data-stu-id="760da-215">To verify this behavior, set a breakpoint in the `Application_Start` method and run your application.</span></span> <span data-ttu-id="760da-216">Należy zauważyć, że punkt przerwania został trafiony podczas uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="760da-216">Note that the breakpoint is hit upon the application starting.</span></span> <span data-ttu-id="760da-217">Kolejne żądania nie powodują `Application_Start` jednak wykonania metody.</span><span class="sxs-lookup"><span data-stu-id="760da-217">Subsequent requests, however, do not cause the `Application_Start` method to execute.</span></span>

<span data-ttu-id="760da-218">[![Użyj punktu przerwania, aby sprawdzić, czy program obsługi zdarzeń Application_Start jest wykonywany](caching-data-at-application-startup-cs/_static/image7.png)](caching-data-at-application-startup-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="760da-218">[![Use a Breakpoint to Verify that the Application_Start Event Handler is Being Executed](caching-data-at-application-startup-cs/_static/image7.png)](caching-data-at-application-startup-cs/_static/image6.png)</span></span>

<span data-ttu-id="760da-219">**Rysunek 4**. Użyj punktu przerwania, aby sprawdzić `Application_Start` , czy program obsługi zdarzeń jest wykonywany ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](caching-data-at-application-startup-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="760da-219">**Figure 4**: Use a Breakpoint to Verify that the `Application_Start` Event Handler is Being Executed ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image8.png))</span></span>

> [!NOTE]
> <span data-ttu-id="760da-220">Jeśli `Application_Start` punkt przerwania nie zostanie osiągnięty podczas pierwszego uruchomienia debugowania, jest to spowodowane tym, że aplikacja została już uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="760da-220">If you do not hit the `Application_Start` breakpoint when you first start debugging, it is because your application has already started.</span></span> <span data-ttu-id="760da-221">Wymuś ponowne uruchomienie aplikacji, modyfikując `Global.asax` pliki lub `Web.config` i spróbuj ponownie.</span><span class="sxs-lookup"><span data-stu-id="760da-221">Force the application to restart by modifying your `Global.asax` or `Web.config` files and then try again.</span></span> <span data-ttu-id="760da-222">Możesz po prostu dodać (lub usunąć) pusty wiersz na końcu jednego z tych plików, aby szybko ponownie uruchomić aplikację.</span><span class="sxs-lookup"><span data-stu-id="760da-222">You can simply add (or remove) a blank line at the end of one of these files to quickly restart the application.</span></span>

## <a name="step-5-displaying-the-cached-data"></a><span data-ttu-id="760da-223">Krok 5. Wyświetlanie danych w pamięci podręcznej</span><span class="sxs-lookup"><span data-stu-id="760da-223">Step 5: Displaying the Cached Data</span></span>

<span data-ttu-id="760da-224">W tym momencie `StaticCache` Klasa ma wersję danych dostawcy buforowaną podczas uruchamiania aplikacji, do której można uzyskać dostęp za pomocą jej `GetSuppliers()` metody.</span><span class="sxs-lookup"><span data-stu-id="760da-224">At this point the `StaticCache` class has a version of the supplier data cached at application startup that can be accessed through its `GetSuppliers()` method.</span></span> <span data-ttu-id="760da-225">Aby można było korzystać z tych danych z warstwy prezentacji, możemy użyć elementu ObjectDataSource lub programowo wywołać `StaticCache` `GetSuppliers()` metodę klasy z klasy z kodem związanym ze stroną ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="760da-225">To work with this data from the Presentation Layer, we can use an ObjectDataSource or programmatically invoke the `StaticCache` class's `GetSuppliers()` method from an ASP.NET page's code-behind class.</span></span> <span data-ttu-id="760da-226">Przyjrzyjmy się za pomocą kontrolek ObjectDataSource i GridView, aby wyświetlić informacje o buforowanym dostawcy.</span><span class="sxs-lookup"><span data-stu-id="760da-226">Let's look at using the ObjectDataSource and GridView controls to display the cached supplier information.</span></span>

<span data-ttu-id="760da-227">Zacznij od otwarcia `AtApplicationStartup.aspx` strony `Caching` w folderze.</span><span class="sxs-lookup"><span data-stu-id="760da-227">Start by opening the `AtApplicationStartup.aspx` page in the `Caching` folder.</span></span> <span data-ttu-id="760da-228">Przeciągnij widok GridView z przybornika do projektanta, ustawiając jego `ID` właściwość na. `Suppliers`</span><span class="sxs-lookup"><span data-stu-id="760da-228">Drag a GridView from the Toolbox onto the designer, setting its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="760da-229">Następnie w tagu inteligentnym GridView wybierz opcję utworzenia nowego elementu ObjectDataSource o nazwie `SuppliersCachedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="760da-229">Next, from the GridView's smart tag choose to create a new ObjectDataSource named `SuppliersCachedDataSource`.</span></span> <span data-ttu-id="760da-230">Skonfiguruj element ObjectDataSource, aby korzystał `StaticCache` z `GetSuppliers()` metody klasy.</span><span class="sxs-lookup"><span data-stu-id="760da-230">Configure the ObjectDataSource to use the `StaticCache` class's `GetSuppliers()` method.</span></span>

<span data-ttu-id="760da-231">[![Skonfiguruj element ObjectDataSource, aby używał klasy StaticCache](caching-data-at-application-startup-cs/_static/image10.png)](caching-data-at-application-startup-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="760da-231">[![Configure the ObjectDataSource to use the StaticCache Class](caching-data-at-application-startup-cs/_static/image10.png)](caching-data-at-application-startup-cs/_static/image9.png)</span></span>

<span data-ttu-id="760da-232">**Rysunek 5**. Skonfiguruj element ObjectDataSource, aby używał `StaticCache` klasy ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](caching-data-at-application-startup-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="760da-232">**Figure 5**: Configure the ObjectDataSource to use the `StaticCache` Class ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image11.png))</span></span>

<span data-ttu-id="760da-233">[![Użyj metody getdostawcs (), aby pobrać dane z pamięci podręcznej](caching-data-at-application-startup-cs/_static/image13.png)](caching-data-at-application-startup-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="760da-233">[![Use the GetSuppliers() Method to Retrieve the Cached Supplier Data](caching-data-at-application-startup-cs/_static/image13.png)](caching-data-at-application-startup-cs/_static/image12.png)</span></span>

<span data-ttu-id="760da-234">**Rysunek 6**. Użyj metody, aby pobrać dane z pamięci podręcznej ([kliknij, aby wyświetlić obraz w pełnym rozmiarze)](caching-data-at-application-startup-cs/_static/image14.png) `GetSuppliers()`</span><span class="sxs-lookup"><span data-stu-id="760da-234">**Figure 6**: Use the `GetSuppliers()` Method to Retrieve the Cached Supplier Data ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image14.png))</span></span>

<span data-ttu-id="760da-235">Po zakończeniu działania kreatora program Visual Studio automatycznie doda BoundFields dla każdego z pól danych w `SuppliersDataTable`.</span><span class="sxs-lookup"><span data-stu-id="760da-235">After completing the wizard, Visual Studio will automatically add BoundFields for each of the data fields in `SuppliersDataTable`.</span></span> <span data-ttu-id="760da-236">Znaczniki deklaratywne GridView i ObjectDataSource powinny wyglądać podobnie do następujących:</span><span class="sxs-lookup"><span data-stu-id="760da-236">Your GridView and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](caching-data-at-application-startup-cs/samples/sample7.aspx)]

<span data-ttu-id="760da-237">Rysunek 7 przedstawia stronę wyświetlaną w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="760da-237">Figure 7 shows the page when viewed through a browser.</span></span> <span data-ttu-id="760da-238">Dane wyjściowe są takie same, gdyby zostały pobrane z `SuppliersBLL` klasy logiki biznesowej, ale `StaticCache` użycie klasy zwraca dane dostawcy jako buforowane podczas uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="760da-238">The output is the same had we pulled the data from the BLL's `SuppliersBLL` class, but using the `StaticCache` class returns the supplier data as cached at application startup.</span></span> <span data-ttu-id="760da-239">Aby sprawdzić to zachowanie, można ustawić `StaticCache` punkty przerwania w `GetSuppliers()` metodzie klasy.</span><span class="sxs-lookup"><span data-stu-id="760da-239">You can set breakpoints in the `StaticCache` class's `GetSuppliers()` method to verify this behavior.</span></span>

<span data-ttu-id="760da-240">[![Dane dostawcy w pamięci podręcznej są wyświetlane w widoku GridView](caching-data-at-application-startup-cs/_static/image16.png)](caching-data-at-application-startup-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="760da-240">[![The Cached Supplier Data is Displayed in a GridView](caching-data-at-application-startup-cs/_static/image16.png)](caching-data-at-application-startup-cs/_static/image15.png)</span></span>

<span data-ttu-id="760da-241">**Rysunek 7**. Dane dostawcy w pamięci podręcznej są wyświetlane w widoku GridView ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](caching-data-at-application-startup-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="760da-241">**Figure 7**: The Cached Supplier Data is Displayed in a GridView ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image17.png))</span></span>

## <a name="summary"></a><span data-ttu-id="760da-242">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="760da-242">Summary</span></span>

<span data-ttu-id="760da-243">Większość każdego modelu danych zawiera godziwą ilość danych statycznych, zazwyczaj zaimplementowaną w postaci tabel odnośników.</span><span class="sxs-lookup"><span data-stu-id="760da-243">Most every data model contains a fair amount of static data, usually implemented in the form of lookup tables.</span></span> <span data-ttu-id="760da-244">Ponieważ te informacje są statyczne, nie ma potrzeby ciągłego uzyskiwania dostępu do bazy danych przy każdym wyświetleniu tych informacji.</span><span class="sxs-lookup"><span data-stu-id="760da-244">Since this information is static, there's no reason to continually access the database each time this information needs to be displayed.</span></span> <span data-ttu-id="760da-245">Ponadto ze względu na jego charakter statyczny, gdy buforowanie danych nie jest konieczne.</span><span class="sxs-lookup"><span data-stu-id="760da-245">Furthermore, due to its static nature, when caching the data there's no need for an expiry.</span></span> <span data-ttu-id="760da-246">W tym samouczku przedstawiono sposób wykonywania takich danych i buforowania ich w pamięci podręcznej danych, stanie aplikacji oraz statycznej zmiennej składowej.</span><span class="sxs-lookup"><span data-stu-id="760da-246">In this tutorial we saw how to take such data and cache it in the data cache, application state, and through a static member variable.</span></span> <span data-ttu-id="760da-247">Te informacje są buforowane podczas uruchamiania aplikacji i pozostają w pamięci podręcznej przez cały okres istnienia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="760da-247">This information is cached at application startup and remains in the cache throughout the application's lifetime.</span></span>

<span data-ttu-id="760da-248">W tym samouczku i ostatnich dwóch zawarto już zapoznaniu się z buforowaniem danych na potrzeby okresu istnienia aplikacji, a także za korzystanie z wygasania opartego na czasie.</span><span class="sxs-lookup"><span data-stu-id="760da-248">In this tutorial and the past two, we ve looked at caching data for the duration of the application's lifetime as well as using time-based expiries.</span></span> <span data-ttu-id="760da-249">W przypadku buforowania danych bazy danych czas wygaśnięcia oparty na czasie może być mniejszy niż idealny.</span><span class="sxs-lookup"><span data-stu-id="760da-249">When caching database data, though, a time-based expiry may be less than ideal.</span></span> <span data-ttu-id="760da-250">Zamiast okresowego opróżniania pamięci podręcznej, najlepszym rozwiązaniem jest wykluczenie tylko buforowanego elementu, gdy dane źródłowej bazy danych są modyfikowane.</span><span class="sxs-lookup"><span data-stu-id="760da-250">Rather than periodically flushing the cache, it would be optimal to only evict the cached item when the underlying database data is modified.</span></span> <span data-ttu-id="760da-251">Jest to idealne rozwiązanie przy użyciu zależności pamięci podręcznej SQL, które będziemy analizować w następnym samouczku.</span><span class="sxs-lookup"><span data-stu-id="760da-251">This ideal is possible through the use of SQL cache dependencies, which we'll examine in our next tutorial.</span></span>

<span data-ttu-id="760da-252">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="760da-252">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="760da-253">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="760da-253">About the Author</span></span>

<span data-ttu-id="760da-254">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor siedmiu grup ASP/ASP. NET Books i założyciel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="760da-254">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="760da-255">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="760da-255">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="760da-256">Jego Najnowsza książka to [*Sams ASP.NET 2,0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="760da-256">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="760da-257">Można się z [ mitchell@4GuysFromRolla.comnią skontaktować.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="760da-257">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="760da-258">lub za pośrednictwem swojego blogu, który można znaleźć [http://ScottOnWriting.NET](http://ScottOnWriting.NET)pod adresem.</span><span class="sxs-lookup"><span data-stu-id="760da-258">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="760da-259">Specjalne podziękowania</span><span class="sxs-lookup"><span data-stu-id="760da-259">Special Thanks To</span></span>

<span data-ttu-id="760da-260">Ta seria samouczków została sprawdzona przez wielu przydatnych recenzentów.</span><span class="sxs-lookup"><span data-stu-id="760da-260">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="760da-261">Recenzenci liderzy dla tego samouczka to Teresa Murphy i Zack Kowalski.</span><span class="sxs-lookup"><span data-stu-id="760da-261">Lead reviewers for this tutorial were Teresa Murphy and Zack Jones.</span></span> <span data-ttu-id="760da-262">Chcesz przeglądać moje nadchodzące artykuły MSDN?</span><span class="sxs-lookup"><span data-stu-id="760da-262">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="760da-263">Jeśli tak, upuść mi linię na [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="760da-263">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="760da-264">[Poprzedni](caching-data-in-the-architecture-cs.md)Następny
> [](using-sql-cache-dependencies-cs.md)</span><span class="sxs-lookup"><span data-stu-id="760da-264">[Previous](caching-data-in-the-architecture-cs.md)
[Next](using-sql-cache-dependencies-cs.md)</span></span>

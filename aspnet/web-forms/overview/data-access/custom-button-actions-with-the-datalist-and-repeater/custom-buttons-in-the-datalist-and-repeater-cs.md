---
uid: web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-cs
title: Przyciski niestandardowe w elemencie DataList i WzmacniakeC#() | Microsoft Docs
author: rick-anderson
description: W tym samouczku utworzymy interfejs, który używa przewodnika, aby wyświetlić listę kategorii w systemie, z każdą kategorią zawierającą przycisk pokazujący associ...
ms.author: riande
ms.date: 11/13/2006
ms.assetid: 1f42e332-78dc-438b-9e35-0c97aa0ad929
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-cs
msc.type: authoredcontent
ms.openlocfilehash: e8cb1054068327c25e057b6df1cc7506feec8d37
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/28/2019
ms.locfileid: "74601779"
---
# <a name="custom-buttons-in-the-datalist-and-repeater-c"></a><span data-ttu-id="967c9-103">Przyciski niestandardowe w kontrolkach DataList i Repeater (C#)</span><span class="sxs-lookup"><span data-stu-id="967c9-103">Custom Buttons in the DataList and Repeater (C#)</span></span>

<span data-ttu-id="967c9-104">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="967c9-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="967c9-105">[Pobierz przykładową aplikację](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_CS.exe) lub [Pobierz plik PDF](custom-buttons-in-the-datalist-and-repeater-cs/_static/datatutorial46cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="967c9-105">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_CS.exe) or [Download PDF](custom-buttons-in-the-datalist-and-repeater-cs/_static/datatutorial46cs1.pdf)</span></span>

> <span data-ttu-id="967c9-106">W tym samouczku utworzymy interfejs, który używa wzmacniak do wyświetlania kategorii w systemie, z każdą kategorią zawierającą przycisk pokazujący skojarzone produkty przy użyciu formantu BulletedList.</span><span class="sxs-lookup"><span data-stu-id="967c9-106">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system, with each category providing a button to show its associated products using a BulletedList control.</span></span>

## <a name="introduction"></a><span data-ttu-id="967c9-107">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="967c9-107">Introduction</span></span>

<span data-ttu-id="967c9-108">W poprzednich samouczkach DataList i wzmacniak siedemnastu utworzyliśmy zarówno przykłady tylko do odczytu, jak i edycję oraz usuwanie przykładów.</span><span class="sxs-lookup"><span data-stu-id="967c9-108">Throughout the past seventeen DataList and Repeater tutorials, we ve created both read-only examples and editing and deleting examples.</span></span> <span data-ttu-id="967c9-109">Aby ułatwić edytowanie i usuwanie funkcji w elemencie DataList, dodaliśmy przyciski do `ItemTemplate` DataList, które po kliknięciu powodowały ogłaszanie zwrotne i zgłosiło zdarzenie DataList odpowiadające właściwości `CommandName` przycisku.</span><span class="sxs-lookup"><span data-stu-id="967c9-109">To facilitate editing and deleting capabilities within a DataList, we added buttons to the DataList s `ItemTemplate` that, when clicked, caused a postback and raised a DataList event corresponding to the button s `CommandName` property.</span></span> <span data-ttu-id="967c9-110">Na przykład dodanie przycisku do `ItemTemplate` z wartością właściwości `CommandName` Edytuj powoduje, że element DataList s `EditCommand` wyzwalać na stronie ogłaszania zwrotnego; jeden z `CommandName` Usuń podnosi `DeleteCommand`.</span><span class="sxs-lookup"><span data-stu-id="967c9-110">For example, adding a button to the `ItemTemplate` with a `CommandName` property value of Edit causes the DataList s `EditCommand` to fire on postback; one with the `CommandName` Delete raises the `DeleteCommand`.</span></span>

<span data-ttu-id="967c9-111">Oprócz przycisków Edytuj i Usuń, formanty DataList i wzmacniak mogą również zawierać przyciski, LinkButtons lub ImageButtons, które po kliknięciu wykonują niestandardową logikę po stronie serwera.</span><span class="sxs-lookup"><span data-stu-id="967c9-111">In addition to Edit and Delete buttons, the DataList and Repeater controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="967c9-112">W tym samouczku utworzymy interfejs, który używa przewodnika, aby wyświetlić listę kategorii w systemie.</span><span class="sxs-lookup"><span data-stu-id="967c9-112">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system.</span></span> <span data-ttu-id="967c9-113">Dla każdej kategorii wzmacniak będzie zawierać przycisk umożliwiający wyświetlenie produktów skojarzonych z kategorią za pomocą kontrolki BulletedList (patrz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="967c9-113">For each category, the Repeater will include a button to show the category s associated products using a BulletedList control (see Figure 1).</span></span>

<span data-ttu-id="967c9-114">[![kliknięciu linku Pokaż produkty są wyświetlane produkty kategorii z listy punktowanej](custom-buttons-in-the-datalist-and-repeater-cs/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="967c9-114">[![Clicking the Show Products Link Displays the Category s Products in a Bulleted List](custom-buttons-in-the-datalist-and-repeater-cs/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image1.png)</span></span>

<span data-ttu-id="967c9-115">**Rysunek 1**. kliknięcie linku Pokaż produkty powoduje wyświetlenie kategorii produktów na liście punktowanej ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](custom-buttons-in-the-datalist-and-repeater-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="967c9-115">**Figure 1**: Clicking the Show Products Link Displays the Category s Products in a Bulleted List ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image3.png))</span></span>

## <a name="step-1-adding-the-custom-button-tutorial-web-pages"></a><span data-ttu-id="967c9-116">Krok 1. Dodawanie stron sieci Web samouczka przycisku niestandardowego</span><span class="sxs-lookup"><span data-stu-id="967c9-116">Step 1: Adding the Custom Button Tutorial Web Pages</span></span>

<span data-ttu-id="967c9-117">Zanim sprawdzimy, jak dodać przycisk niestandardowy, poświęć chwilę na utworzenie stron ASP.NET w naszym projekcie witryny sieci Web, które będziemy potrzebować do tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="967c9-117">Before we look at how to add a custom button, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="967c9-118">Zacznij od dodania nowego folderu o nazwie `CustomButtonsDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="967c9-118">Start by adding a new folder named `CustomButtonsDataListRepeater`.</span></span> <span data-ttu-id="967c9-119">Następnie Dodaj następujące dwie strony ASP.NET do tego folderu, aby upewnić się, że każda strona jest skojarzona z `Site.master` stroną wzorcową:</span><span class="sxs-lookup"><span data-stu-id="967c9-119">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`

![Dodaj strony ASP.NET dla samouczków związanych z przyciskami niestandardowymi](custom-buttons-in-the-datalist-and-repeater-cs/_static/image4.png)

<span data-ttu-id="967c9-121">**Rysunek 2**. dodawanie stron ASP.NET dla samouczków związanych z przyciskami niestandardowymi</span><span class="sxs-lookup"><span data-stu-id="967c9-121">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>

<span data-ttu-id="967c9-122">Podobnie jak w przypadku innych folderów, `Default.aspx` w folderze `CustomButtonsDataListRepeater` wyświetli samouczki w sekcji.</span><span class="sxs-lookup"><span data-stu-id="967c9-122">Like in the other folders, `Default.aspx` in the `CustomButtonsDataListRepeater` folder will list the tutorials in its section.</span></span> <span data-ttu-id="967c9-123">Odwołaj się do tego, że formant użytkownika `SectionLevelTutorialListing.ascx` udostępnia tę funkcję.</span><span class="sxs-lookup"><span data-stu-id="967c9-123">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="967c9-124">Dodaj tę kontrolkę użytkownika do `Default.aspx`, przeciągając ją z Eksplorator rozwiązań na stronę widok Projekt strony.</span><span class="sxs-lookup"><span data-stu-id="967c9-124">Add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>

<span data-ttu-id="967c9-125">[![dodać kontrolkę użytkownika SectionLevelTutorialListing. ascx do default. aspx](custom-buttons-in-the-datalist-and-repeater-cs/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="967c9-125">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](custom-buttons-in-the-datalist-and-repeater-cs/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image5.png)</span></span>

<span data-ttu-id="967c9-126">**Rysunek 3**. Dodawanie kontrolki użytkownika `SectionLevelTutorialListing.ascx` do `Default.aspx` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](custom-buttons-in-the-datalist-and-repeater-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="967c9-126">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image7.png))</span></span>

<span data-ttu-id="967c9-127">Na koniec Dodaj strony jako wpisy do pliku `Web.sitemap`.</span><span class="sxs-lookup"><span data-stu-id="967c9-127">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="967c9-128">W tym celu Dodaj następujące znaczniki po stronicowaniu i sortowaniu z `<siteMapNode>`DataList i wzmacniak:</span><span class="sxs-lookup"><span data-stu-id="967c9-128">Specifically, add the following markup after the Paging and Sorting with the DataList and Repeater `<siteMapNode>`:</span></span>

[!code-xml[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample1.xml)]

<span data-ttu-id="967c9-129">Po aktualizacji `Web.sitemap`zapoznaj się z witryną internetową samouczków za pomocą przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="967c9-129">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="967c9-130">Menu po lewej stronie zawiera teraz elementy do edycji, wstawiania i usuwania samouczków.</span><span class="sxs-lookup"><span data-stu-id="967c9-130">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>

![Mapa witryny zawiera teraz wpis do samouczka dotyczącego przycisków niestandardowych](custom-buttons-in-the-datalist-and-repeater-cs/_static/image8.png)

<span data-ttu-id="967c9-132">**Rysunek 4**. Mapa witryny zawiera teraz wpis do samouczka dotyczącego przycisków niestandardowych</span><span class="sxs-lookup"><span data-stu-id="967c9-132">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>

## <a name="step-2-adding-the-list-of-categories"></a><span data-ttu-id="967c9-133">Krok 2. Dodawanie listy kategorii</span><span class="sxs-lookup"><span data-stu-id="967c9-133">Step 2: Adding the List of Categories</span></span>

<span data-ttu-id="967c9-134">W tym samouczku musimy utworzyć wzmacniak, który wyświetla listę wszystkich kategorii wraz z element LinkButton produktami, które po kliknięciu wyświetla skojarzone produkty kategorii s na liście punktowanej.</span><span class="sxs-lookup"><span data-stu-id="967c9-134">For this tutorial we need to create a Repeater that lists all categories along with a Show Products LinkButton that, when clicked, displays the associated category s products in a bulleted list.</span></span> <span data-ttu-id="967c9-135">Pozwól, aby najpierw utworzyć prosty wzmacniak, który wyświetla listę kategorii w systemie.</span><span class="sxs-lookup"><span data-stu-id="967c9-135">Let s first create a simple Repeater that lists the categories in the system.</span></span> <span data-ttu-id="967c9-136">Zacznij od otwarcia strony `CustomButtons.aspx` w folderze `CustomButtonsDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="967c9-136">Start by opening the `CustomButtons.aspx` page in the `CustomButtonsDataListRepeater` folder.</span></span> <span data-ttu-id="967c9-137">Przeciągnij wzmacniak z przybornika do projektanta i ustaw jego właściwość `ID` na `Categories`.</span><span class="sxs-lookup"><span data-stu-id="967c9-137">Drag a Repeater from the Toolbox onto the Designer and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="967c9-138">Następnie utwórz nową kontrolkę źródła danych z tagu inteligentnego wzmacniak.</span><span class="sxs-lookup"><span data-stu-id="967c9-138">Next, create a new data source control from the Repeater s smart tag.</span></span> <span data-ttu-id="967c9-139">W celu utworzenia nowej kontrolki ObjectDataSource o nazwie `CategoriesDataSource`, która wybiera swoje dane z metody `CategoriesBLL` klasy s `GetCategories()`.</span><span class="sxs-lookup"><span data-stu-id="967c9-139">Specifically, create a new ObjectDataSource control named `CategoriesDataSource` that selects its data from the `CategoriesBLL` class s `GetCategories()` method.</span></span>

<span data-ttu-id="967c9-140">[![skonfigurować element ObjectDataSource do używania metody GetCategories () klasy CategoriesBLL](custom-buttons-in-the-datalist-and-repeater-cs/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="967c9-140">[![Configure the ObjectDataSource to Use the CategoriesBLL Class s GetCategories() Method](custom-buttons-in-the-datalist-and-repeater-cs/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image9.png)</span></span>

<span data-ttu-id="967c9-141">**Rysunek 5**. Konfigurowanie elementu ObjectDataSource do używania metody `GetCategories()` `CategoriesBLL` klasy s ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](custom-buttons-in-the-datalist-and-repeater-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="967c9-141">**Figure 5**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class s `GetCategories()` Method ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image11.png))</span></span>

<span data-ttu-id="967c9-142">W przeciwieństwie do formantu DataList, dla którego program Visual Studio tworzy domyślne `ItemTemplate` w oparciu o źródło danych, należy ręcznie zdefiniować szablony wzmacniania.</span><span class="sxs-lookup"><span data-stu-id="967c9-142">Unlike the DataList control, for which Visual Studio creates a default `ItemTemplate` based on the data source, the Repeater s templates must be manually defined.</span></span> <span data-ttu-id="967c9-143">Ponadto szablony Wzmacniake muszą być tworzone i edytowane w sposób deklaratywny (to oznacza, że w tagu inteligentnym nie ma opcji Edytuj szablony).</span><span class="sxs-lookup"><span data-stu-id="967c9-143">Furthermore, the Repeater s templates must be created and edited declaratively (that is, there s no Edit Templates option in the Repeater s smart tag).</span></span>

<span data-ttu-id="967c9-144">Kliknij kartę Źródło w lewym dolnym rogu i Dodaj `ItemTemplate`, która wyświetla nazwę kategorii s w elemencie `<h3>` i jego opis w znaczniku akapitu. Dołącz `SeparatorTemplate`, w którym jest wyświetlana linia pozioma (`<hr />`) między każdą kategorią.</span><span class="sxs-lookup"><span data-stu-id="967c9-144">Click on the Source tab in the bottom left corner and add an `ItemTemplate` that displays the category s name in an `<h3>` element and its description in a paragraph tag; include a `SeparatorTemplate` that displays a horizontal rule (`<hr />`) between each category.</span></span> <span data-ttu-id="967c9-145">Dodaj także element LinkButton z właściwością `Text`, aby wyświetlić produkty.</span><span class="sxs-lookup"><span data-stu-id="967c9-145">Also add a LinkButton with its `Text` property set to Show Products.</span></span> <span data-ttu-id="967c9-146">Po wykonaniu tych kroków znaczniki deklaratywne strony powinny wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="967c9-146">After completing these steps, your page s declarative markup should look like the following:</span></span>

[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample2.aspx)]

<span data-ttu-id="967c9-147">Rysunek 6 przedstawia stronę wyświetlaną w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="967c9-147">Figure 6 shows the page when viewed through a browser.</span></span> <span data-ttu-id="967c9-148">Nazwa kategorii i opis są wymienione na liście.</span><span class="sxs-lookup"><span data-stu-id="967c9-148">Each category name and description is listed.</span></span> <span data-ttu-id="967c9-149">Po kliknięciu przycisku Pokaż produkty zostanie wyświetlona pozycja ogłaszania zwrotnego, ale jeszcze nie wykonano żadnej akcji.</span><span class="sxs-lookup"><span data-stu-id="967c9-149">The Show Products button, when clicked, causes a postback but does not yet perform any action.</span></span>

<span data-ttu-id="967c9-150">[![zostanie wyświetlona nazwa i opis kategorii s wraz z pokazywaniem produktów element LinkButton](custom-buttons-in-the-datalist-and-repeater-cs/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="967c9-150">[![Each Category s Name and Description is Displayed, Along with a Show Products LinkButton](custom-buttons-in-the-datalist-and-repeater-cs/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image12.png)</span></span>

<span data-ttu-id="967c9-151">**Ilustracja 6**. wyświetlana jest nazwa i opis każdej kategorii, a także element LinkButton produkty ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](custom-buttons-in-the-datalist-and-repeater-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="967c9-151">**Figure 6**: Each Category s Name and Description is Displayed, Along with a Show Products LinkButton ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image14.png))</span></span>

## <a name="step-3-executing-server-side-logic-when-the-show-products-linkbutton-is-clicked"></a><span data-ttu-id="967c9-152">Krok 3. wykonywanie logiki po stronie serwera po kliknięciu przycisku Pokaż produkty element LinkButton</span><span class="sxs-lookup"><span data-stu-id="967c9-152">Step 3: Executing Server-Side Logic When the Show Products LinkButton is Clicked</span></span>

<span data-ttu-id="967c9-153">Za każdym razem, gdy zostanie kliknięty przycisk, element LinkButton lub kliknięto element ImageButton w ramach szablonu w elemencie DataList lub Wzmacniake, zostanie wykonane ogłaszanie odświeżenia i zdarzenie DataList `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="967c9-153">Anytime a Button, LinkButton, or ImageButton within a template in a DataList or Repeater is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="967c9-154">Oprócz zdarzenia `ItemCommand`, formant DataList może również wywołać inne, bardziej szczegółowe zdarzenie, jeśli właściwość `CommandName` przycisku jest ustawiona na jeden z zastrzeżonych ciągów (usuwanie, edytowanie, anulowanie, aktualizowanie lub wybieranie), ale zdarzenie `ItemCommand` jest *zawsze* uruchamiane.</span><span class="sxs-lookup"><span data-stu-id="967c9-154">In addition to the `ItemCommand` event, the DataList control may also raise another, more specific event if the button s `CommandName` property is set to one of the reserved strings ( Delete, Edit, Cancel, Update, or Select ), but the `ItemCommand` event is *always* fired.</span></span>

<span data-ttu-id="967c9-155">Gdy przycisk zostanie kliknięty w obrębie elementu DataList lub wzmacniak, często musimy się dowiedzieć, który przycisk został kliknięty (w przypadku, gdy w kontrolce może znajdować się wiele przycisków, takich jak przycisk Edytuj i Usuń), a także kilka dodatkowych informacji (takich jak wartość klucza podstawowego elementu, którego przycisk został kliknięty.</span><span class="sxs-lookup"><span data-stu-id="967c9-155">When a button is clicked within a DataList or Repeater, oftentimes we need to pass along which button was clicked (in the case that there may be multiple buttons within the control, such as both an Edit and Delete button) and perhaps some additional information (such as the primary key value of the item whose button was clicked).</span></span> <span data-ttu-id="967c9-156">Przyciski, element LinkButton i kliknięto element ImageButton zapewniają dwie właściwości, których wartości są przesyłane do programu obsługi zdarzeń `ItemCommand`:</span><span class="sxs-lookup"><span data-stu-id="967c9-156">The Button, LinkButton, and ImageButton provide two properties whose values are passed to the `ItemCommand` event handler:</span></span>

- <span data-ttu-id="967c9-157">`CommandName` ciąg zwykle używany do identyfikowania każdego przycisku w szablonie</span><span class="sxs-lookup"><span data-stu-id="967c9-157">`CommandName` a string typically used to identify each button in the template</span></span>
- <span data-ttu-id="967c9-158">`CommandArgument` często używane do przechowywania wartości niektórych pól danych, takich jak wartość klucza podstawowego</span><span class="sxs-lookup"><span data-stu-id="967c9-158">`CommandArgument` commonly used to hold the value of some data field, such as the primary key value</span></span>

<span data-ttu-id="967c9-159">Na potrzeby tego przykładu należy ustawić właściwość element LinkButton `CommandName` s na ShowProducts i powiązać bieżącą wartość klucza podstawowego rekordu s `CategoryID` z właściwością `CommandArgument` przy użyciu składni wiązania danych `CategoryArgument='<%# Eval("CategoryID") %>'`.</span><span class="sxs-lookup"><span data-stu-id="967c9-159">For this example, set the LinkButton s `CommandName` property to ShowProducts and bind the current record s primary key value `CategoryID` to the `CommandArgument` property using the databinding syntax `CategoryArgument='<%# Eval("CategoryID") %>'`.</span></span> <span data-ttu-id="967c9-160">Po określeniu tych dwóch właściwości, składnia deklaracyjne element LinkButton powinna wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="967c9-160">After specifying these two properties, the LinkButton s declarative syntax should look like the following:</span></span>

[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample3.aspx)]

<span data-ttu-id="967c9-161">Gdy przycisk zostanie kliknięty, następuje ogłaszanie zwrotne i zdarzenie DataList `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="967c9-161">When the button is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="967c9-162">Program obsługi zdarzeń przekazuje wartości `CommandName` i `CommandArgument` przycisku.</span><span class="sxs-lookup"><span data-stu-id="967c9-162">The event handler is passed the button s `CommandName` and `CommandArgument` values.</span></span>

<span data-ttu-id="967c9-163">Utwórz procedurę obsługi zdarzeń dla zdarzenia `ItemCommand` wzmacniak i zanotuj drugi parametr przekazaną do procedury obsługi zdarzeń (o nazwie `e`).</span><span class="sxs-lookup"><span data-stu-id="967c9-163">Create an event handler for the Repeater s `ItemCommand` event and note the second parameter passed into the event handler (named `e`).</span></span> <span data-ttu-id="967c9-164">Ten drugi parametr jest typu [`RepeaterCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) i ma cztery następujące właściwości:</span><span class="sxs-lookup"><span data-stu-id="967c9-164">This second parameter is of type [`RepeaterCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) and has the following four properties:</span></span>

- <span data-ttu-id="967c9-165">`CommandArgument` wartość właściwości `CommandArgument` klikniętego przycisku</span><span class="sxs-lookup"><span data-stu-id="967c9-165">`CommandArgument` the value of the clicked button s `CommandArgument` property</span></span>
- <span data-ttu-id="967c9-166">`CommandName` wartość właściwości `CommandName` przycisku.</span><span class="sxs-lookup"><span data-stu-id="967c9-166">`CommandName` the value of the button s `CommandName` property</span></span>
- <span data-ttu-id="967c9-167">`CommandSource` odwołanie do kontrolki przycisku, który został kliknięty</span><span class="sxs-lookup"><span data-stu-id="967c9-167">`CommandSource` a reference to the button control that was clicked</span></span>
- <span data-ttu-id="967c9-168">`Item` odwołanie do [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx) zawierające kliknięty przycisk; Każdy rekord powiązany z wzmacniak jest uznawany za `RepeaterItem`</span><span class="sxs-lookup"><span data-stu-id="967c9-168">`Item` a reference to the [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx) that contains the button that was clicked; each record bound to the Repeater is manifested as a `RepeaterItem`</span></span>

<span data-ttu-id="967c9-169">Ponieważ wybrana kategoria s `CategoryID` jest przenoszona za pośrednictwem właściwości `CommandArgument`, możemy pobrać zestaw produktów skojarzonych z wybraną kategorią w programie obsługi zdarzeń `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="967c9-169">Since the selected category s `CategoryID` is passed in via the `CommandArgument` property, we can get the set of products associated with the selected category in the `ItemCommand` event handler.</span></span> <span data-ttu-id="967c9-170">Te produkty można następnie powiązać z kontrolką BulletedList w `ItemTemplate` (które jeszcze nie zostały dodane).</span><span class="sxs-lookup"><span data-stu-id="967c9-170">These products can then be bound to a BulletedList control in the `ItemTemplate` (which we ve yet to add).</span></span> <span data-ttu-id="967c9-171">Wszystko to, to znaczy dodać BulletedList, odwoływać się do niego w obsłudze zdarzeń `ItemCommand` i powiązać z nim zestaw produktów dla wybranej kategorii, którą będziemy w kroku 4.</span><span class="sxs-lookup"><span data-stu-id="967c9-171">All that remains, then, is to add the BulletedList, reference it in the `ItemCommand` event handler, and bind to it the set of products for the selected category, which we'll tackle in Step 4.</span></span>

> [!NOTE]
> <span data-ttu-id="967c9-172">Procedura obsługi zdarzeń `ItemCommand` DataList s jest przenoszona do obiektu typu [`DataListCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), który oferuje te same cztery właściwości, co Klasa `RepeaterCommandEventArgs`.</span><span class="sxs-lookup"><span data-stu-id="967c9-172">The DataList s `ItemCommand` event handler is passed an object of type [`DataListCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), which offers the same four properties as the `RepeaterCommandEventArgs` class.</span></span>

## <a name="step-4-displaying-the-selected-category-s-products-in-a-bulleted-list"></a><span data-ttu-id="967c9-173">Krok 4. Wyświetlanie wybranych produktów kategorii z listy punktowanej</span><span class="sxs-lookup"><span data-stu-id="967c9-173">Step 4: Displaying the Selected Category s Products in a Bulleted List</span></span>

<span data-ttu-id="967c9-174">Wybrane produkty kategorii s mogą być wyświetlane w ramach `ItemTemplate`ka, przy użyciu dowolnej liczby kontrolek.</span><span class="sxs-lookup"><span data-stu-id="967c9-174">The selected category s products can be displayed within the Repeater s `ItemTemplate` using any number of controls.</span></span> <span data-ttu-id="967c9-175">Możemy dodać innego, zagnieżdżony wzmacniak, element DataList, DropDownList, GridView i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="967c9-175">We could add another nested Repeater, a DataList, a DropDownList, a GridView, and so on.</span></span> <span data-ttu-id="967c9-176">Ponieważ chcemy wyświetlić produkty jako listę punktowaną, będziemy używać kontrolki BulletedList.</span><span class="sxs-lookup"><span data-stu-id="967c9-176">Since we want to display the products as a bulleted list, though, we'll use the BulletedList control.</span></span> <span data-ttu-id="967c9-177">Powracanie do znacznika deklaracyjnego `CustomButtons.aspx` strony, Dodaj kontrolkę BulletedList do `ItemTemplate` po element LinkButton Pokaż produkty.</span><span class="sxs-lookup"><span data-stu-id="967c9-177">Returning to the `CustomButtons.aspx` page s declarative markup, add a BulletedList control to the `ItemTemplate` after the Show Products LinkButton.</span></span> <span data-ttu-id="967c9-178">Ustaw `ID` BulletedLists s, aby `ProductsInCategory`.</span><span class="sxs-lookup"><span data-stu-id="967c9-178">Set the BulletedLists s `ID` to `ProductsInCategory`.</span></span> <span data-ttu-id="967c9-179">BulletedList wyświetla wartość pola danych określonego za pośrednictwem właściwości `DataTextField`; ponieważ ta kontrolka będzie miała powiązane informacje o produkcie, ustaw właściwość `DataTextField` na `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="967c9-179">The BulletedList displays the value of the data field specified via the `DataTextField` property; since this control will have product information bound to it, set the `DataTextField` property to `ProductName`.</span></span>

[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample4.aspx)]

<span data-ttu-id="967c9-180">W obsłudze zdarzeń `ItemCommand` należy odwołać się do tej kontrolki przy użyciu `e.Item.FindControl("ProductsInCategory")` i powiązać ją z zestawem produktów skojarzonych z wybraną kategorią.</span><span class="sxs-lookup"><span data-stu-id="967c9-180">In the `ItemCommand` event handler, reference this control using `e.Item.FindControl("ProductsInCategory")` and bind it to the set of products associated with the selected category.</span></span>

[!code-csharp[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample5.cs)]

<span data-ttu-id="967c9-181">Przed wykonaniem jakiejkolwiek akcji w obsłudze zdarzeń `ItemCommand` należy najpierw sprawdzić wartość `CommandName`przychodzącego.</span><span class="sxs-lookup"><span data-stu-id="967c9-181">Before performing any action in the `ItemCommand` event handler, it s prudent to first check the value of the incoming `CommandName`.</span></span> <span data-ttu-id="967c9-182">Ponieważ program obsługi zdarzeń `ItemCommand` jest uruchamiany po kliknięciu *dowolnego* przycisku, jeśli w szablonie istnieje wiele przycisków, użyj wartości `CommandName`, aby rozpoznać działanie.</span><span class="sxs-lookup"><span data-stu-id="967c9-182">Since the `ItemCommand` event handler fires when *any* button is clicked, if there are multiple buttons in the template use the `CommandName` value to discern what action to take.</span></span> <span data-ttu-id="967c9-183">Sprawdzanie `CommandName` w tym miejscu to Moot, ponieważ mamy tylko jeden przycisk, ale jest to dobry wykonywać do formularza.</span><span class="sxs-lookup"><span data-stu-id="967c9-183">Checking the `CommandName` here is moot, since we only have a single button, but it is a good habit to form.</span></span> <span data-ttu-id="967c9-184">Następnie `CategoryID` wybranej kategorii zostanie pobrana z właściwości `CommandArgument`.</span><span class="sxs-lookup"><span data-stu-id="967c9-184">Next, the `CategoryID` of the selected category is retrieved from the `CommandArgument` property.</span></span> <span data-ttu-id="967c9-185">Kontrolka BulletedList w szablonie jest następnie przywoływana i powiązana z wynikami metody `GetProductsByCategoryID(categoryID)` klasy `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="967c9-185">The BulletedList control in the template is then referenced and bound to the results of the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="967c9-186">W poprzednich samouczkach, które używały przycisków w obrębie elementu DataList, takich jak [Omówienie edytowania i usuwania danych w elemencie DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md), określamy wartość klucza podstawowego danego element za pośrednictwem kolekcji `DataKeys`.</span><span class="sxs-lookup"><span data-stu-id="967c9-186">In previous tutorials that used the buttons within a DataList, such as [An Overview of Editing and Deleting Data in the DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md), we determined the primary key value of a given item via the `DataKeys` collection.</span></span> <span data-ttu-id="967c9-187">Chociaż to podejście działa dobrze z elementem DataList, wzmacniak nie ma właściwości `DataKeys`.</span><span class="sxs-lookup"><span data-stu-id="967c9-187">While this approach works well with the DataList, the Repeater does not have a `DataKeys` property.</span></span> <span data-ttu-id="967c9-188">Zamiast tego należy użyć alternatywnego podejścia do dostarczania wartości klucza podstawowego, na przykład przez właściwość Button s `CommandArgument` lub przez przypisanie wartości klucza podstawowego do kontrolki sieci Web ukrytej etykiety w ramach szablonu i odczytywanie jej wartości z powrotem w programie obsługi zdarzeń `ItemCommand` przy użyciu `e.Item.FindControl("LabelID")`.</span><span class="sxs-lookup"><span data-stu-id="967c9-188">Instead, we must use an alternative approach for supplying the primary key value, such as through the button s `CommandArgument` property or by assigning the primary key value to a hidden Label Web control within the template and reading its value back in the `ItemCommand` event handler using `e.Item.FindControl("LabelID")`.</span></span>

<span data-ttu-id="967c9-189">Po zakończeniu procedury obsługi zdarzeń `ItemCommand` Poświęć chwilę na przetestowanie tej strony w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="967c9-189">After completing the `ItemCommand` event handler, take a moment to test out this page in a browser.</span></span> <span data-ttu-id="967c9-190">Jak pokazano na rysunku 7, kliknięcie linku Pokaż produkty powoduje ogłoszenie zwrotne i wyświetlenie produktów dla wybranej kategorii w BulletedList.</span><span class="sxs-lookup"><span data-stu-id="967c9-190">As Figure 7 shows, clicking the Show Products link causes a postback and displays the products for the selected category in a BulletedList.</span></span> <span data-ttu-id="967c9-191">Ponadto należy zauważyć, że te informacje o produkcie pozostaną, nawet jeśli inne kategorie pokazują linki produktów.</span><span class="sxs-lookup"><span data-stu-id="967c9-191">Furthermore, note that this product information remains, even if other categories Show Products links are clicked.</span></span>

> [!NOTE]
> <span data-ttu-id="967c9-192">Jeśli chcesz zmodyfikować zachowanie tego raportu, w taki sposób, że jedyne produkty kategorii s są wyświetlane w danym momencie, po prostu ustaw właściwość BulletedList Control s `EnableViewState` na `False`.</span><span class="sxs-lookup"><span data-stu-id="967c9-192">If you want to modify the behavior of this report, such that the only one category s products are listed at a time, simply set the BulletedList control s `EnableViewState` property to `False`.</span></span>

<span data-ttu-id="967c9-193">[![BulletedList jest używany do wyświetlania produktów wybranej kategorii](custom-buttons-in-the-datalist-and-repeater-cs/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="967c9-193">[![A BulletedList is used to Display the Products of the Selected Category](custom-buttons-in-the-datalist-and-repeater-cs/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image15.png)</span></span>

<span data-ttu-id="967c9-194">**Rysunek 7**. BulletedList jest używany do wyświetlania produktów wybranej kategorii ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](custom-buttons-in-the-datalist-and-repeater-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="967c9-194">**Figure 7**: A BulletedList is used to Display the Products of the Selected Category ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image17.png))</span></span>

## <a name="summary"></a><span data-ttu-id="967c9-195">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="967c9-195">Summary</span></span>

<span data-ttu-id="967c9-196">Formanty DataList i wzmacniak mogą zawierać dowolną liczbę przycisków, LinkButtons lub ImageButtons w swoich szablonach.</span><span class="sxs-lookup"><span data-stu-id="967c9-196">The DataList and Repeater controls can include any number of Buttons, LinkButtons, or ImageButtons within their templates.</span></span> <span data-ttu-id="967c9-197">Takie przyciski po kliknięciu powodują wystąpienie zwrotne i zgłoś zdarzenie `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="967c9-197">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event.</span></span> <span data-ttu-id="967c9-198">Aby skojarzyć niestandardową akcję po stronie serwera z klikniętym przyciskiem, Utwórz procedurę obsługi zdarzeń dla zdarzenia `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="967c9-198">To associate custom server-side action with a button being clicked, create an event handler for the `ItemCommand` event.</span></span> <span data-ttu-id="967c9-199">W tym obsłudze zdarzeń należy najpierw sprawdzić wartość przychodzącą `CommandName`, aby określić, który przycisk został kliknięty.</span><span class="sxs-lookup"><span data-stu-id="967c9-199">In this event handler first check the incoming `CommandName` value to determine which button was clicked.</span></span> <span data-ttu-id="967c9-200">Dodatkowe informacje można opcjonalnie dostarczyć za pomocą właściwości `CommandArgument` przycisku.</span><span class="sxs-lookup"><span data-stu-id="967c9-200">Additional information can optionally be supplied through the button s `CommandArgument` property.</span></span>

<span data-ttu-id="967c9-201">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="967c9-201">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="967c9-202">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="967c9-202">About the Author</span></span>

<span data-ttu-id="967c9-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor siedmiu grup ASP/ASP. NET Books i założyciel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="967c9-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="967c9-204">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="967c9-204">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="967c9-205">Jego Najnowsza książka to [*Sams ASP.NET 2,0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="967c9-205">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="967c9-206">Można go osiągnąć w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="967c9-206">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="967c9-207">lub za pośrednictwem swojego blogu, który można znaleźć w [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="967c9-207">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="967c9-208">Specjalne podziękowania</span><span class="sxs-lookup"><span data-stu-id="967c9-208">Special Thanks To</span></span>

<span data-ttu-id="967c9-209">Ta seria samouczków została sprawdzona przez wielu przydatnych recenzentów.</span><span class="sxs-lookup"><span data-stu-id="967c9-209">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="967c9-210">Recenzent potencjalnych klientów dla tego samouczka został Dennis Patterson.</span><span class="sxs-lookup"><span data-stu-id="967c9-210">Lead reviewer for this tutorial was Dennis Patterson.</span></span> <span data-ttu-id="967c9-211">Chcesz przeglądać moje nadchodzące artykuły MSDN?</span><span class="sxs-lookup"><span data-stu-id="967c9-211">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="967c9-212">Jeśli tak, upuść mi linię w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="967c9-212">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="967c9-213">Next</span><span class="sxs-lookup"><span data-stu-id="967c9-213">Next</span></span>](custom-buttons-in-the-datalist-and-repeater-vb.md)

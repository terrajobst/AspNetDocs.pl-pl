---
uid: web-forms/overview/data-access/enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs
title: Dodawanie kolumny w widoku GridView (C#) | Microsoft Docs
author: rick-anderson
description: W tym samouczku pokazano, jak dodać kolumnę pól wyboru do kontrolki GridView, aby zapewnić użytkownikowi intuicyjny sposób wybierania wielu wierszy w G...
ms.author: riande
ms.date: 03/06/2007
ms.assetid: f63a9443-2db0-4f80-8246-840d3e86c2a3
msc.legacyurl: /web-forms/overview/data-access/enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs
msc.type: authoredcontent
ms.openlocfilehash: b9d1ed50e8d88202c3286b4cd0e9ebf111dfbe21
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/28/2019
ms.locfileid: "74592698"
---
# <a name="adding-a-gridview-column-of-checkboxes-c"></a><span data-ttu-id="18b92-103">Dodawanie kolumny pól wyboru do kontrolki GridView (C#)</span><span class="sxs-lookup"><span data-stu-id="18b92-103">Adding a GridView Column of Checkboxes (C#)</span></span>

<span data-ttu-id="18b92-104">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="18b92-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="18b92-105">[Pobierz przykładową aplikację](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_52_CS.exe) lub [Pobierz plik PDF](adding-a-gridview-column-of-checkboxes-cs/_static/datatutorial52cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="18b92-105">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_52_CS.exe) or [Download PDF](adding-a-gridview-column-of-checkboxes-cs/_static/datatutorial52cs1.pdf)</span></span>

> <span data-ttu-id="18b92-106">W tym samouczku pokazano, jak dodać kolumnę pól wyboru do kontrolki GridView, aby zapewnić użytkownikowi intuicyjny sposób wybierania wielu wierszy widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="18b92-106">This tutorial looks at how to add a column of check boxes to a GridView control to provide the user with an intuitive way of selecting multiple rows of the GridView.</span></span>

## <a name="introduction"></a><span data-ttu-id="18b92-107">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="18b92-107">Introduction</span></span>

<span data-ttu-id="18b92-108">W poprzednim samouczku sprawdziłem, jak dodać kolumnę przycisków radiowych do widoku GridView na potrzeby wyboru określonego rekordu.</span><span class="sxs-lookup"><span data-stu-id="18b92-108">In the preceding tutorial we examined how to add a column of radio buttons to the GridView for the purpose of selecting a particular record.</span></span> <span data-ttu-id="18b92-109">Kolumna przycisków radiowych jest odpowiednim interfejsem użytkownika, gdy użytkownik jest ograniczony do wybierania maksymalnie jednego elementu z siatki.</span><span class="sxs-lookup"><span data-stu-id="18b92-109">A column of radio buttons is a suitable user interface when the user is limited to choosing at most one item from the grid.</span></span> <span data-ttu-id="18b92-110">Czasami jednak może chcieć zezwolić użytkownikowi na wybranie dowolnej liczby elementów z siatki.</span><span class="sxs-lookup"><span data-stu-id="18b92-110">At times, however, we may want to allow the user to pick an arbitrary number of items from the grid.</span></span> <span data-ttu-id="18b92-111">Klienci poczty e-mail opartej na sieci Web, na przykład, zazwyczaj wyświetlają listę komunikatów z kolumną pól wyboru.</span><span class="sxs-lookup"><span data-stu-id="18b92-111">Web-based email clients, for example, typically display the list of messages with a column of checkboxes.</span></span> <span data-ttu-id="18b92-112">Użytkownik może wybrać dowolną liczbę komunikatów, a następnie wykonać pewne czynności, takie jak przeniesienie wiadomości e-mail do innego folderu lub usunięcie.</span><span class="sxs-lookup"><span data-stu-id="18b92-112">The user can select an arbitrary number of messages and then perform some action, such as moving the emails to another folder or deleting them.</span></span>

<span data-ttu-id="18b92-113">W tym samouczku dowiesz się, jak dodać kolumnę pól wyboru i jak określić, które pola wyboru zostały sprawdzone na serwerze ogłaszania zwrotnego.</span><span class="sxs-lookup"><span data-stu-id="18b92-113">In this tutorial we will see how to add a column of checkboxes and how to determine what checkboxes were checked on postback.</span></span> <span data-ttu-id="18b92-114">W szczególności utworzymy przykład, który ściśle naśladuje interfejs użytkownika klienta poczty e-mail w sieci Web.</span><span class="sxs-lookup"><span data-stu-id="18b92-114">In particular, we'll build an example that closely mimics the web-based email client user interface.</span></span> <span data-ttu-id="18b92-115">Nasz przykład zawiera widok z stronicowaną stroną zawierającą produkty w `Products` tabeli bazy danych z CheckBox w każdym wierszu (patrz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="18b92-115">Our example will include a paged GridView listing the products in the `Products` database table with a checkbox in each row (see Figure 1).</span></span> <span data-ttu-id="18b92-116">Przycisk Usuń wybrane produkty, gdy zostanie kliknięty, spowoduje usunięcie wybranych produktów.</span><span class="sxs-lookup"><span data-stu-id="18b92-116">A Delete Selected Products button, when clicked, will delete those products selected.</span></span>

<span data-ttu-id="18b92-117">[![każdy wiersz produktu zawiera pole wyboru](adding-a-gridview-column-of-checkboxes-cs/_static/image1.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="18b92-117">[![Each Product Row Includes a Checkbox](adding-a-gridview-column-of-checkboxes-cs/_static/image1.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image1.png)</span></span>

<span data-ttu-id="18b92-118">**Rysunek 1**. Każdy wiersz produktu zawiera pole wyboru ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-a-gridview-column-of-checkboxes-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="18b92-118">**Figure 1**: Each Product Row Includes a Checkbox ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image2.png))</span></span>

## <a name="step-1-adding-a-paged-gridview-that-lists-product-information"></a><span data-ttu-id="18b92-119">Krok 1. Dodawanie stronicowanego elementu GridView zawierającego listę informacji o produkcie</span><span class="sxs-lookup"><span data-stu-id="18b92-119">Step 1: Adding a Paged GridView that Lists Product Information</span></span>

<span data-ttu-id="18b92-120">Przed zajęciem dalszych informacji o dodawaniu kolumny pól wyboru poczekaj, aż zamienisz produkty w GridView, który obsługuje stronicowanie.</span><span class="sxs-lookup"><span data-stu-id="18b92-120">Before we worry about adding a column of checkboxes, let s first focus on listing the products in a GridView that supports paging.</span></span> <span data-ttu-id="18b92-121">Zacznij od otwarcia strony `CheckBoxField.aspx` w folderze `EnhancedGridView` i przeciągnij widok GridView z przybornika do projektanta, ustawiając jego `ID` na `Products`.</span><span class="sxs-lookup"><span data-stu-id="18b92-121">Start by opening the `CheckBoxField.aspx` page in the `EnhancedGridView` folder and drag a GridView from the Toolbox onto the Designer, setting its `ID` to `Products`.</span></span> <span data-ttu-id="18b92-122">Następnie wybierz opcję powiązania widoku GridView z nowym elementem ObjectDataSource o nazwie `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="18b92-122">Next, choose to bind the GridView to a new ObjectDataSource named `ProductsDataSource`.</span></span> <span data-ttu-id="18b92-123">Skonfiguruj element ObjectDataSource, aby używał klasy `ProductsBLL`, wywołując metodę `GetProducts()` w celu zwrócenia danych.</span><span class="sxs-lookup"><span data-stu-id="18b92-123">Configure the ObjectDataSource to use the `ProductsBLL` class, calling the `GetProducts()` method to return the data.</span></span> <span data-ttu-id="18b92-124">Ponieważ ten element GridView będzie tylko do odczytu, Ustaw listę rozwijaną na kartach UPDATE, INSERT i DELETE na wartość (brak).</span><span class="sxs-lookup"><span data-stu-id="18b92-124">Since this GridView will be read-only, set the drop-down lists in the UPDATE, INSERT, and DELETE tabs to (None) .</span></span>

<span data-ttu-id="18b92-125">[![utworzyć nowego elementu ObjectDataSource o nazwie ProductsDataSource](adding-a-gridview-column-of-checkboxes-cs/_static/image2.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="18b92-125">[![Create a New ObjectDataSource Named ProductsDataSource](adding-a-gridview-column-of-checkboxes-cs/_static/image2.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image3.png)</span></span>

<span data-ttu-id="18b92-126">**Rysunek 2**. Utwórz nowy element ObjectDataSource o nazwie `ProductsDataSource` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-a-gridview-column-of-checkboxes-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="18b92-126">**Figure 2**: Create a New ObjectDataSource Named `ProductsDataSource` ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image4.png))</span></span>

<span data-ttu-id="18b92-127">[![skonfigurować element ObjectDataSource do pobierania danych za pomocą metody getproductss ()](adding-a-gridview-column-of-checkboxes-cs/_static/image3.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="18b92-127">[![Configure the ObjectDataSource to Retrieve Data Using the GetProducts() Method](adding-a-gridview-column-of-checkboxes-cs/_static/image3.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image5.png)</span></span>

<span data-ttu-id="18b92-128">**Rysunek 3**. Konfigurowanie elementu ObjectDataSource do pobierania danych przy użyciu metody `GetProducts()` ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-a-gridview-column-of-checkboxes-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="18b92-128">**Figure 3**: Configure the ObjectDataSource to Retrieve Data Using the `GetProducts()` Method ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image6.png))</span></span>

<span data-ttu-id="18b92-129">[![ustawić listy rozwijane na kartach Aktualizuj, Wstaw i Usuń do (brak).](adding-a-gridview-column-of-checkboxes-cs/_static/image4.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="18b92-129">[![Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE Tabs to (None)](adding-a-gridview-column-of-checkboxes-cs/_static/image4.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image7.png)</span></span>

<span data-ttu-id="18b92-130">**Rysunek 4**. Ustawianie list rozwijanych w kartach Aktualizuj, Wstaw i Usuń do (brak) ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-a-gridview-column-of-checkboxes-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="18b92-130">**Figure 4**: Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE Tabs to (None) ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image8.png))</span></span>

<span data-ttu-id="18b92-131">Po zakończeniu działania Kreatora konfiguracji źródła danych program Visual Studio automatycznie utworzy elementy BoundColumn i CheckBoxColumn dla pól danych związanych z produktem.</span><span class="sxs-lookup"><span data-stu-id="18b92-131">After completing the Configure Data Source wizard, Visual Studio will automatically create BoundColumns and a CheckBoxColumn for the product-related data fields.</span></span> <span data-ttu-id="18b92-132">Podobnie jak w poprzednim samouczku, Usuń wszystkie oprócz `ProductName`, `CategoryName`i `UnitPrice` BoundFields, a następnie zmień właściwości `HeaderText` na Product, Category i Price.</span><span class="sxs-lookup"><span data-stu-id="18b92-132">Like we did in the previous tutorial, remove all but the `ProductName`, `CategoryName`, and `UnitPrice` BoundFields, and change the `HeaderText` properties to Product, Category, and Price.</span></span> <span data-ttu-id="18b92-133">Skonfiguruj `UnitPrice` BoundField tak, aby jego wartość była sformatowana jako waluta.</span><span class="sxs-lookup"><span data-stu-id="18b92-133">Configure the `UnitPrice` BoundField so that its value is formatted as a currency.</span></span> <span data-ttu-id="18b92-134">Ponadto skonfiguruj widok GridView, aby obsługiwał stronicowanie, zaznaczając pole wyboru Włącz stronicowanie z tagu inteligentnego.</span><span class="sxs-lookup"><span data-stu-id="18b92-134">Also configure the GridView to support paging by checking the Enable Paging checkbox from the smart tag.</span></span>

<span data-ttu-id="18b92-135">Zezwól również na dodanie interfejsu użytkownika do usuwania wybranych produktów.</span><span class="sxs-lookup"><span data-stu-id="18b92-135">Let s also add the user interface for deleting the selected products.</span></span> <span data-ttu-id="18b92-136">Dodaj kontrolkę sieci Web przycisku poniżej widoku GridView, ustawiając jej `ID` na `DeleteSelectedProducts` i jej Właściwość `Text`, aby usunąć wybrane produkty.</span><span class="sxs-lookup"><span data-stu-id="18b92-136">Add a Button Web control beneath the GridView, setting its `ID` to `DeleteSelectedProducts` and its `Text` property to Delete Selected Products.</span></span> <span data-ttu-id="18b92-137">Zamiast usuwać produkty z bazy danych, w tym przykładzie po prostu zostanie wyświetlony komunikat z informacją o produktach, które zostałyby usunięte.</span><span class="sxs-lookup"><span data-stu-id="18b92-137">Rather than actually deleting products from the database, for this example we'll just display a message stating the products that would have been deleted.</span></span> <span data-ttu-id="18b92-138">Aby to umożliwić, Dodaj kontrolkę sieci Web etykieta pod przyciskiem.</span><span class="sxs-lookup"><span data-stu-id="18b92-138">To accommodate this, add a Label Web control beneath the Button.</span></span> <span data-ttu-id="18b92-139">Ustaw jej identyfikator na `DeleteResults`, wyczyść Właściwość `Text` i ustaw jej właściwości `Visible` i `EnableViewState` na `false`.</span><span class="sxs-lookup"><span data-stu-id="18b92-139">Set its ID to `DeleteResults`, clear out its `Text` property, and set its `Visible` and `EnableViewState` properties to `false`.</span></span>

<span data-ttu-id="18b92-140">Po wprowadzeniu tych zmian znaczniki deklaratywne, ObjectDataSource, Button i Label s powinny wyglądać podobnie do następujących:</span><span class="sxs-lookup"><span data-stu-id="18b92-140">After making these changes, the GridView, ObjectDataSource, Button, and Label s declarative markup should similar to the following:</span></span>

[!code-aspx[Main](adding-a-gridview-column-of-checkboxes-cs/samples/sample1.aspx)]

<span data-ttu-id="18b92-141">Poświęć chwilę na wyświetlenie strony w przeglądarce (patrz rysunek 5).</span><span class="sxs-lookup"><span data-stu-id="18b92-141">Take a moment to view the page in a browser (see Figure 5).</span></span> <span data-ttu-id="18b92-142">W tym momencie powinna zostać wyświetlona nazwa, Kategoria i cena pierwszych dziesięciu produktów.</span><span class="sxs-lookup"><span data-stu-id="18b92-142">At this point you should see the name, category, and price of the first ten products.</span></span>

<span data-ttu-id="18b92-143">[![nazwa, Kategoria i cena pierwszych dziesięciu produktów znajduje się na liście](adding-a-gridview-column-of-checkboxes-cs/_static/image5.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="18b92-143">[![The Name, Category, and Price of the First Ten Products are Listed](adding-a-gridview-column-of-checkboxes-cs/_static/image5.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image9.png)</span></span>

<span data-ttu-id="18b92-144">**Rysunek 5**: nazwa, Kategoria i cena pierwszych dziesięciu produktów są wymienione na liście ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-a-gridview-column-of-checkboxes-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="18b92-144">**Figure 5**: The Name, Category, and Price of the First Ten Products are Listed ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image10.png))</span></span>

## <a name="step-2-adding-a-column-of-checkboxes"></a><span data-ttu-id="18b92-145">Krok 2. Dodawanie kolumny pól wyboru</span><span class="sxs-lookup"><span data-stu-id="18b92-145">Step 2: Adding a Column of Checkboxes</span></span>

<span data-ttu-id="18b92-146">Ponieważ ASP.NET 2,0 zawiera CheckBoxField, może to oznaczać, że można go użyć do dodania kolumny pól wyboru do widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="18b92-146">Since ASP.NET 2.0 includes a CheckBoxField, one might think that it could be used to add a column of checkboxes to a GridView.</span></span> <span data-ttu-id="18b92-147">Niestety, nie jest to przypadek, ponieważ CheckBoxField jest przeznaczony do pracy z polem danych wartości logicznych.</span><span class="sxs-lookup"><span data-stu-id="18b92-147">Unfortunately, that is not the case, as the CheckBoxField is designed to work with a Boolean data field.</span></span> <span data-ttu-id="18b92-148">Oznacza to, że w celu użycia CheckBoxField musimy określić bazowe pole danych, którego wartość jest konsultowana, aby określić, czy renderowane pole wyboru jest zaznaczone.</span><span class="sxs-lookup"><span data-stu-id="18b92-148">That is, in order to use the CheckBoxField we must specify the underlying data field whose value is consulted to determine whether the rendered checkbox is checked.</span></span> <span data-ttu-id="18b92-149">Nie można użyć CheckBoxField do dołączenia kolumny niezaznaczonych pól wyboru.</span><span class="sxs-lookup"><span data-stu-id="18b92-149">We cannot use the CheckBoxField to just include a column of unchecked checkboxes.</span></span>

<span data-ttu-id="18b92-150">Zamiast tego należy dodać TemplateField i dodać kontrolkę sieci Web CheckBox do `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="18b92-150">Instead, we must add a TemplateField and add a CheckBox Web control to its `ItemTemplate`.</span></span> <span data-ttu-id="18b92-151">Przejdź dalej i Dodaj TemplateField do `Products` GridView i wprowadź pierwsze (daleko do lewej) pole.</span><span class="sxs-lookup"><span data-stu-id="18b92-151">Go ahead and add a TemplateField to the `Products` GridView and make it the first (far-left) field.</span></span> <span data-ttu-id="18b92-152">W tagu inteligentnym GridView kliknij link Edytuj szablony, a następnie przeciągnij formant sieci Web CheckBox z przybornika do `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="18b92-152">From the GridView s smart tag, click on the Edit Templates link and then drag a CheckBox Web control from the Toolbox into the `ItemTemplate`.</span></span> <span data-ttu-id="18b92-153">Ustaw tę właściwość `ID` CheckBox na `ProductSelector`.</span><span class="sxs-lookup"><span data-stu-id="18b92-153">Set this CheckBox s `ID` property to `ProductSelector`.</span></span>

<span data-ttu-id="18b92-154">[![dodać kontrolkę sieci Web CheckBox o nazwie ProductSelector do TemplateField s ItemTemplate](adding-a-gridview-column-of-checkboxes-cs/_static/image6.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="18b92-154">[![Add a CheckBox Web Control Named ProductSelector to the TemplateField s ItemTemplate](adding-a-gridview-column-of-checkboxes-cs/_static/image6.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image11.png)</span></span>

<span data-ttu-id="18b92-155">**Ilustracja 6**. Dodawanie kontrolki sieci Web CheckBox o nazwie `ProductSelector` do `ItemTemplate` TemplateField ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-a-gridview-column-of-checkboxes-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="18b92-155">**Figure 6**: Add a CheckBox Web Control Named `ProductSelector` to the TemplateField s `ItemTemplate` ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image12.png))</span></span>

<span data-ttu-id="18b92-156">Po dodaniu kontrolki sieci Web TemplateField i CheckBox każdy wiersz zawiera teraz pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="18b92-156">With the TemplateField and CheckBox Web control added, each row now includes a checkbox.</span></span> <span data-ttu-id="18b92-157">Rysunek 7 przedstawia Tę stronę, gdy jest wyświetlany za pomocą przeglądarki, po dodaniu pola wyboru TemplateField i.</span><span class="sxs-lookup"><span data-stu-id="18b92-157">Figure 7 shows this page, when viewed through a browser, after the TemplateField and CheckBox have been added.</span></span>

<span data-ttu-id="18b92-158">[![każdy wiersz produktu zawiera teraz pole wyboru](adding-a-gridview-column-of-checkboxes-cs/_static/image7.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="18b92-158">[![Each Product Row Now Includes a Checkbox](adding-a-gridview-column-of-checkboxes-cs/_static/image7.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image13.png)</span></span>

<span data-ttu-id="18b92-159">**Rysunek 7**: każdy wiersz produktu zawiera teraz pole wyboru ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-a-gridview-column-of-checkboxes-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="18b92-159">**Figure 7**: Each Product Row Now Includes a Checkbox ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image14.png))</span></span>

## <a name="step-3-determining-what-checkboxes-were-checked-on-postback"></a><span data-ttu-id="18b92-160">Krok 3. Określanie, które pola wyboru zostały sprawdzone na ogłaszaniu zwrotnym</span><span class="sxs-lookup"><span data-stu-id="18b92-160">Step 3: Determining What Checkboxes Were Checked On Postback</span></span>

<span data-ttu-id="18b92-161">W tym momencie mamy kolumnę pól wyboru, ale nie chcesz określać, które pola wyboru zostały sprawdzone w odniesieniu do ogłaszania zwrotnego.</span><span class="sxs-lookup"><span data-stu-id="18b92-161">At this point we have a column of checkboxes but no way to determine what checkboxes were checked on postback.</span></span> <span data-ttu-id="18b92-162">Po kliknięciu przycisku Usuń wybrane produkty należy wiedzieć, jakie pola wyboru zostały zaznaczone, aby usunąć te produkty.</span><span class="sxs-lookup"><span data-stu-id="18b92-162">When the Delete Selected Products button is clicked, though, we need to know what checkboxes were checked in order to delete those products.</span></span>

<span data-ttu-id="18b92-163">Właściwość GridView s [`Rows`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rows.aspx) zapewnia dostęp do wierszy danych w widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="18b92-163">The GridView s [`Rows` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rows.aspx) provides access to the data rows in the GridView.</span></span> <span data-ttu-id="18b92-164">Możemy wykonać iterację tych wierszy, programowo uzyskać dostęp do kontrolki CheckBox, a następnie zajrzeć do jej właściwości `Checked`, aby określić, czy pole wyboru zostało zaznaczone.</span><span class="sxs-lookup"><span data-stu-id="18b92-164">We can iterate through these rows, programmatically access the CheckBox control, and then consult its `Checked` property to determine whether the CheckBox has been selected.</span></span>

<span data-ttu-id="18b92-165">Utwórz procedurę obsługi zdarzeń dla `DeleteSelectedProducts` przycisku `Click` kontrolki sieci Web, a następnie Dodaj następujący kod:</span><span class="sxs-lookup"><span data-stu-id="18b92-165">Create an event handler for the `DeleteSelectedProducts` Button Web control s `Click` event and add the following code:</span></span>

[!code-csharp[Main](adding-a-gridview-column-of-checkboxes-cs/samples/sample2.cs)]

<span data-ttu-id="18b92-166">Właściwość `Rows` zwraca kolekcję wystąpień `GridViewRow`, które korzeń wiersze danych GridView.</span><span class="sxs-lookup"><span data-stu-id="18b92-166">The `Rows` property returns a collection of `GridViewRow` instances that makeup the GridView s data rows.</span></span> <span data-ttu-id="18b92-167">W tym miejscu `foreach` pętla wylicza tę kolekcję.</span><span class="sxs-lookup"><span data-stu-id="18b92-167">The `foreach` loop here enumerates this collection.</span></span> <span data-ttu-id="18b92-168">Dla każdego obiektu `GridViewRow` pole wyboru wiersza s jest dostępne programowo przy użyciu `row.FindControl("controlID")`.</span><span class="sxs-lookup"><span data-stu-id="18b92-168">For each `GridViewRow` object, the row s CheckBox is programmatically accessed using `row.FindControl("controlID")`.</span></span> <span data-ttu-id="18b92-169">Jeśli pole wyboru jest zaznaczone, wiersz s odpowiadający wartości `ProductID` jest pobierany z kolekcji `DataKeys`.</span><span class="sxs-lookup"><span data-stu-id="18b92-169">If the CheckBox is checked, the row s corresponding `ProductID` value is retrieved from the `DataKeys` collection.</span></span> <span data-ttu-id="18b92-170">W tym ćwiczeniu po prostu wyświetlamy komunikat informacyjny w etykiecie `DeleteResults`, chociaż w działającej aplikacji My d zamiast tego nastąpi wywołanie metody `DeleteProduct(productID)` `ProductsBLL` klasy s.</span><span class="sxs-lookup"><span data-stu-id="18b92-170">In this exercise, we simply display an informative message in the `DeleteResults` Label, although in a working application we d instead make a call to the `ProductsBLL` class s `DeleteProduct(productID)` method.</span></span>

<span data-ttu-id="18b92-171">Po dodaniu tego programu obsługi zdarzeń kliknięcie przycisku Usuń wybrane produkty spowoduje wyświetlenie `ProductID` s wybranych produktów.</span><span class="sxs-lookup"><span data-stu-id="18b92-171">With the addition of this event handler, clicking the Delete Selected Products button now displays the `ProductID` s of the selected products.</span></span>

<span data-ttu-id="18b92-172">[![po kliknięciu przycisku Usuń wybrane produkty zostaną wyświetlone wybrane produkty ProductID](adding-a-gridview-column-of-checkboxes-cs/_static/image8.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="18b92-172">[![When the Delete Selected Products Button is Clicked the Selected Products ProductIDs are Listed](adding-a-gridview-column-of-checkboxes-cs/_static/image8.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image15.png)</span></span>

<span data-ttu-id="18b92-173">**Ilustracja 8**. po kliknięciu przycisku Usuń wybrane produkty na liście zostaną wyświetlone wybrane produkty `ProductID` s ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-a-gridview-column-of-checkboxes-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="18b92-173">**Figure 8**: When the Delete Selected Products Button is Clicked the Selected Products `ProductID` s are Listed ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image16.png))</span></span>

## <a name="step-4-adding-check-all-and-uncheck-all-buttons"></a><span data-ttu-id="18b92-174">Krok 4. dodanie opcji Zaznacz wszystko i usuń zaznaczenie wszystkich przycisków</span><span class="sxs-lookup"><span data-stu-id="18b92-174">Step 4: Adding Check All and Uncheck All Buttons</span></span>

<span data-ttu-id="18b92-175">Jeśli użytkownik chce usunąć wszystkie produkty na bieżącej stronie, musi zaznaczyć każdy z dziesięciu pól wyboru.</span><span class="sxs-lookup"><span data-stu-id="18b92-175">If a user wants to delete all products on the current page, they must check each of the ten checkboxes.</span></span> <span data-ttu-id="18b92-176">Możemy pomóc przyspieszyć ten proces, dodając przycisk Zaznacz wszystko, który po kliknięciu zaznacza wszystkie pola wyboru w siatce.</span><span class="sxs-lookup"><span data-stu-id="18b92-176">We can help expedite this process by adding a Check All button that, when clicked, selects all of the checkboxes in the grid.</span></span> <span data-ttu-id="18b92-177">Przycisk Usuń wszystko jest równie przydatny.</span><span class="sxs-lookup"><span data-stu-id="18b92-177">An Uncheck All button would be equally helpful.</span></span>

<span data-ttu-id="18b92-178">Dodaj dwa kontrolki sieci Web Button do strony, umieszczając je nad GridView.</span><span class="sxs-lookup"><span data-stu-id="18b92-178">Add two Button Web controls to the page, placing them above the GridView.</span></span> <span data-ttu-id="18b92-179">Ustaw `ID` pierwszej `CheckAll` i Właściwość `Text` do sprawdzenia wszystkich; Ustaw drugą `ID` s `UncheckAll` i jej Właściwość `Text`, aby usunąć zaznaczenie wszystkiego.</span><span class="sxs-lookup"><span data-stu-id="18b92-179">Set the first one s `ID` to `CheckAll` and its `Text` property to Check All ; set the second one s `ID` to `UncheckAll` and its `Text` property to Uncheck All .</span></span>

[!code-aspx[Main](adding-a-gridview-column-of-checkboxes-cs/samples/sample3.aspx)]

<span data-ttu-id="18b92-180">Następnie Utwórz metodę w klasie związanej z kodem o nazwie `ToggleCheckState(checkState)`, która po wywołaniu powoduje Wyliczenie `Products` widoku GridView `Rows` i ustawia każdą właściwość CheckBox s `Checked` na wartość przekazaną w parametrze *wartość CheckState zaznaczonego* .</span><span class="sxs-lookup"><span data-stu-id="18b92-180">Next, create a method in the code-behind class named `ToggleCheckState(checkState)` that, when invoked, enumerates the `Products` GridView s `Rows` collection and sets each CheckBox s `Checked` property to the value of the passed in *checkState* parameter.</span></span>

[!code-csharp[Main](adding-a-gridview-column-of-checkboxes-cs/samples/sample4.cs)]

<span data-ttu-id="18b92-181">Następnie utwórz obsługę zdarzeń `Click` dla przycisków `CheckAll` i `UncheckAll`.</span><span class="sxs-lookup"><span data-stu-id="18b92-181">Next, create `Click` event handlers for the `CheckAll` and `UncheckAll` buttons.</span></span> <span data-ttu-id="18b92-182">W programie obsługi zdarzeń `CheckAll` s po prostu wywołaj `ToggleCheckState(true)`; w `UncheckAll`Wywołaj `ToggleCheckState(false)`.</span><span class="sxs-lookup"><span data-stu-id="18b92-182">In `CheckAll` s event handler, simply call `ToggleCheckState(true)`; in `UncheckAll`, call `ToggleCheckState(false)`.</span></span>

[!code-csharp[Main](adding-a-gridview-column-of-checkboxes-cs/samples/sample5.cs)]

<span data-ttu-id="18b92-183">Po wybraniu tego kodu po kliknięciu przycisku Zaznacz wszystko powoduje ogłoszenie zwrotne i sprawdza wszystkie pola wyboru w widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="18b92-183">With this code, clicking the Check All button causes a postback and checks all of the checkboxes in the GridView.</span></span> <span data-ttu-id="18b92-184">Analogicznie, kliknięcie pozycji Usuń wszystkie powoduje usunięcie zaznaczenia wszystkich pól wyboru.</span><span class="sxs-lookup"><span data-stu-id="18b92-184">Likewise, clicking Uncheck All unselects all checkboxes.</span></span> <span data-ttu-id="18b92-185">Rysunek 9 przedstawia ekran po sprawdzeniu, czy przycisk Sprawdź wszystko zostało zaznaczone.</span><span class="sxs-lookup"><span data-stu-id="18b92-185">Figure 9 shows the screen after the Check All button has been checked.</span></span>

<span data-ttu-id="18b92-186">[![kliknięcie przycisku Zaznacz wszystko powoduje zaznaczenie wszystkich pól wyboru](adding-a-gridview-column-of-checkboxes-cs/_static/image9.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="18b92-186">[![Clicking the Check All Button Selects All Checkboxes](adding-a-gridview-column-of-checkboxes-cs/_static/image9.gif)](adding-a-gridview-column-of-checkboxes-cs/_static/image17.png)</span></span>

<span data-ttu-id="18b92-187">**Ilustracja 9**. kliknięcie przycisku Zaznacz wszystko powoduje zaznaczenie wszystkich pól wyboru ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](adding-a-gridview-column-of-checkboxes-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="18b92-187">**Figure 9**: Clicking the Check All Button Selects All Checkboxes ([Click to view full-size image](adding-a-gridview-column-of-checkboxes-cs/_static/image18.png))</span></span>

> [!NOTE]
> <span data-ttu-id="18b92-188">Podczas wyświetlania kolumny pól wyboru jedno z metod zaznaczania lub zaznaczania zaznaczenia wszystkich pól wyboru jest za pomocą pola wyboru w wierszu nagłówka.</span><span class="sxs-lookup"><span data-stu-id="18b92-188">When displaying a column of checkboxes, one approach for selecting or unselecting all of the checkboxes is through a checkbox in the header row.</span></span> <span data-ttu-id="18b92-189">Ponadto bieżąca klauzula Check All/Usuń zaznaczenie wszystkich implementacji wymaga odświeżenia.</span><span class="sxs-lookup"><span data-stu-id="18b92-189">Moreover, the current Check All / Uncheck All implementation requires a postback.</span></span> <span data-ttu-id="18b92-190">Pola wyboru można sprawdzić lub zaznaczyć, całkowicie za pomocą skryptu po stronie klienta, zapewniając tym samym środowisko użytkownika snappier.</span><span class="sxs-lookup"><span data-stu-id="18b92-190">The checkboxes can be checked or unchecked, however, entirely through client-side script, thereby providing a snappier user experience.</span></span> <span data-ttu-id="18b92-191">Aby eksplorować przy użyciu pola wyboru wiersza nagłówka dla opcji Zaznacz wszystko i odznacz wszystkie szczegóły, a także dyskusje na temat korzystania z technik po stronie klienta, sprawdź [zaznaczenie wszystkich pól wyboru w widoku GridView przy użyciu skryptu po stronie klienta i pola wyboru Zaznacz wszystko](http://aspnet.4guysfromrolla.com/articles/053106-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="18b92-191">To explore using a header row checkbox for Check All and Uncheck All in detail, along with a discussion on using client-side techniques, check out [Checking All CheckBoxes in a GridView Using Client-Side Script and a Check All CheckBox](http://aspnet.4guysfromrolla.com/articles/053106-1.aspx).</span></span>

## <a name="summary"></a><span data-ttu-id="18b92-192">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="18b92-192">Summary</span></span>

<span data-ttu-id="18b92-193">W przypadkach, gdy musisz zezwolić użytkownikom na wybranie dowolnej liczby wierszy z widoku GridView przed kontynuowaniem, Dodawanie kolumny pól wyboru jest jedną z opcji.</span><span class="sxs-lookup"><span data-stu-id="18b92-193">In cases where you need to let users choose an arbitrary number of rows from a GridView before proceeding, adding a column of checkboxes is one option.</span></span> <span data-ttu-id="18b92-194">Jak zostało to opisane w tym samouczku, wraz z kolumną pól wyboru w widoku GridView pociąga za sobą dodanie TemplateField z kontrolką sieci Web CheckBox.</span><span class="sxs-lookup"><span data-stu-id="18b92-194">As we saw in this tutorial, including a column of checkboxes in the GridView entails adding a TemplateField with a CheckBox Web control.</span></span> <span data-ttu-id="18b92-195">Za pomocą kontrolki sieci Web (w przeciwieństwie do dodawania znaczników bezpośrednio do szablonu, jak w poprzednim samouczku) ASP.NET automatycznie zapamiętuje pola wyboru i nie zostały zaewidencjonowane przez ogłaszanie zwrotne.</span><span class="sxs-lookup"><span data-stu-id="18b92-195">By using a Web control (versus injecting markup directly into the template, as we did in the previous tutorial) ASP.NET automatically remembers what CheckBoxes were and were not checked across postback.</span></span> <span data-ttu-id="18b92-196">Możemy również programowo uzyskać dostęp do pól wyboru w kodzie, aby określić, czy dane pole wyboru jest zaznaczone, lub zmienić stan zaznaczenia.</span><span class="sxs-lookup"><span data-stu-id="18b92-196">We can also programmatically access the CheckBoxes in code to determine whether a given CheckBox is checked, or to change the checked state.</span></span>

<span data-ttu-id="18b92-197">W tym samouczku i ostatnim z nich Oglądano Dodawanie kolumny selektora wierszy do widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="18b92-197">This tutorial and the last one looked at adding a row selector column to the GridView.</span></span> <span data-ttu-id="18b92-198">W naszym następnym samouczku sprawdzimy, w jaki sposób, z chwilą pracy, możemy dodać możliwości wstawiania do widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="18b92-198">In our next tutorial we'll examine how, with a bit of work, we can add inserting capabilities to the GridView.</span></span>

<span data-ttu-id="18b92-199">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="18b92-199">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="18b92-200">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="18b92-200">About the Author</span></span>

<span data-ttu-id="18b92-201">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor siedmiu grup ASP/ASP. NET Books i założyciel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracował z technologiami sieci Web firmy Microsoft od czasu 1998.</span><span class="sxs-lookup"><span data-stu-id="18b92-201">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="18b92-202">Scott działa jako niezależny konsultant, trainer i składnik zapisywania.</span><span class="sxs-lookup"><span data-stu-id="18b92-202">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="18b92-203">Jego Najnowsza książka to [*Sams ASP.NET 2,0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="18b92-203">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="18b92-204">Można go osiągnąć w [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="18b92-204">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="18b92-205">lub za pośrednictwem swojego blogu, który można znaleźć w [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="18b92-205">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="18b92-206">[Poprzednie](adding-a-gridview-column-of-radio-buttons-cs.md)
> [dalej](inserting-a-new-record-from-the-gridview-s-footer-cs.md)</span><span class="sxs-lookup"><span data-stu-id="18b92-206">[Previous](adding-a-gridview-column-of-radio-buttons-cs.md)
[Next](inserting-a-new-record-from-the-gridview-s-footer-cs.md)</span></span>

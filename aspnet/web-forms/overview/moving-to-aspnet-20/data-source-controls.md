---
uid: web-forms/overview/moving-to-aspnet-20/data-source-controls
title: Źródła danych kontrolki | Dokumentacja firmy Microsoft
author: microsoft
description: Formant DataGrid na platformie ASP.NET 1.x oznaczone doskonałe poprawę dostęp do danych w aplikacji sieci Web. Jednak to nie było jak przyjazna dla użytkownika jako mogło być...
ms.author: riande
ms.date: 02/20/2005
ms.assetid: 78fd0e92-f9c6-4e96-a5e9-0375b307a828
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/data-source-controls
msc.type: authoredcontent
ms.openlocfilehash: ba00024e93beba6eab226dd0d381d8734061e095
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/01/2019
ms.locfileid: "57070295"
---
<a name="data-source-controls"></a><span data-ttu-id="0fab2-104">Kontrolki źródła danych</span><span class="sxs-lookup"><span data-stu-id="0fab2-104">Data Source Controls</span></span>
====================
<span data-ttu-id="0fab2-105">przez [firmy Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="0fab2-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="0fab2-106">Formant DataGrid na platformie ASP.NET 1.x oznaczone doskonałe poprawę dostęp do danych w aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="0fab2-106">The DataGrid control in ASP.NET 1.x marked a great improvement in data access in Web applications.</span></span> <span data-ttu-id="0fab2-107">Jednak to nie było jak przyjazna dla użytkownika jako mogło być.</span><span class="sxs-lookup"><span data-stu-id="0fab2-107">However, it wasn't as user-friendly as it could have been.</span></span> <span data-ttu-id="0fab2-108">Wymaga ona nadal znaczną ilość kodu w celu uzyskania wiele przydatnych funkcji z niego.</span><span class="sxs-lookup"><span data-stu-id="0fab2-108">It still required a considerable amount of code to obtain much useful functionality from it.</span></span> <span data-ttu-id="0fab2-109">Przykład jest modelem w wszystkich przedsięwzięciach dostępu do danych w 1.x.</span><span class="sxs-lookup"><span data-stu-id="0fab2-109">Such is the model in all data access endeavors in 1.x.</span></span>


<span data-ttu-id="0fab2-110">Formant DataGrid na platformie ASP.NET 1.x oznaczone doskonałe poprawę dostęp do danych w aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="0fab2-110">The DataGrid control in ASP.NET 1.x marked a great improvement in data access in Web applications.</span></span> <span data-ttu-id="0fab2-111">Jednak to nie było jak przyjazna dla użytkownika jako mogło być.</span><span class="sxs-lookup"><span data-stu-id="0fab2-111">However, it wasn't as user-friendly as it could have been.</span></span> <span data-ttu-id="0fab2-112">Wymaga ona nadal znaczną ilość kodu w celu uzyskania wiele przydatnych funkcji z niego.</span><span class="sxs-lookup"><span data-stu-id="0fab2-112">It still required a considerable amount of code to obtain much useful functionality from it.</span></span> <span data-ttu-id="0fab2-113">Przykład jest modelem w wszystkich przedsięwzięciach dostępu do danych w 1.x.</span><span class="sxs-lookup"><span data-stu-id="0fab2-113">Such is the model in all data access endeavors in 1.x.</span></span>

<span data-ttu-id="0fab2-114">ASP.NET 2.0 rozwiązuje ten problem z częściowo z kontrolki źródła danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-114">ASP.NET 2.0 addresses this with in part with data source controls.</span></span> <span data-ttu-id="0fab2-115">Kontrolki źródła danych w programie ASP.NET 2.0 zapewnia deweloperom deklaratywny model do pobierania danych, wyświetlanie danych i edytowania danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-115">The data source controls in ASP.NET 2.0 provide developers with a declarative model for retrieving data, displaying data, and editing data.</span></span> <span data-ttu-id="0fab2-116">Kontrolki źródła danych ma na celu zapewnienia spójna reprezentacja danych do kontrolek powiązanych z danymi niezależnie od źródła tych danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-116">The purpose of data source controls is to provide a consistent representation of data to data-bound controls regardless of the source of those data.</span></span> <span data-ttu-id="0fab2-117">W ramach kontrolki źródła danych w programie ASP.NET 2.0 jest klasa abstrakcyjna format źródła danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-117">At the heart of the data source controls in ASP.NET 2.0 is the DataSourceControl abstract class.</span></span> <span data-ttu-id="0fab2-118">Klasa format źródła danych udostępnia podstawowej implementacji interfejsu IDataSource i interfejsu IListSource ostatni z nich umożliwia przypisanie do kontroli źródła danych jako źródła danych (za pośrednictwem nową właściwość DataSourceId kontrolki powiązane z danymi omówiono w dalszej części) i uwidocznić dane zapisane w postaci listy.</span><span class="sxs-lookup"><span data-stu-id="0fab2-118">The DataSourceControl class provides a base implementation of the IDataSource interface and the IListSource interface, the latter of which allows you to assign the data source control as the DataSource of a data-bound control (via the new DataSourceId property discussed later) and expose the data therein as a list.</span></span> <span data-ttu-id="0fab2-119">Każda lista danych, z poziomu kontroli źródła danych jest udostępniany jako obiekt DataSourceView.</span><span class="sxs-lookup"><span data-stu-id="0fab2-119">Each list of data from a data source control is exposed as a DataSourceView object.</span></span> <span data-ttu-id="0fab2-120">Dostęp do wystąpienia DataSourceView jest zapewniana przez interfejsu IDataSource.</span><span class="sxs-lookup"><span data-stu-id="0fab2-120">Access to the DataSourceView instances is provided by the IDataSource interface.</span></span> <span data-ttu-id="0fab2-121">Na przykład metoda GetViewNames zwraca interfejs ICollection, umożliwiający wyliczenie DataSourceViews skojarzone z kontrolą źródła danych, a metoda GetView umożliwia dostęp do konkretnego wystąpienia DataSourceView według nazwy.</span><span class="sxs-lookup"><span data-stu-id="0fab2-121">For example, the GetViewNames method returns an ICollection that allows you to enumerate the DataSourceViews associated with a particular data source control, and the GetView method allows you to access a particular DataSourceView instance by name.</span></span>

<span data-ttu-id="0fab2-122">Kontrolki źródła danych mają bez interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="0fab2-122">Data source controls have no user-interface.</span></span> <span data-ttu-id="0fab2-123">Są implementowane jako serwera decyduje, czy obsługują one składni deklaratywnej i aby mieli oni dostęp do stanu strony w razie potrzeby.</span><span class="sxs-lookup"><span data-stu-id="0fab2-123">They are implemented as server controls so that they can support declarative syntax and so that they have access to page state if desired.</span></span> <span data-ttu-id="0fab2-124">Kontrolki źródła danych nie są renderowane żadnych znaczników HTML do klienta.</span><span class="sxs-lookup"><span data-stu-id="0fab2-124">Data source controls do not render any HTML markup to the client.</span></span>

> [!NOTE]
> <span data-ttu-id="0fab2-125">Jak zobaczysz później, są również buforowania korzyści można uzyskać za pomocą kontrolki źródła danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-125">As you'll see later, there are also caching benefits obtained by using data source controls.</span></span>


## <a name="storing-connection-strings"></a><span data-ttu-id="0fab2-126">Przechowywanie parametrów połączenia</span><span class="sxs-lookup"><span data-stu-id="0fab2-126">Storing Connection Strings</span></span>

<span data-ttu-id="0fab2-127">Przed przejściem do spojrzenie na sposób konfigurowania kontrolki źródła danych, firma Microsoft obejmuje nową funkcję w programie ASP.NET 2.0 dotyczących parametrów połączenia.</span><span class="sxs-lookup"><span data-stu-id="0fab2-127">Before we get into looking at how to configure data source controls, we should cover a new capability in ASP.NET 2.0 concerning connection strings.</span></span> <span data-ttu-id="0fab2-128">Program ASP.NET 2.0 wprowadzono nową sekcję w pliku konfiguracji, który można łatwo przechowywać parametry połączenia, które mogą być odczytywane dynamicznie w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="0fab2-128">ASP.NET 2.0 introduces a new section in the configuration file that allows you to easily store connection strings that can be read dynamically at runtime.</span></span> <span data-ttu-id="0fab2-129">&lt;ConnectionStrings&gt; sekcji można łatwo przechowywać parametry połączenia.</span><span class="sxs-lookup"><span data-stu-id="0fab2-129">The &lt;connectionStrings&gt; section makes it easy to store connection strings.</span></span>

<span data-ttu-id="0fab2-130">Poniższy fragment kodu dodaje nowe parametry połączenia.</span><span class="sxs-lookup"><span data-stu-id="0fab2-130">The snippet below adds a new connection string.</span></span>

[!code-xml[Main](data-source-controls/samples/sample1.xml)]

> [!NOTE]
> <span data-ttu-id="0fab2-131">Podobnie jak &lt;appSettings&gt; sekcji &lt;connectionStrings&gt; poza pojawi się sekcja &lt;system.web&gt; sekcji w pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="0fab2-131">Just as with the &lt;appSettings&gt; section, the &lt;connectionStrings&gt; section appears outside of the &lt;system.web&gt; section in the configuration file.</span></span>


<span data-ttu-id="0fab2-132">Aby użyć tych parametrów połączenia, można użyć następującej składni, podczas ustawiania atrybutu ConnectionString formant serwera.</span><span class="sxs-lookup"><span data-stu-id="0fab2-132">To use this connection string, you can use the following syntax when setting the ConnectionString attribute of a server control.</span></span>

[!code-aspx[Main](data-source-controls/samples/sample2.aspx)]

<span data-ttu-id="0fab2-133">&lt;ConnectionStrings&gt; sekcji może również być szyfrowana, tak, aby nie jest uwidaczniana, poufne informacje.</span><span class="sxs-lookup"><span data-stu-id="0fab2-133">The &lt;connectionStrings&gt; section can also be encrypted so that sensitive information is not exposed.</span></span> <span data-ttu-id="0fab2-134">Tej możliwości zostaną omówione w nowszym module.</span><span class="sxs-lookup"><span data-stu-id="0fab2-134">That ability will be covered in a later module.</span></span>

## <a name="caching-data-sources"></a><span data-ttu-id="0fab2-135">Buforowanie źródła danych</span><span class="sxs-lookup"><span data-stu-id="0fab2-135">Caching Data Sources</span></span>

<span data-ttu-id="0fab2-136">Każdy format źródła danych zawiera cztery właściwości konfiguracji pamięci podręcznej; EnableCaching, CacheDuration, CacheExpirationPolicy i CacheKeyDependency.</span><span class="sxs-lookup"><span data-stu-id="0fab2-136">Each DataSourceControl provides four properties for configuring caching; EnableCaching, CacheDuration, CacheExpirationPolicy, and CacheKeyDependency.</span></span>

## <a name="enablecaching"></a><span data-ttu-id="0fab2-137">EnableCaching</span><span class="sxs-lookup"><span data-stu-id="0fab2-137">EnableCaching</span></span>

<span data-ttu-id="0fab2-138">EnableCaching jest właściwość typu Boolean określającą, czy pamięć podręczna jest włączona dla kontroli źródła danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-138">EnableCaching is a Boolean property that determines whether or not caching is enabled for the data source control.</span></span>

## <a name="cacheduration-property"></a><span data-ttu-id="0fab2-139">Właściwość CacheDuration</span><span class="sxs-lookup"><span data-stu-id="0fab2-139">CacheDuration Property</span></span>

<span data-ttu-id="0fab2-140">Właściwość CacheDuration Ustawia liczbę sekund pamięci podręcznej pozostaje ważny.</span><span class="sxs-lookup"><span data-stu-id="0fab2-140">The CacheDuration property sets the number of seconds that the cache remains valid.</span></span> <span data-ttu-id="0fab2-141">Ustawienie tej właściwości na **0** powoduje, że pamięć podręczna pozostanie ważny aż do jawnie unieważnione.</span><span class="sxs-lookup"><span data-stu-id="0fab2-141">Setting this property to **0** causes the cache to remain valid until explicitly invalidated.</span></span>

## <a name="cacheexpirationpolicy-property"></a><span data-ttu-id="0fab2-142">CacheExpirationPolicy Property</span><span class="sxs-lookup"><span data-stu-id="0fab2-142">CacheExpirationPolicy Property</span></span>

<span data-ttu-id="0fab2-143">Właściwość CacheExpirationPolicy może być ustawiony na **bezwzględne** lub **ruchomej**.</span><span class="sxs-lookup"><span data-stu-id="0fab2-143">The CacheExpirationPolicy property can be set to either **Absolute** or **Sliding**.</span></span> <span data-ttu-id="0fab2-144">Ustawieniem dla niego bezwzględne oznacza, że maksymalną ilość czasu, które będą buforowane dane są liczby sekund określonej przez właściwość CacheDuration.</span><span class="sxs-lookup"><span data-stu-id="0fab2-144">Setting it to Absolute means that the maximum amount of time that the data will be cached is the number of seconds specified by the CacheDuration property.</span></span> <span data-ttu-id="0fab2-145">Ustawiając wartość ruchomej, czas wygaśnięcia zostaje zresetowany, gdy każda operacja jest wykonywana.</span><span class="sxs-lookup"><span data-stu-id="0fab2-145">By setting it to Sliding, the expiration time is reset when each operation is performed.</span></span>

## <a name="cachekeydependency-property"></a><span data-ttu-id="0fab2-146">CacheKeyDependency Property</span><span class="sxs-lookup"><span data-stu-id="0fab2-146">CacheKeyDependency Property</span></span>

<span data-ttu-id="0fab2-147">Jeśli wartość ciągu jest określona dla właściwości CacheKeyDependency, ASP.NET skonfiguruje zależność pamięci podręcznej na podstawie tego ciągu.</span><span class="sxs-lookup"><span data-stu-id="0fab2-147">If a string value is specified for the CacheKeyDependency property, ASP.NET will set up a new cache dependency based on that string.</span></span> <span data-ttu-id="0fab2-148">Dzięki temu można jawnie unieważnienia pamięci podręcznej, po prostu zmienić lub usunąć CacheKeyDependency.</span><span class="sxs-lookup"><span data-stu-id="0fab2-148">This allows you to explicitly invalidate the cache by simply changing or removing the CacheKeyDependency.</span></span>

<span data-ttu-id="0fab2-149">**Ważne**: Jeśli personifikacja jest włączona, a dostęp do źródła danych i/lub zawartości danych, które są oparte na tożsamości klienta, zalecane jest, że buforowanie można wyłączyć, ustawiając EnableCaching na wartość False.</span><span class="sxs-lookup"><span data-stu-id="0fab2-149">**Important**: If impersonation is enabled and access to the data source and/or content of data are based upon client identity, it is recommended that caching be disabled by setting EnableCaching to False.</span></span> <span data-ttu-id="0fab2-150">Jeśli w tym scenariuszu włączone jest buforowanie, użytkownik inny niż użytkownik, który pierwotnie żądaną danych generuje żądanie autoryzacji do źródła danych nie jest wymuszana.</span><span class="sxs-lookup"><span data-stu-id="0fab2-150">If caching is enabled in this scenario and a user other than the user who originally requested the data issues a request, authorization to the data source is not enforced.</span></span> <span data-ttu-id="0fab2-151">Dane będą po prostu udostępnianie z pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="0fab2-151">The data will simply be served from cache.</span></span>

## <a name="the-sqldatasource-control"></a><span data-ttu-id="0fab2-152">Kontrolki SqlDataSource</span><span class="sxs-lookup"><span data-stu-id="0fab2-152">The SqlDataSource Control</span></span>

<span data-ttu-id="0fab2-153">Kontrolki SqlDataSource umożliwia deweloperom dostęp do danych przechowywanych w relacyjnej bazie danych, która obsługuje ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="0fab2-153">The SqlDataSource control allows a developer to access data stored in any relational database that supports ADO.NET.</span></span> <span data-ttu-id="0fab2-154">Służy dostawcy System.Data.SqlClient dostęp do bazy danych programu SQL Server, dostawca System.Data.OleDb, dostawca System.Data.Odbc lub dostawcę klient system.Data.Oracle dostęp do oprogramowania Oracle.</span><span class="sxs-lookup"><span data-stu-id="0fab2-154">It can use the System.Data.SqlClient provider to access a SQL Server database, the System.Data.OleDb provider, the System.Data.Odbc provider, or the System.Data.OracleClient provider to access Oracle.</span></span> <span data-ttu-id="0fab2-155">W związku z tym SqlDataSource bez obaw nie służy wyłącznie do uzyskiwania dostępu do danych w bazie danych programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="0fab2-155">Therefore, the SqlDataSource is certainly not only used for accessing data in a SQL Server database.</span></span>

<span data-ttu-id="0fab2-156">Aby skorzystać z kontrolką SqlDataSource, możesz po prostu podać wartość dla właściwości ConnectionString i określić za pomocą polecenia SQL lub procedury składowanej.</span><span class="sxs-lookup"><span data-stu-id="0fab2-156">In order to use the SqlDataSource, you simply provide a value for the ConnectionString property and specify a SQL command or stored procedure.</span></span> <span data-ttu-id="0fab2-157">Kontrolki SqlDataSource zajmuje się praca z podstawową architekturę ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="0fab2-157">The SqlDataSource control takes care of working with the underlying ADO.NET architecture.</span></span> <span data-ttu-id="0fab2-158">Jego otwarcie połączenia, wysyła zapytanie do źródła danych lub wykonuje procedurę przechowywaną, zwraca dane, a następnie zamyka połączenie dla Ciebie.</span><span class="sxs-lookup"><span data-stu-id="0fab2-158">It opens the connection, queries the data source or executes the stored procedure, returns the data, and then closes the connection for you.</span></span>

> [!NOTE]
> <span data-ttu-id="0fab2-159">Ponieważ klasa format źródła danych automatycznie zamyka połączenie dla Ciebie, jego powinno zmniejszyć liczbę wywołań klienta generowany przez wyciek połączenia z bazą danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-159">Because the DataSourceControl class automatically closes the connection for you, it should reduce the number of customer calls generated by leaking database connections.</span></span>


<span data-ttu-id="0fab2-160">Poniższy fragment kodu wiąże formant DropDownList z kontrolką SqlDataSource przy użyciu parametrów połączenia, który jest przechowywany w pliku konfiguracji, jak pokazano powyżej.</span><span class="sxs-lookup"><span data-stu-id="0fab2-160">The code snippet below binds a DropDownList control to a SqlDataSource control using the connection string that is stored in the configuration file as shown above.</span></span>

[!code-aspx[Main](data-source-controls/samples/sample3.aspx)]

<span data-ttu-id="0fab2-161">Jak pokazano powyżej, właściwości DataSourceMode z kontrolką SqlDataSource Określa tryb dla źródła danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-161">As illustrated above, the DataSourceMode property of the SqlDataSource specifies the mode for the data source.</span></span> <span data-ttu-id="0fab2-162">W powyższym przykładzie ustawiono właściwość DataSourceMode DataReader.</span><span class="sxs-lookup"><span data-stu-id="0fab2-162">In the example above, the DataSourceMode is set to DataReader.</span></span> <span data-ttu-id="0fab2-163">W takim przypadku SqlDataSource zwróci obiekt IDataReader przy użyciu kursora tylko do przodu i tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="0fab2-163">In that case, the SqlDataSource will return an IDataReader object using a forward-only and read-only cursor.</span></span> <span data-ttu-id="0fab2-164">Określony typ obiektu, który jest zwracany jest kontrolowana przez dostawcę, który jest używany.</span><span class="sxs-lookup"><span data-stu-id="0fab2-164">The specified type of object that is returned is controlled by the provider that is used.</span></span> <span data-ttu-id="0fab2-165">W tym przypadku używam dostawcy System.Data.SqlClient określonych w &lt;connectionStrings&gt; sekcja pliku web.config.</span><span class="sxs-lookup"><span data-stu-id="0fab2-165">In this case, I'm using the System.Data.SqlClient provider as specified in the &lt;connectionStrings&gt; section of the web.config file.</span></span> <span data-ttu-id="0fab2-166">W związku z tym obiekt, który jest zwracany będzie typu SqlDataReader.</span><span class="sxs-lookup"><span data-stu-id="0fab2-166">Therefore, the object that is returned will be of type SqlDataReader.</span></span> <span data-ttu-id="0fab2-167">Określając wartość elementu DataSourceMode zestawu danych, dane mogą być przechowywane w zestawie danych na serwerze.</span><span class="sxs-lookup"><span data-stu-id="0fab2-167">By specifying a DataSourceMode value of DataSet, the data can be stored in a DataSet on the server.</span></span> <span data-ttu-id="0fab2-168">Ten tryb umożliwia dodawanie funkcji, takich jak sortowanie, stronicowanie itp. Jeśli mam była powiązanie danych SqlDataSource do kontrolki GridView I czy wybrano tryb zestawu danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-168">This mode allows you to add features such as sorting, paging, etc. If I had been data-binding the SqlDataSource to a GridView control, I would have chosen the DataSet mode.</span></span> <span data-ttu-id="0fab2-169">W przypadku kontrolki DropDownList, tryb DataReader jest odpowiednim wyborem.</span><span class="sxs-lookup"><span data-stu-id="0fab2-169">However, in the case of a DropDownList, the DataReader mode is the correct choice.</span></span>

> [!NOTE]
> <span data-ttu-id="0fab2-170">Gdy buforowanie SqlDataSource lub AccessDataSource, właściwości DataSourceMode musi mieć wartość do zestawu danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-170">When caching a SqlDataSource or an AccessDataSource, the DataSourceMode property must be set to DataSet.</span></span> <span data-ttu-id="0fab2-171">Wyjątek wystąpi po włączeniu buforowania elementu DataSourceMode DataReader.</span><span class="sxs-lookup"><span data-stu-id="0fab2-171">An exception will occur if you enable caching with a DataSourceMode of DataReader.</span></span>


## <a name="sqldatasource-properties"></a><span data-ttu-id="0fab2-172">Właściwości SqlDataSource</span><span class="sxs-lookup"><span data-stu-id="0fab2-172">SqlDataSource Properties</span></span>

<span data-ttu-id="0fab2-173">Poniżej przedstawiono niektóre właściwości kontrolki SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="0fab2-173">The following are some of the properties of the SqlDataSource control.</span></span>

### <a name="cancelselectonnullparameter"></a><span data-ttu-id="0fab2-174">CancelSelectOnNullParameter</span><span class="sxs-lookup"><span data-stu-id="0fab2-174">CancelSelectOnNullParameter</span></span>

<span data-ttu-id="0fab2-175">Wartość logiczna określająca, czy polecenie select została anulowana, jeśli jeden z parametrów ma wartość null.</span><span class="sxs-lookup"><span data-stu-id="0fab2-175">A Boolean value that specifies whether a select command is canceled if one of the parameters is null.</span></span> <span data-ttu-id="0fab2-176">Wartość true domyślnie.</span><span class="sxs-lookup"><span data-stu-id="0fab2-176">True by default.</span></span>

### <a name="conflictdetection"></a><span data-ttu-id="0fab2-177">ConflictDetection</span><span class="sxs-lookup"><span data-stu-id="0fab2-177">ConflictDetection</span></span>

<span data-ttu-id="0fab2-178">W sytuacji, gdy wielu użytkowników może być aktualizowanie źródła danych w tym samym czasie właściwość ConflictDetection określa zachowanie kontrolki SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="0fab2-178">In a situation where multiple users may be updating a data source at the same time, the ConflictDetection property determines the behavior of the SqlDataSource control.</span></span> <span data-ttu-id="0fab2-179">Ta właściwość zwraca jedną z wartości wyliczenia ConflictOptions.</span><span class="sxs-lookup"><span data-stu-id="0fab2-179">This property evaluates to one of the values of the ConflictOptions enumeration.</span></span> <span data-ttu-id="0fab2-180">Te wartości są **CompareAllValues** i **OverwriteChanges**.</span><span class="sxs-lookup"><span data-stu-id="0fab2-180">Those values are **CompareAllValues** and **OverwriteChanges**.</span></span> <span data-ttu-id="0fab2-181">Jeśli ustawienie OverwriteChanges i nazwisko ostatniej osoby, które można zapisać danych do źródła danych spowoduje zastąpienie wszystkich zmian poprzednim.</span><span class="sxs-lookup"><span data-stu-id="0fab2-181">If set to OverwriteChanges, the last person to write data to the data source overwrites any previous changes.</span></span> <span data-ttu-id="0fab2-182">Jednak jeśli ustawiono właściwość ConflictDetection CompareAllValues, parametry są tworzone dla kolumny zwracane przez polecenia SelectCommand i parametry są również tworzone na potrzeby przechowywania oryginalnych wartości w każdym z tych kolumn, dzięki czemu SqlDataSource do Ustal, czy wartości zmieniły się od czasu polecenia SelectCommand został wykonany.</span><span class="sxs-lookup"><span data-stu-id="0fab2-182">However, if the ConflictDetection property is set to CompareAllValues, parameters get created for the columns returned by the SelectCommand and parameters are also created to hold the original values in each of those columns allowing the SqlDataSource to determine whether or not the values have changed since the SelectCommand was executed.</span></span>

### <a name="deletecommand"></a><span data-ttu-id="0fab2-183">DeleteCommand</span><span class="sxs-lookup"><span data-stu-id="0fab2-183">DeleteCommand</span></span>

<span data-ttu-id="0fab2-184">Ustawia lub pobiera parametry SQL używane podczas usuwania wierszy z bazy danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-184">Sets or gets the SQL string used when deleting rows from the database.</span></span> <span data-ttu-id="0fab2-185">Może to być zapytania SQL lub nazwa procedury składowanej.</span><span class="sxs-lookup"><span data-stu-id="0fab2-185">This can either be a SQL query or a stored procedure name.</span></span>

### <a name="deletecommandtype"></a><span data-ttu-id="0fab2-186">DeleteCommandType</span><span class="sxs-lookup"><span data-stu-id="0fab2-186">DeleteCommandType</span></span>

<span data-ttu-id="0fab2-187">Ustawia lub pobiera typ polecenia Usuń to zapytanie SQL (tekst) lub procedury składowanej (procedura składowana).</span><span class="sxs-lookup"><span data-stu-id="0fab2-187">Sets or gets the type of delete command, either a SQL query (Text) or a stored procedure (StoredProcedure).</span></span>

### <a name="deleteparameters"></a><span data-ttu-id="0fab2-188">DeleteParameters</span><span class="sxs-lookup"><span data-stu-id="0fab2-188">DeleteParameters</span></span>

<span data-ttu-id="0fab2-189">Zwraca parametry, które są używane przez element DeleteCommand obiektu SqlDataSourceView skojarzonego z kontrolką SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="0fab2-189">Returns the parameters that are used by the DeleteCommand of the SqlDataSourceView object associated with the SqlDataSource control.</span></span>

### <a name="oldvaluesparameterformatstring"></a><span data-ttu-id="0fab2-190">OldValuesParameterFormatString</span><span class="sxs-lookup"><span data-stu-id="0fab2-190">OldValuesParameterFormatString</span></span>

<span data-ttu-id="0fab2-191">Ta właściwość jest używana do określania formatu oryginalnej wartości parametrów w przypadkach, w których właściwość ConflictDetection ustawiono CompareAllValues.</span><span class="sxs-lookup"><span data-stu-id="0fab2-191">This property is used to specify the format of the original value parameters in cases where the ConflictDetection property is set to CompareAllValues.</span></span> <span data-ttu-id="0fab2-192">Wartość domyślna to {0} co oznacza, że oryginalne wartości parametrów będzie mieć taką samą nazwę jak oryginalny parametru.</span><span class="sxs-lookup"><span data-stu-id="0fab2-192">The default is {0} which means that original value parameters will take the same name as the original parameter.</span></span> <span data-ttu-id="0fab2-193">Oznacza to, jeśli nazwa pola EmployeeID, oryginalnym parametru wartości będzie @EmployeeID.</span><span class="sxs-lookup"><span data-stu-id="0fab2-193">In other words, if the field name is EmployeeID, the original value parameter would be @EmployeeID.</span></span>

### <a name="selectcommand"></a><span data-ttu-id="0fab2-194">SelectCommand</span><span class="sxs-lookup"><span data-stu-id="0fab2-194">SelectCommand</span></span>

<span data-ttu-id="0fab2-195">Ustawia lub pobiera parametry SQL, który służy do pobierania danych z bazy danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-195">Sets or gets the SQL string that is used to retrieve data from the database.</span></span> <span data-ttu-id="0fab2-196">Może to być zapytania SQL lub nazwa procedury składowanej.</span><span class="sxs-lookup"><span data-stu-id="0fab2-196">This can either be a SQL query or a stored procedure name.</span></span>

### <a name="selectcommandtype"></a><span data-ttu-id="0fab2-197">SelectCommandType</span><span class="sxs-lookup"><span data-stu-id="0fab2-197">SelectCommandType</span></span>

<span data-ttu-id="0fab2-198">Ustawia lub pobiera typ polecenia select, to zapytanie SQL (tekst) lub procedury składowanej (procedura składowana).</span><span class="sxs-lookup"><span data-stu-id="0fab2-198">Sets or gets the type of select command, either a SQL query (Text) or a stored procedure (StoredProcedure).</span></span>

### <a name="selectparameters"></a><span data-ttu-id="0fab2-199">SelectParameters</span><span class="sxs-lookup"><span data-stu-id="0fab2-199">SelectParameters</span></span>

<span data-ttu-id="0fab2-200">Zwraca parametry, które są używane przez SelectCommand obiektu SqlDataSourceView skojarzonego z kontrolką SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="0fab2-200">Returns the parameters that are used by the SelectCommand of the SqlDataSourceView object associated with the SqlDataSource control.</span></span>

### <a name="sortparametername"></a><span data-ttu-id="0fab2-201">SortParameterName</span><span class="sxs-lookup"><span data-stu-id="0fab2-201">SortParameterName</span></span>

<span data-ttu-id="0fab2-202">Pobiera lub ustawia nazwę parametru procedury składowanej, który jest używany, gdy sortowanie danych pobrana przez kontrolę źródła danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-202">Gets or sets the name of a stored procedure parameter that is used when sorting data retrieved by the data source control.</span></span> <span data-ttu-id="0fab2-203">Prawidłowe tylko wtedy, gdy ustawiono SelectCommandType StoredProcedure.</span><span class="sxs-lookup"><span data-stu-id="0fab2-203">Valid only when SelectCommandType is set to StoredProcedure.</span></span>

### <a name="sqlcachedependency"></a><span data-ttu-id="0fab2-204">SqlCacheDependency</span><span class="sxs-lookup"><span data-stu-id="0fab2-204">SqlCacheDependency</span></span>

<span data-ttu-id="0fab2-205">Rozdzielana średnikami lista ciąg określający baz danych i tabelami używanymi w zależności pamięci podręcznej programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="0fab2-205">A semi-colon delimited string specifying the databases and tables used in a SQL Server cache dependency.</span></span> <span data-ttu-id="0fab2-206">(Zależności pamięci podręcznej SQL zostanie omówiony w nowszym module).</span><span class="sxs-lookup"><span data-stu-id="0fab2-206">(SQL cache dependencies will be discussed in a later module.)</span></span>

### <a name="updatecommand"></a><span data-ttu-id="0fab2-207">UpdateCommand</span><span class="sxs-lookup"><span data-stu-id="0fab2-207">UpdateCommand</span></span>

<span data-ttu-id="0fab2-208">Ustawia lub pobiera parametry SQL, która jest używana podczas aktualizowania danych w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-208">Sets or gets the SQL string that is used when updating data in the database.</span></span> <span data-ttu-id="0fab2-209">Może to być zapytania SQL lub nazwa procedury składowanej.</span><span class="sxs-lookup"><span data-stu-id="0fab2-209">This can either be a SQL query or a stored procedure name.</span></span>

### <a name="updatecommandtype"></a><span data-ttu-id="0fab2-210">UpdateCommandType</span><span class="sxs-lookup"><span data-stu-id="0fab2-210">UpdateCommandType</span></span>

<span data-ttu-id="0fab2-211">Ustawia lub pobiera typ polecenia update albo zapytanie SQL (tekst) lub procedury składowanej (procedura składowana).</span><span class="sxs-lookup"><span data-stu-id="0fab2-211">Sets or gets the type of update command, either a SQL query (Text) or a stored procedure (StoredProcedure).</span></span>

### <a name="updateparameters"></a><span data-ttu-id="0fab2-212">UpdateParameters</span><span class="sxs-lookup"><span data-stu-id="0fab2-212">UpdateParameters</span></span>

<span data-ttu-id="0fab2-213">Zwraca parametry, które są używane przez elementu UpdateCommand obiektu SqlDataSourceView skojarzonego z kontrolką SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="0fab2-213">Returns the parameters that are used by the UpdateCommand of the SqlDataSourceView object associated with the SqlDataSource control.</span></span>

## <a name="the-accessdatasource-control"></a><span data-ttu-id="0fab2-214">Kontrolka AccessDataSource</span><span class="sxs-lookup"><span data-stu-id="0fab2-214">The AccessDataSource Control</span></span>

<span data-ttu-id="0fab2-215">Formant AccessDataSource pochodzi od klasy SqlDataSource i służy do tworzenia powiązań danych do bazy danych Microsoft Access.</span><span class="sxs-lookup"><span data-stu-id="0fab2-215">The AccessDataSource control derives from the SqlDataSource class and is used to data-bind to a Microsoft Access database.</span></span> <span data-ttu-id="0fab2-216">Właściwość ConnectionString kontrolki AccessDataSource jest właściwością tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="0fab2-216">The ConnectionString property for the AccessDataSource control is a read-only property.</span></span> <span data-ttu-id="0fab2-217">Zamiast korzystać z właściwości ConnectionString, właściwość pliku danych jest używana wskaż bazę danych programu Access, jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="0fab2-217">Instead of using the ConnectionString property, the DataFile property is used to point to the Access Database as shown below.</span></span>

[!code-aspx[Main](data-source-controls/samples/sample4.aspx)]

<span data-ttu-id="0fab2-218">AccessDataSource będzie zawsze równa ProviderName z podstawowej SqlDataSource System.Data.OleDb i nawiązuje połączenie z bazą danych przy użyciu dostawcy Microsoft.Jet.OLEDB.4.0 OLE DB.</span><span class="sxs-lookup"><span data-stu-id="0fab2-218">The AccessDataSource will always set the ProviderName of the base SqlDataSource to System.Data.OleDb and connects to the database using the Microsoft.Jet.OLEDB.4.0 OLE DB provider.</span></span> <span data-ttu-id="0fab2-219">Nie można użyć formantu AccessDataSource połączyć się z chronionym hasłem bazy danych programu Access.</span><span class="sxs-lookup"><span data-stu-id="0fab2-219">You cannot use the AccessDataSource control to connect to a password-protected Access database.</span></span> <span data-ttu-id="0fab2-220">Jeśli masz połączenie z bazą danych chroniony hasłem, należy używać kontrolki SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="0fab2-220">If you have to connect to a password protected database, you should use the SqlDataSource control.</span></span>

> [!NOTE]
> <span data-ttu-id="0fab2-221">Dostęp do baz danych przechowywanych w ramach witryny sieci Web, należy umieścić w aplikacji\_katalog danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-221">Access databases stored within the Web site should be placed in the App\_Data directory.</span></span> <span data-ttu-id="0fab2-222">Program ASP.NET nie zezwala na pliki w tym katalogu do przeglądania.</span><span class="sxs-lookup"><span data-stu-id="0fab2-222">ASP.NET does not allow files in this directory to be browsed.</span></span> <span data-ttu-id="0fab2-223">Należy przyznać uprawnienia do odczytu i zapisu do aplikacji konto procesu\_katalog danych w przypadku korzystania z baz danych programu Access.</span><span class="sxs-lookup"><span data-stu-id="0fab2-223">You will need to grant the process account Read and Write permissions to the App\_Data directory when using Access databases.</span></span>


## <a name="the-xmldatasource-control"></a><span data-ttu-id="0fab2-224">Kontrolki elementu XmlDataSource</span><span class="sxs-lookup"><span data-stu-id="0fab2-224">The XmlDataSource Control</span></span>

<span data-ttu-id="0fab2-225">Elementu XmlDataSource jest używana do wiązania danych dane XML do formantów powiązanych z danymi.</span><span class="sxs-lookup"><span data-stu-id="0fab2-225">The XmlDataSource is used to data-bind XML data to data-bound controls.</span></span> <span data-ttu-id="0fab2-226">Możesz powiązać pliku XML przy użyciu właściwości pliku danych lub można powiązać ciągu XML przy użyciu właściwości danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-226">You can bind to an XML file using the DataFile property or you can bind to an XML string using the Data property.</span></span> <span data-ttu-id="0fab2-227">Elementu XmlDataSource udostępnia atrybuty XML jako pola może być powiązana.</span><span class="sxs-lookup"><span data-stu-id="0fab2-227">The XmlDataSource exposes XML attributes as bindable fields.</span></span> <span data-ttu-id="0fab2-228">W przypadkach, w których należy powiązać wartości, które nie są reprezentowane jako atrybuty należy używać transformacji XSL.</span><span class="sxs-lookup"><span data-stu-id="0fab2-228">In cases where you need to bind to values that are not represented as attributes, you will need to use an XSL transform.</span></span> <span data-ttu-id="0fab2-229">Można również użyć wyrażenia XPath do filtrowania danych XML.</span><span class="sxs-lookup"><span data-stu-id="0fab2-229">You can also use XPath expressions to filter XML data.</span></span>

<span data-ttu-id="0fab2-230">Należy wziąć pod uwagę następujący plik XML:</span><span class="sxs-lookup"><span data-stu-id="0fab2-230">Consider the following XML file:</span></span>

[!code-xml[Main](data-source-controls/samples/sample5.xml)]

<span data-ttu-id="0fab2-231">Należy zauważyć, że elementu XmlDataSource używa właściwość XPath *osób/osoby* w celu filtrowania tylko &lt;osoby&gt; węzłów.</span><span class="sxs-lookup"><span data-stu-id="0fab2-231">Notice that the XmlDataSource uses an XPath property of *People/Person* in order to filter on just the &lt;Person&gt; nodes.</span></span> <span data-ttu-id="0fab2-232">Metody DropDownList następnie tworzy powiązania danych przy użyciu właściwości DataTextField atrybutu nazwisko.</span><span class="sxs-lookup"><span data-stu-id="0fab2-232">The DropDownList then data-binds to the LastName attribute using the DataTextField property.</span></span>

<span data-ttu-id="0fab2-233">Podczas kontroli elementu XmlDataSource służy głównie do tworzenia powiązań danych z danymi XML tylko do odczytu, istnieje możliwość edytowania pliku danych XML.</span><span class="sxs-lookup"><span data-stu-id="0fab2-233">While the XmlDataSource control is primarily used to data-bind to read-only XML data, it is possible to edit the XML data file.</span></span> <span data-ttu-id="0fab2-234">Należy pamiętać, że w takich przypadkach automatyczne wstawianie, aktualizowanie i usuwanie informacji w pliku XML nie jest wykonywane automatycznie jak w przypadku innych formantów źródła danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-234">Note that in such cases, automatic insertion, updating, and deletion of information in the XML file does not happen automatically as it does with other data source controls.</span></span> <span data-ttu-id="0fab2-235">Zamiast tego należy napisać kod, aby ręcznie edytować dane przy użyciu następujących metod kontroli elementu XmlDataSource.</span><span class="sxs-lookup"><span data-stu-id="0fab2-235">Instead, you will have to write code to manually edit the data using the following methods of the XmlDataSource control.</span></span>

### <a name="getxmldocument"></a><span data-ttu-id="0fab2-236">GetXmlDocument</span><span class="sxs-lookup"><span data-stu-id="0fab2-236">GetXmlDocument</span></span>

<span data-ttu-id="0fab2-237">Pobiera obiekt XmlDocument zawierający kod XML, pobierane przez elementu XmlDataSource.</span><span class="sxs-lookup"><span data-stu-id="0fab2-237">Retrieves an XmlDocument object containing the XML code retrieved by the XmlDataSource.</span></span>

### <a name="save"></a><span data-ttu-id="0fab2-238">Zapisanie</span><span class="sxs-lookup"><span data-stu-id="0fab2-238">Save</span></span>

<span data-ttu-id="0fab2-239">Zapisuje dokument XML w pamięci źródła danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-239">Saves the in-memory XmlDocument back to the data source.</span></span>

<span data-ttu-id="0fab2-240">Należy koniecznie należy pamiętać, że metody Zapisz działa tylko po spełnieniu następujących warunków:</span><span class="sxs-lookup"><span data-stu-id="0fab2-240">It's important to realize that the Save method will only work when the following two conditions are met:</span></span>

1. <span data-ttu-id="0fab2-241">Elementu XmlDataSource używa właściwości pliku danych do powiązania w pliku XML, zamiast właściwości danych do powiązania z danymi XML w pamięci.</span><span class="sxs-lookup"><span data-stu-id="0fab2-241">The XmlDataSource is using the DataFile property to bind to an XML file instead of the Data property to bind to in-memory XML data.</span></span>
2. <span data-ttu-id="0fab2-242">Przekształcenie nie jest określony za pomocą właściwości transformacji lub TransformFile.</span><span class="sxs-lookup"><span data-stu-id="0fab2-242">No transformation is specified via the Transform or TransformFile property.</span></span>

<span data-ttu-id="0fab2-243">Należy zauważyć, że metody Zapisz może przynieść nieoczekiwane wyniki, gdy zostanie wywołana przez wielu użytkowników jednocześnie.</span><span class="sxs-lookup"><span data-stu-id="0fab2-243">Note also that the Save method can yield unexpected results when called by multiple users concurrently.</span></span>

## <a name="the-objectdatasource-control"></a><span data-ttu-id="0fab2-244">Kontrolka ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="0fab2-244">The ObjectDataSource Control</span></span>

<span data-ttu-id="0fab2-245">Kontrolki źródła danych, gdy Omówiliśmy już do tej pory, które są doskonałe możliwości aplikacji dwuwarstwowej, gdzie kontrola źródła danych komunikuje się bezpośrednio do magazynu danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-245">The data source controls that we have covered up to this point are excellent choices for two-tier applications where the data source control communicates directly to the data store.</span></span> <span data-ttu-id="0fab2-246">Jednak wiele rzeczywistych aplikacji są aplikacje wielowarstwowe gdzie kontrola źródła danych może być konieczne do komunikacji z obiektem biznesowym, który z kolei komunikuje się z warstwą danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-246">However, many real-world applications are multi-tier applications where a data source control might need to communicate to a business object which, in turn, communicates with the data layer.</span></span> <span data-ttu-id="0fab2-247">W takich sytuacjach kontrolki ObjectDataSource wypełnia dobrze rachunku.</span><span class="sxs-lookup"><span data-stu-id="0fab2-247">In these situations, the ObjectDataSource fills the bill nicely.</span></span> <span data-ttu-id="0fab2-248">Kontrolki ObjectDataSource działa w połączeniu z obiektem źródłowym.</span><span class="sxs-lookup"><span data-stu-id="0fab2-248">The ObjectDataSource works in conjunction with a source object.</span></span> <span data-ttu-id="0fab2-249">Kontrolka ObjectDataSource spowoduje utworzenie wystąpienia obiektu źródłowego, wywołania określonej metody i usuwania wystąpienia obiektu w zakresie pojedynczego żądania, jeśli obiekt ma metody wystąpienia, zamiast metody statyczne (Shared w języku Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="0fab2-249">The ObjectDataSource control will create an instance of the source object, call the specified method, and dispose of the object instance all within the scope of a single request, if your object has instance methods instead of static methods (Shared in Visual Basic).</span></span> <span data-ttu-id="0fab2-250">W związku z tym obiekt musi być bezstanowe.</span><span class="sxs-lookup"><span data-stu-id="0fab2-250">Therefore, your object must be stateless.</span></span> <span data-ttu-id="0fab2-251">Oznacza to obiektu, należy uzyskać i zwolnić wszystkie zasoby wymagane w zasięgu pojedynczego żądania.</span><span class="sxs-lookup"><span data-stu-id="0fab2-251">That is, your object should acquire and release all required resources within the span of a single request.</span></span> <span data-ttu-id="0fab2-252">Możesz kontrolować sposób tworzenia obiektu źródłowego dzięki obsłudze zdarzeń ObjectCreating formantu ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="0fab2-252">You can control how the source object is created by handling the ObjectCreating event of the ObjectDataSource control.</span></span> <span data-ttu-id="0fab2-253">Można utworzyć wystąpienia obiektu źródłowego i następnie ustaw właściwości ObjectInstance klasy ObjectDataSourceEventArgs do tego wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="0fab2-253">You can create an instance of the source object, and then set the ObjectInstance property of the ObjectDataSourceEventArgs class to that instance.</span></span> <span data-ttu-id="0fab2-254">Kontrolka ObjectDataSource użyje wystąpienia, który jest tworzony w zdarzeniu ObjectCreating zamiast tworzenia wystąpienia na jego własnej.</span><span class="sxs-lookup"><span data-stu-id="0fab2-254">The ObjectDataSource control will use the instance that is created in the ObjectCreating event instead of creating an instance on its own.</span></span>

<span data-ttu-id="0fab2-255">Jeśli obiektu źródła kontrolki ObjectDataSource udostępnia publiczne metody statyczne (Shared w języku Visual Basic), które można wywołać w celu pobrania i modyfikowania danych, kontrolka ObjectDataSource będzie bezpośrednio wywoływać tych metod.</span><span class="sxs-lookup"><span data-stu-id="0fab2-255">If the source object for an ObjectDataSource control exposes public static methods (Shared in Visual Basic) that can be called to retrieve and modify data, an ObjectDataSource control will call those methods directly.</span></span> <span data-ttu-id="0fab2-256">Jeśli kontrolka ObjectDataSource, należy utworzyć wystąpienie obiektu źródłowego, przed wywołaniem metody, obiekt musi zawierać konstruktor publiczny, który nie przyjmuje żadnych parametrów.</span><span class="sxs-lookup"><span data-stu-id="0fab2-256">If an ObjectDataSource control must create an instance of the source object in order to make method calls, the object must include a public constructor that takes no parameters.</span></span> <span data-ttu-id="0fab2-257">Kontrolka ObjectDataSource będzie wywoływać ten konstruktor, podczas tworzenia nowego wystąpienia obiektu źródłowego.</span><span class="sxs-lookup"><span data-stu-id="0fab2-257">The ObjectDataSource control will call this constructor when it creates a new instance of the source object.</span></span>

<span data-ttu-id="0fab2-258">Jeśli obiekt źródłowy nie zawiera on publicznego konstruktora bez parametrów, można utworzyć wystąpienia obiektu źródłowego, który będzie używany przez formantu ObjectDataSource w zdarzeniu ObjectCreating.</span><span class="sxs-lookup"><span data-stu-id="0fab2-258">If the source object does not contain a public constructor without parameters, you can create an instance of the source object that will be used by the ObjectDataSource control in the ObjectCreating event.</span></span>

## <a name="specifying-object-methods"></a><span data-ttu-id="0fab2-259">Określenie metod obiektu</span><span class="sxs-lookup"><span data-stu-id="0fab2-259">Specifying Object Methods</span></span>

<span data-ttu-id="0fab2-260">Obiektu źródła kontrolki ObjectDataSource może zawierać dowolną liczbę metod, które są używane do wybierz oraz wstawiania, aktualizowania lub usuwania danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-260">The source object for an ObjectDataSource control can contain any number of methods that are used to select, insert, update, or delete data.</span></span> <span data-ttu-id="0fab2-261">Te metody są wywoływane przez kontrolka ObjectDataSource, w oparciu o nazwę metody, określone za pomocą metody SelectMethod, operacji InsertMethod, operacji UpdateMethod albo DeleteMethod właściwości formantu ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="0fab2-261">These methods are called by the ObjectDataSource control based on the name of the method, as identified by using either the SelectMethod, InsertMethod, UpdateMethod, or DeleteMethod property of the ObjectDataSource control.</span></span> <span data-ttu-id="0fab2-262">Obiekt źródłowy można również dołączyć opcjonalny metody SelectCount, który jest identyfikowany przez kontrolka ObjectDataSource, za pomocą właściwości SelectCountMethod, która zwraca liczbę całkowita liczba obiektów w źródle danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-262">The source object can also include an optional SelectCount method, which is identified by the ObjectDataSource control using the SelectCountMethod property, that returns the count of the total number of objects at the data source.</span></span> <span data-ttu-id="0fab2-263">Kontrolka ObjectDataSource będzie wywoływać metoda SelectCount po wywołaniu metody Select można pobrać całkowitej liczbie rekordów w źródle danych do użycia podczas stronicowania.</span><span class="sxs-lookup"><span data-stu-id="0fab2-263">The ObjectDataSource control will call the SelectCount method after a Select method has been called to retrieve the total number of records at the data source for use when paging.</span></span>

## <a name="lab-using-data-source-controls"></a><span data-ttu-id="0fab2-264">Laboratorium przy użyciu kontrolki źródła danych</span><span class="sxs-lookup"><span data-stu-id="0fab2-264">Lab Using Data Source Controls</span></span>

## <a name="exercise-1---displaying-data-with-the-sqldatasource-control"></a><span data-ttu-id="0fab2-265">Ćwiczenie 1 — wyświetlanie danych przy użyciu kontrolki SqlDataSource</span><span class="sxs-lookup"><span data-stu-id="0fab2-265">Exercise 1 - Displaying Data with the SqlDataSource Control</span></span>

<span data-ttu-id="0fab2-266">Poniższym ćwiczeniu używa kontrolki SqlDataSource do łączenia z bazą danych Northwind.</span><span class="sxs-lookup"><span data-stu-id="0fab2-266">The following exercise uses the SqlDataSource control to connect to the Northwind database.</span></span> <span data-ttu-id="0fab2-267">Przyjęto założenie, że masz dostęp do bazy danych Northwind w wystąpieniu programu SQL Server 2000.</span><span class="sxs-lookup"><span data-stu-id="0fab2-267">It assumes that you have access to the Northwind database on a SQL Server 2000 instance.</span></span>

1. <span data-ttu-id="0fab2-268">Utwórz nową witrynę sieci Web platformy ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="0fab2-268">Create a new ASP.NET Web site.</span></span>
2. <span data-ttu-id="0fab2-269">Dodaj nowy plik web.config.</span><span class="sxs-lookup"><span data-stu-id="0fab2-269">Add a new web.config file.</span></span>

    1. <span data-ttu-id="0fab2-270">Kliknij prawym przyciskiem myszy projekt w Eksploratorze rozwiązań, a następnie kliknij przycisk Dodaj nowy element.</span><span class="sxs-lookup"><span data-stu-id="0fab2-270">Right-click on the project in Solution Explorer and click Add New Item.</span></span>
    2. <span data-ttu-id="0fab2-271">Wybierz plik konfiguracji sieci Web z listy szablonów, a następnie kliknij przycisk Dodaj.</span><span class="sxs-lookup"><span data-stu-id="0fab2-271">Choose Web Configuration File from the list of templates and click Add.</span></span>
3. <span data-ttu-id="0fab2-272">Edytuj &lt;connectionStrings&gt; sekcji w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="0fab2-272">Edit the &lt;connectionStrings&gt; section as follows:</span></span> 

    [!code-aspx[Main](data-source-controls/samples/sample6.aspx)]
4. <span data-ttu-id="0fab2-273">Przełącz do widoku kodu, a następnie dodaj atrybut ConnectionString i atrybutu SelectCommand &lt;asp: SqlDataSource&gt; kontrolować w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="0fab2-273">Switch to Code view and add a ConnectionString attribute and a SelectCommand attribute to the &lt;asp:SqlDataSource&gt; control as follows:</span></span> 

    [!code-aspx[Main](data-source-controls/samples/sample7.aspx)]
5. <span data-ttu-id="0fab2-274">W widoku Projekt dodać nowej kontrolki GridView.</span><span class="sxs-lookup"><span data-stu-id="0fab2-274">From Design view, add a new GridView control.</span></span>
6. <span data-ttu-id="0fab2-275">Z listy rozwijanej wybierz źródło danych w menu zadania GridView wybierz SqlDataSource1.</span><span class="sxs-lookup"><span data-stu-id="0fab2-275">From the Choose Data Source dropdown in the GridView Tasks menu, choose SqlDataSource1.</span></span>
7. <span data-ttu-id="0fab2-276">Kliknij prawym przyciskiem myszy na Default.aspx i wybierz polecenie Wyświetl w przeglądarce z menu.</span><span class="sxs-lookup"><span data-stu-id="0fab2-276">Right-click on Default.aspx and choose View in Browser from the menu.</span></span> <span data-ttu-id="0fab2-277">Kliknij przycisk Tak, po wyświetleniu monitu, aby zapisać.</span><span class="sxs-lookup"><span data-stu-id="0fab2-277">Click Yes when prompted to save.</span></span>
8. <span data-ttu-id="0fab2-278">Kontrolki GridView wyświetla dane z tabeli Produkty.</span><span class="sxs-lookup"><span data-stu-id="0fab2-278">The GridView displays the data from the Products table.</span></span>

## <a name="exercise-2---editing-data-with-the-sqldatasource-control"></a><span data-ttu-id="0fab2-279">Ćwiczenie 2 - edytowania danych przy użyciu kontrolki SqlDataSource</span><span class="sxs-lookup"><span data-stu-id="0fab2-279">Exercise 2 - Editing Data with the SqlDataSource Control</span></span>

<span data-ttu-id="0fab2-280">Poniższym ćwiczeniu pokazano, jak utworzyć powiązania danych kontrolki DropDownList sterować za pomocą składni deklaratywnej i służy do edytowania danych prezentowanych w kontrolki DropDownList.</span><span class="sxs-lookup"><span data-stu-id="0fab2-280">The following exercise demonstrates how to data bind a DropDownList control using the declarative syntax and allows you to edit the data presented in the DropDownList control.</span></span>

1. <span data-ttu-id="0fab2-281">W widoku Projekt należy usunąć kontrolki GridView z Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="0fab2-281">In Design view, delete the GridView control from Default.aspx.</span></span> 

    <span data-ttu-id="0fab2-282">**Ważne**: Pozostaw kontrolki SqlDataSource na stronie.</span><span class="sxs-lookup"><span data-stu-id="0fab2-282">**Important**: Leave the SqlDataSource control on the page.</span></span>
2. <span data-ttu-id="0fab2-283">Dodaj formant DropDownList do Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="0fab2-283">Add a DropDownList control to Default.aspx.</span></span>
3. <span data-ttu-id="0fab2-284">Przełącz do widoku źródła.</span><span class="sxs-lookup"><span data-stu-id="0fab2-284">Switch to Source view.</span></span>
4. <span data-ttu-id="0fab2-285">Dodaj atrybut DataSourceId, DataTextField i DataValueField, aby &lt;asp: DropDownList&gt; kontrolować w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="0fab2-285">Add a DataSourceId, DataTextField, and DataValueField attribute to the &lt;asp:DropDownList&gt; control as follows:</span></span> 

    [!code-aspx[Main](data-source-controls/samples/sample8.aspx)]
5. <span data-ttu-id="0fab2-286">Zapisz Default.aspx i wyświetlić je w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="0fab2-286">Save Default.aspx and view it in the browser.</span></span> <span data-ttu-id="0fab2-287">Należy pamiętać, że metody DropDownList zawiera wszystkie produkty z bazy danych Northwind.</span><span class="sxs-lookup"><span data-stu-id="0fab2-287">Note that the DropDownList contains all of the products from the Northwind database.</span></span>
6. <span data-ttu-id="0fab2-288">Zamknij przeglądarkę.</span><span class="sxs-lookup"><span data-stu-id="0fab2-288">Close the browser.</span></span>
7. <span data-ttu-id="0fab2-289">W widoku źródła Default.aspx należy dodać nowy formant pola tekstowego poniżej kontrolki DropDownList.</span><span class="sxs-lookup"><span data-stu-id="0fab2-289">In Source view of Default.aspx, add a new TextBox control below the DropDownList control.</span></span> <span data-ttu-id="0fab2-290">Zmień wartość właściwości identyfikator pola tekstowego do txtProductName.</span><span class="sxs-lookup"><span data-stu-id="0fab2-290">Change the ID property of the TextBox to txtProductName.</span></span>
8. <span data-ttu-id="0fab2-291">W obszarze formant pola tekstowego należy dodać nowy formant przycisku.</span><span class="sxs-lookup"><span data-stu-id="0fab2-291">Under the TextBox control, add a new Button control.</span></span> <span data-ttu-id="0fab2-292">Zmień właściwość ID przycisku btnUpdate i właściwość tekst **nazwę produktu aktualizacji**.</span><span class="sxs-lookup"><span data-stu-id="0fab2-292">Change the ID property of the Button to btnUpdate and the Text property to **Update Product Name**.</span></span>
9. <span data-ttu-id="0fab2-293">W widoku źródła Default.aspx Dodaj właściwość elementu UpdateCommand i dwa nowe UpdateParameters tagu SqlDataSource w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="0fab2-293">In Source view of Default.aspx, add an UpdateCommand property and two new UpdateParameters to the SqlDataSource tag as follows:</span></span> 

    [!code-aspx[Main](data-source-controls/samples/sample9.aspx)]

    > [!NOTE]
    > <span data-ttu-id="0fab2-294">Należy pamiętać, że istnieją dwa parametry (ProductName i identyfikator produktu), dodane w tym kodzie aktualizacji.</span><span class="sxs-lookup"><span data-stu-id="0fab2-294">Note that there are two update parameters (ProductName and ProductID) added in this code.</span></span> <span data-ttu-id="0fab2-295">Te parametry są zamapowane na właściwości Text txtProductName pole tekstowe i właściwości SelectedValue ddlProducts DropDownList.</span><span class="sxs-lookup"><span data-stu-id="0fab2-295">These parameters are mapped to the Text property of the txtProductName TextBox and the SelectedValue property of the ddlProducts DropDownList.</span></span>
10. <span data-ttu-id="0fab2-296">Przełącz do widoku projektu, a następnie kliknij dwukrotnie formant przycisku aby dodać program obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="0fab2-296">Switch to Design view and double-click on the Button control to add an event handler.</span></span>
11. <span data-ttu-id="0fab2-297">Dodaj następujący kod do btnUpdate\_kliknij kodu:</span><span class="sxs-lookup"><span data-stu-id="0fab2-297">Add the following code to the btnUpdate\_Click code:</span></span> 

    [!code-csharp[Main](data-source-controls/samples/sample10.cs)]
12. <span data-ttu-id="0fab2-298">Kliknij prawym przyciskiem myszy na Default.aspx i wybierz, aby wyświetlić go w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="0fab2-298">Right-click on Default.aspx and choose to view it in the browser.</span></span> <span data-ttu-id="0fab2-299">Po wyświetleniu monitu, aby zapisać wszystkie zmiany, kliknij przycisk Tak.</span><span class="sxs-lookup"><span data-stu-id="0fab2-299">Click Yes when prompted to save all changes.</span></span>
13. <span data-ttu-id="0fab2-300">Program ASP.NET 2.0 klasy częściowe umożliwiają kompilacji w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="0fab2-300">ASP.NET 2.0 partial classes allow for compilation at runtime.</span></span> <span data-ttu-id="0fab2-301">Nie jest niezbędne do tworzenia aplikacji, aby zobaczyć zmiany kodu zaczęły obowiązywać.</span><span class="sxs-lookup"><span data-stu-id="0fab2-301">It is not necessary to build an application in order to see code changes take effect.</span></span>
14. <span data-ttu-id="0fab2-302">Wybierz produkt z metody DropDownList.</span><span class="sxs-lookup"><span data-stu-id="0fab2-302">Select a product from the DropDownList.</span></span>
15. <span data-ttu-id="0fab2-303">Wprowadź nową nazwę dla wybranego produktu w polu tekstowym, a następnie kliknij przycisk Aktualizuj.</span><span class="sxs-lookup"><span data-stu-id="0fab2-303">Enter a new name for the selected product in the TextBox and then click the Update button.</span></span>
16. <span data-ttu-id="0fab2-304">Nazwa produktu jest aktualizowany w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="0fab2-304">The product name is updated in the database.</span></span>

## <a name="exercise-3-using-the-objectdatasource-control"></a><span data-ttu-id="0fab2-305">Ćwiczenie 3 za pomocą kontrolki ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="0fab2-305">Exercise 3 Using the ObjectDataSource Control</span></span>

<span data-ttu-id="0fab2-306">To ćwiczenie pokażemy, jak na potrzeby interakcji z bazą danych Northwind i obiektu źródłowego kontrolki ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="0fab2-306">This exercise will demonstrate how to use the ObjectDataSource control and a source object to interact with the Northwind database.</span></span>

1. <span data-ttu-id="0fab2-307">Kliknij prawym przyciskiem myszy projekt w Eksploratorze rozwiązań, a następnie kliknij pozycję Dodaj nowy element.</span><span class="sxs-lookup"><span data-stu-id="0fab2-307">Right-click on the project in Solution Explorer and click on Add New Item.</span></span>
2. <span data-ttu-id="0fab2-308">Wybierz formularz sieci Web z listy szablonów.</span><span class="sxs-lookup"><span data-stu-id="0fab2-308">Select Web Form in the templates list.</span></span> <span data-ttu-id="0fab2-309">Zmień nazwę na object.aspx, a następnie kliknij przycisk Dodaj.</span><span class="sxs-lookup"><span data-stu-id="0fab2-309">Change the name to object.aspx and click Add.</span></span>
3. <span data-ttu-id="0fab2-310">Kliknij prawym przyciskiem myszy projekt w Eksploratorze rozwiązań, a następnie kliknij pozycję Dodaj nowy element.</span><span class="sxs-lookup"><span data-stu-id="0fab2-310">Right-click on the project in Solution Explorer and click on Add New Item.</span></span>
4. <span data-ttu-id="0fab2-311">Wybierz klasę z listy szablonów.</span><span class="sxs-lookup"><span data-stu-id="0fab2-311">Select Class in the templates list.</span></span> <span data-ttu-id="0fab2-312">Zmień nazwę klasy na NorthwindData.cs, a następnie kliknij przycisk Dodaj.</span><span class="sxs-lookup"><span data-stu-id="0fab2-312">Change the name of the class to NorthwindData.cs and click Add.</span></span>
5. <span data-ttu-id="0fab2-313">Kliknij przycisk Tak, po wyświetleniu monitu, aby dodać klasę do aplikacji\_katalogu z kodem.</span><span class="sxs-lookup"><span data-stu-id="0fab2-313">Click Yes when prompted to add the class to the App\_Code folder.</span></span>
6. <span data-ttu-id="0fab2-314">Dodaj następujący kod do pliku NorthwindData.cs:</span><span class="sxs-lookup"><span data-stu-id="0fab2-314">Add the following code to the NorthwindData.cs file:</span></span> 

    [!code-csharp[Main](data-source-controls/samples/sample11.cs)]
7. <span data-ttu-id="0fab2-315">Dodaj następujący kod do widoku źródła object.aspx:</span><span class="sxs-lookup"><span data-stu-id="0fab2-315">Add the following code to the Source view of object.aspx:</span></span> 

    [!code-aspx[Main](data-source-controls/samples/sample12.aspx)]
8. <span data-ttu-id="0fab2-316">Zapisz wszystkie pliki i przeglądać object.aspx.</span><span class="sxs-lookup"><span data-stu-id="0fab2-316">Save all files and browse object.aspx.</span></span>
9. <span data-ttu-id="0fab2-317">Wyświetlanie szczegółów, edytowania pracowników, dodawanie pracowników i usuwając pracowników wchodzić w interakcje z interfejsem.</span><span class="sxs-lookup"><span data-stu-id="0fab2-317">Interact with the interface by viewing details, editing employees, adding employees, and deleting employees.</span></span>

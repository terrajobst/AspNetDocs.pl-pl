---
uid: web-forms/overview/moving-to-aspnet-20/membership
title: Członkostwo | Microsoft Docs
author: microsoft
description: Członkostwo ASP.NET kompiluje się na powodzeniu modelu uwierzytelniania formularzy z ASP.NET 1. x. Uwierzytelnianie za pomocą formularzy ASP.NET zapewnia wygodny sposób incorp...
ms.author: riande
ms.date: 02/20/2005
ms.assetid: f2339485-5d78-4c5e-8c0a-dc9b8a315345
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/membership
msc.type: authoredcontent
ms.openlocfilehash: da6fc205bd852a818d65425586cec38fdb08d310
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78642157"
---
# <a name="membership"></a><span data-ttu-id="3cdd2-104">Członkostwo</span><span class="sxs-lookup"><span data-stu-id="3cdd2-104">Membership</span></span>

<span data-ttu-id="3cdd2-105">przez [firmę Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="3cdd2-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="3cdd2-106">Członkostwo ASP.NET kompiluje się na powodzeniu modelu uwierzytelniania formularzy z ASP.NET 1. x.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-106">ASP.NET Membership builds on the success of the Forms authentication model from ASP.NET 1.x.</span></span> <span data-ttu-id="3cdd2-107">Uwierzytelnianie za pomocą formularzy ASP.NET to wygodny sposób dołączania formularza logowania do aplikacji ASP.NET i weryfikowania użytkowników w bazie danych lub innym magazynie danych.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-107">ASP.NET Forms authentication provides a convenient way to incorporate a login form into your ASP.NET application and validate users against a database or other data store.</span></span>

<span data-ttu-id="3cdd2-108">Członkostwo ASP.NET kompiluje się na powodzeniu modelu uwierzytelniania formularzy z ASP.NET 1. x.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-108">ASP.NET Membership builds on the success of the Forms authentication model from ASP.NET 1.x.</span></span> <span data-ttu-id="3cdd2-109">Uwierzytelnianie za pomocą formularzy ASP.NET to wygodny sposób dołączania formularza logowania do aplikacji ASP.NET i weryfikowania użytkowników w bazie danych lub innym magazynie danych.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-109">ASP.NET Forms authentication provides a convenient way to incorporate a login form into your ASP.NET application and validate users against a database or other data store.</span></span> <span data-ttu-id="3cdd2-110">Członkowie klasy FormsAuthentication mogą obsługiwać pliki cookie na potrzeby uwierzytelniania, sprawdzać poprawność logowania, wylogować użytkownika itp. Jednak zaimplementowanie uwierzytelniania formularzy w aplikacji ASP.NET 1. x może wymagać godziwej ilości kodu.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-110">The members of the FormsAuthentication class make it possible to handle cookies for authentication, check for a valid login, log a user out etc. However, implementing Forms authentication in an ASP.NET 1.x application can require a fair amount of code.</span></span>

<span data-ttu-id="3cdd2-111">Członkostwo w ASP.NET 2,0 jest głównym przenoszonem za pośrednictwem samego uwierzytelniania formularzy.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-111">Membership in ASP.NET 2.0 is a major advancement over using Forms authentication alone.</span></span> <span data-ttu-id="3cdd2-112">(Członkostwo jest najbardziej niezawodne w połączeniu z uwierzytelnianiem formularzy, ale używanie uwierzytelniania formularzy nie jest wymagane). Jak zobaczysz, możesz użyć członkostwa ASP.NET i kontrolek logowania w ASP.NET 2,0 do wdrożenia zaawansowanego systemu członkostwa bez konieczności pisania wielu kodów.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-112">(Membership is most robust when coupled with Forms authentication, but using Forms authentication is not a requirement.) As you'll soon see, you can use ASP.NET Membership and the login controls in ASP.NET 2.0 to implement a powerful membership system without writing much code at all.</span></span>

## <a name="implementing-membership-in-aspnet-20"></a><span data-ttu-id="3cdd2-113">Implementowanie członkostwa w ASP.NET 2,0</span><span class="sxs-lookup"><span data-stu-id="3cdd2-113">Implementing Membership in ASP.NET 2.0</span></span>

<span data-ttu-id="3cdd2-114">Członkostwo jest implementowane przez wykonanie czterech kroków.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-114">Membership is implemented by following four steps.</span></span> <span data-ttu-id="3cdd2-115">Należy pamiętać, że istnieje wiele podkroków, które są używane, a także opcjonalna konfiguracja, która może być również zaimplementowana.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-115">Keep in mind that there are many sub-steps that are involved as well as optional configuration that can be implemented as well.</span></span> <span data-ttu-id="3cdd2-116">Te kroki są przeznaczone do zilustrowania dużego obrazu konfigurowania członkostwa.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-116">These steps are meant to illustrate the big picture of configuring membership.</span></span>

1. <span data-ttu-id="3cdd2-117">Utwórz bazę danych członkostwa (Jeśli SQL Server jest używana jako magazyn członkostwa).</span><span class="sxs-lookup"><span data-stu-id="3cdd2-117">Create your membership database (if SQL Server is used as the membership store.)</span></span>
2. <span data-ttu-id="3cdd2-118">Określ opcje członkostwa w plikach konfiguracji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-118">Specify the membership options in your applications configuration files.</span></span> <span data-ttu-id="3cdd2-119">(Członkostwo jest domyślnie włączone).</span><span class="sxs-lookup"><span data-stu-id="3cdd2-119">(Membership is enabled by default.)</span></span>
3. <span data-ttu-id="3cdd2-120">Określ typ magazynu członkostwa, którego chcesz użyć.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-120">Determine the type of membership store you want to use.</span></span> <span data-ttu-id="3cdd2-121">Opcje to:</span><span class="sxs-lookup"><span data-stu-id="3cdd2-121">Options are:</span></span> 

    - <span data-ttu-id="3cdd2-122">Microsoft SQL Server (wersja 7,0 lub nowsza)</span><span class="sxs-lookup"><span data-stu-id="3cdd2-122">Microsoft SQL Server (version 7.0 or later)</span></span>
    - <span data-ttu-id="3cdd2-123">Magazyn Active Directory</span><span class="sxs-lookup"><span data-stu-id="3cdd2-123">Active Directory Store</span></span>
    - <span data-ttu-id="3cdd2-124">Niestandardowy dostawca członkostwa</span><span class="sxs-lookup"><span data-stu-id="3cdd2-124">Custom membership provider</span></span>
4. <span data-ttu-id="3cdd2-125">Skonfiguruj aplikację do uwierzytelniania formularzy ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-125">Configure the application for ASP.NET Forms authentication.</span></span> <span data-ttu-id="3cdd2-126">Po ponownym włączeniu członkostwo jest przeznaczone do skorzystania z uwierzytelniania formularzy, ale używanie uwierzytelniania formularzy nie jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-126">Once again, Membership is designed to take advantage of Forms authentication, but using Forms authentication is not a requirement.</span></span>
5. <span data-ttu-id="3cdd2-127">Zdefiniuj konta użytkowników dla członkostwa i skonfiguruj role w razie potrzeby.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-127">Define user accounts for membership and configure roles if desired.</span></span>

## <a name="creating-the-membership-database"></a><span data-ttu-id="3cdd2-128">Tworzenie bazy danych członkostwa</span><span class="sxs-lookup"><span data-stu-id="3cdd2-128">Creating the Membership Database</span></span>

<span data-ttu-id="3cdd2-129">W przypadku korzystania z SQL Server 7,0 lub nowszego jako magazynu członkostwa można skonfigurować bazę danych za pomocą narzędzia regsql języka ASPNET\_(dostępnego najłatwiej w wierszu polecenia programu Visual Studio .NET 2005).</span><span class="sxs-lookup"><span data-stu-id="3cdd2-129">If you're using SQL Server 7.0 or later as your membership store, you can use the aspnet\_regsql utility (available most easily from the Visual Studio .NET 2005 Command Prompt) to configure your database.</span></span> <span data-ttu-id="3cdd2-130">Narzędzia regsql ASPNET\_można użyć jako narzędzia wiersza polecenia lub Kreatora graficznego interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-130">The aspnet\_regsql utility can be used as a command prompt tool or via a GUI wizard.</span></span> <span data-ttu-id="3cdd2-131">Metoda kreatora jest najprostszym sposobem skonfigurowania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-131">The wizard method is the easiest way to configure your database.</span></span> <span data-ttu-id="3cdd2-132">Aby uzyskać dostęp do kreatora, wystarczy uruchomić następujące polecenie:</span><span class="sxs-lookup"><span data-stu-id="3cdd2-132">To access the wizard, simply run the following command:</span></span>

`aspnet_regsql W`

<span data-ttu-id="3cdd2-133">Po uruchomieniu tego polecenia zostanie wyświetlony Kreator instalacji SQL Server ASP.NET, jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-133">Once you run that command, you will be presented with the ASP.NET SQL Server Setup Wizard as shown below.</span></span>

![](membership/_static/image1.jpg)

<span data-ttu-id="3cdd2-134">**Rysunek 1**</span><span class="sxs-lookup"><span data-stu-id="3cdd2-134">**Figure 1**</span></span>

<span data-ttu-id="3cdd2-135">Kreator instalacji SQL Server ASP.NET tworzy witrynę sieci Web w wystąpieniu określonym w kreatorze.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-135">The ASP.NET SQL Server Setup Wizard creates the Web site in the instance you specify in the wizard.</span></span> <span data-ttu-id="3cdd2-136">Jednak ASP.NET będzie używać parametrów połączenia w pliku Machine. config do łączenia się z bazą danych.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-136">However, ASP.NET will use the connection string in the machine.config file to connect to your database.</span></span> <span data-ttu-id="3cdd2-137">Domyślnie te parametry połączenia wskazują na wystąpienie SQL Server 2005, więc jeśli używasz wystąpienia SQL Server 2000 lub SQL Server 7,0, musisz zmodyfikować parametry połączenia w pliku Machine. config.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-137">By default, this connection string will point to a SQL Server 2005 instance, so if you are using a SQL Server 2000 or SQL Server 7.0 instance, you will need to modify the connection string in the machine.config file.</span></span> <span data-ttu-id="3cdd2-138">Te parametry połączenia można znaleźć tutaj:</span><span class="sxs-lookup"><span data-stu-id="3cdd2-138">That connection string can be located here:</span></span>

[!code-xml[Main](membership/samples/sample1.xml)]

<span data-ttu-id="3cdd2-139">Niestety, jeśli nie zmodyfikujesz parametrów połączenia, ASP.NET nie będzie zawierać opisowego błędu.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-139">Unfortunately, if you don't modify the connection string, ASP.NET will not give you a descriptive error.</span></span> <span data-ttu-id="3cdd2-140">W dalszym ciągu będzie można tylko powiedzieć, że baza danych nie została utworzona.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-140">It will just continue to complain saying that you haven't created the database.</span></span> <span data-ttu-id="3cdd2-141">W powyższym przypadku zmodyfikowano parametry połączenia tak, aby wskazywały na moje lokalne wystąpienie SQL Server 2000.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-141">In the case above, I have modified the connection string to point to my local SQL Server 2000 instance.</span></span>

## <a name="specifying-configuration-and-adding-users-and-roles"></a><span data-ttu-id="3cdd2-142">Określanie konfiguracji i Dodawanie użytkowników i ról</span><span class="sxs-lookup"><span data-stu-id="3cdd2-142">Specifying Configuration and Adding Users and Roles</span></span>

<span data-ttu-id="3cdd2-143">Następnym krokiem w konfigurowaniu członkostwa jest dodanie niezbędnych informacji do pliku Web. config aplikacji.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-143">The next step in configuring Membership is to add the necessary information to the web.config file of the application.</span></span> <span data-ttu-id="3cdd2-144">W ASP.NET 1. x Modyfikowanie pliku Web. config było czasami trudne z powodu użycia lowerCamelCase i braku funkcji IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-144">In ASP.NET 1.x, modifying the web.config file was sometimes difficult because of the use of lowerCamelCase and the lack of Intellisense.</span></span> <span data-ttu-id="3cdd2-145">Program Visual Studio .NET 2005 ułatwia zadanie przy użyciu funkcji IntelliSense dla plików konfiguracyjnych, ale ASP.NET 2,0 prowadzi jeszcze jeden krok, dostarczając interfejs sieci Web do edytowania plików konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-145">Visual Studio .NET 2005 makes the task much easier with Intellisense for configuration files, but ASP.NET 2.0 goes one step further by providing a Web interface for editing configuration files.</span></span>

<span data-ttu-id="3cdd2-146">Interfejs sieci Web można uruchomić, klikając przycisk Konfiguracja ASP.NET na pasku narzędzi Eksplorator rozwiązań, jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-146">You can launch the Web interface by clicking the ASP.NET Configuration button on the Solution Explorer toolbar as shown below.</span></span> <span data-ttu-id="3cdd2-147">Możesz również uruchomić interfejs sieci Web za pośrednictwem wyskakujących okienek, które są wyświetlane po wstawieniu kontrolek logowania.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-147">You can also launch the Web interface via pop-ups that are displayed when Login controls are inserted.</span></span>

![](membership/_static/image2.jpg)

<span data-ttu-id="3cdd2-148">**Rysunek 2**</span><span class="sxs-lookup"><span data-stu-id="3cdd2-148">**Figure 2**</span></span>

<span data-ttu-id="3cdd2-149">Spowoduje to uruchomienie narzędzia administrowania witryną sieci Web ASP.NET poniżej.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-149">This launches the ASP.NET Web Site Administration Tool shown below.</span></span> <span data-ttu-id="3cdd2-150">Administrowanie witryną sieci Web ASP.NET jest interfejsem zawierającym cztery karty, który ułatwia zarządzanie ustawieniami aplikacji.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-150">The ASP.NET Web Site Administration is a four-tab interface that makes it easy to manage application settings.</span></span> <span data-ttu-id="3cdd2-151">Dostępne są następujące karty:</span><span class="sxs-lookup"><span data-stu-id="3cdd2-151">The following tabs are available:</span></span>

- <span data-ttu-id="3cdd2-152">**Mowa**</span><span class="sxs-lookup"><span data-stu-id="3cdd2-152">**Home**</span></span>
- <span data-ttu-id="3cdd2-153">**Zabezpieczenia** Konfigurowanie użytkowników, ról i dostępu.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-153">**Security** Configure users, roles, and access.</span></span>
- <span data-ttu-id="3cdd2-154">**Aplikacja** Skonfiguruj ustawienia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-154">**Application** Configure application settings.</span></span>
- <span data-ttu-id="3cdd2-155">**Dostawca** Skonfiguruj i przetestuj dostawcę członkostwa aplikacji.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-155">**Provider** Configure and test your applications membership provider.</span></span>

<span data-ttu-id="3cdd2-156">Narzędzie do administrowania witryną sieci Web pozwala łatwo tworzyć nowych użytkowników, tworzyć nowe role oraz zarządzać użytkownikami i rolami.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-156">The Web Site Administration Tool allows you to easily create new users, create new roles, and to manage users and roles.</span></span> <span data-ttu-id="3cdd2-157">Ta możliwość nie jest dostępna w interfejsie systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-157">This ability is not available in the Windows interface.</span></span> <span data-ttu-id="3cdd2-158">Interfejs systemu Windows umożliwia łatwe definiowanie ustawień autoryzacji oraz dodawanie, usuwanie i zarządzanie dostawcami, możliwości, które nie są dostępne w narzędziu do administrowania witryną sieci Web.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-158">The Windows interface allows you to easily define authorization settings and to add, delete, and manage providers, capabilities that are not in the Web Site Administration Tool.</span></span>

<span data-ttu-id="3cdd2-159">Aby uruchomić interfejs systemu Windows, Otwórz przystawkę Internet Information Services, kliknij prawym przyciskiem myszy aplikację, a następnie wybierz polecenie Właściwości.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-159">To launch the Windows interface, open the Internet Information Services snap-in, right-click on your application, and choose Properties.</span></span> <span data-ttu-id="3cdd2-160">Kliknij kartę ASP.NET, a następnie kliknij przycisk Edytuj konfigurację.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-160">Click the ASP.NET tab and then click the Edit Configuration button.</span></span> <span data-ttu-id="3cdd2-161">(Aby przycisk Edytuj konfigurację został włączony, aplikacja musi działać w ramach ASP.NET 2,0).</span><span class="sxs-lookup"><span data-stu-id="3cdd2-161">(The application must be running under ASP.NET 2.0 for the Edit Configuration button to be enabled.</span></span> <span data-ttu-id="3cdd2-162">Możesz również skonfigurować wersję ASP.NET w oknie dialogowym ASP.NET. Zostanie wyświetlone okno dialogowe Ustawienia konfiguracji ASP.NET, jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-162">You can configure the ASP.NET version in the ASP.NET dialog as well.) The ASP.NET Configuration Settings dialog is displayed as shown below.</span></span>

![](membership/_static/image3.jpg)

<span data-ttu-id="3cdd2-163">**Rysunek 3**</span><span class="sxs-lookup"><span data-stu-id="3cdd2-163">**Figure 3**</span></span>

<span data-ttu-id="3cdd2-164">Na karcie Ogólne są wyświetlane parametry połączeń i ustawienia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-164">On the General tab, connection strings and application settings are listed.</span></span> <span data-ttu-id="3cdd2-165">Wszystkie ustawienia w kursywie są zdefiniowane w pliku konfiguracji nadrzędnej (plik Machine. config lub Web. config na wyższym poziomie), a ustawienia, które nie są kursywą, pochodzą z pliku konfiguracyjnego aplikacji.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-165">Any settings in italics are defined in a parent configuration file (either the machine.config or a web.config at a higher level) and settings not in italics are from the applications configuration file.</span></span> <span data-ttu-id="3cdd2-166">Jeśli ustawienie zostanie dodane, usunięte lub edytowane na poziomie aplikacji, ASP.NET doda, usunie lub zmodyfikuje ustawienie na poziomach aplikacji Web. config, zamiast usuwać ustawienia z pliku konfiguracji, z którego jest dziedziczona.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-166">If a setting is added, removed, or edited at the application level, ASP.NET will add, remove, or modify the setting at the application levels web.config instead of removing the setting from the configuration file from which it is inherited.</span></span>

<span data-ttu-id="3cdd2-167">Poniżej pokazano kartę Uwierzytelnianie.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-167">The Authentication tab is shown below.</span></span> <span data-ttu-id="3cdd2-168">W tym miejscu zostaną skonfigurowane ustawienia członkostwa.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-168">This is where you will configure your membership settings.</span></span> <span data-ttu-id="3cdd2-169">Ustawienia uwierzytelniania formularzy, dostawcy członkostwa i dostawcy ról można skonfigurować w tym miejscu.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-169">Forms authentication settings, membership providers, and role providers can be configured here.</span></span>

![](membership/_static/image4.jpg)

<span data-ttu-id="3cdd2-170">**Rysunek 4**</span><span class="sxs-lookup"><span data-stu-id="3cdd2-170">**Figure 4**</span></span>

## <a name="implementing-membership-in-your-application"></a><span data-ttu-id="3cdd2-171">Implementowanie członkostwa w aplikacji</span><span class="sxs-lookup"><span data-stu-id="3cdd2-171">Implementing Membership in Your Application</span></span>

<span data-ttu-id="3cdd2-172">Najprostszym sposobem implementacji członkostwa w programie ASP.NET 2,0 w aplikacji jest użycie dostarczonych kontrolek logowania.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-172">The easiest way to implement ASP.NET 2.0 membership in your application is to use the provided Logon controls.</span></span> <span data-ttu-id="3cdd2-173">Ta metoda pozwala zaimplementować podstawowe informacje o członkostwie w programie ASP.NET 2,0 bez konieczności pisania kodu.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-173">This method allows you to implement the basics of ASP.NET 2.0 membership without writing any code at all.</span></span>

<span data-ttu-id="3cdd2-174">W programie ASP.NET 2,0 są dostępne następujące kontrolki logowania:</span><span class="sxs-lookup"><span data-stu-id="3cdd2-174">The following Logon controls are available in ASP.NET 2.0:</span></span>

## <a name="login-control"></a><span data-ttu-id="3cdd2-175">Kontrola logowania</span><span class="sxs-lookup"><span data-stu-id="3cdd2-175">Login Control</span></span>

<span data-ttu-id="3cdd2-176">Kontrolka logowania udostępnia interfejs, który ktoś może zalogować się do systemu członkostwa.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-176">The Login control provides an interface for someone to log into your membership system.</span></span> <span data-ttu-id="3cdd2-177">Udostępnia ona pole tekstowe username i Password oraz przycisk Zaloguj.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-177">It provides you with a username and password textbox and a login button.</span></span> <span data-ttu-id="3cdd2-178">Wiele innych popularnych funkcji, takich jak link do rejestracji dla osób, które nie zostały jeszcze wykonane, pole wyboru, które umożliwia użytkownikowi automatyczne zalogowanie się do kolejnych wizyt, link do przypomnienia o haśle itd. Wszystkie funkcje kontrolki logowania można dostosować za pomocą właściwości kontrolki.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-178">Many other common features such as a link to register for people who have not yet done so, a checkbox that allows the user to automatically login on subsequent visits, a link for a password reminder, etc. All features of the Login control are customizable via the properties of the control.</span></span>

<span data-ttu-id="3cdd2-179">W ASP.NET 1. x deweloperzy musieli napisać godziwą ilość kodu do przeprowadzenia wyszukiwania podczas korzystania z uwierzytelniania formularzy.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-179">In ASP.NET 1.x, developers had to write a fair amount of code to do a lookup when using Forms authentication.</span></span> <span data-ttu-id="3cdd2-180">Członkostwo w systemie ASP.NET 2,0 umożliwia Weryfikowanie użytkowników bez konieczności pisania kodu.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-180">With ASP.NET 2.0 membership, you can validate users without writing any code at all.</span></span> <span data-ttu-id="3cdd2-181">ASP.NET będzie automatycznie wykonywać wyszukiwanie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-181">ASP.NET will automatically do the look-up of the user for you.</span></span> <span data-ttu-id="3cdd2-182">(Jeśli używasz kontrolki logowania bez członkostwa w ASP.NET, możesz użyć metody **OnAuthenticate** do zweryfikowania użytkownika).</span><span class="sxs-lookup"><span data-stu-id="3cdd2-182">(If you are using the Login control without using ASP.NET membership, you can use the **OnAuthenticate** method to validate the user.)</span></span>

## <a name="loginview-control"></a><span data-ttu-id="3cdd2-183">Widoku logowania — formant</span><span class="sxs-lookup"><span data-stu-id="3cdd2-183">LoginView Control</span></span>

<span data-ttu-id="3cdd2-184">Formant widoku logowania jest formantem z szablonem, który domyślnie udostępnia dwa szablony; AnonymousTemplate i LoggedInTemplate.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-184">The LoginView control is a templated control that provides two templates by default; the AnonymousTemplate and the LoggedInTemplate.</span></span> <span data-ttu-id="3cdd2-185">Wyświetlany szablon jest określany na podstawie tego, czy użytkownik jest zalogowany w systemie członkostwa.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-185">The template that is displayed is determined by whether or not the user is logged into your membership system.</span></span> <span data-ttu-id="3cdd2-186">Ten formant jest zazwyczaj używany do wyświetlania kontrolki logowania, gdy użytkownik nie zalogował się jeszcze i stanu logowania kontrolki i/lub innych kontrolek logowania, gdy użytkownik zalogował się.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-186">This control is typically used to display a Login control when a user has not yet logged in and a LoginStatus control and/or other login controls when the user has logged in.</span></span> <span data-ttu-id="3cdd2-187">Jeśli używasz zarządzania rolami w aplikacji ASP.NET, kontrolka widoku logowania może wyświetlać określony szablon na podstawie roli użytkownika.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-187">If you are using role management in your ASP.NET application, the LoginView control can display a specific template based upon the users role.</span></span> <span data-ttu-id="3cdd2-188">(Więcej informacji na temat zarządzania rolami ASP.NET zostanie omówione później).</span><span class="sxs-lookup"><span data-stu-id="3cdd2-188">(More on ASP.NET role management will be covered later.)</span></span>

## <a name="passwordrecovery-control"></a><span data-ttu-id="3cdd2-189">PasswordRecovery — formant</span><span class="sxs-lookup"><span data-stu-id="3cdd2-189">PasswordRecovery Control</span></span>

<span data-ttu-id="3cdd2-190">Kontrolka PasswordRecovery umożliwia użytkownikom otrzymywanie wiadomości e-mail przy użyciu bieżącego hasła lub Resetowanie hasła.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-190">The PasswordRecovery control allows users to receive an email with his or her current password or reset his or her password.</span></span> <span data-ttu-id="3cdd2-191">Wyczyść tekst i zaszyfrowane hasła mogą być odzyskiwane i wysyłane pocztą e-mail do użytkowników.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-191">Clear text and encrypted passwords can be recovered and emailed to users.</span></span> <span data-ttu-id="3cdd2-192">Jeśli hasło jest skrótem, nie można go odzyskać.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-192">If the password is hashed, it cannot be recovered.</span></span> <span data-ttu-id="3cdd2-193">Zamiast tego użytkownik będzie musiał wykonać Resetowanie hasła.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-193">Instead the user will be required to perform a password reset.</span></span>

## <a name="loginstatus-control"></a><span data-ttu-id="3cdd2-194">Stanu logowania — formant</span><span class="sxs-lookup"><span data-stu-id="3cdd2-194">LoginStatus Control</span></span>

<span data-ttu-id="3cdd2-195">Formant stanu logowania służy do wyświetlania wskaźnika logowania dla użytkowników, którzy nie są zalogowani, oraz wskaźnika wylogowania do użytkowników, którzy są obecnie zalogowani.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-195">The LoginStatus control is used to display a login indicator to users who are not logged in and a logout indicator to users who are currently logged in.</span></span> <span data-ttu-id="3cdd2-196">Właściwość Request. isauthenticates służy do określania, który wskaźnik ma być wyświetlany.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-196">The Request.IsAuthenticated property is used to determine which indicator to display.</span></span> <span data-ttu-id="3cdd2-197">Wskaźnik wyświetlany przez kontrolkę stanu logowania może być tekstem (implementowanym za pomocą właściwości **LoginText** i **LogoutText** ) lub obrazów (implementowanych za pośrednictwem właściwości **LoginImageUrl** i **LogoutImageUrl** ).</span><span class="sxs-lookup"><span data-stu-id="3cdd2-197">The indicator displayed by the LoginStatus control can be text (implemented via the **LoginText** and **LogoutText** properties) or images (implemented via the **LoginImageUrl** and **LogoutImageUrl** properties.)</span></span>

<span data-ttu-id="3cdd2-198">Gdy użytkownik loguje się za pośrednictwem formantu stanu logowania, zostaje przekierowany do adresu URL określonego przez właściwość **LogoutPageUrl** .</span><span class="sxs-lookup"><span data-stu-id="3cdd2-198">When a user logs out via the LoginStatus control, he or she is redirected to the URL specified by the **LogoutPageUrl** property.</span></span> <span data-ttu-id="3cdd2-199">Jeśli ta właściwość nie jest ustawiona, bieżąca strona zostanie odświeżona.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-199">If that property is not set, the current page is refreshed.</span></span> <span data-ttu-id="3cdd2-200">Ponieważ lokacja jest prawdopodobnie chroniona przez uwierzytelnianie formularzy, odświeżenie bieżącej strony przekieruje użytkownika na stronę logowania do witryny.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-200">Since the site is likely protected by Forms authentication, the refresh of the current page will redirect the user to the login page for the site.</span></span>

## <a name="loginname-control"></a><span data-ttu-id="3cdd2-201">LoginName — formant</span><span class="sxs-lookup"><span data-stu-id="3cdd2-201">LoginName Control</span></span>

<span data-ttu-id="3cdd2-202">Kontrolka LoginName wyświetla nazwę użytkownika, który jest aktualnie zalogowany do witryny.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-202">The LoginName control displays the username of the user currently logged into the site.</span></span>

## <a name="createuserwizard-control"></a><span data-ttu-id="3cdd2-203">Formancie CreateUserWizard — formant</span><span class="sxs-lookup"><span data-stu-id="3cdd2-203">CreateUserWizard Control</span></span>

<span data-ttu-id="3cdd2-204">Kontrolka formancie CreateUserWizard zapewnia użytkownikom wygodny sposób rejestracji w systemie członkostwa.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-204">The CreateUserWizard control provides users with a convenient way to register for your membership system.</span></span> <span data-ttu-id="3cdd2-205">Możesz dodać kroki (zaimplementowane jako kolekcja elementów WizardStep) za pośrednictwem interfejsu pokazanego poniżej.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-205">You can add steps (implemented as a collection of WizardSteps) via the interface shown below.</span></span>

![](membership/_static/image5.jpg)

<span data-ttu-id="3cdd2-206">**Rysunek 5**</span><span class="sxs-lookup"><span data-stu-id="3cdd2-206">**Figure 5**</span></span>

<span data-ttu-id="3cdd2-207">Formancie CreateUserWizard to formant z szablonem, który pochodzi od klasy kreatora i zawiera następujące szablony:</span><span class="sxs-lookup"><span data-stu-id="3cdd2-207">The CreateUserWizard is a templated control that derives from the Wizard class and provides the following templates:</span></span>

- <span data-ttu-id="3cdd2-208">**HeaderTemplate** Ten szablon kontroluje wygląd nagłówka kreatora.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-208">**HeaderTemplate** This template controls the appearance of the header of the wizard.</span></span>
- <span data-ttu-id="3cdd2-209">**Element SideBarTemplate** Ten szablon steruje wyglądem paska bocznego kreatora.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-209">**SidebarTemplate** This template controls the appearance of the sidebar of the wizard.</span></span>
- <span data-ttu-id="3cdd2-210">**StartNavigationTemplate** Ten szablon steruje wyglądem okienka nawigacji w kroku Rozpocznij.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-210">**StartNavigationTemplate** This template controls the appearance of the navigation are of the wizard at the start step.</span></span>
- <span data-ttu-id="3cdd2-211">**StepNavigationTemplate** Ten szablon steruje wyglądem obszaru nawigacji, gdy nie znajduje się w kroku początkowym lub końcowym.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-211">**StepNavigationTemplate** This template controls the appearance of the navigation area when not in the start or finish step.</span></span>
- <span data-ttu-id="3cdd2-212">**FinishNavigationTemplate** Ten szablon steruje wyglądem obszaru nawigacji w kroku zakończenia.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-212">**FinishNavigationTemplate** This template controls the appearance of the navigation area when on the finish step.</span></span>

<span data-ttu-id="3cdd2-213">Ponadto dla każdego kroku, który można dodać do kreatora, ASP.NET utworzy szablon niestandardowy zawierający zarówno ContentTemplate, jak i CustomNavigationTemplate dla tego kroku.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-213">Additionally, for each step that you add to the Wizard, ASP.NET will create a custom template that contains both a ContentTemplate and a CustomNavigationTemplate for that step.</span></span> <span data-ttu-id="3cdd2-214">Aby uzyskać szczegółowe informacje na temat dostosowywania formancie CreateUserWizard, zobacz dokumentację dotyczącą VS.NET 2005:</span><span class="sxs-lookup"><span data-stu-id="3cdd2-214">For full details on customizing the CreateUserWizard, see the VS.NET 2005 documentation:</span></span>

## <a name="changepassword-control"></a><span data-ttu-id="3cdd2-215">Kontrolka ChangePassword</span><span class="sxs-lookup"><span data-stu-id="3cdd2-215">ChangePassword Control</span></span>

<span data-ttu-id="3cdd2-216">Kontrolka ChangePassword umożliwia użytkownikom zmianę hasła.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-216">The ChangePassword control allows users to change his or her password.</span></span> <span data-ttu-id="3cdd2-217">Jeśli właściwość DisplayUserName ma wartość true (domyślnie ma wartość false), użytkownik może zmienić swoje hasło, gdy nie są zalogowani.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-217">If the DisplayUserName property is true (it is false by default), the user can change his or her password when they are not logged in.</span></span> <span data-ttu-id="3cdd2-218">Jeśli użytkownik *jest* już zalogowany i Właściwość DisplayUserName ma wartość true, użytkownik będzie mógł zmienić hasło innego użytkownika, który nie jest zalogowany, podając identyfikator użytkownika tego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-218">If the user *is* already logged in and the DisplayUserName property is true, the user will be able to change the password of another user that is not logged in providing they know the user ID of that user.</span></span>

<span data-ttu-id="3cdd2-219">Należy pamiętać, że jeśli chcesz, aby użytkownicy mogli zmieniać hasła bez konieczności logowania, musisz upewnić się, że strona, na której jest wyświetlany formant ChangePassword, zezwala na dostęp anonimowy.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-219">Keep in mind that if you want users to be able to change passwords without having to log in, you will need to ensure that the page on which the ChangePassword control is displayed allows anonymous access.</span></span> <span data-ttu-id="3cdd2-220">Aby zmienić hasło, użytkownicy będą musieli podać stare hasło.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-220">Obviously, users will have to provide their old password in order to change their password.</span></span>

## <a name="role-management"></a><span data-ttu-id="3cdd2-221">Zarządzanie rolami</span><span class="sxs-lookup"><span data-stu-id="3cdd2-221">Role Management</span></span>

<span data-ttu-id="3cdd2-222">Zarządzanie rolami pozwala przypisywać użytkowników do określonej roli, a następnie ograniczyć dostęp do określonych plików lub folderów na podstawie tej roli.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-222">Role management allows you to assign users to a particular role and then restrict access to certain file or folders based on that role.</span></span> <span data-ttu-id="3cdd2-223">Zarządzanie rolami udostępnia również interfejs API, dzięki czemu można programowo określić rolę kogoś lub określić wszystkich użytkowników w określonej roli i odpowiednio odpowiedzieć.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-223">Role management also provides an API so that you can programmatically determine someones role or determine all users in a particular role and respond accordingly.</span></span>

<span data-ttu-id="3cdd2-224">Zarządzanie rolami nie jest wymagane w członkostwie ASP.NET ani nie jest wymagane, aby można było korzystać z zarządzania rolami.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-224">Role management is not a requirement in ASP.NET membership, nor is membership a requirement in order to use role management.</span></span> <span data-ttu-id="3cdd2-225">Jednak te dwa uzupełniają wszystkie inne dobrze i prawdopodobnie deweloperzy będą ich używać wspólnie ze sobą.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-225">However, the two supplement each other nicely and it is likely that developers will use them in conjunction with each other.</span></span>

<span data-ttu-id="3cdd2-226">Aby włączyć zarządzanie rolami w aplikacji, wprowadź następujące zmiany w pliku Web. config:</span><span class="sxs-lookup"><span data-stu-id="3cdd2-226">To enable role management in your application, make the following change in your web.config file:</span></span>

[!code-xml[Main](membership/samples/sample2.xml)]

<span data-ttu-id="3cdd2-227">Gdy atrybut **CacheRolesInCookie** ma wartość true, ASP.NET buforuje członkostwo roli użytkowników w pliku cookie na kliencie.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-227">When the **cacheRolesInCookie** attribute is set to true, ASP.NET caches a users role membership in a cookie on the client.</span></span> <span data-ttu-id="3cdd2-228">Dzięki temu można wyszukiwać role bez wywoływania do RoleProvider.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-228">This allows role lookups to occur without calls into the RoleProvider.</span></span> <span data-ttu-id="3cdd2-229">W przypadku korzystania z tego atrybutu zachęca się deweloperów do zapewnienia, że atrybut **CookieProtection** jest ustawiony na wartość ALL.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-229">When using this attribute, developers are encouraged to ensure that the **cookieProtection** attribute is set to All.</span></span> <span data-ttu-id="3cdd2-230">(Jest to ustawienie domyślne). Dzięki temu dane plików cookie są szyfrowane i pomagają upewnić się, że zawartość plików cookie nie została zmieniona.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-230">(This is the default setting.) This ensures that the cookie data are encrypted and helps to ensure that the cookies contents haven't been altered.</span></span> <span data-ttu-id="3cdd2-231">Role można dodawać przy użyciu narzędzia do administrowania witryną sieci Web.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-231">Roles can be added using the Web Site Administration Tool.</span></span> <span data-ttu-id="3cdd2-232">Pozwala to łatwo definiować role, konfigurować dostęp do części witryny na podstawie tych ról i przypisywać użytkowników do ról.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-232">It allows you to easily define roles, configure access to parts of the site based on those roles, and assign users to roles.</span></span>

![](membership/_static/image6.jpg)

<span data-ttu-id="3cdd2-233">**Rysunek 6.**</span><span class="sxs-lookup"><span data-stu-id="3cdd2-233">**Figure 6**</span></span>

<span data-ttu-id="3cdd2-234">Jak pokazano powyżej, nowe role można dodać, wprowadzając po prostu nazwę roli, a następnie klikając pozycję Dodaj rolę.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-234">As shown above, new roles can be added by simply entering the name of the role and then clicking Add Role.</span></span> <span data-ttu-id="3cdd2-235">Istniejące role można zarządzać lub usuwać, klikając odpowiednie łącze na liście istniejących ról.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-235">Existing roles can be managed or deleted by clicking the appropriate link in the list of existing roles.</span></span>

<span data-ttu-id="3cdd2-236">Podczas zarządzania rolą można dodawać i usuwać użytkowników, jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-236">When you manage a role, you can add or remove users as shown below.</span></span>

![](membership/_static/image7.jpg)

<span data-ttu-id="3cdd2-237">**Rysunek 7**</span><span class="sxs-lookup"><span data-stu-id="3cdd2-237">**Figure 7**</span></span>

<span data-ttu-id="3cdd2-238">Zaznaczając pole wyboru użytkownik jest w roli, można łatwo dodać użytkownika do określonej roli.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-238">By checking the User Is In Role checkbox, you can easily add a user to a specific role.</span></span> <span data-ttu-id="3cdd2-239">Program ASP.NET automatycznie zaktualizuje swoją bazę danych członkostwa przy użyciu odpowiednich wpisów.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-239">ASP.NET will automatically update your membership database with the appropriate entries.</span></span> <span data-ttu-id="3cdd2-240">Należy również skonfigurować reguły dostępu dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-240">You will also want to configure access rules for your application.</span></span> <span data-ttu-id="3cdd2-241">ASP.NET 1. x deweloperzy są zaznajomieni z tą metodą za pośrednictwem elementu&gt; autoryzacji &lt;w pliku Web. config, a ta opcja jest nadal dostępna w ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-241">ASP.NET 1.x developers are familiar with doing this via the &lt;authorization&gt; element in the web.config file, and that option is still available in ASP.NET 2.0.</span></span> <span data-ttu-id="3cdd2-242">Można jednak ułatwić zarządzanie regułami dostępu za pomocą narzędzia administrowania witryną sieci Web, jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-242">However, its easier to manage access rules using the Web Site Administration Tool as shown below.</span></span>

![](membership/_static/image8.jpg)

<span data-ttu-id="3cdd2-243">**Rysunek 8.**</span><span class="sxs-lookup"><span data-stu-id="3cdd2-243">**Figure 8**</span></span>

<span data-ttu-id="3cdd2-244">W takim przypadku folder administracyjny zostanie wyróżniony (trudno jest zobaczyć, ponieważ narzędzie podświetli je w kolorze szarym), a rola Administratorzy uzyska dostęp.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-244">In this case, the Administration folder is highlighted (its difficult to see because the tool highlights it in light gray) and the Administrators role has been granted access.</span></span> <span data-ttu-id="3cdd2-245">Wszyscy inni użytkownicy są odrzucani.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-245">All other users are denied.</span></span> <span data-ttu-id="3cdd2-246">Możesz kliknąć ikonę nagłówka, aby wybrać regułę, a następnie użyć przycisków Przenieś w górę i Przenieś w dół, aby rozmieścić reguły.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-246">You can click on the head icon to select a rule and then use the Move Up and Move Down buttons to arrange the rules.</span></span> <span data-ttu-id="3cdd2-247">Podobnie jak w przypadku elementu ASP.NET &lt;Authorization&gt;, reguły są przetwarzane w kolejności, w jakiej są wyświetlane.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-247">As with the ASP.NET &lt;authorization&gt; element, rules are processed in the order in which they appear.</span></span> <span data-ttu-id="3cdd2-248">Innymi słowy, jeśli porządek reguł w powyższym powrocie został cofnięty, nikt nie będzie miał dostępu do folderu administracyjnego, ponieważ pierwsza reguła, którą ASP.NET napotka, będzie regułą, która odmówi wszystkim do tego folderu.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-248">In other words, if the order of rules in the shot above were reversed, no one would have access to the Administration folder because the first rule that ASP.NET would encounter would be the rule that denies everyone to the folder.</span></span>

<span data-ttu-id="3cdd2-249">ASP.NET 2,0 dodaje plik Web. config do folderu, dla którego określisz regułę dostępu.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-249">ASP.NET 2.0 adds a web.config file to the folder for which you are specifying an access rule.</span></span> <span data-ttu-id="3cdd2-250">Reguły dostępu można edytować za pomocą pliku konfiguracji lub narzędzia do administrowania witryną sieci Web.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-250">Access rules can be edited via the configuration file or via the Web Site Administration Tool.</span></span> <span data-ttu-id="3cdd2-251">Innymi słowy narzędzie do administrowania witryną sieci Web jest po prostu interfejsem, za pomocą którego plik konfiguracji można edytować w środowisku przyjaznym dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-251">In other words, the Web Site Administration Tool is simply an interface through which the configuration file can be edited in a user-friendly environment.</span></span>

## <a name="using-roles-in-code"></a><span data-ttu-id="3cdd2-252">Korzystanie z ról w kodzie</span><span class="sxs-lookup"><span data-stu-id="3cdd2-252">Using Roles in Code</span></span>

<span data-ttu-id="3cdd2-253">Interfejs API zarządzania rolami nie został zmieniony od wersji 1. x.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-253">The API for role management has not changed since version 1.x.</span></span> <span data-ttu-id="3cdd2-254">Metoda **IsInRole** służy do określenia, czy użytkownik należy do określonej roli.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-254">The **IsInRole** method is used to determine if a user is in a particular role.</span></span>

[!code-csharp[Main](membership/samples/sample3.cs)]

<span data-ttu-id="3cdd2-255">ASP.NET tworzy również wystąpienie RolePrincipal jako element członkowski bieżącego kontekstu.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-255">ASP.NET also creates a RolePrincipal instance as a member of the current context.</span></span> <span data-ttu-id="3cdd2-256">Obiekt RolePrincipal może służyć do uzyskania wszystkich ról, do których należy użytkownik:</span><span class="sxs-lookup"><span data-stu-id="3cdd2-256">The RolePrincipal object can be used to obtain all of the roles to which the user belongs as follows:</span></span>

[!code-csharp[Main](membership/samples/sample4.cs)]

## <a name="using-rolegroups-with-the-loginview-control"></a><span data-ttu-id="3cdd2-257">Używanie RoleGroups z kontrolką widoku logowania</span><span class="sxs-lookup"><span data-stu-id="3cdd2-257">Using RoleGroups with the LoginView Control</span></span>

<span data-ttu-id="3cdd2-258">Teraz, gdy masz już świadomość zarządzania rolami i członkostwem, możesz omówić krótko, w jaki sposób formant widoku logowania wykorzystuje tę możliwość w ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-258">Now that you have an understanding of role management and membership, lets discuss briefly how the LoginView control takes advantage of this capability in ASP.NET 2.0.</span></span> <span data-ttu-id="3cdd2-259">Jak wspomniano wcześniej, formant widoku logowania jest formantem z szablonem, który domyślnie zawiera dwa szablony; AnonymousTemplate i LoggedInTemplate.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-259">As previously discussed, the LoginView control is a templated control that contains two templates by default; the AnonymousTemplate and the LoggedInTemplate.</span></span> <span data-ttu-id="3cdd2-260">W oknie dialogowym zadania widoku logowania jest link (przedstawiony poniżej), który umożliwia edytowanie RoleGroups.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-260">Within the LoginView Tasks dialog is a link (shown below) that allows you to edit RoleGroups.</span></span>

![](membership/_static/image9.jpg)

<span data-ttu-id="3cdd2-261">**Rysunek 9.**</span><span class="sxs-lookup"><span data-stu-id="3cdd2-261">**Figure 9**</span></span>

<span data-ttu-id="3cdd2-262">Każdy obiekt grupy ról zawiera tablicę ciągów, które definiują role, do których odnosi się ta rola.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-262">Each RoleGroup object contains an array of strings that defines which roles that RoleGroup applies to.</span></span> <span data-ttu-id="3cdd2-263">Aby dodać nową rolę do kontrolki widoku logowania, kliknij łącze Edytuj RoleGroups.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-263">To add a new RoleGroup to the LoginView control, click the Edit RoleGroups link.</span></span> <span data-ttu-id="3cdd2-264">Na powyższym obrazie można zobaczyć, że dodano nową rolę grupy dla administratorów.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-264">In the image above, you can see that I have added a new RoleGroup for Administrators.</span></span> <span data-ttu-id="3cdd2-265">Wybierając tę rolę (rolę [0]) z listy rozwijanej widoki, można skonfigurować szablon, który będzie wyświetlany tylko dla członków roli Administratorzy.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-265">By selecting that RoleGroup (RoleGroup[0]) from the Views dropdown, I can configure a template that will only be displayed to members of the Administrators role.</span></span> <span data-ttu-id="3cdd2-266">Na poniższej ilustracji dodano nową rolę grupy, która jest stosowana do członków roli sprzedaż i rola dystrybucji.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-266">In the image below, I have added a new RoleGroup that applies to members of the Sales role and the Distribution role.</span></span> <span data-ttu-id="3cdd2-267">Spowoduje to dodanie drugiego elementu role do listy rozwijanej widoki w oknie dialogowym zadania widoku logowania, a wszystkie elementy dodane do tego szablonu będą widoczne dla każdego użytkownika w roli sprzedaż lub dystrybucja.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-267">This adds a second RoleGroup to the Views dropdown in the LoginView Tasks dialog and anything added to that template will be visible by any user in either the Sales or Distribution role.</span></span>

![](membership/_static/image10.jpg)

<span data-ttu-id="3cdd2-268">**Rysunek 10**</span><span class="sxs-lookup"><span data-stu-id="3cdd2-268">**Figure 10**</span></span>

## <a name="overriding-the-existing-membership-provider"></a><span data-ttu-id="3cdd2-269">Zastępowanie istniejącego dostawcy członkostwa</span><span class="sxs-lookup"><span data-stu-id="3cdd2-269">Overriding the Existing Membership Provider</span></span>

<span data-ttu-id="3cdd2-270">Istnieje kilka sposobów, aby zwiększyć funkcjonalność członkostwa ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-270">There are a couple of ways that you can extend the functionality of ASP.NET membership.</span></span> <span data-ttu-id="3cdd2-271">Najpierw można oczywiście zmienić istniejące funkcje klasy SqlMembershipProvider przez dziedziczenie z niej i zastępowanie jej metod.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-271">First of all, you can obviously change the existing functionality of the SqlMembershipProvider class by inheriting from it and overriding its methods.</span></span> <span data-ttu-id="3cdd2-272">Na przykład jeśli chcesz zaimplementować własne funkcje podczas tworzenia użytkowników, możesz utworzyć własną klasę, która dziedziczy z SqlMembershipProvider w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="3cdd2-272">For example, if you want to implement your own functionality when users are created, you can create your own class that inherits from SqlMembershipProvider as follows:</span></span>

[!code-csharp[Main](membership/samples/sample5.cs)]

<span data-ttu-id="3cdd2-273">Jeśli z drugiej strony chcesz utworzyć własnego dostawcę (aby przechowywać informacje o członkostwie w bazie danych programu Access, na przykład), możesz utworzyć własnego dostawcę.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-273">If, on the other hand, you want to create your own provider (to store your membership information in an Access database, for example), you can create your own provider.</span></span>

## <a name="creating-your-own-membership-provider"></a><span data-ttu-id="3cdd2-274">Tworzenie własnego dostawcy członkostwa</span><span class="sxs-lookup"><span data-stu-id="3cdd2-274">Creating Your Own Membership Provider</span></span>

<span data-ttu-id="3cdd2-275">Aby utworzyć własnego dostawcę członkostwa, należy najpierw utworzyć klasę, która dziedziczy z klasy MembershipProvider.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-275">To create your own membership provider, you will first need to create a class that inherits from the MembershipProvider class.</span></span> <span data-ttu-id="3cdd2-276">Jeśli używasz programu VB.NET, program Visual Studio 2005 doda procedury pośredniczące dla wszystkich metod, które należy przesłonić.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-276">If you are using VB.NET, Visual Studio 2005 will add the stubs for all of the methods that you need to override.</span></span> <span data-ttu-id="3cdd2-277">Jeśli używasz C#programu, możesz dodać te odcinki.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-277">If you are using C#, its up to you to add the stubs.</span></span>

<span data-ttu-id="3cdd2-278">Należy przesłonić następujące elementy:</span><span class="sxs-lookup"><span data-stu-id="3cdd2-278">You will need to override the following:</span></span>

- <span data-ttu-id="3cdd2-279">Właściwość ApplicationName</span><span class="sxs-lookup"><span data-stu-id="3cdd2-279">ApplicationName property</span></span>
- <span data-ttu-id="3cdd2-280">Funkcja ChangePassword</span><span class="sxs-lookup"><span data-stu-id="3cdd2-280">ChangePassword function</span></span>
- <span data-ttu-id="3cdd2-281">ChangePasswordQuestionAndAnswer, funkcja</span><span class="sxs-lookup"><span data-stu-id="3cdd2-281">ChangePasswordQuestionAndAnswer function</span></span>
- <span data-ttu-id="3cdd2-282">Funkcja myFunction</span><span class="sxs-lookup"><span data-stu-id="3cdd2-282">CreateUser function</span></span>
- <span data-ttu-id="3cdd2-283">DeleteUser, funkcja</span><span class="sxs-lookup"><span data-stu-id="3cdd2-283">DeleteUser function</span></span>
- <span data-ttu-id="3cdd2-284">Właściwość EnablePasswordReset</span><span class="sxs-lookup"><span data-stu-id="3cdd2-284">EnablePasswordReset property</span></span>
- <span data-ttu-id="3cdd2-285">Właściwość EnablePasswordRetrieval</span><span class="sxs-lookup"><span data-stu-id="3cdd2-285">EnablePasswordRetrieval property</span></span>
- <span data-ttu-id="3cdd2-286">FindUsersByEmail, funkcja</span><span class="sxs-lookup"><span data-stu-id="3cdd2-286">FindUsersByEmail function</span></span>
- <span data-ttu-id="3cdd2-287">FindUsersByName, funkcja</span><span class="sxs-lookup"><span data-stu-id="3cdd2-287">FindUsersByName function</span></span>
- <span data-ttu-id="3cdd2-288">GetAllUsers, funkcja</span><span class="sxs-lookup"><span data-stu-id="3cdd2-288">GetAllUsers function</span></span>
- <span data-ttu-id="3cdd2-289">GetNumberOfUsersOnline, funkcja</span><span class="sxs-lookup"><span data-stu-id="3cdd2-289">GetNumberOfUsersOnline function</span></span>
- <span data-ttu-id="3cdd2-290">GetPassword — funkcja</span><span class="sxs-lookup"><span data-stu-id="3cdd2-290">GetPassword function</span></span>
- <span data-ttu-id="3cdd2-291">GetUser, funkcja</span><span class="sxs-lookup"><span data-stu-id="3cdd2-291">GetUser function</span></span>
- <span data-ttu-id="3cdd2-292">GetUserNameByEmail, funkcja</span><span class="sxs-lookup"><span data-stu-id="3cdd2-292">GetUserNameByEmail function</span></span>
- <span data-ttu-id="3cdd2-293">Właściwość MaxInvalidPasswordAttempts</span><span class="sxs-lookup"><span data-stu-id="3cdd2-293">MaxInvalidPasswordAttempts property</span></span>
- <span data-ttu-id="3cdd2-294">Właściwość MinRequiredNonAlphanumericCharacters</span><span class="sxs-lookup"><span data-stu-id="3cdd2-294">MinRequiredNonAlphanumericCharacters property</span></span>
- <span data-ttu-id="3cdd2-295">Właściwość MinRequiredPasswordLength</span><span class="sxs-lookup"><span data-stu-id="3cdd2-295">MinRequiredPasswordLength property</span></span>
- <span data-ttu-id="3cdd2-296">Właściwość PasswordAttemptWindow</span><span class="sxs-lookup"><span data-stu-id="3cdd2-296">PasswordAttemptWindow property</span></span>
- <span data-ttu-id="3cdd2-297">Właściwość PasswordFormat</span><span class="sxs-lookup"><span data-stu-id="3cdd2-297">PasswordFormat property</span></span>
- <span data-ttu-id="3cdd2-298">Właściwość PasswordStrengthRegularExpression</span><span class="sxs-lookup"><span data-stu-id="3cdd2-298">PasswordStrengthRegularExpression property</span></span>
- <span data-ttu-id="3cdd2-299">Właściwość RequiresQuestionAndAnswer</span><span class="sxs-lookup"><span data-stu-id="3cdd2-299">RequiresQuestionAndAnswer property</span></span>
- <span data-ttu-id="3cdd2-300">Właściwość RequiresUniqueEmail</span><span class="sxs-lookup"><span data-stu-id="3cdd2-300">RequiresUniqueEmail property</span></span>
- <span data-ttu-id="3cdd2-301">ResetPassword, funkcja</span><span class="sxs-lookup"><span data-stu-id="3cdd2-301">ResetPassword function</span></span>
- <span data-ttu-id="3cdd2-302">Odblokuj funkcję użytkownika</span><span class="sxs-lookup"><span data-stu-id="3cdd2-302">Unlock user function</span></span>
- <span data-ttu-id="3cdd2-303">UpdateUser, funkcja</span><span class="sxs-lookup"><span data-stu-id="3cdd2-303">UpdateUser function</span></span>
- <span data-ttu-id="3cdd2-304">ValidateUser, funkcja</span><span class="sxs-lookup"><span data-stu-id="3cdd2-304">ValidateUser function</span></span>

<span data-ttu-id="3cdd2-305">Która całkiem listę do wdrożenia jako C# Deweloper.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-305">Thats quite a list to implement as a C# developer.</span></span> <span data-ttu-id="3cdd2-306">Łatwiej jest utworzyć klasę w VB.NET bez żadnej implementacji, a następnie użyć reflektora platformy .NET lub podobnego narzędzia do konwersji kodu na C#.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-306">You may find it easier to create the class in VB.NET without any implementation and then use .NET Reflector or a similar tool to convert the code to C#.</span></span>

<span data-ttu-id="3cdd2-307">Parametry połączenia i inne właściwości powinny być ustawione na ich wartości domyślne w metodzie Initialize.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-307">The connection string and other properties should be set to their defaults in the Initialize method.</span></span> <span data-ttu-id="3cdd2-308">(Metoda Initialize jest wyzwalana, gdy dostawca jest ładowany w czasie wykonywania). Drugi parametr metody Initialize jest typu System. Collections. wyspecjalizowany. NameValueCollection i jest odwołaniem do &lt;Dodaj&gt; elementu, który jest skojarzony z dostawcą niestandardowym w pliku Web. config.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-308">(The Initialize method is fired when the provider is loaded at runtime.) The second parameter to the Initialize method is of type System.Collections.Specialized.NameValueCollection and is a reference to the &lt;add&gt; element that is associated with your custom provider in the web.config file.</span></span> <span data-ttu-id="3cdd2-309">Ten wpis wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="3cdd2-309">That entry looks like the following:</span></span>

[!code-xml[Main](membership/samples/sample6.xml)]

<span data-ttu-id="3cdd2-310">Oto przykład metody Initialize.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-310">Here is an example of the Initialize method.</span></span>

[!code-csharp[Main](membership/samples/sample7.cs)]

<span data-ttu-id="3cdd2-311">Aby zweryfikować użytkownika podczas przesyłania formularza logowania, należy użyć metody ValidateUser.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-311">In order to validate the user when they submit your login form, you will need to use the ValidateUser method.</span></span> <span data-ttu-id="3cdd2-312">Ta metoda jest wyzwalana, gdy użytkownik kliknie przycisk Zaloguj w kontrolce logowania.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-312">This method fires when the user clicks the login button in the Login control.</span></span> <span data-ttu-id="3cdd2-313">Zostanie umieszczony kod, który wykonuje wyszukiwanie użytkownika w tej metodzie.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-313">You will place your code that does the user lookup in this method.</span></span>

<span data-ttu-id="3cdd2-314">Jak widać, pisanie własnego dostawcy członkostwa nie jest trudne i pozwala na rozbudowanie tej zaawansowanej funkcjonalności ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="3cdd2-314">As you can see, writing your own membership provider is not difficult and allows you to extend this powerful functionality of ASP.NET 2.0.</span></span>

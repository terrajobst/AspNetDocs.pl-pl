---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
title: Konfigurowanie właściwości wdrożenia dla środowiska docelowego | Microsoft Docs
author: jrjlee
description: W tym temacie opisano sposób konfigurowania właściwości specyficznych dla środowiska w celu wdrożenia przykładowego rozwiązania Contact Manager w określonym środowisku docelowym...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: b5b86e03-b8ed-46e6-90fa-e1da88ef34e9
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
msc.type: authoredcontent
ms.openlocfilehash: 9742be7d718384c1b108d5f2c0c43e8e8d4fe8a9
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78636445"
---
# <a name="configuring-deployment-properties-for-a-target-environment"></a>Konfigurowanie właściwości wdrożenia dla środowiska docelowego

Autor [Jason Lewandowski](https://github.com/jrjlee)

[Pobierz plik PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> W tym temacie opisano sposób konfigurowania właściwości specyficznych dla środowiska w celu wdrożenia przykładowego rozwiązania Contact Manager w określonym środowisku docelowym.

Ten temat stanowi część szeregu samouczków opartych na wymaganiach dotyczących wdrażania w przedsiębiorstwie fikcyjnej firmy o nazwie Fabrikam, Inc. W tej serii samouczków jest stosowane&#x2014;przykładowe [](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) rozwiązanie&#x2014;do reprezentowania aplikacji sieci Web, które ma realistyczny poziom złożoności, w tym aplikacji ASP.NET MVC 3, usługi Windows Communication Foundation (WCF) i projektu bazy danych.

Metoda wdrażania w tym samouczku jest oparta na podejściu do pliku projektu podzielonego opisanego w artykule [Opis procesu kompilacji](../web-deployment-in-the-enterprise/understanding-the-build-process.md), w którym proces kompilacji jest kontrolowany przez dwa pliki&#x2014;projektu, zawierający instrukcje kompilacji, które mają zastosowanie do każdego środowiska docelowego, oraz jeden zawierający ustawienia kompilacji i wdrożenia specyficznego dla środowiska. W czasie kompilacji plik projektu specyficzny dla środowiska jest scalany z plikiem projektu Environment-niezależny od w celu utworzenia kompletnego zestawu instrukcji kompilacji.

## <a name="process-overview"></a>Przegląd procesu

Plik projektu, który będzie używany do kompilowania i wdrażania rozwiązania Contact Manager, jest podzielony na dwa pliki fizyczne:

- Taki, który zawiera ustawienia i instrukcje kompilacji uniwersalnej (plik *Publish. proj* ).
- Taki, który zawiera ustawienia kompilacji specyficzne dla środowiska (*ENV-dev. proj*, *ENV-Stage. proj*itd.).

W czasie kompilacji odpowiedni plik projektu specyficzny dla środowiska zostanie scalony w pliku uniwersalnego *publikowania. proj* , aby utworzyć kompletny zestaw instrukcji kompilacji. Wdrożenie można skonfigurować do określonych środowisk docelowych przez utworzenie lub dostosowanie plików projektu specyficznych dla środowiska przy użyciu ustawień opisujących własny scenariusz wdrażania.

Wiele z tych wartości zależy od sposobu konfiguracji&#x2014;środowiska docelowego, niezależnie od tego, czy docelowy serwer sieci Web jest skonfigurowany do korzystania z usługi Deployment Agent sieci Web (Agent zdalny) czy Web Deploy obsługi. Aby uzyskać więcej informacji na temat tych podejścia oraz wskazówki dotyczące wybierania właściwego podejścia do własnego środowiska, zobacz Wybieranie odpowiedniego [podejścia do wdrażania w sieci Web](choosing-the-right-approach-to-web-deployment.md).

[Scenariusz Contact Manager](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md) wymaga dwóch plików projektu specyficznych dla środowiska:

- Wdrożenie w środowisku testowym dla deweloperów (*ENV-dev. proj*). Środowisko testowe dla deweloperów jest skonfigurowane do akceptowania wdrożeń zdalnych przy użyciu agenta zdalnego, zgodnie z opisem w temacie [Scenariusz: Konfigurowanie środowiska testowego na potrzeby wdrażania w sieci Web](scenario-configuring-a-test-environment-for-web-deployment.md). Ten plik musi podawać adres punktu końcowego agenta zdalnego oraz ustawienia specyficzne dla lokalizacji, takie jak parametry połączenia i punkty końcowe usługi.
- Wdrażanie w środowisku przejściowym (*ENV-Stage. proj*). Środowisko tymczasowe jest skonfigurowane do akceptowania wdrożeń zdalnych przy użyciu programu obsługi Web Deploy, zgodnie z opisem w temacie [Scenariusz: Konfigurowanie środowiska przejściowego na potrzeby wdrażania w sieci Web](scenario-configuring-a-staging-environment-for-web-deployment.md). Ten plik musi podawać adres punktu końcowego obsługi Web Deploy, a także ustawienia specyficzne dla lokalizacji, takie jak parametry połączenia i punkty końcowe usługi.

Należy pamiętać, że ustawienia skonfigurowane w pliku projektu specyficznego dla środowiska nie wpływają na zawartość samego&#x2014;pakietu sieci Web, kontrolują sposób wdrażania pakietu i jakie wartości parametrów są dostarczane podczas wyodrębniania pakietu. Pakiet internetowy jest importowany ręcznie do środowiska produkcyjnego, zgodnie z opisem w temacie [Scenariusz: Konfigurowanie środowiska produkcyjnego na potrzeby wdrażania w sieci Web](scenario-configuring-a-production-environment-for-web-deployment.md) i [Ręczne instalowanie pakietów sieci Web](../web-deployment-in-the-enterprise/manually-installing-web-packages.md), dlatego nie ma znaczenia ustawień używanych w pliku projektu specyficznym dla środowiska podczas generowania pakietu. Menedżer Internet Information Services (IIS) wyświetli monit o podanie dowolnych wartości parametrycznych, takich jak ciągi połączeń i punkty końcowe usługi, podczas importowania pakietu.

Aby wdrożyć rozwiązanie Contact Manager w swoim środowisku docelowym, możesz dostosować ten plik lub użyć go jako szablonu i utworzyć własny plik.

**Aby skonfigurować ustawienia wdrożenia specyficzne dla środowiska dla rozwiązania Contact Manager**

1. Otwórz rozwiązanie ContactManager — WCF w programie Visual Studio 2010.
2. W oknie **Eksplorator rozwiązań** rozwiń folder **Publikowanie** , rozwiń folder **EnvConfig** , a następnie kliknij dwukrotnie pozycję **ENV-dev. proj**.

    ![](configuring-deployment-properties-for-a-target-environment/_static/image1.png)
3. Zastąp wartości właściwości w pliku *ENV-dev. proj* prawidłowymi wartościami dla własnego środowiska testowego.

    > [!NOTE]
    > Tabela, która następuje po tej procedurze, zawiera więcej informacji na temat każdej z tych właściwości.
4. Zapisz swoją służbę, a następnie zamknij plik *ENV-dev. proj* .

## <a name="choosing-the-right-deployment-properties"></a>Wybieranie właściwych właściwości wdrożenia

W tej tabeli opisano przeznaczenie każdej właściwości w pliku projektu z przykładowym konkretnym środowiskiem, *ENV-dev. proj*i przedstawiono wskazówki dotyczące wartości, które należy podać.

|                                                        Nazwa właściwości                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Szczegóły                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|              <strong>MSDeployComputerName</strong> Nazwa docelowego serwera sieci Web lub punktu końcowego usługi.               |                                                                                                                                                                                                                                              Jeśli wdrażasz usługę agenta zdalnego na docelowym serwerze sieci Web, możesz określić nazwę komputera docelowego (na przykład <strong>TESTWEB1</strong> lub <strong>TESTWEB1.fabrikam.NET</strong>) lub określić zdalny punkt końcowy agenta (na przykład `http://TESTWEB1/MSDEPLOYAGENTSERVICE`). Wdrożenie działa w taki sam sposób w każdym przypadku. Jeśli wdrażasz program do obsługi Web Deploy na docelowym serwerze sieci Web, należy określić punkt końcowy usługi i dołączyć nazwę witryny sieci Web usług IIS jako parametr ciągu zapytania (na przykład `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`).                                                                                                                                                                                                                                              |
|         <strong>MSDeployAuth</strong> Metoda, która Web Deploy powinna być używana do uwierzytelniania na komputerze zdalnym.          |                                                                                                                                                                                                                          Ta wartość powinna być ustawiona na <strong>NTLM</strong> lub <strong>podstawowa</strong>. Zwykle użycie protokołu <strong>NTLM</strong> w przypadku wdrażania w usłudze zdalnego agenta i warstwy <strong>podstawowa</strong> , jeśli jest wdrażana do programu obsługi Web Deploy. W przypadku korzystania z uwierzytelniania podstawowego należy również określić nazwę użytkownika i hasło, które ma być personifikowane przez narzędzie Web Deployment (Web Deploy) usług IIS, aby można było wykonać wdrożenie. W tym przykładzie te wartości są udostępniane za pomocą właściwości <strong>MSDeployUsername</strong> i <strong>MSDeployPassword</strong> . W przypadku korzystania z uwierzytelniania NTLM można pominąć te właściwości lub pozostawić je puste.                                                                                                                                                                                                                          |
| <strong>MSDeployUsername</strong> Jeśli używasz uwierzytelniania podstawowego, Web Deploy będzie używać tego konta na komputerze zdalnym.  |                                                                                                                                                                                                                                                                                                                                                                                                                       Powinno to potrwać <em>domenę</em>\*username * (na przykład <strong>FABRIKAM\matt</strong>). Ta wartość jest używana tylko w przypadku określenia uwierzytelniania podstawowego. W przypadku korzystania z uwierzytelniania NTLM właściwość może zostać pominięta. Jeśli zostanie podana wartość, zostanie zignorowana.                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <strong>MSDeployPassword</strong> Jeśli używasz uwierzytelniania podstawowego, Web Deploy będzie używać tego hasła na komputerze zdalnym. |                                                                                                                                                                                                                                                                                                                                                                                                                    Jest to hasło dla konta użytkownika określonego we właściwości <strong>MSDeployUsername</strong> . Ta wartość jest używana tylko w przypadku określenia uwierzytelniania podstawowego. W przypadku korzystania z uwierzytelniania NTLM właściwość może zostać pominięta. Jeśli zostanie podana wartość, zostanie zignorowana.                                                                                                                                                                                                                                                                                                                                                                                                                    |
|     <strong>ContactManagerIisPath</strong> Ścieżka IIS, w której chcesz wdrożyć aplikację programu Contact Manager MVC.     |                                                                                                                                                                                                                                                                                                                                                                        Powinna to być ścieżka wyświetlana w Menedżerze usług IIS, w postaci [<em>Nazwa witryny internetowej usług IIS</em>]/[<em>Nazwa aplikacji</em><em>sieci Web</em>]. Należy pamiętać, że witryna sieci Web usług IIS musi istnieć przed wdrożeniem aplikacji. Na przykład jeśli utworzono witrynę sieci Web usług IIS o nazwie DemoSite, można określić ścieżkę usług IIS dla aplikacji MVC jako DemoSite/ContactManager.                                                                                                                                                                                                                                                                                                                                                                        |
|   <strong>ContactManagerServiceIisPath</strong> Ścieżka IIS, w której ma zostać wdrożona usługa programu Contact Manager WCF.    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Na przykład jeśli utworzono witrynę sieci Web usług IIS o nazwie DemoSite, można określić ścieżkę usług IIS dla usługi WCF jako <strong>DemoSite/ContactManagerService</strong>.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|                  <strong>ContactManagerTargetUrl</strong> Adres URL, pod którym można uzyskać dostęp do usługi WCF.                   |                                                                                                                                                     Spowoduje to przełączenie formularza [<em>główny adres URL witryny IIS</em>]/[<em>Nazwa aplikacji usługi</em>]/[<em>punkt końcowy usługi</em>]. Na przykład jeśli utworzono witrynę sieci Web usług IIS na porcie 85, adres URL będzie miał postać `http://localhost:85/ContactManagerService/ContactService.svc`. Należy pamiętać, że aplikacja MVC i usługa WCF są wdrażane na tym samym serwerze. W związku z tym ten adres URL jest dostępny tylko na komputerze, na którym jest zainstalowany. W związku z tym lepiej jest używać localhost lub adresu IP zamiast nazwy komputera lub nagłówka hosta w adresie URL. Jeśli używasz nazwy komputera lub nagłówka hosta, funkcja zabezpieczenia [sprawdzania sprzężenia zwrotnego](https://go.microsoft.com/?linkid=9805131) w usługach IIS może zablokować adres URL i zwrócić błąd <strong>http 401,1-nieautoryzowany</strong> .                                                                                                                                                     |
|                  <strong>CmDatabaseConnectionString</strong> Parametry połączenia dla serwera bazy danych.                  | Parametry połączenia określają zarówno poświadczenia, które VSDBCMD będą używane do kontaktowania się z serwerem bazy danych, a następnie utworzenie bazy danych i poświadczeń, które będą używane przez pulę aplikacji serwera sieci Web do kontaktowania się z serwerem bazy danych i korzystania z bazy danych. Zasadniczo dostępne są dwie opcje. Można określić <strong>zintegrowane zabezpieczenia = true</strong>, w którym jest używane zintegrowane uwierzytelnianie systemu Windows: <strong>Źródło danych = TESTDB1; zabezpieczenia zintegrowane = true</strong> w tym przypadku baza danych zostanie utworzona przy użyciu poświadczeń użytkownika, który uruchamia plik wykonywalny VSDBCMD, a aplikacja będzie uzyskiwać dostęp do bazy danych przy użyciu tożsamości konta komputera serwera sieci Web. Alternatywnie możesz określić nazwę użytkownika i hasło konta SQL Server. W takim przypadku poświadczenia SQL Server są używane przez VSDBCMD do tworzenia bazy danych i puli aplikacji w celu współdziałania z bazą danych: <strong>Data Source = TESTDB1; Identyfikator użytkownika = ASqlUser; Hasło = PA $ $w 0rd</strong> instruktaże w tym temacie założono, że będziesz używać zintegrowanego uwierzytelniania systemu Windows. |
|        <strong>CmTargetDatabase</strong> Nazwa, która ma zostać utworzona na serwerze bazy danych.        |                                                                                                                                                                                                                                                                                                                                                                                                                                                     Wartość wprowadzona w tym miejscu jest dodawana do polecenia VSDBCMD jako parametr. Jest on również używany do tworzenia pełnych parametrów połączenia, które mogą być używane przez pulę aplikacji na serwerze sieci Web do współdziałania z bazą danych.                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

W poniższych przykładach pokazano, jak można skonfigurować te właściwości dla określonych scenariuszy wdrażania.

### <a name="example-1x2014deployment-to-the-remote-agent-service"></a>Przykład 1&#x2014;wdrożenie do usługi zdalnego agenta

W tym przykładzie:

- Wdrażasz w usłudze zdalnego agenta w systemie TESTWEB1.
- Nakazujesz Web Deploy do korzystania z uwierzytelniania NTLM. Web Deploy zostanie uruchomiona przy użyciu poświadczeń użytych do wywołania Microsoft Build Engine (MSBuild).
- Używasz uwierzytelniania zintegrowanego, aby wdrożyć bazę danych **ContactManager** do TESTDB1. Baza danych zostanie wdrożona przy użyciu poświadczeń użytych do wywołania programu MSBuild.

[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample1.xml)]

### <a name="example-2x2014deployment-to-the-web-deploy-handler-endpoint"></a>Przykład 2&#x2014;wdrożenie do punktu końcowego procedury obsługi Web Deploy

W tym przykładzie:

- Wdrażasz w punkcie końcowym usługi obsługi Web Deploy na STAGEWEB1.
- Nakazujesz Web Deploy korzystania z uwierzytelniania podstawowego.
- Określasz, że Web Deploy powinny personifikować konto FABRIKAM\stagingdeployer na komputerze zdalnym.
- Używasz uwierzytelniania SQL Server, aby wdrożyć bazę danych **ContactManager** do STAGEDB1.

[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample2.xml)]

## <a name="conclusion"></a>Podsumowanie

W tym momencie pliki projektu są w pełni skonfigurowane do kompilowania i wdrażania rozwiązania Contact Manager w co najmniej jednym środowisku docelowym.

Aby użyć tych plików projektu jako części jednoetapowego procesu wdrażania powtarzanego, należy wykonać plik *Publish. proj* przy użyciu programu MSBuild i przekazać lokalizację pliku projektu specyficznego dla środowiska jako parametr. Można to zrobić na różne sposoby:

- Aby zapoznać się z omówieniem programu MSBuild i wprowadzeniem do niestandardowych plików projektu, zobacz [Opis pliku projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md).
- Aby dowiedzieć się, jak sformułować polecenie MSBuild, które wykonuje niestandardowe pliki projektu, zobacz [wdrażanie pakietów internetowych](../web-deployment-in-the-enterprise/deploying-web-packages.md).
- Aby uzyskać informacje na temat sposobu dołączania poleceń MSBuild do pliku poleceń dla jednoetapowych, powtarzalnych wdrożeń, zobacz [Tworzenie i uruchamianie pliku poleceń wdrożenia](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).
- Aby uzyskać informacje na temat sposobu wykonywania niestandardowych plików projektu z kompilacji zespołowej, zobacz [Tworzenie definicji kompilacji, która obsługuje wdrażanie](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).

> [!div class="step-by-step"]
> [Wstecz](creating-a-server-farm-with-the-web-farm-framework.md)

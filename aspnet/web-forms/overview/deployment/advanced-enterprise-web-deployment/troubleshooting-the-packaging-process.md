---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/troubleshooting-the-packaging-process
title: Rozwiązywanie problemów z procesem tworzenia pakietów | Dokumentacja firmy Microsoft
author: jrjlee
description: W tym temacie opisano, jak zbierać szczegółowe informacje na temat procesu tworzenia pakietów za pomocą właściwości EnablePackageProcessLoggingAndAssert w M...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 794bd819-00fc-47e2-876d-fc5d15e0de1c
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/troubleshooting-the-packaging-process
msc.type: authoredcontent
ms.openlocfilehash: 79774c6a1a1d05d5a7bcd82a5d7aa888933cf089
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/17/2019
ms.locfileid: "59420110"
---
# <a name="troubleshooting-the-packaging-process"></a><span data-ttu-id="55f11-103">Rozwiązywanie problemów z procesem tworzenia pakietów</span><span class="sxs-lookup"><span data-stu-id="55f11-103">Troubleshooting the Packaging Process</span></span>

<span data-ttu-id="55f11-104">przez [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="55f11-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="55f11-105">Pobierz plik PDF</span><span class="sxs-lookup"><span data-stu-id="55f11-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="55f11-106">W tym temacie opisano, jak zbierać szczegółowe informacje na temat procesu tworzenia pakietów, za pomocą **EnablePackageProcessLoggingAndAssert** właściwość aparatu Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="55f11-106">This topic describes how you can collect detailed information about the packaging process by using the **EnablePackageProcessLoggingAndAssert** property in the Microsoft Build Engine (MSBuild).</span></span>
> 
> <span data-ttu-id="55f11-107">Po ustawieniu **EnablePackageProcessLoggingAndAssert** właściwości **true**, program MSBuild będzie:</span><span class="sxs-lookup"><span data-stu-id="55f11-107">When you set the **EnablePackageProcessLoggingAndAssert** property to **true**, MSBuild will:</span></span>
> 
> - <span data-ttu-id="55f11-108">Dodaj dodatkowe informacje na temat procesu tworzenia pakietów w dziennikach kompilacji.</span><span class="sxs-lookup"><span data-stu-id="55f11-108">Add additional information about the packaging process to the build logs.</span></span>
> - <span data-ttu-id="55f11-109">Rejestruje błędy pod pewnymi warunkami, na przykład, jeśli zduplikowane pliki znajdują się na liście pakietu.</span><span class="sxs-lookup"><span data-stu-id="55f11-109">Log errors under certain conditions, for example, if duplicate files are found in the packaging list.</span></span>
> - <span data-ttu-id="55f11-110">Utwórz katalog dzienników w *ProjectName*\_pakietu folder i użyć go do rejestrowania informacji o plikach one pakowania.</span><span class="sxs-lookup"><span data-stu-id="55f11-110">Create a Log directory in the *ProjectName*\_Package folder and use it to record information about the files you're packaging.</span></span>
> 
> <span data-ttu-id="55f11-111">Jeśli proces pakowania, kończy się niepowodzeniem lub pakietów wdrażania sieci web nie zawierają pliki, których można oczekiwać, można użyć tych informacji rozwiązywać ten proces i pinpoint gdzie przebieg procesu problem.</span><span class="sxs-lookup"><span data-stu-id="55f11-111">If the packaging process is failing, or your web deployment packages don't contain the files that you expect, you can use this information to troubleshoot the process and pinpoint where things are going wrong.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="55f11-112">**EnablePackageProcessLoggingAndAssert** właściwości tylko wtedy, gdy tworzysz projekt przy użyciu **debugowania** konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="55f11-112">The **EnablePackageProcessLoggingAndAssert** property only works if you build your project using the **Debug** configuration.</span></span> <span data-ttu-id="55f11-113">Właściwość jest ignorowana w innych konfiguracjach.</span><span class="sxs-lookup"><span data-stu-id="55f11-113">The property is ignored in other configurations.</span></span>


<span data-ttu-id="55f11-114">Ten temat jest częścią serii samouczków na podstawie wymagania dotyczące wdrażania enterprise fikcyjnej firmy o nazwie firmy Fabrikam, Inc. Przykładowe rozwiązanie korzysta z tej serii samouczków&#x2014; [rozwiązania Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;do reprezentowania aplikacji sieci web przy użyciu realistycznej stopień złożoności, łącznie z aplikacją ASP.NET MVC 3 komunikacji Windows Usługa Foundation (WCF), a projekt bazy danych.</span><span class="sxs-lookup"><span data-stu-id="55f11-114">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="55f11-115">Metody wdrażania w ramach tego samouczka opiera się na podejście pliku projektu Podziel opisane w [objaśnienie pliku projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md), w którym proces kompilacji jest kontrolowana przez dwa pliki projektu&#x2014;jeden zawierający Tworzenie instrukcji, które mają zastosowanie do każdego środowiska docelowego i jeden zawierający ustawienia specyficzne dla środowiska kompilacji i wdrażania.</span><span class="sxs-lookup"><span data-stu-id="55f11-115">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="55f11-116">W czasie kompilacji pliku projektu specyficznymi dla środowiska jest scalana w pliku projektu niezależnego od środowiska w celu utworzenia kompletny zestaw instrukcji kompilacji.</span><span class="sxs-lookup"><span data-stu-id="55f11-116">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="understanding-the-enablepackageprocessloggingandassert-property"></a><span data-ttu-id="55f11-117">Opis właściwości EnablePackageProcessLoggingAndAssert</span><span class="sxs-lookup"><span data-stu-id="55f11-117">Understanding the EnablePackageProcessLoggingAndAssert Property</span></span>

<span data-ttu-id="55f11-118">[Budowanie i projektów aplikacji sieci Web pakietu](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md) opisano, jak Web potok publikowania (WPP) zawiera zbiór elementów docelowych MSBuild, które rozszerzają funkcjonalność programu MSBuild i włącz ją zintegrować z sieci Web usług Internet Information Services (IIS) Narzędzia Deployment (Web Deploy).</span><span class="sxs-lookup"><span data-stu-id="55f11-118">[Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md) described how the Web Publishing Pipeline (WPP) provides a set of MSBuild targets that extend the functionality of MSBuild and enable it to integrate with the Internet Information Services (IIS) Web Deployment Tool (Web Deploy).</span></span> <span data-ttu-id="55f11-119">Podczas pakowania projektu aplikacji sieci web wywoływania WPP elementów docelowych.</span><span class="sxs-lookup"><span data-stu-id="55f11-119">When you package a web application project, you're invoking WPP targets.</span></span>

<span data-ttu-id="55f11-120">Wiele z tych celów WPP obejmują logikę warunkową, która rejestruje dodatkowe informacje podczas **EnablePackageProcessLoggingAndAssert** właściwość jest ustawiona na **true**.</span><span class="sxs-lookup"><span data-stu-id="55f11-120">Lots of these WPP targets include conditional logic that logs additional information when the **EnablePackageProcessLoggingAndAssert** property is set to **true**.</span></span> <span data-ttu-id="55f11-121">Na przykład, jeśli przejrzysz **pakietu** obiektu docelowego, widać tworzy katalog dziennika dodatkowe i zapisuje listę plików do pliku tekstowego, jeśli **EnablePackageProcessLoggingAndAssert** jest równa **true**.</span><span class="sxs-lookup"><span data-stu-id="55f11-121">For example, if you review the **Package** target, you can see that it creates an additional log directory and writes a list of files to a text file if **EnablePackageProcessLoggingAndAssert** is equal to **true**.</span></span>


[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample1.xml)]


> [!NOTE]
> <span data-ttu-id="55f11-122">Obiekty docelowe WPP są zdefiniowane w *Microsoft.Web.Publishing.targets* pliku w folderze % PROGRAMFILES (x 86) %\MSBuild\Microsoft\VisualStudio\v10.0\Web.</span><span class="sxs-lookup"><span data-stu-id="55f11-122">The WPP targets are defined in the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span> <span data-ttu-id="55f11-123">Możesz otworzyć ten plik i przejrzyj obiekty docelowe w programie Visual Studio 2010 lub dowolnym edytorze XML.</span><span class="sxs-lookup"><span data-stu-id="55f11-123">You can open this file and review the targets in Visual Studio 2010 or any XML editor.</span></span> <span data-ttu-id="55f11-124">Należy zadbać, nie należy modyfikować zawartości pliku.</span><span class="sxs-lookup"><span data-stu-id="55f11-124">Take care not to modify the contents of the file.</span></span>


## <a name="enabling-the-additional-logging"></a><span data-ttu-id="55f11-125">Włączanie dodatkowe rejestrowanie</span><span class="sxs-lookup"><span data-stu-id="55f11-125">Enabling the Additional Logging</span></span>

<span data-ttu-id="55f11-126">Należy podać wartość **EnablePackageProcessLoggingAndAssert** właściwości na różne sposoby, w zależności od tego, jak skompilować projekt.</span><span class="sxs-lookup"><span data-stu-id="55f11-126">You can supply a value for the **EnablePackageProcessLoggingAndAssert** property in various ways, depending on how you build your project.</span></span>

<span data-ttu-id="55f11-127">Jeśli tworzysz projekt w wierszu polecenia, należy podać wartość **EnablePackageProcessLoggingAndAssert** właściwość jako argument wiersza polecenia:</span><span class="sxs-lookup"><span data-stu-id="55f11-127">If you build your project from the command line, you can supply a value for the **EnablePackageProcessLoggingAndAssert** property as a command-line argument:</span></span>


[!code-console[Main](troubleshooting-the-packaging-process/samples/sample2.cmd)]


<span data-ttu-id="55f11-128">Jeśli używasz pliku niestandardowego projektu do tworzenia projektów, można dołączyć **EnablePackageProcessLoggingAndAssert** wartość w **właściwości** atrybutu **MSBuild**zadań:</span><span class="sxs-lookup"><span data-stu-id="55f11-128">If you're using a custom project file to build your projects, you can include the **EnablePackageProcessLoggingAndAssert** value in the **Properties** attribute of the **MSBuild** task:</span></span>


[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample3.xml)]


<span data-ttu-id="55f11-129">Jeśli używasz definicji kompilacji Team Foundation Server (TFS) do tworzenia projektów, należy podać wartość **EnablePackageProcessLoggingAndAssert** właściwość **argumenty MSBuild** wiersz:![](troubleshooting-the-packaging-process/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="55f11-129">If you're using a Team Foundation Server (TFS) build definition to build your projects, you can supply a value for the **EnablePackageProcessLoggingAndAssert** property in the **MSBuild Arguments** row:![](troubleshooting-the-packaging-process/_static/image1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="55f11-130">Aby uzyskać więcej informacji na temat tworzenia i konfigurowania definicji kompilacji, zobacz [tworzenie kompilacji definicji, obsługuje wdrożenia](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="55f11-130">For more information on creating and configuring build definitions, see [Creating a Build Definition That Supports Deployment](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span></span>


<span data-ttu-id="55f11-131">Alternatywnie, jeśli chcesz uwzględnić pakiet z każdą kompilacją, można zmodyfikować plik projektu dla projektu aplikacji sieci web ustawić **EnablePackageProcessLoggingAndAssert** właściwości **true**.</span><span class="sxs-lookup"><span data-stu-id="55f11-131">Alternatively, if you want to include the package in every build, you can modify the project file for your web application project to set the **EnablePackageProcessLoggingAndAssert** property to **true**.</span></span> <span data-ttu-id="55f11-132">Należy dodać właściwości do pierwszego **PropertyGroup** element w obrębie pliku .csproj lub .vbproj.</span><span class="sxs-lookup"><span data-stu-id="55f11-132">You should add the property to the first **PropertyGroup** element within your .csproj or .vbproj file.</span></span>


[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample4.xml)]


## <a name="reviewing-the-log-files"></a><span data-ttu-id="55f11-133">Przeglądanie plików dziennika</span><span class="sxs-lookup"><span data-stu-id="55f11-133">Reviewing the Log Files</span></span>

<span data-ttu-id="55f11-134">Podczas kompilowania i projektu aplikacji sieci web za pomocą pakietu **EnablePackageProcessLoggingAndAssert** równa **true**, MSBuild tworzy dodatkowy folder o nazwie logowania *ProjectName* \_Folderu pakietu.</span><span class="sxs-lookup"><span data-stu-id="55f11-134">When you build and package a web application project with **EnablePackageProcessLoggingAndAssert** set to **true**, MSBuild creates an additional folder named Log in the *ProjectName*\_Package folder.</span></span> <span data-ttu-id="55f11-135">Folder dziennika zawiera różne pliki:</span><span class="sxs-lookup"><span data-stu-id="55f11-135">The Log folder contains various files:</span></span>

![](troubleshooting-the-packaging-process/_static/image2.png)

<span data-ttu-id="55f11-136">Listę plików, które są wyświetlane będą się różnić zależnie od elementów w projekcie i proces kompilacji.</span><span class="sxs-lookup"><span data-stu-id="55f11-136">The list of files that you see will vary according to the things in your project and your build process.</span></span> <span data-ttu-id="55f11-137">Jednak te pliki są zwykle używane do rejestrowania listę plików, które zbiera potok WPP pakowania na różnych etapach procesu:</span><span class="sxs-lookup"><span data-stu-id="55f11-137">However, these files are typically used to record the list of files that the WPP is collecting for packaging, at various stages of the process:</span></span>

- <span data-ttu-id="55f11-138">*PreExcludePipelineCollectFilesPhaseFileList.txt* plik zawiera listę plików, które zbiera MSBuild do pakowania, zanim zostaną usunięte wszystkie pliki, które są określone do wykluczenia.</span><span class="sxs-lookup"><span data-stu-id="55f11-138">The *PreExcludePipelineCollectFilesPhaseFileList.txt* file lists the files that MSBuild collects for packaging before any files that are specified for exclusion are removed.</span></span>
- <span data-ttu-id="55f11-139">*AfterExcludeFilesFilesList.txt* plik zawiera listę zmodyfikowanych plików, po usunięciu wszystkie pliki, które są określone do wykluczenia.</span><span class="sxs-lookup"><span data-stu-id="55f11-139">The *AfterExcludeFilesFilesList.txt* file contains the modified file list after any files that are specified for exclusion are removed.</span></span>

    > [!NOTE]
    > <span data-ttu-id="55f11-140">Aby uzyskać więcej informacji na temat wykluczanie plików i folderów z procesem tworzenia pakietów, zobacz [wykluczanie plików i folderów z wdrożenia](excluding-files-and-folders-from-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="55f11-140">For more information on excluding files and folders from the packaging process, see [Excluding Files and Folders from Deployment](excluding-files-and-folders-from-deployment.md).</span></span>
- <span data-ttu-id="55f11-141">*AfterTransformWebConfig.txt* plik listy plików zebranych pakowania po każdym *Web.config* przekształceń, które mogły zostać wykonane.</span><span class="sxs-lookup"><span data-stu-id="55f11-141">The *AfterTransformWebConfig.txt* file lists the files collected for packaging after any *Web.config* transforms have been performed.</span></span> <span data-ttu-id="55f11-142">Na tej liście, a wszelkie charakterystyczne dla konfiguracji *Web.config* przekształcanie plików, takie jak *Web.Debug.config* i *Web.Release.config*, są wykluczane z listy plików pakowanie.</span><span class="sxs-lookup"><span data-stu-id="55f11-142">In this list, any configuration-specific *Web.config* transform files, like *Web.Debug.config* and *Web.Release.config*, are excluded from the list of files for packaging.</span></span> <span data-ttu-id="55f11-143">Pojedynczy przekształcane *Web.config* znajduje się w ich miejscu.</span><span class="sxs-lookup"><span data-stu-id="55f11-143">A single transformed *Web.config* is included in their place.</span></span>
- <span data-ttu-id="55f11-144">*PostAutoParameterizationWebConfigConnectionStrings.txt* plik zawiera listę plików po parametry połączenia w *Web.config* ustawiać parametry pliku.</span><span class="sxs-lookup"><span data-stu-id="55f11-144">The *PostAutoParameterizationWebConfigConnectionStrings.txt* file contains the list of files after the connection strings in the *Web.config* file have been parameterized.</span></span> <span data-ttu-id="55f11-145">Jest to proces, który pozwala zastąpić parametry połączenia za pomocą odpowiednich ustawień w środowisku docelowym podczas wdrażania pakietu.</span><span class="sxs-lookup"><span data-stu-id="55f11-145">This is the process that lets you replace your connection strings with the right settings for your target environment when you deploy the package.</span></span>
- <span data-ttu-id="55f11-146">*Prepackage.txt* plik zawiera ukończone prekompilacyjne listę plików do uwzględnienia w pakiecie.</span><span class="sxs-lookup"><span data-stu-id="55f11-146">The *Prepackage.txt* file contains the finalized pre-build list of files to be included in the package.</span></span>

> [!NOTE]
> <span data-ttu-id="55f11-147">Nazwy dodatkowe pliki dziennika zwykle odpowiadają WPP elementów docelowych.</span><span class="sxs-lookup"><span data-stu-id="55f11-147">The names of the additional log files typically correspond to WPP targets.</span></span> <span data-ttu-id="55f11-148">Możesz przejrzeć te obiekty docelowe, sprawdzając *Microsoft.Web.Publishing.targets* pliku w folderze % PROGRAMFILES (x 86) %\MSBuild\Microsoft\VisualStudio\v10.0\Web.</span><span class="sxs-lookup"><span data-stu-id="55f11-148">You can review these targets by examining the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span>


<span data-ttu-id="55f11-149">Jeśli zawartość pakietu sieci web nie odpowiadają oczekiwaniom, przeglądania tych plików może być przydatny sposób identyfikacji w momencie w kwestii przetwarzania poszło źle.</span><span class="sxs-lookup"><span data-stu-id="55f11-149">If the contents of your web package aren't what you expected, reviewing these files can be a useful way to identify at what point in the process things went wrong.</span></span>

## <a name="conclusion"></a><span data-ttu-id="55f11-150">Wniosek</span><span class="sxs-lookup"><span data-stu-id="55f11-150">Conclusion</span></span>

<span data-ttu-id="55f11-151">W tym temacie opisano, jak można użyć **EnablePackageProcessLoggingAndAssert** właściwości w programie MSBuild rozwiązywania problemów z procesem tworzenia pakietów.</span><span class="sxs-lookup"><span data-stu-id="55f11-151">This topic described how you can use the **EnablePackageProcessLoggingAndAssert** property in MSBuild to troubleshoot the packaging process.</span></span> <span data-ttu-id="55f11-152">Go opisano różne sposoby, w którym można podać wartości właściwości, aby proces kompilacji i jej opisano dodatkowe informacje, które są rejestrowane, gdy właściwość jest ustawiona **true**.</span><span class="sxs-lookup"><span data-stu-id="55f11-152">It explained the different ways in which you can supply the property value to the build process, and it described the additional information that is recorded when you set the property to **true**.</span></span>

## <a name="further-reading"></a><span data-ttu-id="55f11-153">Dalsze informacje</span><span class="sxs-lookup"><span data-stu-id="55f11-153">Further Reading</span></span>

<span data-ttu-id="55f11-154">Aby uzyskać więcej informacji na temat korzystania z niestandardowych plików projektu MSBuild do kontrolowania procesu wdrażania, zobacz [objaśnienie pliku projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md) i [objaśnienie procesu kompilacji](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="55f11-154">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span> <span data-ttu-id="55f11-155">Aby uzyskać więcej informacji na temat potok WPP i jak zarządza procesem tworzenia pakietów, zobacz [budowanie i projektów aplikacji sieci Web pakietu](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="55f11-155">For more information on the WPP and how it manages the packaging process, see [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span></span> <span data-ttu-id="55f11-156">Aby uzyskać wskazówki, jak wykluczyć określone pliki i foldery z pakiety wdrażania sieci web, zobacz [wykluczanie plików i folderów z wdrożenia](excluding-files-and-folders-from-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="55f11-156">For guidance on how to exclude specific files and folders from web deployment packages, see [Excluding Files and Folders from Deployment](excluding-files-and-folders-from-deployment.md).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="55f11-157">Poprzednie</span><span class="sxs-lookup"><span data-stu-id="55f11-157">Previous</span></span>](running-windows-powershell-scripts-from-msbuild-project-files.md)

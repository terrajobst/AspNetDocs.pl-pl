---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
title: Wdrażanie baz danych członkostwa w środowiskach przedsiębiorstw | Dokumentacja firmy Microsoft
author: jrjlee
description: W tym temacie opisano najważniejsze kwestie związane z i wyzwania, które będą potrzebne do pokonania po zainicjowaniu obsługi administracyjnej baz danych usług aplikacji ASP.NET (częściej stosowana...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 3cf765df-d311-4f68-a295-c9685ceea830
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
msc.type: authoredcontent
ms.openlocfilehash: 307375843c51f31d3d8ae0f2ef0a17a3e58d3a64
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/01/2019
ms.locfileid: "57067070"
---
<a name="deploying-membership-databases-to-enterprise-environments"></a><span data-ttu-id="feb61-103">Wdrażanie baz danych członkostwa w środowiskach przedsiębiorstw</span><span class="sxs-lookup"><span data-stu-id="feb61-103">Deploying Membership Databases to Enterprise Environments</span></span>
====================
<span data-ttu-id="feb61-104">przez [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="feb61-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="feb61-105">Pobierz plik PDF</span><span class="sxs-lookup"><span data-stu-id="feb61-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="feb61-106">W tym temacie opisano najważniejsze kwestie i wyzwania, że będzie potrzebny do pokonania, kiedy aprowizowanie aplikacji ASP.NET usług baz danych (określone częściej baz danych członkostwa) w środowiskach testowych, przejściowych lub produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="feb61-106">This topic explains the key considerations and challenges you'll need to overcome when you provision ASP.NET application services databases (more commonly referred to as membership databases) in test, staging, or production environments.</span></span> <span data-ttu-id="feb61-107">Zawiera również opis metod, których można użyć, aby spełnić te wyzwania.</span><span class="sxs-lookup"><span data-stu-id="feb61-107">It also describes approaches you can use to meet these challenges.</span></span>


<span data-ttu-id="feb61-108">Ten temat jest częścią serii samouczków na podstawie wymagania dotyczące wdrażania enterprise fikcyjnej firmy o nazwie firmy Fabrikam, Inc. Przykładowe rozwiązanie korzysta z tej serii samouczków&#x2014; [rozwiązania Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;do reprezentowania aplikacji sieci web przy użyciu realistycznej stopień złożoności, łącznie z aplikacją ASP.NET MVC 3 komunikacji Windows Usługa Foundation (WCF), a projekt bazy danych.</span><span class="sxs-lookup"><span data-stu-id="feb61-108">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="feb61-109">Metody wdrażania w ramach tego samouczka opiera się na podejście pliku projektu Podziel opisane w [objaśnienie pliku projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md), w którym proces kompilacji jest kontrolowana przez dwa pliki projektu&#x2014;jeden zawierający Tworzenie instrukcji, które mają zastosowanie do każdego środowiska docelowego i jeden zawierający ustawienia specyficzne dla środowiska kompilacji i wdrażania.</span><span class="sxs-lookup"><span data-stu-id="feb61-109">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="feb61-110">W czasie kompilacji pliku projektu specyficznymi dla środowiska jest scalana w pliku projektu niezależnego od środowiska w celu utworzenia kompletny zestaw instrukcji kompilacji.</span><span class="sxs-lookup"><span data-stu-id="feb61-110">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="what-are-the-issues-when-you-deploy-a-membership-database"></a><span data-ttu-id="feb61-111">Co to są problemy podczas wdrażania bazy danych członkostwa?</span><span class="sxs-lookup"><span data-stu-id="feb61-111">What Are the Issues When You Deploy a Membership Database?</span></span>

<span data-ttu-id="feb61-112">W większości przypadków gdy opracowanie strategii wdrażania dla bazy danych, pierwszą rzeczą, jaką należy wziąć pod uwagę jest jakie dane mają zostać wdrożone.</span><span class="sxs-lookup"><span data-stu-id="feb61-112">In most cases, when you devise a deployment strategy for a database, the first thing you need to consider is what data you want to deploy.</span></span> <span data-ttu-id="feb61-113">W środowisku deweloperskim lub testowym można wdrożyć dane konta użytkownika, aby ułatwić szybkie i łatwe testowanie.</span><span class="sxs-lookup"><span data-stu-id="feb61-113">In a development or test environment, you might want to deploy user account data to facilitate quick and easy testing.</span></span> <span data-ttu-id="feb61-114">W środowisku tymczasowym czy produkcyjnym jest bardzo mało prawdopodobne, że chcesz wdrożyć danych konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="feb61-114">In a staging or production environment, it's very unlikely that you'd want to deploy user account data.</span></span>

<span data-ttu-id="feb61-115">Niestety baz danych członkostwa ASP.NET wprowadzenie niektórych określonych wyzwania, które podjęciu tej decyzji o wiele bardziej złożonych:</span><span class="sxs-lookup"><span data-stu-id="feb61-115">Unfortunately, ASP.NET membership databases introduce some specific challenges that make this decision a lot more complex:</span></span>

- <span data-ttu-id="feb61-116">Wdrożenie tylko schematy spowoduje pozostawienie bazy danych członkostwa w działającym stanie.</span><span class="sxs-lookup"><span data-stu-id="feb61-116">A schema-only deployment will leave the membership database in a non-operational state.</span></span> <span data-ttu-id="feb61-117">Jest to spowodowane członkowskiej bazie danych zawiera dane konfiguracyjne (w **aspnet\_SchemaVersions** tabeli), bazy danych wymaga, aby funkcjonować.</span><span class="sxs-lookup"><span data-stu-id="feb61-117">This is because the membership database includes some configuration data (in the **aspnet\_SchemaVersions** table) that the database requires in order to function.</span></span> <span data-ttu-id="feb61-118">W efekcie wykonujesz wdrożenie tylko do schematu bazy danych członkostwa w celu wykluczenia dane konto użytkownika, należy uruchomić skrypt po wdrożeniu, aby dodać dane konfiguracji programu essential.</span><span class="sxs-lookup"><span data-stu-id="feb61-118">As such, if you perform a schema-only deployment of your membership database in order to exclude user account data, you'll need to run a post-deployment script to add the essential configuration data.</span></span>
- <span data-ttu-id="feb61-119">W zależności od sposobu skonfigurowania bazy danych członkostwa dostawcy członkostwa może używać klucza komputera w celu szyfrowania haseł i przechowywać je w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="feb61-119">Depending on how your membership database is configured, the membership provider may use the machine key to encrypt passwords and store them in the database.</span></span> <span data-ttu-id="feb61-120">W tym przypadku danych z konta użytkownika, wdrożone z bazą danych staje się bezużyteczny na serwerze docelowym.</span><span class="sxs-lookup"><span data-stu-id="feb61-120">In this case, any user account data you deploy with the database will become unusable on the destination server.</span></span> <span data-ttu-id="feb61-121">Z tego powodu wdrażania danych konta użytkownika nie jest obsługiwanym scenariuszem.</span><span class="sxs-lookup"><span data-stu-id="feb61-121">For this reason, deploying user account data is not a supported scenario.</span></span>

## <a name="choosing-a-membership-database-strategy"></a><span data-ttu-id="feb61-122">Wybieranie strategii bazy danych członkostwa</span><span class="sxs-lookup"><span data-stu-id="feb61-122">Choosing a Membership Database Strategy</span></span>

<span data-ttu-id="feb61-123">W przypadku wybrania, jak wykonać aprowizację bazy danych członkostwa w środowisku przedsiębiorstwa serwera, użyj następujących wytycznych:</span><span class="sxs-lookup"><span data-stu-id="feb61-123">Use these guidelines when you choose how to provision a membership database in an enterprise server environment:</span></span>

- <span data-ttu-id="feb61-124">Wszędzie tam, gdzie to możliwe, nie należy wdrażać baz danych członkostwa.</span><span class="sxs-lookup"><span data-stu-id="feb61-124">Wherever possible, do not deploy membership databases.</span></span> <span data-ttu-id="feb61-125">Zamiast tego należy utworzyć bazy danych członkostwa ręcznie na docelowym serwerze bazy danych.</span><span class="sxs-lookup"><span data-stu-id="feb61-125">Instead, create the membership database manually on the target database server.</span></span> <span data-ttu-id="feb61-126">Jeśli nie zostały dostosowane schemat bazy danych członkostwa, możesz po prostu utworzyć nowe konto na miejscu na docelowym przy użyciu [narzędzia rejestracji serwera SQL platformy ASP.NET (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="feb61-126">If you haven't customized your membership database schema, you can simply create a new one in situ at the destination using the [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span></span>
- <span data-ttu-id="feb61-127">Jeśli nie jest dostępna opcja, ale aby wdrożyć bazę danych członkostwa&#x2014;na przykład, jeśli wprowadzono rozległych modyfikacji schematu bazy danych jest&#x2014;powinien wykonać wdrożenie tylko do schematu bazy danych członkostwa do wykluczenia dane konto użytkownika, a następnie Uruchom skrypt po wdrożeniu, aby dodać wszelkie dane konfiguracyjne wymagane.</span><span class="sxs-lookup"><span data-stu-id="feb61-127">If you have no option but to deploy a membership database&#x2014;for example, if you've made extensive modifications to the database schema&#x2014;you should perform a schema-only deployment of the membership database, to exclude user account data, and then run a post-deployment script to add any required configuration data.</span></span> <span data-ttu-id="feb61-128">Szeroka wskazówki można znaleźć w tych metod w [jak: Wdrażanie bazy danych członkostwa ASP.NET, bez uwzględniania kont użytkowników](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="feb61-128">You can find broad guidance on these approaches in [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span></span>

<span data-ttu-id="feb61-129">Należy pamiętać, że *schematu członkowskiej bazie danych prawdopodobnie może być stosunkowo statycznych*.</span><span class="sxs-lookup"><span data-stu-id="feb61-129">It's important to remember that *the schema of your membership database is likely to be fairly static*.</span></span> <span data-ttu-id="feb61-130">Nawet jeśli dostosowano bazy danych członkostwa jest mało prawdopodobne, że musisz zaktualizować schemat w regularnych odstępach czasu&#x2014;nie będzie można zmienić za pomocą taką samą częstotliwością, jak kod w aplikacji sieci web lub projektu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="feb61-130">Even if you've customized the membership database, it's unlikely that you'll need to update the schema on a regular basis&#x2014;it's not going to change with the same frequency as the code in a web application or a database project.</span></span> <span data-ttu-id="feb61-131">Jako takie nie należy dołączyć wszystkie procesy zautomatyzowane lub pojedynczy krok wdrażania bazy danych członkostwa.</span><span class="sxs-lookup"><span data-stu-id="feb61-131">As such, you shouldn't need to include the membership database in any automated or single-step deployment processes.</span></span>

## <a name="using-vsdbcmd-to-update-a-membership-database-schema"></a><span data-ttu-id="feb61-132">Aktualizowanie schematu bazy danych członkostwa przy użyciu VSDBCMD</span><span class="sxs-lookup"><span data-stu-id="feb61-132">Using VSDBCMD to Update a Membership Database Schema</span></span>

<span data-ttu-id="feb61-133">Jeśli zmodyfikujesz struktury bazy danych członkostwa po wdrożeniu pierwszego może nie chcieć użyć narzędzia wdrażania usług Internet Information Services (IIS) w sieci Web (Web Deploy) do ponownego wdrożenia bazy danych.</span><span class="sxs-lookup"><span data-stu-id="feb61-133">If you modify the structure of your membership database after your first deployment, you may not want to use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to redeploy the database.</span></span> <span data-ttu-id="feb61-134">Funkcja wdrażania bazy danych w narzędzia Web Deploy nie obejmuje możliwości, aby wprowadzić aktualizacje różnicowych docelowej bazy danych&#x2014;zamiast tego narzędzia Web Deploy należy porzucić i ponownie utworzyć bazy danych.</span><span class="sxs-lookup"><span data-stu-id="feb61-134">The database deployment functionality in Web Deploy doesn't include the capability to make differential updates to a destination database&#x2014;instead, Web Deploy must drop and re-create the database.</span></span> <span data-ttu-id="feb61-135">Oznacza to, że tracisz istniejących danych konta użytkownika, który jest zazwyczaj niepożądanych w środowiskach przejściowych lub produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="feb61-135">This means that you lose any existing user account data, which is typically undesirable in staging or production environments.</span></span>

<span data-ttu-id="feb61-136">Alternatywą jest użycie narzędzia VSDBCMD do zaktualizowania schematu docelowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="feb61-136">The alternative is to use the VSDBCMD utility to update the schema of your destination database.</span></span> <span data-ttu-id="feb61-137">VSDBCMD obejmuje dwie ważne funkcje.</span><span class="sxs-lookup"><span data-stu-id="feb61-137">VSDBCMD includes two important capabilities.</span></span> <span data-ttu-id="feb61-138">Po pierwsze można było zaimportować schematu istniejącą bazę danych do pliku .dbschema.</span><span class="sxs-lookup"><span data-stu-id="feb61-138">First, it can import the schema of an existing database into a .dbschema file.</span></span> <span data-ttu-id="feb61-139">Po drugie jego można wdrożyć pliku .dbschema istniejącą bazę danych jako różnicowej aktualizację, co oznacza, że wykonuje tylko zmiany potrzebne do docelowej bazy danych na bieżąco, a nie utracić wszystkie dane.</span><span class="sxs-lookup"><span data-stu-id="feb61-139">Second, it can deploy a .dbschema file to an existing database as a differential update, which means that it only makes the changes required to bring the target database up to date and you don't lose any data.</span></span>

<span data-ttu-id="feb61-140">Następujące ogólne kroki można użyć do zaktualizowania schematu bazy danych członkostwa:</span><span class="sxs-lookup"><span data-stu-id="feb61-140">You can use these high-level steps to update a membership database schema:</span></span>

1. <span data-ttu-id="feb61-141">Użyj VSDBCMD **importu** akcji, aby wygenerować plik .dbschema dla źródłowej bazy danych członkostwa.</span><span class="sxs-lookup"><span data-stu-id="feb61-141">Use the VSDBCMD **Import** action to generate a .dbschema file for your source membership database.</span></span> <span data-ttu-id="feb61-142">Ta procedura jest opisana w [jak: Importowanie schematu w wierszu polecenia](https://msdn.microsoft.com/library/dd172135.aspx).</span><span class="sxs-lookup"><span data-stu-id="feb61-142">This procedure is described in [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/library/dd172135.aspx).</span></span>
2. <span data-ttu-id="feb61-143">Użyj VSDBCMD **Wdróż** akcji, aby wdrożyć plik .dbschema do docelowej bazy danych członkostwa.</span><span class="sxs-lookup"><span data-stu-id="feb61-143">Use the VSDBCMD **Deploy** action to deploy the .dbschema file to your destination membership database.</span></span> <span data-ttu-id="feb61-144">Ta procedura jest opisana w [VSDBCMD dokumentacja wiersza polecenia. Plik EXE (wdrożenia i importowanie schematu)](https://msdn.microsoft.com/library/dd193283.aspx).</span><span class="sxs-lookup"><span data-stu-id="feb61-144">This procedure is described in [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="feb61-145">Wniosek</span><span class="sxs-lookup"><span data-stu-id="feb61-145">Conclusion</span></span>

<span data-ttu-id="feb61-146">W tym temacie opisano niektóre wyzwania, które mogą się spodziewać, gdy trzeba aprowizować baz danych członkostwa ASP.NET w różnych środowiskach docelowych.</span><span class="sxs-lookup"><span data-stu-id="feb61-146">This topic described some of the challenges you may face when you need to provision ASP.NET membership databases in various target environments.</span></span> <span data-ttu-id="feb61-147">W szczególności wyjaśnić, dlaczego tylko schematy wdrożenia spowoduje pozostawienie bazy danych członkostwa w działającym stanie i dlaczego wdrażanie danych konta użytkownika nie jest obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="feb61-147">In particular, it explained why schema-only deployments will leave the membership database in a non-operational state and why deploying user account data is not supported.</span></span> <span data-ttu-id="feb61-148">Temat również przedstawione wskazówki na temat sposobu obsługi administracyjnej, wdrażanie i aktualizowanie baz danych członkostwa w różnych scenariuszach.</span><span class="sxs-lookup"><span data-stu-id="feb61-148">The topic also presented guidance on how to provision, deploy, and update membership databases in different scenarios.</span></span>

## <a name="further-reading"></a><span data-ttu-id="feb61-149">Dalsze informacje</span><span class="sxs-lookup"><span data-stu-id="feb61-149">Further Reading</span></span>

<span data-ttu-id="feb61-150">Aby uzyskać więcej wskazówki i przykłady dotyczące używania VSDBCMD, zobacz [VSDBCMD dokumentacja wiersza polecenia. Plik EXE (wdrożenia i importowanie schematu)](https://msdn.microsoft.com/library/dd193283.aspx) i [jak: Importowanie schematu w wierszu polecenia](https://msdn.microsoft.com/library/dd172135.aspx).</span><span class="sxs-lookup"><span data-stu-id="feb61-150">For more guidance and examples of how to use VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) and [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/library/dd172135.aspx).</span></span> <span data-ttu-id="feb61-151">Aby uzyskać więcej informacji na temat korzystania z aspnet\_regsql.exe do tworzenia baz danych członkostwa, zobacz [narzędzia rejestracji serwera SQL platformy ASP.NET (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="feb61-151">For more information on using aspnet\_regsql.exe to create membership databases, see [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span></span> <span data-ttu-id="feb61-152">Aby uzyskać bardziej ogólne wskazówki na temat wdrażania baz danych członkostwa, zobacz [jak: Wdrażanie bazy danych członkostwa ASP.NET, bez uwzględniania kont użytkowników](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="feb61-152">For more general guidance on deploying membership databases, see [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="feb61-153">[Poprzednie](deploying-database-role-memberships-to-test-environments.md)
> [dalej](excluding-files-and-folders-from-deployment.md)</span><span class="sxs-lookup"><span data-stu-id="feb61-153">[Previous](deploying-database-role-memberships-to-test-environments.md)
[Next](excluding-files-and-folders-from-deployment.md)</span></span>

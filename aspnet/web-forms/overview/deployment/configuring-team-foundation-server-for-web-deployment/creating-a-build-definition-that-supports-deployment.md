---
uid: web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
title: Tworzenie definicji kompilacji, który obsługuje wdrażanie | Dokumentacja firmy Microsoft
author: jrjlee
description: Jeśli chcesz wykonywać dowolny rodzaj kompilacji w Team Foundation Server (TFS) 2010, należy utworzyć definicję kompilacji w projekcie zespołowym. Ten temat des...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: fe47a018-f6d0-4979-80e7-5b1fa75a5865
msc.legacyurl: /web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
msc.type: authoredcontent
ms.openlocfilehash: 97a60274d9306ea0ee332fcc1ab9e487355dbedb
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/17/2019
ms.locfileid: "59384945"
---
# <a name="creating-a-build-definition-that-supports-deployment"></a><span data-ttu-id="3aea8-104">Tworzenie definicji kompilacji, która obsługuje wdrożenie</span><span class="sxs-lookup"><span data-stu-id="3aea8-104">Creating a Build Definition That Supports Deployment</span></span>

<span data-ttu-id="3aea8-105">przez [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="3aea8-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="3aea8-106">Pobierz plik PDF</span><span class="sxs-lookup"><span data-stu-id="3aea8-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="3aea8-107">Jeśli chcesz wykonywać dowolny rodzaj kompilacji w Team Foundation Server (TFS) 2010, należy utworzyć definicję kompilacji w projekcie zespołowym.</span><span class="sxs-lookup"><span data-stu-id="3aea8-107">If you want to perform any kind of build in Team Foundation Server (TFS) 2010, you need to create a build definition within your team project.</span></span> <span data-ttu-id="3aea8-108">W tym temacie opisano sposób tworzenia nowej definicji kompilacji w programie TFS i sposobie kontrolowania wdrażania w Internecie jako część procesu kompilacji w kompilacji zespołu.</span><span class="sxs-lookup"><span data-stu-id="3aea8-108">This topic describes how to create a new build definition in TFS and how to control web deployment as part of the build process in Team Build.</span></span>


<span data-ttu-id="3aea8-109">Ten temat jest częścią serii samouczków na podstawie wymagania dotyczące wdrażania enterprise fikcyjnej firmy o nazwie firmy Fabrikam, Inc. Przykładowe rozwiązanie korzysta z tej serii samouczków&#x2014; [rozwiązania Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;do reprezentowania aplikacji sieci web przy użyciu realistycznej stopień złożoności, łącznie z aplikacją ASP.NET MVC 3 komunikacji Windows Usługa Foundation (WCF), a projekt bazy danych.</span><span class="sxs-lookup"><span data-stu-id="3aea8-109">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="3aea8-110">Metody wdrażania w ramach tego samouczka opiera się na podejście pliku projektu Podziel opisane w [objaśnienie pliku projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md), w której procesu kompilacji i wdrażania jest kontrolowany przez dwa pliki projektu&#x2014;jeden zawierającej instrukcje kompilacji, które mają zastosowanie do każdego środowiska docelowego i jeden zawierający ustawienia specyficzne dla środowiska kompilacji i wdrażania.</span><span class="sxs-lookup"><span data-stu-id="3aea8-110">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build and deployment process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="3aea8-111">W czasie kompilacji pliku projektu specyficznymi dla środowiska jest scalana w pliku projektu niezależnego od środowiska w celu utworzenia kompletny zestaw instrukcji kompilacji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-111">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="3aea8-112">Omówienie zadań</span><span class="sxs-lookup"><span data-stu-id="3aea8-112">Task Overview</span></span>

<span data-ttu-id="3aea8-113">Definicja kompilacji jest mechanizm, który kontroluje, jak i kiedy kompilacje miejsce w przypadku projektów zespołowych w programie TFS.</span><span class="sxs-lookup"><span data-stu-id="3aea8-113">A build definition is the mechanism that controls how and when builds occur for team projects in TFS.</span></span> <span data-ttu-id="3aea8-114">Określa Każda definicja kompilacji:</span><span class="sxs-lookup"><span data-stu-id="3aea8-114">Each build definition specifies:</span></span>

- <span data-ttu-id="3aea8-115">Czynności, które chcesz skompilować, takich jak pliki rozwiązania programu Visual Studio lub niestandardowe pliki projektu aparatu Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="3aea8-115">The things you want to build, like Visual Studio solution files or custom Microsoft Build Engine (MSBuild) project files.</span></span>
- <span data-ttu-id="3aea8-116">Kryteria określające, gdy kompilacja powinno zająć miejsce, takich jak wyzwalacze ręczne, ciągłej integracji (CI) lub warunkowych zaewidencjonowań.</span><span class="sxs-lookup"><span data-stu-id="3aea8-116">The criteria that determine when a build should take place, like manual triggers, continuous integration (CI), or gated check-ins.</span></span>
- <span data-ttu-id="3aea8-117">Lokalizacja, do którego Team Build powinien wysyłać dane wyjściowe kompilacji, w tym artefaktów wdrożenia, takie jak pakiety programu web i skrypty bazy danych.</span><span class="sxs-lookup"><span data-stu-id="3aea8-117">The location to which Team Build should send build outputs, including deployment artifacts like web packages and database scripts.</span></span>
- <span data-ttu-id="3aea8-118">Ilość czasu, który ma być przechowywana każdej kompilacji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-118">The amount of time that each build should be retained.</span></span>
- <span data-ttu-id="3aea8-119">Różne inne parametry procesu kompilacji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-119">Various other parameters of the build process.</span></span>

> [!NOTE]
> <span data-ttu-id="3aea8-120">Aby uzyskać więcej informacji na temat definicji kompilacji, zobacz [zdefiniować proces kompilacji](https://msdn.microsoft.com/library/ms181715.aspx).</span><span class="sxs-lookup"><span data-stu-id="3aea8-120">For more information on build definitions, see [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span>


<span data-ttu-id="3aea8-121">W tym temacie pokazano sposób tworzenia definicji kompilacji, który używa ciągłej integracji, tak aby kompilacja zostaje wyzwolona, gdy deweloper wprowadza nową zawartość.</span><span class="sxs-lookup"><span data-stu-id="3aea8-121">This topic will show you how to create a build definition that uses CI, so that a build is triggered when a developer checks in new content.</span></span> <span data-ttu-id="3aea8-122">Jeśli kompilacja zakończy się powodzeniem, usługa kompilacji jest uruchamiany pliku niestandardowego projektu, aby wdrożyć to rozwiązanie w środowisku testowym.</span><span class="sxs-lookup"><span data-stu-id="3aea8-122">If the build succeeds, the build service runs a custom project file to deploy the solution to a test environment.</span></span>

<span data-ttu-id="3aea8-123">Po wyzwoleniu kompilacji, działania te należy wykonać:</span><span class="sxs-lookup"><span data-stu-id="3aea8-123">When you trigger a build, these actions need to happen:</span></span>

- <span data-ttu-id="3aea8-124">Team Build należy najpierw skompilować rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="3aea8-124">First, Team Build should build the solution.</span></span> <span data-ttu-id="3aea8-125">W ramach tego procesu Team Build wywoła Web Publishing potoku (WPP) do generowania pakietów wdrażania sieci web dla wszystkich projektów aplikacji sieci web w rozwiązaniu.</span><span class="sxs-lookup"><span data-stu-id="3aea8-125">As part of this process, Team Build will invoke the Web Publishing Pipeline (WPP) to generate web deployment packages for each of the web application projects in the solution.</span></span> <span data-ttu-id="3aea8-126">Team Build będzie również uruchomić wszystkie testy jednostkowe skojarzonego z rozwiązaniem.</span><span class="sxs-lookup"><span data-stu-id="3aea8-126">Team Build will also run any unit tests associated with the solution.</span></span>
- <span data-ttu-id="3aea8-127">Jeśli kompilacja rozwiązania kończy się niepowodzeniem, Team Build powinien wykonywać żadnych dalszych czynności.</span><span class="sxs-lookup"><span data-stu-id="3aea8-127">If the solution build fails, Team Build should take no further action.</span></span> <span data-ttu-id="3aea8-128">Niepowodzenie testów jednostkowych powinny być traktowane jako niepowodzenie kompilacji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-128">Unit test failures should be treated as a build failure.</span></span>
- <span data-ttu-id="3aea8-129">Kompilacja rozwiązania kończy się powodzeniem, Team Build powinien uruchamiać pliku niestandardowego projektu, który kontroluje wdrażania rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="3aea8-129">If the solution build succeeds, Team Build should run the custom project file that controls the deployment of the solution.</span></span> <span data-ttu-id="3aea8-130">W ramach tego procesu Team Build wywoła narzędzie Internet Information Services (IIS) Web Deployment (Web Deploy), instalacja aplikacji spakowane w sieci web na serwerach docelowych w sieci web i będzie go wywoływać uruchamianie tworzenia bazy danych za pomocą narzędzia VSDBCMD.exe skrypty na serwerach docelowych w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="3aea8-130">As part of this process, Team Build will invoke the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to install the packaged web applications on the destination web servers, and it will invoke the VSDBCMD.exe utility to run database creation scripts on the destination database servers.</span></span>

<span data-ttu-id="3aea8-131">Obrazuje to proces:</span><span class="sxs-lookup"><span data-stu-id="3aea8-131">This illustrates the process:</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image1.png)

<span data-ttu-id="3aea8-132">[Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) przykładowe rozwiązanie zawiera niestandardowy plik projektu MSBuild *Publish.proj*, którą można uruchomić z programu MSBuild lub Team Build.</span><span class="sxs-lookup"><span data-stu-id="3aea8-132">The [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution includes a custom MSBuild project file, *Publish.proj*, that you can run from MSBuild or Team Build.</span></span> <span data-ttu-id="3aea8-133">Zgodnie z opisem w [objaśnienie procesu kompilacji](../web-deployment-in-the-enterprise/understanding-the-build-process.md), ten plik projektu zdefiniowana logika, która wdraża swoich pakietów sieci web i baz danych w środowisku docelowym.</span><span class="sxs-lookup"><span data-stu-id="3aea8-133">As described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), this project file defines the logic that deploys your web packages and databases to a target environment.</span></span> <span data-ttu-id="3aea8-134">Plik zawiera logikę, które pomija budynku i proces pakowania, jeśli działa on w programie Team Build, pozostawiając tylko zadania wdrażania do uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="3aea8-134">The file includes logic that omits the building and packaging process if it's running in Team Build, leaving just the deployment tasks to run.</span></span> <span data-ttu-id="3aea8-135">To jest, ponieważ podczas automatyzacji wdrażania w ten sposób zwykle należy upewnić się, że rozwiązanie zostanie skompilowane pomyślnie i przekazuje wszystkie testy jednostkowe, przed rozpoczęciem procesu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="3aea8-135">This is because when you automate deployment in this way, you'll typically want to ensure that the solution builds successfully and passes any unit tests before the deployment process commences.</span></span>

<span data-ttu-id="3aea8-136">Następnej sekcji opisano sposób wykonania tego procesu, tworząc nową definicję kompilacji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-136">The next section explains how to implement this process by creating a new build definition.</span></span>

> [!NOTE]
> <span data-ttu-id="3aea8-137">Ta procedura&#x2014;w której automatycznego jednego procesu kompilacji, testów i wdraża to rozwiązanie&#x2014;może być najbardziej nadaje się do wdrożenia do środowisk testowych.</span><span class="sxs-lookup"><span data-stu-id="3aea8-137">This procedure&#x2014;in which a single automated process builds, tests, and deploys a solution&#x2014;is likely to be most suited to deployment to test environments.</span></span> <span data-ttu-id="3aea8-138">W przypadku środowisk przemieszczania i produkcji możesz znacznie bardziej prawdopodobne, aby wdrożyć zawartość z poprzedniej kompilacji, która została już zweryfikowana i sprawdzone w środowisku testowym.</span><span class="sxs-lookup"><span data-stu-id="3aea8-138">For staging and production environments you're a lot more likely to want to deploy content from a previous build that you've already verified and validated in a test environment.</span></span> <span data-ttu-id="3aea8-139">Takie podejście jest opisane w następnym temacie [wdrażanie określonej kompilacji](deploying-a-specific-build.md).</span><span class="sxs-lookup"><span data-stu-id="3aea8-139">This approach is described in the next topic, [Deploying a Specific Build](deploying-a-specific-build.md).</span></span>


### <a name="who-performs-this-procedure"></a><span data-ttu-id="3aea8-140">Ta procedura osób wykonujących?</span><span class="sxs-lookup"><span data-stu-id="3aea8-140">Who Performs This Procedure?</span></span>

<span data-ttu-id="3aea8-141">Zazwyczaj administratora TFS wykonuje tę procedurę.</span><span class="sxs-lookup"><span data-stu-id="3aea8-141">Typically, a TFS administrator performs this procedure.</span></span> <span data-ttu-id="3aea8-142">W niektórych przypadkach lider zespołu deweloperów może potrwać odpowiedzialności dla kolekcji projektów zespołowych w programie TFS.</span><span class="sxs-lookup"><span data-stu-id="3aea8-142">In some cases, a developer team leader may take responsibility for the team project collection in TFS.</span></span> <span data-ttu-id="3aea8-143">Aby utworzyć nową definicję kompilacji, musisz być członkiem **Administratorzy kompilacji kolekcji projektów** grupy dla kolekcji projektu zespołowego, który zawiera rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="3aea8-143">In order to create a new build definition, you need to be a member of the **Project Collection Build Administrators** group for the team project collection that contains your solution.</span></span>

## <a name="create-a-build-definition-for-ci-and-deployment"></a><span data-ttu-id="3aea8-144">Utwórz definicję kompilacji ciągłej integracji i wdrażania</span><span class="sxs-lookup"><span data-stu-id="3aea8-144">Create a Build Definition for CI and Deployment</span></span>

<span data-ttu-id="3aea8-145">Następna procedura zawiera opis sposobu tworzenia definicji kompilacji, która wyzwala ciągłej integracji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-145">The next procedure describes how to create a build definition that CI triggers.</span></span> <span data-ttu-id="3aea8-146">Jeśli kompilacja zakończy się powodzeniem, rozwiązanie będzie wdrożone przy użyciu logiki w niestandardowy plik projektu programu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="3aea8-146">If the build succeeds, the solution is deployed using the logic in a custom MSBuild project file.</span></span>

<span data-ttu-id="3aea8-147">**Aby utworzyć definicję kompilacji ciągłej integracji i wdrażania**</span><span class="sxs-lookup"><span data-stu-id="3aea8-147">**To create a build definition for CI and deployment**</span></span>

1. <span data-ttu-id="3aea8-148">W programie Visual Studio 2010 w **Team Explorer** oknie rozwinięciu węzła projektu zespołu, kliknij prawym przyciskiem myszy **kompilacje**, a następnie kliknij przycisk **Nowa definicja kompilacji**.</span><span class="sxs-lookup"><span data-stu-id="3aea8-148">In Visual Studio 2010, in the **Team Explorer** window, expand your team project node, right-click **Builds**, and then click **New Build Definition**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image2.png)
2. <span data-ttu-id="3aea8-149">Na **ogólne** kartę, nadaj nazwę definicji kompilacji (na przykład **DeployToTest**) i opcjonalny opis.</span><span class="sxs-lookup"><span data-stu-id="3aea8-149">On the **General** tab, give the build definition a name (for example, **DeployToTest**) and an optional description.</span></span>
3. <span data-ttu-id="3aea8-150">Na **wyzwalacza** , a następnie wybierz kryteria, na których chcesz Wyzwalaj nową kompilację.</span><span class="sxs-lookup"><span data-stu-id="3aea8-150">On the **Trigger** tab, select the criteria on which you want to trigger a new build.</span></span> <span data-ttu-id="3aea8-151">Na przykład, jeśli chcesz skompilować rozwiązanie i wdrażania do środowiska testowego, za każdym razem, gdy programista zaewidencjonuje nowy kod, wybierz **ciągłej integracji**.</span><span class="sxs-lookup"><span data-stu-id="3aea8-151">For example, if you want to build the solution and deploy to the test environment every time a developer checks in new code, select **Continuous Integration**.</span></span>
4. <span data-ttu-id="3aea8-152">Na **ustawienia domyślne kompilacji** na karcie **Kopiuj dane wyjściowe kompilacji do następującego folderu docelowego** wpisz ścieżkę Universal Naming Convention (UNC) folderu wrzucania (na przykład  **\\TFSBUILD\Drops**).</span><span class="sxs-lookup"><span data-stu-id="3aea8-152">On the **Build Defaults** tab, in the **Copy build output to the following drop folder** box, type the Universal Naming Convention (UNC) path of your drop folder (for example, **\\TFSBUILD\Drops**).</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image3.png)

    > [!NOTE]
    > <span data-ttu-id="3aea8-153">Kilka kompilacji, w zależności od skonfigurowanych zasad przechowywania są przechowywane w tej lokalizacji docelowej.</span><span class="sxs-lookup"><span data-stu-id="3aea8-153">This drop location stores several builds, depending on the retention policy you configure.</span></span> <span data-ttu-id="3aea8-154">Jeśli chcesz opublikować artefakty wdrażania z kompilacji w określonym w tymczasowym lub produkcyjnym środowisku, to której można je znaleźć.</span><span class="sxs-lookup"><span data-stu-id="3aea8-154">When you want to publish deployment artifacts from a specific build to a staging or production environment, this is where you'll find them.</span></span>
5. <span data-ttu-id="3aea8-155">Na **procesu** na karcie **plik procesu kompilacji** listy rozwijanej, pozostaw **DefaultTemplate.xaml** wybrane.</span><span class="sxs-lookup"><span data-stu-id="3aea8-155">On the **Process** tab, in the **Build process file** dropdown list, leave **DefaultTemplate.xaml** selected.</span></span> <span data-ttu-id="3aea8-156">Jest to jeden z domyślnych szablonów procesów kompilacji, które poproś o dodanie Cię do wszystkich nowych projektów zespołowych.</span><span class="sxs-lookup"><span data-stu-id="3aea8-156">This is one of the default build process templates that get added to all new team projects.</span></span>
6. <span data-ttu-id="3aea8-157">W **parametrów procesu kompilacji** tabelę, kliknij opcję w **elementy do kompilacji** wiersza, a następnie kliknij przycisk **wielokropka** przycisku.</span><span class="sxs-lookup"><span data-stu-id="3aea8-157">In the **Build process parameters** table, click in the **Items to Build** row, and then click the **ellipsis** button.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image4.png)
7. <span data-ttu-id="3aea8-158">W **elementy do kompilacji** okno dialogowe, kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="3aea8-158">In the **Items to Build** dialog box, click **Add**.</span></span>
8. <span data-ttu-id="3aea8-159">Przejdź do lokalizacji pliku rozwiązania, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="3aea8-159">Browse to the location of your solution file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image5.png)
9. <span data-ttu-id="3aea8-160">W **elementy do kompilacji** okno dialogowe, kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="3aea8-160">In the **Items to Build** dialog box, click **Add**.</span></span>
10. <span data-ttu-id="3aea8-161">W **elementów typu** listy rozwijanej wybierz **pliki projektu MSBuild**.</span><span class="sxs-lookup"><span data-stu-id="3aea8-161">In the **Items of type** dropdown list, select **MSBuild Project files**.</span></span>
11. <span data-ttu-id="3aea8-162">Przejdź do lokalizacji pliku niestandardowego projektu za pomocą którego możesz kontrolować proces wdrażania, wybierz plik, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="3aea8-162">Browse to the location of the custom project file with which you control the deployment process, select the file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image6.png)
12. <span data-ttu-id="3aea8-163">**Elementy do kompilacji** okno dialogowe powinna zostać wyświetlona dwa elementy.</span><span class="sxs-lookup"><span data-stu-id="3aea8-163">The **Items to Build** dialog box should now show two items.</span></span> <span data-ttu-id="3aea8-164">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="3aea8-164">Click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image7.png)
13. <span data-ttu-id="3aea8-165">Na **procesu** na karcie **parametrów procesu kompilacji** tabeli, a następnie rozwiń **zaawansowane** sekcji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-165">On the **Process** tab, in the **Build process parameters** table, expand the **Advanced** section.</span></span>
14. <span data-ttu-id="3aea8-166">W **argumenty MSBuild** wierszy, dodawać żadnych argumentów wiersza polecenia programu MSBuild, *albo* wymaga elementów do kompilacji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-166">In the **MSBuild Arguments** row, add any MSBuild command-line arguments that *either* of your items to build requires.</span></span> <span data-ttu-id="3aea8-167">W tym scenariuszu rozwiązania Contact Manager wymagane są następujące argumenty:</span><span class="sxs-lookup"><span data-stu-id="3aea8-167">In the Contact Manager solution scenario, these arguments are required:</span></span>

    [!code-console[Main](creating-a-build-definition-that-supports-deployment/samples/sample1.cmd)]

    ![](creating-a-build-definition-that-supports-deployment/_static/image8.png)
15. <span data-ttu-id="3aea8-168">W tym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="3aea8-168">In this example:</span></span>

    1. <span data-ttu-id="3aea8-169">**DeployOnBuild = true** i **DeployTarget = pakiet** argumenty są wymagane w przypadku, gdy tworzysz rozwiązanie Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="3aea8-169">The **DeployOnBuild=true** and **DeployTarget=package** arguments are required when you build the Contact Manager solution.</span></span> <span data-ttu-id="3aea8-170">To powoduje, że program MSBuild, aby utworzyć pakiety wdrażania sieci web po utworzeniu każdego projektu aplikacji sieci web zgodnie z opisem w [budowanie i projektów aplikacji sieci Web pakietu](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="3aea8-170">This instructs MSBuild to create web deployment packages after building each web application project, as described in [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span></span>
    2. <span data-ttu-id="3aea8-171">**TargetEnvPropsFile** argument jest wymagany, gdy tworzysz *Publish.proj* pliku.</span><span class="sxs-lookup"><span data-stu-id="3aea8-171">The **TargetEnvPropsFile** argument is required when you build the *Publish.proj* file.</span></span> <span data-ttu-id="3aea8-172">Ta właściwość wskazuje lokalizację pliku konfiguracji specyficznych dla środowiska, zgodnie z opisem w [objaśnienie procesu kompilacji](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="3aea8-172">This property indicates the location of the environment-specific configuration file, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>
16. <span data-ttu-id="3aea8-173">Na **zasady przechowywania** skonfiguruj, jak wiele kompilacji dla każdego typu, aby zachować zgodnie z potrzebami.</span><span class="sxs-lookup"><span data-stu-id="3aea8-173">On the **Retention Policy** tab, configure how many builds of each type you want to retain as required.</span></span>
17. <span data-ttu-id="3aea8-174">Kliknij pozycję **Zapisz**.</span><span class="sxs-lookup"><span data-stu-id="3aea8-174">Click **Save**.</span></span>

## <a name="queue-a-build"></a><span data-ttu-id="3aea8-175">Kolejkowanie kompilacji</span><span class="sxs-lookup"><span data-stu-id="3aea8-175">Queue a Build</span></span>

<span data-ttu-id="3aea8-176">Na tym etapie utworzono przynajmniej jedną nową definicję kompilacji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-176">At this point, you have created at least one new build definition.</span></span> <span data-ttu-id="3aea8-177">Proces kompilacji, który zdefiniowano teraz zostanie uruchomiona zgodnie z wyzwalaczy, które określiłeś w definicji kompilacji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-177">The build process you defined will now run according to the triggers you specified in the build definition.</span></span>

<span data-ttu-id="3aea8-178">Jeśli skonfigurowano definicję kompilacji, aby użyć elementu konfiguracji, możesz sprawdzić swoją definicję kompilacji, na dwa sposoby:</span><span class="sxs-lookup"><span data-stu-id="3aea8-178">If you've configured your build definition to use CI, you can test your build definition in two ways:</span></span>

- <span data-ttu-id="3aea8-179">Zaewidencjonuj część zawartości do projektu zespołowego w celu wyzwolenia automatycznych kompilacji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-179">Check in some content to the team project to trigger an automatic build.</span></span>
- <span data-ttu-id="3aea8-180">Ręcznie Kolejkowanie kompilacji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-180">Queue a build manually.</span></span>

<span data-ttu-id="3aea8-181">**Aby ręcznie zakolejkować kompilację**</span><span class="sxs-lookup"><span data-stu-id="3aea8-181">**To queue a build manually**</span></span>

1. <span data-ttu-id="3aea8-182">W **Team Explorer** okna, kliknij prawym przyciskiem myszy definicji kompilacji, a następnie kliknij przycisk **Zakolejkuj nową kompilację**.</span><span class="sxs-lookup"><span data-stu-id="3aea8-182">In the **Team Explorer** window, right-click the build definition, and then click **Queue New Build**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image9.png)
2. <span data-ttu-id="3aea8-183">W **Zakolejkuj kompilację** okno dialogowe, sprawdź właściwości kompilacji, a następnie kliknij **kolejki**.</span><span class="sxs-lookup"><span data-stu-id="3aea8-183">In the **Queue Build** dialog box, review the build properties, and then click **Queue**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image10.png)

<span data-ttu-id="3aea8-184">Aby przejrzeć postęp i wyniki kompilacji&#x2014;niezależnie od tego, czy zostało wyzwolone ręcznie lub automatycznie&#x2014;kliknij dwukrotnie definicję kompilacji w **Team Explorer** okna.</span><span class="sxs-lookup"><span data-stu-id="3aea8-184">To review the progress and the outcome of a build&#x2014;regardless of whether it was triggered manually or automatically&#x2014;double-click the build definition in the **Team Explorer** window.</span></span> <span data-ttu-id="3aea8-185">Spowoduje to otwarcie **Build Explorer** kartę.</span><span class="sxs-lookup"><span data-stu-id="3aea8-185">This will open a **Build Explorer** tab.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image11.png)

<span data-ttu-id="3aea8-186">W tym miejscu można rozwiązywać niepowodzenia kompilacji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-186">From here, you can troubleshoot failed builds.</span></span> <span data-ttu-id="3aea8-187">Dwukrotne kliknięcie jednej z kompilacji można wyświetlić podsumowanie i kliknij, aby szczegółowe pliki dzienników.</span><span class="sxs-lookup"><span data-stu-id="3aea8-187">If you double-click an individual build, you can view summary information and click through to detailed log files.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image12.png)

<span data-ttu-id="3aea8-188">Rozwiązywanie problemów z kompilacji nie powiodło się i rozwiązać wszelkie problemy, przed podjęciem próby innej kompilacji, można użyć tych informacji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-188">You can use this information to troubleshoot failed builds and address any problems before you attempt another build.</span></span>

> [!NOTE]
> <span data-ttu-id="3aea8-189">Kompilacje, które są wykonywane logiki wdrożenia prawdopodobnie może zakończyć się niepowodzeniem, dopóki serwer kompilacji udzielono wszystkie uprawnienia wymagane w środowisku docelowym.</span><span class="sxs-lookup"><span data-stu-id="3aea8-189">Builds that execute deployment logic are likely to fail until you have granted the build server any permissions required in the destination environment.</span></span> <span data-ttu-id="3aea8-190">Aby uzyskać więcej informacji, zobacz [Konfigurowanie uprawnień dla wdrożenia kompilacji zespołu](configuring-permissions-for-team-build-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="3aea8-190">For more information, see [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md).</span></span>


## <a name="monitor-the-build-process"></a><span data-ttu-id="3aea8-191">Monitorowanie procesu kompilacji</span><span class="sxs-lookup"><span data-stu-id="3aea8-191">Monitor the Build Process</span></span>

<span data-ttu-id="3aea8-192">TFS udostępnia szeroki zakres funkcji, które ułatwiają monitorowanie procesu kompilacji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-192">TFS provides a broad range of functionality to help you monitor the build process.</span></span> <span data-ttu-id="3aea8-193">Na przykład TFS można wysyłać wiadomości e-mail lub wyświetlić alerty w obszarze powiadomień paska zadań po zakończeniu kompilacji.</span><span class="sxs-lookup"><span data-stu-id="3aea8-193">For example, TFS can send you an email or display alerts in your taskbar notification area when a build has completed.</span></span> <span data-ttu-id="3aea8-194">Aby uzyskać więcej informacji, zobacz [uruchamiania i monitorowanie kompilacji](https://msdn.microsoft.com/library/ms181721.aspx).</span><span class="sxs-lookup"><span data-stu-id="3aea8-194">For more information, see [Run and Monitor Builds](https://msdn.microsoft.com/library/ms181721.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="3aea8-195">Wniosek</span><span class="sxs-lookup"><span data-stu-id="3aea8-195">Conclusion</span></span>

<span data-ttu-id="3aea8-196">W tym temacie opisano sposób tworzenia definicji kompilacji w programie TFS.</span><span class="sxs-lookup"><span data-stu-id="3aea8-196">This topic described how to create a build definition in TFS.</span></span> <span data-ttu-id="3aea8-197">Definicja kompilacji jest skonfigurowana do ciągłej integracji, aby proces kompilacji jest uruchamiany w każdym przypadku, gdy programista zaewidencjonuje zawartości do projektu zespołowego.</span><span class="sxs-lookup"><span data-stu-id="3aea8-197">The build definition is configured for CI, so the build process runs whenever a developer checks in content to the team project.</span></span> <span data-ttu-id="3aea8-198">Definicja kompilacji wykonuje niestandardowego pliku projektu MSBuild do wdrażania pakietów sieci web i skrypty bazy danych do środowiska serwera docelowego.</span><span class="sxs-lookup"><span data-stu-id="3aea8-198">The build definition executes a custom MSBuild project file to deploy web packages and database scripts to a target server environment.</span></span>

<span data-ttu-id="3aea8-199">Aby automatycznego wdrażania została wykonana pomyślnie, jako część procesu kompilacji należy przyznać odpowiednie uprawnienia do konta usługi kompilacji na serwerach sieci web docelowego i docelowy serwer bazy danych.</span><span class="sxs-lookup"><span data-stu-id="3aea8-199">In order for an automated deployment to succeed as part of a build process, you'll need to grant appropriate permissions to the build service account on the target web servers and the target database server.</span></span> <span data-ttu-id="3aea8-200">Ostatnim temacie w tym samouczku [Konfigurowanie uprawnień dla wdrożenia kompilacji zespołu](configuring-permissions-for-team-build-deployment.md), w tym artykule opisano sposób identyfikowania i konfigurowania uprawnień wymaganych do automatycznego wdrażania z serwera Team Build.</span><span class="sxs-lookup"><span data-stu-id="3aea8-200">The final topic in this tutorial, [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md), describes how to identify and configure the permissions required for automated deployment from a Team Build server.</span></span>

## <a name="further-reading"></a><span data-ttu-id="3aea8-201">Dalsze informacje</span><span class="sxs-lookup"><span data-stu-id="3aea8-201">Further Reading</span></span>

<span data-ttu-id="3aea8-202">Aby uzyskać więcej informacji na temat tworzenia definicji kompilacji, zobacz [tworzenie Basic Build Definition](https://msdn.microsoft.com/library/ms181716.aspx) i [zdefiniować proces kompilacji](https://msdn.microsoft.com/library/ms181715.aspx).</span><span class="sxs-lookup"><span data-stu-id="3aea8-202">For more information on creating build definitions, see [Create a Basic Build Definition](https://msdn.microsoft.com/library/ms181716.aspx) and [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span> <span data-ttu-id="3aea8-203">Aby uzyskać więcej wskazówek dotyczących kolejkowania kompilacji, zobacz [kolejkować kompilację](https://msdn.microsoft.com/library/ms181722.aspx).</span><span class="sxs-lookup"><span data-stu-id="3aea8-203">For more guidance on queuing builds, see [Queue a Build](https://msdn.microsoft.com/library/ms181722.aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="3aea8-204">[Poprzednie](configuring-a-tfs-build-server-for-web-deployment.md)
> [dalej](deploying-a-specific-build.md)</span><span class="sxs-lookup"><span data-stu-id="3aea8-204">[Previous](configuring-a-tfs-build-server-for-web-deployment.md)
[Next](deploying-a-specific-build.md)</span></span>

---
uid: web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
title: Tworzenie definicji kompilacji, która obsługuje wdrożenie | Microsoft Docs
author: jrjlee
description: Jeśli chcesz wykonać dowolny rodzaj kompilacji w Team Foundation Server (TFS) 2010, musisz utworzyć definicję kompilacji w projekcie zespołowym. Ten temat des...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: fe47a018-f6d0-4979-80e7-5b1fa75a5865
msc.legacyurl: /web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
msc.type: authoredcontent
ms.openlocfilehash: e11c91a824446572aaf0b3bc6954b9b8ffb4eaff
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78604000"
---
# <a name="creating-a-build-definition-that-supports-deployment"></a><span data-ttu-id="90ed4-104">Tworzenie definicji kompilacji, która obsługuje wdrożenie</span><span class="sxs-lookup"><span data-stu-id="90ed4-104">Creating a Build Definition That Supports Deployment</span></span>

<span data-ttu-id="90ed4-105">Autor [Jason Lewandowski](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="90ed4-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="90ed4-106">Pobierz plik PDF</span><span class="sxs-lookup"><span data-stu-id="90ed4-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="90ed4-107">Jeśli chcesz wykonać dowolny rodzaj kompilacji w Team Foundation Server (TFS) 2010, musisz utworzyć definicję kompilacji w projekcie zespołowym.</span><span class="sxs-lookup"><span data-stu-id="90ed4-107">If you want to perform any kind of build in Team Foundation Server (TFS) 2010, you need to create a build definition within your team project.</span></span> <span data-ttu-id="90ed4-108">W tym temacie opisano sposób tworzenia nowej definicji kompilacji w programie TFS oraz kontrolowania wdrożenia sieci Web w ramach procesu kompilacji w kompilacji zespołu.</span><span class="sxs-lookup"><span data-stu-id="90ed4-108">This topic describes how to create a new build definition in TFS and how to control web deployment as part of the build process in Team Build.</span></span>

<span data-ttu-id="90ed4-109">Ten temat stanowi część szeregu samouczków opartych na wymaganiach dotyczących wdrażania w przedsiębiorstwie fikcyjnej firmy o nazwie Fabrikam, Inc. W tej serii samouczków jest stosowane&#x2014;przykładowe rozwiązanie&#x2014;do reprezentowania aplikacji sieci Web, [które ma](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)realistyczny poziom złożoności, w tym aplikacji ASP.NET MVC 3, usługi Windows Communication Foundation (WCF) i projektu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="90ed4-109">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="90ed4-110">Metoda wdrażania w tym samouczku jest oparta na rozłożeniu pliku projektu dzielonego opisanym w artykule [Omówienie pliku projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md), w którym proces kompilacji i wdrożenia jest kontrolowany przez dwa pliki&#x2014;projektu, zawierający instrukcje kompilacji, które mają zastosowanie do każdego środowiska docelowego, oraz jeden zawierający ustawienia kompilacji i wdrożenia specyficznego dla środowiska.</span><span class="sxs-lookup"><span data-stu-id="90ed4-110">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build and deployment process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="90ed4-111">W czasie kompilacji plik projektu specyficzny dla środowiska jest scalany z plikiem projektu Environment-niezależny od w celu utworzenia kompletnego zestawu instrukcji kompilacji.</span><span class="sxs-lookup"><span data-stu-id="90ed4-111">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="90ed4-112">Przegląd zadania</span><span class="sxs-lookup"><span data-stu-id="90ed4-112">Task Overview</span></span>

<span data-ttu-id="90ed4-113">Definicja kompilacji jest mechanizmem, który kontroluje, jak i kiedy powstają kompilacje dla projektów zespołowych w programie TFS.</span><span class="sxs-lookup"><span data-stu-id="90ed4-113">A build definition is the mechanism that controls how and when builds occur for team projects in TFS.</span></span> <span data-ttu-id="90ed4-114">Każda definicja kompilacji określa:</span><span class="sxs-lookup"><span data-stu-id="90ed4-114">Each build definition specifies:</span></span>

- <span data-ttu-id="90ed4-115">Elementy, które chcesz skompilować, takie jak pliki rozwiązania programu Visual Studio lub pliki projektu niestandardowego Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="90ed4-115">The things you want to build, like Visual Studio solution files or custom Microsoft Build Engine (MSBuild) project files.</span></span>
- <span data-ttu-id="90ed4-116">Kryteria, które określają, kiedy należy wykonać kompilację, takie jak wyzwalacze ręczne, ciągła integracja (CI) lub ewidencjonowanie warunkowe.</span><span class="sxs-lookup"><span data-stu-id="90ed4-116">The criteria that determine when a build should take place, like manual triggers, continuous integration (CI), or gated check-ins.</span></span>
- <span data-ttu-id="90ed4-117">Lokalizacja, do której Kompilacja zespołu powinna wysyłać dane wyjściowe kompilacji, w tym artefakty wdrożenia, takie jak pakiety sieci Web i skrypty baz danych.</span><span class="sxs-lookup"><span data-stu-id="90ed4-117">The location to which Team Build should send build outputs, including deployment artifacts like web packages and database scripts.</span></span>
- <span data-ttu-id="90ed4-118">Czas, przez który każda kompilacja powinna zostać zachowana.</span><span class="sxs-lookup"><span data-stu-id="90ed4-118">The amount of time that each build should be retained.</span></span>
- <span data-ttu-id="90ed4-119">Różne inne parametry procesu kompilacji.</span><span class="sxs-lookup"><span data-stu-id="90ed4-119">Various other parameters of the build process.</span></span>

> [!NOTE]
> <span data-ttu-id="90ed4-120">Aby uzyskać więcej informacji na temat definicji kompilacji, zobacz [Definiowanie procesu kompilacji](https://msdn.microsoft.com/library/ms181715.aspx).</span><span class="sxs-lookup"><span data-stu-id="90ed4-120">For more information on build definitions, see [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span>

<span data-ttu-id="90ed4-121">W tym temacie pokazano, jak utworzyć definicję kompilacji korzystającą z elementu CI, aby kompilacja była wyzwalana, gdy deweloper sprawdzi nową zawartość.</span><span class="sxs-lookup"><span data-stu-id="90ed4-121">This topic will show you how to create a build definition that uses CI, so that a build is triggered when a developer checks in new content.</span></span> <span data-ttu-id="90ed4-122">Jeśli kompilacja zakończy się powodzeniem, usługa kompilacji uruchamia niestandardowy plik projektu w celu wdrożenia rozwiązania w środowisku testowym.</span><span class="sxs-lookup"><span data-stu-id="90ed4-122">If the build succeeds, the build service runs a custom project file to deploy the solution to a test environment.</span></span>

<span data-ttu-id="90ed4-123">W przypadku wyzwolenia kompilacji muszą wystąpić następujące akcje:</span><span class="sxs-lookup"><span data-stu-id="90ed4-123">When you trigger a build, these actions need to happen:</span></span>

- <span data-ttu-id="90ed4-124">Najpierw Kompilacja zespołu powinna kompilować rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="90ed4-124">First, Team Build should build the solution.</span></span> <span data-ttu-id="90ed4-125">W ramach tego procesu Kompilacja zespołu wywoła potok publikowania w sieci Web (WPP) w celu generowania pakietów wdrażania sieci Web dla każdego projektu aplikacji sieci Web w rozwiązaniu.</span><span class="sxs-lookup"><span data-stu-id="90ed4-125">As part of this process, Team Build will invoke the Web Publishing Pipeline (WPP) to generate web deployment packages for each of the web application projects in the solution.</span></span> <span data-ttu-id="90ed4-126">Kompilacja zespołu uruchomi również wszystkie testy jednostkowe skojarzone z rozwiązaniem.</span><span class="sxs-lookup"><span data-stu-id="90ed4-126">Team Build will also run any unit tests associated with the solution.</span></span>
- <span data-ttu-id="90ed4-127">Jeśli kompilacja rozwiązania nie powiedzie się, Kompilacja zespołu nie powinna podejmować dalszych działań.</span><span class="sxs-lookup"><span data-stu-id="90ed4-127">If the solution build fails, Team Build should take no further action.</span></span> <span data-ttu-id="90ed4-128">Niepowodzenia testów jednostkowych powinny być traktowane jako niepowodzenie kompilacji.</span><span class="sxs-lookup"><span data-stu-id="90ed4-128">Unit test failures should be treated as a build failure.</span></span>
- <span data-ttu-id="90ed4-129">Jeśli kompilacja rozwiązania powiodła się, Kompilacja zespołu powinna uruchomić niestandardowy plik projektu, który kontroluje wdrożenie rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="90ed4-129">If the solution build succeeds, Team Build should run the custom project file that controls the deployment of the solution.</span></span> <span data-ttu-id="90ed4-130">W ramach tego procesu Kompilacja zespołu wywoła narzędzie Web Deployment (Web Deploy) Internet Information Services (IIS), aby zainstalować spakowane aplikacje sieci Web na docelowych serwerach sieci Web i wywoływać narzędzie VSDBCMD. exe w celu uruchomienia tworzenia bazy danych skrypty na docelowych serwerach baz danych.</span><span class="sxs-lookup"><span data-stu-id="90ed4-130">As part of this process, Team Build will invoke the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to install the packaged web applications on the destination web servers, and it will invoke the VSDBCMD.exe utility to run database creation scripts on the destination database servers.</span></span>

<span data-ttu-id="90ed4-131">Ilustruje to proces:</span><span class="sxs-lookup"><span data-stu-id="90ed4-131">This illustrates the process:</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image1.png)

<span data-ttu-id="90ed4-132">Przykładowe rozwiązanie [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) obejmuje plik niestandardowego projektu programu MSBuild, *Publish. proj*, który można uruchomić z poziomu programu MSBuild lub kompilacji zespołowej.</span><span class="sxs-lookup"><span data-stu-id="90ed4-132">The [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution includes a custom MSBuild project file, *Publish.proj*, that you can run from MSBuild or Team Build.</span></span> <span data-ttu-id="90ed4-133">Zgodnie z opisem w temacie [proces kompilacji](../web-deployment-in-the-enterprise/understanding-the-build-process.md)ten plik projektu definiuje logikę, która wdraża pakiety i bazy danych sieci Web w środowisku docelowym.</span><span class="sxs-lookup"><span data-stu-id="90ed4-133">As described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), this project file defines the logic that deploys your web packages and databases to a target environment.</span></span> <span data-ttu-id="90ed4-134">Plik zawiera logikę, która pomija proces kompilowania i tworzenia pakietów, jeśli jest uruchomiony w kompilacji zespołowej, pozostawiając tylko zadania wdrażania do uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="90ed4-134">The file includes logic that omits the building and packaging process if it's running in Team Build, leaving just the deployment tasks to run.</span></span> <span data-ttu-id="90ed4-135">Jest to spowodowane tym, że w przypadku automatyzowania wdrażania w ten sposób zwykle warto upewnić się, że rozwiązanie zostanie pomyślnie skompilowane i przejdzie wszystkie testy jednostkowe przed rozpoczęciem procesu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="90ed4-135">This is because when you automate deployment in this way, you'll typically want to ensure that the solution builds successfully and passes any unit tests before the deployment process commences.</span></span>

<span data-ttu-id="90ed4-136">W następnej sekcji wyjaśniono, jak zaimplementować ten proces, tworząc nową definicję kompilacji.</span><span class="sxs-lookup"><span data-stu-id="90ed4-136">The next section explains how to implement this process by creating a new build definition.</span></span>

> [!NOTE]
> <span data-ttu-id="90ed4-137">Ta procedura&#x2014;, w której pojedynczy zautomatyzowany proces kompiluje, testuje i wdraża rozwiązanie&#x2014;, prawdopodobnie najlepiej nadaje się do wdrożenia w środowiskach testowych.</span><span class="sxs-lookup"><span data-stu-id="90ed4-137">This procedure&#x2014;in which a single automated process builds, tests, and deploys a solution&#x2014;is likely to be most suited to deployment to test environments.</span></span> <span data-ttu-id="90ed4-138">W przypadku środowisk przejściowych i produkcyjnych znacznie bardziej zajdzie potrzeba wdrożenia zawartości z poprzedniej kompilacji, która została już zweryfikowana i sprawdzona w środowisku testowym.</span><span class="sxs-lookup"><span data-stu-id="90ed4-138">For staging and production environments you're a lot more likely to want to deploy content from a previous build that you've already verified and validated in a test environment.</span></span> <span data-ttu-id="90ed4-139">Ta metoda jest opisana w następnym temacie, który [wdraża konkretną kompilację](deploying-a-specific-build.md).</span><span class="sxs-lookup"><span data-stu-id="90ed4-139">This approach is described in the next topic, [Deploying a Specific Build](deploying-a-specific-build.md).</span></span>

### <a name="who-performs-this-procedure"></a><span data-ttu-id="90ed4-140">Kto wykonuje tę procedurę?</span><span class="sxs-lookup"><span data-stu-id="90ed4-140">Who Performs This Procedure?</span></span>

<span data-ttu-id="90ed4-141">Zazwyczaj ta procedura jest wykonywana przez administratora serwera TFS.</span><span class="sxs-lookup"><span data-stu-id="90ed4-141">Typically, a TFS administrator performs this procedure.</span></span> <span data-ttu-id="90ed4-142">W niektórych przypadkach lider zespołu deweloperów może podjąć odpowiedzialność za kolekcję projektu zespołowego w programie TFS.</span><span class="sxs-lookup"><span data-stu-id="90ed4-142">In some cases, a developer team leader may take responsibility for the team project collection in TFS.</span></span> <span data-ttu-id="90ed4-143">Aby utworzyć nową definicję kompilacji, musisz być członkiem grupy **administratorzy kompilacji kolekcji projektów** dla kolekcji projektów zespołowych, która zawiera Twoje rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="90ed4-143">In order to create a new build definition, you need to be a member of the **Project Collection Build Administrators** group for the team project collection that contains your solution.</span></span>

## <a name="create-a-build-definition-for-ci-and-deployment"></a><span data-ttu-id="90ed4-144">Tworzenie definicji kompilacji dla elementu konfiguracji i wdrożenia</span><span class="sxs-lookup"><span data-stu-id="90ed4-144">Create a Build Definition for CI and Deployment</span></span>

<span data-ttu-id="90ed4-145">W następnej procedurze opisano sposób tworzenia definicji kompilacji, która jest wyzwalana przez wyzwalacze konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="90ed4-145">The next procedure describes how to create a build definition that CI triggers.</span></span> <span data-ttu-id="90ed4-146">Jeśli kompilacja zakończy się pomyślnie, rozwiązanie zostanie wdrożone przy użyciu logiki w niestandardowym pliku projektu programu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="90ed4-146">If the build succeeds, the solution is deployed using the logic in a custom MSBuild project file.</span></span>

<span data-ttu-id="90ed4-147">**Aby utworzyć definicję kompilacji dla CI i wdrożenia**</span><span class="sxs-lookup"><span data-stu-id="90ed4-147">**To create a build definition for CI and deployment**</span></span>

1. <span data-ttu-id="90ed4-148">W programie Visual Studio 2010, w oknie **Team Explorer** rozwiń węzeł projektu zespołowego, kliknij prawym przyciskiem myszy pozycję **kompilacje**, a następnie kliknij pozycję **Nowa definicja kompilacji**.</span><span class="sxs-lookup"><span data-stu-id="90ed4-148">In Visual Studio 2010, in the **Team Explorer** window, expand your team project node, right-click **Builds**, and then click **New Build Definition**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image2.png)
2. <span data-ttu-id="90ed4-149">Na karcie **Ogólne** nadaj definicji kompilacji nazwę (na przykład **DeployToTest**) i opcjonalny opis.</span><span class="sxs-lookup"><span data-stu-id="90ed4-149">On the **General** tab, give the build definition a name (for example, **DeployToTest**) and an optional description.</span></span>
3. <span data-ttu-id="90ed4-150">Na karcie **wyzwalacz** Wybierz kryteria, dla których chcesz wyzwolić nową kompilację.</span><span class="sxs-lookup"><span data-stu-id="90ed4-150">On the **Trigger** tab, select the criteria on which you want to trigger a new build.</span></span> <span data-ttu-id="90ed4-151">Jeśli na przykład chcesz skompilować rozwiązanie i wdrożyć je do środowiska testowego za każdym razem, gdy deweloper sprawdzi nowy kod, wybierz pozycję **ciągła integracja**.</span><span class="sxs-lookup"><span data-stu-id="90ed4-151">For example, if you want to build the solution and deploy to the test environment every time a developer checks in new code, select **Continuous Integration**.</span></span>
4. <span data-ttu-id="90ed4-152">Na karcie **Ustawienia domyślne kompilacji** w polu **Kopiuj dane wyjściowe kompilacji do poniższego folderu drop** wpisz ścieżkę Universal Naming Convention (UNC) folderu docelowego (na przykład **\\TFSBUILD\Drops**).</span><span class="sxs-lookup"><span data-stu-id="90ed4-152">On the **Build Defaults** tab, in the **Copy build output to the following drop folder** box, type the Universal Naming Convention (UNC) path of your drop folder (for example, **\\TFSBUILD\Drops**).</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image3.png)

    > [!NOTE]
    > <span data-ttu-id="90ed4-153">Ta lokalizacja docelowa przechowuje kilka kompilacji, w zależności od skonfigurowanych zasad przechowywania.</span><span class="sxs-lookup"><span data-stu-id="90ed4-153">This drop location stores several builds, depending on the retention policy you configure.</span></span> <span data-ttu-id="90ed4-154">Jeśli chcesz opublikować artefakty wdrożenia z określonej kompilacji w środowisku przejściowym lub produkcyjnym, możesz je znaleźć.</span><span class="sxs-lookup"><span data-stu-id="90ed4-154">When you want to publish deployment artifacts from a specific build to a staging or production environment, this is where you'll find them.</span></span>
5. <span data-ttu-id="90ed4-155">Na karcie **proces** na liście rozwijanej **plik procesu kompilacji** pozostaw wybraną opcję **DefaultTemplate. XAML** .</span><span class="sxs-lookup"><span data-stu-id="90ed4-155">On the **Process** tab, in the **Build process file** dropdown list, leave **DefaultTemplate.xaml** selected.</span></span> <span data-ttu-id="90ed4-156">Jest to jeden z domyślnych szablonów procesu kompilacji, które zostaną dodane do wszystkich nowych projektów zespołowych.</span><span class="sxs-lookup"><span data-stu-id="90ed4-156">This is one of the default build process templates that get added to all new team projects.</span></span>
6. <span data-ttu-id="90ed4-157">W tabeli **parametry procesu kompilacji** kliknij w wierszu **elementy do skompilowania** , a następnie kliknij przycisk **wielokropka** .</span><span class="sxs-lookup"><span data-stu-id="90ed4-157">In the **Build process parameters** table, click in the **Items to Build** row, and then click the **ellipsis** button.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image4.png)
7. <span data-ttu-id="90ed4-158">W oknie dialogowym **elementy do skompilowania** kliknij pozycję **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="90ed4-158">In the **Items to Build** dialog box, click **Add**.</span></span>
8. <span data-ttu-id="90ed4-159">Przejdź do lokalizacji pliku rozwiązania, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="90ed4-159">Browse to the location of your solution file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image5.png)
9. <span data-ttu-id="90ed4-160">W oknie dialogowym **elementy do skompilowania** kliknij pozycję **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="90ed4-160">In the **Items to Build** dialog box, click **Add**.</span></span>
10. <span data-ttu-id="90ed4-161">Z listy rozwijanej **elementy typu** wybierz pozycję **pliki projektu programu MSBuild**.</span><span class="sxs-lookup"><span data-stu-id="90ed4-161">In the **Items of type** dropdown list, select **MSBuild Project files**.</span></span>
11. <span data-ttu-id="90ed4-162">Przejdź do lokalizacji niestandardowego pliku projektu, za pomocą którego kontrolujesz proces wdrażania, wybierz plik, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="90ed4-162">Browse to the location of the custom project file with which you control the deployment process, select the file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image6.png)
12. <span data-ttu-id="90ed4-163">Okno dialogowe **elementy do skompilowania** powinno teraz pokazać dwa elementy.</span><span class="sxs-lookup"><span data-stu-id="90ed4-163">The **Items to Build** dialog box should now show two items.</span></span> <span data-ttu-id="90ed4-164">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="90ed4-164">Click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image7.png)
13. <span data-ttu-id="90ed4-165">Na karcie **proces** w tabeli **parametry procesu kompilacji** rozwiń sekcję **Zaawansowane** .</span><span class="sxs-lookup"><span data-stu-id="90ed4-165">On the **Process** tab, in the **Build process parameters** table, expand the **Advanced** section.</span></span>
14. <span data-ttu-id="90ed4-166">W wierszu **argumenty programu MSBuild** Dodaj dowolne argumenty wiersza polecenia programu MSBuild, które są wymagane przez *każdy* z elementów do skompilowania.</span><span class="sxs-lookup"><span data-stu-id="90ed4-166">In the **MSBuild Arguments** row, add any MSBuild command-line arguments that *either* of your items to build requires.</span></span> <span data-ttu-id="90ed4-167">W scenariuszu rozwiązania Contact Manager wymagane są następujące argumenty:</span><span class="sxs-lookup"><span data-stu-id="90ed4-167">In the Contact Manager solution scenario, these arguments are required:</span></span>

    [!code-console[Main](creating-a-build-definition-that-supports-deployment/samples/sample1.cmd)]

    ![](creating-a-build-definition-that-supports-deployment/_static/image8.png)
15. <span data-ttu-id="90ed4-168">W tym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="90ed4-168">In this example:</span></span>

    1. <span data-ttu-id="90ed4-169">Argumenty **DeployOnBuild = true** i **DeployTarget = Package** są wymagane podczas tworzenia rozwiązania Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="90ed4-169">The **DeployOnBuild=true** and **DeployTarget=package** arguments are required when you build the Contact Manager solution.</span></span> <span data-ttu-id="90ed4-170">Powoduje to utworzenie przez program MSBuild pakietów wdrażania sieci Web po skompilowaniu każdego projektu aplikacji sieci Web, zgodnie z opisem w temacie [Tworzenie i pakowanie projektów aplikacji sieci Web](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="90ed4-170">This instructs MSBuild to create web deployment packages after building each web application project, as described in [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span></span>
    2. <span data-ttu-id="90ed4-171">Argument **TargetEnvPropsFile** jest wymagany podczas kompilowania pliku *Publish. proj* .</span><span class="sxs-lookup"><span data-stu-id="90ed4-171">The **TargetEnvPropsFile** argument is required when you build the *Publish.proj* file.</span></span> <span data-ttu-id="90ed4-172">Ta właściwość wskazuje lokalizację pliku konfiguracji specyficznego dla środowiska, zgodnie z opisem w temacie [Opis procesu kompilacji](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="90ed4-172">This property indicates the location of the environment-specific configuration file, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>
16. <span data-ttu-id="90ed4-173">Na karcie **zasady przechowywania** Skonfiguruj liczbę kompilacji poszczególnych typów, które mają być zachowane zgodnie z potrzebami.</span><span class="sxs-lookup"><span data-stu-id="90ed4-173">On the **Retention Policy** tab, configure how many builds of each type you want to retain as required.</span></span>
17. <span data-ttu-id="90ed4-174">Kliknij przycisk **Save** (Zapisz).</span><span class="sxs-lookup"><span data-stu-id="90ed4-174">Click **Save**.</span></span>

## <a name="queue-a-build"></a><span data-ttu-id="90ed4-175">Kolejkowanie kompilacji</span><span class="sxs-lookup"><span data-stu-id="90ed4-175">Queue a Build</span></span>

<span data-ttu-id="90ed4-176">W tym momencie utworzono co najmniej jedną nową definicję kompilacji.</span><span class="sxs-lookup"><span data-stu-id="90ed4-176">At this point, you have created at least one new build definition.</span></span> <span data-ttu-id="90ed4-177">Zdefiniowany przez użytkownika proces kompilacji będzie teraz uruchamiany zgodnie z wyzwalaczami określonymi w definicji kompilacji.</span><span class="sxs-lookup"><span data-stu-id="90ed4-177">The build process you defined will now run according to the triggers you specified in the build definition.</span></span>

<span data-ttu-id="90ed4-178">Jeśli definicja kompilacji została skonfigurowana tak, aby korzystała z CI, można testować definicję kompilacji na dwa sposoby:</span><span class="sxs-lookup"><span data-stu-id="90ed4-178">If you've configured your build definition to use CI, you can test your build definition in two ways:</span></span>

- <span data-ttu-id="90ed4-179">Zaewidencjonuj część zawartości w projekcie zespołowym, aby wyzwolić automatyczną kompilację.</span><span class="sxs-lookup"><span data-stu-id="90ed4-179">Check in some content to the team project to trigger an automatic build.</span></span>
- <span data-ttu-id="90ed4-180">Ręcznie Twórz kompilację do kolejki.</span><span class="sxs-lookup"><span data-stu-id="90ed4-180">Queue a build manually.</span></span>

<span data-ttu-id="90ed4-181">**Aby ręcznie umieścić kompilację w kolejce**</span><span class="sxs-lookup"><span data-stu-id="90ed4-181">**To queue a build manually**</span></span>

1. <span data-ttu-id="90ed4-182">W oknie **Team Explorer** kliknij prawym przyciskiem myszy definicję kompilacji, a następnie kliknij pozycję **kolejka nowa kompilacja**.</span><span class="sxs-lookup"><span data-stu-id="90ed4-182">In the **Team Explorer** window, right-click the build definition, and then click **Queue New Build**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image9.png)
2. <span data-ttu-id="90ed4-183">W oknie dialogowym **kompilacja kolejki** Przejrzyj właściwości kompilacji, a następnie kliknij pozycję **Kolejka**.</span><span class="sxs-lookup"><span data-stu-id="90ed4-183">In the **Queue Build** dialog box, review the build properties, and then click **Queue**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image10.png)

<span data-ttu-id="90ed4-184">Aby sprawdzić postęp i wynik kompilacji&#x2014;, niezależnie od tego, czy została ona wyzwolona ręcznie, czy automatycznie&#x2014;dwukrotnie kliknij definicję kompilacji w oknie **Team Explorer** .</span><span class="sxs-lookup"><span data-stu-id="90ed4-184">To review the progress and the outcome of a build&#x2014;regardless of whether it was triggered manually or automatically&#x2014;double-click the build definition in the **Team Explorer** window.</span></span> <span data-ttu-id="90ed4-185">Spowoduje to otwarcie karty programu **Build Explorer** .</span><span class="sxs-lookup"><span data-stu-id="90ed4-185">This will open a **Build Explorer** tab.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image11.png)

<span data-ttu-id="90ed4-186">W tym miejscu możesz rozwiązywać problemy z kompilacjami zakończonymi niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="90ed4-186">From here, you can troubleshoot failed builds.</span></span> <span data-ttu-id="90ed4-187">W przypadku dwukrotnego kliknięcia pojedynczej kompilacji można wyświetlić informacje podsumowujące i kliknąć pozycję, aby uzyskać szczegółowe pliki dziennika.</span><span class="sxs-lookup"><span data-stu-id="90ed4-187">If you double-click an individual build, you can view summary information and click through to detailed log files.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image12.png)

<span data-ttu-id="90ed4-188">Tych informacji można użyć do rozwiązywania problemów z kompilacjami zakończonymi niepowodzeniem i rozwiązanie wszelkich problemów przed próbą kolejnej kompilacji.</span><span class="sxs-lookup"><span data-stu-id="90ed4-188">You can use this information to troubleshoot failed builds and address any problems before you attempt another build.</span></span>

> [!NOTE]
> <span data-ttu-id="90ed4-189">Kompiluje, że logika wdrożenia wykonawczego może zakończyć się niepowodzeniem do momentu udzielenia serwerowi kompilacji wszelkich uprawnień wymaganych w środowisku docelowym.</span><span class="sxs-lookup"><span data-stu-id="90ed4-189">Builds that execute deployment logic are likely to fail until you have granted the build server any permissions required in the destination environment.</span></span> <span data-ttu-id="90ed4-190">Aby uzyskać więcej informacji, zobacz [Konfigurowanie uprawnień do wdrożenia kompilacji zespołowej](configuring-permissions-for-team-build-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="90ed4-190">For more information, see [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md).</span></span>

## <a name="monitor-the-build-process"></a><span data-ttu-id="90ed4-191">Monitorowanie procesu kompilacji</span><span class="sxs-lookup"><span data-stu-id="90ed4-191">Monitor the Build Process</span></span>

<span data-ttu-id="90ed4-192">TFS oferuje szeroką gamę funkcji, które ułatwiają monitorowanie procesu kompilacji.</span><span class="sxs-lookup"><span data-stu-id="90ed4-192">TFS provides a broad range of functionality to help you monitor the build process.</span></span> <span data-ttu-id="90ed4-193">Na przykład TFS może wysłać wiadomość e-mail lub wyświetlić alerty w obszarze powiadomień paska zadań, gdy kompilacja została ukończona.</span><span class="sxs-lookup"><span data-stu-id="90ed4-193">For example, TFS can send you an email or display alerts in your taskbar notification area when a build has completed.</span></span> <span data-ttu-id="90ed4-194">Aby uzyskać więcej informacji, zobacz [Uruchamianie i monitorowanie kompilacji](https://msdn.microsoft.com/library/ms181721.aspx).</span><span class="sxs-lookup"><span data-stu-id="90ed4-194">For more information, see [Run and Monitor Builds](https://msdn.microsoft.com/library/ms181721.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="90ed4-195">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="90ed4-195">Conclusion</span></span>

<span data-ttu-id="90ed4-196">W tym temacie opisano sposób tworzenia definicji kompilacji w programie TFS.</span><span class="sxs-lookup"><span data-stu-id="90ed4-196">This topic described how to create a build definition in TFS.</span></span> <span data-ttu-id="90ed4-197">Definicja kompilacji jest skonfigurowana dla elementu konfiguracji, więc proces kompilacji jest uruchamiany za każdym razem, gdy deweloper sprawdzi zawartość w projekcie zespołowym.</span><span class="sxs-lookup"><span data-stu-id="90ed4-197">The build definition is configured for CI, so the build process runs whenever a developer checks in content to the team project.</span></span> <span data-ttu-id="90ed4-198">Definicja kompilacji wykonuje niestandardowy plik projektu MSBuild do wdrażania pakietów sieci Web i skryptów bazy danych w środowisku serwera docelowego.</span><span class="sxs-lookup"><span data-stu-id="90ed4-198">The build definition executes a custom MSBuild project file to deploy web packages and database scripts to a target server environment.</span></span>

<span data-ttu-id="90ed4-199">Aby zautomatyzowane wdrożenie powiodło się w ramach procesu kompilacji, należy przyznać odpowiednie uprawnienia do konta usługi kompilacji na docelowych serwerach sieci Web i docelowym serwerze bazy danych.</span><span class="sxs-lookup"><span data-stu-id="90ed4-199">In order for an automated deployment to succeed as part of a build process, you'll need to grant appropriate permissions to the build service account on the target web servers and the target database server.</span></span> <span data-ttu-id="90ed4-200">Ostatni temat w tym samouczku, [Konfigurowanie uprawnień do wdrożenia kompilacji zespołowej](configuring-permissions-for-team-build-deployment.md), opisuje sposób identyfikowania i konfigurowania uprawnień wymaganych do automatycznego wdrażania z serwera kompilacji zespołu.</span><span class="sxs-lookup"><span data-stu-id="90ed4-200">The final topic in this tutorial, [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md), describes how to identify and configure the permissions required for automated deployment from a Team Build server.</span></span>

## <a name="further-reading"></a><span data-ttu-id="90ed4-201">Dalsze informacje</span><span class="sxs-lookup"><span data-stu-id="90ed4-201">Further Reading</span></span>

<span data-ttu-id="90ed4-202">Aby uzyskać więcej informacji na temat tworzenia definicji kompilacji, zobacz [Tworzenie podstawowej definicji kompilacji](https://msdn.microsoft.com/library/ms181716.aspx) i [Definiowanie procesu kompilacji](https://msdn.microsoft.com/library/ms181715.aspx).</span><span class="sxs-lookup"><span data-stu-id="90ed4-202">For more information on creating build definitions, see [Create a Basic Build Definition](https://msdn.microsoft.com/library/ms181716.aspx) and [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span> <span data-ttu-id="90ed4-203">Aby uzyskać więcej wskazówek dotyczących kompilacji w kolejkach, zobacz [Queue a Build](https://msdn.microsoft.com/library/ms181722.aspx).</span><span class="sxs-lookup"><span data-stu-id="90ed4-203">For more guidance on queuing builds, see [Queue a Build](https://msdn.microsoft.com/library/ms181722.aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="90ed4-204">[Poprzednie](configuring-a-tfs-build-server-for-web-deployment.md)
> [dalej](deploying-a-specific-build.md)</span><span class="sxs-lookup"><span data-stu-id="90ed4-204">[Previous](configuring-a-tfs-build-server-for-web-deployment.md)
[Next](deploying-a-specific-build.md)</span></span>

---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
title: Wdrażanie projektów baz danych | Dokumentacja firmy Microsoft
author: jrjlee
description: 'Uwaga: W wielu scenariuszy wdrażania w przedsiębiorstwie niezbędna jest możliwość publikowania aktualizacji przyrostowych wdrożonej bazy danych. Alternatywą jest ponownie utworzyć...'
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 832f226a-1aa3-4093-8c29-ce4196793259
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
msc.type: authoredcontent
ms.openlocfilehash: 43fa197a1d5a3cf521f4d2202754ff0d121cebe3
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/01/2019
ms.locfileid: "57069713"
---
<a name="deploying-database-projects"></a><span data-ttu-id="22179-104">Wdrażanie projektów baz danych</span><span class="sxs-lookup"><span data-stu-id="22179-104">Deploying Database Projects</span></span>
====================
<span data-ttu-id="22179-105">przez [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="22179-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="22179-106">Pobierz plik PDF</span><span class="sxs-lookup"><span data-stu-id="22179-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> [!NOTE]
> <span data-ttu-id="22179-107">W wielu scenariuszy wdrażania w przedsiębiorstwie niezbędna jest możliwość publikowania aktualizacji przyrostowych wdrożonej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-107">In lots of enterprise deployment scenarios, you need the ability to publish incremental updates to a deployed database.</span></span> <span data-ttu-id="22179-108">Alternatywą jest ponownie utworzyć bazę danych przy każdym wdrożeniu, co oznacza, że zostaną utracone dane w istniejącej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="22179-108">The alternative is to recreate the database on every deployment, which means you lose any data in the existing database.</span></span> <span data-ttu-id="22179-109">Podczas pracy w programie Visual Studio 2010 przy użyciu VSDBCMD jest zalecane podejście do przyrostowe publikowanie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-109">When you work with Visual Studio 2010, using VSDBCMD is the recommended approach to incremental database publishing.</span></span> <span data-ttu-id="22179-110">Jednak w następnej wersji programu Visual Studio i Web potok publikowania (WPP) będzie zawierać narzędzia, które obsługuje przyrostowe publikowanie bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="22179-110">However, the next version of Visual Studio and the Web Publishing Pipeline (WPP) will include tooling that supports incremental publishing directly.</span></span>


<span data-ttu-id="22179-111">Jeśli otworzysz przykładowe rozwiązanie Contact Manager w programie Visual Studio 2010, zobaczysz, że projekt bazy danych zawiera folder właściwości, który zawiera cztery pliki.</span><span class="sxs-lookup"><span data-stu-id="22179-111">If you open the Contact Manager sample solution in Visual Studio 2010, you'll see that the database project includes a Properties folder that contains four files.</span></span>

![](deploying-database-projects/_static/image1.png)

<span data-ttu-id="22179-112">Wraz z pliku projektu (*ContactManager.Database.dbproj* w tym przypadku), te pliki kontrolować różne aspekty procesu kompilacji i wdrażania:</span><span class="sxs-lookup"><span data-stu-id="22179-112">Together with the project file (*ContactManager.Database.dbproj* in this case), these files control various aspects of the build and deployment process:</span></span>

- <span data-ttu-id="22179-113">*Database.sqlcmdvars* plik zawiera wartości wszelkich zmiennych SQLCMD, możesz użyć podczas wdrażania projektu.</span><span class="sxs-lookup"><span data-stu-id="22179-113">The *Database.sqlcmdvars* file provides values for any SQLCMD variables you use when you deploy the project.</span></span> <span data-ttu-id="22179-114">Każda konfiguracja rozwiązania (na przykład debug i release) można określić plik .sqlcmdvars różne.</span><span class="sxs-lookup"><span data-stu-id="22179-114">Each solution configuration (for example, debug and release) can specify a different .sqlcmdvars file.</span></span>
- <span data-ttu-id="22179-115">*Database.sqldeployment* plik zawiera ustawienia specyficzne dla danego wdrożenia, takie jak czy do korzystania z sortowania zdefiniowane w projekcie ani typu sortowania serwera docelowego, czy należy ponownie utworzyć docelowej bazy danych co czasu lub po prostu zmienić istniejącą bazę danych, aby przełączyć go do daty i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="22179-115">The *Database.sqldeployment* file provides deployment-specific settings, like whether to use the collation defined in your project or the collation of the destination server, whether to recreate the destination database every time or simply amend the existing database to bring it up to date, and so on.</span></span> <span data-ttu-id="22179-116">Każda konfiguracja rozwiązania można określić plik .sqldeployment różne.</span><span class="sxs-lookup"><span data-stu-id="22179-116">Each solution configuration can specify a different .sqldeployment file.</span></span>
- <span data-ttu-id="22179-117">*Database.sqlpermissions* plik jest dokument XML, który służy do definiowania wszelkich uprawnień, które chcesz dodać do docelowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-117">The *Database.sqlpermissions* file is an XML document that you can use to define any permissions you want to add to the target database.</span></span> <span data-ttu-id="22179-118">Wszystkie konfiguracje rozwiązania współużytkować ten sam plik .sqlpermissions.</span><span class="sxs-lookup"><span data-stu-id="22179-118">All solution configurations share the same .sqlpermissions file.</span></span>
- <span data-ttu-id="22179-119">*Database.sqlsettings* plik Określa właściwości poziomu bazy danych do użycia podczas tworzenia bazy danych, takich jak sortowaniem, aby użyć zachowanie operatorów porównania i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="22179-119">The *Database.sqlsettings* file specifies the database-level properties to use when creating the database, like the collation to use, the behavior of comparison operators, and so on.</span></span> <span data-ttu-id="22179-120">Wszystkie konfiguracje rozwiązania współużytkować ten sam plik .sqlsettings.</span><span class="sxs-lookup"><span data-stu-id="22179-120">All solution configurations share the same .sqlsettings file.</span></span>

<span data-ttu-id="22179-121">Warto poświęcić trochę czasu na pliki te można otworzyć w programie Visual Studio i zapoznać się z zawartością.</span><span class="sxs-lookup"><span data-stu-id="22179-121">It's worth taking a moment to open these files in Visual Studio and familiarize yourself with the contents.</span></span>

<span data-ttu-id="22179-122">Gdy tworzysz projekt bazy danych, proces kompilacji tworzy dwa pliki:</span><span class="sxs-lookup"><span data-stu-id="22179-122">When you build a database project, the build process creates two files:</span></span>

- <span data-ttu-id="22179-123">A *schemat bazy danych* (plik .dbschema).</span><span class="sxs-lookup"><span data-stu-id="22179-123">A *database schema* (.dbschema file).</span></span> <span data-ttu-id="22179-124">Opisuje schemat bazy danych, który chcesz utworzyć w formacie XML.</span><span class="sxs-lookup"><span data-stu-id="22179-124">This describes the schema of the database you want to create in XML format.</span></span>
- <span data-ttu-id="22179-125">A *manifest wdrożenia* (plik .deploymanifest).</span><span class="sxs-lookup"><span data-stu-id="22179-125">A *deployment manifest* (.deploymanifest file).</span></span> <span data-ttu-id="22179-126">Zawiera wszystkie informacje wymagane do tworzenia i wdrażania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-126">This contains all the information required to create and deploy your database.</span></span> <span data-ttu-id="22179-127">Odwołuje się plik .dbschema wraz z innych zasobów, takich jak instrukcje dotyczące wdrażania (plik .sqldeployment) i wszystkie skrypty SQL przed wdrożeniem lub po wdrożeniu.</span><span class="sxs-lookup"><span data-stu-id="22179-127">It references the .dbschema file along with other resources, like the deployment instructions (the .sqldeployment file) and any pre-deployment or post-deployment SQL scripts.</span></span>

<span data-ttu-id="22179-128">To pokazuje relację między tymi zasobami:</span><span class="sxs-lookup"><span data-stu-id="22179-128">This shows the relationship between these resources:</span></span>

![](deploying-database-projects/_static/image2.png)

<span data-ttu-id="22179-129">Jak widać, plik .sqlsettings i plik .sqlpermissions są dane wejściowe do procesu kompilacji.</span><span class="sxs-lookup"><span data-stu-id="22179-129">As you can see, the .sqlsettings file and the .sqlpermissions file are inputs to the build process.</span></span> <span data-ttu-id="22179-130">Wraz z plikiem projektu bazy danych pliki te są używane do tworzenia pliku schematu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-130">Along with the database project file, these files are used to create the database schema file.</span></span> <span data-ttu-id="22179-131">Plik .sqldeployment i plik .sqlcmdvars przechodzić przez proces kompilacji, bez zmian.</span><span class="sxs-lookup"><span data-stu-id="22179-131">The .sqldeployment file and the .sqlcmdvars file pass through the build process unchanged.</span></span> <span data-ttu-id="22179-132">Manifest wdrażania wskazuje lokalizację schemat bazy danych, plików .sqldeployment, plik .sqlcmdvars i wszystkie skrypty SQL przed wdrożeniem lub po wdrożeniu.</span><span class="sxs-lookup"><span data-stu-id="22179-132">The deployment manifest indicates the location of the database schema, the .sqldeployment file, the .sqlcmdvars file, and any pre-deployment or post-deployment SQL scripts.</span></span>

## <a name="why-use-vsdbcmd-to-deploy-a-database-project"></a><span data-ttu-id="22179-133">Dlaczego warto używać VSDBCMD, aby wdrożyć projekt bazy danych?</span><span class="sxs-lookup"><span data-stu-id="22179-133">Why Use VSDBCMD to Deploy a Database Project?</span></span>

<span data-ttu-id="22179-134">Istnieją różne różne metody wdrażania projektów bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-134">There are various different approaches to deploying database projects.</span></span> <span data-ttu-id="22179-135">Jednak nie wszystkie z nich są odpowiednie do wdrażania projektu bazy danych na serwerach zdalnych w środowisku przedsiębiorstwa.</span><span class="sxs-lookup"><span data-stu-id="22179-135">However, not all of them are suitable for deploying a database project to remote servers in an enterprise environment.</span></span> <span data-ttu-id="22179-136">Co należy rozważyć z wdrożenia projektu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-136">Consider what you want from a database project deployment.</span></span> <span data-ttu-id="22179-137">W scenariuszach wdrażania w przedsiębiorstwie prawdopodobnie chcesz:</span><span class="sxs-lookup"><span data-stu-id="22179-137">In enterprise deployment scenarios, you're likely to want:</span></span>

- <span data-ttu-id="22179-138">Możliwość wdrażania projektu bazy danych z lokalizacji zdalnej.</span><span class="sxs-lookup"><span data-stu-id="22179-138">The ability to deploy the database project from a remote location.</span></span>
- <span data-ttu-id="22179-139">Możliwość zapewnienia aktualizacje przyrostowe istniejącą bazę danych.</span><span class="sxs-lookup"><span data-stu-id="22179-139">The ability to make incremental updates to an existing database.</span></span>
- <span data-ttu-id="22179-140">Zdolność do uwzględnienia przed wdrożeniem lub po wdrożeniu skrypty.</span><span class="sxs-lookup"><span data-stu-id="22179-140">The ability to include pre-deployment scripts or post-deployment scripts.</span></span>
- <span data-ttu-id="22179-141">Możliwość Dostosowywanie wdrożenia w wielu środowiskach docelowego.</span><span class="sxs-lookup"><span data-stu-id="22179-141">The ability to tailor the deployment to multiple destination environments.</span></span>
- <span data-ttu-id="22179-142">Możliwość wdrażania projektu bazy danych jako część większego, zwykle uwzględnione w skryptach, wdrażania rozwiązania w jednym kroku.</span><span class="sxs-lookup"><span data-stu-id="22179-142">The ability to deploy the database project as part of a larger, typically scripted, single-step solution deployment.</span></span>

<span data-ttu-id="22179-143">Istnieją trzy główne metody można użyć do wdrożenia projektu bazy danych:</span><span class="sxs-lookup"><span data-stu-id="22179-143">There are three main approaches you can use to deploy a database project:</span></span>

- <span data-ttu-id="22179-144">Za pomocą funkcji wdrażania z tym typem projektu bazy danych w programie Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="22179-144">You can use the deployment functionality with the database project type in Visual Studio 2010.</span></span> <span data-ttu-id="22179-145">Podczas tworzenia i wdrażania projektu bazy danych w programie Visual Studio 2010, proces wdrażania używa pliku manifestu wdrożenia do generowania pliku wdrożenie oparte na SQL specyficzne dla konfiguracji kompilacji.</span><span class="sxs-lookup"><span data-stu-id="22179-145">When you build and deploy a database project in Visual Studio 2010, the deployment process uses the deployment manifest to generate a SQL-based deployment file specific to the build configuration.</span></span> <span data-ttu-id="22179-146">Spowoduje to utworzenie bazy danych, jeśli już nie istnieje lub wprowadź niezbędne zmiany w bazie danych, jeśli już istnieje.</span><span class="sxs-lookup"><span data-stu-id="22179-146">This will create the database if it doesn't already exist or make any necessary changes to the database if it does already exist.</span></span> <span data-ttu-id="22179-147">Można użyć SQLCMD.exe, aby uruchomić ten plik na serwerze docelowym lub można ustawić Visual Studio, aby utworzyć i uruchomić plik.</span><span class="sxs-lookup"><span data-stu-id="22179-147">You can use SQLCMD.exe to run this file on your destination server, or you can set Visual Studio to create and run the file.</span></span> <span data-ttu-id="22179-148">Wadą tego podejścia jest mają kontrolę nad ustawienia wdrażania tylko ograniczone.</span><span class="sxs-lookup"><span data-stu-id="22179-148">The disadvantage of this approach is that you have only limited control over the deployment settings.</span></span> <span data-ttu-id="22179-149">Często również może być konieczne zmodyfikowanie pliku wdrożenia SQL w celu udostępnienia wartości zmiennych specyficznymi dla środowiska.</span><span class="sxs-lookup"><span data-stu-id="22179-149">You may often also need to modify the SQL deployment file to provide environment-specific variable values.</span></span> <span data-ttu-id="22179-150">To podejście z komputera można używać tylko przy użyciu programu Visual Studio 2010, a deweloper musi znasz i Podaj parametry połączenia i poświadczenia dla wszystkich środowisk docelowego.</span><span class="sxs-lookup"><span data-stu-id="22179-150">You can only use this approach from a computer with Visual Studio 2010 installed, and the developer would need to know and provide connection strings and credentials for all destination environments.</span></span>
- <span data-ttu-id="22179-151">Narzędzie wdrażania sieci Web usług Internet Information Services (IIS), (Web Deploy) służy do [wdrożyć bazę danych w ramach projektu aplikacji sieci web](https://msdn.microsoft.com/library/dd465343.aspx).</span><span class="sxs-lookup"><span data-stu-id="22179-151">You can use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to [deploy a database as part of a web application project](https://msdn.microsoft.com/library/dd465343.aspx).</span></span> <span data-ttu-id="22179-152">Jednak to podejście jest o wiele bardziej skomplikowane, aby wdrożyć projekt bazy danych, a nie po prostu zreplikować istniejącej lokalnej bazy danych na serwerze docelowym.</span><span class="sxs-lookup"><span data-stu-id="22179-152">However, this approach is a lot more complex if you want to deploy a database project rather than simply replicate an existing local database on a destination server.</span></span> <span data-ttu-id="22179-153">Można skonfigurować narzędzie Web Deploy do uruchomienia skryptu wdrożenia SQL, który generuje projekt bazy danych, ale aby to zrobić, należy utworzyć niestandardowy plik elementów docelowych WPP dla projektu aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="22179-153">You can configure Web Deploy to run the SQL deployment script that the database project generates, but in order to do this, you need to create a custom WPP targets file for your web application project.</span></span> <span data-ttu-id="22179-154">Spowoduje to dodanie znacznej ilości złożoności procesu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="22179-154">This adds a substantial amount of complexity to the deployment process.</span></span> <span data-ttu-id="22179-155">Ponadto narzędzie Web Deploy nie obsługuje bezpośrednio aktualizacje przyrostowe istniejących baz danych.</span><span class="sxs-lookup"><span data-stu-id="22179-155">In addition, Web Deploy does not directly support incremental updates to existing databases.</span></span> <span data-ttu-id="22179-156">Aby uzyskać więcej informacji na temat tego podejścia, zobacz [rozszerzanie potoku publikowania w sieci Web, do projektu bazy danych pakietu wdrożonego pliku SQL](https://go.microsoft.com/?linkid=9805121).</span><span class="sxs-lookup"><span data-stu-id="22179-156">For more information on this approach, see [Extending the Web Publishing Pipeline to package database project deployed SQL file](https://go.microsoft.com/?linkid=9805121).</span></span>
- <span data-ttu-id="22179-157">Narzędzie VSDBCMD wdrożenie bazy danych, przy użyciu schematu bazy danych lub pliku manifestu wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="22179-157">You can use the VSDBCMD utility to deploy the database, using either the database schema or the deployment manifest.</span></span> <span data-ttu-id="22179-158">Możesz wywołać VSDBCMD.exe z obiektu docelowego programu MSBuild, które pozwala publikować bazy danych jako część procesu większych i inicjowanych przez skrypty wdrażania.</span><span class="sxs-lookup"><span data-stu-id="22179-158">You can call VSDBCMD.exe from an MSBuild target, which lets you publish databases as part of a larger, scripted deployment process.</span></span> <span data-ttu-id="22179-159">Można zastąpić zmienne w pliku .sqlcmdvars i wiele innych właściwości bazy danych z poleceń VSDBCMD, co pozwala na dostosowywanie wdrożenia w różnych środowiskach bez konieczności tworzenia wielu konfiguracjach kompilacji.</span><span class="sxs-lookup"><span data-stu-id="22179-159">You can override the variables in your .sqlcmdvars file and lots of other database properties from a VSDBCMD command, which allows you to customize your deployment for different environments without creating multiple build configurations.</span></span> <span data-ttu-id="22179-160">VSDBCMD oferuje funkcję różnice między, co oznacza, że jej spowoduje, że tylko niezbędne zmiany, aby wyrównać docelowej bazy danych przy użyciu schematu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-160">VSDBCMD provides differentiation functionality, which means it will make only the necessary changes to align a destination database with your database schema.</span></span> <span data-ttu-id="22179-161">VSDBCMD oferuje szeroką gamę opcji wiersza polecenia, które zapewniają szczegółową kontrolę nad procesem wdrażania.</span><span class="sxs-lookup"><span data-stu-id="22179-161">VSDBCMD also offers a wide range of command-line options, which give you fine-grained control over the deployment process.</span></span>

<span data-ttu-id="22179-162">W tym omówieniu znajdują się za pomocą VSDBCMD za pomocą narzędzia MSBuild to podejście, najlepiej dopasowane do typowego przedsiębiorstwa scenariusza wdrażania:</span><span class="sxs-lookup"><span data-stu-id="22179-162">From this overview, you can see that using VSDBCMD with MSBuild is the approach best suited to a typical enterprise deployment scenario:</span></span>

|  | <span data-ttu-id="22179-163">Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="22179-163">Visual Studio 2010</span></span> | <span data-ttu-id="22179-164">Web Deploy 2.0</span><span class="sxs-lookup"><span data-stu-id="22179-164">Web Deploy 2.0</span></span> | <span data-ttu-id="22179-165">VSDBCMD.exe</span><span class="sxs-lookup"><span data-stu-id="22179-165">VSDBCMD.exe</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="22179-166">Obsługuje zdalnego wdrażania?</span><span class="sxs-lookup"><span data-stu-id="22179-166">Supports remote deployment?</span></span> | <span data-ttu-id="22179-167">Tak</span><span class="sxs-lookup"><span data-stu-id="22179-167">Yes</span></span> | <span data-ttu-id="22179-168">Yes</span><span class="sxs-lookup"><span data-stu-id="22179-168">Yes</span></span> | <span data-ttu-id="22179-169">Tak</span><span class="sxs-lookup"><span data-stu-id="22179-169">Yes</span></span> |
| <span data-ttu-id="22179-170">Obsługiwane są aktualizacje przyrostowe?</span><span class="sxs-lookup"><span data-stu-id="22179-170">Supports incremental updates?</span></span> | <span data-ttu-id="22179-171">Tak</span><span class="sxs-lookup"><span data-stu-id="22179-171">Yes</span></span> | <span data-ttu-id="22179-172">Nie</span><span class="sxs-lookup"><span data-stu-id="22179-172">No</span></span> | <span data-ttu-id="22179-173">Tak</span><span class="sxs-lookup"><span data-stu-id="22179-173">Yes</span></span> |
| <span data-ttu-id="22179-174">Obsługuje skrypty przed/po-deployment?</span><span class="sxs-lookup"><span data-stu-id="22179-174">Supports pre/post-deployment scripts?</span></span> | <span data-ttu-id="22179-175">Tak</span><span class="sxs-lookup"><span data-stu-id="22179-175">Yes</span></span> | <span data-ttu-id="22179-176">Yes</span><span class="sxs-lookup"><span data-stu-id="22179-176">Yes</span></span> | <span data-ttu-id="22179-177">Tak</span><span class="sxs-lookup"><span data-stu-id="22179-177">Yes</span></span> |
| <span data-ttu-id="22179-178">Obsługuje wdrażanie wielośrodowiskowego?</span><span class="sxs-lookup"><span data-stu-id="22179-178">Supports multi-environment deployment?</span></span> | <span data-ttu-id="22179-179">Ograniczone</span><span class="sxs-lookup"><span data-stu-id="22179-179">Limited</span></span> | <span data-ttu-id="22179-180">Ograniczone</span><span class="sxs-lookup"><span data-stu-id="22179-180">Limited</span></span> | <span data-ttu-id="22179-181">Tak</span><span class="sxs-lookup"><span data-stu-id="22179-181">Yes</span></span> |
| <span data-ttu-id="22179-182">Obsługuje inicjowanych przez skrypty wdrażania?</span><span class="sxs-lookup"><span data-stu-id="22179-182">Supports scripted deployment?</span></span> | <span data-ttu-id="22179-183">Ograniczone</span><span class="sxs-lookup"><span data-stu-id="22179-183">Limited</span></span> | <span data-ttu-id="22179-184">Tak</span><span class="sxs-lookup"><span data-stu-id="22179-184">Yes</span></span> | <span data-ttu-id="22179-185">Tak</span><span class="sxs-lookup"><span data-stu-id="22179-185">Yes</span></span> |

<span data-ttu-id="22179-186">W pozostałej części tego tematu opisano użycie VSDBCMD za pomocą narzędzia MSBuild wdrażania projektów bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-186">The remainder of this topic describes the use of VSDBCMD with MSBuild to deploy database projects.</span></span>

## <a name="understanding-the-deployment-process"></a><span data-ttu-id="22179-187">Opis procesu wdrażania</span><span class="sxs-lookup"><span data-stu-id="22179-187">Understanding the Deployment Process</span></span>

<span data-ttu-id="22179-188">Narzędzie VSDBCMD pozwala wdrożyć bazę danych przy użyciu schematu bazy danych (plik .dbschema) lub manifestu wdrażania (plik .deploymanifest).</span><span class="sxs-lookup"><span data-stu-id="22179-188">The VSDBCMD utility lets you deploy a database using either the database schema (the .dbschema file) or the deployment manifest (the .deploymanifest file).</span></span> <span data-ttu-id="22179-189">W praktyce prawie zawsze użyjesz manifest wdrożenia, ponieważ manifest wdrażania pozwala podać wartości domyślne dla różnych właściwości wdrożenia i zidentyfikować wszelkie przed wdrożeniem lub po wdrożeniu skrypty SQL, który chcesz uruchomić.</span><span class="sxs-lookup"><span data-stu-id="22179-189">In practice, you'll almost always use the deployment manifest, as the deployment manifest lets you provide default values for various deployment properties and identify any pre-deployment or post-deployment SQL scripts you want to run.</span></span> <span data-ttu-id="22179-190">Na przykład, to polecenie VSDBCMD służy do wdrażania **ContactManager** bazy danych do serwera bazy danych w środowisku testowym:</span><span class="sxs-lookup"><span data-stu-id="22179-190">For example, this VSDBCMD command is used to deploy the **ContactManager** database to a database server in a test environment:</span></span>


[!code-console[Main](deploying-database-projects/samples/sample1.cmd)]


<span data-ttu-id="22179-191">W takim przypadku:</span><span class="sxs-lookup"><span data-stu-id="22179-191">In this case:</span></span>

- <span data-ttu-id="22179-192">**/A** (lub **Action**) przełącznik określa, co ma VSDBCMD celu.</span><span class="sxs-lookup"><span data-stu-id="22179-192">The **/a** (or **/Action**) switch specifies what you want VSDBCMD to do.</span></span> <span data-ttu-id="22179-193">Ustaw tę opcję na **importu** lub **Wdróż**.</span><span class="sxs-lookup"><span data-stu-id="22179-193">You can set this to **Import** or **Deploy**.</span></span> <span data-ttu-id="22179-194">**Importu** opcja jest używana do generowania pliku .dbschema z istniejącej bazy danych i **Wdróż** opcja jest używana do wdrożenia pliku .dbschema docelową bazę danych.</span><span class="sxs-lookup"><span data-stu-id="22179-194">The **Import** option is used to generate a .dbschema file from an existing database, and the **Deploy** option is used to deploy a .dbschema file to a target database.</span></span>
- <span data-ttu-id="22179-195">**/Manifest** (lub **/ManifestFile**) przełącznik określa plik .deploymanifest, którą chcesz wdrożyć.</span><span class="sxs-lookup"><span data-stu-id="22179-195">The **/manifest** (or **/ManifestFile**) switch identifies the .deploymanifest file you want to deploy.</span></span> <span data-ttu-id="22179-196">Jeśli chcesz użyć pliku .dbschema, należy użyć **/modelu** (lub **/ModelFile**) przełącznika.</span><span class="sxs-lookup"><span data-stu-id="22179-196">If you wanted to use the .dbschema file instead, you'd use the **/model** (or **/ModelFile**) switch.</span></span>
- <span data-ttu-id="22179-197">**Skróconej/CS** (lub **/ConnectionString**) przełącznik udostępnia parametry połączenia dla bazy danych serwera docelowego.</span><span class="sxs-lookup"><span data-stu-id="22179-197">The **/cs** (or **/ConnectionString**) switch provides the connection string for the target database server.</span></span> <span data-ttu-id="22179-198">Należy pamiętać, że nie obejmuje to nazwa bazy danych&#x2014;VSDBCMD musi połączyć się z serwerem, aby utworzyć bazę danych; nie musi nawiązać połączenie z poszczególnych baz danych.</span><span class="sxs-lookup"><span data-stu-id="22179-198">Note that this doesn't include the name of the database&#x2014;VSDBCMD needs to connect to the server to create the database; it doesn't need to connect to an individual database.</span></span> <span data-ttu-id="22179-199">Jeśli plik .deploymanifest zawiera parametry połączenia, można pominąć ten przełącznik.</span><span class="sxs-lookup"><span data-stu-id="22179-199">If your .deploymanifest file includes a connection string, you can omit this switch.</span></span> <span data-ttu-id="22179-200">Jeśli mimo to użyć przełącznika przełącznik wartość zastępuje wartość .deploymanifest.</span><span class="sxs-lookup"><span data-stu-id="22179-200">If you use the switch anyway, the switch value will override the .deploymanifest value.</span></span>
- <span data-ttu-id="22179-201"><strong>/P:TargetDatabase</strong> właściwość zawiera nazwę chcesz przypisać do docelowej bazy danych podczas ich tworzenia.</span><span class="sxs-lookup"><span data-stu-id="22179-201">The <strong>/p:TargetDatabase</strong> property provides the name you want to assign to the target database on creation.</span></span> <span data-ttu-id="22179-202">Zastępuje wartości <strong>TargetDatabase</strong> właściwości w pliku .deploymanifest.</span><span class="sxs-lookup"><span data-stu-id="22179-202">This overrides the value of the <strong>TargetDatabase</strong> property in the .deploymanifest file.</span></span> <span data-ttu-id="22179-203">Możesz użyć <strong>/p:</strong> <em>[nazwa właściwości]</em>składni, aby ustawić szerokiej gamy właściwości wdrożenia i aby zastąpić wszelkie zmienne SQLCMD zadeklarowana w pliku .sqlcmdvars.</span><span class="sxs-lookup"><span data-stu-id="22179-203">You can use the <strong>/p:</strong> <em>[property name]</em>syntax to set a wide variety of deployment properties and to override any SQLCMD variables declared in your .sqlcmdvars file.</span></span>
- <span data-ttu-id="22179-204">**/Dd+** (lub **/DeployToDatabase+**) przełącznik wskazuje, że chcesz utworzyć wdrożenie, i wdrożyć ją do środowiska docelowego.</span><span class="sxs-lookup"><span data-stu-id="22179-204">The **/dd+** (or **/DeployToDatabase+**) switch indicates that you want to create a deployment and deploy it to the target environment.</span></span> <span data-ttu-id="22179-205">Jeśli określisz **/dd-**, lub pominięta, VSDBCMD spowoduje to wygenerowanie skryptu wdrażania, ale nie spowoduje wdrożenia do środowiska docelowego.</span><span class="sxs-lookup"><span data-stu-id="22179-205">If you specify **/dd-**, or omit the switch, VSDBCMD will generate a deployment script but will not deploy it to the target environment.</span></span> <span data-ttu-id="22179-206">Ten przełącznik jest często źródła pomyłek i zostało wyjaśnione bardziej szczegółowo w następnej sekcji.</span><span class="sxs-lookup"><span data-stu-id="22179-206">This switch is often the source of confusion and is explained in more detail in the next section.</span></span>
- <span data-ttu-id="22179-207">**/Script** (lub **/DeploymentScriptFile**) przełącznik określa, gdzie można wygenerować skryptu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="22179-207">The **/script** (or **/DeploymentScriptFile**) switch specifies where you want to generate the deployment script.</span></span> <span data-ttu-id="22179-208">Ta wartość nie wpływa na proces wdrażania.</span><span class="sxs-lookup"><span data-stu-id="22179-208">This value does not affect the deployment process.</span></span>

<span data-ttu-id="22179-209">Aby uzyskać więcej informacji na temat VSDBCMD, zobacz [VSDBCMD dokumentacja wiersza polecenia. Plik EXE (wdrożenia i importowanie schematu)](https://msdn.microsoft.com/library/dd193283.aspx) i [jak: Przygotowanie bazy danych do wdrożenia z poziomu wiersza polecenia przy użyciu VSDBCMD. Plik EXE](https://msdn.microsoft.com/library/dd193258.aspx).</span><span class="sxs-lookup"><span data-stu-id="22179-209">For more information on VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) and [How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE](https://msdn.microsoft.com/library/dd193258.aspx).</span></span>

<span data-ttu-id="22179-210">Przykład wykorzystania VSDBCMD z pliku projektu programu MSBuild, zobacz [objaśnienie procesu kompilacji](understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="22179-210">For an example of how you can use VSDBCMD from an MSBuild project file, see [Understanding the Build Process](understanding-the-build-process.md).</span></span> <span data-ttu-id="22179-211">Aby zapoznać się z przykładami sposobu konfigurowania ustawień wdrażania bazy danych w wielu środowiskach, zobacz [Dostosowywanie wdrożeń bazy danych dla wielu środowisk](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="22179-211">For examples of how to configure database deployment settings for multiple environments, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="understanding-the-deploytodatabase-switch"></a><span data-ttu-id="22179-212">Informacje o przełącznikiem DeployToDatabase</span><span class="sxs-lookup"><span data-stu-id="22179-212">Understanding the DeployToDatabase Switch</span></span>

<span data-ttu-id="22179-213">Zachowanie **/dd** lub **/DeployToDatabase** przełącznika zależy od tego, czy używasz VSDBCMD .dbschema .deploymanifest pliku lub.</span><span class="sxs-lookup"><span data-stu-id="22179-213">The behavior of the **/dd** or **/DeployToDatabase** switch depends on whether you're using VSDBCMD with a .dbschema file or a .deploymanifest file.</span></span> <span data-ttu-id="22179-214">Jeśli używasz pliku .dbschema, zachowanie jest dość prosta:</span><span class="sxs-lookup"><span data-stu-id="22179-214">If you're using a .dbschema file, the behavior is fairly straightforward:</span></span>

- <span data-ttu-id="22179-215">Jeśli określisz **/dd+** lub **/dd**, VSDBCMD wygeneruje skryptu wdrażania i wdrażanie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-215">If you specify **/dd+** or **/dd**, VSDBCMD will generate a deployment script and deploy the database.</span></span>
- <span data-ttu-id="22179-216">Jeśli określisz **/dd-** lub pominięta, VSDBCMD spowoduje wygenerowanie skryptu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="22179-216">If you specify **/dd-** or omit the switch, VSDBCMD will generate a deployment script only.</span></span>

<span data-ttu-id="22179-217">Jeśli używasz pliku .deploymanifest zachowanie jest o wiele bardziej skomplikowane.</span><span class="sxs-lookup"><span data-stu-id="22179-217">If you're using a .deploymanifest file, the behavior is a lot more complicated.</span></span> <span data-ttu-id="22179-218">Jest to spowodowane plik .deploymanifest zawiera nazwę właściwości **DeployToDatabase** również określający, czy baza danych jest wdrożona.</span><span class="sxs-lookup"><span data-stu-id="22179-218">This is because the .deploymanifest file contains a property name **DeployToDatabase** that also determines whether the database is deployed.</span></span>


[!code-xml[Main](deploying-database-projects/samples/sample2.xml)]


<span data-ttu-id="22179-219">Ta właściwość ma wartość zgodnie z właściwości projektu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-219">The value of this property is set according to the properties of the database project.</span></span> <span data-ttu-id="22179-220">Jeśli ustawisz **wdrażanie akcji** do **utworzyć skrypt wdrażania (.sql)**, wartość będzie **False**.</span><span class="sxs-lookup"><span data-stu-id="22179-220">If you set the **Deploy action** to **Create a deployment script (.sql)**, the value will be **False**.</span></span> <span data-ttu-id="22179-221">Jeśli ustawisz **wdrażanie akcji** do **skryptu wdrażania (.sql) do tworzenia i wdrażania bazy danych**, wartość będzie **True**.</span><span class="sxs-lookup"><span data-stu-id="22179-221">If you set the **Deploy action** to **Create a deployment script (.sql) and deploy to the database**, the value will be **True**.</span></span>

> [!NOTE]
> <span data-ttu-id="22179-222">Te ustawienia są skojarzone z konfiguracją konkretnej kompilacji i platformy.</span><span class="sxs-lookup"><span data-stu-id="22179-222">These settings are associated with a specific build configuration and platform.</span></span> <span data-ttu-id="22179-223">Na przykład, jeśli konfigurujesz ustawienia **debugowania** konfiguracji, a następnie opublikować przy użyciu **wersji** konfiguracji, ustawienia nie będą używane.</span><span class="sxs-lookup"><span data-stu-id="22179-223">For example, if you configure settings for the **Debug** configuration and then publish using the **Release** configuration, your settings will not be used.</span></span>


![](deploying-database-projects/_static/image3.png)

> [!NOTE]
> <span data-ttu-id="22179-224">W tym scenariuszu **wdrażanie akcji** powinna zawsze być ustawiona na **utworzyć skrypt wdrażania (.sql)**, ponieważ nie chcesz, aby program Visual Studio 2010 do wdrożenia bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-224">In this scenario, the **Deploy action** should always be set to **Create a deployment script (.sql)**, because you don't want Visual Studio 2010 to deploy your database.</span></span> <span data-ttu-id="22179-225">Innymi słowy **DeployToDatabase** właściwość powinna zawsze być **False**.</span><span class="sxs-lookup"><span data-stu-id="22179-225">In other words, the **DeployToDatabase** property should always be **False**.</span></span>


<span data-ttu-id="22179-226">Gdy **DeployToDatabase** właściwość zostanie określona, **/dd** przełącznika spowoduje zastąpienie właściwości tylko, jeśli wartość właściwości jest **false**:</span><span class="sxs-lookup"><span data-stu-id="22179-226">When a **DeployToDatabase** property is specified, the **/dd** switch will only override the property if the property value is **false**:</span></span>

- <span data-ttu-id="22179-227">Jeśli **DeployToDatabase** właściwość **False**, i określeniu **/dd+** lub **/dd**, spowoduje zastąpienie VSDBCMD  **DeployToDatabase** właściwości i wdrażanie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-227">If the **DeployToDatabase** property is **False**, and you specify **/dd+** or **/dd**, VSDBCMD will override the **DeployToDatabase** property and deploy the database.</span></span>
- <span data-ttu-id="22179-228">Jeśli **DeployToDatabase** właściwość **False**, i określeniu **/dd-** lub pominięta, VSDBCMD nie wdroży bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-228">If the **DeployToDatabase** property is **False**, and you specify **/dd-** or omit the switch, VSDBCMD will not deploy the database.</span></span>
- <span data-ttu-id="22179-229">Jeśli **DeployToDatabase** właściwość **True**, VSDBCMD zignoruje przełącznika i wdrażanie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-229">If the **DeployToDatabase** property is **True**, VSDBCMD will ignore the switch and deploy the database.</span></span>
- <span data-ttu-id="22179-230">Skrypt wdrażania jest generowany w każdym przypadku, niezależnie od tego, czy wdrażasz także bazy danych.</span><span class="sxs-lookup"><span data-stu-id="22179-230">A deployment script is generated in each case, regardless of whether you're deploying the database as well.</span></span>

## <a name="conclusion"></a><span data-ttu-id="22179-231">Wniosek</span><span class="sxs-lookup"><span data-stu-id="22179-231">Conclusion</span></span>

<span data-ttu-id="22179-232">W tym temacie podano Omówienie procesu kompilowania i wdrażania dla projektów bazy danych w programie Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="22179-232">This topic provided an overview of the build and deployment process for database projects in Visual Studio 2010.</span></span> <span data-ttu-id="22179-233">Opisano również, jak używać VSDBCMD.exe za pomocą narzędzia MSBuild do obsługi wdrożenia bazy danych w skali przedsiębiorstwa.</span><span class="sxs-lookup"><span data-stu-id="22179-233">It also described how you can use VSDBCMD.exe with MSBuild to support enterprise-scale database deployment.</span></span>

<span data-ttu-id="22179-234">Aby uzyskać więcej informacji na temat jak to działa w praktyce, zobacz [Dostosowywanie wdrożeń bazy danych dla wielu środowisk](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="22179-234">For more information on how this works in practice, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="further-reading"></a><span data-ttu-id="22179-235">Dalsze informacje</span><span class="sxs-lookup"><span data-stu-id="22179-235">Further Reading</span></span>

<span data-ttu-id="22179-236">Aby uzyskać informacji na temat sposobu dostosowywania wdrożenia bazy danych, tworząc plik konfiguracji wdrożenia osobne dla każdego środowiska, zobacz [Dostosowywanie wdrożeń bazy danych dla wielu środowisk](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="22179-236">For information on how to customize database deployments by creating a separate deployment configuration file for each environment, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="22179-237">Aby uzyskać wskazówki dotyczące sposobu konfigurowania członkostw roli bazy danych, uruchamiając skrypt po wdrożeniu, zobacz [członkostw roli bazy danych wdrażania w środowiskach testowych](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span><span class="sxs-lookup"><span data-stu-id="22179-237">For guidance on how to configure database role memberships by running a post-deployment script, see [Deploying Database Role Memberships to Test Environments](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span></span> <span data-ttu-id="22179-238">Aby uzyskać wskazówki dotyczące zarządzania niektóre unikatowe wyzwania członkostwo baz danych nakładają, zobacz [wdrażanie baz danych członkostwa w środowiskach przedsiębiorstw](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span><span class="sxs-lookup"><span data-stu-id="22179-238">For guidance on managing some of the unique challenges that membership databases impose, see [Deploying Membership Databases to Enterprise Environments](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span></span>

<span data-ttu-id="22179-239">Te tematy w witrynie MSDN zapewniają szersze wskazówki i informacje dla projektów bazy danych programu Visual Studio i procesu wdrażania bazy danych:</span><span class="sxs-lookup"><span data-stu-id="22179-239">These topics on MSDN provide broader guidance and background information on Visual Studio database projects and the database deployment process:</span></span>

- [<span data-ttu-id="22179-240">Visual Studio 2010 SQL Server Database Projects</span><span class="sxs-lookup"><span data-stu-id="22179-240">Visual Studio 2010 SQL Server Database Projects</span></span>](https://msdn.microsoft.com/library/ff678491.aspx)
- [<span data-ttu-id="22179-241">Zarządzanie zmianą bazy danych</span><span class="sxs-lookup"><span data-stu-id="22179-241">Managing Database Change</span></span>](https://msdn.microsoft.com/library/aa833404.aspx)
- [<span data-ttu-id="22179-242">Instrukcje: Przygotowanie bazy danych do wdrożenia z poziomu wiersza polecenia przy użyciu VSDBCMD. PLIK EXE</span><span class="sxs-lookup"><span data-stu-id="22179-242">How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE</span></span>](https://msdn.microsoft.com/library/dd193258.aspx)
- [<span data-ttu-id="22179-243">Omówienie bazy danych kompilacji i wdrażania</span><span class="sxs-lookup"><span data-stu-id="22179-243">An Overview of Database Build and Deployment</span></span>](https://msdn.microsoft.com/library/aa833165.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="22179-244">[Poprzednie](deploying-web-packages.md)
> [dalej](creating-and-running-a-deployment-command-file.md)</span><span class="sxs-lookup"><span data-stu-id="22179-244">[Previous](deploying-web-packages.md)
[Next](creating-and-running-a-deployment-command-file.md)</span></span>

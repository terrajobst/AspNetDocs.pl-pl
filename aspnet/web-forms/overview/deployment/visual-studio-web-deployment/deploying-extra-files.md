---
uid: web-forms/overview/deployment/visual-studio-web-deployment/deploying-extra-files
title: 'ASP.NET wdrażanie w sieci Web przy użyciu programu Visual Studio: wdrażanie dodatkowych plików | Microsoft Docs'
author: tdykstra
description: W tej serii samouczków pokazano, jak wdrożyć (opublikować) aplikację sieci Web ASP.NET w celu Azure App Service Web Apps lub do dostawcy hostingu innej firmy przez usin...
ms.author: riande
ms.date: 03/23/2015
ms.assetid: 1cd91055-84bc-42c6-9d80-646f41429d4d
msc.legacyurl: /web-forms/overview/deployment/visual-studio-web-deployment/deploying-extra-files
msc.type: authoredcontent
ms.openlocfilehash: eaa3141c22980f0c816e2f33b5597ac9fe69c23c
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/28/2019
ms.locfileid: "74594908"
---
# <a name="aspnet-web-deployment-using-visual-studio-deploying-extra-files"></a><span data-ttu-id="a69c5-103">ASP.NET wdrażanie w sieci Web przy użyciu programu Visual Studio: wdrażanie dodatkowych plików</span><span class="sxs-lookup"><span data-stu-id="a69c5-103">ASP.NET Web Deployment using Visual Studio: Deploying Extra Files</span></span>

<span data-ttu-id="a69c5-104">Autor [Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="a69c5-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="a69c5-105">Pobierz projekt początkowy</span><span class="sxs-lookup"><span data-stu-id="a69c5-105">Download Starter Project</span></span>](https://go.microsoft.com/fwlink/p/?LinkId=282627)

> <span data-ttu-id="a69c5-106">W tej serii samouczków pokazano, jak wdrożyć (opublikować) aplikację sieci Web ASP.NET w celu Azure App Service Web Apps lub do dostawcy hostingu innej firmy przy użyciu programu Visual Studio 2012 lub Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="a69c5-106">This tutorial series shows you how to deploy (publish) an ASP.NET web application to Azure App Service Web Apps or to a third-party hosting provider, by using Visual Studio 2012 or Visual Studio 2010.</span></span> <span data-ttu-id="a69c5-107">Aby uzyskać informacje o serii, zobacz [pierwszy samouczek w serii](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="a69c5-107">For information about the series, see [the first tutorial in the series](introduction.md).</span></span>

## <a name="overview"></a><span data-ttu-id="a69c5-108">Omówienie</span><span class="sxs-lookup"><span data-stu-id="a69c5-108">Overview</span></span>

<span data-ttu-id="a69c5-109">W tym samouczku pokazano, jak wdrożyć potok publikacji w sieci Web w programie Visual Studio, aby wykonać dodatkowe zadanie podczas wdrażania.</span><span class="sxs-lookup"><span data-stu-id="a69c5-109">This tutorial shows how to extend the Visual Studio web publish pipeline to do an additional task during deployment.</span></span> <span data-ttu-id="a69c5-110">Zadaniem jest skopiowanie dodatkowych plików, które nie znajdują się w folderze projektu do docelowej witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="a69c5-110">The task is to copy extra files that are not in the project folder to the destination web site.</span></span>

<span data-ttu-id="a69c5-111">W tym samouczku skopiujesz jeden dodatkowy plik: *robots. txt*.</span><span class="sxs-lookup"><span data-stu-id="a69c5-111">For this tutorial you'll copy one extra file: *robots.txt*.</span></span> <span data-ttu-id="a69c5-112">Chcesz wdrożyć ten plik do przemieszczania, ale nie do środowiska produkcyjnego.</span><span class="sxs-lookup"><span data-stu-id="a69c5-112">You want to deploy this file to staging but not to production.</span></span> <span data-ttu-id="a69c5-113">W samouczku [wdrażanie do produkcji](deploying-to-production.md) dodano ten plik do projektu i skonfigurowano profil publikowania produkcyjnego w celu wykluczenia go.</span><span class="sxs-lookup"><span data-stu-id="a69c5-113">In [the Deploying to Production](deploying-to-production.md) tutorial, you added this file to the project and configured the Production publish profile to exclude it.</span></span> <span data-ttu-id="a69c5-114">W tym samouczku zobaczysz alternatywną metodę obsługi tej sytuacji, która będzie przydatna dla wszystkich plików, które chcesz wdrożyć, ale nie chcesz ich uwzględnić w projekcie.</span><span class="sxs-lookup"><span data-stu-id="a69c5-114">In this tutorial you'll see an alternative method to handle this situation, one that will be useful for any files that you want to deploy but don't want to include in the project.</span></span>

## <a name="move-the-robotstxt-file"></a><span data-ttu-id="a69c5-115">Przenoszenie pliku robots. txt</span><span class="sxs-lookup"><span data-stu-id="a69c5-115">Move the robots.txt file</span></span>

<span data-ttu-id="a69c5-116">Aby przygotować się do innej metody obsługi pliku *robots. txt*, w tej części samouczka przeniesiesz plik do folderu, który nie znajduje się w projekcie, i usuniesz pliki *robots. txt* ze środowiska przejściowego.</span><span class="sxs-lookup"><span data-stu-id="a69c5-116">To prepare for a different method of handling *robots.txt*, in this section of the tutorial you move the file to a folder that is not included in the project, and you delete *robots.txt* from the staging environment.</span></span> <span data-ttu-id="a69c5-117">Konieczne jest usunięcie pliku z przemieszczania, aby można było sprawdzić, czy nowa metoda wdrażania pliku w tym środowisku działa poprawnie.</span><span class="sxs-lookup"><span data-stu-id="a69c5-117">It is necessary to delete the file from staging so that you can verify that your new method of deploying the file to that environment is working correctly.</span></span>

1. <span data-ttu-id="a69c5-118">W **Eksplorator rozwiązań**kliknij prawym przyciskiem myszy plik *robots. txt* , a następnie kliknij pozycję **Wyklucz z projektu**.</span><span class="sxs-lookup"><span data-stu-id="a69c5-118">In **Solution Explorer**, right-click the *robots.txt* file and click **Exclude From Project**.</span></span>
2. <span data-ttu-id="a69c5-119">Korzystając z Eksploratora plików systemu Windows, Utwórz nowy folder w folderze rozwiązania i nadaj mu nazwę *ExtraFiles*.</span><span class="sxs-lookup"><span data-stu-id="a69c5-119">Using Windows File Explorer, create a new folder in the solution folder and name it *ExtraFiles*.</span></span>
3. <span data-ttu-id="a69c5-120">Przenieś plik *robots. txt* z folderu projektu *ContosoUniversity* do folderu *ExtraFiles* .</span><span class="sxs-lookup"><span data-stu-id="a69c5-120">Move the *robots.txt* file from the *ContosoUniversity* project folder to the *ExtraFiles* folder.</span></span>

    ![Folder ExtraFiles](deploying-extra-files/_static/image1.png)
4. <span data-ttu-id="a69c5-122">Za pomocą narzędzia FTP Usuń plik *robots. txt* z tymczasowej witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="a69c5-122">Using your FTP tool, delete the *robots.txt* file from the staging web site.</span></span>

    <span data-ttu-id="a69c5-123">Alternatywnie można wybrać opcję **Usuń dodatkowe pliki w miejscu docelowym** w obszarze **Opcje publikowania plików** na karcie **Ustawienia** w profilu publikowania przemieszczania i ponownie opublikować ją w celu przygotowania.</span><span class="sxs-lookup"><span data-stu-id="a69c5-123">As an alternative, you can select **Remove additional files at destination** under **File Publish Options** on the **Settings** tab of the Staging publish profile, and republish to staging.</span></span>

## <a name="update-the-publish-profile-file"></a><span data-ttu-id="a69c5-124">Aktualizowanie pliku profilu publikowania</span><span class="sxs-lookup"><span data-stu-id="a69c5-124">Update the publish profile file</span></span>

<span data-ttu-id="a69c5-125">*Plik robots. txt* jest wymagany tylko w przypadku przemieszczania, więc należy zaktualizować tylko profil publikowania, aby wdrożyć go w ramach wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="a69c5-125">You only need *robots.txt* in staging, so the only publish profile you need to update in order to deploy it is Staging.</span></span>

1. <span data-ttu-id="a69c5-126">W programie Visual Studio Otwórz pozycję *tymczasowy. pubxml*.</span><span class="sxs-lookup"><span data-stu-id="a69c5-126">In Visual Studio, open *Staging.pubxml*.</span></span>
2. <span data-ttu-id="a69c5-127">Na końcu pliku przed tagiem zamykającym `</Project>` Dodaj następujący znacznik:</span><span class="sxs-lookup"><span data-stu-id="a69c5-127">At the end of the file, before the closing `</Project>` tag, add the following markup:</span></span>

    [!code-xml[Main](deploying-extra-files/samples/sample1.xml)]

    <span data-ttu-id="a69c5-128">Ten kod tworzy nowy *obiekt docelowy* , który będzie zbierać dodatkowe pliki do wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="a69c5-128">This code creates a new *target* that will collect additional files to be deployed.</span></span> <span data-ttu-id="a69c5-129">Element docelowy składa się z co najmniej jednego zadania, które będzie wykonywane przez program MSBuild na podstawie określonych kryteriów.</span><span class="sxs-lookup"><span data-stu-id="a69c5-129">A target is composed of one or more tasks that MSBuild will execute based on conditions you specify.</span></span>

    <span data-ttu-id="a69c5-130">Atrybut `Include` określa, że folder, w którym mają znajdować się pliki, jest *ExtraFiles*, znajduje się na tym samym poziomie co folder projektu.</span><span class="sxs-lookup"><span data-stu-id="a69c5-130">The `Include` attribute specifies that the folder in which to find the files is *ExtraFiles*, located at the same level as the project folder.</span></span> <span data-ttu-id="a69c5-131">Program MSBuild zbierze wszystkie pliki z tego folderu i rekursywnie z dowolnego podfolderu (podwójna gwiazdka określa podfoldery cykliczne).</span><span class="sxs-lookup"><span data-stu-id="a69c5-131">MSBuild will collect all files from that folder and recursively from any subfolders (the double asterisk specifies recursive subfolders).</span></span> <span data-ttu-id="a69c5-132">Za pomocą tego kodu można umieścić wiele plików i plików w podfolderach w folderze *ExtraFiles* , a wszystkie zostaną wdrożone.</span><span class="sxs-lookup"><span data-stu-id="a69c5-132">With this code you could put multiple files, and files in subfolders inside the *ExtraFiles* folder, and all will be deployed.</span></span>

    <span data-ttu-id="a69c5-133">`DestinationRelativePath` element określa, że foldery i pliki powinny być kopiowane do folderu głównego docelowej witryny sieci Web, w tej samej strukturze plików i folderów, co znajdują się w folderze *ExtraFiles* .</span><span class="sxs-lookup"><span data-stu-id="a69c5-133">The `DestinationRelativePath` element specifies that the folders and files should be copied to the root folder of the destination web site, in the same file and folder structure as they are found in the *ExtraFiles* folder.</span></span> <span data-ttu-id="a69c5-134">Jeśli chcesz skopiować folder *ExtraFiles* , wartość `DestinationRelativePath` będzie *ExtraFiles\%(RecursiveDir)% (filename)% (rozszerzenie)* .</span><span class="sxs-lookup"><span data-stu-id="a69c5-134">If you wanted to copy the *ExtraFiles* folder itself, the `DestinationRelativePath` value would be *ExtraFiles\%(RecursiveDir)%(Filename)%(Extension)*.</span></span>
3. <span data-ttu-id="a69c5-135">Na końcu pliku przed tagiem zamykającym `</Project>` Dodaj następujący znacznik, który określa, kiedy należy wykonać nowy element docelowy.</span><span class="sxs-lookup"><span data-stu-id="a69c5-135">At the end of the file, before the closing `</Project>` tag, add the following markup that specifies when to execute the new target.</span></span>

    [!code-xml[Main](deploying-extra-files/samples/sample2.xml)]

    <span data-ttu-id="a69c5-136">Ten kod powoduje, że nowy element docelowy `CustomCollectFiles` być wykonywany przy każdym wykonaniu elementu docelowego, który kopiuje pliki do folderu docelowego.</span><span class="sxs-lookup"><span data-stu-id="a69c5-136">This code causes the new `CustomCollectFiles` target to be executed whenever the target that copies files to the destination folder is executed.</span></span> <span data-ttu-id="a69c5-137">Istnieje osobny cel dla tworzenia pakietu do opublikowania i wdrożenia, a nowy element docelowy jest wstrzykiwany w obu obiektach docelowych w przypadku, gdy użytkownik zdecyduje się na wdrożenie przy użyciu pakietu wdrożeniowego zamiast publikowania.</span><span class="sxs-lookup"><span data-stu-id="a69c5-137">There is a separate target for publish versus deployment package creation, and the new target is injected in both targets in case you decide to deploy by using a deployment package instead of publishing.</span></span>

    <span data-ttu-id="a69c5-138">Plik *. pubxml* wygląda teraz podobnie do poniższego przykładu:</span><span class="sxs-lookup"><span data-stu-id="a69c5-138">The *.pubxml* file now looks like the following example:</span></span>

    [!code-xml[Main](deploying-extra-files/samples/sample3.xml?highlight=53-71)]
4. <span data-ttu-id="a69c5-139">Zapisz i zamknij plik *przemieszczania pubxml* .</span><span class="sxs-lookup"><span data-stu-id="a69c5-139">Save and close the *Staging.pubxml* file.</span></span>

## <a name="publish-to-staging"></a><span data-ttu-id="a69c5-140">Publikowanie do przemieszczania</span><span class="sxs-lookup"><span data-stu-id="a69c5-140">Publish to staging</span></span>

<span data-ttu-id="a69c5-141">Za pomocą jednego kliknięcia przycisku Publikuj lub w wierszu polecenia Opublikuj aplikację przy użyciu profilu przemieszczania.</span><span class="sxs-lookup"><span data-stu-id="a69c5-141">Using one-click publish or the command line, publish the application by using the Staging profile.</span></span>

<span data-ttu-id="a69c5-142">Jeśli używasz publikowania jednym kliknięciem, możesz sprawdzić, czy w oknie **podglądu** zostanie skopiowany *plik robots. txt* .</span><span class="sxs-lookup"><span data-stu-id="a69c5-142">If you use one-click publish, you can verify in the **Preview** window that *robots.txt* will be copied.</span></span> <span data-ttu-id="a69c5-143">W przeciwnym razie użyj narzędzia FTP, aby sprawdzić, czy plik *robots. txt* znajduje się w folderze głównym witryny sieci Web po wdrożeniu.</span><span class="sxs-lookup"><span data-stu-id="a69c5-143">Otherwise, use your FTP tool to verify that the *robots.txt* file is in the root folder of the web site after deployment.</span></span>

## <a name="summary"></a><span data-ttu-id="a69c5-144">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="a69c5-144">Summary</span></span>

<span data-ttu-id="a69c5-145">Ta seria samouczków dotyczy wdrażania aplikacji sieci Web ASP.NET w ramach dostawcy hostingu innej firmy.</span><span class="sxs-lookup"><span data-stu-id="a69c5-145">This completes this series of tutorials on deploying an ASP.NET web application to a third-party hosting provider.</span></span> <span data-ttu-id="a69c5-146">Aby uzyskać więcej informacji na temat tematów omówionych w tych samouczkach, zobacz [mapa zawartości wdrożenia ASP.NET](https://go.microsoft.com/fwlink/p/?LinkId=282413).</span><span class="sxs-lookup"><span data-stu-id="a69c5-146">For more information about any of the topics covered in these tutorials, see the [ASP.NET Deployment Content Map](https://go.microsoft.com/fwlink/p/?LinkId=282413).</span></span>

## <a name="more-information"></a><span data-ttu-id="a69c5-147">Więcej informacji</span><span class="sxs-lookup"><span data-stu-id="a69c5-147">More information</span></span>

<span data-ttu-id="a69c5-148">Jeśli wiesz, jak korzystać z plików MSBuild, Możesz zautomatyzować wiele innych zadań wdrażania, pisząc kod w plikach *. pubxml* (dla zadań specyficznych dla profilu) lub pliku Project *. WPP. targets* (dla zadań, które mają zastosowanie do wszystkich profilów).</span><span class="sxs-lookup"><span data-stu-id="a69c5-148">If you know how to work with MSBuild files, you can automate many other deployment tasks by writing code in *.pubxml* files (for profile-specific tasks) or the project *.wpp.targets* file (for tasks that apply to all profiles).</span></span> <span data-ttu-id="a69c5-149">Aby uzyskać więcej informacji na temat plików *. pubxml* i *. WPP. targets* , zobacz [How to: Edit Settings Deployment (pliki. pubxml) i plik. WPP. targets w projektach internetowych programu Visual Studio](https://msdn.microsoft.com/library/ff398069).</span><span class="sxs-lookup"><span data-stu-id="a69c5-149">For more information about *.pubxml* and *.wpp.targets* files, see [How to: Edit Deployment Settings in Publish Profile (.pubxml) Files and the .wpp.targets File in Visual Studio Web Projects](https://msdn.microsoft.com/library/ff398069).</span></span> <span data-ttu-id="a69c5-150">Aby zapoznać się z podstawowymi informacjami o kodzie programu MSBuild, zobacz **anatomię pliku projektu** w [serii wdrożenia w przedsiębiorstwie: Omówienie pliku projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="a69c5-150">For a basic introduction to MSBuild code, see **The Anatomy of a Project File** in [Enterprise Deployment Series: Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span> <span data-ttu-id="a69c5-151">Aby dowiedzieć się, jak korzystać z plików MSBuild do wykonywania zadań we własnych scenariuszach, zobacz tę książkę: [wewnątrz Microsoft Build Engine: korzystanie z programu MSBuild i Team Foundation Build](http://msbuildbook.com) przez Sayed Ibraham Hashimi i William Bartholomew.</span><span class="sxs-lookup"><span data-stu-id="a69c5-151">To learn how to work with MSBuild files to perform tasks for your own scenarios, see this book: [Inside the Microsoft Build Engine: Using MSBuild and Team Foundation Build](http://msbuildbook.com) by Sayed Ibraham Hashimi and William Bartholomew.</span></span>

## <a name="acknowledgements"></a><span data-ttu-id="a69c5-152">Podziękowania</span><span class="sxs-lookup"><span data-stu-id="a69c5-152">Acknowledgements</span></span>

<span data-ttu-id="a69c5-153">Chcę podziękowanie następujące osoby, które złożyły znaczące wkłady w zawartość tej serii samouczków:</span><span class="sxs-lookup"><span data-stu-id="a69c5-153">I would like to thank the following people who made significant contributions to the content of this tutorial series:</span></span>

- [<span data-ttu-id="a69c5-154">Alberto Poblacion, MVP &amp; MCT, Hiszpania</span><span class="sxs-lookup"><span data-stu-id="a69c5-154">Alberto Poblacion, MVP &amp; MCT, Spain</span></span>](https://mvp.microsoft.com/mvp/Alberto%20Poblacion%20Bolano-36772)
- <span data-ttu-id="a69c5-155">Jarod Ferguson, SPECJALISTa ds. projektowania platformy danych, Stany Zjednoczone</span><span class="sxs-lookup"><span data-stu-id="a69c5-155">Jarod Ferguson, Data Platform Development MVP, United States</span></span>
- <span data-ttu-id="a69c5-156">Harsh Mittal, Microsoft</span><span class="sxs-lookup"><span data-stu-id="a69c5-156">Harsh Mittal, Microsoft</span></span>
- <span data-ttu-id="a69c5-157">[Jan Galloway](https://weblogs.asp.net/jgalloway) (twitter: [@jongalloway](http://twitter.com/jongalloway))</span><span class="sxs-lookup"><span data-stu-id="a69c5-157">[Jon Galloway](https://weblogs.asp.net/jgalloway) (twitter: [@jongalloway](http://twitter.com/jongalloway))</span></span>
- [<span data-ttu-id="a69c5-158">Kristina Olson, Microsoft</span><span class="sxs-lookup"><span data-stu-id="a69c5-158">Kristina Olson, Microsoft</span></span>](https://blogs.iis.net/krolson/default.aspx)
- [<span data-ttu-id="a69c5-159">Jan Pope, Microsoft</span><span class="sxs-lookup"><span data-stu-id="a69c5-159">Mike Pope, Microsoft</span></span>](http://www.mikepope.com/blog/DisplayBlog.aspx)
- <span data-ttu-id="a69c5-160">Mohit Srivastava, Microsoft</span><span class="sxs-lookup"><span data-stu-id="a69c5-160">Mohit Srivastava, Microsoft</span></span>
- [<span data-ttu-id="a69c5-161">Raffaele Rialdi, Włochy</span><span class="sxs-lookup"><span data-stu-id="a69c5-161">Raffaele Rialdi, Italy</span></span>](http://www.iamraf.net/)
- [<span data-ttu-id="a69c5-162">Rick Anderson, Microsoft</span><span class="sxs-lookup"><span data-stu-id="a69c5-162">Rick Anderson, Microsoft</span></span>](https://blogs.msdn.com/b/rickandy/)
- <span data-ttu-id="a69c5-163">[Sayed Hashimi, Microsoft](http://sedodream.com/default.aspx)(twitter: [@sayedihashimi](http://twitter.com/sayedihashimi))</span><span class="sxs-lookup"><span data-stu-id="a69c5-163">[Sayed Hashimi, Microsoft](http://sedodream.com/default.aspx)(twitter: [@sayedihashimi](http://twitter.com/sayedihashimi))</span></span>
- <span data-ttu-id="a69c5-164">[Scott Hanselman](http://www.hanselman.com/blog/) (twitter: [@shanselman](http://twitter.com/shanselman))</span><span class="sxs-lookup"><span data-stu-id="a69c5-164">[Scott Hanselman](http://www.hanselman.com/blog/) (twitter: [@shanselman](http://twitter.com/shanselman))</span></span>
- <span data-ttu-id="a69c5-165">[Scott myśliwy, Microsoft](https://blogs.msdn.com/b/scothu/) (twitter: [@coolcsh](http://twitter.com/coolcsh))</span><span class="sxs-lookup"><span data-stu-id="a69c5-165">[Scott Hunter, Microsoft](https://blogs.msdn.com/b/scothu/) (twitter: [@coolcsh](http://twitter.com/coolcsh))</span></span>
- [<span data-ttu-id="a69c5-166">Srđan Božović, Serbia</span><span class="sxs-lookup"><span data-stu-id="a69c5-166">Srđan Božović, Serbia</span></span>](http://msforge.net/blogs/zmajcek/)
- <span data-ttu-id="a69c5-167">[Vishal Joshi, Microsoft](http://vishaljoshi.blogspot.com/) (twitter: [@vishalrjoshi](http://twitter.com/vishalrjoshi))</span><span class="sxs-lookup"><span data-stu-id="a69c5-167">[Vishal Joshi, Microsoft](http://vishaljoshi.blogspot.com/) (twitter: [@vishalrjoshi](http://twitter.com/vishalrjoshi))</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a69c5-168">[Poprzednie](command-line-deployment.md)
> [dalej](troubleshooting.md)</span><span class="sxs-lookup"><span data-stu-id="a69c5-168">[Previous](command-line-deployment.md)
[Next](troubleshooting.md)</span></span>

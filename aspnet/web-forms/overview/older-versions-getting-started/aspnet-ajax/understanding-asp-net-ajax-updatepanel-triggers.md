---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
title: Informacje o wyzwalaczach UpdatePanel ASP.NET AJAX | Microsoft Docs
author: scottcate
description: Podczas pracy w edytorze znaczników w programie Visual Studio możesz zauważyć (z IntelliSense), że istnieją dwa elementy podrzędne formantu UpdatePanel. Jeden z WH...
ms.author: riande
ms.date: 03/12/2008
ms.assetid: faab8503-2984-48a9-8a40-7728461abc50
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
msc.type: authoredcontent
ms.openlocfilehash: b1cc869f373d4f8283b4d92af74707c3f11fef61
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78547454"
---
# <a name="understanding-aspnet-ajax-updatepanel-triggers"></a><span data-ttu-id="2c098-104">Objaśnienie wyzwalaczy UpdatePanel ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="2c098-104">Understanding ASP.NET AJAX UpdatePanel Triggers</span></span>

<span data-ttu-id="2c098-105">przez [Scott Cate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="2c098-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="2c098-106">Pobierz plik PDF</span><span class="sxs-lookup"><span data-stu-id="2c098-106">Download PDF</span></span>](https://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial02_Triggers_cs.pdf)

> <span data-ttu-id="2c098-107">Podczas pracy w edytorze znaczników w programie Visual Studio możesz zauważyć (z IntelliSense), że istnieją dwa elementy podrzędne formantu UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="2c098-107">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an UpdatePanel control.</span></span> <span data-ttu-id="2c098-108">Jednym z nich jest element Triggers, który określa kontrolki na stronie (lub kontrolki użytkownika, jeśli są używane), które będą wyzwalać częściowe renderowanie formantu UpdatePanel, w którym znajduje się element.</span><span class="sxs-lookup"><span data-stu-id="2c098-108">One of which is the Triggers element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the element resides.</span></span>

## <a name="introduction"></a><span data-ttu-id="2c098-109">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="2c098-109">Introduction</span></span>

<span data-ttu-id="2c098-110">Technologia ASP.NET firmy Microsoft zapewnia model programowania zorientowany obiektowo i oparty na zdarzeniach oraz kieruje go do zalet skompilowanego kodu.</span><span class="sxs-lookup"><span data-stu-id="2c098-110">Microsoft's ASP.NET technology brings an object-oriented and event-driven programming model and unites it with the benefits of compiled code.</span></span> <span data-ttu-id="2c098-111">Jednak model przetwarzania po stronie serwera ma kilka wad związanych z technologią, z których wiele może być rozwiązywana przez nowe funkcje zawarte w rozszerzeniach Microsoft ASP.NET AJAX 3,5.</span><span class="sxs-lookup"><span data-stu-id="2c098-111">However, its server-side processing model has several drawbacks inherent in the technology, many of which can be addressed by the new features included in the Microsoft ASP.NET 3.5 AJAX Extensions.</span></span> <span data-ttu-id="2c098-112">Te rozszerzenia umożliwiają korzystanie z wielu nowych zaawansowanych funkcji klienta, w tym częściowego renderowania stron, bez konieczności odświeżania pełnych stron, możliwość uzyskiwania dostępu do usług sieci Web za pośrednictwem skryptu klienta (w tym interfejsu API profilowania ASP.NET) i szerokiego interfejsu API po stronie klienta zaprojektowana do dublowania wielu schematów formantów widzianych w zestawie kontroli po stronie serwera ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="2c098-112">These extensions enable many new rich client features, including partial rendering of pages without requiring a full page refresh, the ability to access Web Services via client script (including the ASP.NET profiling API), and an extensive client-side API designed to mirror many of the control schemes seen in the ASP.NET server-side control set.</span></span>

<span data-ttu-id="2c098-113">Ten oficjalny dokument analizuje funkcje wyzwalaczy XML składnika ASP.NET `UpdatePanel` AJAX.</span><span class="sxs-lookup"><span data-stu-id="2c098-113">This whitepaper examines the XML Triggers functionality of the ASP.NET AJAX `UpdatePanel` component.</span></span> <span data-ttu-id="2c098-114">Wyzwalacze XML zapewniają szczegółową kontrolę nad składnikami, które mogą powodować częściowe renderowanie dla określonych kontrolek UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="2c098-114">XML Triggers give granular control over the components that can cause partial rendering for specific UpdatePanel controls.</span></span>

<span data-ttu-id="2c098-115">Niniejszy dokument jest oparty na wersji beta 2 .NET Framework 3,5 i Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="2c098-115">This whitepaper is based on the Beta 2 release of the .NET Framework 3.5 and Visual Studio 2008.</span></span> <span data-ttu-id="2c098-116">Rozszerzenia AJAX ASP.NET, wcześniej zestaw dodatków, które są przeznaczone dla ASP.NET 2,0, są teraz zintegrowane z biblioteką klas podstawowych .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="2c098-116">The ASP.NET AJAX Extensions, previously an add-on assembly targeted at ASP.NET 2.0, are now integrated into the .NET Framework Base Class Library.</span></span> <span data-ttu-id="2c098-117">W tym dokumencie przyjęto również założenie, że użytkownik pracuje z programem Visual Studio 2008, a nie z Visual Web Developer Express i zapewni wskazówki zgodne z interfejsem użytkownika programu Visual Studio (chociaż listy kodu będą całkowicie zgodne, niezależnie od środowisko programistyczne).</span><span class="sxs-lookup"><span data-stu-id="2c098-117">This whitepaper also assumes that you will be working with Visual Studio 2008, not Visual Web Developer Express, and will provide walkthroughs according to the user interface of Visual Studio (although code listings will be entirely compatible regardless of development environment).</span></span>

## <a name="triggers"></a><span data-ttu-id="2c098-118">*Wyzwalacze*</span><span class="sxs-lookup"><span data-stu-id="2c098-118">*Triggers*</span></span>

<span data-ttu-id="2c098-119">Wyzwalacze dla danego elementu UpdatePanel domyślnie automatycznie zawierają wszystkie kontrolki podrzędne, które wywołują ogłaszanie zwrotne, w tym (na przykład) kontrolki TextBox, które mają właściwość `AutoPostBack` ustawioną na **wartość true**.</span><span class="sxs-lookup"><span data-stu-id="2c098-119">Triggers for a given UpdatePanel, by default, automatically include any child controls that invoke a postback, including (for example) TextBox controls that have their `AutoPostBack` property set to **true**.</span></span> <span data-ttu-id="2c098-120">Wyzwalacze mogą jednak być również uwzględniane deklaratywnie przy użyciu znaczników. jest to wykonywane w sekcji `<triggers>` deklaracji kontrolki UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="2c098-120">However, triggers can also be included declaratively using markup; this is done within the `<triggers>` section of the UpdatePanel control declaration.</span></span> <span data-ttu-id="2c098-121">Chociaż wyzwalacze są dostępne za pośrednictwem właściwości kolekcji `Triggers`, zaleca się zarejestrowanie wszelkich częściowych wyzwalaczy renderowania w czasie wykonywania (na przykład jeśli kontrolka nie jest dostępna w czasie projektowania) przy użyciu metody `RegisterAsyncPostBackControl(Control)` obiektu ScriptManager dla strony w ramach zdarzenia `Page_Load`.</span><span class="sxs-lookup"><span data-stu-id="2c098-121">Although triggers can be accessed via the `Triggers` collection property, it is recommended that you register any partial render triggers at run-time (for instance, if a control is not available at design time) by using the `RegisterAsyncPostBackControl(Control)` method of the ScriptManager object for your page, within the `Page_Load` event.</span></span> <span data-ttu-id="2c098-122">Pamiętaj, że strony są bezstanowe i dlatego należy je ponownie zarejestrować za każdym razem, gdy są tworzone.</span><span class="sxs-lookup"><span data-stu-id="2c098-122">Remember that Pages are stateless, and so you should re-register these controls every time they are created.</span></span>

<span data-ttu-id="2c098-123">Automatyczne dołączanie wyzwalacza podrzędnego może być również wyłączone (w związku z tym, że formanty podrzędne, które tworzą ogłaszanie zwrotne nie wyzwalają automatycznie renderowania częściowego), ustawiając właściwość `ChildrenAsTriggers` na **false**.</span><span class="sxs-lookup"><span data-stu-id="2c098-123">Automatic child trigger inclusion can also be disabled (so that child controls that create postbacks do not automatically trigger partial renders) by setting the `ChildrenAsTriggers` property to **false**.</span></span> <span data-ttu-id="2c098-124">Pozwala to na największą elastyczność przypisywania określonych kontrolek, które mogą wywoływać renderowanie strony, i jest zalecane, aby deweloper mógł odpowiedzieć na zdarzenie, zamiast obsługiwać wszystkie zdarzenia, które mogą wystąpić.</span><span class="sxs-lookup"><span data-stu-id="2c098-124">This allows you the greatest flexibility in assigning which specific controls may invoke a page render, and is recommended, so that a developer will opt-in to respond to an event, rather than handling any events that may arise.</span></span>

<span data-ttu-id="2c098-125">Należy pamiętać, że gdy kontrolki UpdatePanel są zagnieżdżone, gdy element UpdateMode ma wartość **Conditional**, w przypadku wyzwolenia podrzędnego elementu UpdatePanel zostanie odświeżony tylko podrzędny element UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="2c098-125">Note that when UpdatePanel controls are nested, when the UpdateMode is set to **Conditional**, if the child UpdatePanel is triggered, but the parent is not, then only the child UpdatePanel will refresh.</span></span> <span data-ttu-id="2c098-126">Jeśli jednak nadrzędny element UpdatePanel zostanie odświeżony, element podrzędny UpdatePanel również zostanie odświeżony.</span><span class="sxs-lookup"><span data-stu-id="2c098-126">However, if the parent UpdatePanel is refreshed, then the child UpdatePanel will also be refreshed.</span></span>

## <a name="the-lttriggersgt-element"></a><span data-ttu-id="2c098-127">*&lt;wyzwalacze&gt; elementu*</span><span class="sxs-lookup"><span data-stu-id="2c098-127">*The &lt;Triggers&gt; Element*</span></span>

<span data-ttu-id="2c098-128">Podczas pracy w edytorze znaczników w programie Visual Studio możesz zauważyć (z IntelliSense), że istnieją dwa elementy podrzędne formantu `UpdatePanel`.</span><span class="sxs-lookup"><span data-stu-id="2c098-128">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an `UpdatePanel` control.</span></span> <span data-ttu-id="2c098-129">Najczęściej widzianym elementem jest element `<ContentTemplate>`, który zasadniczo hermetyzuje zawartość, która będzie przechowywana przez panel aktualizacji (zawartość, dla której włączane jest renderowanie częściowe).</span><span class="sxs-lookup"><span data-stu-id="2c098-129">The most-frequently seen element is the `<ContentTemplate>` element, which essentially encapsulates the content that will be held by the update panel (the content for which we are enabling partial rendering).</span></span> <span data-ttu-id="2c098-130">Drugi element to `<Triggers>` element, który określa kontrolki na stronie (lub kontrolki użytkownika, jeśli jest używany), które będą wyzwalać częściowe renderowanie formantu UpdatePanel, w którym znajduje się &lt;wyzwalacze&gt; elementu.</span><span class="sxs-lookup"><span data-stu-id="2c098-130">The other element is the `<Triggers>` element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the &lt;Triggers&gt; element resides.</span></span>

<span data-ttu-id="2c098-131">Element `<Triggers>` może zawierać dowolną liczbę każdego z dwóch węzłów podrzędnych: `<asp:AsyncPostBackTrigger>` i `<asp:PostBackTrigger>`.</span><span class="sxs-lookup"><span data-stu-id="2c098-131">The `<Triggers>` element can contain any number each of two child nodes: `<asp:AsyncPostBackTrigger>` and `<asp:PostBackTrigger>`.</span></span> <span data-ttu-id="2c098-132">Oba te elementy akceptują dwa atrybuty, `ControlID` i `EventName`i mogą określać dowolną kontrolę w bieżącej jednostce hermetyzacji (na przykład jeśli formant UpdatePanel znajduje się w kontrolce użytkownika sieci Web, nie należy próbować odwołać się do kontrolki na stronie, w której znajduje się kontrolka użytkownika).</span><span class="sxs-lookup"><span data-stu-id="2c098-132">They both accept two attributes, `ControlID` and `EventName`, and can specify any Control within the current unit of encapsulation (for instance, if your UpdatePanel control resides within a Web User Control, you should not attempt to reference a Control on the Page on which the User Control will reside).</span></span>

<span data-ttu-id="2c098-133">Element `<asp:AsyncPostBackTrigger>` jest szczególnie przydatny w odniesieniu do każdego zdarzenia z formantu, który istnieje jako element podrzędny *dowolnego* formantu UpdatePanel w jednostce hermetyzacji, a nie tylko elementu UpdatePanel, pod którym ten wyzwalacz jest elementem podrzędnym.</span><span class="sxs-lookup"><span data-stu-id="2c098-133">The `<asp:AsyncPostBackTrigger>` element is particularly useful in that it can target any event from a Control that exists as a child of *any* UpdatePanel control in the unit of encapsulation, not just the UpdatePanel under which this trigger is a child.</span></span> <span data-ttu-id="2c098-134">W ten sposób można wykonać każdą kontrolkę, aby wyzwolić aktualizację strony częściowej.</span><span class="sxs-lookup"><span data-stu-id="2c098-134">Thus, any control can be made to trigger a partial page update.</span></span>

<span data-ttu-id="2c098-135">Podobnie element `<asp:PostBackTrigger>` może służyć do wyzwalania częściowego renderowania strony, ale jeden, który wymaga pełnego przeprowadzenia rundy na serwerze.</span><span class="sxs-lookup"><span data-stu-id="2c098-135">Similarly, the `<asp:PostBackTrigger>` element can be used to trigger a partial page render, but one that requires a full round-trip to the server.</span></span> <span data-ttu-id="2c098-136">Tego elementu wyzwalacza można również użyć, aby wymusić renderowanie całej strony, gdy kontrolka w przeciwnym razie normalnie wyzwoli częściowe renderowanie strony (na przykład gdy kontrolka `Button` istnieje w `<ContentTemplate>` elemencie formantu UpdatePanel).</span><span class="sxs-lookup"><span data-stu-id="2c098-136">This trigger element can also be used to force a full page render when a control would otherwise normally trigger a partial page render (for instance, when a `Button` control exists in the `<ContentTemplate>` element of an UpdatePanel control).</span></span> <span data-ttu-id="2c098-137">Ponownie element PostBackTrigger może określić dowolny formant, który jest elementem podrzędnym dowolnego formantu UpdatePanel w bieżącej jednostce hermetyzacji.</span><span class="sxs-lookup"><span data-stu-id="2c098-137">Again, the PostBackTrigger element can specify any control that is a child of any UpdatePanel control in the current unit of encapsulation.</span></span>

## <a name="lttriggersgt-element-reference"></a><span data-ttu-id="2c098-138">*Wyzwalacze &lt;&gt; odwołania do elementu*</span><span class="sxs-lookup"><span data-stu-id="2c098-138">*&lt;Triggers&gt; Element Reference*</span></span>

<span data-ttu-id="2c098-139">*Elementy potomne znaczników:*</span><span class="sxs-lookup"><span data-stu-id="2c098-139">*Markup Descendants:*</span></span>

| <span data-ttu-id="2c098-140">**Tag**</span><span class="sxs-lookup"><span data-stu-id="2c098-140">**Tag**</span></span> | <span data-ttu-id="2c098-141">**Opis**</span><span class="sxs-lookup"><span data-stu-id="2c098-141">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="2c098-142">&lt;ASP: AsyncPostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="2c098-142">&lt;asp:AsyncPostBackTrigger&gt;</span></span> | <span data-ttu-id="2c098-143">Określa kontrolkę i zdarzenie, które spowodują aktualizację strony częściowej dla elementu UpdatePanel, który zawiera odwołanie tego wyzwalacza.</span><span class="sxs-lookup"><span data-stu-id="2c098-143">Specifies a control and event that will cause a partial page update for the UpdatePanel that contains this trigger reference.</span></span> |
| <span data-ttu-id="2c098-144">&lt;ASP: PostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="2c098-144">&lt;asp:PostBackTrigger&gt;</span></span> | <span data-ttu-id="2c098-145">Określa kontrolkę i zdarzenie, które spowodują aktualizację pełnej strony (odświeżanie pełne strony).</span><span class="sxs-lookup"><span data-stu-id="2c098-145">Specifies a control and event that will cause a full page update (a full page refresh).</span></span> <span data-ttu-id="2c098-146">Ten tag może służyć do wymuszania pełnego odświeżenia, gdy kontrolka w przeciwnym razie wyzwolenie renderowania częściowego.</span><span class="sxs-lookup"><span data-stu-id="2c098-146">This tag can be used to force a full refresh when a control would otherwise trigger partial rendering.</span></span> |

## <a name="walkthrough-cross-updatepanel-triggers"></a><span data-ttu-id="2c098-147">*Przewodnik: wyzwalacze krzyżowe-UpdatePanel*</span><span class="sxs-lookup"><span data-stu-id="2c098-147">*Walkthrough: Cross-UpdatePanel Triggers*</span></span>

1. <span data-ttu-id="2c098-148">Utwórz nową stronę ASP.NET z obiektem ScriptManager ustawionym na włączenie renderowania częściowego.</span><span class="sxs-lookup"><span data-stu-id="2c098-148">Create a new ASP.NET page with a ScriptManager object set to enable partial rendering.</span></span> <span data-ttu-id="2c098-149">Dodaj dwa elementy UpdatePanel do tej strony — w pierwszej kolejności Dołącz kontrolkę etykieta (Label1) i dwie kontrolki przycisku (Button1 i Button2).</span><span class="sxs-lookup"><span data-stu-id="2c098-149">Add two UpdatePanels to this page - in the first, include a Label control ( Label1 ) and two Button controls ( Button1 and Button2 ).</span></span> <span data-ttu-id="2c098-150">Button1 powinien powiedzieć, że kliknij, aby zaktualizować zarówno, jak i Button2 powinien powiedzieć, że kliknij, aby zaktualizować ten element, lub coś obok tych wierszy.</span><span class="sxs-lookup"><span data-stu-id="2c098-150">Button1 should say Click to Update Both and Button2 should say Click to Update This, or something along those lines.</span></span> <span data-ttu-id="2c098-151">W drugim elemencie UpdatePanel Uwzględnij tylko kontrolkę etykieta (etykiety 2), ale ustaw jej Właściwość ForeColor na inną niż domyślna, aby odróżnić ją.</span><span class="sxs-lookup"><span data-stu-id="2c098-151">In the second UpdatePanel, include only a Label control ( Label2 ), but set its ForeColor property to something other than the default to differentiate it.</span></span>
2. <span data-ttu-id="2c098-152">Ustaw właściwość UpdateMode obu tagów UpdatePanel na **Conditional**.</span><span class="sxs-lookup"><span data-stu-id="2c098-152">Set the UpdateMode property of both UpdatePanel tags to **Conditional**.</span></span>

<span data-ttu-id="2c098-153">**Listing 1: Markup dla default. aspx:**</span><span class="sxs-lookup"><span data-stu-id="2c098-153">**Listing 1: Markup for default.aspx:**</span></span> 

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample1.aspx)]

1. <span data-ttu-id="2c098-154">W programie obsługi zdarzeń kliknięcia dla Button1 ustaw wartość Label1. Text i etykiety 2. Text na coś zależnego od czasu (np. DateTime. Now. ToLongTimeString ()).</span><span class="sxs-lookup"><span data-stu-id="2c098-154">In the Click event handler for Button1, set Label1.Text and Label2.Text to something time-dependent (such as DateTime.Now.ToLongTimeString()).</span></span> <span data-ttu-id="2c098-155">Dla programu obsługi zdarzeń kliknięcia dla Button2 ustaw wartość w polu Label1. Text.</span><span class="sxs-lookup"><span data-stu-id="2c098-155">For the Click event handler for Button2, set only Label1.Text to the time-dependent value.</span></span>

<span data-ttu-id="2c098-156">**Lista 2: CodeBehind (przycięta) w default.aspx.cs:**</span><span class="sxs-lookup"><span data-stu-id="2c098-156">**Listing 2: Codebehind (trimmed) in default.aspx.cs:**</span></span> 

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample2.cs)]

1. <span data-ttu-id="2c098-157">Naciśnij klawisz F5, aby skompilować i uruchomić projekt.</span><span class="sxs-lookup"><span data-stu-id="2c098-157">Press F5 to build and run the project.</span></span> <span data-ttu-id="2c098-158">Należy pamiętać, że po kliknięciu przycisku Aktualizuj oba panele obie etykiety zmieniają tekst; Jednak po kliknięciu przycisku Aktualizuj ten panel tylko aktualizacje Label1.</span><span class="sxs-lookup"><span data-stu-id="2c098-158">Note that, when you click Update Both Panels, both labels change text; however, when you click Update This Panel, only Label1 updates.</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image2.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image1.png)

<span data-ttu-id="2c098-159">([Kliknij, aby wyświetlić obraz o pełnym rozmiarze](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="2c098-159">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span></span>

## <a name="under-the-hood"></a><span data-ttu-id="2c098-160">*Pod okapem*</span><span class="sxs-lookup"><span data-stu-id="2c098-160">*Under the Hood*</span></span>

<span data-ttu-id="2c098-161">Korzystając ze współtworzonego przykładu, możemy zajrzeć się na to, co robi ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="2c098-161">Utilizing the example we just constructed, we can take a look at what ASP.NET AJAX is doing and how our UpdatePanel cross-panel triggers work.</span></span> <span data-ttu-id="2c098-162">W tym celu będziemy korzystać z wygenerowanego kodu HTML ze źródłem strony, a także rozszerzenia Mozilla Firefox o nazwie FireBug-with, ale będziemy mogli łatwo przeanalizować ogłaszanie zwrotne AJAX.</span><span class="sxs-lookup"><span data-stu-id="2c098-162">To do so, we will work with the generated page source HTML, as well as the Mozilla Firefox extension called FireBug - with it, we can easily examine the AJAX postbacks.</span></span> <span data-ttu-id="2c098-163">Użyjemy również narzędzia reflektora .NET Lutz Roeder.</span><span class="sxs-lookup"><span data-stu-id="2c098-163">We will also use the .NET Reflector tool by Lutz Roeder.</span></span> <span data-ttu-id="2c098-164">Oba te narzędzia są swobodnie dostępne w trybie online i można je znaleźć za pomocą wyszukiwania internetowego.</span><span class="sxs-lookup"><span data-stu-id="2c098-164">Both of these tools are freely available online, and can be found with an internet search.</span></span>

<span data-ttu-id="2c098-165">Badanie kodu źródłowego strony pokazuje niemal poza normalnymi końcami; kontrolki UpdatePanel są renderowane jako kontenery `<div>` i zobaczysz, że zasób skryptu obejmuje dostarczone przez `<asp:ScriptManager>`.</span><span class="sxs-lookup"><span data-stu-id="2c098-165">An examination of the page source code shows almost nothing out of the ordinary; the UpdatePanel controls are rendered as `<div>` containers, and we can see the script resource includes provided by the `<asp:ScriptManager>`.</span></span> <span data-ttu-id="2c098-166">Istnieją także nowe wywołania AJAX specyficzne dla programu PageRequestManager, które są wewnętrzne dla biblioteki skryptów klienta AJAX.</span><span class="sxs-lookup"><span data-stu-id="2c098-166">There are also some new AJAX-specific calls to the PageRequestManager that are internal to the AJAX client script library.</span></span> <span data-ttu-id="2c098-167">Na koniec widzimy dwa kontenery elementu UpdatePanel — jeden z renderowanymi `<input>`mi przyciskami z dwoma `<asp:Label>` kontrolkami renderowanymi jako kontenery `<span>`.</span><span class="sxs-lookup"><span data-stu-id="2c098-167">Finally, we see the two UpdatePanel containers - one with the rendered `<input>` buttons with the two `<asp:Label>` controls rendered as `<span>` containers.</span></span> <span data-ttu-id="2c098-168">(W przypadku inspekcji drzewa DOM w FireBug należy zauważyć, że etykiety są wygaszone, aby wskazać, że nie wytwarzają widocznej zawartości).</span><span class="sxs-lookup"><span data-stu-id="2c098-168">(If you inspect the DOM tree in FireBug, you will notice that the labels are dimmed to indicate that they are not producing visible content).</span></span>

<span data-ttu-id="2c098-169">Kliknij przycisk Aktualizuj ten panel i zwróć uwagę na to, że górny element UpdatePanel zostanie zaktualizowany przy użyciu bieżącego czasu serwera.</span><span class="sxs-lookup"><span data-stu-id="2c098-169">Click the Update This Panel button, and notice the top UpdatePanel will be updated with the current server time.</span></span> <span data-ttu-id="2c098-170">W FireBug, wybierz kartę konsoli, aby można było przeanalizować żądanie.</span><span class="sxs-lookup"><span data-stu-id="2c098-170">In FireBug, choose the Console tab so that you can examine the request.</span></span> <span data-ttu-id="2c098-171">Najpierw przejrzyj parametry żądania POST:</span><span class="sxs-lookup"><span data-stu-id="2c098-171">Examine the POST request parameters first:</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image5.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image4.png)

<span data-ttu-id="2c098-172">([Kliknij, aby wyświetlić obraz o pełnym rozmiarze](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="2c098-172">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span></span>

<span data-ttu-id="2c098-173">Należy zauważyć, że element UpdatePanel został wskazany do kodu AJAX po stronie serwera, który dokładnie określa, że drzewo kontroli zostało wyzwolone za pośrednictwem parametru ScriptManager1: `Button1` kontrolki `UpdatePanel1`.</span><span class="sxs-lookup"><span data-stu-id="2c098-173">Note that the UpdatePanel has indicated to the server-side AJAX code precisely which control tree was fired via the ScriptManager1 parameter: `Button1` of the `UpdatePanel1` control.</span></span> <span data-ttu-id="2c098-174">Teraz kliknij przycisk Aktualizuj oba panele.</span><span class="sxs-lookup"><span data-stu-id="2c098-174">Now, click on the Update Both Panels button.</span></span> <span data-ttu-id="2c098-175">Następnie podczas badania odpowiedzi zobaczymy serię zmiennych, które są rozdzielone potokami, w ciągu; w każdym przypadku zobaczymy najpopularniejszy element UpdatePanel, `UpdatePanel1`, zawiera całościowy kod HTML wysłany do przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="2c098-175">Then, examining the response, we see a pipe-delimited series of variables set in a string; specifically, we see the top UpdatePanel, `UpdatePanel1`, has the entirety of its HTML sent to the browser.</span></span> <span data-ttu-id="2c098-176">Biblioteka skryptów klienta AJAX zastępuje oryginalną zawartość HTML elementu UpdatePanel nową zawartością za pomocą właściwości `.innerHTML` i dlatego serwer wysyła zmienioną zawartość z serwera w formacie HTML.</span><span class="sxs-lookup"><span data-stu-id="2c098-176">The AJAX client script library substitutes the UpdatePanel's original HTML content with the new content via the `.innerHTML` property, and so the server sends the changed content from the server as HTML.</span></span>

<span data-ttu-id="2c098-177">Teraz kliknij przycisk Aktualizuj oba panele i sprawdź wyniki z serwera.</span><span class="sxs-lookup"><span data-stu-id="2c098-177">Now, click on the Update Both Panels button and examine the results from the server.</span></span> <span data-ttu-id="2c098-178">Wyniki są bardzo podobne — oba elementy UpdatePanel otrzymują nowy kod HTML z serwera.</span><span class="sxs-lookup"><span data-stu-id="2c098-178">The results are very similar - both UpdatePanels receive new HTML from the server.</span></span> <span data-ttu-id="2c098-179">Podobnie jak w przypadku poprzedniego wywołania zwrotnego jest wysyłany dodatkowy stan strony.</span><span class="sxs-lookup"><span data-stu-id="2c098-179">As with the previous callback, additional page state is sent.</span></span>

<span data-ttu-id="2c098-180">Jak widać, ponieważ nie jest używany żaden specjalny kod do przeprowadzania ogłaszania zwrotnego AJAX, biblioteka skryptów klienta AJAX jest w stanie przechwycić formularz ogłaszania zwrotnego bez dodatkowego kodu.</span><span class="sxs-lookup"><span data-stu-id="2c098-180">As we can see, because no special code is utilized to perform an AJAX postback, the AJAX client script library is able to intercept form postbacks without any additional code.</span></span> <span data-ttu-id="2c098-181">Formanty serwera automatycznie wykorzystują język JavaScript, aby nie przesyłali automatycznie formularza-ASP.NET automatycznie wprowadza kod do walidacji i stanu formularza, głównie przez automatyczne dołączanie zasobów skryptu, klasy PostBackOptions i Klasa ClientScriptManager.</span><span class="sxs-lookup"><span data-stu-id="2c098-181">Server controls automatically utilize JavaScript so that they do not automatically submit the form - ASP.NET automatically injects code for form validation and state already, primarily achieved by automatic script resource inclusion, the PostBackOptions class, and the ClientScriptManager class.</span></span>

<span data-ttu-id="2c098-182">Na przykład rozważmy kontrolkę CheckBox; Badanie demontażu klasy w reflektorze platformy .NET.</span><span class="sxs-lookup"><span data-stu-id="2c098-182">For instance, consider a CheckBox control; examine the class disassembly in .NET Reflector.</span></span> <span data-ttu-id="2c098-183">W tym celu upewnij się, że zestaw system. Web jest otwarty, i przejdź do klasy `System.Web.UI.WebControls.CheckBox`, otwierając metodę `RenderInputTag`.</span><span class="sxs-lookup"><span data-stu-id="2c098-183">To do so, ensure that your System.Web assembly is open, and navigate to the `System.Web.UI.WebControls.CheckBox` class, opening the `RenderInputTag` method.</span></span> <span data-ttu-id="2c098-184">Poszukaj warunku sprawdzającego Właściwość `AutoPostBack`:</span><span class="sxs-lookup"><span data-stu-id="2c098-184">Look for a conditional that checks the `AutoPostBack` property:</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image8.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image7.png)

<span data-ttu-id="2c098-185">([Kliknij, aby wyświetlić obraz o pełnym rozmiarze](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="2c098-185">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span></span>

<span data-ttu-id="2c098-186">Gdy automatyczne ogłaszanie zwrotne jest włączone w formancie `CheckBox` (za pośrednictwem właściwości autoogłaszania zwrotnego jest prawdziwe), wynikowy tag `<input>` jest renderowany ze skryptem obsługi zdarzeń ASP.NET w jego atrybucie `onclick`.</span><span class="sxs-lookup"><span data-stu-id="2c098-186">When automatic postback is enabled on a `CheckBox` control (via the AutoPostBack property being true), the resultant `<input>` tag is therefore rendered with an ASP.NET event handling script in its `onclick` attribute.</span></span> <span data-ttu-id="2c098-187">Przechwycenie zgłoszenia formularza umożliwia nieinwazyjne doASP.NET AJAX do strony, pomagając uniknąć ewentualnych zmian, które mogą wystąpić, wykorzystując prawdopodobnie nieprecyzyjne zastępowanie ciągów.</span><span class="sxs-lookup"><span data-stu-id="2c098-187">The interception of the form's submission, then, allows ASP.NET AJAX to be injected into the page nonintrusively, helping to avoid any potential breaking changes that might occur by utilizing a possibly-imprecise string replacement.</span></span> <span data-ttu-id="2c098-188">Ponadto umożliwia to *dowolnemu* niestandardowemu formantowi ASP.NET wykorzystanie mocy ASP.NET AJAX bez dodatkowego kodu do obsługi użycia w kontenerze UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="2c098-188">Furthermore, this enables *any* custom ASP.NET control to utilize the power of ASP.NET AJAX without any additional code to support its use within an UpdatePanel container.</span></span>

<span data-ttu-id="2c098-189">Funkcja `<triggers>` odpowiada wartościom inicjowanym w wywołaniu PageRequestManager na \_updateControls (należy zauważyć, że biblioteka skryptów klienta ASP.NET AJAX używa konwencji, które metody, zdarzenia i nazwy pól zaczynające się od podkreślenia są oznaczone jako wewnętrzne i nie są przeznaczone do użycia poza samą biblioteką).</span><span class="sxs-lookup"><span data-stu-id="2c098-189">The `<triggers>` functionality corresponds to the values initialized in the PageRequestManager call to \_updateControls (note that the ASP.NET AJAX client script library utilizes the convention that methods, events, and field names that begin with an underscore are marked as internal, and are not meant for use outside of the library itself).</span></span> <span data-ttu-id="2c098-190">Z działem IT można obserwować, które kontrolki mają na celu spowodowanie ogłaszania zwrotnego AJAX.</span><span class="sxs-lookup"><span data-stu-id="2c098-190">With it, we can observe which controls are intended to cause AJAX postbacks.</span></span>

<span data-ttu-id="2c098-191">Na przykład Dodajmy do strony dwie dodatkowe kontrolki, pozostawiając w całości kontrolki poza elementami UpdatePanel i pozostawiając je w elemencie UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="2c098-191">For example, let's add two additional controls to the page, leaving one control outside of the UpdatePanels entirely, and leaving one within an UpdatePanel.</span></span> <span data-ttu-id="2c098-192">Dodamy kontrolkę CheckBox w obrębie górnego elementu UpdatePanel i porzucasz DropDownList z liczbą kolorów zdefiniowaną na liście.</span><span class="sxs-lookup"><span data-stu-id="2c098-192">We will add a CheckBox control within the upper UpdatePanel, and drop a DropDownList with a number of colors defined within the list.</span></span> <span data-ttu-id="2c098-193">Oto nowe oznakowanie:</span><span class="sxs-lookup"><span data-stu-id="2c098-193">Here is the new markup:</span></span>

<span data-ttu-id="2c098-194">**Lista 3: nowe oznakowanie**</span><span class="sxs-lookup"><span data-stu-id="2c098-194">**Listing 3: New Markup**</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample3.aspx)]

<span data-ttu-id="2c098-195">A oto nowy kod w tle:</span><span class="sxs-lookup"><span data-stu-id="2c098-195">And here is the new code-behind:</span></span>

<span data-ttu-id="2c098-196">**Lista 4: CodeBehind**</span><span class="sxs-lookup"><span data-stu-id="2c098-196">**Listing 4: Codebehind**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample4.cs)]

<span data-ttu-id="2c098-197">Pomysł związany z tą stroną polega na tym, że lista rozwijana wybiera jeden z trzech kolorów do wyświetlania drugiej etykiety, że pole wyboru określa, czy jest pogrubienie, oraz czy etykiety wyświetlają datę oraz godzinę.</span><span class="sxs-lookup"><span data-stu-id="2c098-197">The idea behind this page is that the drop-down list selects one of three colors to show the second label, that the check box determines both whether it is bold, and whether the labels display the date as well as the time.</span></span> <span data-ttu-id="2c098-198">Pole wyboru nie powinno spowodować aktualizacji AJAX, ale lista rozwijana powinna być, nawet jeśli nie znajduje się w elemencie UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="2c098-198">The check box should not cause an AJAX update, but the drop-down list should, even though it is not housed within an UpdatePanel.</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image11.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image10.png)

<span data-ttu-id="2c098-199">([Kliknij, aby wyświetlić obraz o pełnym rozmiarze](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="2c098-199">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span></span>

<span data-ttu-id="2c098-200">Jak widać na powyższym zrzucie ekranu, najnowszy przycisk, który zostanie kliknięty, był prawym przyciskiem myszy Aktualizuj ten panel, który zaktualizował czas pierwszego uruchomienia niezależny od czasu ostatniego.</span><span class="sxs-lookup"><span data-stu-id="2c098-200">As is apparent in the above screen shot, the most-recent button to be clicked was the right button Update This Panel, which updated the top time independent of the bottom time.</span></span> <span data-ttu-id="2c098-201">Data została również przełączona między kliknięciami, ponieważ data jest widoczna na dolnej etykiecie.</span><span class="sxs-lookup"><span data-stu-id="2c098-201">The date was also switched off between clicks, as the date is visible in the bottom label.</span></span> <span data-ttu-id="2c098-202">Na koniec interesu jest kolor dolnej etykiety: został on zaktualizowany niedawno niż tekst etykiety, który pokazuje, że stan kontroli jest istotny, a użytkownicy oczekują, że zostaną zachowani przez ogłaszanie zwrotne AJAX.</span><span class="sxs-lookup"><span data-stu-id="2c098-202">Finally of interest is the bottom label's color: it was updated more recently than the label's text, which demonstrates that control state is important, and users expect it to be preserved through AJAX postbacks.</span></span> <span data-ttu-id="2c098-203">*Jednak*czas nie został zaktualizowany.</span><span class="sxs-lookup"><span data-stu-id="2c098-203">*However*, the time was not updated.</span></span> <span data-ttu-id="2c098-204">Czas został automatycznie ponownie wypełniony przez trwałość pola stan \_\_wartość strony interpretowanej przez środowisko uruchomieniowe ASP.NET, gdy kontrolka była ponownie renderowana na serwerze.</span><span class="sxs-lookup"><span data-stu-id="2c098-204">The time was automatically repopulated through the persistence of the \_\_VIEWSTATE field of the page being interpreted by the ASP.NET runtime when the control was being re-rendered on the server.</span></span> <span data-ttu-id="2c098-205">Kod serwera ASP.NET AJAX nie rozpoznaje metod, w których kontrolki zmieniają stan; po prostu ponownie wypełnia stan widoku, a następnie uruchamia odpowiednie zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="2c098-205">The ASP.NET AJAX server code does not recognize in which methods the controls are changing state; it simply repopulates from view state and then runs the events that are appropriate.</span></span>

<span data-ttu-id="2c098-206">Należy jednak pamiętać, że po zainicjowaniu czasu w trakcie zdarzenia ładowania strony\_czas został zwiększony poprawnie.</span><span class="sxs-lookup"><span data-stu-id="2c098-206">It should be pointed out, however, that had I initialized the time within the Page\_Load event, the time would have been incremented correctly.</span></span> <span data-ttu-id="2c098-207">W związku z tym deweloperzy powinni mieć ostrożność, że odpowiedni kod jest uruchamiany podczas odpowiednich programów obsługi zdarzeń, i unikaj stosowania\_ładowania strony, gdy program obsługi zdarzeń sterowania będzie odpowiedni.</span><span class="sxs-lookup"><span data-stu-id="2c098-207">Consequently, developers should be wary that the appropriate code is being run during the appropriate event handlers, and avoid use of Page\_Load when a control event handler would be appropriate.</span></span>

## <a name="summary"></a><span data-ttu-id="2c098-208">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="2c098-208">Summary</span></span>

<span data-ttu-id="2c098-209">Formant UpdatePanel rozszerzeń ASP.NET AJAX jest uniwersalny i może korzystać z szeregu metod identyfikacji zdarzeń kontroli, które powinny spowodować ich aktualizację.</span><span class="sxs-lookup"><span data-stu-id="2c098-209">The ASP.NET AJAX Extensions UpdatePanel control is versatile, and can utilize a number of methods for identifying control events that should cause it to be updated.</span></span> <span data-ttu-id="2c098-210">Obsługuje on automatyczne aktualizowanie przez jego kontrolki podrzędne, ale może także reagować na zdarzenia kontroli w innym miejscu na stronie.</span><span class="sxs-lookup"><span data-stu-id="2c098-210">It supports being updated automatically by its child controls, but can also respond to control events elsewhere on the page.</span></span>

<span data-ttu-id="2c098-211">Aby zmniejszyć liczbę potencjalnych operacji ładowania serwera, zaleca się, aby Właściwość `ChildrenAsTriggers` elementu UpdatePanel była ustawiona na wartość `false`, a zdarzenia te są uwzględniane domyślnie.</span><span class="sxs-lookup"><span data-stu-id="2c098-211">To reduce potential for server processing load, it is recommended that the `ChildrenAsTriggers` property of an UpdatePanel be set to `false`, and that events be opted-into rather than included by default.</span></span> <span data-ttu-id="2c098-212">Zapobiega to również niepotrzebnym zdarzeniom spowodowanym potencjalnie niechcianymi skutkami, w tym walidacją i zmianami pól wejściowych.</span><span class="sxs-lookup"><span data-stu-id="2c098-212">This also prevents any unneeded events from causing potentially-unwanted effects, including validation, and changes to input fields.</span></span> <span data-ttu-id="2c098-213">Te typy usterek mogą być trudne do odizolowania, ponieważ strona jest aktualizowana w sposób niewidoczny dla użytkownika i powód może nie być natychmiast oczywisty.</span><span class="sxs-lookup"><span data-stu-id="2c098-213">These types of bugs may be difficult to isolate, because the page updates transparently to the user, and the cause may therefore not be immediately obvious.</span></span>

<span data-ttu-id="2c098-214">Badając wewnętrzne działania modelu przechwycenia w formie ASP.NET AJAX, mogliśmy określić, że wykorzystuje platformę już zapewnioną przez ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="2c098-214">By examining the inner workings of the ASP.NET AJAX form post interception model, we were able to determine that it utilizes the framework already provided by ASP.NET.</span></span> <span data-ttu-id="2c098-215">W tym celu zachowuje ona maksymalną zgodność z kontrolkami zaprojektowanymi przy użyciu tej samej struktury i zapewnia intruzom niewielkie zastosowanie do dodatkowego kodu JavaScript napisanego na stronie.</span><span class="sxs-lookup"><span data-stu-id="2c098-215">In doing so, it preserves maximum compatibility with controls designed using the same framework, and intrudes minimally on any additional JavaScript written for the page.</span></span>

## <a name="bio"></a><span data-ttu-id="2c098-216">Materiał</span><span class="sxs-lookup"><span data-stu-id="2c098-216">Bio</span></span>

<span data-ttu-id="2c098-217">Rob Paveza jest starszym deweloperem aplikacji .NET w firmie Terralever ([www.Terralever.com](http://www.terralever.com)), wiodącym interaktywnym przedsiębiorstwem marketingu w Tempe, AZ.</span><span class="sxs-lookup"><span data-stu-id="2c098-217">Rob Paveza is a senior .NET application developer at Terralever ([www.terralever.com](http://www.terralever.com)), a leading interactive marketing firm in Tempe, AZ.</span></span> <span data-ttu-id="2c098-218">Można go osiągnąć w [robpaveza@gmail.com](mailto:robpaveza@gmail.com), a jego blog znajduje się w [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span><span class="sxs-lookup"><span data-stu-id="2c098-218">He can be reached at [robpaveza@gmail.com](mailto:robpaveza@gmail.com), and his blog is located at [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span></span>

<span data-ttu-id="2c098-219">Scott Cate pracował z technologiami sieci Web firmy Microsoft od 1997 i jest prezydentem myKB.com ([www.myKB.com](http://www.myKB.com)), w którym wyspecjalizowany jest pisanie aplikacji opartych na ASP.NET, które są zgodne z podstawowymi rozwiązaniami oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="2c098-219">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="2c098-220">W witrynie Scotta można skontaktować się z pocztą e-mail na [scott.cate@myKB.com](mailto:scott.cate@myKB.com) lub w blogu w witrynie [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="2c098-220">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="2c098-221">[Poprzednie](understanding-partial-page-updates-with-asp-net-ajax.md)
> [dalej](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span><span class="sxs-lookup"><span data-stu-id="2c098-221">[Previous](understanding-partial-page-updates-with-asp-net-ajax.md)
[Next](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span></span>

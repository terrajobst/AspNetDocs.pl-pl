---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-web-services
title: Omówienie usług sieci Web programu ASP.NET AJAX | Dokumentacja firmy Microsoft
author: scottcate
description: Usługi sieci Web są integralną częścią programu .NET framework, które stanowią rozwiązanie dla wielu platform wymiany danych między systemami rozproszonymi. Mimo że w sieci Web...
ms.author: riande
ms.date: 03/28/2008
ms.assetid: 3332d6e7-e2e1-4144-b805-e71d51e7e415
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-web-services
msc.type: authoredcontent
ms.openlocfilehash: e576e11d63f940f1683ed26d217ff255a31b007c
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/09/2019
ms.locfileid: "59388416"
---
# <a name="understanding-aspnet-ajax-web-services"></a><span data-ttu-id="645c8-104">Objaśnienie usług internetowych ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="645c8-104">Understanding ASP.NET AJAX Web Services</span></span>

<span data-ttu-id="645c8-105">przez [Scott Cate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="645c8-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="645c8-106">Pobierz plik PDF</span><span class="sxs-lookup"><span data-stu-id="645c8-106">Download PDF</span></span>](http://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial05_Web_Services_with_MS_Ajax_cs.pdf)

> <span data-ttu-id="645c8-107">Usługi sieci Web są integralną częścią programu .NET framework, które stanowią rozwiązanie dla wielu platform wymiany danych między systemami rozproszonymi.</span><span class="sxs-lookup"><span data-stu-id="645c8-107">Web Services are an integral part of the .NET framework that provide a cross-platform solution for exchanging data between distributed systems.</span></span> <span data-ttu-id="645c8-108">Mimo, że usługi sieci Web są zwykle używane do różnych systemów operacyjnych, modele obiektów i języków programowania może wysyłać i odbierać dane, mogą też można dynamicznie Wstawianie danych do strony ASP.NET AJAX, lub wysłać dane ze strony do systemu zaplecza.</span><span class="sxs-lookup"><span data-stu-id="645c8-108">Although Web Services are normally used to allow different operating systems, object models and programming languages to send and receive data, they can also be used to dynamically inject data into an ASP.NET AJAX page or send data from a page to a back-end system.</span></span> <span data-ttu-id="645c8-109">Wszystko to może odbywać się bez konieczności uciekania się operacji odświeżania.</span><span class="sxs-lookup"><span data-stu-id="645c8-109">All of this can be done without resorting to postback operations.</span></span>


## <a name="calling-web-services-with-aspnet-ajax"></a><span data-ttu-id="645c8-110">Wywołanie usługi sieci Web przy użyciu rozszerzeń ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="645c8-110">Calling Web Services with ASP.NET AJAX</span></span>

<span data-ttu-id="645c8-111">DaN Wahlin</span><span class="sxs-lookup"><span data-stu-id="645c8-111">Dan Wahlin</span></span>

<span data-ttu-id="645c8-112">Usługi sieci Web są integralną częścią programu .NET framework, które stanowią rozwiązanie dla wielu platform wymiany danych między systemami rozproszonymi.</span><span class="sxs-lookup"><span data-stu-id="645c8-112">Web Services are an integral part of the .NET framework that provide a cross-platform solution for exchanging data between distributed systems.</span></span> <span data-ttu-id="645c8-113">Mimo, że usługi sieci Web są zwykle używane do różnych systemów operacyjnych, modele obiektów i języków programowania może wysyłać i odbierać dane, mogą też można dynamicznie Wstawianie danych do strony ASP.NET AJAX, lub wysłać dane ze strony do systemu zaplecza.</span><span class="sxs-lookup"><span data-stu-id="645c8-113">Although Web Services are normally used to allow different operating systems, object models and programming languages to send and receive data, they can also be used to dynamically inject data into an ASP.NET AJAX page or send data from a page to a back-end system.</span></span> <span data-ttu-id="645c8-114">Wszystko to może odbywać się bez konieczności uciekania się operacji odświeżania.</span><span class="sxs-lookup"><span data-stu-id="645c8-114">All of this can be done without resorting to postback operations.</span></span>

<span data-ttu-id="645c8-115">Gdy kontrola kontrolki UpdatePanel ASP.NET AJAX zapewnia prosty sposób AJAX Włącz dowolnej strony ASP.NET, mogą wystąpić sytuacje, gdy potrzebujesz dynamicznie dostępu do danych na serwerze bez korzystania z UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="645c8-115">While the ASP.NET AJAX UpdatePanel control provides a simple way to AJAX enable any ASP.NET page, there may be times when you need to dynamically access data on the server without using an UpdatePanel.</span></span> <span data-ttu-id="645c8-116">W tym artykule pokazano, jak można to osiągnąć, tworząc i korzystanie z usług sieci Web w technologii ASP.NET AJAX stron.</span><span class="sxs-lookup"><span data-stu-id="645c8-116">In this article you'll see how to accomplish this by creating and consuming Web Services within ASP.NET AJAX pages.</span></span>

<span data-ttu-id="645c8-117">Ten artykuł koncentruje się na funkcje dostępne w rozszerzenia AJAX programu ASP.NET core, a także kontrolki włączona usługa sieci Web w zestawie narzędzi programu ASP.NET AJAX o nazwie AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="645c8-117">This article will focus on functionality available in the core ASP.NET AJAX Extensions as well as a Web Service enabled control in the ASP.NET AJAX Toolkit called the AutoCompleteExtender.</span></span> <span data-ttu-id="645c8-118">Omówione zostały między innymi zdefiniowanie usług sieci Web z włączoną obsługą technologii AJAX, tworzenie serwerów proxy klienta i wywoływania usługi sieci Web za pomocą języka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="645c8-118">Topics covered include defining AJAX-enabled Web Services, creating client proxies and calling Web Services with JavaScript.</span></span> <span data-ttu-id="645c8-119">Zobaczysz również, jak usługa sieci Web wywołań bezpośrednio do metody strony ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="645c8-119">You'll also see how Web Service calls can be made directly to ASP.NET page methods.</span></span>

## <a name="web-services-configuration"></a><span data-ttu-id="645c8-120">Konfiguracja usługi sieci Web</span><span class="sxs-lookup"><span data-stu-id="645c8-120">Web Services Configuration</span></span>

<span data-ttu-id="645c8-121">Po utworzeniu nowego projektu witryny sieci Web za pomocą programu Visual Studio 2008 plik web.config zawiera szereg nowości, które mogą być nieznane użytkownicy poprzednich wersji programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="645c8-121">When a new Web Site project is created with Visual Studio 2008, the web.config file has a number of new additions that may be unfamiliar to users of previous versions of Visual Studio.</span></span> <span data-ttu-id="645c8-122">Prefiks "asp" niektóre z tych zmian mapy do kontrolek ASP.NET AJAX, dzięki czemu mogą być używane na stronach, ale inne zdefiniuj wymagane HttpHandlers i elementy HttpModule.</span><span class="sxs-lookup"><span data-stu-id="645c8-122">Some of these modifications map the "asp" prefix to ASP.NET AJAX controls so they can be used in pages while others define required HttpHandlers and HttpModules.</span></span> <span data-ttu-id="645c8-123">Wyświetlanie listy 1 zawiera modyfikacje wprowadzone do `<httpHandlers>` elementu w pliku web.config, który wpływa na wywołania usługi sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-123">Listing 1 shows modifications made to the `<httpHandlers>` element in web.config that affects Web Service calls.</span></span> <span data-ttu-id="645c8-124">Domyślne HttpHandler używani do przetwarzania wywołań .asmx została usunięta i zastąpiona przy użyciu klasy ScriptHandlerFactory znajduje się w zestawie System.Web.Extensions.dll.</span><span class="sxs-lookup"><span data-stu-id="645c8-124">The default HttpHandler used to process .asmx calls is removed and replaced with a ScriptHandlerFactory class located in the System.Web.Extensions.dll assembly.</span></span> <span data-ttu-id="645c8-125">System.Web.Extensions.dll zawiera wszystkie najważniejsze funkcje używane przez program ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="645c8-125">System.Web.Extensions.dll contains all of the core functionality used by ASP.NET AJAX.</span></span>

**<span data-ttu-id="645c8-126">Wyświetlanie listy 1.</span><span class="sxs-lookup"><span data-stu-id="645c8-126">Listing 1.</span></span> <span data-ttu-id="645c8-127">Konfiguracji obsługi dla usługi sieci Web platformy ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="645c8-127">ASP.NET AJAX Web Service Handler Configuration</span></span>**

[!code-xml[Main](understanding-asp-net-ajax-web-services/samples/sample1.xml)]

<span data-ttu-id="645c8-128">Ta zastępowania HttpHandler składa się w celu umożliwienia wywołania języka JavaScript Object Notation (JSON) ma zostać wykonane na stronach ASP.NET AJAX do usług sieci Web platformy .NET przy użyciu serwera proxy usługi sieci Web języka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="645c8-128">This HttpHandler replacement is made in order to allow JavaScript Object Notation (JSON) calls to be made from ASP.NET AJAX pages to .NET Web Services using a JavaScript Web Service proxy.</span></span> <span data-ttu-id="645c8-129">ASP.NET AJAX wysyła komunikaty JSON do usług sieci Web, w przeciwieństwie do standardowych wywołań proste obiektu dostępu protokołu (SOAP) zazwyczaj są skojarzone z usługami sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-129">ASP.NET AJAX sends JSON messages to Web Services as opposed to the standard Simple Object Access Protocol (SOAP) calls typically associated with Web Services.</span></span> <span data-ttu-id="645c8-130">Skutkuje to mniejsze żądania i ogólną wiadomości odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="645c8-130">This results in smaller request and response messages overall.</span></span> <span data-ttu-id="645c8-131">Umożliwia ona również bardziej wydajne przetwarzanie danych po stronie klienta, ponieważ biblioteka ASP.NET AJAX JavaScript jest zoptymalizowana pod kątem pracy z obiektami JSON.</span><span class="sxs-lookup"><span data-stu-id="645c8-131">It also allows for more efficient client-side processing of data since the ASP.NET AJAX JavaScript library is optimized to work with JSON objects.</span></span> <span data-ttu-id="645c8-132">Wyświetlanie listy 2 i 3 wyświetlania listy przedstawiają przykłady komunikatów żądań i odpowiedzi usługi sieci Web serializowany do formatu JSON.</span><span class="sxs-lookup"><span data-stu-id="645c8-132">Listing 2 and Listing 3 show examples of Web Service request and response messages serialized to JSON format.</span></span> <span data-ttu-id="645c8-133">Komunikat żądania, pokazane w ofercie 2 przekazuje parametr kraju z wartością "Belgia", gdy komunikat odpowiedzi w ofercie 3 przekazuje tablicę obiektów klienta i skojarzonych z nimi właściwości.</span><span class="sxs-lookup"><span data-stu-id="645c8-133">The request message shown in Listing 2 passes a country parameter with a value of "Belgium" while the response message in Listing 3 passes an array of Customer objects and their associated properties.</span></span>

**<span data-ttu-id="645c8-134">Wyświetlanie listy 2.</span><span class="sxs-lookup"><span data-stu-id="645c8-134">Listing 2.</span></span> <span data-ttu-id="645c8-135">Komunikat żądania usługi sieci Web serializować do notacji JSON</span><span class="sxs-lookup"><span data-stu-id="645c8-135">Web Service Request Message Serialized to JSON</span></span>**

[!code-json[Main](understanding-asp-net-ajax-web-services/samples/sample2.json)]

> *> [!NOTE]
> <span data-ttu-id="645c8-136">Nazwa operacji jest zdefiniowany jako część adresu URL usługi sieci web; Ponadto komunikatów żądania nie są zawsze przesyłane za pośrednictwem JSON.</span><span class="sxs-lookup"><span data-stu-id="645c8-136">the operation name is defined as part of the URL to the web service; additionally, request messages are not always submitted via JSON.</span></span> <span data-ttu-id="645c8-137">Usługi sieci Web mogą korzystać z atrybutu ScriptMethod z parametrem UseHttpGet ustawionym na wartość true, co powoduje, że parametry, które zostaną przekazane za pośrednictwem parametrów ciągu zapytania.</span><span class="sxs-lookup"><span data-stu-id="645c8-137">Web Services can utilize the ScriptMethod attribute with the UseHttpGet parameter set to true, which causes parameters to be passed via a the query string parameters.</span></span>*


**<span data-ttu-id="645c8-138">Wyświetlanie listy 3.</span><span class="sxs-lookup"><span data-stu-id="645c8-138">Listing 3.</span></span> <span data-ttu-id="645c8-139">Komunikat odpowiedzi usługi sieci Web serializować do notacji JSON</span><span class="sxs-lookup"><span data-stu-id="645c8-139">Web Service Response Message Serialized to JSON</span></span>**

[!code-json[Main](understanding-asp-net-ajax-web-services/samples/sample3.json)]

<span data-ttu-id="645c8-140">W następnej sekcji pokazano, jak utworzyć zdolne do obsługi komunikatów żądania JSON i odpowiada za pomocą proste i złożone typy usług sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-140">In the next section you'll see how to create Web Services capable of handling JSON request messages and responding with both simple and complex types.</span></span>

## <a name="creating-ajax-enabled-web-services"></a><span data-ttu-id="645c8-141">Tworzenie usługi sieci Web z włączoną obsługą technologii AJAX</span><span class="sxs-lookup"><span data-stu-id="645c8-141">Creating AJAX-Enabled Web Services</span></span>

<span data-ttu-id="645c8-142">Struktura ASP.NET AJAX zapewnia kilka różnych sposobów w celu wywołania usługi sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-142">The ASP.NET AJAX framework provides several different ways to call Web Services.</span></span> <span data-ttu-id="645c8-143">Można użyć formantu AutoCompleteExtender (dostępne w zestawie narzędzi programu ASP.NET AJAX) lub JavaScript.</span><span class="sxs-lookup"><span data-stu-id="645c8-143">You can use the AutoCompleteExtender control (available in the ASP.NET AJAX Toolkit) or JavaScript.</span></span> <span data-ttu-id="645c8-144">Jednak przed wywołaniem usługi musisz AJAX — Włączanie go tak, aby go może być wywoływany przez kod skryptu klienta.</span><span class="sxs-lookup"><span data-stu-id="645c8-144">However, before calling a service you have to AJAX-enable it so that it can be called by client-script code.</span></span>

<span data-ttu-id="645c8-145">Czy jesteś nowym użytkownikiem usługi sieci Web platformy ASP.NET, znajdują się bardzo proste tworzenie i usługi z obsługą technologii AJAX.</span><span class="sxs-lookup"><span data-stu-id="645c8-145">Whether or not you're new to ASP.NET Web Services, you'll find it straightforward to create and AJAX-enable services.</span></span> <span data-ttu-id="645c8-146">Program .NET framework jest obsługiwany tworzenia usług sieci Web ASP.NET od początkowego wydania w 2002 roku i rozszerzenia AJAX programu ASP.NET zapewnia dodatkowe funkcje AJAX, która opiera się na domyślny zestaw funkcji programu .NET framework.</span><span class="sxs-lookup"><span data-stu-id="645c8-146">The .NET framework has supported the creation of ASP.NET Web Services since its initial release in 2002 and the ASP.NET AJAX Extensions provide additional AJAX functionality that builds upon the .NET framework's default set of features.</span></span> <span data-ttu-id="645c8-147">Visual Studio .NET 2008 Beta 2 ma wbudowaną obsługę tworzenia plików usługi sieci Web asmx i automatycznie pochodzi od klasy System.Web.Services.WebService klasy skojarzonego kodu obok klasy.</span><span class="sxs-lookup"><span data-stu-id="645c8-147">Visual Studio .NET 2008 Beta 2 has built-in support for creating .asmx Web Service files and automatically derives associated code beside classes from the System.Web.Services.WebService class.</span></span> <span data-ttu-id="645c8-148">W miarę dodawania metody do klasy, należy zastosować atrybut WebMethod, w kolejności ich wywołania przez klientów usługi sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-148">As you add methods into the class you must apply the WebMethod attribute in order for them to be called by Web Service consumers.</span></span>

<span data-ttu-id="645c8-149">Wyświetlanie listy 4 przedstawiono przykład zastosowania atrybutu WebMethod do metodę o nazwie GetCustomersByCountry().</span><span class="sxs-lookup"><span data-stu-id="645c8-149">Listing 4 shows an example of applying the WebMethod attribute to a method named GetCustomersByCountry().</span></span>

**<span data-ttu-id="645c8-150">Wyświetlanie listy 4.</span><span class="sxs-lookup"><span data-stu-id="645c8-150">Listing 4.</span></span> <span data-ttu-id="645c8-151">W usłudze sieci Web za pomocą atrybutu WebMethod</span><span class="sxs-lookup"><span data-stu-id="645c8-151">Using the WebMethod Attribute in a Web Service</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample4.cs)]

<span data-ttu-id="645c8-152">Metoda GetCustomersByCountry() akceptuje parametr kraju i zwraca tablicę obiektów klienta.</span><span class="sxs-lookup"><span data-stu-id="645c8-152">The GetCustomersByCountry() method accepts a country parameter and returns a Customer object array.</span></span> <span data-ttu-id="645c8-153">Wartość kraju, przekazana do metody jest przekazywany do klasy warstwy biznesowej, który z kolei wywołuje klasy warstwy danych, aby pobrać dane z bazy danych, wypełnij właściwości obiektu klienta przy użyciu danych i zwracają tablicy.</span><span class="sxs-lookup"><span data-stu-id="645c8-153">The country value passed into the method is forwarded to a business layer class which in turn calls a data layer class to retrieve the data from the database, fill the Customer object properties with data and return the array.</span></span>

## <a name="using-the-scriptservice-attribute"></a><span data-ttu-id="645c8-154">Za pomocą atrybutu ScriptService</span><span class="sxs-lookup"><span data-stu-id="645c8-154">Using the ScriptService Attribute</span></span>

<span data-ttu-id="645c8-155">Podczas dodawania WebMethod atrybut umożliwia metoda GetCustomersByCountry() ma zostać wywołana przez klientów wysyłających standardowe komunikaty protokołu SOAP z usługą sieci Web, on nie zezwala na wywołania JSON ma zostać wykonane z poziomu aplikacji ASP.NET AJAX gotowe.</span><span class="sxs-lookup"><span data-stu-id="645c8-155">While adding the WebMethod attribute allows the GetCustomersByCountry() method to be called by clients that send standard SOAP messages to the Web Service, it doesn't allow JSON calls to be made from ASP.NET AJAX applications out of the box.</span></span> <span data-ttu-id="645c8-156">Aby zezwolić na wywołania JSON ma zostać wykonane, masz w celu zastosowania rozszerzenia AJAX programu ASP.NET `ScriptService` atrybutów do klasy usługi sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-156">To allow JSON calls to be made you have to apply the ASP.NET AJAX Extension's `ScriptService` attribute to the Web Service class.</span></span> <span data-ttu-id="645c8-157">To pozwala usłudze sieci Web do wysyłania wiadomości odpowiedzi, sformatowany przy użyciu formatu JSON oraz umożliwia skryptu po stronie klienta do wywołania usługi przez wysyłanie komunikatów JSON.</span><span class="sxs-lookup"><span data-stu-id="645c8-157">This enables a Web Service to send response messages formatted using JSON and allows client-side script to call a service by sending JSON messages.</span></span>

<span data-ttu-id="645c8-158">Wyświetlanie listy 5 pokazano przykład zastosowania atrybutu ScriptService do klasy usługi sieci Web o nazwie CustomersService.</span><span class="sxs-lookup"><span data-stu-id="645c8-158">Listing 5 shows an example of applying the ScriptService attribute to a Web Service class named CustomersService.</span></span>

**<span data-ttu-id="645c8-159">Wyświetlanie listy 5.</span><span class="sxs-lookup"><span data-stu-id="645c8-159">Listing 5.</span></span> <span data-ttu-id="645c8-160">Za pomocą atrybutu ScriptService AJAX — Włączanie usługi sieci Web</span><span class="sxs-lookup"><span data-stu-id="645c8-160">Using the ScriptService Attribute to AJAX-enable a Web Service</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample5.cs)]

<span data-ttu-id="645c8-161">Atrybut ScriptService działa jako znacznik, który wskazuje, że może ona zostać wywołana z kod skryptu AJAX.</span><span class="sxs-lookup"><span data-stu-id="645c8-161">The ScriptService attribute acts as a marker that indicates it can be called from AJAX script code.</span></span> <span data-ttu-id="645c8-162">Faktycznie nie obsługuje JSON serializacji lub deserializacji zadań, które występują w tle.</span><span class="sxs-lookup"><span data-stu-id="645c8-162">It doesn't actually handle any of the JSON serialization or deserialization tasks that occur behind the scenes.</span></span> <span data-ttu-id="645c8-163">ScriptHandlerFactory (skonfigurowane w pliku web.config) oraz innych powiązanych klas do zbiorczego przetwarzania JSON.</span><span class="sxs-lookup"><span data-stu-id="645c8-163">The ScriptHandlerFactory (configured in web.config) and other related classes do the bulk of JSON processing.</span></span>

## <a name="using-the-scriptmethod-attribute"></a><span data-ttu-id="645c8-164">Za pomocą atrybutu ScriptMethod</span><span class="sxs-lookup"><span data-stu-id="645c8-164">Using the ScriptMethod Attribute</span></span>

<span data-ttu-id="645c8-165">Atrybut ScriptService jest to jedyny atrybut ASP.NET AJAX, który ma być zdefiniowany w usłudze sieci Web platformy .NET w celu użycia go do użycia przez strony ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="645c8-165">The ScriptService attribute is the only ASP.NET AJAX attribute that has to be defined in a .NET Web Service in order for it to be used by ASP.NET AJAX pages.</span></span> <span data-ttu-id="645c8-166">Jednak innego atrybutu o nazwie ScriptMethod mogą być stosowane bezpośrednio do metody sieci Web w usłudze.</span><span class="sxs-lookup"><span data-stu-id="645c8-166">However, another attribute named ScriptMethod can also be applied directly to Web Methods in a service.</span></span> <span data-ttu-id="645c8-167">ScriptMethod definiuje trzy właściwości, w tym `UseHttpGet`, `ResponseFormat` i `XmlSerializeString`.</span><span class="sxs-lookup"><span data-stu-id="645c8-167">ScriptMethod defines three properties including `UseHttpGet`, `ResponseFormat` and `XmlSerializeString`.</span></span> <span data-ttu-id="645c8-168">Zmiana wartości tych właściwości może być przydatne w sytuacjach, w którym typ żądania akceptowane przez metody sieci Web musi zostać zmienione GET, gdy metoda sieci Web musi zwracać pierwotne dane XML w formie `XmlDocument` lub `XmlElement` obiekt lub gdy dane są zwracane z  usługi zawsze powinien zostać Zserializowany jako XML zamiast JSON.</span><span class="sxs-lookup"><span data-stu-id="645c8-168">Changing the values of these properties can be useful in cases where the type of request accepted by a Web Method needs to be changed to GET, when a Web Method needs to return raw XML data in the form of an `XmlDocument` or `XmlElement` object or when data returned from a service should always be serialized as XML instead of JSON.</span></span>

<span data-ttu-id="645c8-169">UseHttpGet, właściwości mogą być używane, gdy metoda sieci Web powinna obsługiwać pobieranie żądań, w przeciwieństwie do żądania POST.</span><span class="sxs-lookup"><span data-stu-id="645c8-169">The UseHttpGet property can be used when a Web Method should accept GET requests as opposed to POST requests.</span></span> <span data-ttu-id="645c8-170">Żądania wysyłane za pomocą adresu URL z parametrami wejściowymi metody sieci Web przeniesiona do parametry QueryString.</span><span class="sxs-lookup"><span data-stu-id="645c8-170">Requests are sent using a URL with Web Method input parameters converted to QueryString parameters.</span></span> <span data-ttu-id="645c8-171">UseHttpGet właściwości wartość domyślna to false i tylko powinna być równa `true` podczas operacji są znane jako bezpieczne i kiedy dane poufne nie zostanie przekazany do usługi sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-171">The UseHttpGet property defaults to false and should only be set to `true` when operations are known to be safe and when sensitive data is not passed to a Web Service.</span></span> <span data-ttu-id="645c8-172">Wyświetlanie listy 6 przedstawia przykład za pomocą atrybutu ScriptMethod z właściwością UseHttpGet.</span><span class="sxs-lookup"><span data-stu-id="645c8-172">Listing 6 shows an example of using the ScriptMethod attribute with the UseHttpGet property.</span></span>

**<span data-ttu-id="645c8-173">Wyświetlanie listy 6.</span><span class="sxs-lookup"><span data-stu-id="645c8-173">Listing 6.</span></span> <span data-ttu-id="645c8-174">Za pomocą atrybutu ScriptMethod z właściwością UseHttpGet.</span><span class="sxs-lookup"><span data-stu-id="645c8-174">Using the ScriptMethod attribute with the UseHttpGet property.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample6.cs)]

<span data-ttu-id="645c8-175">Przykładem nagłówki wysyłane, gdy wywoływana jest metoda sieci Web HttpGetEcho, które są wyświetlane w ofercie 6 są wyświetlane dalej:</span><span class="sxs-lookup"><span data-stu-id="645c8-175">An example of the headers sent when the HttpGetEcho Web Method shown in Listing 6 is called are shown next:</span></span>

`GET /CustomerViewer/DemoService.asmx/HttpGetEcho?input=%22Input Value%22 HTTP/1.1`

<span data-ttu-id="645c8-176">Oprócz umożliwienia metody sieci Web w celu umożliwienia akceptowania żądań HTTP GET, atrybut ScriptMethod można również gdy odpowiedzi XML muszą być zwracane przez usługę zamiast JSON.</span><span class="sxs-lookup"><span data-stu-id="645c8-176">In addition to allowing Web Methods to accept HTTP GET requests, the ScriptMethod attribute can also be used when XML responses need to be returned from a service rather than JSON.</span></span> <span data-ttu-id="645c8-177">Na przykład usługi sieci Web może pobrać źródła danych RSS z lokacją zdalną i zwracanie go jako obiektu XmlDocument lub atrybutu XmlElement.</span><span class="sxs-lookup"><span data-stu-id="645c8-177">For example, a Web Service may retrieve an RSS feed from a remote site and return it as an XmlDocument or XmlElement object.</span></span> <span data-ttu-id="645c8-178">Przetwarzanie pliku XML danych następnie może wystąpić na komputerze klienckim.</span><span class="sxs-lookup"><span data-stu-id="645c8-178">Processing of the XML data can then occur on the client.</span></span>

<span data-ttu-id="645c8-179">Wyświetlanie listy 7 przedstawiono przykład przy użyciu właściwości Format odpowiedzi, aby określić, czy dane XML ma zostać zwrócone z metody sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-179">Listing 7 shows an example of using the ResponseFormat property to specify that XML data should be returned from a Web Method.</span></span>

**<span data-ttu-id="645c8-180">Wyświetlanie listy 7.</span><span class="sxs-lookup"><span data-stu-id="645c8-180">Listing 7.</span></span> <span data-ttu-id="645c8-181">Za pomocą atrybutu ScriptMethod z właściwością format odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="645c8-181">Using the ScriptMethod attribute with the ResponseFormat property.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample7.cs)]

<span data-ttu-id="645c8-182">Właściwość Format odpowiedzi może również wraz z właściwością XmlSerializeString.</span><span class="sxs-lookup"><span data-stu-id="645c8-182">The ResponseFormat property can also be used along with the XmlSerializeString property.</span></span> <span data-ttu-id="645c8-183">Właściwość XmlSerializeString ma domyślną wartość false, co oznacza, że zwraca wszystkie typy z wyjątkiem ciągi, zwrócona z metody sieci Web są serializowane jako kod XML podczas `ResponseFormat` właściwość jest ustawiona na `ResponseFormat.Xml`.</span><span class="sxs-lookup"><span data-stu-id="645c8-183">The XmlSerializeString property has a default value of false which means that all return types except strings returned from a Web Method are serialized as XML when the `ResponseFormat` property is set to `ResponseFormat.Xml`.</span></span> <span data-ttu-id="645c8-184">Gdy `XmlSerializeString` ustawiono `true`, wszystkie typy zwrócone z metody sieci Web są zserializowanym w formacie XML, w tym typów parametrów.</span><span class="sxs-lookup"><span data-stu-id="645c8-184">When `XmlSerializeString` is set to `true`, all types returned from a Web Method are serialized as XML including string types.</span></span> <span data-ttu-id="645c8-185">Jeśli właściwość Format odpowiedzi ma wartość `ResponseFormat.Json` XmlSerializeString właściwość jest ignorowana.</span><span class="sxs-lookup"><span data-stu-id="645c8-185">If the ResponseFormat property has a value of `ResponseFormat.Json` the XmlSerializeString property is ignored.</span></span>

<span data-ttu-id="645c8-186">Wyświetlanie listy 8 przedstawia przykład przy użyciu właściwości XmlSerializeString, aby wymusić ciągów w celu serializowana jako XML.</span><span class="sxs-lookup"><span data-stu-id="645c8-186">Listing 8 shows an example of using the XmlSerializeString property to force strings to be serialized as XML.</span></span>

**<span data-ttu-id="645c8-187">Wyświetlanie listy 8.</span><span class="sxs-lookup"><span data-stu-id="645c8-187">Listing 8.</span></span> <span data-ttu-id="645c8-188">Za pomocą atrybutu ScriptMethod z właściwością XmlSerializeString</span><span class="sxs-lookup"><span data-stu-id="645c8-188">Using the ScriptMethod attribute with the XmlSerializeString property</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample8.cs)]

<span data-ttu-id="645c8-189">Wartość zwracana z wywołania metody sieci Web GetXmlString przedstawione w ofercie 8 pokazano dalej:</span><span class="sxs-lookup"><span data-stu-id="645c8-189">The value returned from calling the GetXmlString Web Method shown in Listing 8 is shown next:</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample9.cs)]

<span data-ttu-id="645c8-190">Mimo że domyślnym formacie JSON minimalizuje całkowity rozmiar komunikatów żądań i odpowiedzi i łatwiej jest używany przez klientów technologii ASP.NET AJAX w sposób obsługiwania wielu przeglądarek, format odpowiedzi i XmlSerializeString właściwości może być wykorzystywana w przypadku klienta aplikacje, takie jak program Internet Explorer 5 lub nowszej oczekiwać, że dane XML mają być zwracane przez metody sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-190">Although the default JSON format minimizes the overall size of request and response messages and is more readily consumed by ASP.NET AJAX clients in a cross-browser manner, the ResponseFormat and XmlSerializeString properties can be utilized when client applications such as Internet Explorer 5 or higher expect XML data to be returned from a Web Method.</span></span>

## <a name="working-with-complex-types"></a><span data-ttu-id="645c8-191">Praca z typów złożonych</span><span class="sxs-lookup"><span data-stu-id="645c8-191">Working with Complex Types</span></span>

<span data-ttu-id="645c8-192">Lista 5 pokazano przykład zwracająca typ złożony, o nazwie klienta z usługi sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-192">Listing 5 showed an example of returning a complex type named Customer from a Web Service.</span></span> <span data-ttu-id="645c8-193">Klasa odbiorcy definiuje kilka różnych typów prostych wewnętrznie jako właściwości, takie jak imię i nazwisko.</span><span class="sxs-lookup"><span data-stu-id="645c8-193">The Customer class defines several different simple types internally as properties such as FirstName and LastName.</span></span> <span data-ttu-id="645c8-194">Złożone typy używane jako parametr wejściowy lub zwracany typ metody sieci Web z włączoną obsługą technologii AJAX automatycznie są szeregowane w formacie JSON przed wysłaniem po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="645c8-194">Complex types used as an input parameter or return type on an AJAX-enabled Web Method are automatically serialized into JSON before being sent to the client-side.</span></span> <span data-ttu-id="645c8-195">Jednak zagnieżdżonych typów złożonych (identyczne ze zdefiniowanymi wewnętrznie w ramach innego typu) nie są udostępniane klientowi jako w przypadku obiektów autonomicznych domyślnie.</span><span class="sxs-lookup"><span data-stu-id="645c8-195">However, nested complex types (those defined internally within another type) are not made available to the client as standalone objects by default.</span></span>

<span data-ttu-id="645c8-196">W przypadkach, gdy zagnieżdżony typ złożony, używane przez usługę sieci Web musi też być używane w strony klienta można dodać atrybut GenerateScriptType AJAX programu ASP.NET z usługą sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-196">In cases where a nested complex type used by a Web Service must also be used in a client page, the ASP.NET AJAX GenerateScriptType attribute can be added to the Web Service.</span></span> <span data-ttu-id="645c8-197">Na przykład klasa CustomerDetails wyświetlane w ofercie 9 zawiera właściwości adresu i płeć który ***reprezentują zagnieżdżonych typów złożonych.***</span><span class="sxs-lookup"><span data-stu-id="645c8-197">For example, the CustomerDetails class shown in Listing 9 contains Address and Gender properties which ***represent nested complex types.***</span></span>

**<span data-ttu-id="645c8-198">Wyświetlanie listy 9.</span><span class="sxs-lookup"><span data-stu-id="645c8-198">Listing 9.</span></span> <span data-ttu-id="645c8-199">Klasa CustomerDetails, pokazano poniżej zawiera dwa zagnieżdżonych typów złożonych.</span><span class="sxs-lookup"><span data-stu-id="645c8-199">The CustomerDetails class shown here contains two nested complex types.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample10.cs)]

<span data-ttu-id="645c8-200">Adres i płeć obiekty zdefiniowane w obrębie klasy CustomerDetails wyświetlane w ofercie 9 nie będzie automatycznie udostępnione do użycia po stronie klienta przy użyciu języka JavaScript, ponieważ są one zagnieżdżone typy (adres jest klasą i płeć jest wyliczeniem).</span><span class="sxs-lookup"><span data-stu-id="645c8-200">The Address and Gender objects defined within the CustomerDetails class shown in Listing 9 won't automatically be made available for use on the client-side via JavaScript since they are nested types (Address is a class and Gender is an enumeration).</span></span> <span data-ttu-id="645c8-201">W sytuacjach, gdy typem zagnieżdżonym używane w ramach usługi sieci Web musi być dostępny po stronie klienta, GenerateScriptType wspomniano wcześniej może zostać użyty atrybut (patrz lista 10).</span><span class="sxs-lookup"><span data-stu-id="645c8-201">In situations where a nested type used within a Web Service must be available on the client-side, the GenerateScriptType attribute mentioned earlier can be used (see Listing 10).</span></span> <span data-ttu-id="645c8-202">Ten atrybut można dodać wiele razy w przypadkach, w której zwracane są różnych typów złożonych zagnieżdżonych przy użyciu usługi.</span><span class="sxs-lookup"><span data-stu-id="645c8-202">This attribute can be added multiple times in cases where different nested complex types are returned from a service.</span></span> <span data-ttu-id="645c8-203">Mogą być stosowane, bezpośrednio klasa usługi sieci Web lub jego nowszą określonej metody sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-203">It can be applied directly to the Web Service class or above specific Web Methods.</span></span>

**<span data-ttu-id="645c8-204">Wyświetlanie listy 10.</span><span class="sxs-lookup"><span data-stu-id="645c8-204">Listing 10.</span></span> <span data-ttu-id="645c8-205">Za pomocą atrybutu GenerateScriptService, aby zdefiniować typy zagnieżdżone, które powinny być dostępne dla klienta.</span><span class="sxs-lookup"><span data-stu-id="645c8-205">Using the GenerateScriptService attribute to define nested types that should be available to the client.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample11.cs)]

<span data-ttu-id="645c8-206">Stosując `GenerateScriptType` atrybutu na typy usługi sieci Web, adres i płeć automatycznie będą dostępne do użytku przez kod ASP.NET AJAX JavaScript po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="645c8-206">By applying the `GenerateScriptType` attribute to the Web Service, the Address and Gender types will automatically be made available for use by client-side ASP.NET AJAX JavaScript code.</span></span> <span data-ttu-id="645c8-207">Przykładowy kod JavaScript, który jest automatycznie wygenerowane i wysłane do klienta przez dodanie atrybutu GenerateScriptType usługi sieci Web jest wyświetlany w ofercie 11.</span><span class="sxs-lookup"><span data-stu-id="645c8-207">An example of the JavaScript that is automatically generated and sent to the client by adding the GenerateScriptType attribute on a Web Service is shown in Listing 11.</span></span> <span data-ttu-id="645c8-208">Pokazano, jak używać zagnieżdżonych typów złożonych w dalszej części tego artykułu.</span><span class="sxs-lookup"><span data-stu-id="645c8-208">You'll see how to use nested complex types later in the article.</span></span>

**<span data-ttu-id="645c8-209">Wyświetlanie listy 11.</span><span class="sxs-lookup"><span data-stu-id="645c8-209">Listing 11.</span></span> <span data-ttu-id="645c8-210">Zagnieżdżone typy złożone udostępniane na stronie ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="645c8-210">Nested complex types made available to an ASP.NET AJAX page.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample12.cs)]

<span data-ttu-id="645c8-211">Teraz, gdy wiesz jak tworzyć usługi sieci Web i udostępnić je do stron ASP.NET AJAX, Spójrzmy na sposób tworzenia i używania serwery proxy JavaScript, tak aby dane mogą być pobierane lub wysyłane do usługi sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-211">Now that you've seen how to create Web Services and make them accessible to ASP.NET AJAX pages, let's take a look at how to create and use JavaScript proxies so that data can be retrieved or sent to Web Services.</span></span>

## <a name="creating-javascript-proxies"></a><span data-ttu-id="645c8-212">Tworzenie serwery proxy JavaScript</span><span class="sxs-lookup"><span data-stu-id="645c8-212">Creating JavaScript Proxies</span></span>

<span data-ttu-id="645c8-213">Zazwyczaj wywołanie standardowe usługi sieci Web (.NET lub innej platformy) obejmuje utworzenie obiektu serwera proxy, który możesz ochronnym od złożoności wysyłanie komunikatów żądań i odpowiedzi protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="645c8-213">Calling a standard Web Service (.NET or another platform) typically involves creating a proxy object that shields you from the complexities of sending SOAP request and response messages.</span></span> <span data-ttu-id="645c8-214">Za pomocą wywołania usługi sieci Web programu ASP.NET AJAX serwery proxy JavaScript można tworzyć i pozwala łatwo wywoływać usługi bez martwienia się o serializacji i deserializacji komunikatów JSON.</span><span class="sxs-lookup"><span data-stu-id="645c8-214">With ASP.NET AJAX Web Service calls, JavaScript proxies can be created and used to easily call services without worrying about serializing and deserializing JSON messages.</span></span> <span data-ttu-id="645c8-215">Serwery proxy JavaScript mogą być generowane automatycznie za pomocą formantu ScriptManager AJAX programu ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="645c8-215">JavaScript proxies can be automatically generated by using the ASP.NET AJAX ScriptManager control.</span></span>

<span data-ttu-id="645c8-216">Tworzenie serwera proxy JavaScript, który można wywoływać usług sieci Web odbywa się za pomocą właściwości usługi ScriptManager.</span><span class="sxs-lookup"><span data-stu-id="645c8-216">Creating a JavaScript proxy that can call Web Services is accomplished by using the ScriptManager's Services property.</span></span> <span data-ttu-id="645c8-217">Ta właściwość umożliwia zdefiniowanie jednego lub więcej usług, które strony ASP.NET AJAX można wywołać asynchronicznie w celu wysyłania lub odbierania danych bez konieczności zwrotu operacji.</span><span class="sxs-lookup"><span data-stu-id="645c8-217">This property allows you to define one or more services that an ASP.NET AJAX page can call asynchronously to send or receive data without requiring postback operations.</span></span> <span data-ttu-id="645c8-218">W celu zdefiniowania usługi przy użyciu rozszerzeń ASP.NET AJAX `ServiceReference` kontroli i przypisywanie adresu URL usługi sieci Web z formantem `Path` właściwości.</span><span class="sxs-lookup"><span data-stu-id="645c8-218">You define a service by using the ASP.NET AJAX `ServiceReference` control and assigning the Web Service URL to the control's `Path` property.</span></span> <span data-ttu-id="645c8-219">Wyświetlanie listy 12 przedstawiono przykład odwołuje się do usługi, o nazwie CustomersService.asmx.</span><span class="sxs-lookup"><span data-stu-id="645c8-219">Listing 12 shows an example of referencing a service named CustomersService.asmx.</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample13.aspx)]

**<span data-ttu-id="645c8-220">Wyświetlanie listy 12.</span><span class="sxs-lookup"><span data-stu-id="645c8-220">Listing 12.</span></span> <span data-ttu-id="645c8-221">Definiowanie usługi sieci Web używane na stronie ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="645c8-221">Defining a Web Service used in an ASP.NET AJAX page.</span></span>**

<span data-ttu-id="645c8-222">Dodawanie odwołania do CustomersService.asmx za pomocą formantu ScriptManager powoduje, że serwer proxy JavaScript, aby dynamicznie generowana i przywoływany przez stronę.</span><span class="sxs-lookup"><span data-stu-id="645c8-222">Adding a reference to the CustomersService.asmx through the ScriptManager control causes a JavaScript proxy to be dynamically generated and referenced by the page.</span></span> <span data-ttu-id="645c8-223">Serwer proxy jest osadzony przy użyciu &lt;skryptu&gt; oznaczać i dynamicznie ładowany przez wywołanie pliku CustomersService.asmx i dołączanie /js na końcu.</span><span class="sxs-lookup"><span data-stu-id="645c8-223">The proxy is embedded by using the &lt;script&gt; tag and dynamically loaded by calling the CustomersService.asmx file and appending /js to the end of it.</span></span> <span data-ttu-id="645c8-224">Poniższy przykład pokazuje, jak serwer proxy JavaScript jest osadzony na stronie, gdy debugowanie jest wyłączone w pliku web.config:</span><span class="sxs-lookup"><span data-stu-id="645c8-224">The following example shows how the JavaScript proxy is embedded in the page when debugging is disabled in web.config:</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample14.html)]

> *> [!NOTE]
> <span data-ttu-id="645c8-225">Jeśli chcesz zobaczyć rzeczywisty kod serwera proxy JavaScript, który jest generowany możesz wpisać adres URL do żądanej usługi sieci Web platformy .NET w polu adresu programu Internet Explorer i Dołącz /js na końcu.</span><span class="sxs-lookup"><span data-stu-id="645c8-225">If you'd like to see the actual JavaScript proxy code that is generated you can type the URL to the desired .NET Web Service into Internet Explorer's address box and append /js to the end of it.</span></span>*


<span data-ttu-id="645c8-226">Jeśli debugowanie jest włączone w pliku web.config, którą wersję debugowania serwera proxy JavaScript zostanie osadzony w stronę jako pokazano dalej:</span><span class="sxs-lookup"><span data-stu-id="645c8-226">If debugging is enabled in web.config a debug version of the JavaScript proxy will be embedded in the page as shown next:</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample15.html)]

<span data-ttu-id="645c8-227">Serwera proxy JavaScript utworzone przez funkcja ScriptManager można również osadzać bezpośrednio do strony, a nie za pomocą &lt;skryptu&gt; atrybut src znacznika.</span><span class="sxs-lookup"><span data-stu-id="645c8-227">The JavaScript proxy created by the ScriptManager can also be embedded directly into the page rather than referenced using the &lt;script&gt; tag's src attribute.</span></span> <span data-ttu-id="645c8-228">Można to zrobić, ustawiając właściwość InlineScript kontroli ServiceReference na wartość true (wartość domyślna to false).</span><span class="sxs-lookup"><span data-stu-id="645c8-228">This can be done by setting the ServiceReference control's InlineScript property to true (the default is false).</span></span> <span data-ttu-id="645c8-229">Może to być przydatne, gdy serwer proxy nie jest udostępniana na wielu stronach i chcesz zmniejszyć liczbę wywołań sieci do serwera.</span><span class="sxs-lookup"><span data-stu-id="645c8-229">This can be useful when a proxy isn't shared across multiple pages and when you'd like to reduce the number of network calls made to the server.</span></span> <span data-ttu-id="645c8-230">Nie można buforować kiedy InlineScript jest ustawiona na wartość true, skryptu serwera proxy przez przeglądarkę, więc wartość domyślna FALSE jest zalecane w sytuacjach, w którym serwer proxy jest używany przez wielu stronach w aplikacji ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="645c8-230">When InlineScript is set to true the proxy script won't be cached by the browser so the default value of false is recommended in cases where the proxy is used by multiple pages in an ASP.NET AJAX application.</span></span> <span data-ttu-id="645c8-231">Przykład użycia właściwości InlineScript pokazano dalej:</span><span class="sxs-lookup"><span data-stu-id="645c8-231">An example of using the InlineScript property is shown next:</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample16.aspx)]

## <a name="using-javascript-proxies"></a><span data-ttu-id="645c8-232">Za pomocą serwery proxy JavaScript</span><span class="sxs-lookup"><span data-stu-id="645c8-232">Using JavaScript Proxies</span></span>

<span data-ttu-id="645c8-233">Gdy usługa sieci Web odwołuje się na stronie ASP.NET AJAX za pomocą formantu ScriptManager, wywołanie może się z usługą sieci Web i zwrócone dane mogą być obsługiwane za pomocą funkcji wywołania zwrotnego.</span><span class="sxs-lookup"><span data-stu-id="645c8-233">Once a Web Service is referenced by an ASP.NET AJAX page using the ScriptManager control, a call can be made to the Web Service and the returned data can be handled using callback functions.</span></span> <span data-ttu-id="645c8-234">Usługa sieci Web jest wywoływana przez odwoływanie się do jego przestrzeń nazw (jeśli istnieje), nazwę klasy i nazwę metody sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-234">A Web Service is called by referencing its namespace (if one exists), class name and Web Method name.</span></span> <span data-ttu-id="645c8-235">Można zdefiniować parametry przekazywane do usługi sieci Web oraz funkcję wywołania zwrotnego, która obsługuje zwracanych danych.</span><span class="sxs-lookup"><span data-stu-id="645c8-235">Any parameters passed to the Web Service can be defined along with a callback function that handles the returned data.</span></span>

<span data-ttu-id="645c8-236">Przykład użycia serwera proxy JavaScript do wywołania metody sieci Web o nazwie GetCustomersByCountry() jest wyświetlany w ofercie 13.</span><span class="sxs-lookup"><span data-stu-id="645c8-236">An example of using a JavaScript proxy to call a Web Method named GetCustomersByCountry() is shown in Listing 13.</span></span> <span data-ttu-id="645c8-237">Funkcja GetCustomersByCountry() jest wywoływana, gdy użytkownik końcowy kliknie przycisk na stronie.</span><span class="sxs-lookup"><span data-stu-id="645c8-237">The GetCustomersByCountry() function is called when an end user clicks a button on the page.</span></span>

**<span data-ttu-id="645c8-238">Wyświetlanie listy 13.</span><span class="sxs-lookup"><span data-stu-id="645c8-238">Listing 13.</span></span> <span data-ttu-id="645c8-239">Wywoływanie usługi sieci Web z serwerem proxy JavaScript.</span><span class="sxs-lookup"><span data-stu-id="645c8-239">Calling a Web Service with a JavaScript proxy.</span></span>**

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample17.js)]

<span data-ttu-id="645c8-240">To wywołanie odwołuje się do przestrzeni nazw InterfaceTraining, CustomersService klasy i metody sieci Web GetCustomersByCountry zdefiniowane w usłudze.</span><span class="sxs-lookup"><span data-stu-id="645c8-240">This call references the InterfaceTraining namespace, CustomersService class and GetCustomersByCountry Web Method defined in the service.</span></span> <span data-ttu-id="645c8-241">Przekazuje kraju uzyskaną z pola tekstowego, a także funkcję wywołania zwrotnego o nazwie OnWSRequestComplete, które powinny być używane, gdy zwraca asynchroniczne wywołanie usługi sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-241">It passes a country value obtained from a textbox as well as a callback function named OnWSRequestComplete that should be invoked when the asynchronous Web Service call returns.</span></span> <span data-ttu-id="645c8-242">OnWSRequestComplete obsługuje tablicy obiektów klienta zwrócony przez usługę i konwertuje je do tabeli, która jest wyświetlana na stronie.</span><span class="sxs-lookup"><span data-stu-id="645c8-242">OnWSRequestComplete handles the array of Customer objects returned from the service and converts them into a table that is displayed in the page.</span></span> <span data-ttu-id="645c8-243">Dane wyjściowe generowane z wywołania przedstawiono na rysunku 1.</span><span class="sxs-lookup"><span data-stu-id="645c8-243">The output generated from the call is shown in Figure 1.</span></span>


[![B<span data-ttu-id="645c8-244">inding danymi uzyskanymi, wprowadzając asynchroniczne wywołanie AJAX do usługi sieci Web.]</span><span class="sxs-lookup"><span data-stu-id="645c8-244">inding data obtained by making an asynchronous AJAX call to a Web Service.]</span></span>(understanding-asp-net-ajax-web-services/_static/image2.png)](understanding-asp-net-ajax-web-services/_static/image1.png)

<span data-ttu-id="645c8-245">**Rysunek 1**: Powiązanie danych uzyskanych, wprowadzając asynchroniczne wywołanie AJAX do usługi sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-245">**Figure 1**: Binding data obtained by making an asynchronous AJAX call to a Web Service.</span></span>  <span data-ttu-id="645c8-246">([Kliknij, aby wyświetlić obraz w pełnym rozmiarze](understanding-asp-net-ajax-web-services/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="645c8-246">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image3.png))</span></span>


<span data-ttu-id="645c8-247">Serwery proxy JavaScript można również ustawić jednokierunkowe wywołania usługi sieci Web, w przypadku gdy powinna być wywoływana metoda sieci Web, ale serwer proxy nie należy czekać na odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="645c8-247">JavaScript proxies can also make one-way calls to Web Services in cases where a Web Method should be called but the proxy shouldn't wait for a response.</span></span> <span data-ttu-id="645c8-248">Na przykład można wywołać usługę sieci Web w taki sposób, aby uruchomić proces, takich jak przepływ pracy, ale nie czeka na wartość zwracaną z usługi.</span><span class="sxs-lookup"><span data-stu-id="645c8-248">For example, you may want to call a Web Service to start a process such as a work-flow but not wait for a return value from the service.</span></span> <span data-ttu-id="645c8-249">W przypadkach, w którym wywołanie jednokierunkowe wymaga można nawiązać połączenia z usługą można po prostu pominąć funkcji wywołania zwrotnego, pokazane w ofercie 13.</span><span class="sxs-lookup"><span data-stu-id="645c8-249">In cases where a one-way call needs to be made to a service, the callback function shown in Listing 13 can simply be omitted.</span></span> <span data-ttu-id="645c8-250">Ponieważ żadnej funkcji wywołania zwrotnego jest zdefiniowany obiekt serwera proxy nie będzie czekać przez usługę sieci Web zwrócić dane.</span><span class="sxs-lookup"><span data-stu-id="645c8-250">Since no callback function is defined the proxy object will not wait for the Web Service to return data.</span></span>

## <a name="handling-errors"></a><span data-ttu-id="645c8-251">Obsługa błędów</span><span class="sxs-lookup"><span data-stu-id="645c8-251">Handling Errors</span></span>

<span data-ttu-id="645c8-252">Asynchroniczne wywołania zwrotne do usług sieci Web mogą wystąpić różne typy błędów, takie jak sieci są w dół, niedostępnością usługi sieci Web lub wyjątek zwracanego.</span><span class="sxs-lookup"><span data-stu-id="645c8-252">Asynchronous callbacks to Web Services can encounter different types of errors such as the network being down, the Web Service being unavailable or an exception being returned.</span></span> <span data-ttu-id="645c8-253">Na szczęście usługa serwera proxy JavaScript — obiekty wygenerowane przez funkcja ScriptManager zezwala na wiele wywołań zwrotnych, należy zdefiniować do obsługi błędów i niepowodzeń, oprócz Powodzenie wywołania zwrotnego, przedstawionej wcześniej.</span><span class="sxs-lookup"><span data-stu-id="645c8-253">Fortunately, JavaScript proxy objects generated by the ScriptManager allow multiple callbacks to be defined to handle errors and failures in addition to the success callback shown earlier.</span></span> <span data-ttu-id="645c8-254">Błąd funkcji wywołania zwrotnego można zdefiniować natychmiast po funkcji standardowego wywołania zwrotnego w wywołaniu metody sieci Web, jak pokazano w ofercie 14.</span><span class="sxs-lookup"><span data-stu-id="645c8-254">An error callback function can be defined immediately after the standard callback function in the call to the Web Method as shown in Listing 14.</span></span>

**<span data-ttu-id="645c8-255">Wyświetlanie listy 14.</span><span class="sxs-lookup"><span data-stu-id="645c8-255">Listing 14.</span></span> <span data-ttu-id="645c8-256">Definiowanie funkcji wywołania zwrotnego błędu i wyświetlanie błędów.</span><span class="sxs-lookup"><span data-stu-id="645c8-256">Defining an error callback function and displaying errors.</span></span>**

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample18.js)]

<span data-ttu-id="645c8-257">Błędy występujące podczas wywoływania usługi sieci Web spowoduje wyzwolenie funkcji wywołania zwrotnego OnWSRequestFailed() do wywołania, które przyjmuje obiekt reprezentujący błąd jako parametr.</span><span class="sxs-lookup"><span data-stu-id="645c8-257">Any errors that occur when the Web Service is called will trigger the OnWSRequestFailed() callback function to be called which accepts an object representing the error as a parameter.</span></span> <span data-ttu-id="645c8-258">Obiekt błędu udostępnia kilka różnych funkcji w celu ustalenia przyczyny błędu również informację, czy upłynął limit czasu wywołania. Wyświetlanie listy 14 pokazano przykład za pomocą funkcji inny błąd i na rysunku 2 przedstawiono przykład dane wyjściowe generowane przez funkcje.</span><span class="sxs-lookup"><span data-stu-id="645c8-258">The error object exposes several different functions to determine the cause of the error as well as whether or not the call timed out. Listing 14 shows an example of using the different error functions and Figure 2 shows an example of the output generated by the functions.</span></span>


[![O<span data-ttu-id="645c8-259">dane wyjściowe generowane przez wywołanie funkcji błąd ASP.NET AJAX.]</span><span class="sxs-lookup"><span data-stu-id="645c8-259">utput generated by calling ASP.NET AJAX error functions.]</span></span>(understanding-asp-net-ajax-web-services/_static/image5.png)](understanding-asp-net-ajax-web-services/_static/image4.png)

<span data-ttu-id="645c8-260">**Rysunek 2**: Dane wyjściowe generowane przez wywołanie funkcji błąd ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="645c8-260">**Figure 2**: Output generated by calling ASP.NET AJAX error functions.</span></span>  <span data-ttu-id="645c8-261">([Kliknij, aby wyświetlić obraz w pełnym rozmiarze](understanding-asp-net-ajax-web-services/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="645c8-261">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image6.png))</span></span>


## <a name="handling-xml-data-returned-from-a-web-service"></a><span data-ttu-id="645c8-262">Obsługa danych XML zwrócony z usługi sieci Web</span><span class="sxs-lookup"><span data-stu-id="645c8-262">Handling XML Data Returned from a Web Service</span></span>

<span data-ttu-id="645c8-263">Wcześniej pokazano, jak metoda sieci Web może zwrócić pierwotne dane XML za pomocą atrybutu ScriptMethod wraz z jego właściwość Format odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="645c8-263">Earlier you saw how a Web Method could return raw XML data by using the ScriptMethod attribute along with its ResponseFormat property.</span></span> <span data-ttu-id="645c8-264">Gdy ustawiono format odpowiedzi ResponseFormat.Xml, dane zwrócone przez usługę sieci Web jest serializowana jako XML, a nie w formacie JSON.</span><span class="sxs-lookup"><span data-stu-id="645c8-264">When ResponseFormat is set to ResponseFormat.Xml, data returned from the Web Service is serialized as XML rather than JSON.</span></span> <span data-ttu-id="645c8-265">Może to być przydatne, gdy dane XML, należy przekazać bezpośrednio do klienta dla przetwarzania przy użyciu języka JavaScript lub XSLT.</span><span class="sxs-lookup"><span data-stu-id="645c8-265">This can be useful when XML data needs to be passed directly to the client for processing using JavaScript or XSLT.</span></span> <span data-ttu-id="645c8-266">Obecnie Internet Explorer 5 lub nowszej zapewnia najlepszy model obiektów po stronie klienta do analizowania i filtrowania danych XML z powodu jego wbudowaną obsługę programu MSXML.</span><span class="sxs-lookup"><span data-stu-id="645c8-266">At the current time, Internet Explorer 5 or higher provides the best client-side object model for parsing and filtering XML data due to its built-in support for MSXML.</span></span>

<span data-ttu-id="645c8-267">Pobieranie danych XML przy użyciu usługi sieci Web nie różni się od pobierania pozostałych typów.</span><span class="sxs-lookup"><span data-stu-id="645c8-267">Retrieving XML data from a Web Service is no different than retrieving other data types.</span></span> <span data-ttu-id="645c8-268">Uruchom za pomocą serwera proxy JavaScript do wywołania funkcji odpowiednie i zdefiniuj funkcji wywołania zwrotnego.</span><span class="sxs-lookup"><span data-stu-id="645c8-268">Start by invoking the JavaScript proxy to call the appropriate function and define a callback function.</span></span> <span data-ttu-id="645c8-269">Po wywołaniu zwraca można przetwarzać dane w funkcji wywołania zwrotnego.</span><span class="sxs-lookup"><span data-stu-id="645c8-269">Once the call returns you can then process the data in the callback function.</span></span>

<span data-ttu-id="645c8-270">Wyświetlanie listy 15 pokazano przykład wywołania metody sieci Web o nazwie GetRssFeed(), która zwraca obiekt atrybutu XmlElement.</span><span class="sxs-lookup"><span data-stu-id="645c8-270">Listing 15 shows an example of calling a Web Method named GetRssFeed() that returns an XmlElement object.</span></span> <span data-ttu-id="645c8-271">GetRssFeed() przyjmuje jeden parametr reprezentujący adres URL dla źródła danych do pobrania RSS.</span><span class="sxs-lookup"><span data-stu-id="645c8-271">GetRssFeed() accepts a single parameter representing the URL for the RSS feed to retrieve.</span></span>

**<span data-ttu-id="645c8-272">Wyświetlanie listy 15.</span><span class="sxs-lookup"><span data-stu-id="645c8-272">Listing 15.</span></span> <span data-ttu-id="645c8-273">Praca z danymi XML zwracanymi przez usługi sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-273">Working with XML data returned from a Web Service.</span></span>**

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample19.html)]

<span data-ttu-id="645c8-274">Ten przykład przekazuje adres URL do źródła danych RSS i przetwarza zwracanych danych XML w funkcji OnWSRequestComplete().</span><span class="sxs-lookup"><span data-stu-id="645c8-274">This example passes a URL to an RSS feed and processes the returned XML data in the OnWSRequestComplete() function.</span></span> <span data-ttu-id="645c8-275">OnWSRequestComplete() najpierw sprawdza, czy za pomocą przeglądarki Internet Explorer, aby dowiedzieć się, czy MSXML parser jest dostępna.</span><span class="sxs-lookup"><span data-stu-id="645c8-275">OnWSRequestComplete() first checks to see if the browser is Internet Explorer to know whether or not the MSXML parser is available.</span></span> <span data-ttu-id="645c8-276">Jeśli tak jest, instrukcję języka XPath jest używana do lokalizowania wszystkie &lt;elementu&gt; tagów w kanale informacyjnym RSS.</span><span class="sxs-lookup"><span data-stu-id="645c8-276">If it is, an XPath statement is used to locate all &lt;item&gt; tags within the RSS feed.</span></span> <span data-ttu-id="645c8-277">Każdy element jest następnie postanowiliśmy za pośrednictwem oraz skojarzonych z nimi &lt;tytuł&gt; i &lt;łącze&gt; tagi są się i przetwarzane w celu wyświetlenia każdego elementu danych.</span><span class="sxs-lookup"><span data-stu-id="645c8-277">Each item is then iterated through and the associated &lt;title&gt; and &lt;link&gt; tags are located and processed to display each item's data.</span></span> <span data-ttu-id="645c8-278">Rysunek 3 przedstawia przykład danych wyjściowych wygenerowany na podstawie co wywołanie za pośrednictwem serwera proxy JavaScript, do metody sieci Web GetRssFeed() rozszerzeń ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="645c8-278">Figure 3 shows an example of the output generated from making an ASP.NET AJAX call through a JavaScript proxy to the GetRssFeed() Web Method.</span></span>

## <a name="handling-complex-types"></a><span data-ttu-id="645c8-279">Obsługa typów złożonych</span><span class="sxs-lookup"><span data-stu-id="645c8-279">Handling Complex Types</span></span>

<span data-ttu-id="645c8-280">Typy złożone zaakceptowane lub zwracane przez usługę sieci Web automatycznie są udostępniane za pośrednictwem serwera proxy JavaScript.</span><span class="sxs-lookup"><span data-stu-id="645c8-280">Complex types accepted or returned by a Web Service are automatically exposed through a JavaScript proxy.</span></span> <span data-ttu-id="645c8-281">Jednakże zagnieżdżone typy złożone nie są bezpośrednio dostępne po stronie klienta, chyba że GenerateScriptType jest stosowany do usługi zgodnie z wcześniejszym opisem.</span><span class="sxs-lookup"><span data-stu-id="645c8-281">However, nested complex types are not directly accessible on the client-side unless the GenerateScriptType attribute is applied to the service as discussed earlier.</span></span> <span data-ttu-id="645c8-282">Dlaczego czy chcesz użyć zagnieżdżony typ złożony po stronie klienta?</span><span class="sxs-lookup"><span data-stu-id="645c8-282">Why would you want to use a nested complex type on the client-side?</span></span>

<span data-ttu-id="645c8-283">Aby odpowiedzieć na to pytanie, założono, że na stronie ASP.NET AJAX dane klienta są wyświetlane i umożliwia użytkownikom końcowym zaktualizować adres odbiorcy.</span><span class="sxs-lookup"><span data-stu-id="645c8-283">To answer this question, assume that an ASP.NET AJAX page displays customer data and allows end users to update a customer's address.</span></span> <span data-ttu-id="645c8-284">Jeśli usługa sieci Web określa, czy typ adresu (złożonych typ zdefiniowany w klasie CustomerDetails) mogą być wysyłane do klienta proces aktualizacji można podzielić na funkcji w celu lepszego ponownego użycia kodu.</span><span class="sxs-lookup"><span data-stu-id="645c8-284">If the Web Service specifies that the Address type (a complex type defined within a CustomerDetails class) can be sent to the client then the update process can be divided into separate functions for better code re-use.</span></span>


[![O<span data-ttu-id="645c8-285">dane wyjściowe tworzenia wywołanie usługi sieci Web, która zwraca dane RSS.]</span><span class="sxs-lookup"><span data-stu-id="645c8-285">utput creating from calling a Web Service that returns RSS data.]</span></span>(understanding-asp-net-ajax-web-services/_static/image8.png)](understanding-asp-net-ajax-web-services/_static/image7.png)

<span data-ttu-id="645c8-286">**Rysunek 3**: Dane wyjściowe tworzenia wywołanie usługi sieci Web, która zwraca dane RSS.</span><span class="sxs-lookup"><span data-stu-id="645c8-286">**Figure 3**: Output creating from calling a Web Service that returns RSS data.</span></span>  <span data-ttu-id="645c8-287">([Kliknij, aby wyświetlić obraz w pełnym rozmiarze](understanding-asp-net-ajax-web-services/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="645c8-287">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image9.png))</span></span>


<span data-ttu-id="645c8-288">Lista 16 zawiera przykładowy kod po stronie klienta, który wywołuje obiekt adresów zdefiniowanych w modelu obszaru nazw, wypełnia go przy użyciu zaktualizowanych danych i przypisuje go do obiektu CustomerDetails właściwość Address.</span><span class="sxs-lookup"><span data-stu-id="645c8-288">Listing 16 shows an example of client-side code that invokes an Address object defined in a Model namespace, fills it with updated data and assigns it to a CustomerDetails object's Address property.</span></span> <span data-ttu-id="645c8-289">Obiekt CustomerDetails jest następnie przekazywany do usługi sieci Web do przetworzenia.</span><span class="sxs-lookup"><span data-stu-id="645c8-289">The CustomerDetails object is then passed to the Web Service for processing.</span></span>

**<span data-ttu-id="645c8-290">Wyświetlanie listy 16.</span><span class="sxs-lookup"><span data-stu-id="645c8-290">Listing 16.</span></span> <span data-ttu-id="645c8-291">Używanie zagnieżdżonych typów złożonych</span><span class="sxs-lookup"><span data-stu-id="645c8-291">Using nested complex types</span></span>**

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample20.js)]

## <a name="creating-and-using-page-methods"></a><span data-ttu-id="645c8-292">Tworzenie i używanie metod strony</span><span class="sxs-lookup"><span data-stu-id="645c8-292">Creating and Using Page Methods</span></span>

<span data-ttu-id="645c8-293">Usługi sieci Web zapewnia to doskonały sposób, aby udostępnić recyklingowi usługi różnego rodzaju klientów, w tym stron ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="645c8-293">Web Services provide an excellent way to expose re-useable services to a variety of clients including ASP.NET AJAX pages.</span></span> <span data-ttu-id="645c8-294">Jednak może być przypadki, gdzie strony musi pobrać dane, które nigdy nie być używane lub udostępnione przez innych stron.</span><span class="sxs-lookup"><span data-stu-id="645c8-294">However, there may be cases where a page needs to retrieve data that won't ever be used or shared by other pages.</span></span> <span data-ttu-id="645c8-295">W takim przypadku na plik .asmx Zezwalaj na stronę, aby uzyskać dostęp do danych może się wydawać obszerne, ponieważ usługa jest używana tylko przez pojedynczą stronę.</span><span class="sxs-lookup"><span data-stu-id="645c8-295">In this case, making an .asmx file to allow the page to access the data may seem like overkill since the service is only used by a single page.</span></span>

<span data-ttu-id="645c8-296">ASP.NET AJAX zapewnia inny mechanizm wywołań podobne do usługi sieci Web bez tworzenia plików .asmx autonomicznych.</span><span class="sxs-lookup"><span data-stu-id="645c8-296">ASP.NET AJAX provides another mechanism for making Web Service-like calls without creating standalone .asmx files.</span></span> <span data-ttu-id="645c8-297">Odbywa się przy użyciu techniki określane jako "strony metody".</span><span class="sxs-lookup"><span data-stu-id="645c8-297">This is done by using a technique referred to as "page methods".</span></span> <span data-ttu-id="645c8-298">Strona przedstawiono statyczny (udostępniony w VB.NET) metody, które osadzić bezpośrednio w pliku strony lub obok kodu, które mają atrybut WebMethod do nich.</span><span class="sxs-lookup"><span data-stu-id="645c8-298">Page methods are static (shared in VB.NET) methods embedded directly in a page or code-beside file that have the WebMethod attribute applied to them.</span></span> <span data-ttu-id="645c8-299">Za pomocą atrybutu WebMethod one może być wywoływany przy użyciu specjalnych obiekt JavaScript o nazwie PageMethods tworzony dynamicznie w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="645c8-299">By applying the WebMethod attribute they can be called using a special JavaScript object named PageMethods that gets dynamically created at runtime.</span></span> <span data-ttu-id="645c8-300">Obiekt PageMethods działa jako serwer proxy, który chroni możesz z procesem serializacji/deserializacji JSON.</span><span class="sxs-lookup"><span data-stu-id="645c8-300">The PageMethods object acts as a proxy that shields you from the JSON serialization/deserialization process.</span></span> <span data-ttu-id="645c8-301">Należy pamiętać, że aby można było używać obiektu PageMethods należy ustawić ScriptManager EnablePageMethods właściwość na wartość true.</span><span class="sxs-lookup"><span data-stu-id="645c8-301">Note that in order to use the PageMethods object you must set the ScriptManager's EnablePageMethods property to true.</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample21.aspx)]

<span data-ttu-id="645c8-302">Wyświetlanie listy 17 pokazano przykład zdefiniowanie dwóch metod strony ASP.NET obok kodu klasy.</span><span class="sxs-lookup"><span data-stu-id="645c8-302">Listing 17 shows an example of defining two page methods in an ASP.NET code-beside class.</span></span> <span data-ttu-id="645c8-303">Te metody pobierania danych z klasy warstwy biznesowej znajduje się w aplikacji\_katalogu z kodem w witrynie sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-303">These methods retrieve data from a business layer class located in the App\_Code folder of the Website.</span></span>

**<span data-ttu-id="645c8-304">Wyświetlanie listy 17.</span><span class="sxs-lookup"><span data-stu-id="645c8-304">Listing 17.</span></span> <span data-ttu-id="645c8-305">Definiowanie metody strony.</span><span class="sxs-lookup"><span data-stu-id="645c8-305">Defining page methods.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample22.cs)]

<span data-ttu-id="645c8-306">Gdy ScriptManager wykryje obecność metody sieci Web, na stronie generuje dynamiczne odwołanie do obiektu PageMethods wspomnianych wcześniej.</span><span class="sxs-lookup"><span data-stu-id="645c8-306">When ScriptManager detects the presence of Web Methods in the page it generates a dynamic reference to the PageMethods object mentioned earlier.</span></span> <span data-ttu-id="645c8-307">Wywołanie metody sieci Web jest realizowane przez utworzenie odwołań do klasy PageMethods następuje nazwa metody i wszelkich danych wymaganych parametrów, który powinien zostać przekazany.</span><span class="sxs-lookup"><span data-stu-id="645c8-307">Calling a Web Method is accomplished by referencing the PageMethods class followed by the name of the method and any necessary parameter data that should be passed.</span></span> <span data-ttu-id="645c8-308">Lista 18 pokazano przykłady wywoływania dwie metody strony przedstawionej wcześniej.</span><span class="sxs-lookup"><span data-stu-id="645c8-308">Listing 18 shows examples of calling the two page methods shown earlier.</span></span>

**<span data-ttu-id="645c8-309">Wyświetlanie listy 18.</span><span class="sxs-lookup"><span data-stu-id="645c8-309">Listing 18.</span></span> <span data-ttu-id="645c8-310">Wywoływanie metod strony z obiektem PageMethods JavaScript.</span><span class="sxs-lookup"><span data-stu-id="645c8-310">Calling page methods with the PageMethods JavaScript object.</span></span>**

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample23.js)]

<span data-ttu-id="645c8-311">Za pomocą obiektu PageMethods jest bardzo podobne do obiektu serwera proxy JavaScript.</span><span class="sxs-lookup"><span data-stu-id="645c8-311">Using the PageMethods object is very similar to using a JavaScript proxy object.</span></span> <span data-ttu-id="645c8-312">Należy najpierw określić wszystkie dane parametru, który powinien być przekazywany do metody strony, a następnie zdefiniować funkcję wywołania zwrotnego, która powinna być wywoływana, gdy zwraca wywołania asynchronicznego.</span><span class="sxs-lookup"><span data-stu-id="645c8-312">You first specify all of the parameter data that should be passed to the page method and then define the callback function that should be called when the asynchronous call returns.</span></span> <span data-ttu-id="645c8-313">Można także określić wywołanie zwrotne błędu (na przykład obsługa błędów Zobacz listę 14).</span><span class="sxs-lookup"><span data-stu-id="645c8-313">A failure callback can also be specified (refer to Listing 14 for an example of handling failures).</span></span>

## <a name="the-autocompleteextender-and-the-aspnet-ajax-toolkit"></a><span data-ttu-id="645c8-314">AutoCompleteExtender i zestawu narzędzi AJAX Toolkit platformy ASP.NET</span><span class="sxs-lookup"><span data-stu-id="645c8-314">The AutoCompleteExtender and the ASP.NET AJAX Toolkit</span></span>

<span data-ttu-id="645c8-315">Zestawu narzędzi AJAX Toolkit platformy ASP.NET (dostępnym [ http://ajax.asp.net ](http://ajax.asp.net)) oferuje kilka formantów, które mogą służyć do dostępu do usług sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-315">The ASP.NET AJAX Toolkit (available from [http://ajax.asp.net](http://ajax.asp.net)) offers several controls that can be used to access Web Services.</span></span> <span data-ttu-id="645c8-316">W szczególności zestaw narzędzi zawiera przydatne formantu o nazwie `AutoCompleteExtender` który może służyć do wywołania usługi sieci Web i wyświetlanie danych na stronach bez pisania żadnego kodu JavaScript w ogóle.</span><span class="sxs-lookup"><span data-stu-id="645c8-316">Specifically, the toolkit contains a useful control named `AutoCompleteExtender` that can be used to call Web Services and show data in pages without writing any JavaScript code at all.</span></span>

<span data-ttu-id="645c8-317">Kontrolka AutoCompleteExtender może służyć do rozszerzania istniejących funkcji pole tekstowe i ułatwiają użytkownikom łatwy dostęp do danych, które szukają.</span><span class="sxs-lookup"><span data-stu-id="645c8-317">The AutoCompleteExtender control can be used to extend existing functionality of a textbox and help users more easily locate data they're looking for.</span></span> <span data-ttu-id="645c8-318">Podczas ich wpisywania w polu tekstowym formant może służyć do kwerendy usługi sieci Web i dynamicznie przedstawia wyniki poniżej w polu tekstowym.</span><span class="sxs-lookup"><span data-stu-id="645c8-318">As they type into a textbox the control can be used to query a Web Service and shows results below the textbox dynamically.</span></span> <span data-ttu-id="645c8-319">Rysunek 4 przedstawia przykład za pomocą kontroli AutoCompleteExtender, aby wyświetlić identyfikatory klienta dla aplikacji pomocy technicznej.</span><span class="sxs-lookup"><span data-stu-id="645c8-319">Figure 4 shows an example of using the AutoCompleteExtender control to display customer ids for a support application.</span></span> <span data-ttu-id="645c8-320">Jako użytkownik wpisuje różne znaki w polu tekstowym, różne elementy pojawią się pod nią na podstawie danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="645c8-320">As the user types different characters into the textbox, different items will be shown below it based upon their input.</span></span> <span data-ttu-id="645c8-321">Użytkownicy mogą wybrać identyfikator żądanego klienta.</span><span class="sxs-lookup"><span data-stu-id="645c8-321">Users can then select the desired customer id.</span></span>

<span data-ttu-id="645c8-322">Korzystanie z AutoCompleteExtender strony ASP.NET AJAX wymaga, że zestaw AjaxControlToolkit.dll dodany do folderu bin witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="645c8-322">Using the AutoCompleteExtender within an ASP.NET AJAX page requires that the AjaxControlToolkit.dll assembly be added to the Website's bin folder.</span></span> <span data-ttu-id="645c8-323">Po dodaniu zestawu narzędzi można odwołać się do niego w pliku web.config, aby formantów, które zawiera, są dostępne dla wszystkich stron w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="645c8-323">Once the toolkit assembly has been added, you'll want to reference it in web.config so that the controls it contains are available to all pages in an application.</span></span> <span data-ttu-id="645c8-324">Można to zrobić, dodając następujący tag w z pliku web.config &lt;formantów&gt; tag:</span><span class="sxs-lookup"><span data-stu-id="645c8-324">This can be done by adding the following tag within web.config's &lt;controls&gt; tag:</span></span>

[!code-xml[Main](understanding-asp-net-ajax-web-services/samples/sample24.xml)]

<span data-ttu-id="645c8-325">W przypadkach, w których konieczne jest korzystanie z kontrolki w określonej strony możesz odwoływać się do niej przez dodanie dyrektywy odwołania do górnej części strony, jak pokazano w następnym zamiast aktualizowania pliku web.config:</span><span class="sxs-lookup"><span data-stu-id="645c8-325">In cases where you only need to use the control in a specific page you can reference it by adding the Reference directive to the top of a page as shown next rather than updating web.config:</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample25.aspx)]


[![U<span data-ttu-id="645c8-326">SING kontroli AutoCompleteExtender.]</span><span class="sxs-lookup"><span data-stu-id="645c8-326">sing the AutoCompleteExtender control.]</span></span>(understanding-asp-net-ajax-web-services/_static/image11.png)](understanding-asp-net-ajax-web-services/_static/image10.png)

<span data-ttu-id="645c8-327">**Rysunek 4**: Używanie formantu AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="645c8-327">**Figure 4**: Using the AutoCompleteExtender control.</span></span>  <span data-ttu-id="645c8-328">([Kliknij, aby wyświetlić obraz w pełnym rozmiarze](understanding-asp-net-ajax-web-services/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="645c8-328">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image12.png))</span></span>


<span data-ttu-id="645c8-329">Po witrynie sieci Web została skonfigurowana do użycia z zestawu narzędzi AJAX programu ASP.NET, formant AutoCompleteExtender mogą być dodawane do strony znacznie takich, jak należy dodać regularne formant serwera ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="645c8-329">Once the Website has been configured to use the ASP.NET AJAX Toolkit, an AutoCompleteExtender control can be added into the page much like you'd add a regular ASP.NET server control.</span></span> <span data-ttu-id="645c8-330">Wyświetlanie listy 19 pokazano przykład wywołać usługę sieci Web za pomocą formantu.</span><span class="sxs-lookup"><span data-stu-id="645c8-330">Listing 19 shows an example of using the control to call a Web Service.</span></span>

**<span data-ttu-id="645c8-331">Wyświetlanie listy 19.</span><span class="sxs-lookup"><span data-stu-id="645c8-331">Listing 19.</span></span> <span data-ttu-id="645c8-332">Używanie formantu AutoCompleteExtender zestawu narzędzi AJAX programu ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="645c8-332">Using the ASP.NET AJAX Toolkit AutoCompleteExtender control.</span></span>**

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample26.aspx)]

<span data-ttu-id="645c8-333">AutoCompleteExtender ma kilka różnych właściwości, w tym standardowy identyfikator i runat właściwości formantów serwera.</span><span class="sxs-lookup"><span data-stu-id="645c8-333">The AutoCompleteExtender has several different properties including the standard ID and runat properties found on server controls.</span></span> <span data-ttu-id="645c8-334">Oprócz wspomnianych umożliwia zdefiniowanie liczby znaków, które typy użytkownika końcowego przed uruchomieniem usługi sieci Web zostaje przesłane zapytanie danych.</span><span class="sxs-lookup"><span data-stu-id="645c8-334">In addition to these, it allows you to define how many characters an end user types before the Web Service is queried for data.</span></span> <span data-ttu-id="645c8-335">Właściwość MinimumPrefixLength wyświetlane w ofercie 19 powoduje, że usługa jest wywoływana za każdym razem, który znak jest wpisane w polu tekstowym.</span><span class="sxs-lookup"><span data-stu-id="645c8-335">The MinimumPrefixLength property shown in Listing 19 causes the service to be called each time a character is typed into the textbox.</span></span> <span data-ttu-id="645c8-336">Będziesz chciał należy zachować ostrożność, że ustawienie tej wartości, ponieważ zawsze użytkownik wpisuje znak usługi sieci Web zostanie wywołana w celu wyszukania wartości, które dopasowuje znaki w polu tekstowym.</span><span class="sxs-lookup"><span data-stu-id="645c8-336">You'll want to be careful setting this value since each time the user types a character the Web Service will be called to search for values that match the characters in the textbox.</span></span> <span data-ttu-id="645c8-337">Usługa sieci Web do wywołania, a także docelowym metody sieci Web są definiowane przy użyciu właściwości ServicePath i ServiceMethod odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="645c8-337">The Web Service to call as well as the target Web Method are defined using the ServicePath and ServiceMethod properties respectively.</span></span> <span data-ttu-id="645c8-338">Na koniec właściwość TargetControlID identyfikuje textbox, które można dołączyć kontrolki AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="645c8-338">Finally, the TargetControlID property identifies which textbox to hook the AutoCompleteExtender control to.</span></span>

<span data-ttu-id="645c8-339">Usługa sieci Web, wywoływana muszą mieć atrybut ScriptService stosowane zgodnie z wcześniejszym opisem i docelowy metody sieci Web muszą zaakceptować dwóch parametrów o nazwie prefixText i liczba.</span><span class="sxs-lookup"><span data-stu-id="645c8-339">The Web Service being called must have the ScriptService attribute applied as discussed earlier and the target Web Method must accept two parameters named prefixText and count.</span></span> <span data-ttu-id="645c8-340">Parametr prefixText reprezentuje znaki wpisane przez użytkownika końcowego, a parametr liczby liczbę elementów do zwrócenia (wartość domyślna wynosi 10).</span><span class="sxs-lookup"><span data-stu-id="645c8-340">The prefixText parameter represents the characters typed by the end user and the count parameter represents how many items to return (the default is 10).</span></span> <span data-ttu-id="645c8-341">Wyświetlanie listy 20 pokazano przykład metody sieci Web GetCustomerIDs, które są wywoływane przez formant AutoCompleteExtender przedstawionej w ofercie 19.</span><span class="sxs-lookup"><span data-stu-id="645c8-341">Listing 20 shows an example of the GetCustomerIDs Web Method called by the AutoCompleteExtender control shown earlier in Listing 19.</span></span> <span data-ttu-id="645c8-342">Metoda sieci Web wywołuje metodę warstwy biznesowej, z kolei wywołania danych w warstwie metoda, która obsługuje filtrowanie danych i zwracanie pasujących wyników.</span><span class="sxs-lookup"><span data-stu-id="645c8-342">The Web Method calls a business layer method that in turn calls a data layer method that handles filtering the data and returning the matching results.</span></span> <span data-ttu-id="645c8-343">Kod dla metody Warstwa danych jest wyświetlany w ofercie 21.</span><span class="sxs-lookup"><span data-stu-id="645c8-343">The code for the data layer method is shown in Listing 21.</span></span>

**<span data-ttu-id="645c8-344">Wyświetlanie listy 20.</span><span class="sxs-lookup"><span data-stu-id="645c8-344">Listing 20.</span></span> <span data-ttu-id="645c8-345">Filtrowanie danych wysyłanych z formantu AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="645c8-345">Filtering data sent from the AutoCompleteExtender control.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample27.cs)]

**<span data-ttu-id="645c8-346">Wyświetlanie listy 21.</span><span class="sxs-lookup"><span data-stu-id="645c8-346">Listing 21.</span></span> <span data-ttu-id="645c8-347">Filtrowanie wyników na podstawie danych wejściowych użytkownika końcowego.</span><span class="sxs-lookup"><span data-stu-id="645c8-347">Filtering results based upon end user input.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample28.cs)]

## <a name="conclusion"></a><span data-ttu-id="645c8-348">Wniosek</span><span class="sxs-lookup"><span data-stu-id="645c8-348">Conclusion</span></span>

<span data-ttu-id="645c8-349">ASP.NET AJAX oferuje niezrównane możliwości obsługi wywoływania usługi sieci Web bez konieczności pisania mnóstwo niestandardowy kod JavaScript do obsługi komunikatów żądań i odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="645c8-349">ASP.NET AJAX provides excellent support for calling Web Services without writing a lot of custom JavaScript code to handle the request and response messages.</span></span> <span data-ttu-id="645c8-350">W tym artykule przedstawiono sposób usługi sieci Web platformy .NET z obsługą technologii AJAX je włączyć do przetwarzania komunikatów JSON oraz sposób definiowania serwery proxy JavaScript za pomocą formantu ScriptManager.</span><span class="sxs-lookup"><span data-stu-id="645c8-350">In this article you've seen how to AJAX-enable .NET Web Services to enable them to process JSON messages and how to define JavaScript proxies using the ScriptManager control.</span></span> <span data-ttu-id="645c8-351">Wiesz też, jak JavaScript, serwery proxy może służyć do wywołania usługi sieci Web obsługi proste i złożone typy i postępowania z błędami.</span><span class="sxs-lookup"><span data-stu-id="645c8-351">You've also seen how JavaScript proxies can be used to call Web Services, handle simple and complex types and deal with failures.</span></span> <span data-ttu-id="645c8-352">Na koniec wiesz, jak można używać metod strony w celu uproszczenia procesu tworzenia i wykonywanie wywołań usługi sieci Web i jak kontrolka AutoCompleteExtender może zapewnić pomoc dla użytkowników końcowych, podczas ich wpisywania.</span><span class="sxs-lookup"><span data-stu-id="645c8-352">Finally, you've seen how page methods can be used to simplify the process of creating and making Web Service calls and how the AutoCompleteExtender control can provide help to end users as they type.</span></span> <span data-ttu-id="645c8-353">Mimo że kontrolę nad wyborem dla wielu programistów AJAX ze względu na prostotę jego UpdatePanel dostępne w technologii ASP.NET AJAX z pewnością, wiedząc sposób wywołania usług sieci Web za pośrednictwem serwery proxy JavaScript może być przydatne w wielu aplikacjach.</span><span class="sxs-lookup"><span data-stu-id="645c8-353">Although the UpdatePanel available in ASP.NET AJAX will certainly be the control of choice for many AJAX programmers due to its simplicity, knowing how to call Web Services through JavaScript proxies can be useful in many applications.</span></span>

## <a name="bio"></a><span data-ttu-id="645c8-354">Biografia</span><span class="sxs-lookup"><span data-stu-id="645c8-354">Bio</span></span>

<span data-ttu-id="645c8-355">DaN Wahlin (Microsoft Most Valuable Professional platformy ASP.NET i usługi XML sieci Web) jest .NET development przez instruktorów i architektura Konsultant w szkoleniu technicznym interfejsu ([http://www.interfacett.com](http://www.interfacett.com)).</span><span class="sxs-lookup"><span data-stu-id="645c8-355">Dan Wahlin (Microsoft Most Valuable Professional for ASP.NET and XML Web Services) is a .NET development instructor and architecture consultant at Interface Technical Training ([http://www.interfacett.com](http://www.interfacett.com)).</span></span> <span data-ttu-id="645c8-356">DaN założona XML dla witryny sieci Web deweloperów platformy ASP.NET ([www.XMLforASP.NET](http://www.XMLforASP.NET)), znajduje się na biura osoby mówiącej INETA i występuje na konferencjach kilka.</span><span class="sxs-lookup"><span data-stu-id="645c8-356">Dan founded the XML for ASP.NET Developers Web site ([www.XMLforASP.NET](http://www.XMLforASP.NET)), is on the INETA Speaker's Bureau and speaks at several conferences.</span></span> <span data-ttu-id="645c8-357">DaN utworzony wspólnie DNA Windows Professional (Wrox), platformy ASP.NET: Wskazówki, samouczki i kodu (Sams), platformy ASP.NET 1.1 niejawnego programu testów rozwiązania, Professional ASP.NET 2.0 AJAX (Wrox), uzyskuje dostęp do platformy ASP.NET w wersji 2.0 programu MVP i XML utworzone dla deweloperów platformy ASP.NET (Sams).</span><span class="sxs-lookup"><span data-stu-id="645c8-357">Dan co-authored Professional Windows DNA (Wrox), ASP.NET: Tips, Tutorials and Code (Sams), ASP.NET 1.1 Insider Solutions, Professional ASP.NET 2.0 AJAX (Wrox), ASP.NET 2.0 MVP Hacks and authored XML for ASP.NET Developers (Sams).</span></span> <span data-ttu-id="645c8-358">Jeśli on nie pisania kodu, artykuły lub książek, Dan cieszy się pisania i rejestrowanie utworów muzycznych i odtwarzanie golf i przeciwna swoją żoną i dzieci.</span><span class="sxs-lookup"><span data-stu-id="645c8-358">When he's not writing code, articles or books, Dan enjoys writing and recording music and playing golf and basketball with his wife and kids.</span></span>

<span data-ttu-id="645c8-359">Scott Cate pracował nad przy użyciu technologii Microsoft Web od 1997 r i jest Prezes myKB.com ([www.myKB.com](http://www.myKB.com)) gdzie specjalizuje się on w pisaniu ASP.NET aplikacji koncentruje się na rozwiązania programowe wiedzy opartych na.</span><span class="sxs-lookup"><span data-stu-id="645c8-359">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="645c8-360">Scott można się skontaktować za pośrednictwem poczty e-mail na [ scott.cate@myKB.com ](mailto:scott.cate@myKB.com) lub jego blog znajduje się na [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="645c8-360">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="645c8-361">[Poprzednie](understanding-asp-net-ajax-localization.md)
> [dalej](understanding-asp-net-ajax-debugging-capabilities.md)</span><span class="sxs-lookup"><span data-stu-id="645c8-361">[Previous](understanding-asp-net-ajax-localization.md)
[Next](understanding-asp-net-ajax-debugging-capabilities.md)</span></span>

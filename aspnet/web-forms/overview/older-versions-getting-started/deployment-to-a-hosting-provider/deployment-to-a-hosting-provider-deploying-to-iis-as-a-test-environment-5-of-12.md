---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12
title: 'Wdrażanie SQL Server Compact aplikacji sieci Web ASP.NET za pomocą programu Visual Studio lub Visual Web Developer: wdrażanie w usługach IIS jako środowisko testowe — 5 z 12 | Microsoft Docs'
author: tdykstra
description: W tej serii samouczków pokazano, jak wdrożyć (opublikować) projekt aplikacji sieci Web ASP.NET, który zawiera bazę danych SQL Server Compact przy użyciu stu Visual...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: 493b2a66-816c-485c-8315-952ed1085ccc
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12
msc.type: authoredcontent
ms.openlocfilehash: 5d85232ff2cb229d771d517db7173721c9e277bf
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78635129"
---
# <a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-deploying-to-iis-as-a-test-environment---5-of-12"></a><span data-ttu-id="38f63-103">Wdrażanie SQL Server Compact aplikacji sieci Web ASP.NET za pomocą programu Visual Studio lub Visual Web Developer: wdrażanie w usługach IIS jako środowisko testowe — 5 z 12</span><span class="sxs-lookup"><span data-stu-id="38f63-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Deploying to IIS as a Test Environment - 5 of 12</span></span>

<span data-ttu-id="38f63-104">Autor [Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="38f63-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="38f63-105">Pobierz projekt początkowy</span><span class="sxs-lookup"><span data-stu-id="38f63-105">Download Starter Project</span></span>](https://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="38f63-106">W tej serii samouczków pokazano, jak wdrożyć (opublikować) projekt aplikacji sieci Web ASP.NET, który zawiera bazę danych SQL Server Compact przy użyciu programu Visual Studio 2012 RC lub Visual Studio Express 2012 RC dla sieci Web.</span><span class="sxs-lookup"><span data-stu-id="38f63-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="38f63-107">Możesz również użyć programu Visual Studio 2010, jeśli zostanie zainstalowana aktualizacja publikacji w sieci Web.</span><span class="sxs-lookup"><span data-stu-id="38f63-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="38f63-108">Aby zapoznać się z wprowadzeniem do serii, zobacz [pierwszy samouczek w serii](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="38f63-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="38f63-109">Aby zapoznać się z samouczkiem zawierającym funkcje wdrażania wprowadzone po wydaniu wersji RC programu Visual Studio 2012, przedstawiono sposób wdrażania wersji SQL Server innych niż SQL Server Compact i przedstawiono sposób wdrażania programu w Azure App Service Web Apps, zobacz [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="38f63-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>

## <a name="overview"></a><span data-ttu-id="38f63-110">Omówienie</span><span class="sxs-lookup"><span data-stu-id="38f63-110">Overview</span></span>

<span data-ttu-id="38f63-111">W tym samouczku pokazano, jak wdrożyć aplikację sieci Web ASP.NET w usługach IIS na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="38f63-111">This tutorial shows how to deploy an ASP.NET web application to IIS on the local computer.</span></span>

<span data-ttu-id="38f63-112">Podczas opracowywania aplikacji zwykle testuje się przez uruchomienie go w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="38f63-112">When you develop an application, you generally test by running it in Visual Studio.</span></span> <span data-ttu-id="38f63-113">Domyślnie oznacza to, że używany jest serwer programistyczny programu Visual Studio (znany również jako Cassini).</span><span class="sxs-lookup"><span data-stu-id="38f63-113">By default, this means you're using the Visual Studio Development Server (also known as Cassini).</span></span> <span data-ttu-id="38f63-114">Serwer programistyczny programu Visual Studio ułatwia testowanie podczas opracowywania w programie Visual Studio, ale nie działa tak samo jak w przypadku usług IIS.</span><span class="sxs-lookup"><span data-stu-id="38f63-114">The Visual Studio Development Server makes it easy to test during development in Visual Studio, but it doesn't work exactly like IIS.</span></span> <span data-ttu-id="38f63-115">W związku z tym jest możliwe, że aplikacja będzie działać poprawnie podczas testowania w programie Visual Studio, ale nie powiedzie się, gdy zostanie ona wdrożona w usługach IIS w środowisku hostingu.</span><span class="sxs-lookup"><span data-stu-id="38f63-115">As a result, it's possible that an application will run correctly when you test it in Visual Studio, but fail when it's deployed to IIS in a hosting environment.</span></span>

<span data-ttu-id="38f63-116">Aplikacje można testować bardziej niezawodnie w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="38f63-116">You can test your application more reliably in these ways:</span></span>

1. <span data-ttu-id="38f63-117">Użyj IIS Express lub pełnych usług IIS zamiast serwera deweloperskiego programu Visual Studio podczas testowania w programie Visual Studio podczas opracowywania.</span><span class="sxs-lookup"><span data-stu-id="38f63-117">Use IIS Express or full IIS instead of the Visual Studio Development Server when you test in Visual Studio during development.</span></span> <span data-ttu-id="38f63-118">Ta metoda zwykle emuluje bardziej precyzyjnie, w jaki sposób lokacja będzie działać w ramach usług IIS.</span><span class="sxs-lookup"><span data-stu-id="38f63-118">This method generally emulates more accurately how your site will run under IIS.</span></span> <span data-ttu-id="38f63-119">Jednak ta metoda nie przetestuje procesu wdrażania lub sprawdza, czy wynik procesu wdrażania zostanie prawidłowo uruchomiony.</span><span class="sxs-lookup"><span data-stu-id="38f63-119">However, this method does not test your deployment process or validate that the result of the deployment process will run correctly.</span></span>
2. <span data-ttu-id="38f63-120">Wdróż aplikację w usługach IIS na komputerze deweloperskim, korzystając z tego samego procesu, który będzie używany później do wdrożenia go w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="38f63-120">Deploy the application to IIS on your development computer by using the same process that you'll use later to deploy it to your production environment.</span></span> <span data-ttu-id="38f63-121">Ta metoda sprawdza poprawność procesu wdrażania poza sprawdzeniem, czy aplikacja zostanie prawidłowo uruchomiona w ramach usług IIS.</span><span class="sxs-lookup"><span data-stu-id="38f63-121">This method validates your deployment process in addition to validating that your application will run correctly under IIS.</span></span>
3. <span data-ttu-id="38f63-122">Wdróż aplikację w środowisku testowym, która jest możliwie blisko środowiska produkcyjnego.</span><span class="sxs-lookup"><span data-stu-id="38f63-122">Deploy the application to a test environment that is as close as possible to your production environment.</span></span> <span data-ttu-id="38f63-123">Ze względu na to, że środowisko produkcyjne dla tych samouczków jest zewnętrznym dostawcą usług hostingowych, idealnym środowiskiem testowym będzie drugie konto z dostawcą hostingu.</span><span class="sxs-lookup"><span data-stu-id="38f63-123">Since the production environment for these tutorials is a third-party hosting provider, the ideal test environment would be a second account with the hosting provider.</span></span> <span data-ttu-id="38f63-124">To drugie konto będzie używane tylko do testowania, ale można je skonfigurować w taki sam sposób, jak konto produkcyjne.</span><span class="sxs-lookup"><span data-stu-id="38f63-124">You would use this second account only for testing, but it would be set up the same way as the production account.</span></span>

<span data-ttu-id="38f63-125">W tym samouczku przedstawiono kroki dla opcji 2.</span><span class="sxs-lookup"><span data-stu-id="38f63-125">This tutorial shows the steps for option 2.</span></span> <span data-ttu-id="38f63-126">Wskazówki dotyczące opcji 3 są dostępne na końcu samouczka [wdrażanie do środowiska produkcyjnego](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) , a na końcu tego samouczka znajdują się linki do zasobów dla opcji 1.</span><span class="sxs-lookup"><span data-stu-id="38f63-126">Guidance for option 3 is provided at the end of the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, and at the end of this tutorial there are links to resources for option 1.</span></span>

<span data-ttu-id="38f63-127">Przypomnienie: Jeśli zostanie wyświetlony komunikat o błędzie lub coś nie działa, gdy przejdziesz do samouczka, pamiętaj o sprawdzeniu [strony rozwiązywania problemów](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="38f63-127">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="configuring-the-application-to-run-in-medium-trust"></a><span data-ttu-id="38f63-128">Konfigurowanie aplikacji do uruchamiania w średnim zaufaniu</span><span class="sxs-lookup"><span data-stu-id="38f63-128">Configuring the Application to Run in Medium Trust</span></span>

<span data-ttu-id="38f63-129">Przed zainstalowaniem i wdrożeniem usług IIS zmień ustawienia pliku Web. config w celu zapewnienia, że lokacja będzie działać bardziej jak w typowym udostępnionym środowisku hostingu.</span><span class="sxs-lookup"><span data-stu-id="38f63-129">Before installing IIS and deploying to it, you'll change a Web.config file setting in order to make the site run more like it will in a typical shared hosting environment.</span></span>

<span data-ttu-id="38f63-130">Dostawcy hostingu zazwyczaj uruchamiają witrynę sieci Web w *średnim zaufaniu*, co oznacza, że niektóre rzeczy nie mogą być wykonywane.</span><span class="sxs-lookup"><span data-stu-id="38f63-130">Hosting providers typically run your web site in *medium trust*, which means there are some things it is not allowed to do.</span></span> <span data-ttu-id="38f63-131">Na przykład kod aplikacji nie może uzyskać dostępu do rejestru systemu Windows i nie może odczytywać ani zapisywać plików znajdujących się poza hierarchią folderów aplikacji.</span><span class="sxs-lookup"><span data-stu-id="38f63-131">For example, application code can't access the Windows registry and can't read or write files that are outside of your application's folder hierarchy.</span></span> <span data-ttu-id="38f63-132">Domyślnie aplikacja jest uruchamiana z *wysokim zaufaniem* na komputerze lokalnym, co oznacza, że aplikacja może być w stanie wykonywać operacje, które nie powiodą się podczas wdrażania go w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="38f63-132">By default your application runs in *high trust* on your local computer, which means that the application might be able to do things that would fail when you deploy it to production.</span></span> <span data-ttu-id="38f63-133">W związku z tym, aby środowisko testowe było dokładniej odzwierciedla środowisko produkcyjne, skonfigurujesz aplikację do uruchamiania w średnim zaufaniu.</span><span class="sxs-lookup"><span data-stu-id="38f63-133">Therefore, to make the test environment more accurately reflect the production environment, you'll configure the application to run in medium trust.</span></span>

<span data-ttu-id="38f63-134">W pliku Web. config aplikacji Dodaj element **zaufania** do elementu **System. Web** , jak pokazano w tym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="38f63-134">In the application Web.config file, add a **trust** element in the **system.web** element, as shown in this example.</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample1.xml?highlight=4)]

<span data-ttu-id="38f63-135">Aplikacja zostanie teraz uruchomiona w średnim zaufaniu w usługach IIS, nawet na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="38f63-135">The application will now run in medium trust in IIS even on your local computer.</span></span> <span data-ttu-id="38f63-136">To ustawienie umożliwia przechwycenie jak najszybciej, jak to możliwe, wszelkich prób spowodowanych przez kod aplikacji, aby wykonać coś, co nie powiedzie się w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="38f63-136">This setting enables you to catch as early as possible any attempts by application code to do something that would fail in production.</span></span>

> [!NOTE]
> <span data-ttu-id="38f63-137">Jeśli używasz migracje Code First platformy Entity Framework, upewnij się, że masz zainstalowaną wersję 5,0 lub nowszą.</span><span class="sxs-lookup"><span data-stu-id="38f63-137">If you are using Entity Framework Code First Migrations, make sure that you have version 5.0 or later installed.</span></span> <span data-ttu-id="38f63-138">W Entity Framework w wersji 4,3 migracja wymaga pełnego zaufania, aby można było zaktualizować schemat bazy danych.</span><span class="sxs-lookup"><span data-stu-id="38f63-138">In Entity Framework version 4.3, Migrations requires full trust in order to update the database schema.</span></span>

## <a name="installing-iis-and-web-deploy"></a><span data-ttu-id="38f63-139">Instalowanie usług IIS i Web Deploy</span><span class="sxs-lookup"><span data-stu-id="38f63-139">Installing IIS and Web Deploy</span></span>

<span data-ttu-id="38f63-140">Aby można było wdrożyć usługi IIS na komputerze deweloperskim, należy zainstalować usługi IIS i Web Deploy.</span><span class="sxs-lookup"><span data-stu-id="38f63-140">To deploy to IIS on your development computer, you must have IIS and Web Deploy installed.</span></span> <span data-ttu-id="38f63-141">Nie są one uwzględnione w domyślnej konfiguracji systemu Windows 7.</span><span class="sxs-lookup"><span data-stu-id="38f63-141">These are not included in the default Windows 7 configuration.</span></span> <span data-ttu-id="38f63-142">Jeśli zainstalowano już zarówno usługi IIS, jak i Web Deploy, przejdź do następnej sekcji.</span><span class="sxs-lookup"><span data-stu-id="38f63-142">If you have already installed both IIS and Web Deploy, skip to the next section.</span></span>

<span data-ttu-id="38f63-143">Korzystanie z [Instalatora platformy sieci Web](https://www.microsoft.com/web/downloads/platform.aspx) jest preferowanym sposobem instalowania usług iis i Web Deploy, ponieważ Instalator platformy sieci Web instaluje zalecaną konfigurację dla usług IIS i automatycznie instaluje wymagania wstępne dla usług iis i Web Deploy w razie potrzeby.</span><span class="sxs-lookup"><span data-stu-id="38f63-143">Using the [Web Platform Installer](https://www.microsoft.com/web/downloads/platform.aspx) is the preferred way to install IIS and Web Deploy, because the Web Platform Installer installs a recommended configuration for IIS and it automatically installs the prerequisites for IIS and Web Deploy if necessary.</span></span>

<span data-ttu-id="38f63-144">Aby uruchomić Instalatora platformy sieci Web, aby zainstalować usługi IIS i Web Deploy, użyj poniższego linku.</span><span class="sxs-lookup"><span data-stu-id="38f63-144">To run Web Platform Installer to install IIS and Web Deploy, use the following link.</span></span> <span data-ttu-id="38f63-145">Jeśli masz już zainstalowane usługi IIS, Web Deploy lub dowolny z wymaganych składników, Instalator platformy sieci Web zainstaluje tylko te, co nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="38f63-145">If you already have installed IIS, Web Deploy or any of their required components, the Web Platform Installer installs only what is missing.</span></span>

- [<span data-ttu-id="38f63-146">Instalowanie usług IIS i Web Deploy przy użyciu Instalatora WebPI</span><span class="sxs-lookup"><span data-stu-id="38f63-146">Install IIS and Web Deploy using WebPI</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=IIS7;ASPNET;NETFramework4;WDeploy)

## <a name="setting-the-default-application-pool-to-net-4"></a><span data-ttu-id="38f63-147">Ustawianie domyślnej puli aplikacji na .NET 4</span><span class="sxs-lookup"><span data-stu-id="38f63-147">Setting the Default Application Pool to .NET 4</span></span>

<span data-ttu-id="38f63-148">Po zainstalowaniu usług IIS Uruchom **Menedżera usług IIS** , aby upewnić się, że .NET Framework wersja 4 jest przypisana do domyślnej puli aplikacji.</span><span class="sxs-lookup"><span data-stu-id="38f63-148">After installing IIS, run **IIS Manager** to make sure that the .NET Framework version 4 is assigned to the default application pool.</span></span>

<span data-ttu-id="38f63-149">Z menu **Start** systemu Windows wybierz polecenie **Uruchom**, wpisz "inetmgr", a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="38f63-149">From the Windows **Start** menu, select **Run**, enter "inetmgr", and then click **OK**.</span></span> <span data-ttu-id="38f63-150">(Jeśli polecenie **Uruchom** nie znajduje się w menu **Start** , możesz nacisnąć klawisz systemu Windows i R, aby go otworzyć.</span><span class="sxs-lookup"><span data-stu-id="38f63-150">(If the **Run** command is not in your **Start** menu, you can press the Windows Key and R to open it.</span></span> <span data-ttu-id="38f63-151">Lub kliknij prawym przyciskiem myszy pasek zadań, kliknij pozycję **Właściwości**, wybierz kartę **menu Start** , kliknij polecenie **Dostosuj**, a następnie wybierz pozycję **Uruchom polecenie**.</span><span class="sxs-lookup"><span data-stu-id="38f63-151">Or right-click the taskbar, click **Properties**, select the **Start Menu** tab, click **Customize**, and select **Run command**.)</span></span>

<span data-ttu-id="38f63-152">W okienku **połączenia** rozwiń węzeł serwera, a następnie wybierz pozycję **Pule aplikacji**.</span><span class="sxs-lookup"><span data-stu-id="38f63-152">In the **Connections** pane, expand the server node and select **Application Pools**.</span></span> <span data-ttu-id="38f63-153">W okienku **Pule aplikacji** , jeśli do programu .NET Framework w wersji 4 zostanie przypisana **Domyślna** , jak pokazano na poniższej ilustracji, przejdź do następnej sekcji.</span><span class="sxs-lookup"><span data-stu-id="38f63-153">In the **Application Pools** pane, if **DefaultAppPool** is assigned to the .NET framework version 4 as in the following illustration, skip to the next section.</span></span>

<span data-ttu-id="38f63-154">[![Inetmgr_showing_4.0_app_pools](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="38f63-154">[![Inetmgr_showing_4.0_app_pools](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image1.png)</span></span>

<span data-ttu-id="38f63-155">Jeśli widzisz tylko dwie pule aplikacji, a oba z nich są ustawione na .NET Framework 2,0, musisz zainstalować ASP.NET 4 w usługach IIS:</span><span class="sxs-lookup"><span data-stu-id="38f63-155">If you see only two application pools and both of them are set to the .NET Framework 2.0, you have to install ASP.NET 4 in IIS:</span></span>

- <span data-ttu-id="38f63-156">Otwórz okno wiersza polecenia, klikając prawym przyciskiem myszy **wiersz polecenia** w menu **Start** systemu Windows i wybierając polecenie **Uruchom jako administrator**.</span><span class="sxs-lookup"><span data-stu-id="38f63-156">Open a command prompt window by right-clicking **Command Prompt** in the Windows **Start** menu and selecting **Run as Administrator**.</span></span> <span data-ttu-id="38f63-157">Następnie uruchom polecenie [aspnet\_regiis. exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) , aby zainstalować ASP.NET 4 w usługach IIS przy użyciu następujących poleceń.</span><span class="sxs-lookup"><span data-stu-id="38f63-157">Then run [aspnet\_regiis.exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) to install ASP.NET 4 in IIS, using the following commands.</span></span> <span data-ttu-id="38f63-158">(W systemach 64-bitowych Zastąp wartość "Framework" "Framework64").</span><span class="sxs-lookup"><span data-stu-id="38f63-158">(In 64-bit systems, replace "Framework" with "Framework64".)</span></span>

    [!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample2.cmd)]

    <span data-ttu-id="38f63-159">[![aspnet_regiis_installing_ASP. NET_4](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="38f63-159">[![aspnet_regiis_installing_ASP.NET_4](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image3.png)</span></span>

    <span data-ttu-id="38f63-160">To polecenie tworzy nowe pule aplikacji dla .NET Framework 4, ale domyślna pula aplikacji będzie nadal ustawiona na 2,0.</span><span class="sxs-lookup"><span data-stu-id="38f63-160">This command creates new application pools for the .NET Framework 4, but the default application pool will still be set to 2.0.</span></span> <span data-ttu-id="38f63-161">Wdrażasz aplikację, która jest przeznaczona dla platformy .NET 4, do tej puli aplikacji, więc musisz zmienić pulę aplikacji na .NET 4.</span><span class="sxs-lookup"><span data-stu-id="38f63-161">You'll be deploying an application that targets .NET 4 to that application pool, so you have to change the application pool to .NET 4.</span></span>

<span data-ttu-id="38f63-162">Jeśli **Menedżer usług IIS**został zamknięty, uruchom go ponownie, rozwiń węzeł serwera, a następnie kliknij pozycję **Pule aplikacji** , aby ponownie wyświetlić okienko **Pule aplikacji** .</span><span class="sxs-lookup"><span data-stu-id="38f63-162">If you closed **IIS Manager**, run it again, expand the server node, and click **Application Pools** to display the **Application Pools** pane again.</span></span>

<span data-ttu-id="38f63-163">W okienku **Pule aplikacji** kliknij pozycję **Domyślna pula**, a następnie w okienku **Akcje** kliknij pozycję **Ustawienia podstawowe**.</span><span class="sxs-lookup"><span data-stu-id="38f63-163">In the **Application Pools** pane, click **DefaultAppPool**, and then in the **Actions** pane click **Basic Settings**.</span></span>

<span data-ttu-id="38f63-164">[![Inetmgr_selecting_Basic_Settings_for_app_pool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="38f63-164">[![Inetmgr_selecting_Basic_Settings_for_app_pool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image5.png)</span></span>

<span data-ttu-id="38f63-165">W oknie dialogowym **Edytowanie puli aplikacji** zmień **wersję .NET Framework** na **.NET Framework v 4.0.30319** , a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="38f63-165">In the **Edit Application Pool** dialog box, change **.NET Framework version** to **.NET Framework v4.0.30319** and click **OK**.</span></span>

<span data-ttu-id="38f63-166">[![Selecting_. NET_4_for_DefaultAppPool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="38f63-166">[![Selecting_.NET_4_for_DefaultAppPool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image7.png)</span></span>

<span data-ttu-id="38f63-167">Teraz można przystąpić do publikowania w usługach IIS.</span><span class="sxs-lookup"><span data-stu-id="38f63-167">You are now ready to publish to IIS.</span></span>

## <a name="publishing-to-iis"></a><span data-ttu-id="38f63-168">Publikowanie w usługach IIS</span><span class="sxs-lookup"><span data-stu-id="38f63-168">Publishing to IIS</span></span>

<span data-ttu-id="38f63-169">Istnieje kilka sposobów wdrażania przy użyciu programu Visual Studio 2010 i Web Deploy:</span><span class="sxs-lookup"><span data-stu-id="38f63-169">There are several ways you can deploy using Visual Studio 2010 and Web Deploy:</span></span>

- <span data-ttu-id="38f63-170">Użyj programu Visual Studio, a następnie kliknij pozycję Publikuj.</span><span class="sxs-lookup"><span data-stu-id="38f63-170">Use Visual Studio one-click publish.</span></span>
- <span data-ttu-id="38f63-171">Utwórz *pakiet wdrożeniowy* i zainstaluj go przy użyciu interfejsu użytkownika Menedżera usług IIS.</span><span class="sxs-lookup"><span data-stu-id="38f63-171">Create a *deployment package* and install it using the IIS Manager UI.</span></span> <span data-ttu-id="38f63-172">Pakiet wdrożeniowy składa się z pliku *zip* , który zawiera wszystkie pliki i metadane, które są konieczne do zainstalowania lokacji w usługach IIS.</span><span class="sxs-lookup"><span data-stu-id="38f63-172">The deployment package consists of a *.zip* file that contains all the files and metadata needed to install a site in IIS.</span></span>
- <span data-ttu-id="38f63-173">Utwórz pakiet wdrożeniowy i zainstaluj go przy użyciu wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="38f63-173">Create a deployment package and install it using the command line.</span></span>

<span data-ttu-id="38f63-174">Proces, w którym nastąpiło przechodzenie w poprzednich samouczkach, aby skonfigurować program Visual Studio do automatyzowania zadań wdrażania, ma zastosowanie do wszystkich tych trzech metod.</span><span class="sxs-lookup"><span data-stu-id="38f63-174">The process you went through in the previous tutorials to set up Visual Studio to automate deployment tasks applies to all of these three methods.</span></span> <span data-ttu-id="38f63-175">W tych samouczkach użyjesz pierwszej z tych metod.</span><span class="sxs-lookup"><span data-stu-id="38f63-175">In these tutorials you'll use the first of these methods.</span></span> <span data-ttu-id="38f63-176">Aby uzyskać informacje o korzystaniu z pakietów wdrożeniowych, zobacz [ASP.NET Deployment Content Map](https://msdn.microsoft.com/library/bb386521.aspx).</span><span class="sxs-lookup"><span data-stu-id="38f63-176">For information about using deployment packages, see [ASP.NET Deployment Content Map](https://msdn.microsoft.com/library/bb386521.aspx).</span></span>

<span data-ttu-id="38f63-177">Przed opublikowaniem upewnij się, że program Visual Studio jest uruchomiony w trybie administratora.</span><span class="sxs-lookup"><span data-stu-id="38f63-177">Before publishing, make sure that you are running Visual Studio in administrator mode.</span></span> <span data-ttu-id="38f63-178">(W menu **Start** systemu Windows 7 kliknij prawym przyciskiem myszy ikonę używanej wersji programu Visual Studio, a następnie wybierz polecenie **Uruchom jako administrator**.) Tryb administratora jest wymagany do publikowania tylko w przypadku publikowania w usługach IIS na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="38f63-178">(In the Windows 7 **Start** menu, right-click the icon for the version of Visual Studio you're using and select **Run as Administrator**.) Administrator mode is required for publishing only when you are publishing to IIS on the local computer.</span></span>

<span data-ttu-id="38f63-179">W **Eksplorator rozwiązań**kliknij prawym przyciskiem myszy projekt ContosoUniversity (a nie projekt CONTOSOUNIVERSITY. dal) i wybierz polecenie **Publikuj**.</span><span class="sxs-lookup"><span data-stu-id="38f63-179">In **Solution Explorer**, right-click the ContosoUniversity project (not the ContosoUniversity.DAL project) and select **Publish**.</span></span>

<span data-ttu-id="38f63-180">Zostanie wyświetlony Kreator **publikowania w sieci Web** .</span><span class="sxs-lookup"><span data-stu-id="38f63-180">The **Publish Web** wizard appears.</span></span>

![Publish_Web_wizard_Profile_tab](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image9.png)

<span data-ttu-id="38f63-182">Z listy rozwijanej wybierz pozycję **&lt;nowy...&gt;** .</span><span class="sxs-lookup"><span data-stu-id="38f63-182">In the drop-down list, select **&lt;New...&gt;**.</span></span>

<span data-ttu-id="38f63-183">W oknie dialogowym **Nowy profil** wprowadź "test", a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="38f63-183">In the **New Profile** dialog box, enter "Test", and then click **OK**.</span></span>

![New_Profile_dialog_box](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image10.png)

<span data-ttu-id="38f63-185">Ta nazwa jest taka sama jak w środkowym węźle utworzonego wcześniej pliku transformacji Web. test. config.</span><span class="sxs-lookup"><span data-stu-id="38f63-185">This name is the same as the middle node of the Web.Test.config transform file that you created earlier.</span></span> <span data-ttu-id="38f63-186">Ta zgodność polega na tym, że przekształcenia Web. test. config mają być stosowane podczas publikowania przy użyciu tego profilu.</span><span class="sxs-lookup"><span data-stu-id="38f63-186">This correspondence is what causes the Web.Test.config transformations to be applied when you publish by using this profile.</span></span>

<span data-ttu-id="38f63-187">Kreator automatycznie przechodzi do karty **połączenie** .</span><span class="sxs-lookup"><span data-stu-id="38f63-187">The wizard automatically advances to the **Connection** tab.</span></span>

<span data-ttu-id="38f63-188">W polu **adres URL usługi** wprowadź wartość *localhost*.</span><span class="sxs-lookup"><span data-stu-id="38f63-188">In the **Service URL** box, enter *localhost*.</span></span>

<span data-ttu-id="38f63-189">W polu **Witryna/aplikacja** wprowadź *domyślną witrynę sieci Web/ContosoUniversity*.</span><span class="sxs-lookup"><span data-stu-id="38f63-189">In the **Site/application** box, enter *Default Web Site/ContosoUniversity*.</span></span>

<span data-ttu-id="38f63-190">W polu **docelowy adres URL** wprowadź `http://localhost/ContosoUniversity`.</span><span class="sxs-lookup"><span data-stu-id="38f63-190">In the **Destination URL** box, enter `http://localhost/ContosoUniversity`.</span></span>

<span data-ttu-id="38f63-191">Ustawienie **docelowego adresu URL** nie jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="38f63-191">The **Destination URL** setting isn't required.</span></span> <span data-ttu-id="38f63-192">Gdy program Visual Studio zakończy wdrażanie aplikacji, automatycznie otwiera domyślną przeglądarkę na tym adresie URL.</span><span class="sxs-lookup"><span data-stu-id="38f63-192">When Visual Studio finishes deploying the application, it automatically opens your default browser to this URL.</span></span> <span data-ttu-id="38f63-193">Jeśli nie chcesz, aby przeglądarka była otwierana automatycznie po wdrożeniu, pozostaw to pole puste.</span><span class="sxs-lookup"><span data-stu-id="38f63-193">If you don't want the browser to open automatically after deployment, leave this box blank.</span></span>

![Publish_Web_wizard_Connection_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image11.png)

<span data-ttu-id="38f63-195">Kliknij pozycję **Sprawdź poprawność połączenia** , aby sprawdzić, czy ustawienia są poprawne i czy można nawiązać połączenie z usługami IIS na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="38f63-195">Click **Validate Connection** to verify that the settings are correct and you can connect to IIS on the local computer.</span></span>

<span data-ttu-id="38f63-196">Zielony znacznik wyboru weryfikuje, czy połączenie zostało nawiązane pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="38f63-196">A green check mark verifies that the connection is successful.</span></span>

![Publish_Web_wizard_Connection_tab_validated](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image12.png)

<span data-ttu-id="38f63-198">Kliknij przycisk **dalej** , aby przejść do karty **Ustawienia** .</span><span class="sxs-lookup"><span data-stu-id="38f63-198">Click **Next** to advance to the **Settings** tab.</span></span>

<span data-ttu-id="38f63-199">Pole listy rozwijanej **Konfiguracja** określa konfigurację kompilacji do wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="38f63-199">The **Configuration** drop-down box specifies the build configuration to deploy.</span></span> <span data-ttu-id="38f63-200">Wartość domyślna to Release (wersja), co jest potrzebne.</span><span class="sxs-lookup"><span data-stu-id="38f63-200">The default value is Release, which is what you want.</span></span>

<span data-ttu-id="38f63-201">Pozostaw zaznaczone pole wyboru **Usuń dodatkowe pliki w miejscu docelowym** .</span><span class="sxs-lookup"><span data-stu-id="38f63-201">Leave the **Remove additional files at destination** check box cleared.</span></span> <span data-ttu-id="38f63-202">Ponieważ jest to pierwsze wdrożenie, nie będzie jeszcze żadnych plików w folderze docelowym.</span><span class="sxs-lookup"><span data-stu-id="38f63-202">Since this is your first deployment, there won't be any files in the destination folder yet.</span></span>

<span data-ttu-id="38f63-203">W sekcji **bazy danych** Wprowadź następującą wartość w polu Parametry połączenia dla **SchoolContext**:</span><span class="sxs-lookup"><span data-stu-id="38f63-203">In the **Databases** section, enter the following value in the connection string box for **SchoolContext**:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample3.cmd)]

<span data-ttu-id="38f63-204">Proces wdrażania umieści te parametry połączenia we wdrożonym pliku Web. config, ponieważ wybrane są **Parametry połączenia w czasie wykonywania** .</span><span class="sxs-lookup"><span data-stu-id="38f63-204">The deployment process will put this connection string in the deployed Web.config file because **Use this connection string at runtime** is selected.</span></span>

<span data-ttu-id="38f63-205">W obszarze **SchoolContext**wybierz pozycję **Zastosuj migracje Code First**.</span><span class="sxs-lookup"><span data-stu-id="38f63-205">Also under **SchoolContext**, select **Apply Code First Migrations**.</span></span> <span data-ttu-id="38f63-206">Ta opcja powoduje, że proces wdrażania skonfiguruje wdrożony plik Web. config, aby określić inicjator `MigrateDatabaseToLatestVersion`.</span><span class="sxs-lookup"><span data-stu-id="38f63-206">This option causes the deployment process to configure the deployed Web.config file to specify the `MigrateDatabaseToLatestVersion` initializer.</span></span> <span data-ttu-id="38f63-207">Ten inicjator automatycznie aktualizuje bazę danych do najnowszej wersji, gdy aplikacja uzyskuje dostęp do bazy danych po raz pierwszy po wdrożeniu.</span><span class="sxs-lookup"><span data-stu-id="38f63-207">This initializer automatically updates the database to the latest version when the application accesses the database for the first time after deployment.</span></span>

<span data-ttu-id="38f63-208">W polu ciąg połączenia dla **DefaultConnection**Wprowadź następującą wartość:</span><span class="sxs-lookup"><span data-stu-id="38f63-208">In the connection string box for **DefaultConnection**, enter the following value:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample4.cmd)]

<span data-ttu-id="38f63-209">Pozostaw wyczyszczone **aktualizacje bazy danych** .</span><span class="sxs-lookup"><span data-stu-id="38f63-209">Leave **Update database** cleared.</span></span> <span data-ttu-id="38f63-210">Baza danych członkostwa zostanie wdrożona przez skopiowanie pliku. sdf w aplikacji\_dane i nie chcesz, aby proces wdrażania wykonał inne czynności z tą bazą danych.</span><span class="sxs-lookup"><span data-stu-id="38f63-210">The membership database will be deployed by copying the .sdf file in App\_Data, and you don't want the deployment process to do anything else with this database.</span></span>

![Publish_Web_wizard_Settings_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image13.png)

<span data-ttu-id="38f63-212">Kliknij przycisk **dalej** , aby przejść do karty **wersja zapoznawcza** .</span><span class="sxs-lookup"><span data-stu-id="38f63-212">Click **Next** to advance to the **Preview** tab.</span></span>

<span data-ttu-id="38f63-213">Na karcie **Podgląd** kliknij pozycję **Rozpocznij podgląd** , aby wyświetlić listę plików, które zostaną skopiowane.</span><span class="sxs-lookup"><span data-stu-id="38f63-213">In the **Preview** tab, click **Start Preview** to see a list of the files that will be copied.</span></span>

![Publish_Web_wizard_Preview_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image14.png)

![Publish_Web_wizard_Preview_tab_Test_with_file_list](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image15.png)

<span data-ttu-id="38f63-216">Kliknij przycisk **Opublikuj**.</span><span class="sxs-lookup"><span data-stu-id="38f63-216">Click **Publish**.</span></span>

<span data-ttu-id="38f63-217">Jeśli program Visual Studio nie jest w trybie administratora, może zostać wyświetlony komunikat o błędzie z informacją o błędzie uprawnień.</span><span class="sxs-lookup"><span data-stu-id="38f63-217">If Visual Studio is not in administrator mode, you might get an error message that indicates a permissions error.</span></span> <span data-ttu-id="38f63-218">W takim przypadku Zamknij program Visual Studio, otwórz go w trybie administratora, a następnie ponów próbę opublikowania.</span><span class="sxs-lookup"><span data-stu-id="38f63-218">In that case, close Visual Studio, open it in administrator mode, and try to publish again.</span></span>

<span data-ttu-id="38f63-219">Jeśli program Visual Studio jest w trybie administratora, w oknie **danych wyjściowych** są raportowane pomyślne kompilacje i publikowanie.</span><span class="sxs-lookup"><span data-stu-id="38f63-219">If Visual Studio is in administrator mode, the **Output** window reports successful build and publish.</span></span>

![Output_window_publish_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image16.png)

<span data-ttu-id="38f63-221">Przeglądarka automatycznie otworzy stronę główną firmy Contoso University działającą w usługach IIS na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="38f63-221">The browser automatically opens to the Contoso University Home page running in IIS on the local computer.</span></span>

<span data-ttu-id="38f63-222">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="38f63-222">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image17.png)</span></span>

## <a name="testing-in-the-test-environment"></a><span data-ttu-id="38f63-223">Testowanie w środowisku testowym</span><span class="sxs-lookup"><span data-stu-id="38f63-223">Testing in the Test Environment</span></span>

<span data-ttu-id="38f63-224">Należy zauważyć, że wskaźnik środowiska pokazuje "(test)" zamiast "(dev)", który pokazuje, że transformacja *pliku Web. config* dla wskaźnika środowiska zakończyła się pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="38f63-224">Notice that the environment indicator shows "(Test)" instead of "(Dev)", which shows that the *Web.config* transformation for the environment indicator was successful.</span></span>

<span data-ttu-id="38f63-225">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image20.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="38f63-225">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image20.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image19.png)</span></span>

<span data-ttu-id="38f63-226">Uruchom stronę **uczniów** , aby sprawdzić, czy wdrożona baza danych nie ma uczniów.</span><span class="sxs-lookup"><span data-stu-id="38f63-226">Run the **Students** page to verify that the deployed database has no students.</span></span> <span data-ttu-id="38f63-227">Po wybraniu tej strony może upłynąć kilka minut, ponieważ Code First tworzy bazę danych, a następnie uruchamia metodę `Seed`.</span><span class="sxs-lookup"><span data-stu-id="38f63-227">When you select this page it may take a few minutes to load because Code First creates the database and then runs the `Seed` method.</span></span> <span data-ttu-id="38f63-228">(Nie było to zrobione na stronie głównej, ponieważ aplikacja nie próbowała jeszcze uzyskać dostępu do bazy danych).</span><span class="sxs-lookup"><span data-stu-id="38f63-228">(It didn't do that when you were on the home page because the application didn't try to access the database yet.)</span></span>

<span data-ttu-id="38f63-229">[![Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image22.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="38f63-229">[![Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image22.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image21.png)</span></span>

<span data-ttu-id="38f63-230">Uruchom stronę **instruktorów** , aby sprawdzić, czy Code First wypełniania bazy danych za pomocą instruktora:</span><span class="sxs-lookup"><span data-stu-id="38f63-230">Run the **Instructors** page to verify that Code First seeded the database with instructor data:</span></span>

<span data-ttu-id="38f63-231">[![Instructors_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image24.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="38f63-231">[![Instructors_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image24.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image23.png)</span></span>

<span data-ttu-id="38f63-232">Wybierz pozycję **Dodaj uczniów** z menu **uczniów** , Dodaj ucznia, a następnie Wyświetl nowych uczniów na stronie **uczniów** , aby sprawdzić, czy można pomyślnie zapisać w bazie danych:</span><span class="sxs-lookup"><span data-stu-id="38f63-232">Select **Add Students** from the **Students** menu, add a student, and then view the new student in the **Students** page to verify that you can successfully write to the database:</span></span>

<span data-ttu-id="38f63-233">[![Add_Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image26.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="38f63-233">[![Add_Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image26.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image25.png)</span></span>

<span data-ttu-id="38f63-234">[![Students_page_with_new_student_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image28.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="38f63-234">[![Students_page_with_new_student_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image28.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image27.png)</span></span>

<span data-ttu-id="38f63-235">Z menu **kursy** wybierz pozycję **Aktualizuj kredyty**.</span><span class="sxs-lookup"><span data-stu-id="38f63-235">From the **Courses** menu, select **Update Credits**.</span></span> <span data-ttu-id="38f63-236">Strona **kredyty aktualizacji** wymaga uprawnień administratora, więc zostanie wyświetlona strona **logowania** .</span><span class="sxs-lookup"><span data-stu-id="38f63-236">The **Update Credits** page requires administrator permissions, so the **Log In** page is displayed.</span></span> <span data-ttu-id="38f63-237">Wprowadź utworzone wcześniej poświadczenia konta administratora ("admin" i "pas $ w0rd").</span><span class="sxs-lookup"><span data-stu-id="38f63-237">Enter the administrator account credentials that you created earlier ("admin" and "Pas$w0rd").</span></span> <span data-ttu-id="38f63-238">Zostanie wyświetlona strona **kredyty aktualizacji** , która sprawdza, czy konto administratora utworzone w poprzednim samouczku zostało prawidłowo wdrożone w środowisku testowym.</span><span class="sxs-lookup"><span data-stu-id="38f63-238">The **Update Credits** page is displayed, which verifies that the administrator account that you created in the previous tutorial was correctly deployed to the test environment.</span></span>

<span data-ttu-id="38f63-239">[![Log_In_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image30.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="38f63-239">[![Log_In_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image30.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image29.png)</span></span>

<span data-ttu-id="38f63-240">[![Update_Credits_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image32.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="38f63-240">[![Update_Credits_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image32.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image31.png)</span></span>

<span data-ttu-id="38f63-241">Sprawdź, czy istnieje folder *ELMAH* zawierający tylko plik zastępczy.</span><span class="sxs-lookup"><span data-stu-id="38f63-241">Verify that an *Elmah* folder exists with only the placeholder file in it.</span></span>

<span data-ttu-id="38f63-242">[![Elmah_folder_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image34.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="38f63-242">[![Elmah_folder_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image34.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image33.png)</span></span>

<a id="efcfmigrations"></a>

## <a name="reviewing-the-automatic-webconfig-changes-for-code-first-migrations"></a><span data-ttu-id="38f63-243">Przeglądanie automatycznych zmian w pliku Web. config dla Migracje Code First</span><span class="sxs-lookup"><span data-stu-id="38f63-243">Reviewing the Automatic Web.config Changes for Code First Migrations</span></span>

<span data-ttu-id="38f63-244">Otwórz plik *Web. config* we wdrożonej aplikacji pod adresem *C:\inetpub\wwwroot\ContosoUniversity* i sprawdź, gdzie skonfigurowany proces wdrażania migracje Code First automatycznie aktualizować bazę danych do najnowszej wersji.</span><span class="sxs-lookup"><span data-stu-id="38f63-244">Open the *Web.config* file in the deployed application at *C:\inetpub\wwwroot\ContosoUniversity* and you can see where the deployment process configured Code First Migrations to automatically update the database to the latest version.</span></span>

![](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image35.png)

<span data-ttu-id="38f63-245">Proces wdrażania również utworzył nowe parametry połączenia dla Migracje Code First, które mają być używane wyłącznie do aktualizacji schematu bazy danych:</span><span class="sxs-lookup"><span data-stu-id="38f63-245">The deployment process also created a new connection string for Code First Migrations to use exclusively for updating the database schema:</span></span>

![DatabasePublish_connection_string](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image36.png)

<span data-ttu-id="38f63-247">Te dodatkowe parametry połączenia umożliwiają określenie jednego konta użytkownika dla aktualizacji schematu bazy danych i innego konta użytkownika na potrzeby dostępu do danych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="38f63-247">This additional connection string enables you to specify one user account for database schema updates, and a different user account for application data access.</span></span> <span data-ttu-id="38f63-248">Można na przykład przypisać rolę właściciela\_bazy danych do Migracje Code First, a usługi DB\_elementu DataReader i bazy danych\_ról do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="38f63-248">For example, you could assign the db\_owner role to Code First Migrations, and db\_datareader and db\_datawriter roles to the application.</span></span> <span data-ttu-id="38f63-249">Jest to typowy wzorzec obrony, który zapobiega zmienianiu schematu bazy danych przez potencjalnie złośliwy kod w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="38f63-249">This is a common defense-in-depth pattern that prevents potentially malicious code in the application from changing the database schema.</span></span> <span data-ttu-id="38f63-250">(Na przykład może się to zdarzyć w przypadku pomyślnego ataku polegającego na iniekcji SQL). Ten wzorzec nie jest używany przez te samouczki.</span><span class="sxs-lookup"><span data-stu-id="38f63-250">(For example, this might happen in a successful SQL injection attack.) This pattern is not used by these tutorials.</span></span> <span data-ttu-id="38f63-251">Nie ma zastosowania do SQL Server Compact i nie ma zastosowania w przypadku migrowania do SQL Server w kolejnym samouczku w tej serii.</span><span class="sxs-lookup"><span data-stu-id="38f63-251">It does not apply to SQL Server Compact, and it does not apply when you migrate to SQL Server in a later tutorial in this series.</span></span> <span data-ttu-id="38f63-252">Witryna Cytanium oferuje tylko jedno konto użytkownika do uzyskiwania dostępu do bazy danych SQL Server utworzonej w witrynie Cytanium.</span><span class="sxs-lookup"><span data-stu-id="38f63-252">The Cytanium site offers just one user account for accessing the SQL Server database that you create at Cytanium.</span></span> <span data-ttu-id="38f63-253">Jeśli możesz zaimplementować ten wzorzec w scenariuszu, możesz to zrobić, wykonując następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="38f63-253">If you are able to implement this pattern in your scenario, you can do it by performing the following steps:</span></span>

1. <span data-ttu-id="38f63-254">Na karcie **Ustawienia** Kreatora publikacji w **sieci Web** wprowadź parametry połączenia określające użytkownika z uprawnieniami pełnej aktualizacji schematu bazy danych, a następnie wyczyść pole wyboru **Użyj tych parametrów połączenia w czasie wykonywania** .</span><span class="sxs-lookup"><span data-stu-id="38f63-254">In the **Settings** tab of the **Publish Web** wizard, enter the connection string that specifies a user with full database schema update permissions, and clear the **Use this connection string at runtime** check box.</span></span> <span data-ttu-id="38f63-255">W wdrożonym pliku Web. config jest to `DatabasePublish` parametry połączenia.</span><span class="sxs-lookup"><span data-stu-id="38f63-255">In the deployed Web.config file, this becomes the `DatabasePublish` connection string.</span></span>
2. <span data-ttu-id="38f63-256">Utwórz transformację pliku Web. config dla parametrów połączenia, które mają być używane przez aplikację w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="38f63-256">Create a Web.config file transformation for the connection string that you want the application to use at run time.</span></span>

<span data-ttu-id="38f63-257">Aplikacja została wdrożona w usługach IIS na komputerze deweloperskim i przetestowana w tym miejscu.</span><span class="sxs-lookup"><span data-stu-id="38f63-257">You have now deployed your application to IIS on your development computer and tested it there.</span></span> <span data-ttu-id="38f63-258">Umożliwia to sprawdzenie, czy proces wdrożenia skopiował zawartość aplikacji do odpowiedniej lokalizacji (z wyłączeniem plików, które nie zostały wdrożone), a także Web Deploy skonfigurowanych usług IIS poprawnie podczas wdrażania.</span><span class="sxs-lookup"><span data-stu-id="38f63-258">This verifies that the deployment process copied the application's content to the right location (excluding the files that you did not want to deploy), and also that Web Deploy configured IIS correctly during deployment.</span></span> <span data-ttu-id="38f63-259">W następnym samouczku zostanie uruchomiony jeszcze jeden test, który znajdzie zadanie wdrożenia, które nie zostało jeszcze wykonane: Ustawianie uprawnień do folderu w folderze *ELMAH* .</span><span class="sxs-lookup"><span data-stu-id="38f63-259">In the next tutorial, you'll run one more test that finds a deployment task that has not yet been done: setting folder permissions on the *Elmah* folder.</span></span>

## <a name="more-information"></a><span data-ttu-id="38f63-260">Więcej informacji</span><span class="sxs-lookup"><span data-stu-id="38f63-260">More Information</span></span>

<span data-ttu-id="38f63-261">Aby uzyskać informacje na temat uruchamiania usług IIS lub IIS Express w programie Visual Studio, zobacz następujące zasoby:</span><span class="sxs-lookup"><span data-stu-id="38f63-261">For information about running IIS or IIS Express in Visual Studio, see the following resources:</span></span>

- <span data-ttu-id="38f63-262">[IIS Express przegląd](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) w witrynie IIS.NET.</span><span class="sxs-lookup"><span data-stu-id="38f63-262">[IIS Express Overview](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) on the IIS.net site.</span></span>
- <span data-ttu-id="38f63-263">[Wprowadzenie IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) na blogu Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="38f63-263">[Introducing IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) on Scott Guthrie's blog.</span></span>
- <span data-ttu-id="38f63-264">[Instrukcje: Określanie serwera sieci Web dla projektów sieci Web w programie Visual Studio](https://msdn.microsoft.com/library/ms178108.aspx).</span><span class="sxs-lookup"><span data-stu-id="38f63-264">[How to: Specify the Web Server for Web Projects in Visual Studio](https://msdn.microsoft.com/library/ms178108.aspx).</span></span>
- <span data-ttu-id="38f63-265">[Podstawowe różnice między usługami IIS i ASP.NET Development Server](../deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) w witrynie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="38f63-265">[Core Differences Between IIS and the ASP.NET Development Server](../deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) on the ASP.NET site.</span></span>
- <span data-ttu-id="38f63-266">[Przetestuj aplikację ASP.NET MVC lub Web Forms w usługach IIS 7 w ciągu 30 sekund](https://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds.aspx) na blogu Rick Anderson.</span><span class="sxs-lookup"><span data-stu-id="38f63-266">[Test your ASP.NET MVC or Web Forms Application on IIS 7 in 30 seconds](https://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds.aspx) on Rick Anderson's blog.</span></span> <span data-ttu-id="38f63-267">Ten wpis zawiera przykłady dlaczego testowanie za pomocą programu Visual Studio Development Server (Cassini) nie jest tak niezawodne jak testowanie w IIS Express i dlaczego testowanie w IIS Express nie jest tak niezawodne jak testowanie w usługach IIS.</span><span class="sxs-lookup"><span data-stu-id="38f63-267">This entry provides examples of why testing with the Visual Studio Development Server (Cassini) is not as reliable as testing in IIS Express, and why testing in IIS Express is not as reliable as testing in IIS.</span></span>

<span data-ttu-id="38f63-268">Aby uzyskać informacje o problemach, które mogą wystąpić, gdy aplikacja jest uruchamiana w średnim zaufaniu, zobacz [hosting aplikacji ASP.NET w średnim zaufaniu](http://www.4guysfromrolla.com/articles/100307-1.aspx) w 4 złoczyńców z witryny rolla.</span><span class="sxs-lookup"><span data-stu-id="38f63-268">For information about what issues might arise when your application runs in medium trust, see [Hosting ASP.NET Applications in Medium Trust](http://www.4guysfromrolla.com/articles/100307-1.aspx) on the 4 Guys from Rolla site.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="38f63-269">[Poprzednie](deployment-to-a-hosting-provider-configuring-project-properties-4-of-12.md)
> [dalej](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="38f63-269">[Previous](deployment-to-a-hosting-provider-configuring-project-properties-4-of-12.md)
[Next](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)</span></span>

---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-5
title: Wprowadzenie z Entity Framework 4,0 Database First i ASP.NET 4 Web Forms — część 5 | Microsoft Docs
author: tdykstra
description: Przykładowa aplikacja internetowa Contoso University pokazuje, jak tworzyć aplikacje ASP.NET Web Forms przy użyciu Entity Framework. Przykładowa aplikacja to...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: 24ad4379-3fb2-44dc-ba59-85fe0ffcb2ae
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-5
msc.type: authoredcontent
ms.openlocfilehash: 75328e67abb4295b619cac5423a9eb970942fff7
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78528001"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-5"></a><span data-ttu-id="d6e77-104">Wprowadzenie z Entity Framework 4,0 Database First i ASP.NET 4 Web Forms — część 5</span><span class="sxs-lookup"><span data-stu-id="d6e77-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 5</span></span>

<span data-ttu-id="d6e77-105">Autor [Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="d6e77-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="d6e77-106">Przykładowa aplikacja internetowa Contoso University pokazuje, jak tworzyć aplikacje ASP.NET Web Forms przy użyciu Entity Framework 4,0 i programu Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="d6e77-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="d6e77-107">Aby uzyskać informacje na temat serii samouczków, zobacz [pierwszy samouczek w serii](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="d6e77-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="working-with-related-data-continued"></a><span data-ttu-id="d6e77-108">Praca z powiązanymi danymi, kontynuowanie</span><span class="sxs-lookup"><span data-stu-id="d6e77-108">Working with Related Data, Continued</span></span>

<span data-ttu-id="d6e77-109">W poprzednim samouczku rozpoczęto korzystanie z kontrolki `EntityDataSource` do pracy z powiązanymi danymi.</span><span class="sxs-lookup"><span data-stu-id="d6e77-109">In the previous tutorial you began to use the `EntityDataSource` control to work with related data.</span></span> <span data-ttu-id="d6e77-110">Wyświetlono wiele poziomów hierarchii i edytowane dane we właściwościach nawigacji.</span><span class="sxs-lookup"><span data-stu-id="d6e77-110">You displayed multiple levels of hierarchy and edited data in navigation properties.</span></span> <span data-ttu-id="d6e77-111">W tym samouczku będziesz nadal korzystać z pokrewnych danych przez dodawanie i usuwanie relacji oraz Dodawanie nowej jednostki, która ma relację z istniejącą jednostką.</span><span class="sxs-lookup"><span data-stu-id="d6e77-111">In this tutorial you'll continue to work with related data by adding and deleting relationships and by adding a new entity that has a relationship to an existing entity.</span></span>

<span data-ttu-id="d6e77-112">Utworzysz stronę, która dodaje kursy, które są przypisane do działów.</span><span class="sxs-lookup"><span data-stu-id="d6e77-112">You'll create a page that adds courses that are assigned to departments.</span></span> <span data-ttu-id="d6e77-113">Działy już istnieją, a podczas tworzenia nowego kursu, w tym samym czasie, należy ustanowić relację między działem IT a istniejącym działem.</span><span class="sxs-lookup"><span data-stu-id="d6e77-113">The departments already exist, and when you create a new course, at the same time you'll establish a relationship between it and an existing department.</span></span>

<span data-ttu-id="d6e77-114">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="d6e77-114">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image1.png)</span></span>

<span data-ttu-id="d6e77-115">Utworzysz również stronę, która współpracuje z relacją wiele-do-wielu przez przypisanie instruktora do kursu (dodanie relacji między dwoma wybranymi jednostkami) lub usunięcie instruktora z kursu (usunięcie relacji między dwiema jednostkami Wybierz pozycję).</span><span class="sxs-lookup"><span data-stu-id="d6e77-115">You'll also create a page that works with a many-to-many relationship by assigning an instructor to a course (adding a relationship between two entities that you select) or removing an instructor from a course (removing a relationship between two entities that you select).</span></span> <span data-ttu-id="d6e77-116">W bazie danych Dodawanie relacji między instruktorem a kursem powoduje dodanie nowego wiersza do tabeli skojarzeń `CourseInstructor`; usunięcie relacji polega na usunięciu wiersza z tabeli skojarzeń `CourseInstructor`.</span><span class="sxs-lookup"><span data-stu-id="d6e77-116">In the database, adding a relationship between an instructor and a course results in a new row being added to the `CourseInstructor` association table; removing a relationship involves deleting a row from the `CourseInstructor` association table.</span></span> <span data-ttu-id="d6e77-117">Należy jednak wykonać tę czynność w Entity Framework przez ustawienie właściwości nawigacji bez jawnego odwoływania się do tabeli `CourseInstructor`.</span><span class="sxs-lookup"><span data-stu-id="d6e77-117">However, you do this in the Entity Framework by setting navigation properties, without referring to the `CourseInstructor` table explicitly.</span></span>

<span data-ttu-id="d6e77-118">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="d6e77-118">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image3.png)</span></span>

## <a name="adding-an-entity-with-a-relationship-to-an-existing-entity"></a><span data-ttu-id="d6e77-119">Dodawanie jednostki z relacją do istniejącej jednostki</span><span class="sxs-lookup"><span data-stu-id="d6e77-119">Adding an Entity with a Relationship to an Existing Entity</span></span>

<span data-ttu-id="d6e77-120">Utwórz nową stronę sieci Web o nazwie *CoursesAdd. aspx* , która korzysta ze strony wzorcowej *site. Master* , i Dodaj następujące znaczniki do formantu `Content` o nazwie `Content2`:</span><span class="sxs-lookup"><span data-stu-id="d6e77-120">Create a new web page named *CoursesAdd.aspx* that uses the *Site.Master* master page, and add the following markup to the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample1.aspx)]

<span data-ttu-id="d6e77-121">Ten znacznik tworzy formant `EntityDataSource`, który wybiera kursy, które umożliwiają wstawianie i określa procedurę obsługi dla zdarzenia `Inserting`.</span><span class="sxs-lookup"><span data-stu-id="d6e77-121">This markup creates an `EntityDataSource` control that selects courses, that enables inserting, and that specifies a handler for the `Inserting` event.</span></span> <span data-ttu-id="d6e77-122">Użyjesz programu obsługi, aby zaktualizować właściwość nawigacji `Department` po utworzeniu nowej jednostki `Course`.</span><span class="sxs-lookup"><span data-stu-id="d6e77-122">You'll use the handler to update the `Department` navigation property when a new `Course` entity is created.</span></span>

<span data-ttu-id="d6e77-123">Znacznik tworzy również formant `DetailsView`, który służy do dodawania nowych jednostek `Course`.</span><span class="sxs-lookup"><span data-stu-id="d6e77-123">The markup also creates a `DetailsView` control to use for adding new `Course` entities.</span></span> <span data-ttu-id="d6e77-124">Znacznik używa pól powiązanych do `Course` właściwości jednostki.</span><span class="sxs-lookup"><span data-stu-id="d6e77-124">The markup uses bound fields for `Course` entity properties.</span></span> <span data-ttu-id="d6e77-125">Musisz wprowadzić wartość `CourseID`, ponieważ nie jest to pole identyfikatora generowane przez system.</span><span class="sxs-lookup"><span data-stu-id="d6e77-125">You have to enter the `CourseID` value because this is not a system-generated ID field.</span></span> <span data-ttu-id="d6e77-126">Zamiast tego jest to numer kursu, który należy określić ręcznie podczas tworzenia kursu.</span><span class="sxs-lookup"><span data-stu-id="d6e77-126">Instead, it's a course number that must be specified manually when the course is created.</span></span>

<span data-ttu-id="d6e77-127">Użyj pola szablon dla właściwości nawigacji `Department`, ponieważ właściwości nawigacji nie mogą być używane z kontrolkami `BoundField`.</span><span class="sxs-lookup"><span data-stu-id="d6e77-127">You use a template field for the `Department` navigation property because navigation properties cannot be used with `BoundField` controls.</span></span> <span data-ttu-id="d6e77-128">Pole szablon zawiera listę rozwijaną, aby wybrać dział.</span><span class="sxs-lookup"><span data-stu-id="d6e77-128">The template field provides a drop-down list to select the department.</span></span> <span data-ttu-id="d6e77-129">Lista rozwijana jest powiązana z jednostką `Departments`ową ustawioną przy użyciu `Eval` zamiast `Bind`, ponieważ nie można bezpośrednio powiązać właściwości nawigacji w celu ich aktualizacji.</span><span class="sxs-lookup"><span data-stu-id="d6e77-129">The drop-down list is bound to the `Departments` entity set by using `Eval` rather than `Bind`, again because you cannot directly bind navigation properties in order to update them.</span></span> <span data-ttu-id="d6e77-130">Należy określić procedurę obsługi dla zdarzenia `Init` formantu `DropDownList`, aby można było przechowywać odwołanie do formantu do użycia przez kod, który aktualizuje `DepartmentID` klucz obcy.</span><span class="sxs-lookup"><span data-stu-id="d6e77-130">You specify a handler for the `DropDownList` control's `Init` event so that you can store a reference to the control for use by the code that updates the `DepartmentID` foreign key.</span></span>

<span data-ttu-id="d6e77-131">W *CoursesAdd.aspx.cs* tuż po deklaracji częściowej klasy Dodaj pole klasy, aby pomieścić odwołanie do kontrolki `DepartmentsDropDownList`:</span><span class="sxs-lookup"><span data-stu-id="d6e77-131">In *CoursesAdd.aspx.cs* just after the partial-class declaration, add a class field to hold a reference to the `DepartmentsDropDownList` control:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample2.cs)]

<span data-ttu-id="d6e77-132">Dodaj procedurę obsługi dla zdarzenia `Init` kontrolki `DepartmentsDropDownList`, aby można było przechowywać odwołanie do kontrolki.</span><span class="sxs-lookup"><span data-stu-id="d6e77-132">Add a handler for the `DepartmentsDropDownList` control's `Init` event so that you can store a reference to the control.</span></span> <span data-ttu-id="d6e77-133">Pozwala to na uzyskanie wartości wprowadzonej przez użytkownika i użycie jej do zaktualizowania wartości `DepartmentID` jednostki `Course`.</span><span class="sxs-lookup"><span data-stu-id="d6e77-133">This lets you get the value the user has entered and use it to update the `DepartmentID` value of the `Course` entity.</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample3.cs)]

<span data-ttu-id="d6e77-134">Dodaj program obsługi dla zdarzenia `Inserting` kontrolki `DetailsView`:</span><span class="sxs-lookup"><span data-stu-id="d6e77-134">Add a handler for the `DetailsView` control's `Inserting` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample4.cs)]

<span data-ttu-id="d6e77-135">Gdy użytkownik kliknie `Insert`, zdarzenie `Inserting` zostanie wywołane przed wstawieniem nowego rekordu.</span><span class="sxs-lookup"><span data-stu-id="d6e77-135">When the user clicks `Insert`, the `Inserting` event is raised before the new record is inserted.</span></span> <span data-ttu-id="d6e77-136">Kod w programie obsługi pobiera `DepartmentID` z kontrolki `DropDownList` i używa jej do ustawiania wartości, która będzie używana dla właściwości `DepartmentID` jednostki `Course`.</span><span class="sxs-lookup"><span data-stu-id="d6e77-136">The code in the handler gets the `DepartmentID` from the `DropDownList` control and uses it to set the value that will be used for the `DepartmentID` property of the `Course` entity.</span></span>

<span data-ttu-id="d6e77-137">Entity Framework zajmie się dodaniem tego kursu do właściwości nawigacji `Courses` skojarzonej jednostki `Department`.</span><span class="sxs-lookup"><span data-stu-id="d6e77-137">The Entity Framework will take care of adding this course to the `Courses` navigation property of the associated `Department` entity.</span></span> <span data-ttu-id="d6e77-138">Dodaje również dział do właściwości nawigacji `Department` jednostki `Course`.</span><span class="sxs-lookup"><span data-stu-id="d6e77-138">It also adds the department to the `Department` navigation property of the `Course` entity.</span></span>

<span data-ttu-id="d6e77-139">Uruchom stronę.</span><span class="sxs-lookup"><span data-stu-id="d6e77-139">Run the page.</span></span>

<span data-ttu-id="d6e77-140">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="d6e77-140">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image5.png)</span></span>

<span data-ttu-id="d6e77-141">Wprowadź identyfikator, tytuł, liczbę kredytów i wybierz dział, a następnie kliknij przycisk **Wstaw**.</span><span class="sxs-lookup"><span data-stu-id="d6e77-141">Enter an ID, a title, a number of credits, and select a department, then click **Insert**.</span></span>

<span data-ttu-id="d6e77-142">Uruchom stronę *kursy. aspx* , a następnie wybierz ten sam dział, aby wyświetlić nowy kurs.</span><span class="sxs-lookup"><span data-stu-id="d6e77-142">Run the *Courses.aspx* page, and select the same department to see the new course.</span></span>

<span data-ttu-id="d6e77-143">[![Image03](the-entity-framework-and-aspnet-getting-started-part-5/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="d6e77-143">[![Image03](the-entity-framework-and-aspnet-getting-started-part-5/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image7.png)</span></span>

## <a name="working-with-many-to-many-relationships"></a><span data-ttu-id="d6e77-144">Praca z relacjami wiele-do-wielu</span><span class="sxs-lookup"><span data-stu-id="d6e77-144">Working with Many-to-Many Relationships</span></span>

<span data-ttu-id="d6e77-145">Relacja między zestawem jednostek `Courses` i zestawem jednostek `People` jest relacją "wiele do wielu".</span><span class="sxs-lookup"><span data-stu-id="d6e77-145">The relationship between the `Courses` entity set and the `People` entity set is a many-to-many relationship.</span></span> <span data-ttu-id="d6e77-146">Jednostka `Course` ma właściwość nawigacji o nazwie `People`, która może zawierać zero, jedną lub więcej powiązanych jednostek `Person` (reprezentujących instruktorów przypisanych do uczenia tego kursu).</span><span class="sxs-lookup"><span data-stu-id="d6e77-146">A `Course` entity has a navigation property named `People` that can contain zero, one, or more related `Person` entities (representing instructors assigned to teach that course).</span></span> <span data-ttu-id="d6e77-147">A jednostka `Person` ma właściwość nawigacji o nazwie `Courses`, która może zawierać zero, jedną lub więcej powiązanych jednostek `Course` (reprezentującą kursy, do których jest przypisany instruktor).</span><span class="sxs-lookup"><span data-stu-id="d6e77-147">And a `Person` entity has a navigation property named `Courses` that can contain zero, one, or more related `Course` entities (representing courses that instructor is assigned to teach).</span></span> <span data-ttu-id="d6e77-148">Jeden instruktor może uczyć się wielu kursów, a jeden kurs może być nauczany przez wielu instruktorów.</span><span class="sxs-lookup"><span data-stu-id="d6e77-148">One instructor might teach multiple courses, and one course might be taught by multiple instructors.</span></span> <span data-ttu-id="d6e77-149">W tej części przewodnika dodasz i usuniesz relacje między `Person` i `Course` jednostek przez zaktualizowanie właściwości nawigacji powiązanych jednostek.</span><span class="sxs-lookup"><span data-stu-id="d6e77-149">In this section of the walkthrough, you'll add and remove relationships between `Person` and `Course` entities by updating the navigation properties of the related entities.</span></span>

<span data-ttu-id="d6e77-150">Utwórz nową stronę sieci Web o nazwie *InstructorsCourses. aspx* , która korzysta ze strony wzorcowej *site. Master* , i Dodaj następujące znaczniki do formantu `Content` o nazwie `Content2`:</span><span class="sxs-lookup"><span data-stu-id="d6e77-150">Create a new web page named *InstructorsCourses.aspx* that uses the *Site.Master* master page, and add the following markup to the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample5.aspx)]

<span data-ttu-id="d6e77-151">Ten znacznik tworzy formant `EntityDataSource`, który pobiera nazwę i `PersonID` jednostek `Person` dla instruktorów.</span><span class="sxs-lookup"><span data-stu-id="d6e77-151">This markup creates an `EntityDataSource` control that retrieves the name and `PersonID` of `Person` entities for instructors.</span></span> <span data-ttu-id="d6e77-152">Formant `DropDrownList` jest powiązany z kontrolką `EntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="d6e77-152">A `DropDrownList` control is bound to the `EntityDataSource` control.</span></span> <span data-ttu-id="d6e77-153">Formant `DropDownList` określa procedurę obsługi dla zdarzenia `DataBound`.</span><span class="sxs-lookup"><span data-stu-id="d6e77-153">The `DropDownList` control specifies a handler for the `DataBound` event.</span></span> <span data-ttu-id="d6e77-154">Ta procedura obsługi służy do powiązania dwóch list rozwijanych, które wyświetlają kursy.</span><span class="sxs-lookup"><span data-stu-id="d6e77-154">You'll use this handler to databind the two drop-down lists that display courses.</span></span>

<span data-ttu-id="d6e77-155">Znacznik tworzy również następujące grupy kontrolek, które służą do przypisywania kursu do wybranego instruktora:</span><span class="sxs-lookup"><span data-stu-id="d6e77-155">The markup also creates the following group of controls to use for assigning a course to the selected instructor:</span></span>

- <span data-ttu-id="d6e77-156">Kontrolka `DropDownList` do wybierania kursu do przypisania.</span><span class="sxs-lookup"><span data-stu-id="d6e77-156">A `DropDownList` control for selecting a course to assign.</span></span> <span data-ttu-id="d6e77-157">Ten formant zostanie wypełniony kursami, które nie są obecnie przypisane do wybranego instruktora.</span><span class="sxs-lookup"><span data-stu-id="d6e77-157">This control will be populated with courses that are currently not assigned to the selected instructor.</span></span>
- <span data-ttu-id="d6e77-158">Formant `Button`, aby zainicjować przypisanie.</span><span class="sxs-lookup"><span data-stu-id="d6e77-158">A `Button` control to initiate the assignment.</span></span>
- <span data-ttu-id="d6e77-159">Formant `Label`, aby wyświetlić komunikat o błędzie, jeśli przypisanie nie powiedzie się.</span><span class="sxs-lookup"><span data-stu-id="d6e77-159">A `Label` control to display an error message if the assignment fails.</span></span>

<span data-ttu-id="d6e77-160">Na koniec znacznik tworzy również grupę formantów do użycia w celu usunięcia kursu z wybranego instruktora.</span><span class="sxs-lookup"><span data-stu-id="d6e77-160">Finally, the markup also creates a group of controls to use for removing a course from the selected instructor.</span></span>

<span data-ttu-id="d6e77-161">W *InstructorsCourses.aspx.cs*Dodaj instrukcję using:</span><span class="sxs-lookup"><span data-stu-id="d6e77-161">In *InstructorsCourses.aspx.cs*, add a using statement:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample6.cs)]

<span data-ttu-id="d6e77-162">Dodaj metodę zapełniania dwóch list rozwijanych, które wyświetlają kursy:</span><span class="sxs-lookup"><span data-stu-id="d6e77-162">Add a method for populating the two drop-down lists that display courses:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample7.cs)]

<span data-ttu-id="d6e77-163">Ten kod pobiera wszystkie kursy z zestawu jednostek `Courses` i pobiera kursy z właściwości nawigacji `Courses` jednostki `Person` dla wybranego instruktora.</span><span class="sxs-lookup"><span data-stu-id="d6e77-163">This code gets all courses from the `Courses` entity set and gets the courses from the `Courses` navigation property of the `Person` entity for the selected instructor.</span></span> <span data-ttu-id="d6e77-164">Następnie decyduje o tym, które kursy są przypisane do tego instruktora i odpowiednio wypełnia listę rozwijaną.</span><span class="sxs-lookup"><span data-stu-id="d6e77-164">It then determines which courses are assigned to that instructor and populates the drop-down lists accordingly.</span></span>

<span data-ttu-id="d6e77-165">Dodaj program obsługi dla zdarzenia `Click` `Assign` przycisku:</span><span class="sxs-lookup"><span data-stu-id="d6e77-165">Add a handler for the `Assign` button's `Click` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample8.cs)]

<span data-ttu-id="d6e77-166">Ten kod pobiera jednostkę `Person` dla wybranego instruktora, pobiera jednostkę `Course` dla wybranego kursu i dodaje wybrany kurs do właściwości nawigacji `Courses` jednostki `Person` instruktora.</span><span class="sxs-lookup"><span data-stu-id="d6e77-166">This code gets the `Person` entity for the selected instructor, gets the `Course` entity for the selected course, and adds the selected course to the `Courses` navigation property of the instructor's `Person` entity.</span></span> <span data-ttu-id="d6e77-167">Następnie zapisuje zmiany w bazie danych i ponownie wypełnia listy rozwijane, dzięki czemu wyniki mogą być widoczne natychmiast.</span><span class="sxs-lookup"><span data-stu-id="d6e77-167">It then saves the changes to the database and repopulates the drop-down lists so the results can be seen immediately.</span></span>

<span data-ttu-id="d6e77-168">Dodaj program obsługi dla zdarzenia `Click` `Remove` przycisku:</span><span class="sxs-lookup"><span data-stu-id="d6e77-168">Add a handler for the `Remove` button's `Click` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample9.cs)]

<span data-ttu-id="d6e77-169">Ten kod pobiera jednostkę `Person` dla wybranego instruktora, pobiera jednostkę `Course` dla wybranego kursu i usuwa wybrany kurs z `Courses` właściwości nawigacji jednostki `Person`.</span><span class="sxs-lookup"><span data-stu-id="d6e77-169">This code gets the `Person` entity for the selected instructor, gets the `Course` entity for the selected course, and removes the selected course from the `Person` entity's `Courses` navigation property.</span></span> <span data-ttu-id="d6e77-170">Następnie zapisuje zmiany w bazie danych i ponownie wypełnia listy rozwijane, dzięki czemu wyniki mogą być widoczne natychmiast.</span><span class="sxs-lookup"><span data-stu-id="d6e77-170">It then saves the changes to the database and repopulates the drop-down lists so the results can be seen immediately.</span></span>

<span data-ttu-id="d6e77-171">Dodaj kod do metody `Page_Load`, która sprawdza, czy komunikaty o błędach nie są widoczne, gdy nie ma błędów do raportowania i Dodaj programy obsługi dla zdarzeń `DataBound` i `SelectedIndexChanged` na liście rozwijanej instruktorzy w celu wypełnienia list rozwijanych kursy:</span><span class="sxs-lookup"><span data-stu-id="d6e77-171">Add code to the `Page_Load` method that makes sure the error messages are not visible when there's no error to report, and add handlers for the `DataBound` and `SelectedIndexChanged` events of the instructors drop-down list to populate the courses drop-down lists:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample10.cs)]

<span data-ttu-id="d6e77-172">Uruchom stronę.</span><span class="sxs-lookup"><span data-stu-id="d6e77-172">Run the page.</span></span>

<span data-ttu-id="d6e77-173">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="d6e77-173">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image9.png)</span></span>

<span data-ttu-id="d6e77-174">Wybierz instruktora.</span><span class="sxs-lookup"><span data-stu-id="d6e77-174">Select an instructor.</span></span> <span data-ttu-id="d6e77-175">Lista rozwijana <strong>Przypisz kurs</strong> zawiera kursy, których instruktor nie uczy się, a lista rozwijana <strong>Usuń kurs</strong> zawiera kursy, do których ten instruktor jest już przypisany.</span><span class="sxs-lookup"><span data-stu-id="d6e77-175">The <strong>Assign a Course</strong> drop-down list displays the courses that the instructor doesn't teach, and the <strong>Remove a Course</strong> drop-down list displays the courses that the instructor is already assigned to.</span></span> <span data-ttu-id="d6e77-176">W sekcji <strong>przypisywanie kursu</strong> Wybierz kurs, a następnie kliknij przycisk <strong>Przypisz</strong>.</span><span class="sxs-lookup"><span data-stu-id="d6e77-176">In the <strong>Assign a Course</strong> section, select a course and then click <strong>Assign</strong>.</span></span> <span data-ttu-id="d6e77-177">Kurs zostanie przeniesiony na listę rozwijaną <strong>Usuń kurs</strong> .</span><span class="sxs-lookup"><span data-stu-id="d6e77-177">The course moves to the <strong>Remove a Course</strong> drop-down list.</span></span> <span data-ttu-id="d6e77-178">Wybierz kurs w sekcji <strong>usuwanie kursu</strong> i kliknij przycisk <strong>Usuń</strong><em>.</em></span><span class="sxs-lookup"><span data-stu-id="d6e77-178">Select a course in the <strong>Remove a Course</strong> section and click <strong>Remove</strong><em>.</em></span></span> <span data-ttu-id="d6e77-179">Kurs zostanie przeniesiony na listę rozwijaną <strong>Przypisz kurs</strong> .</span><span class="sxs-lookup"><span data-stu-id="d6e77-179">The course moves to the <strong>Assign a Course</strong> drop-down list.</span></span>

<span data-ttu-id="d6e77-180">Zaobserwowano już kilka sposobów pracy z powiązanymi danymi.</span><span class="sxs-lookup"><span data-stu-id="d6e77-180">You have now seen some more ways to work with related data.</span></span> <span data-ttu-id="d6e77-181">W poniższym samouczku dowiesz się, jak używać dziedziczenia w modelu danych, aby zwiększyć łatwość utrzymania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d6e77-181">In the following tutorial, you'll learn how to use inheritance in the data model to improve the maintainability of your application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="d6e77-182">[Poprzednie](the-entity-framework-and-aspnet-getting-started-part-4.md)
> [dalej](the-entity-framework-and-aspnet-getting-started-part-6.md)</span><span class="sxs-lookup"><span data-stu-id="d6e77-182">[Previous](the-entity-framework-and-aspnet-getting-started-part-4.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-6.md)</span></span>

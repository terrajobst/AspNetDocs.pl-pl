---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
title: Wprowadzenie do bazy danych programu Entity Framework 4.0 First i platformy ASP.NET 4 sieci Web Forms — część 2 | Dokumentacja firmy Microsoft
author: tdykstra
description: Przykładową aplikację sieci web firmy Contoso University przedstawia sposób tworzenia aplikacji formularzy sieci Web ASP.NET przy użyciu platformy Entity Framework. Przykładowa aplikacja jest...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: fb63a326-a4ae-4b0c-a4f5-412327197216
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
msc.type: authoredcontent
ms.openlocfilehash: f436044b0887d6b092ab18a6128019aa87747566
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/17/2019
ms.locfileid: "59422307"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-2"></a><span data-ttu-id="c6616-104">Wprowadzenie do bazy danych programu Entity Framework 4.0 First i platformy ASP.NET 4 Web Forms — część 2</span><span class="sxs-lookup"><span data-stu-id="c6616-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 2</span></span>

<span data-ttu-id="c6616-105">przez [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="c6616-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="c6616-106">Przykładową aplikację sieci web firmy Contoso University przedstawia sposób tworzenia aplikacji formularzy sieci Web ASP.NET za pomocą programu Entity Framework 4.0 i Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="c6616-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="c6616-107">Aby uzyskać informacji na temat tej serii samouczka, zobacz [pierwszym samouczku tej serii](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="c6616-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="the-entitydatasource-control"></a><span data-ttu-id="c6616-108">Kontrolka EntityDataSource</span><span class="sxs-lookup"><span data-stu-id="c6616-108">The EntityDataSource Control</span></span>

<span data-ttu-id="c6616-109">W poprzednim samouczku utworzono witrynę sieci web, bazy danych i modelu danych.</span><span class="sxs-lookup"><span data-stu-id="c6616-109">In the previous tutorial you created a web site, a database, and a data model.</span></span> <span data-ttu-id="c6616-110">W tym samouczku możesz pracować `EntityDataSource` kontrolkę udostępniającą platformy ASP.NET w celu ułatwienia pracy z modelem danych platformy Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="c6616-110">In this tutorial you work with the `EntityDataSource` control that ASP.NET provides in order to make it easy to work with an Entity Framework data model.</span></span> <span data-ttu-id="c6616-111">Utworzysz `GridView` sterowania do wyświetlania i edytowania danych student `DetailsView` formantu do dodawania nowych studentów i `DropDownList` kontrolka służąca do wybierania działu, (który zostanie użyty później do wyświetlania kursy skojarzone).</span><span class="sxs-lookup"><span data-stu-id="c6616-111">You'll create a `GridView` control for displaying and editing student data, a `DetailsView` control for adding new students, and a `DropDownList` control for selecting a department (which you'll use later for displaying associated courses).</span></span>

<span data-ttu-id="c6616-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span></span>

<span data-ttu-id="c6616-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span></span>

<span data-ttu-id="c6616-114">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-114">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span></span>

<span data-ttu-id="c6616-115">Należy pamiętać, że ta aplikacja nie będzie można Dodawanie sprawdzania poprawności danych wejściowych do stron, które aktualizują bazę danych, a niektóre z obsługą błędów nie będzie równie niezawodny, może być wymagane w aplikacji produkcyjnej.</span><span class="sxs-lookup"><span data-stu-id="c6616-115">Note that in this application you won't be adding input validation to pages that update the database, and some of the error handling will not be as robust as would be required in a production application.</span></span> <span data-ttu-id="c6616-116">Który utrzymuje samouczek koncentruje się na platformie Entity Framework i utrzymuje je przed pobraniem zbyt długa.</span><span class="sxs-lookup"><span data-stu-id="c6616-116">That keeps the tutorial focused on the Entity Framework and keeps it from getting too long.</span></span> <span data-ttu-id="c6616-117">Aby uzyskać szczegółowe informacje dotyczące sposobu dodawania tych funkcji do aplikacji, zobacz [sprawdzanie poprawności danych wejściowych użytkownika w produkcie ASP.NET Web Pages](https://msdn.microsoft.com/library/7kh55542.aspx) i [obsługę błędów w aplikacjach i stron ASP.NET](https://msdn.microsoft.com/library/w16865z6.aspx).</span><span class="sxs-lookup"><span data-stu-id="c6616-117">For details about how to add these features to your application, see [Validating User Input in ASP.NET Web Pages](https://msdn.microsoft.com/library/7kh55542.aspx) and [Error Handling in ASP.NET Pages and Applications](https://msdn.microsoft.com/library/w16865z6.aspx).</span></span>

## <a name="adding-and-configuring-the-entitydatasource-control"></a><span data-ttu-id="c6616-118">Dodawanie i konfigurowanie kontrolki EntityDataSource</span><span class="sxs-lookup"><span data-stu-id="c6616-118">Adding and Configuring the EntityDataSource Control</span></span>

<span data-ttu-id="c6616-119">Rozpocznie się, konfigurując `EntityDataSource` kontroli można odczytać `Person` jednostek z `People` zestawu jednostek.</span><span class="sxs-lookup"><span data-stu-id="c6616-119">You'll begin by configuring an `EntityDataSource` control to read `Person` entities from the `People` entity set.</span></span>

<span data-ttu-id="c6616-120">Upewnij się, że masz program Visual Studio, Otwórz i że pracujesz z projektem utworzony w części 1.</span><span class="sxs-lookup"><span data-stu-id="c6616-120">Make sure you have Visual Studio open and that you're working with the project you created in part 1.</span></span> <span data-ttu-id="c6616-121">Jeśli nie został utworzony projekt, ponieważ został utworzony w modelu danych lub od momentu ostatniej zmiany wprowadzone do niego, skompiluj teraz projekt.</span><span class="sxs-lookup"><span data-stu-id="c6616-121">If you haven't built the project since you created the data model or since the last change you made to it, build the project now.</span></span> <span data-ttu-id="c6616-122">Zmiany w modelu danych nie są udostępniane do projektanta do momentu projekt jest kompilowany.</span><span class="sxs-lookup"><span data-stu-id="c6616-122">Changes to the data model are not made available to the designer until the project is built.</span></span>

<span data-ttu-id="c6616-123">Utwórz nową stronę sieci web, używając **formularz sieci Web używający strony wzorcowej** szablonu i nadaj mu nazwę *Students.aspx*.</span><span class="sxs-lookup"><span data-stu-id="c6616-123">Create a new web page using the **Web Form using Master Page** template, and name it *Students.aspx*.</span></span>

<span data-ttu-id="c6616-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span></span>

<span data-ttu-id="c6616-125">Określ *Site.Master* jako strony wzorcowej.</span><span class="sxs-lookup"><span data-stu-id="c6616-125">Specify *Site.Master* as the master page.</span></span> <span data-ttu-id="c6616-126">Wszystkie strony, tworzone na potrzeby tych samouczków użyje tej strony wzorcowej.</span><span class="sxs-lookup"><span data-stu-id="c6616-126">All of the pages you create for these tutorials will use this master page.</span></span>

<span data-ttu-id="c6616-127">[![Image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-127">[![Image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span></span>

<span data-ttu-id="c6616-128">W **źródła** wyświetlać, dodawać `h2` nagłówek do `Content` formantu o nazwie `Content2`, jak pokazano w poniższym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="c6616-128">In **Source** view, add an `h2` heading to the `Content` control named `Content2`, as shown in the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample1.aspx)]

<span data-ttu-id="c6616-129">Z **danych** karcie **przybornika**, przeciągnij `EntityDataSource` do strony, upuść go pod nagłówkiem i zmień identyfikator, który ma `StudentsEntityDataSource`:</span><span class="sxs-lookup"><span data-stu-id="c6616-129">From the **Data** tab of the **Toolbox**, drag an `EntityDataSource` control to the page, drop it below the heading, and change the ID to `StudentsEntityDataSource`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample2.aspx)]

<span data-ttu-id="c6616-130">Przełącz się do **projektowania** wyświetlić, kliknij tag inteligentny formant źródła danych, a następnie kliknij przycisk **skonfigurować źródło danych** można uruchomić **skonfigurować źródło danych** kreatora.</span><span class="sxs-lookup"><span data-stu-id="c6616-130">Switch to **Design** view, click the data source control's smart tag, and then click **Configure Data Source** to launch the **Configure Data Source** wizard.</span></span>

<span data-ttu-id="c6616-131">[![Image01](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-131">[![Image01](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span></span>

<span data-ttu-id="c6616-132">W **konfigurowania obiektu ObjectContext** kroku kreatora, wybierz pozycję **SchoolEntities** jako wartość pozycji **połączenia o nazwie**i wybierz **SchoolEntities**jako **DefaultContainerName** wartości.</span><span class="sxs-lookup"><span data-stu-id="c6616-132">In the **Configure ObjectContext** wizard step, select **SchoolEntities** as the value for **Named Connection**, and select **SchoolEntities** as the **DefaultContainerName** value.</span></span> <span data-ttu-id="c6616-133">Następnie kliknij przycisk **Dalej**.</span><span class="sxs-lookup"><span data-stu-id="c6616-133">Then click **Next**.</span></span>

<span data-ttu-id="c6616-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span></span>

<span data-ttu-id="c6616-135">Uwaga: W tym momencie pojawi się następujące okno dialogowe, należy skompilować projekt przed kontynuowaniem.</span><span class="sxs-lookup"><span data-stu-id="c6616-135">Note: If you get the following dialog box at this point, you have to build the project before proceeding.</span></span>

<span data-ttu-id="c6616-136">[![Image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-136">[![Image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span></span>

<span data-ttu-id="c6616-137">W **Konfigurowanie wyboru danych** kroku, wybierz pozycję **osób** jako wartość pozycji **Nazwa zestawu jednostek**.</span><span class="sxs-lookup"><span data-stu-id="c6616-137">In the **Configure Data Selection** step, select **People** as the value for **EntitySetName**.</span></span> <span data-ttu-id="c6616-138">W obszarze **wybierz**, upewnij się, że **wybierz A** ll pole wyboru jest zaznaczone.</span><span class="sxs-lookup"><span data-stu-id="c6616-138">Under **Select**, make sure the **Select A** ll check box is selected.</span></span> <span data-ttu-id="c6616-139">Następnie wybierz opcje, aby włączyć aktualizację i usuwanie.</span><span class="sxs-lookup"><span data-stu-id="c6616-139">Then select the options to enable update and delete.</span></span> <span data-ttu-id="c6616-140">Gdy wszystko będzie gotowe, kliknij przycisk **Zakończ**.</span><span class="sxs-lookup"><span data-stu-id="c6616-140">When you're done, click **Finish**.</span></span>

<span data-ttu-id="c6616-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span></span>

## <a name="configuring-database-rules-to-allow-deletion"></a><span data-ttu-id="c6616-142">Konfigurowanie reguł bazy danych, aby zezwolić na usunięcie</span><span class="sxs-lookup"><span data-stu-id="c6616-142">Configuring Database Rules to Allow Deletion</span></span>

<span data-ttu-id="c6616-143">Zostanie utworzona strona, która pozwala użytkownikom na usuwanie uczniów z `Person` tabeli, która ma trzy relacje z innymi tabelami (`Course`, `StudentGrade`, i `OfficeAssignment`).</span><span class="sxs-lookup"><span data-stu-id="c6616-143">You'll be creating a page that lets users delete students from the `Person` table, which has three relationships with other tables (`Course`, `StudentGrade`, and `OfficeAssignment`).</span></span> <span data-ttu-id="c6616-144">Domyślnie baza danych uniemożliwi usuwanie wierszy w `Person` Jeśli istnieją powiązane wiersze w jednej z innych tabel.</span><span class="sxs-lookup"><span data-stu-id="c6616-144">By default, the database will prevent you from deleting a row in `Person` if there are related rows in one of the other tables.</span></span> <span data-ttu-id="c6616-145">Można ręcznie usunąć powiązane wiersze najpierw lub można skonfigurować bazy danych, aby usunąć je automatycznie, gdy usuniesz `Person` wiersza.</span><span class="sxs-lookup"><span data-stu-id="c6616-145">You can manually delete the related rows first, or you can configure the database to delete them automatically when you delete a `Person` row.</span></span> <span data-ttu-id="c6616-146">Dla rekordów dla uczniów w ramach tego samouczka należy skonfigurować bazy danych, aby automatycznie usuwać powiązanych danych.</span><span class="sxs-lookup"><span data-stu-id="c6616-146">For student records in this tutorial, you'll configure the database to delete the related data automatically.</span></span> <span data-ttu-id="c6616-147">Ponieważ uczniowie mogą powiązanych wierszy tylko w `StudentGrade` tabeli, należy skonfigurować tylko jeden z trzech relacji.</span><span class="sxs-lookup"><span data-stu-id="c6616-147">Because students can have related rows only in the `StudentGrade` table, you need to configure only one of the three relationships.</span></span>

<span data-ttu-id="c6616-148">Jeśli używasz *School.mdf* plik został pobrany z projektu, który łączy się z tego samouczka, możesz pominąć tę sekcję, ponieważ te zmiany konfiguracji zostały już wykonane.</span><span class="sxs-lookup"><span data-stu-id="c6616-148">If you're using the *School.mdf* file that you downloaded from the project that goes with this tutorial, you can skip this section because these configuration changes have already been done.</span></span> <span data-ttu-id="c6616-149">Jeśli utworzono bazę danych przez uruchomienie skryptu Skonfiguruj bazę danych przy użyciu poniższej procedury.</span><span class="sxs-lookup"><span data-stu-id="c6616-149">If you created the database by running a script, configure the database by performing the following procedures.</span></span>

<span data-ttu-id="c6616-150">W **Eksploratora serwera**, Otwórz diagram bazy danych, który został utworzony w części 1.</span><span class="sxs-lookup"><span data-stu-id="c6616-150">In **Server Explorer**, open the database diagram that you created in part 1.</span></span> <span data-ttu-id="c6616-151">Kliknij prawym przyciskiem myszy relację między `Person` i `StudentGrade` (linię między tabelami), a następnie wybierz pozycję **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="c6616-151">Right-click the relationship between `Person` and `StudentGrade` (the line between tables), and then select **Properties**.</span></span>

<span data-ttu-id="c6616-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span></span>

<span data-ttu-id="c6616-153">W **właściwości** okna, rozwiń węzeł **INSERT i UPDATE specyfikacji** i ustaw **DeleteRule** właściwości **Cascade**.</span><span class="sxs-lookup"><span data-stu-id="c6616-153">In the **Properties** window, expand **INSERT and UPDATE Specification** and set the **DeleteRule** property to **Cascade**.</span></span>

<span data-ttu-id="c6616-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span></span>

<span data-ttu-id="c6616-155">Zapisz i zamknij diagram.</span><span class="sxs-lookup"><span data-stu-id="c6616-155">Save and close the diagram.</span></span> <span data-ttu-id="c6616-156">Jeśli zostanie wyświetlony monit, czy chcesz zaktualizować bazę danych, kliknij przycisk **tak**.</span><span class="sxs-lookup"><span data-stu-id="c6616-156">If you're asked whether you want to update the database, click **Yes**.</span></span>

<span data-ttu-id="c6616-157">Aby upewnić się, że model utrzymuje jednostek, które znajdują się w pamięci jest zsynchronizowany z działania bazy danych, należy ustawić odpowiednie zasady w modelu danych.</span><span class="sxs-lookup"><span data-stu-id="c6616-157">To make sure that the model keeps entities that are in memory in sync with what the database is doing, you must set corresponding rules in the data model.</span></span> <span data-ttu-id="c6616-158">Otwórz *SchoolModel.edmx*, kliknij prawym przyciskiem myszy linię skojarzenia między `Person` i `StudentGrade`, a następnie wybierz pozycję **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="c6616-158">Open *SchoolModel.edmx*, right-click the association line between `Person` and `StudentGrade`, and then select **Properties**.</span></span>

<span data-ttu-id="c6616-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span></span>

<span data-ttu-id="c6616-160">W **właściwości** oknie **End1 OnDelete** do **Cascade**.</span><span class="sxs-lookup"><span data-stu-id="c6616-160">In the **Properties** window, set **End1 OnDelete** to **Cascade**.</span></span>

<span data-ttu-id="c6616-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span></span>

<span data-ttu-id="c6616-162">Zapisz i Zamknij *SchoolModel.edmx* pliku, a następnie ponownie skompilować projekt.</span><span class="sxs-lookup"><span data-stu-id="c6616-162">Save and close the *SchoolModel.edmx* file, and then rebuild the project.</span></span>

<span data-ttu-id="c6616-163">Ogólnie rzecz biorąc po zmianie bazy danych, masz kilka opcji sposobu zsynchronizować modelu:</span><span class="sxs-lookup"><span data-stu-id="c6616-163">In general, when the database changes, you have several choices for how to sync up the model:</span></span>

- <span data-ttu-id="c6616-164">Dla niektórych rodzajów zmian (np. dodanie lub odświeżenie tabel, widoków i procedur składowanych), kliknij prawym przyciskiem myszy projektanta i wybierz pozycję **Model aktualizacji z bazy danych** scalać zmian projektanta wykonującego automatycznie.</span><span class="sxs-lookup"><span data-stu-id="c6616-164">For certain kinds of changes (such as adding or refreshing tables, views, or stored procedures), right-click in the designer and select **Update Model from Database** to have the designer make the changes automatically.</span></span>
- <span data-ttu-id="c6616-165">Ponowne generowanie modelu danych.</span><span class="sxs-lookup"><span data-stu-id="c6616-165">Regenerate the data model.</span></span>
- <span data-ttu-id="c6616-166">Dokonanie ręcznych aktualizacji podobny do poniższego.</span><span class="sxs-lookup"><span data-stu-id="c6616-166">Make manual updates like this one.</span></span>

<span data-ttu-id="c6616-167">W takim przypadku może zostać wygenerowane ponownie modelu lub odświeżenia tabel dotyczy zmiana relacji, ale następnie trzeba ponownie wprowadzić zmianę nazwy pola (z `FirstName` do `FirstMidName`).</span><span class="sxs-lookup"><span data-stu-id="c6616-167">In this case, you could have regenerated the model or refreshed the tables affected by the relationship change, but then you'd have to make the field-name change again (from `FirstName` to `FirstMidName`).</span></span>

## <a name="using-a-gridview-control-to-read-and-update-entities"></a><span data-ttu-id="c6616-168">Używanie kontrolki GridView na odczytywanie i aktualizowanie jednostek</span><span class="sxs-lookup"><span data-stu-id="c6616-168">Using a GridView Control to Read and Update Entities</span></span>

<span data-ttu-id="c6616-169">W tej sekcji użyjesz `GridView` kontrolki na wyświetlanie, aktualizowanie lub usuwanie studentów.</span><span class="sxs-lookup"><span data-stu-id="c6616-169">In this section you'll use a `GridView` control to display, update, or delete students.</span></span>

<span data-ttu-id="c6616-170">Otwieranie programu lub przełączanie na *Students.aspx* i przełącz się do **projektowania** widoku.</span><span class="sxs-lookup"><span data-stu-id="c6616-170">Open or switch to *Students.aspx* and switch to **Design** view.</span></span> <span data-ttu-id="c6616-171">Z **danych** karcie **przybornika**, przeciągnij `GridView` kontroli po prawej stronie `EntityDataSource` , nazwij ją `StudentsGridView`, kliknij tag inteligentny, a następnie wybierz  **StudentsEntityDataSource** jako źródło danych.</span><span class="sxs-lookup"><span data-stu-id="c6616-171">From the **Data** tab of the **Toolbox**, drag a `GridView` control to the right of the `EntityDataSource` control, name it `StudentsGridView`, click the smart tag, and then select **StudentsEntityDataSource** as the data source.</span></span>

<span data-ttu-id="c6616-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span></span>

<span data-ttu-id="c6616-173">Kliknij przycisk **odświeżania schematu** (kliknij **tak** po wyświetleniu monitu o potwierdzenie), następnie kliknij przycisk **Włączanie stronicowania**, **włączyć sortowanie**, **Włącz edytowanie**, i **Włącz usuwanie**.</span><span class="sxs-lookup"><span data-stu-id="c6616-173">Click **Refresh Schema** (click **Yes** if you're prompted to confirm), then click **Enable Paging**, **Enable Sorting**, **Enable Editing**, and **Enable Deleting**.</span></span>

<span data-ttu-id="c6616-174">Kliknij przycisk **Upravit Sloupce**.</span><span class="sxs-lookup"><span data-stu-id="c6616-174">Click **Edit Columns**.</span></span>

<span data-ttu-id="c6616-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span></span>

<span data-ttu-id="c6616-176">W **wybrane pola** polu, Usuń **PersonID**, **LastName**, i **DataZatrudnienia**.</span><span class="sxs-lookup"><span data-stu-id="c6616-176">In the **Selected fields** box, delete **PersonID**, **LastName**, and **HireDate**.</span></span> <span data-ttu-id="c6616-177">Użytkownik zwykle nie są wyświetlane klucz rekordu dla użytkowników, data zatrudnienia nie jest ważna dla uczniów i studentów i obie części nazwy zostanie umieszczony w jednym polu, wystarczy tylko jedno z pól nazwy.)</span><span class="sxs-lookup"><span data-stu-id="c6616-177">You typically don't display a record key to users, hire date is not relevant to students, and you'll put both parts of the name in one field, so you only need one of the name fields.)</span></span>

<span data-ttu-id="c6616-178">[![Image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-178">[![Image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span></span>

<span data-ttu-id="c6616-179">Wybierz **FirstMidName** pola, a następnie kliknij przycisk **Konwertuj to pole na TemplateField**.</span><span class="sxs-lookup"><span data-stu-id="c6616-179">Select the **FirstMidName** field and then click **Convert this field into a TemplateField**.</span></span>

<span data-ttu-id="c6616-180">Tym samym **EnrollmentDate**.</span><span class="sxs-lookup"><span data-stu-id="c6616-180">Do the same for **EnrollmentDate**.</span></span>

<span data-ttu-id="c6616-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span></span>

<span data-ttu-id="c6616-182">Kliknij przycisk **OK** a następnie przejdź na **źródła** widoku.</span><span class="sxs-lookup"><span data-stu-id="c6616-182">Click **OK** and then switch to **Source** view.</span></span> <span data-ttu-id="c6616-183">Pozostałe zmiany będzie można łatwiej wykonać bezpośrednio w znacznikach.</span><span class="sxs-lookup"><span data-stu-id="c6616-183">The remaining changes will be easier to do directly in markup.</span></span> <span data-ttu-id="c6616-184">`GridView` Kontrolować znaczników teraz wygląda następująco.</span><span class="sxs-lookup"><span data-stu-id="c6616-184">The `GridView` control markup now looks like the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample3.aspx)]

<span data-ttu-id="c6616-185">Pierwsza kolumna po pole polecenia jest polem szablon, który aktualnie Wyświetla imię.</span><span class="sxs-lookup"><span data-stu-id="c6616-185">The first column after the command field is a template field that currently displays the first name.</span></span> <span data-ttu-id="c6616-186">Zmień adiustację tak, dla tego pola szablonu wyglądał jak na poniższym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="c6616-186">Change the markup for this template field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample4.aspx)]

<span data-ttu-id="c6616-187">W trybie wyświetlania dwóch `Label` formanty wyświetlania imię i nazwisko.</span><span class="sxs-lookup"><span data-stu-id="c6616-187">In display mode, two `Label` controls display the first and last name.</span></span> <span data-ttu-id="c6616-188">W trybie edycji dwóch pól tekstowych są udostępniane, dzięki czemu można zmienić imię i nazwisko.</span><span class="sxs-lookup"><span data-stu-id="c6616-188">In edit mode, two text boxes are provided so you can change the first and last name.</span></span> <span data-ttu-id="c6616-189">Podobnie jak w przypadku `Label` kontrolek w tryb wyświetlania, należy użyć `Bind` i `Eval` wyrażeń dokładnie w przypadku usługi ASP.NET kontrolki źródła danych, które łączą się bezpośrednio do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="c6616-189">As with the `Label` controls in display mode, you use `Bind` and `Eval` expressions exactly as you would with ASP.NET data source controls that connect directly to databases.</span></span> <span data-ttu-id="c6616-190">Jedyna różnica polega na określać właściwości jednostki zamiast kolumny bazy danych.</span><span class="sxs-lookup"><span data-stu-id="c6616-190">The only difference is that you're specifying entity properties instead of database columns.</span></span>

<span data-ttu-id="c6616-191">Ostatnia kolumna jest pole szablonu, który wyświetla datę rejestracji.</span><span class="sxs-lookup"><span data-stu-id="c6616-191">The last column is a template field that displays the enrollment date.</span></span> <span data-ttu-id="c6616-192">Zmień adiustację tak, dla tego pola wyglądał jak na poniższym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="c6616-192">Change the markup for this field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample5.aspx)]

<span data-ttu-id="c6616-193">W obu należy wyświetlić i edytować tryb, w formacie ciągu "{0, d}" powoduje, że data jest wyświetlana w formacie "Data krótka".</span><span class="sxs-lookup"><span data-stu-id="c6616-193">In both display and edit mode, the format string "{0,d}" causes the date to be displayed in the "short date" format.</span></span> <span data-ttu-id="c6616-194">(Komputer może być skonfigurowany do wyświetlania tego formatu, inaczej niż obrazy ekranu wyświetlane w ramach tego samouczka).</span><span class="sxs-lookup"><span data-stu-id="c6616-194">(Your computer might be configured to display this format differently from the screen images shown in this tutorial.)</span></span>

<span data-ttu-id="c6616-195">Należy zauważyć, że w każdym z tych pól szablonu, projektanta używane `Bind` wyrażenia przez domyślne, ale zostało zmienione, aby `Eval` wyrażenia w `ItemTemplate` elementów.</span><span class="sxs-lookup"><span data-stu-id="c6616-195">Notice that in each of these template fields, the designer used a `Bind` expression by default, but you've changed that to an `Eval` expression in the `ItemTemplate` elements.</span></span> <span data-ttu-id="c6616-196">`Bind` Wyrażenie sprawia, że dane są dostępne w `GridView` właściwości formantu, w razie potrzeby dostęp do danych w kodzie.</span><span class="sxs-lookup"><span data-stu-id="c6616-196">The `Bind` expression makes the data available in `GridView` control properties in case you need to access the data in code.</span></span> <span data-ttu-id="c6616-197">Na tej stronie nie trzeba dostęp do tych danych w kodzie, aby można było używać `Eval`, co jest bardziej wydajne.</span><span class="sxs-lookup"><span data-stu-id="c6616-197">In this page you don't need to access this data in code, so you can use `Eval`, which is more efficient.</span></span> <span data-ttu-id="c6616-198">Aby uzyskać więcej informacji, zobacz [Trwa pobieranie danych z formantów danych](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx).</span><span class="sxs-lookup"><span data-stu-id="c6616-198">For more information, see [Getting your data out of the data controls](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx).</span></span>

## <a name="revising-entitydatasource-control-markup-to-improve-performance"></a><span data-ttu-id="c6616-199">Zmiana sterowania EntityDataSource znaczników w celu zwiększenia wydajności</span><span class="sxs-lookup"><span data-stu-id="c6616-199">Revising EntityDataSource Control Markup to Improve Performance</span></span>

<span data-ttu-id="c6616-200">W znaczniku dla `EntityDataSource` kontrolować, Usuń `ConnectionString` i `DefaultContainerName` atrybutów, a zastępuje je `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="c6616-200">In the markup for the `EntityDataSource` control, remove the `ConnectionString` and `DefaultContainerName` attributes and replace them with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="c6616-201">Jest to zmiana, należy za każdym razem, gdy tworzysz `EntityDataSource` kontrolować, o ile nie trzeba używać połączenia innego niż ten, który jest ustalony w klasie kontekstu obiektu.</span><span class="sxs-lookup"><span data-stu-id="c6616-201">This is a change you should make every time you create an `EntityDataSource` control, unless you need to use a connection that is different from the one that's hard-coded in the object context class.</span></span> <span data-ttu-id="c6616-202">Za pomocą `ContextTypeName` atrybut zapewnia następujące korzyści:</span><span class="sxs-lookup"><span data-stu-id="c6616-202">Using the `ContextTypeName` attribute provides the following benefits:</span></span>

- <span data-ttu-id="c6616-203">Lepsza wydajność.</span><span class="sxs-lookup"><span data-stu-id="c6616-203">Better performance.</span></span> <span data-ttu-id="c6616-204">Gdy `EntityDataSource` kontroli jest inicjowana przy użyciu modelu danych `ConnectionString` i `DefaultContainerName` atrybutów, wykonuje dodatkowej pracy można załadować metadanych na każde żądanie.</span><span class="sxs-lookup"><span data-stu-id="c6616-204">When the `EntityDataSource` control initializes the data model using the `ConnectionString` and `DefaultContainerName` attributes, it performs additional work to load metadata on every request.</span></span> <span data-ttu-id="c6616-205">Nie jest to konieczne, jeśli określisz `ContextTypeName` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="c6616-205">This isn't necessary if you specify the `ContextTypeName` attribute.</span></span>
- <span data-ttu-id="c6616-206">Powolne ładowanie jest włączona domyślnie w klasach kontekstu generowanych obiektów (takich jak `SchoolEntities` w ramach tego samouczka) w programie Entity Framework 4.0.</span><span class="sxs-lookup"><span data-stu-id="c6616-206">Lazy loading is turned on by default in generated object context classes (such as `SchoolEntities` in this tutorial) in Entity Framework 4.0.</span></span> <span data-ttu-id="c6616-207">Oznacza to, że właściwości nawigacji są ładowane z powiązanych danych automatycznie bezpośrednio w przypadku, gdy ich potrzebujesz.</span><span class="sxs-lookup"><span data-stu-id="c6616-207">This means that navigation properties are loaded with related data automatically right when you need it.</span></span> <span data-ttu-id="c6616-208">Powolne ładowanie jest omówione bardziej szczegółowo w dalszej części tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="c6616-208">Lazy loading is explained in more detail later in this tutorial.</span></span>
- <span data-ttu-id="c6616-209">Wszelkie dostosowania, które zostały zastosowane do obiektu klasy kontekstu (w tym przypadku `SchoolEntities` klasy) będzie dostępna dla kontrolki używające `EntityDataSource` kontroli.</span><span class="sxs-lookup"><span data-stu-id="c6616-209">Any customizations that you've applied to the object context class (in this case, the `SchoolEntities` class) will be available to controls that use the `EntityDataSource` control.</span></span> <span data-ttu-id="c6616-210">Dostosowywanie obiektu klasy kontekstu jest zaawansowane tematu, który nie pasuje do w tej serii samouczków.</span><span class="sxs-lookup"><span data-stu-id="c6616-210">Customizing the object context class is an advanced topic that is not covered in this tutorial series.</span></span> <span data-ttu-id="c6616-211">Aby uzyskać więcej informacji, zobacz [rozszerzanie typy generowane Framework jednostek](https://msdn.microsoft.com/library/dd456844.aspx).</span><span class="sxs-lookup"><span data-stu-id="c6616-211">For more information, see [Extending Entity Framework Generated Types](https://msdn.microsoft.com/library/dd456844.aspx).</span></span>

<span data-ttu-id="c6616-212">Znaczniki teraz będą podobne do następującego przykładu, (kolejność właściwości mogą się różnić):</span><span class="sxs-lookup"><span data-stu-id="c6616-212">The markup will now resemble the following example (the order of the properties might be different):</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample6.aspx)]

<span data-ttu-id="c6616-213">`EnableFlattening` Atrybut odwołuje się do funkcji, który był konieczny we wcześniejszych wersjach programu Entity Framework, ponieważ kolumny klucza obcego nie były widoczne jako właściwości jednostki.</span><span class="sxs-lookup"><span data-stu-id="c6616-213">The `EnableFlattening` attribute refers to a feature that was needed in earlier versions of the Entity Framework because foreign key columns were not exposed as entity properties.</span></span> <span data-ttu-id="c6616-214">Bieżąca wersja sprawia, że można użyć *skojarzenia klucza obcego*, co oznacza, że właściwości klucza obcego są widoczne wszystkie elementy oprócz wiele do wielu skojarzeń.</span><span class="sxs-lookup"><span data-stu-id="c6616-214">The current version makes it possible to use *foreign key associations*, which means foreign key properties are exposed for all but many-to-many associations.</span></span> <span data-ttu-id="c6616-215">Jeśli obiekty mają właściwości klucza obcego i nie [typy złożone](https://msdn.microsoft.com/library/bb738472.aspx), możesz pozostawić ten atrybut ustawiony na `False`.</span><span class="sxs-lookup"><span data-stu-id="c6616-215">If your entities have foreign key properties and no [complex types](https://msdn.microsoft.com/library/bb738472.aspx), you can leave this attribute set to `False`.</span></span> <span data-ttu-id="c6616-216">Nie usunąć atrybut znaczników, ponieważ wartość domyślna to `True`.</span><span class="sxs-lookup"><span data-stu-id="c6616-216">Don't remove the attribute from the markup, because the default value is `True`.</span></span> <span data-ttu-id="c6616-217">Aby uzyskać więcej informacji, zobacz [spłaszczanie obiektów (EntityDataSource)](https://msdn.microsoft.com/library/ee404746.aspx).</span><span class="sxs-lookup"><span data-stu-id="c6616-217">For more information, see [Flattening Objects (EntityDataSource)](https://msdn.microsoft.com/library/ee404746.aspx).</span></span>

<span data-ttu-id="c6616-218">Uruchom stronę i wyświetlić listę uczniów i pracowników (będzie filtrowania dla uczniów i studentów tylko w następnym samouczku).</span><span class="sxs-lookup"><span data-stu-id="c6616-218">Run the page and you see a list of students and employees (you'll filter for just students in the next tutorial).</span></span> <span data-ttu-id="c6616-219">Imię i nazwisko są wyświetlane razem.</span><span class="sxs-lookup"><span data-stu-id="c6616-219">The first name and last name are displayed together.</span></span>

<span data-ttu-id="c6616-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span></span>

<span data-ttu-id="c6616-221">Aby posortować ekran, kliknij nazwę kolumny.</span><span class="sxs-lookup"><span data-stu-id="c6616-221">To sort the display, click a column name.</span></span>

<span data-ttu-id="c6616-222">Kliknij przycisk **Edytuj** w dowolnym wierszu.</span><span class="sxs-lookup"><span data-stu-id="c6616-222">Click **Edit** in any row.</span></span> <span data-ttu-id="c6616-223">Pola tekstowe są wyświetlane, w którym można zmienić imię i nazwisko.</span><span class="sxs-lookup"><span data-stu-id="c6616-223">Text boxes are displayed where you can change the first and last name.</span></span>

<span data-ttu-id="c6616-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span></span>

<span data-ttu-id="c6616-225">**Usuń** działania również przycisku.</span><span class="sxs-lookup"><span data-stu-id="c6616-225">The **Delete** button also works.</span></span> <span data-ttu-id="c6616-226">Kliknij przycisk Usuń, dla wiersza zawierającego Data rejestracji i wiersza zniknie.</span><span class="sxs-lookup"><span data-stu-id="c6616-226">Click delete for a row that has an enrollment date and the row disappears.</span></span> <span data-ttu-id="c6616-227">(Wiersze bez daty rejestracji reprezentują instruktorów i może wystąpić błąd integralności referencyjnej.</span><span class="sxs-lookup"><span data-stu-id="c6616-227">(Rows without an enrollment date represent instructors and you may get a referential integrity error.</span></span> <span data-ttu-id="c6616-228">W następnym samouczku będziesz filtrowania tej listy w celu uwzględnienia studentów po prostu.)</span><span class="sxs-lookup"><span data-stu-id="c6616-228">In the next tutorial you'll filter this list to include just students.)</span></span>

## <a name="displaying-data-from-a-navigation-property"></a><span data-ttu-id="c6616-229">Wyświetlanie danych za pomocą właściwości nawigacji</span><span class="sxs-lookup"><span data-stu-id="c6616-229">Displaying Data from a Navigation Property</span></span>

<span data-ttu-id="c6616-230">Teraz załóżmy, że chcesz wiedzieć, ile kursów każdego ucznia jest zarejestrowane w.</span><span class="sxs-lookup"><span data-stu-id="c6616-230">Now suppose you want to know how many courses each student is enrolled in.</span></span> <span data-ttu-id="c6616-231">Entity Framework udostępnia te informacje w `StudentGrades` właściwość nawigacji `Person` jednostki.</span><span class="sxs-lookup"><span data-stu-id="c6616-231">The Entity Framework provides that information in the `StudentGrades` navigation property of the `Person` entity.</span></span> <span data-ttu-id="c6616-232">Projekt bazy danych nie jest dozwolone uczniów do rejestracji w szkoleniu bez potrzeby przedsiębiorstw, przypisane, w tym samouczku można założyć, że o wiersz w `StudentGrade` wiersza tabeli, który jest skojarzony z kurs jest taka sama jak rejestrowane w ramach tego kursu.</span><span class="sxs-lookup"><span data-stu-id="c6616-232">Because the database design does not allow a student to be enrolled in a course without having a grade assigned, for this tutorial you can assume that having a row in the `StudentGrade` table row that is associated with a course is the same as being enrolled in the course.</span></span> <span data-ttu-id="c6616-233">( `Courses` Właściwość nawigacji jest przeznaczony tylko dla instruktorów.)</span><span class="sxs-lookup"><span data-stu-id="c6616-233">(The `Courses` navigation property is only for instructors.)</span></span>

<span data-ttu-id="c6616-234">Kiedy używasz `ContextTypeName` atrybutu `EntityDataSource` kontrolki, platformy Entity Framework automatycznie pobiera informacje dla właściwości nawigacji podczas dostępu do tej właściwości.</span><span class="sxs-lookup"><span data-stu-id="c6616-234">When you use the `ContextTypeName` attribute of the `EntityDataSource` control, the Entity Framework automatically retrieves information for a navigation property when you access that property.</span></span> <span data-ttu-id="c6616-235">Jest to nazywane *powolne ładowanie*.</span><span class="sxs-lookup"><span data-stu-id="c6616-235">This is called *lazy loading*.</span></span> <span data-ttu-id="c6616-236">Jednak może to być mało wydajne, ponieważ powoduje to oddzielne wywołania do bazy danych, potrzebne są dodatkowe informacje o każdej czasie.</span><span class="sxs-lookup"><span data-stu-id="c6616-236">However, this can be inefficient, because it results in a separate call to the database each time additional information is needed.</span></span> <span data-ttu-id="c6616-237">Jeśli potrzebne są dane z właściwości nawigacji dla każdej jednostki zwrócony przez `EntityDataSource` formantu, jest bardziej wydajne, można pobrać powiązanych danych, oraz jednostki w pojedynczym wywołaniu do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="c6616-237">If you need data from the navigation property for every entity returned by the `EntityDataSource` control, it's more efficient to retrieve the related data along with the entity itself in a single call to the database.</span></span> <span data-ttu-id="c6616-238">Jest to *wczesne ładowanie*, a następnie określ wczesne ładowanie dla właściwości nawigacji, ustawiając `Include` właściwość `EntityDataSource` kontroli.</span><span class="sxs-lookup"><span data-stu-id="c6616-238">This is called *eager loading*, and you specify eager loading for a navigation property by setting the `Include` property of the `EntityDataSource` control.</span></span>

<span data-ttu-id="c6616-239">W *Students.aspx*, aby wyświetlić liczbę kursy dla każdego ucznia, więc wczesne ładowanie jest najlepszym wyborem.</span><span class="sxs-lookup"><span data-stu-id="c6616-239">In *Students.aspx*, you want to show the number of courses for every student, so eager loading is the best choice.</span></span> <span data-ttu-id="c6616-240">Jeśli zostały wyświetlanie wszystkich uczniów, ale którym wyświetlana jest liczba kursy tylko w przypadku niektórych z nich, (które wymagałyby pisanie kodu oprócz znaczników), powolne ładowanie może być lepszym rozwiązaniem.</span><span class="sxs-lookup"><span data-stu-id="c6616-240">If you were displaying all students but showing the number of courses only for a few of them (which would require writing some code in addition to the markup), lazy loading might be a better choice.</span></span>

<span data-ttu-id="c6616-241">Otwieranie programu lub przełączanie na *Students.aspx*, przełącz się do **projektu** widoku, wybierz opcję `StudentsEntityDataSource`i w **właściwości** zestaw okna **Include**właściwość **StudentGrades**.</span><span class="sxs-lookup"><span data-stu-id="c6616-241">Open or switch to *Students.aspx*, switch to **Design** view, select `StudentsEntityDataSource`, and in the **Properties** window set the **Include** property to **StudentGrades**.</span></span> <span data-ttu-id="c6616-242">(Jeśli trzeba pobrać kilka właściwości nawigacji, można określić ich nazwy przecinkami — na przykład **StudentGrades, kursy**.)</span><span class="sxs-lookup"><span data-stu-id="c6616-242">(If you wanted to get multiple navigation properties, you could specify their names separated by commas — for example, **StudentGrades, Courses**.)</span></span>

<span data-ttu-id="c6616-243">[![Image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-243">[![Image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span></span>

<span data-ttu-id="c6616-244">Przełącz się do **źródła** widoku.</span><span class="sxs-lookup"><span data-stu-id="c6616-244">Switch to **Source** view.</span></span> <span data-ttu-id="c6616-245">W `StudentsGridView` kontroli po ostatnim `asp:TemplateField` elementu, Dodaj następujące nowe pole szablonu:</span><span class="sxs-lookup"><span data-stu-id="c6616-245">In the `StudentsGridView` control, after the last `asp:TemplateField` element, add the following new template field:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample7.aspx)]

<span data-ttu-id="c6616-246">W `Eval` wyrażenia, możesz odwoływać się do właściwości nawigacji `StudentGrades`.</span><span class="sxs-lookup"><span data-stu-id="c6616-246">In the `Eval` expression, you can reference the navigation property `StudentGrades`.</span></span> <span data-ttu-id="c6616-247">Ponieważ ta właściwość zawiera kolekcję, ma `Count` właściwość, która służy do wyświetlania liczby kursów, w których jest zarejestrowany dla uczniów.</span><span class="sxs-lookup"><span data-stu-id="c6616-247">Because this property contains a collection, it has a `Count` property that you can use to display the number of courses in which the student is enrolled.</span></span> <span data-ttu-id="c6616-248">Później w samouczku pokazano, jak do wyświetlania danych z właściwości nawigacji, które zawierają pojedyncze jednostki zamiast kolekcji.</span><span class="sxs-lookup"><span data-stu-id="c6616-248">In a later tutorial you'll see how to display data from navigation properties that contain single entities instead of collections.</span></span> <span data-ttu-id="c6616-249">(Należy pamiętać, że nie można użyć `BoundField` elementy, aby wyświetlić dane z właściwości nawigacji.)</span><span class="sxs-lookup"><span data-stu-id="c6616-249">(Note that you cannot use `BoundField` elements to display data from navigation properties.)</span></span>

<span data-ttu-id="c6616-250">Uruchomienia strony, a teraz widać, ile kursy dla uczniów jest zarejestrowane w.</span><span class="sxs-lookup"><span data-stu-id="c6616-250">Run the page and you now see how many courses each student is enrolled in.</span></span>

<span data-ttu-id="c6616-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span></span>

## <a name="using-a-detailsview-control-to-insert-entities"></a><span data-ttu-id="c6616-252">Wstaw jednostki za pomocą kontrolki widoku szczegółów</span><span class="sxs-lookup"><span data-stu-id="c6616-252">Using a DetailsView Control to Insert Entities</span></span>

<span data-ttu-id="c6616-253">Następnym krokiem jest utworzenie strony, która ma `DetailsView` formant, który umożliwia dodawanie nowych studentów.</span><span class="sxs-lookup"><span data-stu-id="c6616-253">The next step is to create a page that has a `DetailsView` control that will let you add new students.</span></span> <span data-ttu-id="c6616-254">Zamknij przeglądarkę, a następnie utwórz nową stronę sieci web, używając *Site.Master* strony wzorcowej.</span><span class="sxs-lookup"><span data-stu-id="c6616-254">Close the browser and then create a new web page using the *Site.Master* master page.</span></span> <span data-ttu-id="c6616-255">Nazwij stronę *StudentsAdd.aspx*, a następnie przejdź na **źródła** widoku.</span><span class="sxs-lookup"><span data-stu-id="c6616-255">Name the page *StudentsAdd.aspx*, and then switch to **Source** view.</span></span>

<span data-ttu-id="c6616-256">Dodaj następujący kod, aby zastąpić istniejący kod znaczników dla `Content` formantu o nazwie `Content2`:</span><span class="sxs-lookup"><span data-stu-id="c6616-256">Add the following markup to replace the existing markup for the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample8.aspx)]

<span data-ttu-id="c6616-257">Ten kod znaczników tworzy `EntityDataSource` formant, który jest podobny do tego, który został utworzony w *Students.aspx*, z wyjątkiem umożliwia wstawiania.</span><span class="sxs-lookup"><span data-stu-id="c6616-257">This markup creates an `EntityDataSource` control that is similar to the one you created in *Students.aspx*, except it enables insertion.</span></span> <span data-ttu-id="c6616-258">Podobnie jak w przypadku `GridView` kontrolować powiązanych pól `DetailsView` kontrolki są kodowane dokładnie w takiej postaci, w jaki byłyby dla kontrolki danych, która łączy się bezpośrednio z bazą danych, z tą różnicą, że odwołują się do właściwości jednostki.</span><span class="sxs-lookup"><span data-stu-id="c6616-258">As with the `GridView` control, the bound fields of the `DetailsView` control are coded exactly as they would be for a data control that connects directly to a database, except that they reference entity properties.</span></span> <span data-ttu-id="c6616-259">W tym przypadku `DetailsView` formant jest używany tylko w przypadku wstawiania wierszy, dlatego ustawiono na domyślny tryb `Insert`.</span><span class="sxs-lookup"><span data-stu-id="c6616-259">In this case, the `DetailsView` control is used only for inserting rows, so you have set the default mode to `Insert`.</span></span>

<span data-ttu-id="c6616-260">Uruchom stronę i dodać nowego studenta.</span><span class="sxs-lookup"><span data-stu-id="c6616-260">Run the page and add a new student.</span></span>

<span data-ttu-id="c6616-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span></span>

<span data-ttu-id="c6616-262">Nic się nie stanie po wstawieniu nowego Studenta, ale teraz uruchomić *Students.aspx*, zostaną wyświetlone nowe informacje dla uczniów.</span><span class="sxs-lookup"><span data-stu-id="c6616-262">Nothing will happen after you insert a new student, but if you now run *Students.aspx*, you'll see the new student information.</span></span>

## <a name="displaying-data-in-a-drop-down-list"></a><span data-ttu-id="c6616-263">Wyświetlanie danych na liście rozwijanej</span><span class="sxs-lookup"><span data-stu-id="c6616-263">Displaying Data in a Drop-Down List</span></span>

<span data-ttu-id="c6616-264">W poniższych krokach będziesz elementu databind `DropDownList` formantu do jednostki można ustawić przy użyciu `EntityDataSource` kontroli.</span><span class="sxs-lookup"><span data-stu-id="c6616-264">In the following steps you'll databind a `DropDownList` control to an entity set using an `EntityDataSource` control.</span></span> <span data-ttu-id="c6616-265">W tej części samouczka nie zrobi, bardzo z tej listy.</span><span class="sxs-lookup"><span data-stu-id="c6616-265">In this part of the tutorial, you won't do much with this list.</span></span> <span data-ttu-id="c6616-266">W kolejnych częściach jednak użyjesz listy umożliwiające użytkownikom wybór działu do wyświetlenia kursy skojarzony z działu.</span><span class="sxs-lookup"><span data-stu-id="c6616-266">In subsequent parts, though, you'll use the list to let users select a department to display courses associated with the department.</span></span>

<span data-ttu-id="c6616-267">Utwórz nową stronę sieci web o nazwie *Courses.aspx*.</span><span class="sxs-lookup"><span data-stu-id="c6616-267">Create a new web page named *Courses.aspx*.</span></span> <span data-ttu-id="c6616-268">W **źródła** wyświetlać, dodawać nagłówek, aby `Content` formant, który nosi nazwę `Content2`:</span><span class="sxs-lookup"><span data-stu-id="c6616-268">In **Source** view, add a heading to the `Content` control that's named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample9.aspx)]

<span data-ttu-id="c6616-269">W **projektowania** wyświetlać, dodawać `EntityDataSource` kontrolki na stronie jak poprzednio, jednak tym razem nadaj mu nazwę `DepartmentsEntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="c6616-269">In **Design** view, add an `EntityDataSource` control to the page as you did before, except this time name it `DepartmentsEntityDataSource`.</span></span> <span data-ttu-id="c6616-270">Wybierz **działów** jako **Nazwa zestawu jednostek** wartości, a następnie wybierz tylko **DepartmentID** i **nazwa** właściwości.</span><span class="sxs-lookup"><span data-stu-id="c6616-270">Select **Departments** as the **EntitySetName** value, and select only the **DepartmentID** and **Name** properties.</span></span>

<span data-ttu-id="c6616-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span></span>

<span data-ttu-id="c6616-272">Z **standardowa** karcie **przybornika**, przeciągnij `DropDownList` do strony, nadaj jej nazwę `DepartmentsDropDownList`kliknij tag inteligentny i wybierz **wybierz źródło danych** do Rozpocznij **Kreatora konfiguracji źródła danych**.</span><span class="sxs-lookup"><span data-stu-id="c6616-272">From the **Standard** tab of the **Toolbox**, drag a `DropDownList` control to the page, name it `DepartmentsDropDownList`, click the smart tag, and select **Choose Data Source** to start the **DataSource Configuration Wizard**.</span></span>

<span data-ttu-id="c6616-273">[![Image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-273">[![Image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span></span>

<span data-ttu-id="c6616-274">W **wybierz źródło danych** kroku, wybierz pozycję **DepartmentsEntityDataSource** jako źródło danych, kliknij przycisk **odświeżania schematu**, a następnie wybierz pozycję **nazwa** jako pole danych, aby wyświetlić i **DepartmentID** jako wartość pola danych.</span><span class="sxs-lookup"><span data-stu-id="c6616-274">In the **Choose a Data Source** step, select **DepartmentsEntityDataSource** as the data source, click **Refresh Schema**, and then select **Name** as the data field to display and **DepartmentID** as the value data field.</span></span> <span data-ttu-id="c6616-275">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="c6616-275">Click **OK**.</span></span>

<span data-ttu-id="c6616-276">[![Image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-276">[![Image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span></span>

<span data-ttu-id="c6616-277">Metoda formant jest używany do elementu databind używający narzędzia Entity Framework jest taki sam, jak z innymi danymi ASP.NET kontrolki źródła, z wyjątkiem możesz określać jednostki i właściwości jednostki.</span><span class="sxs-lookup"><span data-stu-id="c6616-277">The method you use to databind the control using the Entity Framework is the same as with other ASP.NET data source controls except you're specifying entities and entity properties.</span></span>

<span data-ttu-id="c6616-278">Przełącz się do **źródła** wyświetlić i dodać "Wybierz dział:" bezpośrednio przed `DropDownList` kontroli.</span><span class="sxs-lookup"><span data-stu-id="c6616-278">Switch to **Source** view and add "Select a department:" immediately before the `DropDownList` control.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample10.aspx)]

<span data-ttu-id="c6616-279">Przypominamy, zmień adiustację tak, aby uzyskać `EntityDataSource` kontrolki, w tym momencie, zastępując `ConnectionString` i `DefaultContainerName` atrybuty atrybutem `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="c6616-279">As a reminder, change the markup for the `EntityDataSource` control at this point by replacing the `ConnectionString` and `DefaultContainerName` attributes with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="c6616-280">Często najlepiej poczekaj, aż po jej utworzeniu formant powiązany z danymi, który jest połączony z kontroli źródła danych, zanim będzie można zmienić `EntityDataSource` kontrolować znaczników, ponieważ po wprowadzeniu zmiany, Projektant nie udostępni Ci **odświeżania Schemat** opcji w kontrolce powiązanych z danymi.</span><span class="sxs-lookup"><span data-stu-id="c6616-280">It's often best to wait until after you've created the data-bound control that is linked to the data source control before you change the `EntityDataSource` control markup, because after you make the change, the designer will not provide you with a **Refresh Schema** option in the data-bound control.</span></span>

<span data-ttu-id="c6616-281">Uruchom stronę i dział można wybrać z listy rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="c6616-281">Run the page and you can select a department from the drop-down list.</span></span>

<span data-ttu-id="c6616-282">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="c6616-282">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span></span>

<span data-ttu-id="c6616-283">Na tym kończy się wprowadzenie do korzystania z `EntityDataSource` kontroli.</span><span class="sxs-lookup"><span data-stu-id="c6616-283">This completes the introduction to using the `EntityDataSource` control.</span></span> <span data-ttu-id="c6616-284">Praca z tej kontrolki jest zazwyczaj nie różni się od pracy z innymi danymi ASP.NET kontroli źródła, z tą różnicą, że odwołania jednostki i właściwości zamiast tabel i kolumn.</span><span class="sxs-lookup"><span data-stu-id="c6616-284">Working with this control is generally no different from working with other ASP.NET data source controls, except that you reference entities and properties instead of tables and columns.</span></span> <span data-ttu-id="c6616-285">Jedynym wyjątkiem jest, gdy chcesz uzyskać dostęp do właściwości nawigacji.</span><span class="sxs-lookup"><span data-stu-id="c6616-285">The only exception is when you want to access navigation properties.</span></span> <span data-ttu-id="c6616-286">W następnym samouczku zobaczysz, czy składnia możesz za pomocą `EntityDataSource` kontroli może też różnią się od innych formantów źródła danych podczas filtrowania, grupowania i kolejność danych.</span><span class="sxs-lookup"><span data-stu-id="c6616-286">In the next tutorial you'll see that the syntax you use with `EntityDataSource` control might also differ from other data source controls when you filter, group, and order data.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c6616-287">[Poprzednie](the-entity-framework-and-aspnet-getting-started-part-1.md)
> [dalej](the-entity-framework-and-aspnet-getting-started-part-3.md)</span><span class="sxs-lookup"><span data-stu-id="c6616-287">[Previous](the-entity-framework-and-aspnet-getting-started-part-1.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-3.md)</span></span>

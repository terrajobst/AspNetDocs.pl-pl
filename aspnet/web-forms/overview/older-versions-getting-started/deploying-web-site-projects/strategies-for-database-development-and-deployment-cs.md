---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-cs
title: Strategie tworzenia i wdrażania baz danych (C#) | Microsoft Docs
author: rick-anderson
description: Podczas wdrażania aplikacji opartej na danych po raz pierwszy możesz odślepo skopiować bazę danych w środowisku programistycznym do środowiska produkcyjnego. B...
ms.author: riande
ms.date: 04/23/2009
ms.assetid: 3e8b0627-3eb7-488e-807e-067cba7cec05
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-cs
msc.type: authoredcontent
ms.openlocfilehash: 4d9dbaf41926b43af171619ee34f58da84b5dab1
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/28/2019
ms.locfileid: "74582182"
---
# <a name="strategies-for-database-development-and-deployment-c"></a><span data-ttu-id="17c34-104">Strategie projektowania i wdrażania baz danych (C#)</span><span class="sxs-lookup"><span data-stu-id="17c34-104">Strategies for Database Development and Deployment (C#)</span></span>

<span data-ttu-id="17c34-105">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="17c34-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="17c34-106">Pobierz plik PDF</span><span class="sxs-lookup"><span data-stu-id="17c34-106">Download PDF</span></span>](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial10_DBDevel_cs.pdf)

> <span data-ttu-id="17c34-107">Podczas wdrażania aplikacji opartej na danych po raz pierwszy możesz odślepo skopiować bazę danych w środowisku programistycznym do środowiska produkcyjnego.</span><span class="sxs-lookup"><span data-stu-id="17c34-107">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="17c34-108">Jednak wykonanie kopii ślepej w kolejnych wdrożeniach spowoduje zastąpienie wszelkich danych wprowadzonych do produkcyjnej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-108">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="17c34-109">Zamiast tego wdrożenie bazy danych obejmuje zastosowanie zmian wprowadzonych w bazie danych programistycznych od momentu ostatniego wdrożenia w produkcyjnej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-109">Instead, deploying a database involves applying the changes made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="17c34-110">Ten samouczek analizuje te wyzwania i oferuje różne strategie, które ułatwiają poddawanie i stosowanie zmian wprowadzonych w bazie danych od momentu ostatniego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="17c34-110">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>

## <a name="introduction"></a><span data-ttu-id="17c34-111">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="17c34-111">Introduction</span></span>

<span data-ttu-id="17c34-112">Zgodnie z opisem w poprzednich samouczkach wdrożenie aplikacji ASP.NET wiąże się z kopiowaniem odnośnej zawartości ze środowiska deweloperskiego do środowiska produkcyjnego.</span><span class="sxs-lookup"><span data-stu-id="17c34-112">As discussed in previous tutorials, deploying an ASP.NET application entails copying the pertinent content from the development environment to the production environment.</span></span> <span data-ttu-id="17c34-113">Wdrożenie nie jest zdarzeniem jednorazowym, ale nie jest wykonywane za każdym razem, gdy następuje wydanie nowej wersji oprogramowania lub zidentyfikowanie i rozwiązanie problemów związanych z bezpieczeństwem.</span><span class="sxs-lookup"><span data-stu-id="17c34-113">Deployment is not a one-time event, but rather something that happens every time a new version of the software is released or when bugs or security concerns have been identified and addressed.</span></span> <span data-ttu-id="17c34-114">Podczas kopiowania ASP.NET stron, obrazów, plików JavaScript i innych plików do środowiska produkcyjnego nie trzeba się dochodzić do sposobu zmiany tego pliku od momentu ostatniego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="17c34-114">When copying ASP.NET pages, images, JavaScript files, and other such files to the production environment you do not need to concern yourself with how these file have been changed since the last deployment.</span></span> <span data-ttu-id="17c34-115">Możesz odślepo skopiować plik do środowiska produkcyjnego, zastępując istniejącą zawartość.</span><span class="sxs-lookup"><span data-stu-id="17c34-115">You can blindly copy the file to production, overwriting the existing content.</span></span> <span data-ttu-id="17c34-116">Niestety, ta prostota nie obejmuje wdrażania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-116">Unfortunately, this simplicity does not extend to deploying the database.</span></span>

<span data-ttu-id="17c34-117">Podczas wdrażania aplikacji opartej na danych po raz pierwszy możesz odślepo skopiować bazę danych w środowisku programistycznym do środowiska produkcyjnego.</span><span class="sxs-lookup"><span data-stu-id="17c34-117">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="17c34-118">Jednak wykonanie kopii ślepej w kolejnych wdrożeniach spowoduje zastąpienie wszelkich danych wprowadzonych do produkcyjnej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-118">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="17c34-119">Zamiast tego wdrożenie bazy danych obejmuje zastosowanie *zmian* wprowadzonych w bazie danych programistycznych od momentu ostatniego wdrożenia w produkcyjnej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-119">Instead, deploying a database involves applying the *changes* made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="17c34-120">Ten samouczek analizuje te wyzwania i oferuje różne strategie, które ułatwiają poddawanie i stosowanie zmian wprowadzonych w bazie danych od momentu ostatniego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="17c34-120">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>

## <a name="the-challenges-of-deploying-a-database"></a><span data-ttu-id="17c34-121">Wyzwania związane z wdrażaniem bazy danych</span><span class="sxs-lookup"><span data-stu-id="17c34-121">The Challenges of Deploying a Database</span></span>

<span data-ttu-id="17c34-122">Przed wdrożeniem aplikacji opartej na danych po raz pierwszy istnieje tylko jedna baza danych, a mianowicie baza danych w środowisku deweloperskim, na przykład podczas wdrażania aplikacji opartej na danych po raz pierwszy, z której można odślepo Kopiowanie bazy danych w środowisko programistyczne w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="17c34-122">Before a data-driven application has been deployed for the first time, there is only one database, namely the database in the development environment, which is why when deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="17c34-123">Jednak po wdrożeniu aplikacji istnieją dwie kopie bazy danych: jedna w programowaniu i jedna w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="17c34-123">But once the application has been deployed there are two copies of the database: one in development and one in production.</span></span>

<span data-ttu-id="17c34-124">Między wdrożeniami bazy danych programistycznych i produkcyjnych mogą nie być zsynchronizowane. Schemat produkcyjnej bazy danych s pozostaje niezmieniony, ale schemat bazy danych programistycznych może ulec zmianie po dodaniu nowych funkcji.</span><span class="sxs-lookup"><span data-stu-id="17c34-124">Between deployments the development and production databases can become out of sync. While the production database s schema remains unchanged, the development database s schema may change as new features are added.</span></span> <span data-ttu-id="17c34-125">Możesz dodawać lub usuwać kolumny, tabele, widoki lub procedury składowane.</span><span class="sxs-lookup"><span data-stu-id="17c34-125">You might add or remove columns, tables, views, or stored procedures.</span></span> <span data-ttu-id="17c34-126">Mogą być również ważne dane, które są dodawane do bazy danych programistycznych.</span><span class="sxs-lookup"><span data-stu-id="17c34-126">There may also be important data that gets added to the development database.</span></span> <span data-ttu-id="17c34-127">Wiele aplikacji opartych na danych zawiera tabele wyszukiwania wypełnione zakodowanymi danymi specyficznymi dla aplikacji, które nie są edytowane przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="17c34-127">Many data-driven applications include lookup tables populated with hard-coded, application-specific data that are not user-editable.</span></span> <span data-ttu-id="17c34-128">Na przykład witryna sieci Web z licytacją może zawierać listę rozwijaną z opcjami opisującymi stan aukcji z licytacją: nowe, takie jak nowy, dobry i uczciwy.</span><span class="sxs-lookup"><span data-stu-id="17c34-128">For example, an auction website might have a drop-down list with choices that describe the condition of the item being auctioned: New, Like New, Good, and Fair.</span></span> <span data-ttu-id="17c34-129">Zamiast nakodować twarde te opcje bezpośrednio na liście rozwijanej, zazwyczaj lepiej jest umieścić je w tabeli bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-129">Rather than hard-coding these options directly in the drop-down list it is usually better to place them in a database table.</span></span> <span data-ttu-id="17c34-130">Jeśli podczas opracowywania, nowy warunek o nazwie Słabe zostanie dodany do tabeli, a następnie podczas wdrażania aplikacji należy dodać ten sam rekord do tabeli odnośników w produkcyjnej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-130">If, during development, a new condition named Poor is added to the table then when deploying the application this same record needs to be added to the lookup table in the production database.</span></span>

<span data-ttu-id="17c34-131">W idealnym przypadku wdrażanie bazy danych będzie wymagało kopiowania bazy danych z projektowania do produkcji.</span><span class="sxs-lookup"><span data-stu-id="17c34-131">Ideally, deploying the database would involve copying the database from development to production.</span></span> <span data-ttu-id="17c34-132">Należy jednak pamiętać, że po wdrożeniu aplikacji i wznowieniu tworzenia produkcyjnej bazy danych są wypełniane rzeczywistymi danymi od rzeczywistych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="17c34-132">But keep in mind that after you have deployed the application and resumed development, the production database is being populated with real data from real users.</span></span> <span data-ttu-id="17c34-133">W związku z tym, jeśli po prostu skopiowanie bazy danych z programowania do środowiska produkcyjnego w środowisku produkcyjnym w następnym wdrożeniu zastąpisz produkcyjną bazę danych i utracisz istniejące dane.</span><span class="sxs-lookup"><span data-stu-id="17c34-133">Therefore, if you were to simply copy the database from development to production at the next deployment you would overwrite the production database and lose its existing data.</span></span> <span data-ttu-id="17c34-134">Wynikiem jest to, że wdrażanie bazy danych jest wrzące w celu zastosowania zmian wprowadzonych w bazie danych programistycznych od momentu ostatniego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="17c34-134">The net result is that deploying the database boils down to applying the changes made to the development database since the last deployment.</span></span>

<span data-ttu-id="17c34-135">Ze względu na to, że wdrażanie bazy danych obejmuje zastosowanie zmian w schemacie i, prawdopodobnie, danych od ostatniego wdrożenia, należy utrzymać historię zmian (lub określić ją w czasie wdrażania), aby te zmiany mogły być stosowane w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="17c34-135">Because deploying a database involves applying the changes in the schema and, possibly, the data since the last deployment, a history of changes must be maintained (or determined at deploy-time) so that those changes can be applied on production.</span></span> <span data-ttu-id="17c34-136">Istnieją różne techniki służące do zarządzania i stosowania zmian w modelu danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-136">There are a variety of techniques for managing and applying changes to the data model.</span></span>

### <a name="defining-the-baseline"></a><span data-ttu-id="17c34-137">Definiowanie linii bazowej</span><span class="sxs-lookup"><span data-stu-id="17c34-137">Defining the Baseline</span></span>

<span data-ttu-id="17c34-138">Aby zachować zmiany w bazie danych aplikacji, należy mieć pewien stan początkowy, czyli linię bazową, do której zostaną zastosowane zmiany.</span><span class="sxs-lookup"><span data-stu-id="17c34-138">To maintain the changes to your application s database you need to have some starting state, a baseline to which the changes are applied to.</span></span> <span data-ttu-id="17c34-139">W jednym stanie stan początkowy może być pustą bazą danych bez tabel, widoków ani procedur składowanych.</span><span class="sxs-lookup"><span data-stu-id="17c34-139">At one extreme the starting state could be an empty database with no tables, views, or stored procedures.</span></span> <span data-ttu-id="17c34-140">Taka linia bazowa skutkuje dużym dziennikiem zmian, ponieważ musi obejmować tworzenie wszystkich tabel, widoków i procedur składowanych bazy danych wraz ze wszystkimi zmianami wprowadzonymi po początkowym wdrożeniu.</span><span class="sxs-lookup"><span data-stu-id="17c34-140">Such a baseline results in a large change log because it must include the creation of all of the database s tables, views, and stored procedures along with any changes made after the initial deployment.</span></span> <span data-ttu-id="17c34-141">Na drugim końcu spektrum można ustawić linię bazową jako wersję bazy danych początkowo wdrożoną w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="17c34-141">At the other end of the spectrum you could set the baseline as the version of the database that is initially deployed to the production environment.</span></span> <span data-ttu-id="17c34-142">Ten wybór skutkuje znacznie mniejszym dziennikiem zmian, ponieważ zawiera on tylko zmiany wprowadzone do bazy danych po pierwszym wdrożeniu.</span><span class="sxs-lookup"><span data-stu-id="17c34-142">This choice results in a much smaller change log because it only includes the changes made to the database following the first deployment.</span></span> <span data-ttu-id="17c34-143">Jest to preferowane podejście.</span><span class="sxs-lookup"><span data-stu-id="17c34-143">This is the approach I prefer.</span></span> <span data-ttu-id="17c34-144">Ponadto możesz wybrać większą część podejścia do drogi, definiując linię bazową jako punkt między początkowym tworzeniem bazy danych a pierwszą wdrożeniem bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-144">And of course you can choose a more middle of the road approach, defining the baseline as some point between the initial creation of the database and when the database is first deployed.</span></span>

<span data-ttu-id="17c34-145">Po wybraniu linii bazowej Rozważ wygenerowanie skryptu SQL, który można wykonać, aby ponownie utworzyć wersję bazową.</span><span class="sxs-lookup"><span data-stu-id="17c34-145">Once you have chosen a baseline consider generating a SQL script that can be executed to recreate the baseline version.</span></span> <span data-ttu-id="17c34-146">Taki skrypt pozwala szybko odtworzyć wersję bazową bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-146">Such a script makes it possible to quickly recreate the baseline version of the database.</span></span> <span data-ttu-id="17c34-147">Ta funkcja jest szczególnie przydatna w większych projektach, w których może istnieć wielu deweloperów pracujących nad projektem lub dodatkowymi środowiskami, takimi jak testowanie lub przemieszczanie, które wymagają własnej kopii bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-147">This functionality is especially useful in larger projects, where there may be multiple developers working on the project or additional environments, such as testing or staging, that each need their own copy of the database.</span></span>

<span data-ttu-id="17c34-148">Istnieje wiele narzędzi do dyspozycji do wygenerowania skryptu SQL wersji linii bazowej.</span><span class="sxs-lookup"><span data-stu-id="17c34-148">There are a variety of tools at your disposal to generate a SQL script of the baseline version.</span></span> <span data-ttu-id="17c34-149">W SQL Server Management Studio (SSMS) kliknij prawym przyciskiem myszy bazę danych, przejdź do podmenu zadania, a następnie wybierz opcję Generuj skrypty.</span><span class="sxs-lookup"><span data-stu-id="17c34-149">From SQL Server Management Studio (SSMS) you can right-click on the database, go to the Tasks submenu, and choose the Generate Scripts option.</span></span> <span data-ttu-id="17c34-150">Spowoduje to uruchomienie kreatora skryptów, który umożliwia wygenerowanie pliku zawierającego polecenia SQL służące do tworzenia obiektów bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-150">This launches the Script Wizard, which you can instruct to generate a file that contains the SQL commands to create your database s objects.</span></span> <span data-ttu-id="17c34-151">Kolejną opcją jest Kreator publikacji bazy danych, który może generować polecenia SQL, aby nie tylko utworzyć schemat bazy danych, ale również dane w tabelach bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-151">Another option is the Database Publishing Wizard, which can generate the SQL commands to not only create the database schema, but also the data in the database tables.</span></span> <span data-ttu-id="17c34-152">Kreator publikowania bazy danych został szczegółowo sprawdzony w samouczku *wdrażanie bazy danych* .</span><span class="sxs-lookup"><span data-stu-id="17c34-152">The Database Publishing Wizard was examined in detail back in the *Deploying a Database* tutorial.</span></span> <span data-ttu-id="17c34-153">Niezależnie od tego, jakiego narzędzia używasz, na końcu powinien znajdować się plik skryptu, którego można użyć do odtworzenia bazowej wersji bazy danych, jeśli zachodzi taka potrzeba.</span><span class="sxs-lookup"><span data-stu-id="17c34-153">Regardless of what tool you use, in the end you should have a script file that you can use to recreate the baseline version of your database, should the need arise.</span></span>

## <a name="documenting-the-database-changes-in-prose"></a><span data-ttu-id="17c34-154">Dokumentowanie zmian w bazie danych w programie Prose</span><span class="sxs-lookup"><span data-stu-id="17c34-154">Documenting the Database Changes in Prose</span></span>

<span data-ttu-id="17c34-155">Najprostszym sposobem, aby zachować dziennik zmian w modelu danych podczas fazy projektowania, jest zapisanie zmian w Prose.</span><span class="sxs-lookup"><span data-stu-id="17c34-155">The simplest way to maintain a log of changes to the data model during the development phase is to record the changes in prose.</span></span> <span data-ttu-id="17c34-156">Na przykład jeśli podczas opracowywania już wdrożonej aplikacji dodasz nową kolumnę do tabeli `Employees`, usuniesz kolumnę z tabeli `Orders` i dodamy nową tabelę (`ProductCategories`), plik tekstowy lub dokument programu Microsoft Word zostanie zachowany z następującą historią:</span><span class="sxs-lookup"><span data-stu-id="17c34-156">For example, if during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`), you would maintain a text file or Microsoft Word document with the following history:</span></span>

<a id="0.4_table01"></a>

| <span data-ttu-id="17c34-157">**Zmień datę**</span><span class="sxs-lookup"><span data-stu-id="17c34-157">**Change Date**</span></span> | <span data-ttu-id="17c34-158">**Szczegóły zmiany**</span><span class="sxs-lookup"><span data-stu-id="17c34-158">**Change Details**</span></span> |
| --- | --- |
| <span data-ttu-id="17c34-159">2009-02-03:</span><span class="sxs-lookup"><span data-stu-id="17c34-159">2009-02-03:</span></span> | <span data-ttu-id="17c34-160">Dodano `DepartmentID` kolumny (`int`, a nie NULL) do tabeli `Employees`.</span><span class="sxs-lookup"><span data-stu-id="17c34-160">Added column `DepartmentID` (`int`, NOT NULL) to the `Employees` table.</span></span> <span data-ttu-id="17c34-161">Dodano ograniczenie klucza obcego z `Departments.DepartmentID` do `Employees.DepartmentID`.</span><span class="sxs-lookup"><span data-stu-id="17c34-161">Added a foreign key constraint from `Departments.DepartmentID` to `Employees.DepartmentID`.</span></span> |
| <span data-ttu-id="17c34-162">2009-02-05:</span><span class="sxs-lookup"><span data-stu-id="17c34-162">2009-02-05:</span></span> | <span data-ttu-id="17c34-163">Usunięto `TotalWeight` kolumny z tabeli `Orders`.</span><span class="sxs-lookup"><span data-stu-id="17c34-163">Removed column `TotalWeight` from the `Orders` table.</span></span> <span data-ttu-id="17c34-164">Dane już przechwycone w skojarzonych rekordach `OrderDetails`.</span><span class="sxs-lookup"><span data-stu-id="17c34-164">Data already captured in associated `OrderDetails` records.</span></span> |
| <span data-ttu-id="17c34-165">2009-02-12:</span><span class="sxs-lookup"><span data-stu-id="17c34-165">2009-02-12:</span></span> | <span data-ttu-id="17c34-166">Utworzono tabelę `ProductCategories`.</span><span class="sxs-lookup"><span data-stu-id="17c34-166">Created the `ProductCategories` table.</span></span> <span data-ttu-id="17c34-167">Istnieją trzy kolumny: `ProductCategoryID` (`int`, `IDENTITY`, `NOT NULL`), `CategoryName` (`nvarchar(50)`, `NOT NULL`) i `Active` (`bit`, `NOT NULL`).</span><span class="sxs-lookup"><span data-stu-id="17c34-167">There are three columns: `ProductCategoryID` (`int`, `IDENTITY`, `NOT NULL`), `CategoryName` (`nvarchar(50)`, `NOT NULL`), and `Active` (`bit`, `NOT NULL`).</span></span> <span data-ttu-id="17c34-168">Dodano ograniczenie PRIMARY KEY do `ProductCategoryID`i wartość domyślną 1, aby `Active`.</span><span class="sxs-lookup"><span data-stu-id="17c34-168">Added a primary key constraint to `ProductCategoryID`, and a default value of 1 to `Active`.</span></span> |

<span data-ttu-id="17c34-169">Istnieje szereg wad tego podejścia.</span><span class="sxs-lookup"><span data-stu-id="17c34-169">There are a number of drawbacks to this approach.</span></span> <span data-ttu-id="17c34-170">W przypadku uruchamiania nie ma żadnej nadzieję, że Automatyzacja.</span><span class="sxs-lookup"><span data-stu-id="17c34-170">For starters, there is no hope for automation.</span></span> <span data-ttu-id="17c34-171">Wszystkie te zmiany należy zastosować do bazy danych, na przykład podczas wdrażania aplikacji — Deweloper musi ręcznie zaimplementować każdą zmianę, pojedynczo.</span><span class="sxs-lookup"><span data-stu-id="17c34-171">Anytime these changes need to be applied to a database - such as when the application is deployed - a developer must manually implement each change, one at a time.</span></span> <span data-ttu-id="17c34-172">Ponadto, jeśli trzeba odtworzyć określoną wersję bazy danych z linii bazowej przy użyciu dziennika zmian, wykonanie tej operacji zajmie więcej czasu, ponieważ rozmiar dziennika zostanie powiększony.</span><span class="sxs-lookup"><span data-stu-id="17c34-172">Moreover, if you need to reconstruct a particular version of the database from the baseline using the change log, doing so will take more and more time as the size of the log grows.</span></span> <span data-ttu-id="17c34-173">Kolejną wadą tej metody jest to, że przejrzystość i poziom szczegółowości poszczególnych wpisów dziennika zmian jest pozostawiony do osoby rejestrującej zmianę.</span><span class="sxs-lookup"><span data-stu-id="17c34-173">Another drawback to this method is that the clarity and level of detail of each change log entry is left to the person recording the change.</span></span> <span data-ttu-id="17c34-174">W zespole z wieloma deweloperami niektóre mogą wprowadzać bardziej szczegółowe, bardziej czytelne lub dokładniejsze wpisy niż inne.</span><span class="sxs-lookup"><span data-stu-id="17c34-174">In a team with multiple developers some may make more detailed, more readable, or more precise entries than others.</span></span> <span data-ttu-id="17c34-175">Dostępne są również literówki i inne błędy związane z wpisami danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-175">Also, typos and other human-related data entry errors are possible.</span></span>

<span data-ttu-id="17c34-176">Główną zaletą dokumentowania zmian w bazie danych w programie Prose jest prostota.</span><span class="sxs-lookup"><span data-stu-id="17c34-176">The primary benefit of documenting the database changes in prose is simplicity.</span></span> <span data-ttu-id="17c34-177">Do tworzenia i modyfikowania obiektów bazy danych nie trzeba znać języka SQL.</span><span class="sxs-lookup"><span data-stu-id="17c34-177">You don t need familiarity with the SQL syntax for creating and altering database objects.</span></span> <span data-ttu-id="17c34-178">Zamiast tego można zarejestrować zmiany w Prose i zaimplementować je za pomocą graficznego interfejsu użytkownika SQL Server Management Studio s.</span><span class="sxs-lookup"><span data-stu-id="17c34-178">Instead, you can record the changes in prose and implement them through SQL Server Management Studio s graphical user interface.</span></span>

<span data-ttu-id="17c34-179">Utrzymywanie dziennika zmian w Prose to, że nie jest bardzo zaawansowane i nie będzie działać poprawnie z określonymi projektami, takimi jak te, które są duże w zakresie, mają częste zmiany w modelu danych lub wymagają wielu deweloperów.</span><span class="sxs-lookup"><span data-stu-id="17c34-179">Maintaining your change log in prose is, admittedly, not very sophisticated and won't work well with certain projects, such as ones that are large in scope, have frequent changes to the data model, or involve multiple developers.</span></span> <span data-ttu-id="17c34-180">Jednak te podejście zadziałało bardzo dobrze w małych projektach z jednym człowiekem, które mają tylko sporadyczne zmiany w modelu danych i w których nie ma silnego tła w składni SQL służącej do tworzenia i modyfikowania obiektów bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-180">But I have seen this approach work quite well in small, one-man projects that have only occasional changes to the data model and where the solo developer does not have a strong background in the SQL syntax for creating and altering database objects.</span></span>

> [!NOTE]
> <span data-ttu-id="17c34-181">Gdy informacje w dzienniku zmian są, technicznie, tylko do czasu wdrożenia, zalecamy zachowanie historii zmian.</span><span class="sxs-lookup"><span data-stu-id="17c34-181">While the information in the change log is, technically, only needed until deploy-time, I recommend keeping a history of changes.</span></span> <span data-ttu-id="17c34-182">Jednak zamiast utrzymywać pojedynczy, coraz większy plik dziennika zmian, należy rozważyć posiadanie innego pliku dziennika zmian dla każdej wersji bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-182">But rather than maintaining a single, ever growing change log file, consider having a different change log file for each database version.</span></span> <span data-ttu-id="17c34-183">Zwykle podczas wdrażania bazy danych warto ją umieścić w wersji.</span><span class="sxs-lookup"><span data-stu-id="17c34-183">Typically you will want to version the database each time it is deployed.</span></span> <span data-ttu-id="17c34-184">Utrzymując dziennik zmian, można rozpocząć od linii bazowej ponownie utworzyć dowolną wersję bazy danych, uruchamiając skrypty dziennika zmian od wersji 1 i kontynuując dostęp do wersji wymaganej do ponownego utworzenia.</span><span class="sxs-lookup"><span data-stu-id="17c34-184">By maintaining a log of change logs you can, starting from the baseline, recreate any database version by executing the change log scripts starting from version 1 and continuing until you reach the version you need to recreate.</span></span>

## <a name="recording-the-sql-change-statements"></a><span data-ttu-id="17c34-185">Rejestrowanie instrukcji zmiany SQL</span><span class="sxs-lookup"><span data-stu-id="17c34-185">Recording the SQL Change Statements</span></span>

<span data-ttu-id="17c34-186">Główną wadą dla utrzymania dziennika zmian w Prose jest brak automatyzacji.</span><span class="sxs-lookup"><span data-stu-id="17c34-186">The primary drawback of maintaining the change log in prose is the lack of automation.</span></span> <span data-ttu-id="17c34-187">W idealnym przypadku wdrożenie zmian w bazie danych w produkcyjnej bazie danych w czasie wdrażania może być tak proste, jak kliknięcie przycisku do uruchomienia skryptu, a nie ręczne wykonanie listy instrukcji.</span><span class="sxs-lookup"><span data-stu-id="17c34-187">Ideally, implementing the database changes to the production database at deploy-time would be as easy as clicking a button to execute a script rather than having to manually perform a list of instructions.</span></span> <span data-ttu-id="17c34-188">Taka Automatyzacja jest możliwa przez utrzymywanie dziennika zmian zawierającego te polecenia SQL służące do zmiany modelu danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-188">Such automation is possible by maintaining a change log that contains those SQL commands used to alter the data model.</span></span>

<span data-ttu-id="17c34-189">Składnia SQL zawiera kilka instrukcji dotyczących tworzenia i modyfikowania różnych obiektów bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-189">The SQL syntax includes a number of statements for creating and modifying various database objects.</span></span> <span data-ttu-id="17c34-190">Na przykład, [*instrukcja CREATE TABLE*](https://msdn.microsoft.com/library/ms174979.aspx), gdy jest wykonywana, tworzy nową tabelę z określonymi kolumnami i ograniczeniami.</span><span class="sxs-lookup"><span data-stu-id="17c34-190">For example, the [*CREATE TABLE statement*](https://msdn.microsoft.com/library/ms174979.aspx), when executed, creates a new table with the specified columns and constraints.</span></span> <span data-ttu-id="17c34-191">[*Instrukcja ALTER TABLE*](https://msdn.microsoft.com/library/ms190273.aspx) modyfikuje istniejącą tabelę, dodając, usuwając lub modyfikując jej kolumny lub ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="17c34-191">The [*ALTER TABLE statement*](https://msdn.microsoft.com/library/ms190273.aspx) modifies an existing table, adding, removing, or modifying its columns or constraints.</span></span> <span data-ttu-id="17c34-192">Istnieją również instrukcje tworzenia, modyfikowania i upuszczania indeksów, widoków, funkcji zdefiniowanych przez użytkownika, procedur składowanych, wyzwalaczy i innych obiektów bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-192">There are also statements to create, modify, and drop indexes, views, user-defined functions, stored procedures, triggers, and other database objects.</span></span>

<span data-ttu-id="17c34-193">Powracamy do naszego poprzedniego przykładu, obrazu podczas opracowywania już wdrożonej aplikacji Dodaj nową kolumnę do tabeli `Employees`, Usuń kolumnę z tabeli `Orders` i Dodaj nową tabelę (`ProductCategories`).</span><span class="sxs-lookup"><span data-stu-id="17c34-193">Returning to our earlier example, image that during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`).</span></span> <span data-ttu-id="17c34-194">Takie działania spowodują, że plik dziennika zmian z następującymi poleceniami SQL:</span><span class="sxs-lookup"><span data-stu-id="17c34-194">Such actions would result in a change log file with the following SQL commands:</span></span>

[!code-sql[Main](strategies-for-database-development-and-deployment-cs/samples/sample1.sql)]

<span data-ttu-id="17c34-195">Wypychanie tych zmian do produkcyjnej bazy danych podczas wdrażania jest operacją jednokrotnego kliknięcia: Otwórz SQL Server Management Studio, Połącz się z produkcyjną bazą danych, Otwórz nowe okno zapytania, wklej zawartość dziennika zmian i kliknij polecenie wykonaj, aby uruchomić skrypt.</span><span class="sxs-lookup"><span data-stu-id="17c34-195">Pushing these changes to the production database at deploy-time is a one-click operation: open SQL Server Management Studio, connect to your production database, open a New Query window, paste the contents of the change log, and click Execute to run the script.</span></span>

## <a name="using-a-comparison-tool-to-synchronize-the-data-models"></a><span data-ttu-id="17c34-196">Synchronizowanie modeli danych przy użyciu narzędzia do porównywania</span><span class="sxs-lookup"><span data-stu-id="17c34-196">Using a Comparison Tool to Synchronize the Data Models</span></span>

<span data-ttu-id="17c34-197">Dokumentowanie zmian w bazie danych w programie Prose jest łatwe, ale wdrożenie zmian wymaga, aby deweloper wprowadzał każdą zmianę w produkcyjnej bazie danych pojedynczo; dokumentowanie zmian poleceń SQL wprowadza te zmiany w produkcyjnej bazie danych tak proste i szybkie jak kliknięcie przycisku, ale wymaga uczenia i opanowania instrukcji SQL i składni w celu tworzenia i modyfikowania obiektów bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-197">Documenting database changes in prose is easy, but implementing the changes requires a developer to make each change on the production database one at a time; documenting the change SQL commands makes implementing those changes on the production database as easy and quick as clicking a button, but requires learning and mastering the SQL statements and syntax for creating and altering database objects.</span></span> <span data-ttu-id="17c34-198">Narzędzia do porównywania baz danych przyjmują najlepsze z obu metod i odrzucają najgorszą wartość.</span><span class="sxs-lookup"><span data-stu-id="17c34-198">Database comparison tools take the best from both approaches and discard the worst.</span></span>

<span data-ttu-id="17c34-199">Narzędzie do porównywania baz danych porównuje schemat lub dane dwóch baz danych i wyświetla raport podsumowujący pokazujący, jak bazy danych różnią się.</span><span class="sxs-lookup"><span data-stu-id="17c34-199">A database comparison tool compares the schema or data of two databases and displays a summary report showing you how the databases differ.</span></span> <span data-ttu-id="17c34-200">Po kliknięciu przycisku można wygenerować polecenia SQL służące do synchronizowania co najmniej jednego obiektu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-200">Then, with the click of a button, you can generate the SQL commands for synchronizing one or more database objects.</span></span> <span data-ttu-id="17c34-201">W Nutshell można użyć narzędzia do porównywania baz danych w celu porównania baz danych programistycznych i produkcyjnych w czasie wdrażania, generując plik zawierający polecenia SQL, które po wykonaniu spowodują zastosowanie zmian schematu produkcyjnej bazy danych w celu odzwierciedla schemat programu Development Database s.</span><span class="sxs-lookup"><span data-stu-id="17c34-201">In a nutshell, you can use a database comparison tool to compare the development and production databases at deploy-time, generating a file that contains the SQL commands that, when executed, will apply the changes to the production database s schema so that it mirrors the development database s schema.</span></span>

<span data-ttu-id="17c34-202">Istnieją różne narzędzia do porównywania baz danych innych firm oferowane przez wielu różnych dostawców.</span><span class="sxs-lookup"><span data-stu-id="17c34-202">There are a variety of third-party database comparison tools offered by many different vendors.</span></span> <span data-ttu-id="17c34-203">Jednym z takich przykładów jest [*porównanie SQL*](http://www.red-gate.com/products/SQL_Compare/)przez [*oprogramowanie czerwonej bramy*](http://www.red-gate.com/).</span><span class="sxs-lookup"><span data-stu-id="17c34-203">One such example is [*SQL Compare*](http://www.red-gate.com/products/SQL_Compare/), by [*Red Gate Software*](http://www.red-gate.com/).</span></span> <span data-ttu-id="17c34-204">Pozwól, aby zapoznać się z procesem korzystania z funkcji SQL Compare, porównując i zsynchronizuj schematy tworzenia i produkcji baz danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-204">Let s walk through the process of using SQL Compare to compare and synchronize the development and production databases schemas.</span></span>

> [!NOTE]
> <span data-ttu-id="17c34-205">W momencie zapisania aktualnej wersji programu SQL Compare w wersji 7,1, która stanowi $395 koszt wersji Standard.</span><span class="sxs-lookup"><span data-stu-id="17c34-205">At the time of this writing the current version of SQL Compare was version 7.1, with the Standard Edition costing $395.</span></span> <span data-ttu-id="17c34-206">Możesz kontynuować pracę, pobierając bezpłatną 14-dniową wersję próbną.</span><span class="sxs-lookup"><span data-stu-id="17c34-206">You can follow along by downloading a free 14-day trial.</span></span>

<span data-ttu-id="17c34-207">Po uruchomieniu programu SQL Compare zostanie otwarte okno dialogowe projekty porównawcze zawierające zapisane projekty porównywania SQL.</span><span class="sxs-lookup"><span data-stu-id="17c34-207">When SQL Compare starts the Comparison Projects dialog box opens, showing the saved SQL Compare projects.</span></span> <span data-ttu-id="17c34-208">Utwórz nowy projekt.</span><span class="sxs-lookup"><span data-stu-id="17c34-208">Create a new project.</span></span> <span data-ttu-id="17c34-209">Spowoduje to uruchomienie Kreatora konfiguracji projektu, który wyświetla informacje o bazach danych do porównania (patrz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="17c34-209">This launches the Project Configuration wizard, which prompts for information about the databases to compare (see Figure 1).</span></span> <span data-ttu-id="17c34-210">Wprowadź informacje dotyczące baz danych środowiska programistycznego i produkcyjnego.</span><span class="sxs-lookup"><span data-stu-id="17c34-210">Enter the information for the development and production environment databases.</span></span>

<span data-ttu-id="17c34-211">[![porównać programistyczne i produkcyjne bazy danych](strategies-for-database-development-and-deployment-cs/_static/image2.jpg)](strategies-for-database-development-and-deployment-cs/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="17c34-211">[![Compare the Development and Production Databases](strategies-for-database-development-and-deployment-cs/_static/image2.jpg)](strategies-for-database-development-and-deployment-cs/_static/image1.jpg)</span></span>

<span data-ttu-id="17c34-212">**Rysunek 1**. Porównanie deweloperskich i produkcyjnych baz danych ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](strategies-for-database-development-and-deployment-cs/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="17c34-212">**Figure 1**: Compare the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-cs/_static/image3.jpg))</span></span>

> [!NOTE]
> <span data-ttu-id="17c34-213">Jeśli baza danych środowiska programistycznego jest plikiem bazy danych programu SQL Express Edition w folderze `App_Data` witryny sieci Web, należy zarejestrować bazę danych na serwerze bazy danych SQL Server Express, aby wybrać ją z okna dialogowego pokazanego na rysunku 1.</span><span class="sxs-lookup"><span data-stu-id="17c34-213">If your development environment database is a SQL Express Edition database file in the `App_Data` folder of your website you will need to register the database in the SQL Server Express database server in order to select it from the dialog box shown in Figure 1.</span></span> <span data-ttu-id="17c34-214">Najprostszym sposobem na to jest otwarcie SQL Server Management Studio (SSMS), nawiązanie połączenia z serwerem bazy danych SQL Server Express i dołączenie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-214">The easiest way to accomplish this is to open SQL Server Management Studio (SSMS), connect to the SQL Server Express database server, and attach the database.</span></span> <span data-ttu-id="17c34-215">Jeśli na komputerze nie jest zainstalowany program SSMS, możesz pobrać i zainstalować [*wersję bezpłatna SQL Server 2008 Management Studio wersja podstawowa*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en).</span><span class="sxs-lookup"><span data-stu-id="17c34-215">If you do not have SSMS installed on your computer you can download and install the free [*SQL Server 2008 Management Studio Basic version*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en).</span></span>

<span data-ttu-id="17c34-216">Oprócz wyboru baz danych do porównania można także określić różne ustawienia porównywania na karcie Opcje. Jedną z opcji, którą można włączyć, jest "Ignoruj ograniczenia i nazwy indeksów".</span><span class="sxs-lookup"><span data-stu-id="17c34-216">In addition to selecting the databases to compare, you can also specify a variety of comparison settings from the Options tab. One option you may want to turn on is the "Ignore constraint and index names."</span></span> <span data-ttu-id="17c34-217">Odwołaj się do tego w poprzednim samouczku dodaliśmy obiekty bazy danych usług aplikacji do baz danych programistycznych i produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="17c34-217">Recall that in the preceding tutorial we added the application services database objects to the development and production databases.</span></span> <span data-ttu-id="17c34-218">W przypadku użycia narzędzia `aspnet_regsql.exe` do tworzenia tych obiektów w produkcyjnej bazie danych, należy sprawdzić, czy klucz podstawowy i unikatowe nazwy ograniczeń różnią się między programistyczną a produkcyjnymi bazami danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-218">If you used the `aspnet_regsql.exe` tool to create these objects on the production database then you will find that the primary key and unique constraint names differ between the development and production databases.</span></span> <span data-ttu-id="17c34-219">W związku z tym porównanie SQL będzie flagować wszystkie tabele usług aplikacji jako różne.</span><span class="sxs-lookup"><span data-stu-id="17c34-219">Consequently, SQL Compare will flag all of the application services tables as differing.</span></span> <span data-ttu-id="17c34-220">Możesz pozostawić niezaznaczone pole "Ignoruj ograniczenia i nazwy indeksów" oraz zsynchronizować nazwy ograniczeń lub poinstruować SQL Compare, aby zignorować te różnice.</span><span class="sxs-lookup"><span data-stu-id="17c34-220">You can either leave the "Ignore constraint and index names" unchecked and synchronize the constraint names, or instruct SQL Compare to ignore these differences.</span></span>

<span data-ttu-id="17c34-221">Po wybraniu baz danych do porównania (i przejrzeniu opcji porównania) kliknij przycisk Porównaj teraz, aby rozpocząć porównywanie.</span><span class="sxs-lookup"><span data-stu-id="17c34-221">After selecting the databases to compare (and reviewing the comparison options), click the Compare Now button to begin the comparison.</span></span> <span data-ttu-id="17c34-222">W ciągu następnych kilku sekund porównanie SQL przeanalizuje schematy dwóch baz danych i wygeneruje raport o tym, jak się różni.</span><span class="sxs-lookup"><span data-stu-id="17c34-222">Over the next several seconds, SQL Compare examines the schemas of the two databases and generates a report of how they differ.</span></span> <span data-ttu-id="17c34-223">Celowo całkowicie wprowadził pewne modyfikacje bazy danych programistycznych, aby pokazać, jak takie rozbieżności są notowane w interfejsie SQL Compare.</span><span class="sxs-lookup"><span data-stu-id="17c34-223">I ve purposefully made some modifications to the development database to show how such discrepancies are noted in the SQL Compare interface.</span></span> <span data-ttu-id="17c34-224">Jak pokazano na rysunku 2, dodaliśmy kolumnę `BirthDate` do tabeli `Authors`, usunięto kolumnę `ISBN` z tabeli `Books` i dodano nową tabelę, `Ratings`, która ma pozwolić użytkownikom na odwiedzenie stawki przeglądanych ksiąg.</span><span class="sxs-lookup"><span data-stu-id="17c34-224">As Figure 2 shows, I ve added a `BirthDate` column to the `Authors` table, removed the `ISBN` column from the `Books` table, and added a new table, `Ratings`, which is meant to let users visiting the site rate the reviewed books.</span></span>

> [!NOTE]
> <span data-ttu-id="17c34-225">Zmiany modelu danych wprowadzone w tym samouczku zostały wykonane w celu zilustrowania użycia narzędzia do porównywania baz danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-225">The data model changes made in this tutorial were done to illustrate using a database comparison tool.</span></span> <span data-ttu-id="17c34-226">Te zmiany w bazie danych nie będą znajdować się w kolejnych samouczkach.</span><span class="sxs-lookup"><span data-stu-id="17c34-226">You will not find these changes in the database in future tutorials.</span></span>

<span data-ttu-id="17c34-227">[![Compare SQL zawiera różnice między opracowywaniem a produkcyjnymi bazami danych](strategies-for-database-development-and-deployment-cs/_static/image5.jpg)](strategies-for-database-development-and-deployment-cs/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="17c34-227">[![SQL Compare Lists the Differences Between the Development and Production Databases](strategies-for-database-development-and-deployment-cs/_static/image5.jpg)](strategies-for-database-development-and-deployment-cs/_static/image4.jpg)</span></span>

<span data-ttu-id="17c34-228">**Rysunek 2**. Porównanie SQL zawiera różnice między opracowywaniem a produkcyjnymi bazami danych ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](strategies-for-database-development-and-deployment-cs/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="17c34-228">**Figure 2**: SQL Compare Lists the Differences Between the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-cs/_static/image6.jpg))</span></span>

<span data-ttu-id="17c34-229">Funkcja SQL Compare dzieli obiekty bazy danych na grupy, szybko pokazując, które obiekty istnieją w obu bazach danych, ale różnią się, które obiekty istnieją w jednej bazie danych, ale nie inne, i które obiekty są identyczne.</span><span class="sxs-lookup"><span data-stu-id="17c34-229">SQL Compare breaks down the database objects into groups, quickly showing you what objects exist in both databases but are different, which objects exist in one database but not the other, and which objects are identical.</span></span> <span data-ttu-id="17c34-230">Jak widać, istnieją dwa obiekty, które istnieją w obu bazach danych, ale są różne: tabela `Authors`, do której dodano kolumnę, a tabela `Books`, która została usunięta.</span><span class="sxs-lookup"><span data-stu-id="17c34-230">As you can see, there are two objects that exist in both databases but are different: the `Authors` table, which had a column added, and the `Books` table, which had one removed.</span></span> <span data-ttu-id="17c34-231">Istnieje jeden obiekt znajdujący się tylko w bazie danych programistycznych, a mianowicie nowo utworzona tabela `Ratings`.</span><span class="sxs-lookup"><span data-stu-id="17c34-231">There is one object that exists only in the development database, namely the newly created `Ratings` table.</span></span> <span data-ttu-id="17c34-232">I istnieją 117 obiektów, które są identyczne w obu bazach danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-232">And there are 117 objects that are identical in both databases.</span></span>

<span data-ttu-id="17c34-233">Wybranie obiektu bazy danych powoduje wyświetlenie okna różnice SQL, które pokazuje, w jaki sposób te obiekty różnią się.</span><span class="sxs-lookup"><span data-stu-id="17c34-233">Selecting a database object displays the SQL Differences window, which shows how these objects differ.</span></span> <span data-ttu-id="17c34-234">Okno różnice SQL wyświetlane w dolnej części rysunku 2 oznacza, że tabela `Authors` w bazie danych programistycznych ma kolumnę `BirthDate`, która nie znajduje się w tabeli `Authors` w produkcyjnej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-234">The SQL Differences window, displayed at the bottom in Figure 2, highlights that the `Authors` table in the development database has the `BirthDate` column, which is not found in the `Authors` table on the production database.</span></span>

<span data-ttu-id="17c34-235">Po przejrzeniu różnic i wybraniu obiektów, które chcesz synchronizować, następnym krokiem jest wygenerowanie poleceń SQL potrzebnych do zaktualizowania schematu produkcyjnej bazy danych w celu dopasowania go do programu Development Database.</span><span class="sxs-lookup"><span data-stu-id="17c34-235">After reviewing the differences and selecting which objects you want to synchronize, the next step is to generate the SQL commands needed to update the production database s schema to match the development database.</span></span> <span data-ttu-id="17c34-236">Jest to realizowane za pomocą Kreatora synchronizacji.</span><span class="sxs-lookup"><span data-stu-id="17c34-236">This is accomplished through the Synchronization Wizard.</span></span> <span data-ttu-id="17c34-237">Kreator synchronizacji potwierdza, jakie obiekty są synchronizowane i podsumowuje plan akcji (patrz rysunek 3).</span><span class="sxs-lookup"><span data-stu-id="17c34-237">The Synchronization Wizard confirms what objects to synchronize and summarizes the action plan (see Figure 3).</span></span> <span data-ttu-id="17c34-238">Możesz natychmiast zsynchronizować bazy danych lub wygenerować skrypt z poleceniami SQL, które mogą być uruchamiane na wypoczynek.</span><span class="sxs-lookup"><span data-stu-id="17c34-238">You can synchronize the databases immediately or generate a script with the SQL commands that can be run at your leisure.</span></span>

<span data-ttu-id="17c34-239">[![użyć Kreatora synchronizacji do zsynchronizowania schematów baz danych](strategies-for-database-development-and-deployment-cs/_static/image8.jpg)](strategies-for-database-development-and-deployment-cs/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="17c34-239">[![Use the Synchronization Wizard to Synchronize Your Databases Schemas](strategies-for-database-development-and-deployment-cs/_static/image8.jpg)](strategies-for-database-development-and-deployment-cs/_static/image7.jpg)</span></span>

<span data-ttu-id="17c34-240">**Rysunek 3**. synchronizowanie schematów baz danych za pomocą Kreatora synchronizacji ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](strategies-for-database-development-and-deployment-cs/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="17c34-240">**Figure 3**: Use the Synchronization Wizard to Synchronize Your Databases Schemas ([Click to view full-size image](strategies-for-database-development-and-deployment-cs/_static/image9.jpg))</span></span>

<span data-ttu-id="17c34-241">Narzędzia do porównywania baz danych, takie jak Red bramy oprogramowanie SQL, porównują stosowanie zmian do schematu bazy danych programistycznych w produkcyjnej bazie danych, jak to jest proste i klikanie.</span><span class="sxs-lookup"><span data-stu-id="17c34-241">Database comparison tools like Red Gate Software s SQL Compare make applying the changes to the development database schema to the production database as easy as point and click.</span></span>

> [!NOTE]
> <span data-ttu-id="17c34-242">Porównania SQL porównują i synchronizują dwa *schematy*baz danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-242">SQL Compare compares and synchronizes two databases *schemas*.</span></span> <span data-ttu-id="17c34-243">Niestety, nie porównują i nie synchronizują danych w dwóch tabelach baz danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-243">Unfortunately, it does not compare and synchronize the data within two databases tables.</span></span> <span data-ttu-id="17c34-244">Oprogramowanie Red Gate oferuje produkt o nazwie [*SQL Data Compare*](http://www.red-gate.com/products/SQL_Data_Compare/) , który porównuje i synchronizuje dane między dwiema bazami danych, ale jest osobnym produktem od porównania z programem SQL i kosztem innego $395.</span><span class="sxs-lookup"><span data-stu-id="17c34-244">Red Gate Software does offer a product named [*SQL Data Compare*](http://www.red-gate.com/products/SQL_Data_Compare/) that compares and synchronizes the data between two databases, but it is a separate product from SQL Compare and costs another $395.</span></span>

## <a name="taking-the-application-offline-during-deployment"></a><span data-ttu-id="17c34-245">Przełączanie aplikacji do trybu offline podczas wdrażania</span><span class="sxs-lookup"><span data-stu-id="17c34-245">Taking the Application Offline During Deployment</span></span>

<span data-ttu-id="17c34-246">Po zapoznaniu się z tymi samouczkami wdrożenie to proces, który obejmuje wiele czynności: kopiowanie stron ASP.NET, stron wzorcowych, plików CSS, plików JavaScript, obrazów i innych niezbędnych zawartości ze środowiska programistycznego do produkcji naturalne Kopiowanie informacji o konfiguracji specyficznej dla środowiska produkcyjnego, w razie konieczności; i zastosowanie zmian w modelu danych od momentu ostatniego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="17c34-246">As we ve seen throughout these tutorials, deployment is a process that involves multiple steps: copying the ASP.NET pages, master pages, CSS files, JavaScript files, images, and other necessary content from the development environment to the production environment; copying up the production environment-specific configuration information, if needed; and applying the changes to the data model since the last deployment.</span></span> <span data-ttu-id="17c34-247">W zależności od liczby plików i złożoności zmian w bazie danych czynności te można wykonać w dowolnym miejscu od kilku sekund do kilku minut.</span><span class="sxs-lookup"><span data-stu-id="17c34-247">Depending on the number of files and the complexity of your database changes, these steps can take anywhere from a few seconds to several minutes to complete.</span></span> <span data-ttu-id="17c34-248">W tym oknie aplikacja sieci Web jest w strumieniu, a użytkownicy odwiedzający witrynę mogą napotkać błędy lub nieoczekiwane zachowanie.</span><span class="sxs-lookup"><span data-stu-id="17c34-248">During this window the web application is in flux and users visiting the site may experience errors or unexpected behavior.</span></span>

<span data-ttu-id="17c34-249">Podczas wdrażania witryny sieci Web najlepiej przełączyć ją w tryb offline, dopóki wdrożenie nie zostanie ukończone.</span><span class="sxs-lookup"><span data-stu-id="17c34-249">When deploying a website it is best to take the web application "offline" until deployment has completed.</span></span> <span data-ttu-id="17c34-250">Przełączenie aplikacji do trybu offline (po zakończeniu procesu wdrażania) jest tak proste jak w przypadku przekazywania pliku, a następnie jego usunięcia.</span><span class="sxs-lookup"><span data-stu-id="17c34-250">Taking the application offline (and bringing it back up once the deployment process has finished) is as easy as uploading a file and then deleting it.</span></span> <span data-ttu-id="17c34-251">Począwszy od ASP.NET 2,0, sama obecność pliku o nazwie `app_offline.htm` w katalogu głównym aplikacji obejmuje całą witrynę sieci Web "offline".</span><span class="sxs-lookup"><span data-stu-id="17c34-251">Starting with ASP.NET 2.0, the mere presence of a file named `app_offline.htm` in the application s root directory takes the entire website "offline."</span></span> <span data-ttu-id="17c34-252">Każde żądanie do strony ASP.NET w tej witrynie jest automatycznie odpowiedziane przy użyciu zawartości pliku `app_offline.htm`.</span><span class="sxs-lookup"><span data-stu-id="17c34-252">Any request to an ASP.NET page on that site is automatically responded with the contents of the `app_offline.htm` file.</span></span> <span data-ttu-id="17c34-253">Po usunięciu tego pliku Aplikacja wróci do trybu online.</span><span class="sxs-lookup"><span data-stu-id="17c34-253">Once that file is removed, the application comes back online.</span></span>

<span data-ttu-id="17c34-254">Przełączenie aplikacji do trybu offline podczas wdrażania, jest tak proste jak przekazywanie pliku `app_offline.htm` do katalogu głównego środowiska produkcyjnego, przed rozpoczęciem procesu wdrażania, a następnie usunięciem go (lub zmiana nazwy na inny) po zakończeniu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="17c34-254">Taking an application offline during deployment, then, is as simple as uploading an `app_offline.htm` file to the production environment s root directory prior to beginning the deployment process and then deleting it (or renaming it to something else) once deployment is complete.</span></span> <span data-ttu-id="17c34-255">Aby uzyskać więcej informacji na temat tej techniki, zapoznaj się z artykułem John Peterson s, pobierając [*aplikację ASP.NET w tryb offline*](http://www.15seconds.com/issue/061207.htm).</span><span class="sxs-lookup"><span data-stu-id="17c34-255">For more information on this technique refer to John Peterson s article, Taking an [*ASP.NET Application Offline*](http://www.15seconds.com/issue/061207.htm).</span></span>

## <a name="summary"></a><span data-ttu-id="17c34-256">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="17c34-256">Summary</span></span>

<span data-ttu-id="17c34-257">Główne wyzwanie związane z wdrażaniem centrów aplikacji opartych na danych na całym świecie wdrażania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-257">The main challenge in deploying a data-driven application centers around deploying the database.</span></span> <span data-ttu-id="17c34-258">Ponieważ istnieją dwie wersje bazy danych — jeden w środowisku deweloperskim i jeden w środowisku produkcyjnym — te dwa schematy baz danych mogą stać się niezsynchronizowane po dodaniu nowych funkcji podczas opracowywania.</span><span class="sxs-lookup"><span data-stu-id="17c34-258">Because there are two versions of the database - one in the development environment and one in the production environment - these two databases schemas can become out of sync as new features are added in development.</span></span> <span data-ttu-id="17c34-259">Co więcej, ponieważ produkcyjna baza danych jest wypełniana rzeczywistymi danymi od prawdziwych użytkowników, nie można zastąpić produkcyjnej bazy danych zmodyfikowaną bazą danych programistycznej, taką jak można wdrożyć pliki wchodzące w skład aplikacji (ASP.NET strony, Pliki obrazów itd.).</span><span class="sxs-lookup"><span data-stu-id="17c34-259">What s more, because the production database as being populated with real data from real users, you cannot overwrite the production database with the modified development database like you can when deploying the files that make up the application (the ASP.NET pages, image files, and so forth).</span></span> <span data-ttu-id="17c34-260">Zamiast tego wdrożenie bazy danych wiąże się z implementacją precyzyjnego zestawu zmian wprowadzonych w bazie danych programistycznych w produkcyjnej bazie danych od momentu ostatniego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="17c34-260">Instead, deploying a database entails implementing the precise set of changes made to the development database on the production database since the last deployment.</span></span>

<span data-ttu-id="17c34-261">Ten samouczek ogląda trzy techniki do obsługi i stosowania dziennika zmian w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-261">This tutorial looked at three techniques for maintaining and applying a log of database changes.</span></span> <span data-ttu-id="17c34-262">Najprostszym podejściem jest zapisanie zmian w Prose.</span><span class="sxs-lookup"><span data-stu-id="17c34-262">The simplest approach is to record the changes in prose.</span></span> <span data-ttu-id="17c34-263">Chociaż ta taktyką wprowadza te zmiany w produkcyjnej bazie danych w procesie ręcznym, nie wymaga znajomości poleceń SQL dotyczących tworzenia i modyfikowania obiektów bazy danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-263">While this tactic makes implementing these changes on the production database a manual process, it does not require knowledge of the SQL commands for creating and altering database objects.</span></span> <span data-ttu-id="17c34-264">Bardziej zaawansowaną metodę, która jest znacznie bardziej palatable w większych projektach lub projektach z wieloma deweloperami, polega na zarejestrowaniu zmian w postaci szeregu poleceń SQL.</span><span class="sxs-lookup"><span data-stu-id="17c34-264">A more sophisticated approach, and one that is much more palatable in larger projects or projects with multiple developers, is to record the changes as a series of SQL commands.</span></span> <span data-ttu-id="17c34-265">Znacznie hastens te zmiany w docelowej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-265">This greatly hastens rolling out these changes to the target database.</span></span> <span data-ttu-id="17c34-266">Najlepsze z obu metod można osiągnąć przy użyciu narzędzia do porównywania baz danych, takiego jak porównanie oprogramowania SQL z czerwonym bramą.</span><span class="sxs-lookup"><span data-stu-id="17c34-266">The best of both approaches can be achieved by using a database comparison tool, such as Red Gate Software s SQL Compare.</span></span>

<span data-ttu-id="17c34-267">Ten samouczek zawiera wprowadzenie do wdrażania aplikacji opartej na danych.</span><span class="sxs-lookup"><span data-stu-id="17c34-267">This tutorial concludes our focus on deploying a data-driven application.</span></span> <span data-ttu-id="17c34-268">Następny zestaw samouczków analizuje, jak odpowiedzieć na błędy w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="17c34-268">The next set of tutorials looks at how to respond to errors in the production environment.</span></span> <span data-ttu-id="17c34-269">Dowiesz się, jak wyświetlić przyjazną stronę błędów zamiast żółtego ekranu zgonu.</span><span class="sxs-lookup"><span data-stu-id="17c34-269">We'll look at how to display a friendly error page rather instead of the Yellow Screen of Death.</span></span> <span data-ttu-id="17c34-270">Zobaczymy, jak zarejestrować szczegóły błędu s i jak ostrzec o wystąpieniu błędów.</span><span class="sxs-lookup"><span data-stu-id="17c34-270">And we'll see how to log the error s details and how to alert you when such errors occur.</span></span>

<span data-ttu-id="17c34-271">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="17c34-271">Happy Programming!</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="17c34-272">[Poprzednie](configuring-a-website-that-uses-application-services-cs.md)
> [dalej](displaying-a-custom-error-page-cs.md)</span><span class="sxs-lookup"><span data-stu-id="17c34-272">[Previous](configuring-a-website-that-uses-application-services-cs.md)
[Next](displaying-a-custom-error-page-cs.md)</span></span>

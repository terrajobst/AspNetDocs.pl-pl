---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/displaying-a-custom-error-page-cs
title: Wyświetlanie niestandardowej strony błędu (C#) | Microsoft Docs
author: rick-anderson
description: Co widzi użytkownik, gdy wystąpi błąd w czasie wykonywania w aplikacji sieci Web ASP.NET? Odpowiedź zależy od konfiguracji&gt; &lt;customErrors witryny sieci Web...
ms.author: riande
ms.date: 06/09/2009
ms.assetid: cb061642-faf3-41b2-9372-69e13444d458
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/displaying-a-custom-error-page-cs
msc.type: authoredcontent
ms.openlocfilehash: c1ff4c112b9a489b8fb9ef3443663cd71eda7965
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78524207"
---
# <a name="displaying-a-custom-error-page-c"></a><span data-ttu-id="d77f9-104">Wyświetlanie niestandardowej strony błędu (C#)</span><span class="sxs-lookup"><span data-stu-id="d77f9-104">Displaying a Custom Error Page (C#)</span></span>

<span data-ttu-id="d77f9-105">przez [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="d77f9-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="d77f9-106">[Pobierz kod](https://download.microsoft.com/download/1/0/C/10CC829F-A808-4302-97D3-59989B8F9C01/ASPNET_Hosting_Tutorial_11_CS.zip) lub [Pobierz plik PDF](https://download.microsoft.com/download/5/C/5/5C57DB8C-5DEA-4B3A-92CA-4405544D313B/aspnet_tutorial11_CustomErrors_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="d77f9-106">[Download Code](https://download.microsoft.com/download/1/0/C/10CC829F-A808-4302-97D3-59989B8F9C01/ASPNET_Hosting_Tutorial_11_CS.zip) or [Download PDF](https://download.microsoft.com/download/5/C/5/5C57DB8C-5DEA-4B3A-92CA-4405544D313B/aspnet_tutorial11_CustomErrors_cs.pdf)</span></span>

> <span data-ttu-id="d77f9-107">Co widzi użytkownik, gdy wystąpi błąd w czasie wykonywania w aplikacji sieci Web ASP.NET?</span><span class="sxs-lookup"><span data-stu-id="d77f9-107">What does the user see when a runtime error occurs in an ASP.NET web application?</span></span> <span data-ttu-id="d77f9-108">Odpowiedź zależy od konfiguracji&gt; &lt;customErrors witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d77f9-108">The answer depends on how the website's &lt;customErrors&gt; configuration.</span></span> <span data-ttu-id="d77f9-109">Domyślnie użytkownicy są wyświetlani z nieszczegółowym ekranem, który zażądał błędu w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="d77f9-109">By default, users are shown an unsightly yellow screen proclaiming that a runtime error has occurred.</span></span> <span data-ttu-id="d77f9-110">W tym samouczku pokazano, jak dostosować te ustawienia, aby wyświetlić stronę błędu niestandardowego atrakcyjne, która pasuje do wyglądu i działania Twojej witryny.</span><span class="sxs-lookup"><span data-stu-id="d77f9-110">This tutorial shows how to customize these settings to display an aesthetically-pleasing custom error page that matches your site's look and feel.</span></span>

## <a name="introduction"></a><span data-ttu-id="d77f9-111">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="d77f9-111">Introduction</span></span>

<span data-ttu-id="d77f9-112">W idealnym świecie nie będzie żadnych błędów w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="d77f9-112">In a perfect world there would be no run-time errors.</span></span> <span data-ttu-id="d77f9-113">Programiści mogą napisać kod z nary błędu i z niezawodną walidacją danych wejściowych użytkownika, a zasoby zewnętrzne, takie jak serwery baz danych i serwery poczty e-mail, nigdy nie przechodzą do trybu offline.</span><span class="sxs-lookup"><span data-stu-id="d77f9-113">Programmers would write code with nary a bug and with robust user input validation, and external resources like database servers and email servers would never go offline.</span></span> <span data-ttu-id="d77f9-114">Oczywiście błędy w rzeczywistości są nieuniknione.</span><span class="sxs-lookup"><span data-stu-id="d77f9-114">Of course, in reality errors are inevitable.</span></span> <span data-ttu-id="d77f9-115">Klasy w .NET Framework sygnalizujący błąd przez zgłaszanie wyjątku.</span><span class="sxs-lookup"><span data-stu-id="d77f9-115">The classes in the .NET Framework signal an error by throwing an exception.</span></span> <span data-ttu-id="d77f9-116">Na przykład wywołanie metody Open obiektu SqlConnection nawiązuje połączenie z bazą danych określoną przez parametry połączenia.</span><span class="sxs-lookup"><span data-stu-id="d77f9-116">For example, calling a SqlConnection object's Open method establishes a connection to the database specified by a connection string.</span></span> <span data-ttu-id="d77f9-117">Jeśli jednak baza danych nie działa lub jeśli poświadczenia w parametrach połączenia są nieprawidłowe, Metoda Otwórz zgłosi `SqlException`.</span><span class="sxs-lookup"><span data-stu-id="d77f9-117">However, if the database is down or if the credentials in the connection string are invalid then the Open method throws a `SqlException`.</span></span> <span data-ttu-id="d77f9-118">Wyjątki mogą być obsługiwane przez użycie bloków `try/catch/finally`.</span><span class="sxs-lookup"><span data-stu-id="d77f9-118">Exceptions can be handled by the use of `try/catch/finally` blocks.</span></span> <span data-ttu-id="d77f9-119">Jeśli kod w bloku `try` zgłasza wyjątek, formant zostanie przeniesiony do odpowiedniego bloku catch, w którym deweloper może próbować odzyskać sprawność po błędzie.</span><span class="sxs-lookup"><span data-stu-id="d77f9-119">If code within a `try` block throws an exception, control is transferred to the appropriate catch block where the developer can attempt to recover from the error.</span></span> <span data-ttu-id="d77f9-120">Jeśli nie ma pasującego bloku catch lub kod, który zgłosił wyjątek, nie znajduje się w bloku try, wyjątek percolates stos wywołań w wyszukiwaniu bloków `try/catch/finally`.</span><span class="sxs-lookup"><span data-stu-id="d77f9-120">If there is no matching catch block, or if the code that threw the exception is not in a try block, the exception percolates up the call stack in search of `try/catch/finally` blocks.</span></span>

<span data-ttu-id="d77f9-121">Jeśli wyjątek bąbelkowy cały sposób do środowiska uruchomieniowego ASP.NET bez obsługi, zostanie wywołane [zdarzenie`Error`](https://msdn.microsoft.com/library/system.web.httpapplication.error.aspx) [klasy`HttpApplication`](https://msdn.microsoft.com/library/system.web.httpapplication.aspx)i zostanie wyświetlona skonfigurowana *strona błędu* .</span><span class="sxs-lookup"><span data-stu-id="d77f9-121">If the exception bubbles all the way up to the ASP.NET runtime without being handled, the [`HttpApplication` class](https://msdn.microsoft.com/library/system.web.httpapplication.aspx)'s [`Error` event](https://msdn.microsoft.com/library/system.web.httpapplication.error.aspx) is raised and the configured *error page* is displayed.</span></span> <span data-ttu-id="d77f9-122">Domyślnie ASP.NET wyświetla stronę błędu, która jest affectionately, określana jako [żółty ekran zgonu](http://en.wikipedia.org/wiki/Yellow_Screen_of_Death#Yellow) (YSOD).</span><span class="sxs-lookup"><span data-stu-id="d77f9-122">By default, ASP.NET displays an error page that is affectionately referred to as the [Yellow Screen of Death](http://en.wikipedia.org/wiki/Yellow_Screen_of_Death#Yellow) (YSOD).</span></span> <span data-ttu-id="d77f9-123">Istnieją dwie wersje YSOD: jeden pokazuje szczegóły wyjątku, ślad stosu i inne informacje pomocne dla deweloperów debugujący aplikację (patrz **rysunek 1**); Druga po prostu wskazuje, że wystąpił błąd czasu wykonywania (patrz **rysunek 2**).</span><span class="sxs-lookup"><span data-stu-id="d77f9-123">There are two versions of the YSOD: one shows the exception details, a stack trace, and other information helpful to developers debugging the application (see **Figure 1**); the other simply states that there was a run-time error (see **Figure 2**).</span></span>

<span data-ttu-id="d77f9-124">Szczegóły wyjątku YSOD są bardzo pomocne w przypadku deweloperów, którzy debugują aplikację, ale przedstawiają YSOD użytkownikom końcowym.</span><span class="sxs-lookup"><span data-stu-id="d77f9-124">The exception details YSOD is quite helpful for developers debugging the application, but showing a YSOD to end users is tacky and unprofessional.</span></span> <span data-ttu-id="d77f9-125">Zamiast tego użytkownicy końcowi powinni zostać przekierowani do strony błędu, która utrzymuje wygląd witryny i będzie działać z większą liczbą Prose przyjaznych dla użytkownika opisującą sytuację.</span><span class="sxs-lookup"><span data-stu-id="d77f9-125">Instead, end users should be taken to an error page that maintains the site's look and feel with more user-friendly prose describing the situation.</span></span> <span data-ttu-id="d77f9-126">Dobrym komunikatem jest to, że tworzenie takiej niestandardowej strony błędu jest bardzo proste.</span><span class="sxs-lookup"><span data-stu-id="d77f9-126">The good news is that creating such a custom error page is quite easy.</span></span> <span data-ttu-id="d77f9-127">Ten samouczek rozpoczyna się od strony ASP. Różne strony błędów w sieci.</span><span class="sxs-lookup"><span data-stu-id="d77f9-127">This tutorial starts with a look at ASP.NET's different error pages.</span></span> <span data-ttu-id="d77f9-128">Następnie pokazano, jak skonfigurować aplikację sieci Web, aby pokazywała użytkownikom niestandardową stronę błędu w przypadku błędu.</span><span class="sxs-lookup"><span data-stu-id="d77f9-128">It then shows how to configure the web application to show users a custom error page in the face of an error.</span></span>

### <a name="examining-the-three-types-of-error-pages"></a><span data-ttu-id="d77f9-129">Badanie trzech typów stron błędów</span><span class="sxs-lookup"><span data-stu-id="d77f9-129">Examining the Three Types of Error Pages</span></span>

<span data-ttu-id="d77f9-130">Gdy wystąpi nieobsługiwany wyjątek w aplikacji ASP.NET, zostanie wyświetlony jeden z trzech typów stron błędu:</span><span class="sxs-lookup"><span data-stu-id="d77f9-130">When an unhandled exception arises in an ASP.NET application one of three types of error pages is displayed:</span></span>

- <span data-ttu-id="d77f9-131">Żółty ekran Szczegóły wyjątku strony błędu śmierci,</span><span class="sxs-lookup"><span data-stu-id="d77f9-131">The Exception Details Yellow Screen of Death error page,</span></span>
- <span data-ttu-id="d77f9-132">Żółty ekran błędu środowiska uruchomieniowego strony błędu śmierci lub</span><span class="sxs-lookup"><span data-stu-id="d77f9-132">The Runtime Error Yellow Screen of Death error page, or</span></span>
- <span data-ttu-id="d77f9-133">Niestandardowa strona błędu</span><span class="sxs-lookup"><span data-stu-id="d77f9-133">A custom error page</span></span>

<span data-ttu-id="d77f9-134">Najbardziej popularnym projektantem strony błędów są szczegóły wyjątku YSOD.</span><span class="sxs-lookup"><span data-stu-id="d77f9-134">The error page developers are most familiar with is the Exception Details YSOD.</span></span> <span data-ttu-id="d77f9-135">Domyślnie ta strona jest wyświetlana użytkownikom, którzy znajdują się lokalnie, i w związku z tym jest stroną, która jest wyświetlana, gdy wystąpi błąd podczas testowania lokacji w środowisku deweloperskim.</span><span class="sxs-lookup"><span data-stu-id="d77f9-135">By default, this page is displayed to users who are visiting locally and therefore is the page that you see when an error occurs when testing the site in the development environment.</span></span> <span data-ttu-id="d77f9-136">Ponieważ jego nazwa to oznacza, szczegóły wyjątku YSOD zawierają szczegóły dotyczące wyjątku — typu, komunikatu i śladu stosu.</span><span class="sxs-lookup"><span data-stu-id="d77f9-136">As its name implies, the Exception Details YSOD provides details about the exception - the type, the message, and the stack trace.</span></span> <span data-ttu-id="d77f9-137">Co więcej, jeśli wyjątek został zgłoszony przez kod w klasie z kodem ASP.NET strony i jeśli aplikacja jest skonfigurowana do debugowania, YSOD szczegóły wyjątku również pokażą ten wiersz kodu (oraz kilka wierszy kodu powyżej i poniżej niego).</span><span class="sxs-lookup"><span data-stu-id="d77f9-137">What's more, if the exception was raised by code in your ASP.NET page's code-behind class and if the application is configured for debugging then the Exception Details YSOD will also show this line of code (and a few lines of code above and below it).</span></span>

<span data-ttu-id="d77f9-138">**Rysunek 1** przedstawia stronę YSOD szczegóły wyjątku.</span><span class="sxs-lookup"><span data-stu-id="d77f9-138">**Figure 1** shows the Exception Details YSOD page.</span></span> <span data-ttu-id="d77f9-139">Zanotuj adres URL w oknie adresu przeglądarki: `http://localhost:62275/Genre.aspx?ID=foo`.</span><span class="sxs-lookup"><span data-stu-id="d77f9-139">Note the URL in the browser's address window: `http://localhost:62275/Genre.aspx?ID=foo`.</span></span> <span data-ttu-id="d77f9-140">Odwołaj się, że strona `Genre.aspx` wyświetla przeglądy książki w określonym gatunku.</span><span class="sxs-lookup"><span data-stu-id="d77f9-140">Recall that the `Genre.aspx` page lists the book reviews in a particular genre.</span></span> <span data-ttu-id="d77f9-141">Wymaga, aby wartość `GenreId` (`uniqueidentifier`) była przenoszona przez ciąg QueryString; na przykład odpowiedni adres URL służący do wyświetlania recenzji fikcyjnej jest `Genre.aspx?ID=7683ab5d-4589-4f03-a139-1c26044d0146`.</span><span class="sxs-lookup"><span data-stu-id="d77f9-141">It requires that `GenreId` value (a `uniqueidentifier`) be passed through the querystring; for example, the appropriate URL to view the fiction reviews is `Genre.aspx?ID=7683ab5d-4589-4f03-a139-1c26044d0146`.</span></span> <span data-ttu-id="d77f9-142">Jeśli wartość nie`uniqueidentifier` jest przenoszona za pomocą ciągu QueryString (na przykład "foo"), zgłaszany jest wyjątek.</span><span class="sxs-lookup"><span data-stu-id="d77f9-142">If a non-`uniqueidentifier` value is passed in through the querystring (such as "foo") an exception is thrown.</span></span>

> [!NOTE]
> <span data-ttu-id="d77f9-143">Aby odtworzyć ten błąd w demonstracyjnej aplikacji sieci Web dostępnej do pobrania, możesz albo odwiedzić `Genre.aspx?ID=foo` bezpośrednio, albo kliknąć link "Generuj błąd w czasie wykonywania" w `Default.aspx`.</span><span class="sxs-lookup"><span data-stu-id="d77f9-143">To reproduce this error in the demo web application available for download you can either visit `Genre.aspx?ID=foo` directly or click the "Generate a Runtime Error" link in `Default.aspx`.</span></span>

<span data-ttu-id="d77f9-144">Zanotuj informacje o wyjątku przedstawione na **rysunku 1**.</span><span class="sxs-lookup"><span data-stu-id="d77f9-144">Note the exception information presented in **Figure 1**.</span></span> <span data-ttu-id="d77f9-145">Komunikat o wyjątku "Konwersja ciągu znaków na unikatowy identyfikator" nie powiodła się w górnej części strony.</span><span class="sxs-lookup"><span data-stu-id="d77f9-145">The exception message, "Conversion failed when converting from a character string to uniqueidentifier" is present at the top of the page.</span></span> <span data-ttu-id="d77f9-146">Typ wyjątku, `System.Data.SqlClient.SqlException`, jest również wyświetlany.</span><span class="sxs-lookup"><span data-stu-id="d77f9-146">The type of the exception, `System.Data.SqlClient.SqlException`, is listed, as well.</span></span> <span data-ttu-id="d77f9-147">Istnieje również ślad stosu.</span><span class="sxs-lookup"><span data-stu-id="d77f9-147">There's also the stack trace.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image2.png)](displaying-a-custom-error-page-cs/_static/image1.png)

<span data-ttu-id="d77f9-148">**Rysunek 1**. Szczegóły wyjątku YSOD zawierają informacje o wyjątku</span><span class="sxs-lookup"><span data-stu-id="d77f9-148">**Figure 1**: The Exception Details YSOD Includes Information About the Exception</span></span>  
 <span data-ttu-id="d77f9-149">([Kliknij, aby wyświetlić obraz o pełnym rozmiarze](displaying-a-custom-error-page-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="d77f9-149">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image3.png))</span></span>

<span data-ttu-id="d77f9-150">Innym typem YSOD jest błąd czasu wykonywania YSOD i przedstawiono na **rysunku 2**.</span><span class="sxs-lookup"><span data-stu-id="d77f9-150">The other type of YSOD is the Runtime Error YSOD, and is shown in **Figure 2**.</span></span> <span data-ttu-id="d77f9-151">Błąd czasu wykonywania YSOD informuje gościa, że wystąpił błąd w czasie wykonywania, ale nie zawiera żadnych informacji o zgłoszonym wyjątku.</span><span class="sxs-lookup"><span data-stu-id="d77f9-151">The Runtime Error YSOD informs the visitor that a run-time error has occurred, but it does not include any information about the exception that was thrown.</span></span> <span data-ttu-id="d77f9-152">(Zawiera jednak instrukcje dotyczące wyświetlania szczegółów błędu poprzez modyfikację pliku `Web.config`, który jest częścią tego, co sprawia, że YSOD wyglądać inaczej).</span><span class="sxs-lookup"><span data-stu-id="d77f9-152">(It does, however, provide instructions on how to make the error details viewable by modifying the `Web.config` file, which is part of what makes such a YSOD look unprofessional.)</span></span>

<span data-ttu-id="d77f9-153">Domyślnie YSOD błędów środowiska uruchomieniowego jest pokazywany użytkownikom zdalnie (za pomocą http://www.yoursite.com), co zostało potwierdzone przez adres URL na pasku adresu przeglądarki na **rysunku 2**: `http://httpruntime.web703.discountasp.net/Genre.aspx?ID=foo`.</span><span class="sxs-lookup"><span data-stu-id="d77f9-153">By default, the Runtime Error YSOD is shown to users visiting remotely (through http://www.yoursite.com), as evidenced by the URL in the browser's Address bar in **Figure 2**: `http://httpruntime.web703.discountasp.net/Genre.aspx?ID=foo`.</span></span> <span data-ttu-id="d77f9-154">Istnieją dwa różne ekrany YSOD, ponieważ deweloperzy chcą znać szczegóły błędu, ale takie informacje nie powinny być wyświetlane w działającej witrynie, ponieważ mogą one ujawnić potencjalne luki w zabezpieczeniach lub inne poufne informacje osobom, które odwiedza lokacji.</span><span class="sxs-lookup"><span data-stu-id="d77f9-154">The two different YSOD screens exist because developers are interested in knowing the error details, but such information should not be shown on a live site as it may reveal potential security vulnerabilities or other sensitive information to anyone who visits your site.</span></span>

> [!NOTE]
> <span data-ttu-id="d77f9-155">Jeśli korzystasz z usługi DiscountASP.NET jako hosta sieci Web, możesz zauważyć, że błąd czasu wykonywania YSOD nie jest wyświetlany podczas odwiedzania aktywnej witryny.</span><span class="sxs-lookup"><span data-stu-id="d77f9-155">If you are following along and are using DiscountASP.NET as your web host, you may notice that the Runtime Error YSOD does not display when visiting the live site.</span></span> <span data-ttu-id="d77f9-156">Wynika to z faktu, że serwery DiscountASP.NET są skonfigurowane tak, aby domyślnie pokazywały szczegóły wyjątku YSOD.</span><span class="sxs-lookup"><span data-stu-id="d77f9-156">This is because DiscountASP.NET has their servers configured to show the Exception Details YSOD by default.</span></span> <span data-ttu-id="d77f9-157">Dobrymi wiadomościami jest możliwość zastąpienia tego zachowania domyślnego przez dodanie sekcji `<customErrors>` do pliku `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="d77f9-157">The good news is that you can override this default behavior by adding a `<customErrors>` section to your `Web.config` file.</span></span> <span data-ttu-id="d77f9-158">Sekcja "Konfigurowanie, która strona błędu jest wyświetlana" — szczegółowe informacje zawiera sekcja `<customErrors>`.</span><span class="sxs-lookup"><span data-stu-id="d77f9-158">The "Configuring Which Error Page is Displayed" section examines the `<customErrors>` section in detail.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image5.png)](displaying-a-custom-error-page-cs/_static/image4.png)

<span data-ttu-id="d77f9-159">**Rysunek 2**: błąd czasu wykonywania YSOD nie zawiera żadnych szczegółów błędu</span><span class="sxs-lookup"><span data-stu-id="d77f9-159">**Figure 2**: The Runtime Error YSOD Does Not Include Any Error Details</span></span>  
 <span data-ttu-id="d77f9-160">([Kliknij, aby wyświetlić obraz o pełnym rozmiarze](displaying-a-custom-error-page-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="d77f9-160">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image6.png))</span></span>

<span data-ttu-id="d77f9-161">Trzeci typ strony błędu to niestandardowa strona błędu, która jest utworzoną przez Ciebie stroną sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d77f9-161">The third type of error page is the custom error page, which is a web page that you create.</span></span> <span data-ttu-id="d77f9-162">Zaletą niestandardowej strony błędu jest to, że masz pełną kontrolę nad informacjami wyświetlanymi dla użytkownika wraz z wyglądem i działaniem strony; Strona błędu niestandardowego może używać tej samej strony wzorcowej i stylów co inne strony.</span><span class="sxs-lookup"><span data-stu-id="d77f9-162">The benefit of a custom error page is that you have complete control over the information that is displayed to the user along with the page's look and feel; the custom error page can use the same master page and styles as your other pages.</span></span> <span data-ttu-id="d77f9-163">Sekcja "Używanie niestandardowej strony błędu" zawiera instrukcje tworzenia niestandardowej strony błędu i konfigurowania jej do wyświetlania w zdarzeniu nieobsłużonego wyjątku.</span><span class="sxs-lookup"><span data-stu-id="d77f9-163">The "Using a Custom Error Page" section walks through creating a custom error page and configuring it to display in the event of an unhandled exception.</span></span> <span data-ttu-id="d77f9-164">**Rysunek 3** oferuje zobaczyć szczyt tej niestandardowej strony błędu.</span><span class="sxs-lookup"><span data-stu-id="d77f9-164">**Figure 3** offers a sneak peak of this custom error page.</span></span> <span data-ttu-id="d77f9-165">Jak widać, wygląd i działanie strony błędu jest znacznie bardziej profesjonalne — jest to możliwe, ponieważ nie ma żadnego żółtego ekranu zgonu pokazanego na rysunkach 1 i 2.</span><span class="sxs-lookup"><span data-stu-id="d77f9-165">As you can see, the look and feel of the error page is much more professional-looking than either of the Yellow Screens of Death shown in Figures 1 and 2.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image8.png)](displaying-a-custom-error-page-cs/_static/image7.png)

<span data-ttu-id="d77f9-166">**Rysunek 3**. niestandardowa strona błędu oferuje bardziej dostosowany wygląd i działanie</span><span class="sxs-lookup"><span data-stu-id="d77f9-166">**Figure 3**: A Custom Error Page Offers a More Tailored Look and Feel</span></span>  
 <span data-ttu-id="d77f9-167">([Kliknij, aby wyświetlić obraz o pełnym rozmiarze](displaying-a-custom-error-page-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="d77f9-167">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image9.png))</span></span>

<span data-ttu-id="d77f9-168">Poświęć chwilę na sprawdzenie paska adresu w przeglądarce na **rysunku 3**.</span><span class="sxs-lookup"><span data-stu-id="d77f9-168">Take a moment to inspect the browser's Address bar in **Figure 3**.</span></span> <span data-ttu-id="d77f9-169">Należy zauważyć, że na pasku adresu jest wyświetlany adres URL strony błędu niestandardowego (`/ErrorPages/Oops.aspx`).</span><span class="sxs-lookup"><span data-stu-id="d77f9-169">Note that the Address bar shows the URL of the custom error page (`/ErrorPages/Oops.aspx`).</span></span> <span data-ttu-id="d77f9-170">Na rysunkach 1 i 2 żółte ekrany zgonu są wyświetlane na tej samej stronie, z której pochodzi błąd (`Genre.aspx`).</span><span class="sxs-lookup"><span data-stu-id="d77f9-170">In Figures 1 and 2 the Yellow Screens of Death are shown in the same page that the error originated from (`Genre.aspx`).</span></span> <span data-ttu-id="d77f9-171">Strona błędu niestandardowego jest przenoszona na adres URL strony, na której wystąpił błąd za pośrednictwem parametru `aspxerrorpath` QueryString.</span><span class="sxs-lookup"><span data-stu-id="d77f9-171">The custom error page is passed the URL of the page where the error occurred via the `aspxerrorpath` querystring parameter.</span></span>

## <a name="configuring-which-error-page-is-displayed"></a><span data-ttu-id="d77f9-172">Konfigurowanie, która strona błędu jest wyświetlana</span><span class="sxs-lookup"><span data-stu-id="d77f9-172">Configuring Which Error Page is Displayed</span></span>

<span data-ttu-id="d77f9-173">Zostanie wyświetlona, która z trzech możliwych stron błędu jest oparta na dwóch zmiennych:</span><span class="sxs-lookup"><span data-stu-id="d77f9-173">Which of the three possible error pages is displayed is based on two variables:</span></span>

- <span data-ttu-id="d77f9-174">Informacje o konfiguracji w sekcji `<customErrors>` i</span><span class="sxs-lookup"><span data-stu-id="d77f9-174">The configuration information in the `<customErrors>` section, and</span></span>
- <span data-ttu-id="d77f9-175">Czy użytkownik odwiedzający witrynę lokalnie czy zdalnie.</span><span class="sxs-lookup"><span data-stu-id="d77f9-175">Whether the user is visiting the site locally or remotely.</span></span>

<span data-ttu-id="d77f9-176">[Sekcja`<customErrors>`](https://msdn.microsoft.com/library/h0hfz6fc.aspx) w `Web.config` ma dwa atrybuty, które mają wpływ na zawartość wyświetlaną na stronie błędu: `defaultRedirect` i `mode`.</span><span class="sxs-lookup"><span data-stu-id="d77f9-176">The [`<customErrors>` section](https://msdn.microsoft.com/library/h0hfz6fc.aspx) in `Web.config` has two attributes that affect what error page is shown: `defaultRedirect` and `mode`.</span></span> <span data-ttu-id="d77f9-177">Atrybut `defaultRedirect` jest opcjonalny.</span><span class="sxs-lookup"><span data-stu-id="d77f9-177">The `defaultRedirect` attribute is optional.</span></span> <span data-ttu-id="d77f9-178">Jeśli ta wartość jest określona, określa adres URL strony błędu niestandardowego i wskazuje, że zamiast błędu czasu wykonywania należy wyświetlić stronę błędu niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="d77f9-178">If provided, it specifies the URL of the custom error page and indicates that the custom error page should be shown instead of the Runtime Error YSOD.</span></span> <span data-ttu-id="d77f9-179">Atrybut `mode` jest wymagany i akceptuje jedną z trzech wartości: `On`, `Off`lub `RemoteOnly`.</span><span class="sxs-lookup"><span data-stu-id="d77f9-179">The `mode` attribute is required and accepts one of three values: `On`, `Off`, or `RemoteOnly`.</span></span> <span data-ttu-id="d77f9-180">Te wartości mają następujące zachowanie:</span><span class="sxs-lookup"><span data-stu-id="d77f9-180">These values have the following behavior:</span></span>

- <span data-ttu-id="d77f9-181">`On` — wskazuje, że strona błędu niestandardowego lub błąd czasu wykonania YSOD jest pokazywana wszystkim odwiedzającym, niezależnie od tego, czy są one lokalne, czy zdalne.</span><span class="sxs-lookup"><span data-stu-id="d77f9-181">`On` - indicates that the custom error page or the Runtime Error YSOD is shown to all visitors, regardless of whether they are local or remote.</span></span>
- <span data-ttu-id="d77f9-182">`Off`-określa, że YSOD szczegóły wyjątku są wyświetlane dla wszystkich odwiedzających, niezależnie od tego, czy są one lokalne, czy zdalne.</span><span class="sxs-lookup"><span data-stu-id="d77f9-182">`Off` - specifies that the Exception Details YSOD is displayed to all visitors, regardless of whether they are local or remote.</span></span>
- <span data-ttu-id="d77f9-183">`RemoteOnly` — wskazuje, że niestandardowa strona błędu lub błąd czasu wykonywania YSOD jest pokazywany zdalnym Gościom, podczas gdy szczegóły wyjątku YSOD są widoczne dla Gości lokalnych.</span><span class="sxs-lookup"><span data-stu-id="d77f9-183">`RemoteOnly` - indicates that the custom error page or the Runtime Error YSOD is shown to remote visitors, while the Exception Details YSOD is shown to local visitors.</span></span>

<span data-ttu-id="d77f9-184">O ile nie określono inaczej, ASP.NET działa tak, jakby atrybut Mode został ustawiony na `RemoteOnly` i nie został określony `defaultRedirect` wartość.</span><span class="sxs-lookup"><span data-stu-id="d77f9-184">Unless you specify otherwise, ASP.NET acts as if you had set the mode attribute to `RemoteOnly` and had not specified a `defaultRedirect` value.</span></span> <span data-ttu-id="d77f9-185">Innymi słowy, domyślne zachowanie polega na tym, że szczegóły wyjątku YSOD są wyświetlane odwiedzającym lokalnego, podczas gdy błąd czasu wykonywania YSOD jest pokazywany zdalnym osobom odwiedzającym.</span><span class="sxs-lookup"><span data-stu-id="d77f9-185">In other words, the default behavior is that the Exception Details YSOD is displayed to local visitors while the Runtime Error YSOD is shown to remote visitors.</span></span> <span data-ttu-id="d77f9-186">To zachowanie domyślne można przesłonić, dodając sekcję `<customErrors>` do `Web.config file.` aplikacji sieci Web</span><span class="sxs-lookup"><span data-stu-id="d77f9-186">You can override this default behavior by adding a `<customErrors>` section to your web application's `Web.config file.`</span></span>

## <a name="using-a-custom-error-page"></a><span data-ttu-id="d77f9-187">Używanie niestandardowej strony błędu</span><span class="sxs-lookup"><span data-stu-id="d77f9-187">Using a Custom Error Page</span></span>

<span data-ttu-id="d77f9-188">Każda aplikacja sieci Web powinna mieć niestandardową stronę błędu.</span><span class="sxs-lookup"><span data-stu-id="d77f9-188">Every web application should have a custom error page.</span></span> <span data-ttu-id="d77f9-189">Zapewnia to bardziej profesjonalne, niezawodne rozwiązanie YSOD błędów środowiska uruchomieniowego, można łatwo utworzyć i skonfigurować aplikację do korzystania z niestandardowej strony błędu zajmuje zaledwie kilka minut.</span><span class="sxs-lookup"><span data-stu-id="d77f9-189">It provides a more professional-looking alternative to the Runtime Error YSOD, it is easy to create, and configuring the application to use the custom error page takes only a few moments.</span></span> <span data-ttu-id="d77f9-190">Pierwszy krok polega na utworzeniu niestandardowej strony błędu.</span><span class="sxs-lookup"><span data-stu-id="d77f9-190">The first step is creating the custom error page.</span></span> <span data-ttu-id="d77f9-191">Dodaliśmy nowy folder do aplikacji przeglądający książki o nazwie `ErrorPages` i dodany do nowej strony ASP.NET o nazwie `Oops.aspx`.</span><span class="sxs-lookup"><span data-stu-id="d77f9-191">I've added a new folder to the Book Reviews application named `ErrorPages` and added to that a new ASP.NET page named `Oops.aspx`.</span></span> <span data-ttu-id="d77f9-192">Użyj tej samej strony wzorcowej jako reszty stron w witrynie, aby automatycznie dziedziczyć ten sam wygląd i działanie.</span><span class="sxs-lookup"><span data-stu-id="d77f9-192">Have the page use the same master page as the rest of the pages on your site so that it automatically inherits the same look and feel.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image11.png)](displaying-a-custom-error-page-cs/_static/image10.png)

<span data-ttu-id="d77f9-193">**Ilustracja 4**. Tworzenie niestandardowej strony błędu</span><span class="sxs-lookup"><span data-stu-id="d77f9-193">**Figure 4**: Create a Custom Error Page</span></span>

<span data-ttu-id="d77f9-194">Następnie Poświęć kilka minut na utworzenie zawartości dla strony błędu.</span><span class="sxs-lookup"><span data-stu-id="d77f9-194">Next, spend a few minutes creating the content for the error page.</span></span> <span data-ttu-id="d77f9-195">Utworzono nieprostą niestandardową stronę błędu z komunikatem informującym o nieoczekiwanym błędzie i linku z powrotem do strony głównej witryny.</span><span class="sxs-lookup"><span data-stu-id="d77f9-195">I've created a rather simple custom error page with a message indicating that there was an unexpected error and a link back to the site's homepage.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image13.png)](displaying-a-custom-error-page-cs/_static/image12.png)

<span data-ttu-id="d77f9-196">**Rysunek 5**. Projektowanie niestandardowej strony błędu</span><span class="sxs-lookup"><span data-stu-id="d77f9-196">**Figure 5**: Design Your Custom Error Page</span></span>  
 <span data-ttu-id="d77f9-197">([Kliknij, aby wyświetlić obraz o pełnym rozmiarze](displaying-a-custom-error-page-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="d77f9-197">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image14.png))</span></span>

<span data-ttu-id="d77f9-198">Gdy strona błędu została ukończona, skonfiguruj aplikację sieci Web tak, aby korzystała ze strony błędu niestandardowego zamiast YSOD błędów środowiska uruchomieniowego.</span><span class="sxs-lookup"><span data-stu-id="d77f9-198">With the error page completed, configure the web application to use the custom error page in lieu of the Runtime Error YSOD.</span></span> <span data-ttu-id="d77f9-199">W tym celu należy określić adres URL strony błędu w atrybucie `defaultRedirect` `<customErrors>` sekcji.</span><span class="sxs-lookup"><span data-stu-id="d77f9-199">This is accomplished by specifying the URL of the error page in the `<customErrors>` section's `defaultRedirect` attribute.</span></span> <span data-ttu-id="d77f9-200">Dodaj następujący znacznik do pliku `Web.config` aplikacji:</span><span class="sxs-lookup"><span data-stu-id="d77f9-200">Add the following markup to your application's `Web.config` file:</span></span>

[!code-xml[Main](displaying-a-custom-error-page-cs/samples/sample1.xml)]

<span data-ttu-id="d77f9-201">Powyższy znacznik służy do konfigurowania aplikacji do wyświetlania szczegółów wyjątku YSOD użytkownikom lokalnie, podczas gdy przy użyciu niestandardowej strony błędu niestety. aspx dla użytkowników odwiedzanych zdalnie.</span><span class="sxs-lookup"><span data-stu-id="d77f9-201">The above markup configures the application to show the Exception Details YSOD to users visiting locally, while using the custom error page Oops.aspx for those users visiting remotely.</span></span> <span data-ttu-id="d77f9-202">Aby wyświetlić tę akcję, wdróż witrynę internetową w środowisku produkcyjnym, a następnie odwiedź stronę gatunek. aspx w witrynie na żywo z nieprawidłową wartością QueryString.</span><span class="sxs-lookup"><span data-stu-id="d77f9-202">To see this in action, deploy your website to the production environment and then visit the Genre.aspx page on the live site with an invalid querystring value.</span></span> <span data-ttu-id="d77f9-203">Powinna zostać wyświetlona strona błędu niestandardowego (zapoznaj się z powrotem do **rysunku 3**).</span><span class="sxs-lookup"><span data-stu-id="d77f9-203">You should see the custom error page (refer back to **Figure 3**).</span></span>

<span data-ttu-id="d77f9-204">Aby sprawdzić, czy strona błędu niestandardowego jest wyświetlana tylko dla użytkowników zdalnych, odwiedź stronę `Genre.aspx` z nieprawidłowym wyrażeniem QueryString ze środowiska deweloperskiego.</span><span class="sxs-lookup"><span data-stu-id="d77f9-204">To verify that the custom error page is only shown to remote users, visit the `Genre.aspx` page with an invalid querystring from the development environment.</span></span> <span data-ttu-id="d77f9-205">Nadal powinny zostać wyświetlone szczegóły wyjątku YSOD (zapoznaj się z powrotem do **rysunku 1**).</span><span class="sxs-lookup"><span data-stu-id="d77f9-205">You should still see the Exception Details YSOD (refer back to **Figure 1**).</span></span> <span data-ttu-id="d77f9-206">Ustawienie `RemoteOnly` gwarantuje, że użytkownicy odwiedzający witrynę w środowisku produkcyjnym zobaczą stronę błędu niestandardowego, podczas gdy deweloperzy pracujący lokalnie nadal widzą szczegóły wyjątku.</span><span class="sxs-lookup"><span data-stu-id="d77f9-206">The `RemoteOnly` setting ensures that users visiting the site on the production environment see the custom error page while developers working locally continue to see the details of the exception.</span></span>

## <a name="notifying-developers-and-logging-error-details"></a><span data-ttu-id="d77f9-207">Powiadamianie deweloperów i szczegóły błędu rejestrowania</span><span class="sxs-lookup"><span data-stu-id="d77f9-207">Notifying Developers and Logging Error Details</span></span>

<span data-ttu-id="d77f9-208">Błędy występujące w środowisku programistycznym były spowodowane przez dewelopera na komputerze.</span><span class="sxs-lookup"><span data-stu-id="d77f9-208">Errors that occur in the development environment were caused by the developer sitting at her computer.</span></span> <span data-ttu-id="d77f9-209">Pokazuje informacje o wyjątku w YSOD szczegóły wyjątku i wie, jakie kroki były wykonywane po wystąpieniu błędu.</span><span class="sxs-lookup"><span data-stu-id="d77f9-209">She is shown the exception's information in the Exception Details YSOD, and she knows what steps she was performing when the error occurred.</span></span> <span data-ttu-id="d77f9-210">Ale jeśli wystąpi błąd w środowisku produkcyjnym, Deweloper nie ma informacji o tym, że wystąpił błąd, chyba że użytkownik końcowy przejdzie do witryny, aby zgłosić błąd.</span><span class="sxs-lookup"><span data-stu-id="d77f9-210">But when an error occurs on production, the developer has no knowledge that an error occurred unless the end user visiting the site takes the time to report the error.</span></span> <span data-ttu-id="d77f9-211">Nawet jeśli użytkownik wyjdzie ze swojego sposobu, aby ostrzec zespół programistyczny, że wystąpił błąd, bez znajomości typu wyjątku, komunikatu i śladu stosu, może być trudne zdiagnozowanie przyczyny błędu, samodzielne rozwiązanie tego problemu.</span><span class="sxs-lookup"><span data-stu-id="d77f9-211">And even if the user goes out of his way to alert the development team that an error occurred, without knowing the exception type, message, and stack trace it can be difficult to diagnose the cause of the error, let alone fix it.</span></span>

<span data-ttu-id="d77f9-212">Z tego względu należy zastanowić się, że każdy błąd w środowisku produkcyjnym jest rejestrowany w magazynie trwałym (takim jak baza danych) i że deweloperzy są powiadamiani o tym błędzie.</span><span class="sxs-lookup"><span data-stu-id="d77f9-212">For these reasons it is paramount that any error in the production environment is logged to some persistent store (such as a database) and that the developers are alerted of this error.</span></span> <span data-ttu-id="d77f9-213">Niestandardowa strona błędu może wydawać się dobrym miejscem do tego rejestrowania i powiadamiania.</span><span class="sxs-lookup"><span data-stu-id="d77f9-213">The custom error page may seem like a good place to do this logging and notification.</span></span> <span data-ttu-id="d77f9-214">Niestety, niestandardowa strona błędu nie ma dostępu do szczegółów błędu i dlatego nie można jej użyć do rejestrowania tych informacji.</span><span class="sxs-lookup"><span data-stu-id="d77f9-214">Unfortunately, the custom error page does not have access to the error details and therefore cannot be used to log this information.</span></span> <span data-ttu-id="d77f9-215">Dobrą wiadomośćą jest to, że istnieją różne sposoby przechwycenia szczegółów błędu i zarejestrowania ich, a następne trzy samouczki szczegółowo poznają ten temat.</span><span class="sxs-lookup"><span data-stu-id="d77f9-215">The good news is that there are a number of ways to intercept the error details and to log them, and the next three tutorials explore this topic in more detail.</span></span>

## <a name="using-different-custom-error-pages-for-different-http-error-statuses"></a><span data-ttu-id="d77f9-216">Używanie różnych niestandardowych stron błędów dla różnych stanów błędów HTTP</span><span class="sxs-lookup"><span data-stu-id="d77f9-216">Using Different Custom Error Pages for Different HTTP Error Statuses</span></span>

<span data-ttu-id="d77f9-217">Gdy wyjątek jest zgłaszany przez stronę ASP.NET i nie jest obsługiwany, wyjątek percolates do środowiska uruchomieniowego ASP.NET, który wyświetla skonfigurowaną stronę błędu.</span><span class="sxs-lookup"><span data-stu-id="d77f9-217">When an exception is thrown by an ASP.NET page and is not handled, the exception percolates up to the ASP.NET runtime, which displays the configured error page.</span></span> <span data-ttu-id="d77f9-218">Jeśli żądanie znajduje się w aparacie ASP.NET, ale nie można go przetworzyć z jakiegoś powodu — prawdopodobnie nie znaleziono żądanego pliku lub uprawnienia do odczytu zostały wyłączone dla tego pliku, a następnie aparat ASP.NET wywołuje `HttpException`.</span><span class="sxs-lookup"><span data-stu-id="d77f9-218">If a request comes into the ASP.NET engine but cannot be processed for some reason - perhaps the requested file is not found or Read permissions have been disabled for the file - then the ASP.NET engine raises an `HttpException`.</span></span> <span data-ttu-id="d77f9-219">Ten wyjątek, taki jak wyjątki wywoływane ze stron ASP.NET, bąbelki do środowiska uruchomieniowego, co powoduje wyświetlenie odpowiedniej strony błędu.</span><span class="sxs-lookup"><span data-stu-id="d77f9-219">This exception, like exceptions raised from ASP.NET pages, bubbles up to the runtime, causing the appropriate error page to be displayed.</span></span>

<span data-ttu-id="d77f9-220">Znaczenie tej aplikacji sieci Web w środowisku produkcyjnym polega na tym, że jeśli użytkownik zażąda strony, która nie została znaleziona, zostanie wyświetlona strona błędu niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="d77f9-220">What this means for the web application in production is that if a user requests a page that is not found then they will see the custom error page.</span></span> <span data-ttu-id="d77f9-221">**Rysunek 6** pokazuje taki przykład.</span><span class="sxs-lookup"><span data-stu-id="d77f9-221">**Figure 6** shows such an example.</span></span> <span data-ttu-id="d77f9-222">Ponieważ żądanie dotyczy nieistniejącej strony (`NoSuchPage.aspx`), zgłaszany jest `HttpException` i zostanie wyświetlona strona błędu niestandardowego (należy zwrócić uwagę do `NoSuchPage.aspx` w `aspxerrorpath` ciągu QueryString).</span><span class="sxs-lookup"><span data-stu-id="d77f9-222">Because the request is for a non-existent page (`NoSuchPage.aspx`), an `HttpException` is thrown and the custom error page is displayed (note the reference to `NoSuchPage.aspx` in the `aspxerrorpath` querystring parameter).</span></span>

[![](displaying-a-custom-error-page-cs/_static/image16.png)](displaying-a-custom-error-page-cs/_static/image15.png)

<span data-ttu-id="d77f9-223">**Ilustracja 6**. środowisko uruchomieniowe ASP.NET wyświetla skonfigurowaną stronę błędu w odpowiedzi na nieprawidłowe żądanie ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](displaying-a-custom-error-page-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="d77f9-223">**Figure 6**: The ASP.NET Runtime Displays the Configured Error Page In Response to an Invalid Request ([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image17.png))</span></span>

<span data-ttu-id="d77f9-224">Domyślnie wszystkie typy błędów powodują wyświetlenie tej samej niestandardowej strony błędu.</span><span class="sxs-lookup"><span data-stu-id="d77f9-224">By default, all types of errors cause the same custom error page to be displayed.</span></span> <span data-ttu-id="d77f9-225">Można jednak określić inną niestandardową stronę błędów dla określonego kodu stanu HTTP przy użyciu elementów podrzędnych `<error>` w sekcji `<customErrors>`.</span><span class="sxs-lookup"><span data-stu-id="d77f9-225">However, you can specify a different custom error page for a specific HTTP status code using `<error>` children elements within the `<customErrors>` section.</span></span> <span data-ttu-id="d77f9-226">Na przykład aby w zdarzeniu nie znaleziono strony o błędzie o innej stronie, która ma kod stanu HTTP 404, zaktualizuj sekcję `<customErrors>`, aby uwzględnić następujące znaczniki:</span><span class="sxs-lookup"><span data-stu-id="d77f9-226">For example, to have a different error page displayed in the event of a page not found error, which has an HTTP status code of 404, update the `<customErrors>` section to include the following markup:</span></span>

[!code-xml[Main](displaying-a-custom-error-page-cs/samples/sample2.xml)]

<span data-ttu-id="d77f9-227">Po dokonaniu tej zmiany, za każdym razem, gdy użytkownik odwiedzający zdalnie żąda zasobu ASP.NET, który nie istnieje, zostanie przekierowany `404.aspx` do niestandardowej strony błędu, a nie `Oops.aspx`.</span><span class="sxs-lookup"><span data-stu-id="d77f9-227">With this change in place, whenever a user visiting remotely requests an ASP.NET resource that does not exist, they will be redirected to the `404.aspx` custom error page instead of `Oops.aspx`.</span></span> <span data-ttu-id="d77f9-228">Jak pokazano na **rysunku 7** , Strona `404.aspx` może zawierać bardziej konkretny komunikat niż ogólna strona błędu niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="d77f9-228">As **Figure 7** illustrates, the `404.aspx` page can include a more specific message than the general custom error page.</span></span>

> [!NOTE]
> <span data-ttu-id="d77f9-229">Zapoznaj [się ze stronami błędów 404 jeszcze raz,](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/) Aby uzyskać wskazówki dotyczące tworzenia efektywnych stron błędów 404.</span><span class="sxs-lookup"><span data-stu-id="d77f9-229">Check out [404 Error Pages, One More Time](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/) for guidance on creating effective 404 error pages.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image19.png)](displaying-a-custom-error-page-cs/_static/image18.png)

<span data-ttu-id="d77f9-230">**Rysunek 7**. strona błędu niestandardowego 404 wyświetla bardziej skierowany komunikat niż `Oops.aspx`</span><span class="sxs-lookup"><span data-stu-id="d77f9-230">**Figure 7**: The Custom 404 Error Page Displays a More Targeted Message Than `Oops.aspx`</span></span>  
<span data-ttu-id="d77f9-231">([Kliknij, aby wyświetlić obraz o pełnym rozmiarze](displaying-a-custom-error-page-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="d77f9-231">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image20.png))</span></span> 

<span data-ttu-id="d77f9-232">Ponieważ wiesz, że strona `404.aspx` zostanie osiągnięta tylko wtedy, gdy użytkownik wysyła żądanie dotyczące strony, która nie została znaleziona, można rozszerzyć Tę stronę błędu niestandardowego w celu dołączenia funkcji, aby pomóc użytkownikowi rozwiązać ten konkretny typ błędu.</span><span class="sxs-lookup"><span data-stu-id="d77f9-232">Because you know that the `404.aspx` page is only reached when the user makes a request for a page that was not found, you can enhance this custom error page to include functionality to help the user address this specific type of error.</span></span> <span data-ttu-id="d77f9-233">Można na przykład utworzyć tabelę bazy danych, która mapuje znane złe adresy URL na dobre adresy URL, a następnie `404.aspx` stronie błędu niestandardowego uruchom zapytanie względem tej tabeli i Sugeruj strony, do których użytkownik może próbować uzyskać dostęp.</span><span class="sxs-lookup"><span data-stu-id="d77f9-233">For example, you could build a database table that maps known bad URLs to good URLs, and then have the `404.aspx` custom error page run a query against that table and suggest pages the user may be trying to reach.</span></span>

> [!NOTE]
> <span data-ttu-id="d77f9-234">Strona błędu niestandardowego jest wyświetlana tylko wtedy, gdy żądanie jest wykonywane do zasobu obsługiwanego przez aparat ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="d77f9-234">The custom error page is only displayed when a request is made to a resource handled by the ASP.NET engine.</span></span> <span data-ttu-id="d77f9-235">Zgodnie z opisem w [podstawowych różnicach między usługami IIS a samouczkiem serwera ASP.NET Development](core-differences-between-iis-and-the-asp-net-development-server-cs.md) serwer sieci Web może obsługiwać pewne żądania.</span><span class="sxs-lookup"><span data-stu-id="d77f9-235">As we discussed in the [Core Differences Between IIS and the ASP.NET Development Server](core-differences-between-iis-and-the-asp-net-development-server-cs.md) tutorial, the web server may handle certain requests itself.</span></span> <span data-ttu-id="d77f9-236">Domyślnie serwer sieci Web usług IIS przetwarza żądania dotyczące zawartości statycznej, takiej jak obrazy i pliki HTML bez wywoływania aparatu ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="d77f9-236">By default, the IIS web server processes requests for static content like images and HTML files without invoking the ASP.NET engine.</span></span> <span data-ttu-id="d77f9-237">W związku z tym, jeśli użytkownik zażąda nieistniejącego pliku obrazu, spowoduje to przywrócenie domyślnego komunikatu o błędzie 404 programu IIS zamiast ASP. Skonfigurowana strona błędu sieci.</span><span class="sxs-lookup"><span data-stu-id="d77f9-237">Consequently, if the user requests a non-existent image file they will get back IIS's default 404 error message rather than ASP.NET's configured error page.</span></span>

## <a name="summary"></a><span data-ttu-id="d77f9-238">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="d77f9-238">Summary</span></span>

<span data-ttu-id="d77f9-239">Gdy wystąpił nieobsługiwany wyjątek w aplikacji ASP.NET, użytkownik zostanie pokazany na jednej z trzech stron błędu: Szczegóły wyjątku żółty ekran zgonu; Żółty ekran błędu środowiska uruchomieniowego w czasie wykonywania; lub niestandardową stronę błędu.</span><span class="sxs-lookup"><span data-stu-id="d77f9-239">When an unhandled exception occurs in an ASP.NET application, the user is shown one of three error pages: the Exception Details Yellow Screen of Death; the Runtime Error Yellow Screen of Death; or a custom error page.</span></span> <span data-ttu-id="d77f9-240">Wyświetlana strona błędu zależy od konfiguracji `<customErrors>` aplikacji oraz tego, czy użytkownik jest odwiedzany lokalnie, czy zdalnie.</span><span class="sxs-lookup"><span data-stu-id="d77f9-240">Which error page is displayed depends on the application's `<customErrors>` configuration and whether the user is visiting locally or remotely.</span></span> <span data-ttu-id="d77f9-241">Domyślnym zachowaniem jest wyświetlenie szczegółów wyjątku YSOD do lokalnych osób odwiedzających i błędu czasu wykonywania YSOD do zdalnych osób odwiedzających.</span><span class="sxs-lookup"><span data-stu-id="d77f9-241">The default behavior is to show the Exception Details YSOD to local visitors and the Runtime Error YSOD to remote visitors.</span></span>

<span data-ttu-id="d77f9-242">Mimo że błąd czasu wykonywania YSOD powoduje ukrycie potencjalnie poufnych informacji o błędach od użytkownika odwiedzającego witrynę, przerwanie od wyglądu i działania witryny oraz sprawia, że aplikacja działa poprawnie.</span><span class="sxs-lookup"><span data-stu-id="d77f9-242">While the Runtime Error YSOD hides potentially sensitive error information from the user visiting the site, it breaks from your site's look and feel and makes your application look buggy.</span></span> <span data-ttu-id="d77f9-243">Lepszym rozwiązaniem jest użycie niestandardowej strony błędu, która wiąże się z tworzeniem i projektowaniem niestandardowej strony błędu i określeniu jej adresu URL w atrybucie `defaultRedirect` `<customErrors>` sekcji.</span><span class="sxs-lookup"><span data-stu-id="d77f9-243">A better approach is to use a custom error page, which entails creating and designing the custom error page and specifying its URL in the `<customErrors>` section's `defaultRedirect` attribute.</span></span> <span data-ttu-id="d77f9-244">Można nawet mieć wiele niestandardowych stron błędów dla różnych stanów błędów HTTP.</span><span class="sxs-lookup"><span data-stu-id="d77f9-244">You can even have multiple custom error pages for different HTTP error statuses.</span></span>

<span data-ttu-id="d77f9-245">Niestandardowa strona błędu to pierwszy krok kompleksowej strategii obsługi błędów dla witryny sieci Web w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="d77f9-245">The custom error page is the first step in a comprehensive error handling strategy for a website in production.</span></span> <span data-ttu-id="d77f9-246">Należy również pamiętać, aby poinformować dewelopera o błędzie i zalogować się jego szczegóły.</span><span class="sxs-lookup"><span data-stu-id="d77f9-246">Alerting the developer of the error and logging its details are also important steps.</span></span> <span data-ttu-id="d77f9-247">Następne trzy samouczki eksplorują techniki powiadamiania o błędach i rejestrowaniu.</span><span class="sxs-lookup"><span data-stu-id="d77f9-247">The next three tutorials explore techniques for error notification and logging.</span></span>

<span data-ttu-id="d77f9-248">Szczęśliwe programowanie!</span><span class="sxs-lookup"><span data-stu-id="d77f9-248">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="d77f9-249">Dalsze informacje</span><span class="sxs-lookup"><span data-stu-id="d77f9-249">Further Reading</span></span>

<span data-ttu-id="d77f9-250">Aby uzyskać więcej informacji na temat tematów omówionych w tym samouczku, zapoznaj się z następującymi zasobami:</span><span class="sxs-lookup"><span data-stu-id="d77f9-250">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="d77f9-251">Strony błędów, jeszcze raz</span><span class="sxs-lookup"><span data-stu-id="d77f9-251">Error Pages, One More Time</span></span>](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/)
- [<span data-ttu-id="d77f9-252">Wyjątki — zalecenia dotyczące projektowania</span><span class="sxs-lookup"><span data-stu-id="d77f9-252">Design Guidelines for Exceptions</span></span>](https://msdn.microsoft.com/library/ms229014.aspx)
- [<span data-ttu-id="d77f9-253">Strony błędów przyjaznych dla użytkownika</span><span class="sxs-lookup"><span data-stu-id="d77f9-253">User-Friendly Error Pages</span></span>](http://aspnet.4guysfromrolla.com/articles/090606-1.aspx)
- [<span data-ttu-id="d77f9-254">Obsługa i zgłaszanie wyjątków</span><span class="sxs-lookup"><span data-stu-id="d77f9-254">Handling and Throwing Exceptions</span></span>](https://msdn.microsoft.com/library/5b2yeyab.aspx)
- [<span data-ttu-id="d77f9-255">Poprawne używanie niestandardowych stron błędów w programie ASP.NET</span><span class="sxs-lookup"><span data-stu-id="d77f9-255">Properly Using Custom Error Pages in ASP.NET</span></span>](http://professionalaspnet.com/archive/2007/09/30/Properly-Using-Custom-Error-Pages-in-ASP.NET.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="d77f9-256">[Poprzednie](strategies-for-database-development-and-deployment-cs.md)
> [dalej](processing-unhandled-exceptions-cs.md)</span><span class="sxs-lookup"><span data-stu-id="d77f9-256">[Previous](strategies-for-database-development-and-deployment-cs.md)
[Next](processing-unhandled-exceptions-cs.md)</span></span>

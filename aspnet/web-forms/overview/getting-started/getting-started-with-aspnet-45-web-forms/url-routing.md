---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/url-routing
title: Routing adresów URL | Microsoft Docs
author: Erikre
description: Ta seria samouczków zawiera informacje na temat tworzenia aplikacji ASP.NET Web Forms przy użyciu ASP.NET 4,5 i Microsoft Visual Studio Express 2013...
ms.author: riande
ms.date: 09/08/2014
ms.assetid: 4f4bf092-c400-471f-a876-78fda0417890
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/url-routing
msc.type: authoredcontent
ms.openlocfilehash: 66b727b69ca4f9a3d35b67f492f9a554146e09ef
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78587438"
---
# <a name="url-routing"></a><span data-ttu-id="d4b5f-103">Routing adresów URL</span><span class="sxs-lookup"><span data-stu-id="d4b5f-103">URL Routing</span></span>

<span data-ttu-id="d4b5f-104">Autor [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="d4b5f-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="d4b5f-105">[Pobierz program Wingtip zabawki (C#)](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) lub [Pobierz książkę elektroniczną (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="d4b5f-105">[Download Wingtip Toys Sample Project (C#)](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="d4b5f-106">Ta seria samouczków zawiera informacje na temat tworzenia aplikacji ASP.NET Web Forms przy użyciu ASP.NET 4,5 i Microsoft Visual Studio Express 2013 dla sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="d4b5f-107">Projekt Visual Studio 2013 [z C# kodem źródłowym](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) jest dostępny do tej serii samouczków.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>

<span data-ttu-id="d4b5f-108">W tym samouczku zmodyfikujesz przykładową aplikację Wingtip zabawki, aby obsługiwać Routing adresów URL.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-108">In this tutorial, you will modify the Wingtip Toys sample application to support URL routing.</span></span> <span data-ttu-id="d4b5f-109">Funkcja routingu umożliwia aplikacji sieci Web korzystanie z przyjaznych, łatwiejszych do zapamiętania adresów URL i lepszych obsługi przez aparaty wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-109">Routing enables your web application to use URLs that are friendly, easier to remember, and better supported by search engines.</span></span> <span data-ttu-id="d4b5f-110">Ten samouczek jest oparty na poprzednim samouczku "członkostwo i administracja" i jest częścią serii samouczków Wingtip.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-110">This tutorial builds on the previous tutorial "Membership and Administration" and is part of the Wingtip Toys tutorial series.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="d4b5f-111">Zawartość:</span><span class="sxs-lookup"><span data-stu-id="d4b5f-111">What you'll learn:</span></span>

- <span data-ttu-id="d4b5f-112">Jak zarejestrować trasy dla aplikacji formularzy sieci Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-112">How to register routes for an ASP.NET Web Forms application.</span></span>
- <span data-ttu-id="d4b5f-113">Jak dodać trasy do strony sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-113">How to add routes to a web page.</span></span>
- <span data-ttu-id="d4b5f-114">Jak wybrać dane z bazy danych do obsługi tras.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-114">How to select data from a database to support routes.</span></span>

## <a name="aspnet-routing-overview"></a><span data-ttu-id="d4b5f-115">ASP.NET routing — Omówienie</span><span class="sxs-lookup"><span data-stu-id="d4b5f-115">ASP.NET Routing Overview</span></span>

<span data-ttu-id="d4b5f-116">Routing adresów URL umożliwia skonfigurowanie aplikacji do akceptowania adresów URL żądań, które nie są mapowane na pliki fizyczne.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-116">URL routing allows you to configure an application to accept request URLs that do not map to physical files.</span></span> <span data-ttu-id="d4b5f-117">Adres URL żądania jest po prostu adresem URL, który użytkownik wprowadza do przeglądarki, aby znaleźć stronę w witrynie sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-117">A request URL is simply the URL a user enters into their browser to find a page on your web site.</span></span> <span data-ttu-id="d4b5f-118">Funkcja routingu służy do definiowania adresów URL, które są semantycznie zrozumiałe dla użytkowników i które mogą pomóc w optymalizacji aparatu wyszukiwania (wyszukiwarka).</span><span class="sxs-lookup"><span data-stu-id="d4b5f-118">You use routing to define URLs that are semantically meaningful to users and that can help with search-engine optimization (SEO).</span></span>

<span data-ttu-id="d4b5f-119">Domyślnie szablon formularzy sieci Web zawiera [przyjazne adresy url ASP.NET](http://www.nuget.org/packages/Microsoft.AspNet.FriendlyUrls/).</span><span class="sxs-lookup"><span data-stu-id="d4b5f-119">By default, the Web Forms template includes [ASP.NET Friendly URLs](http://www.nuget.org/packages/Microsoft.AspNet.FriendlyUrls/).</span></span> <span data-ttu-id="d4b5f-120">Większość podstawowych zadań routingu zostanie wdrożona za pomocą *przyjaznych adresów URL*.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-120">Much of the basic routing work will be implemented by using *Friendly URLs*.</span></span> <span data-ttu-id="d4b5f-121">Jednak w tym samouczku dodasz dostosowane możliwości routingu.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-121">However, in this tutorial you will add customized routing capabilities.</span></span>

<span data-ttu-id="d4b5f-122">Przed przystąpieniem do dostosowywania routingu adresów URL Przykładowa aplikacja Wingtip zabawki może połączyć się z produktem, korzystając z następującego adresu URL:</span><span class="sxs-lookup"><span data-stu-id="d4b5f-122">Before customizing URL routing, the Wingtip Toys sample application can link to a product using the following URL:</span></span>

`https://localhost:44300/ProductDetails.aspx?productID=2`

<span data-ttu-id="d4b5f-123">Dostosowując Routing adresów URL, aplikacja Przykładowa Wingtip zabawki będzie łączyć się z tym samym produktem przy użyciu łatwiejszy do odczytania adresu URL:</span><span class="sxs-lookup"><span data-stu-id="d4b5f-123">By customizing URL routing, the Wingtip Toys sample application will link to the same product using an easier to read URL:</span></span>

`https://localhost:44300/Product/Convertible%20Car`

### <a name="routes"></a><span data-ttu-id="d4b5f-124">Trasy</span><span class="sxs-lookup"><span data-stu-id="d4b5f-124">Routes</span></span>

<span data-ttu-id="d4b5f-125">Trasa jest wzorcem adresu URL, który jest mapowany do procedury obsługi.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-125">A route is a URL pattern that is mapped to a handler.</span></span> <span data-ttu-id="d4b5f-126">Program obsługi może być plikiem fizycznym, takim jak plik aspx w aplikacji formularzy sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-126">The handler can be a physical file, such as an .aspx file in a Web Forms application.</span></span> <span data-ttu-id="d4b5f-127">Program obsługi może być również klasą, która przetwarza żądanie.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-127">A handler can also be a class that processes the request.</span></span> <span data-ttu-id="d4b5f-128">Aby zdefiniować trasę, należy utworzyć wystąpienie klasy Route przez określenie wzorca adresu URL, programu obsługi i opcjonalnie nazwy trasy.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-128">To define a route, you create an instance of the Route class by specifying the URL pattern, the handler, and optionally a name for the route.</span></span>

<span data-ttu-id="d4b5f-129">Dodaj trasę do aplikacji, dodając obiekt `Route` do właściwości static `Routes` klasy `RouteTable`.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-129">You add the route to the application by adding the `Route` object to the static `Routes` property of the `RouteTable` class.</span></span> <span data-ttu-id="d4b5f-130">Właściwość Routes jest obiektem `RouteCollection`, który przechowuje wszystkie trasy dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-130">The Routes property is a `RouteCollection` object that stores all the routes for the application.</span></span>

### <a name="url-patterns"></a><span data-ttu-id="d4b5f-131">Wzorce adresów URL</span><span class="sxs-lookup"><span data-stu-id="d4b5f-131">URL Patterns</span></span>

<span data-ttu-id="d4b5f-132">Wzorzec adresu URL może zawierać wartości literałów i symbole zastępcze zmiennych (określane jako parametry adresu URL).</span><span class="sxs-lookup"><span data-stu-id="d4b5f-132">A URL pattern can contain literal values and variable placeholders (referred to as URL parameters).</span></span> <span data-ttu-id="d4b5f-133">Literały i symbole zastępcze znajdują się w segmentach adresu URL, które są rozdzielane znakami ukośnika (`/`).</span><span class="sxs-lookup"><span data-stu-id="d4b5f-133">The literals and placeholders are located in segments of the URL which are delimited by the slash (`/`) character.</span></span>

<span data-ttu-id="d4b5f-134">Po utworzeniu żądania do aplikacji sieci Web adres URL jest analizowany do segmentów i symboli zastępczych, a wartości zmiennych są przekazywane do programu obsługi żądań.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-134">When a request to your web application is made, the URL is parsed into segments and placeholders, and the variable values are provided to the request handler.</span></span> <span data-ttu-id="d4b5f-135">Ten proces jest podobny do sposobu, w jaki dane w ciągu zapytania są analizowane i przesyłane do procedury obsługi żądania.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-135">This process is similar to the way the data in a query string is parsed and passed to the request handler.</span></span> <span data-ttu-id="d4b5f-136">W obu przypadkach informacje o zmiennych są zawarte w adresie URL i przesyłane do procedury obsługi w postaci par klucz-wartość.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-136">In both cases, variable information is included in the URL and passed to the handler in the form of key-value pairs.</span></span> <span data-ttu-id="d4b5f-137">W przypadku ciągów zapytań zarówno klucze, jak i wartości są w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-137">For query strings, both the keys and the values are in the URL.</span></span> <span data-ttu-id="d4b5f-138">W przypadku tras klucze są nazwami zastępczymi zdefiniowanymi we wzorcu adresu URL, a tylko wartości są w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-138">For routes, the keys are the placeholder names defined in the URL pattern, and only the values are in the URL.</span></span>

<span data-ttu-id="d4b5f-139">W wzorcu adresu URL definiuje się symbole zastępcze, umieszczając je w nawiasach klamrowych (`{` i `}`).</span><span class="sxs-lookup"><span data-stu-id="d4b5f-139">In a URL pattern, you define placeholders by enclosing them in braces ( `{` and `}` ).</span></span> <span data-ttu-id="d4b5f-140">Można zdefiniować więcej niż jeden symbol zastępczy w segmencie, ale symbole zastępcze muszą być oddzielone wartością literału.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-140">You can define more than one placeholder in a segment, but the placeholders must be separated by a literal value.</span></span> <span data-ttu-id="d4b5f-141">Na przykład `{language}-{country}/{action}` jest prawidłowym wzorcem trasy.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-141">For example, `{language}-{country}/{action}` is a valid route pattern.</span></span> <span data-ttu-id="d4b5f-142">Jednakże `{language}{country}/{action}` nie jest prawidłowym wzorcem, ponieważ nie ma wartości literału ani ogranicznika między symbolami zastępczymi.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-142">However, `{language}{country}/{action}` is not a valid pattern, because there is no literal value or delimiter between the placeholders.</span></span> <span data-ttu-id="d4b5f-143">W związku z tym routing nie może określić, gdzie należy rozdzielić wartość symbolu zastępczego języka z wartości symbolu zastępczego kraju.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-143">Therefore, routing cannot determine where to separate the value for the language placeholder from the value for the country placeholder.</span></span>

### <a name="mapping-and-registering-routes"></a><span data-ttu-id="d4b5f-144">Mapowanie i rejestrowanie tras</span><span class="sxs-lookup"><span data-stu-id="d4b5f-144">Mapping and Registering Routes</span></span>

<span data-ttu-id="d4b5f-145">Zanim będzie można uwzględnić trasy do stron przykładowej aplikacji Wingtip zabawki, należy zarejestrować trasy podczas uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-145">Before you can include routes to pages of the Wingtip Toys sample application, you must register the routes when the application starts.</span></span> <span data-ttu-id="d4b5f-146">Aby zarejestrować trasy, zmodyfikuj procedurę obsługi zdarzeń `Application_Start`.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-146">To register the routes, you will modify the `Application_Start` event handler.</span></span>

1. <span data-ttu-id="d4b5f-147">W **Eksplorator rozwiązań**programu Visual Studio Znajdź i otwórz plik *Global.asax.cs* .</span><span class="sxs-lookup"><span data-stu-id="d4b5f-147">In **Solution Explorer**of Visual Studio, find and open the *Global.asax.cs* file.</span></span>
2. <span data-ttu-id="d4b5f-148">Dodaj kod wyróżniony żółtym do pliku *Global.asax.cs* w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="d4b5f-148">Add the code highlighted in yellow to the *Global.asax.cs* file as follows:</span></span>   

    [!code-csharp[Main](url-routing/samples/sample1.cs?highlight=30-31,34-46)]

<span data-ttu-id="d4b5f-149">Po uruchomieniu przykładowej aplikacji Wingtip zabawki zostanie wywołana procedura obsługi zdarzeń `Application_Start`.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-149">When the Wingtip Toys sample application starts, it calls the `Application_Start` event handler.</span></span> <span data-ttu-id="d4b5f-150">Na końcu tego programu obsługi zdarzeń wywoływana jest metoda `RegisterCustomRoutes`.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-150">At the end of this event handler, the `RegisterCustomRoutes` method is called.</span></span> <span data-ttu-id="d4b5f-151">Metoda `RegisterCustomRoutes` dodaje każdą trasę, wywołując metodę `MapPageRoute` obiektu `RouteCollection`.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-151">The `RegisterCustomRoutes` method adds each route by calling the `MapPageRoute` method of the `RouteCollection` object.</span></span> <span data-ttu-id="d4b5f-152">Trasy są definiowane przy użyciu nazwy trasy, adresu URL trasy i fizycznego adresu URL.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-152">Routes are defined using a route name, a route URL and a physical URL.</span></span>

<span data-ttu-id="d4b5f-153">Pierwszy parametr ("`ProductsByCategoryRoute`") jest nazwą trasy.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-153">The first parameter ("`ProductsByCategoryRoute`") is the route name.</span></span> <span data-ttu-id="d4b5f-154">Służy do wywoływania trasy, gdy jest to konieczne.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-154">It is used to call the route when it is needed.</span></span> <span data-ttu-id="d4b5f-155">Drugi parametr ("`Category/{categoryName}`") definiuje przyjazny zastępczy adres URL, który może być dynamiczny w oparciu o kod.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-155">The second parameter ("`Category/{categoryName}`") defines the friendly replacement URL that can be dynamic based on code.</span></span> <span data-ttu-id="d4b5f-156">Ta trasa jest używana podczas wypełniania kontrolki danych za pomocą łączy, które są generowane na podstawie danych.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-156">You use this route when you are populating a data control with links that are generated based on data.</span></span> <span data-ttu-id="d4b5f-157">Trasa jest pokazywana w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="d4b5f-157">A route is shown as follows:</span></span>

[!code-csharp[Main](url-routing/samples/sample2.cs)]

<span data-ttu-id="d4b5f-158">Drugi parametr trasy zawiera wartość dynamiczną określoną przez nawiasy klamrowe (`{ }`).</span><span class="sxs-lookup"><span data-stu-id="d4b5f-158">The second parameter of the route includes a dynamic value specified by braces (`{ }`).</span></span> <span data-ttu-id="d4b5f-159">W tym przypadku `categoryName` jest zmienną, która zostanie użyta do określenia właściwej ścieżki routingu.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-159">In this case, the `categoryName` is a variable that will be used to determine the proper routing path.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="d4b5f-160">**Optional**</span><span class="sxs-lookup"><span data-stu-id="d4b5f-160">**Optional**</span></span>
> 
> <span data-ttu-id="d4b5f-161">Łatwiej jest zarządzać kodem, przenosząc metodę `RegisterCustomRoutes` do oddzielnej klasy.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-161">You might find it easier to manage your code by moving the `RegisterCustomRoutes` method to a separate class.</span></span> <span data-ttu-id="d4b5f-162">W folderze *logiki* utwórz oddzielną klasę `RouteActions`.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-162">In the *Logic* folder, create a separate `RouteActions` class.</span></span> <span data-ttu-id="d4b5f-163">Przenieś powyższą metodę `RegisterCustomRoutes` z pliku *Global.asax.cs* do nowej klasy `RoutesActions`.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-163">Move the above `RegisterCustomRoutes` method from the *Global.asax.cs* file into the new `RoutesActions` class.</span></span> <span data-ttu-id="d4b5f-164">Użyj klasy `RoleActions` i metody `createAdmin` jako przykładu wywołania metody `RegisterCustomRoutes` z pliku *Global.asax.cs* .</span><span class="sxs-lookup"><span data-stu-id="d4b5f-164">Use the `RoleActions` class and the `createAdmin` method as an example of how to call the `RegisterCustomRoutes` method from the *Global.asax.cs* file.</span></span>

<span data-ttu-id="d4b5f-165">Może być również zauważone wywołanie metody `RegisterRoutes` przy użyciu obiektu `RouteConfig` na początku procedury obsługi zdarzeń `Application_Start`.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-165">You may also have noticed the `RegisterRoutes` method call using the `RouteConfig` object at the beginning of the `Application_Start` event handler.</span></span> <span data-ttu-id="d4b5f-166">To wywołanie jest wykonywane w celu zaimplementowania domyślnego routingu.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-166">This call is made to implement default routing.</span></span> <span data-ttu-id="d4b5f-167">Został on uwzględniony jako domyślny kod podczas tworzenia aplikacji przy użyciu szablonu formularzy sieci Web programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-167">It was included as default code when you created the application using Visual Studio's Web Forms template.</span></span>

## <a name="retrieving-and-using-route-data"></a><span data-ttu-id="d4b5f-168">Pobieranie i używanie danych tras</span><span class="sxs-lookup"><span data-stu-id="d4b5f-168">Retrieving and Using Route Data</span></span>

<span data-ttu-id="d4b5f-169">Jak wspomniano powyżej, można zdefiniować trasy.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-169">As mentioned above, routes can be defined.</span></span> <span data-ttu-id="d4b5f-170">Kod, który został dodany do programu obsługi zdarzeń `Application_Start` w pliku *Global.asax.cs* , ładuje możliwe do zdefiniowania trasy.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-170">The code that you added to the `Application_Start` event handler in the *Global.asax.cs* file loads the definable routes.</span></span>

### <a name="setting-routes"></a><span data-ttu-id="d4b5f-171">Ustawianie tras</span><span class="sxs-lookup"><span data-stu-id="d4b5f-171">Setting Routes</span></span>

<span data-ttu-id="d4b5f-172">Trasy wymagają dodania dodatkowego kodu.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-172">Routes require you to add additional code.</span></span> <span data-ttu-id="d4b5f-173">W tym samouczku użyjesz powiązania modelu, aby pobrać obiekt `RouteValueDictionary`, który jest używany podczas generowania tras przy użyciu danych z kontrolki danych.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-173">In this tutorial, you will use model binding to retrieve a `RouteValueDictionary` object that is used when generating the routes using data from a data control.</span></span> <span data-ttu-id="d4b5f-174">Obiekt `RouteValueDictionary` będzie zawierać listę nazw produktów należących do określonej kategorii produktów.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-174">The `RouteValueDictionary` object will contain a list of product names that belong to a specific category of products.</span></span> <span data-ttu-id="d4b5f-175">Dla każdego produktu tworzony jest link na podstawie danych i trasy.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-175">A link is created for each product based on the data and route.</span></span>

#### <a name="enable-routes-for-categories-and-products"></a><span data-ttu-id="d4b5f-176">Włączanie tras dla kategorii i produktów</span><span class="sxs-lookup"><span data-stu-id="d4b5f-176">Enable Routes for Categories and Products</span></span>

<span data-ttu-id="d4b5f-177">Następnie zaktualizujesz aplikację w taki sposób, aby używała `ProductsByCategoryRoute` do określenia właściwej trasy do uwzględnienia dla każdego łącza kategorii produktów.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-177">Next, you'll update the application to use the `ProductsByCategoryRoute` to determine the correct route to include for each product category link.</span></span> <span data-ttu-id="d4b5f-178">Zostanie również zaktualizowana strona *ProductList. aspx* , która będzie zawierać link kierowany dla każdego produktu.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-178">You'll also update the *ProductList.aspx* page to include a routed link for each product.</span></span> <span data-ttu-id="d4b5f-179">Linki będą wyświetlane tak, jakby znajdowały się przed zmianą, ale linki będą teraz używały routingu adresów URL.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-179">The links will be displayed as they were before the change, however the links will now use URL routing.</span></span>

1. <span data-ttu-id="d4b5f-180">W **Eksplorator rozwiązań**Otwórz stronę *site. Master* , jeśli nie została jeszcze otwarta.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-180">In **Solution Explorer**, open the *Site.Master* page if it is not already open.</span></span>
2. <span data-ttu-id="d4b5f-181">Zaktualizuj formant **ListView** o nazwie "`categoryList`" zmianami wyróżnionymi kolorem żółtym, tak aby znaczniki pojawiły się w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="d4b5f-181">Update the **ListView** control named "`categoryList`" with the changes highlighted in yellow, so the markup appears as follows:</span></span>   

    [!code-aspx[Main](url-routing/samples/sample3.aspx?highlight=7-9)]
3. <span data-ttu-id="d4b5f-182">W **Eksplorator rozwiązań**Otwórz stronę *ProductList. aspx* .</span><span class="sxs-lookup"><span data-stu-id="d4b5f-182">In **Solution Explorer**, open the *ProductList.aspx* page.</span></span>
4. <span data-ttu-id="d4b5f-183">Zaktualizuj element `ItemTemplate` strony *ProductList. aspx* przy użyciu opcji aktualizacje wyróżnione kolorem żółtym, aby znaczniki pojawiły się w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="d4b5f-183">Update the `ItemTemplate` element of the *ProductList.aspx* page with the updates highlighted in yellow, so the markup appears as follows:</span></span>   

    [!code-aspx[Main](url-routing/samples/sample4.aspx?highlight=6-9,14-16)]
5. <span data-ttu-id="d4b5f-184">Otwórz kod związany z *ProductList.aspx.cs* i Dodaj następujący obszar nazw jako wyróżniony na żółto:</span><span class="sxs-lookup"><span data-stu-id="d4b5f-184">Open the code-behind of *ProductList.aspx.cs* and add the following namespace as highlighted in yellow:</span></span>  

    [!code-csharp[Main](url-routing/samples/sample5.cs?highlight=9)]
6. <span data-ttu-id="d4b5f-185">Zastąp metodę `GetProducts` kodu (*ProductList.aspx.cs*) następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="d4b5f-185">Replace the `GetProducts` method of the code-behind (*ProductList.aspx.cs*) with the following code:</span></span>   

    [!code-csharp[Main](url-routing/samples/sample6.cs)]

#### <a name="add-code-for-product-details"></a><span data-ttu-id="d4b5f-186">Dodawanie kodu do szczegółów produktu</span><span class="sxs-lookup"><span data-stu-id="d4b5f-186">Add Code for Product Details</span></span>

<span data-ttu-id="d4b5f-187">Teraz zaktualizuj kod w tle (*ProductDetails.aspx.cs*) dla strony *ProductDetails. aspx* , aby użyć danych tras.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-187">Now, update the code-behind (*ProductDetails.aspx.cs*) for the *ProductDetails.aspx* page to use route data.</span></span> <span data-ttu-id="d4b5f-188">Należy zauważyć, że nowa metoda `GetProduct` również akceptuje wartość ciągu zapytania w przypadku, gdy użytkownik ma link z zakładką, który używa starszej nieprzyjaznego adresu URL bez routingu.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-188">Notice that the new `GetProduct` method also accepts a query string value for the case where the user has a link bookmarked that uses the older non-friendly, non-routed URL.</span></span>

1. <span data-ttu-id="d4b5f-189">Zastąp metodę `GetProduct` kodu (*ProductDetails.aspx.cs*) następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="d4b5f-189">Replace the `GetProduct` method of the code-behind (*ProductDetails.aspx.cs*) with the following code:</span></span>   

    [!code-csharp[Main](url-routing/samples/sample7.cs)]

## <a name="running-the-application"></a><span data-ttu-id="d4b5f-190">Uruchamianie aplikacji</span><span class="sxs-lookup"><span data-stu-id="d4b5f-190">Running the Application</span></span>

<span data-ttu-id="d4b5f-191">Teraz możesz uruchomić aplikację, aby zobaczyć zaktualizowane trasy.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-191">You can run the application now to see the updated routes.</span></span>

1. <span data-ttu-id="d4b5f-192">Naciśnij klawisz **F5** , aby uruchomić przykładową aplikację Wingtip zabawki.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-192">Press **F5** to run the Wingtip Toys sample application.</span></span>  
 <span data-ttu-id="d4b5f-193">Zostanie otwarta przeglądarka i zostanie wyświetlona strona *default. aspx* .</span><span class="sxs-lookup"><span data-stu-id="d4b5f-193">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="d4b5f-194">Kliknij link **Products (produkty** ) w górnej części strony.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-194">Click the **Products** link at the top of the page.</span></span>  
 <span data-ttu-id="d4b5f-195">Wszystkie produkty są wyświetlane na stronie *ProductList. aspx* .</span><span class="sxs-lookup"><span data-stu-id="d4b5f-195">All products are displayed on the *ProductList.aspx* page.</span></span> <span data-ttu-id="d4b5f-196">Następujący adres URL (z numerem portu) jest wyświetlany dla przeglądarki:</span><span class="sxs-lookup"><span data-stu-id="d4b5f-196">The following URL (using your port number) is displayed for the browser:</span></span>  
    `https://localhost:44300/ProductList`
3. <span data-ttu-id="d4b5f-197">Następnie kliknij link kategorii **samochody** w górnej części strony.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-197">Next, click the **Cars** category link near the top of the page.</span></span>  
 <span data-ttu-id="d4b5f-198">Na stronie *ProductList. aspx* są wyświetlane tylko samochody.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-198">Only cars are displayed on the *ProductList.aspx* page.</span></span> <span data-ttu-id="d4b5f-199">Następujący adres URL (z numerem portu) jest wyświetlany dla przeglądarki:</span><span class="sxs-lookup"><span data-stu-id="d4b5f-199">The following URL (using your port number) is displayed for the browser:</span></span>  
    `https://localhost:44300/Category/Cars`
4. <span data-ttu-id="d4b5f-200">Kliknij link zawierający nazwę pierwszego samochodu wymienionego na stronie ("**wymienialny samochód**"), aby wyświetlić szczegółowe informacje o produkcie.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-200">Click the link containing the name of the first car listed on the page ("**Convertible Car**") to display the product details.</span></span>  
 <span data-ttu-id="d4b5f-201">Następujący adres URL (z numerem portu) jest wyświetlany dla przeglądarki:</span><span class="sxs-lookup"><span data-stu-id="d4b5f-201">The following URL (using your port number) is displayed for the browser:</span></span>  
    `https://localhost:44300/Product/Convertible%20Car`
5. <span data-ttu-id="d4b5f-202">Następnie wprowadź następujący adres URL bez routingu (przy użyciu numeru portu) do przeglądarki:</span><span class="sxs-lookup"><span data-stu-id="d4b5f-202">Next, enter the following non-routed URL (using your port number) into the browser:</span></span>  
    `https://localhost:44300/ProductDetails.aspx?productID=2`  
 <span data-ttu-id="d4b5f-203">Kod nadal rozpoznaje adres URL, który zawiera ciąg zapytania, w przypadku, gdy użytkownik ma link oznaczony zakładką.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-203">The code still recognizes a URL that includes a query string, for the case where a user has a link bookmarked.</span></span>

## <a name="summary"></a><span data-ttu-id="d4b5f-204">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="d4b5f-204">Summary</span></span>

<span data-ttu-id="d4b5f-205">W tym samouczku dodano trasy dla kategorii i produktów.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-205">In this tutorial, you have added routes for categories and products.</span></span> <span data-ttu-id="d4b5f-206">Wiesz już, jak trasy mogą być zintegrowane z kontrolkami danych, które używają powiązania modelu.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-206">You have learned how routes can be integrated with data controls that use model binding.</span></span> <span data-ttu-id="d4b5f-207">W następnym samouczku zostanie zaimplementowana globalna obsługa błędów.</span><span class="sxs-lookup"><span data-stu-id="d4b5f-207">In the next tutorial, you will implement global error handling.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="d4b5f-208">Dodatkowe materiały</span><span class="sxs-lookup"><span data-stu-id="d4b5f-208">Additional Resources</span></span>

[<span data-ttu-id="d4b5f-209">Przyjazne adresy URL ASP.NET</span><span class="sxs-lookup"><span data-stu-id="d4b5f-209">ASP.NET Friendly URLs</span></span>](http://www.nuget.org/packages/Microsoft.AspNet.FriendlyUrls/)  
[<span data-ttu-id="d4b5f-210">Wdróż bezpieczną aplikację ASP.NET Web Forms z członkostwem, uwierzytelnianiem OAuth i SQL Database, aby Azure App Service</span><span class="sxs-lookup"><span data-stu-id="d4b5f-210">Deploy a Secure ASP.NET Web Forms App with Membership, OAuth, and SQL Database to Azure App Service</span></span>](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/)  
[<span data-ttu-id="d4b5f-211">Microsoft Azure — bezpłatna wersja próbna</span><span class="sxs-lookup"><span data-stu-id="d4b5f-211">Microsoft Azure - Free Trial</span></span>](https://azure.microsoft.com/pricing/free-trial/)

> [!div class="step-by-step"]
> <span data-ttu-id="d4b5f-212">[Poprzednie](membership-and-administration.md)
> [dalej](aspnet-error-handling.md)</span><span class="sxs-lookup"><span data-stu-id="d4b5f-212">[Previous](membership-and-administration.md)
[Next](aspnet-error-handling.md)</span></span>

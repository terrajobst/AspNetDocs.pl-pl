---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/checkout-and-payment-with-paypal
title: Finalizacja zakupu i płatność w systemie PayPal | Dokumentacja firmy Microsoft
author: Erikre
description: Tej serii samouczków obejmuje podstawy tworzenia aplikacji formularzy sieci Web ASP.NET przy użyciu platformy ASP.NET 4.5 i programu Microsoft Visual Studio Express 2013 for firma Microsoft...
ms.author: riande
ms.date: 09/08/2014
ms.assetid: 664ec95e-b0c9-4f43-a39f-798d0f2a7e08
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/checkout-and-payment-with-paypal
msc.type: authoredcontent
ms.openlocfilehash: a0895c2246bc08f50645a865ce2dfffecfbb56a6
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/09/2019
ms.locfileid: "59391159"
---
# <a name="checkout-and-payment-with-paypal"></a><span data-ttu-id="f7deb-103">Finalizacja zakupu i płatność w systemie PayPal</span><span class="sxs-lookup"><span data-stu-id="f7deb-103">Checkout and Payment with PayPal</span></span>

<span data-ttu-id="f7deb-104">przez [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="f7deb-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="f7deb-105">[Pobierz Wingtip Toys przykładowego projektu (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) lub [Pobierz książkę elektroniczną (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="f7deb-105">[Download Wingtip Toys Sample Project (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="f7deb-106">W tej serii samouczków obejmuje podstawy tworzenia aplikacji formularzy sieci Web ASP.NET przy użyciu platformy ASP.NET 4.5 i programu Microsoft Visual Studio Express 2013 for Web.</span><span class="sxs-lookup"><span data-stu-id="f7deb-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="f7deb-107">Visual Studio 2013 [projektu za pomocą kodu źródłowego języka C#](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) jest dostępny dla tej serii samouczków towarzyszą.</span><span class="sxs-lookup"><span data-stu-id="f7deb-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>


<span data-ttu-id="f7deb-108">W tym samouczku opisano sposób modyfikowania przykładowej aplikacji Wingtip Toys obejmujący autoryzacji użytkowników, Rejestracja i płatności PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-108">This tutorial describes how to modify the Wingtip Toys sample application to include user authorization, registration, and payment using PayPal.</span></span> <span data-ttu-id="f7deb-109">Tylko użytkownicy, którzy są zalogowani mają autoryzację do zakupu produktów.</span><span class="sxs-lookup"><span data-stu-id="f7deb-109">Only users who are logged in will have authorization to purchase products.</span></span> <span data-ttu-id="f7deb-110">Szablon projektu platformy ASP.NET 4.5 Web Forms wbudowanych rejestracji funkcji już zawiera większość potrzebnych składników.</span><span class="sxs-lookup"><span data-stu-id="f7deb-110">The ASP.NET 4.5 Web Forms project template's built-in user registration functionality already includes much of what you need.</span></span> <span data-ttu-id="f7deb-111">Doda funkcji PayPal Express wyewidencjonowania.</span><span class="sxs-lookup"><span data-stu-id="f7deb-111">You will add PayPal Express Checkout functionality.</span></span> <span data-ttu-id="f7deb-112">W tym samouczku jest użycie developer PayPal środowiska, testowania, dzięki czemu nie rzeczywiste fundusze zostaną przekazane.</span><span class="sxs-lookup"><span data-stu-id="f7deb-112">In this tutorial you be using the PayPal developer testing environment, so no actual funds will be transferred.</span></span> <span data-ttu-id="f7deb-113">Na końcu tego samouczka zostanie przetestować aplikację, wybierając produktów do dodania do koszyka, klikając przycisk wyewidencjonowania i przesyłania danych do witryny sieci web z testowania PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-113">At the end of the tutorial, you will test the application by selecting products to add to the shopping cart, clicking the checkout button, and transferring data to the PayPal testing web site.</span></span> <span data-ttu-id="f7deb-114">W witrynie sieci web testowania PayPal będzie Potwierdź informacje, wysyłki i płatności, a następnie wróć do lokalnego przykładowej aplikacji Wingtip Toys potwierdzenie i ukończenie zakupu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-114">On the PayPal testing web site, you will confirm your shipping and payment information and then return to the local Wingtip Toys sample application to confirm and complete the purchase.</span></span>

<span data-ttu-id="f7deb-115">Obejmuje kilka procesorów doświadczonym płatności specjalizujących zakupy online, że adres skalowalności i bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="f7deb-115">There are several experienced third-party payment processors that specialize in online shopping that address scalability and security.</span></span> <span data-ttu-id="f7deb-116">Deweloperzy platformy ASP.NET, należy wziąć pod uwagę zalety przy użyciu rozwiązania płatności innej przed Implementowanie, shopping i zakupu rozwiązań.</span><span class="sxs-lookup"><span data-stu-id="f7deb-116">ASP.NET developers should consider the advantages of utilizing a third party payment solution before implementing a shopping and purchasing solution.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="f7deb-117">Przykładowej aplikacji Wingtip Toys zaprojektowano tak, aby widocznym określonych koncepcji platformy ASP.NET i funkcje dostępne dla deweloperów sieci web platformy ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="f7deb-117">The Wingtip Toys sample application was designed to shown specific ASP.NET concepts and features available to ASP.NET web developers.</span></span> <span data-ttu-id="f7deb-118">Ta przykładowa aplikacja nie została zoptymalizowana dla każdych okolicznościach możliwości w zakresie skalowalności i bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="f7deb-118">This sample application was not optimized for all possible circumstances in regard to scalability and security.</span></span>


## <a name="what-youll-learn"></a><span data-ttu-id="f7deb-119">Zawartość:</span><span class="sxs-lookup"><span data-stu-id="f7deb-119">What you'll learn:</span></span>

- <span data-ttu-id="f7deb-120">Jak ograniczyć dostęp do określonych stron w folderze.</span><span class="sxs-lookup"><span data-stu-id="f7deb-120">How to restrict access to specific pages in a folder.</span></span>
- <span data-ttu-id="f7deb-121">Jak utworzyć znanych koszyk sklepowy z anonimowych koszyk sklepowy.</span><span class="sxs-lookup"><span data-stu-id="f7deb-121">How to create a known shopping cart from an anonymous shopping cart.</span></span>
- <span data-ttu-id="f7deb-122">Jak włączyć protokół SSL dla projektu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-122">How to enable SSL for the project.</span></span>
- <span data-ttu-id="f7deb-123">Jak dodać dostawcę uwierzytelniania OAuth do projektu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-123">How to add an OAuth provider to the project.</span></span>
- <span data-ttu-id="f7deb-124">Jak kupować produkty przy użyciu środowiska testowania PayPal za pomocą systemu PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-124">How to use PayPal to purchase products using the PayPal testing environment.</span></span>
- <span data-ttu-id="f7deb-125">Jak wyświetlać szczegółowe informacje z systemu PayPal w **DetailsView** kontroli.</span><span class="sxs-lookup"><span data-stu-id="f7deb-125">How to display details from PayPal in a **DetailsView** control.</span></span>
- <span data-ttu-id="f7deb-126">Jak zaktualizować bazę danych aplikacji Wingtip Toys ze szczegółowymi informacjami uzyskany z systemu PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-126">How to update the database of the Wingtip Toys application with details obtained from PayPal.</span></span>

## <a name="adding-order-tracking"></a><span data-ttu-id="f7deb-127">Dodawanie śledzenia zamówień</span><span class="sxs-lookup"><span data-stu-id="f7deb-127">Adding Order Tracking</span></span>

<span data-ttu-id="f7deb-128">W tym samouczku utworzysz dwie nowe klasy do śledzenia danych od kolejności, w której został utworzony przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f7deb-128">In this tutorial, you'll create two new classes to track data from the order a user has created.</span></span> <span data-ttu-id="f7deb-129">Klasy będzie śledzić dane dotyczące informacje o wysyłce, łącznie z zakupu i potwierdzenia płatności.</span><span class="sxs-lookup"><span data-stu-id="f7deb-129">The classes will track data regarding shipping information, purchase total, and payment confirmation.</span></span>

### <a name="add-the-order-and-orderdetail-model-classes"></a><span data-ttu-id="f7deb-130">Dodawanie klasy modelu OrderDetail i kolejności</span><span class="sxs-lookup"><span data-stu-id="f7deb-130">Add the Order and OrderDetail Model Classes</span></span>

<span data-ttu-id="f7deb-131">We wcześniejszej części tej serii samouczków, definicja schematu dla kategorii, produktów, oraz koszyka elementów, tworząc `Category`, `Product`, i `CartItem` klas w *modeli* folderu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-131">Earlier in this tutorial series, you defined the schema for categories, products, and shopping cart items by creating the `Category`, `Product`, and `CartItem` classes in the *Models* folder.</span></span> <span data-ttu-id="f7deb-132">Teraz należy dodać dwa nowe klasy do definiowania schematu dla zamówienia produktów oraz szczegóły wybranego zamówienia.</span><span class="sxs-lookup"><span data-stu-id="f7deb-132">Now you will add two new classes to define the schema for the product order and the details of the order.</span></span>

1. <span data-ttu-id="f7deb-133">W **modeli** folderu, Dodaj nową klasę o nazwie *Order.cs*.</span><span class="sxs-lookup"><span data-stu-id="f7deb-133">In the **Models** folder, add a new class named *Order.cs*.</span></span>   
   <span data-ttu-id="f7deb-134">Plik nowej klasy jest wyświetlany w edytorze.</span><span class="sxs-lookup"><span data-stu-id="f7deb-134">The new class file is displayed in the editor.</span></span>
2. <span data-ttu-id="f7deb-135">Zastąp w kodzie domyślnym następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="f7deb-135">Replace the default code with the following:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample1.cs)]
3. <span data-ttu-id="f7deb-136">Dodaj *OrderDetail.cs* klasy *modeli* folderu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-136">Add an *OrderDetail.cs* class to the *Models* folder.</span></span>
4. <span data-ttu-id="f7deb-137">Zastąp domyślny kod następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="f7deb-137">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample2.cs)]

<span data-ttu-id="f7deb-138">`Order` i `OrderDetail` klasy zawiera schemat zdefiniować kolejność informacje używane do kupowania i wysyłania.</span><span class="sxs-lookup"><span data-stu-id="f7deb-138">The `Order` and `OrderDetail` classes contain the schema to define the order information used for purchasing and shipping.</span></span>

<span data-ttu-id="f7deb-139">Ponadto należy zaktualizować klasy kontekstu bazy danych, który zarządza klas jednostek i który zapewnia dostęp do danych w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="f7deb-139">In addition, you will need to update the database context class that manages the entity classes and that provides data access to the database.</span></span> <span data-ttu-id="f7deb-140">Aby to zrobić, doda nowo utworzony kolejności i `OrderDetail` klasy do modeli `ProductContext` klasy.</span><span class="sxs-lookup"><span data-stu-id="f7deb-140">To do this, you will add the newly created Order and `OrderDetail` model classes to `ProductContext` class.</span></span>

1. <span data-ttu-id="f7deb-141">W **Eksploratora rozwiązań**, znajdowanie i otwieranie *ProductContext.cs* pliku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-141">In **Solution Explorer**, find and open the *ProductContext.cs* file.</span></span>
2. <span data-ttu-id="f7deb-142">Dodaj wyróżniony kod do *ProductContext.cs* pliku, jak pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="f7deb-142">Add the highlighted code to the *ProductContext.cs* file as shown below:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample3.cs?highlight=14-15)]

<span data-ttu-id="f7deb-143">Jak wspomniano wcześniej w tej serii samouczków, kod w *ProductContext.cs* dodaje plik `System.Data.Entity` przestrzeni nazw, aby mieć dostęp do wszystkich funkcji programu Entity Framework core.</span><span class="sxs-lookup"><span data-stu-id="f7deb-143">As mentioned previously in this tutorial series, the code in the *ProductContext.cs* file adds the `System.Data.Entity` namespace so that you have access to all the core functionality of the Entity Framework.</span></span> <span data-ttu-id="f7deb-144">Ta funkcja obejmuje możliwość zapytania, wstawiania, aktualizacji i usuwania danych dzięki współpracy z silnie typizowanych obiektów.</span><span class="sxs-lookup"><span data-stu-id="f7deb-144">This functionality includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span> <span data-ttu-id="f7deb-145">Powyższy kod w `ProductContext` klasa dodaje Entity Framework dostępu do nowo dodanych `Order` i `OrderDetail` klasy.</span><span class="sxs-lookup"><span data-stu-id="f7deb-145">The above code in the `ProductContext` class adds Entity Framework access to the newly added `Order` and `OrderDetail` classes.</span></span>

## <a name="adding-checkout-access"></a><span data-ttu-id="f7deb-146">Dodawanie dostępu do wyewidencjonowania</span><span class="sxs-lookup"><span data-stu-id="f7deb-146">Adding Checkout Access</span></span>

<span data-ttu-id="f7deb-147">Przykładowej aplikacji Wingtip Toys zezwala użytkownikom anonimowym na przejrzenie i dodać produkty do koszyka.</span><span class="sxs-lookup"><span data-stu-id="f7deb-147">The Wingtip Toys sample application allows anonymous users to review and add products to a shopping cart.</span></span> <span data-ttu-id="f7deb-148">Jednak przy wyborze użytkowników anonimowych do zakupu produktów, które są dodawane do koszyka, mogą zalogować się do witryny.</span><span class="sxs-lookup"><span data-stu-id="f7deb-148">However, when anonymous users choose to purchase the products they added to the shopping cart, they must log on to the site.</span></span> <span data-ttu-id="f7deb-149">Po zalogowaniu, dostęp ograniczony stron aplikacji sieci Web, które obsługują wyewidencjonowanie i proces zakupu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-149">Once they have logged on, they can access the restricted pages of the Web application that handle the checkout and purchase process.</span></span> <span data-ttu-id="f7deb-150">Te strony ograniczone są zawarte w *wyewidencjonowania* folderu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f7deb-150">These restricted pages are contained in the *Checkout* folder of the application.</span></span>

### <a name="add-a-checkout-folder-and-pages"></a><span data-ttu-id="f7deb-151">Dodaj Folder wyewidencjonowania i stron</span><span class="sxs-lookup"><span data-stu-id="f7deb-151">Add a Checkout Folder and Pages</span></span>

<span data-ttu-id="f7deb-152">Teraz utworzysz *wyewidencjonowania* folder i stron, których klient zostanie wyświetlony podczas procesu realizowania zamówienia.</span><span class="sxs-lookup"><span data-stu-id="f7deb-152">You will now create the *Checkout* folder and the pages in it that the customer will see during the checkout process.</span></span> <span data-ttu-id="f7deb-153">Te strony zaktualizuje w dalszej części tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="f7deb-153">You will update these pages later in this tutorial.</span></span>

1. <span data-ttu-id="f7deb-154">Kliknij prawym przyciskiem myszy nazwę projektu (**Wingtip Toys**) w **Eksploratora rozwiązań** i wybierz **dodać nowy Folder**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-154">Right-click the project name (**Wingtip Toys**) in **Solution Explorer** and select **Add a New Folder**.</span></span> 

    ![Finalizacja zakupu i płatność w systemie PayPal — nowy Folder](checkout-and-payment-with-paypal/_static/image1.png)
2. <span data-ttu-id="f7deb-156">Nadaj nazwę nowego folderu *wyewidencjonowania*.</span><span class="sxs-lookup"><span data-stu-id="f7deb-156">Name the new folder *Checkout*.</span></span>
3. <span data-ttu-id="f7deb-157">Kliknij prawym przyciskiem myszy *wyewidencjonowania* folder, a następnie wybierz **Dodaj**-&gt;**nowy element**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-157">Right-click the *Checkout* folder and then select **Add**-&gt;**New Item**.</span></span> 

    ![Finalizacja zakupu i płatność w systemie PayPal — nowy element](checkout-and-payment-with-paypal/_static/image2.png)
4. <span data-ttu-id="f7deb-159">**Dodaj nowy element** zostanie wyświetlone okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="f7deb-159">The **Add New Item** dialog box is displayed.</span></span>
5. <span data-ttu-id="f7deb-160">Wybierz **Visual C#**  - &gt; **Web** grupy szablonów po lewej stronie.</span><span class="sxs-lookup"><span data-stu-id="f7deb-160">Select the **Visual C#** -&gt; **Web** templates group on the left.</span></span> <span data-ttu-id="f7deb-161">W środkowym okienku wybierz **formularz sieci Web ze stroną wzorcową**i nadaj mu nazwę *CheckoutStart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="f7deb-161">Then, from the middle pane, select **Web Form with Master Page**and name it *CheckoutStart.aspx*.</span></span> 

    ![Finalizacja zakupu i płatność w systemie PayPal — Dodaj okno dialogowe nowego elementu](checkout-and-payment-with-paypal/_static/image3.png)
6. <span data-ttu-id="f7deb-163">Tak jak poprzednio, wybierz *Site.Master* pliku strony wzorcowej.</span><span class="sxs-lookup"><span data-stu-id="f7deb-163">As before, select the *Site.Master* file as the master page.</span></span>
7. <span data-ttu-id="f7deb-164">Dodaj następujące dodatkowe strony w celu *wyewidencjonowania* folderu przy użyciu tego samego powyższe kroki:</span><span class="sxs-lookup"><span data-stu-id="f7deb-164">Add the following additional pages to the *Checkout* folder using the same steps above:</span></span>   

    - <span data-ttu-id="f7deb-165">CheckoutReview.aspx</span><span class="sxs-lookup"><span data-stu-id="f7deb-165">CheckoutReview.aspx</span></span>
    - <span data-ttu-id="f7deb-166">CheckoutComplete.aspx</span><span class="sxs-lookup"><span data-stu-id="f7deb-166">CheckoutComplete.aspx</span></span>
    - <span data-ttu-id="f7deb-167">CheckoutCancel.aspx</span><span class="sxs-lookup"><span data-stu-id="f7deb-167">CheckoutCancel.aspx</span></span>
    - <span data-ttu-id="f7deb-168">CheckoutError.aspx</span><span class="sxs-lookup"><span data-stu-id="f7deb-168">CheckoutError.aspx</span></span>

### <a name="add-a-webconfig-file"></a><span data-ttu-id="f7deb-169">Dodanie pliku Web.config</span><span class="sxs-lookup"><span data-stu-id="f7deb-169">Add a Web.config File</span></span>

<span data-ttu-id="f7deb-170">Przez dodanie nowego *Web.config* plik *wyewidencjonowania* folderu, można ograniczyć dostęp do wszystkich stron znajdujących się w folderze.</span><span class="sxs-lookup"><span data-stu-id="f7deb-170">By adding a new *Web.config* file to the *Checkout* folder, you will be able to restrict access to all the pages contained in the folder.</span></span>

1. <span data-ttu-id="f7deb-171">Kliknij prawym przyciskiem myszy *wyewidencjonowania* i wybierz polecenie **Dodaj**  - &gt; **nowy element**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-171">Right-click the *Checkout* folder and select **Add** -&gt; **New Item**.</span></span>  
   <span data-ttu-id="f7deb-172">**Dodaj nowy element** zostanie wyświetlone okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="f7deb-172">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="f7deb-173">Wybierz **Visual C#**  - &gt; **Web** grupy szablonów po lewej stronie.</span><span class="sxs-lookup"><span data-stu-id="f7deb-173">Select the **Visual C#** -&gt; **Web** templates group on the left.</span></span> <span data-ttu-id="f7deb-174">W środkowym okienku wybierz **pliku konfiguracji sieci Web**, zaakceptuj domyślną nazwę *Web.config*, a następnie wybierz pozycję **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-174">Then, from the middle pane, select **Web Configuration File**, accept the default name of *Web.config*, and then select **Add**.</span></span>
3. <span data-ttu-id="f7deb-175">Zastąp istniejący kod XML zawartość w *Web.config* pliku następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="f7deb-175">Replace the existing XML content in the *Web.config* file with the following:</span></span>  

    [!code-xml[Main](checkout-and-payment-with-paypal/samples/sample4.xml)]
4. <span data-ttu-id="f7deb-176">Zapisz *Web.config* pliku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-176">Save the *Web.config* file.</span></span>

<span data-ttu-id="f7deb-177">*Web.config* plik Określa, że wszyscy użytkownicy nieznanych aplikacji sieci Web muszą mieć dostępu do stron znajdujących się w *wyewidencjonowania* folderu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-177">The *Web.config* file specifies that all unknown users of the Web application must be denied access to the pages contained in the *Checkout* folder.</span></span> <span data-ttu-id="f7deb-178">Jeśli jednak użytkownik ma zarejestrowane konto i jest zalogowany, ich będzie znanych użytkowników i będą mieć dostęp do stron w *wyewidencjonowania* folderu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-178">However, if the user has registered an account and is logged on, they will be a known user and will have access to the pages in the *Checkout* folder.</span></span>

<span data-ttu-id="f7deb-179">Ważne jest, aby należy pamiętać, że konfiguracja ASP.NET następuje hierarchii, gdzie każdy *Web.config* pliku ustawienia konfiguracji zostają zastosowane do folderu, który znajduje się w oraz do wszystkich katalogów podrzędnych.</span><span class="sxs-lookup"><span data-stu-id="f7deb-179">It's important to note that ASP.NET configuration follows a hierarchy, where each *Web.config* file applies configuration settings to the folder that it is in and to all of the child directories below it.</span></span>

<a id="SSLWebForms"></a>
## <a name="enable-ssl-for-the-project"></a><span data-ttu-id="f7deb-180">Włącz protokół SSL dla projektu</span><span class="sxs-lookup"><span data-stu-id="f7deb-180">Enable SSL for the Project</span></span>

 <span data-ttu-id="f7deb-181">Secure Sockets Layer (SSL) to protokół zdefiniowanymi tak, aby zezwolić na serwerach sieci Web i klientami sieci Web do bardziej bezpiecznego komunikowania się przy użyciu technologii szyfrowania.</span><span class="sxs-lookup"><span data-stu-id="f7deb-181">Secure Sockets Layer (SSL) is a protocol defined to allow Web servers and Web clients to communicate more securely through the use of encryption.</span></span> <span data-ttu-id="f7deb-182">Jeśli nie jest używany protokół SSL, dane przesyłane między klientem i serwerem jest otwarta dla pakietów wykrywanie, każda osoba mająca fizyczny dostęp do sieci.</span><span class="sxs-lookup"><span data-stu-id="f7deb-182">When SSL is not used, data sent between the client and server is open to packet sniffing by anyone with physical access to the network.</span></span> <span data-ttu-id="f7deb-183">Ponadto kilka typowych schematów uwierzytelniania nie są bezpieczne przy użyciu zwykłego protokołu HTTP.</span><span class="sxs-lookup"><span data-stu-id="f7deb-183">Additionally, several common authentication schemes are not secure over plain HTTP.</span></span> <span data-ttu-id="f7deb-184">W szczególności uwierzytelnianie podstawowe i uwierzytelnianie formularzy Wyślij niezaszyfrowane poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="f7deb-184">In particular, Basic authentication and forms authentication send unencrypted credentials.</span></span> <span data-ttu-id="f7deb-185">Do zabezpieczenia te schematy uwierzytelniania, należy użyć protokołu SSL.</span><span class="sxs-lookup"><span data-stu-id="f7deb-185">To be secure, these authentication schemes must use SSL.</span></span> 

1. <span data-ttu-id="f7deb-186">W **Eksploratora rozwiązań**, kliknij przycisk **WingtipToys** projektu, a następnie naciśnij klawisz **F4** do wyświetlenia **właściwości** okna.</span><span class="sxs-lookup"><span data-stu-id="f7deb-186">In **Solution Explorer**, click the **WingtipToys** project, then press **F4** to display the **Properties** window.</span></span>
2. <span data-ttu-id="f7deb-187">Zmiana **włączony protokół SSL** do `true`.</span><span class="sxs-lookup"><span data-stu-id="f7deb-187">Change **SSL Enabled** to `true`.</span></span>
3. <span data-ttu-id="f7deb-188">Kopiuj **adresu URL protokołu SSL** , dzięki czemu można jej użyć później.</span><span class="sxs-lookup"><span data-stu-id="f7deb-188">Copy the **SSL URL** so you can use it later.</span></span>   
 <span data-ttu-id="f7deb-189">Adres URL SSL będzie `https://localhost:44300/` , chyba że wcześniej utworzono SSL witryny sieci Web (jak pokazano poniżej).</span><span class="sxs-lookup"><span data-stu-id="f7deb-189">The SSL URL will be `https://localhost:44300/` unless you've previously created SSL Web Sites (as shown below).</span></span>   
    ![Właściwości projektu](checkout-and-payment-with-paypal/_static/image4.png)
4. <span data-ttu-id="f7deb-191">W **Eksploratora rozwiązań**, kliknij prawym przyciskiem myszy **WingtipToys** projektu, a następnie kliknij przycisk **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-191">In **Solution Explorer**, right click the **WingtipToys** project and click **Properties**.</span></span>
5. <span data-ttu-id="f7deb-192">Na karcie po lewej stronie kliknij **Web**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-192">In the left tab, click **Web**.</span></span>
6. <span data-ttu-id="f7deb-193">Zmiana **adres Url projektu** używać **adresu URL protokołu SSL** zapisany wcześniej.</span><span class="sxs-lookup"><span data-stu-id="f7deb-193">Change the **Project Url** to use the **SSL URL** that you saved earlier.</span></span>   
    ![Właściwości dla projektu sieci Web](checkout-and-payment-with-paypal/_static/image5.png)
7. <span data-ttu-id="f7deb-195">Zapisz stronę, naciskając klawisz **CTRL + S**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-195">Save the page by pressing **CTRL+S**.</span></span>
8. <span data-ttu-id="f7deb-196">Naciśnij klawisz **kombinację klawiszy Ctrl + F5** do uruchomienia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f7deb-196">Press **Ctrl+F5** to run the application.</span></span> <span data-ttu-id="f7deb-197">Program Visual Studio spowoduje wyświetlenie opcji, aby możliwe było uniknąć wyświetlania ostrzeżeń dotyczących protokołu SSL.</span><span class="sxs-lookup"><span data-stu-id="f7deb-197">Visual Studio will display an option to allow you to avoid SSL warnings.</span></span>
9. <span data-ttu-id="f7deb-198">Kliknij przycisk **tak** ufać certyfikatowi SSL usług IIS Express i kontynuować.</span><span class="sxs-lookup"><span data-stu-id="f7deb-198">Click **Yes** to trust the IIS Express SSL certificate and continue.</span></span>   
    ![Szczegóły certyfikatu SSL usług IIS Express](checkout-and-payment-with-paypal/_static/image6.png)  
 <span data-ttu-id="f7deb-200">Zostanie wyświetlone ostrzeżenie zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="f7deb-200">A Security Warning is displayed.</span></span>
10. <span data-ttu-id="f7deb-201">Kliknij przycisk **tak** instalacji certyfikatu do usługi hosta lokalnego.</span><span class="sxs-lookup"><span data-stu-id="f7deb-201">Click **Yes** to install the certificate to your localhost.</span></span>   
    ![Okno dialogowe ostrzeżenia o zabezpieczeniach](checkout-and-payment-with-paypal/_static/image7.png)  
 <span data-ttu-id="f7deb-203">Zostanie wyświetlone okno przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="f7deb-203">The browser window will be displayed.</span></span>

<span data-ttu-id="f7deb-204">Teraz można łatwo przetestować aplikację sieci Web lokalnie przy użyciu protokołu SSL.</span><span class="sxs-lookup"><span data-stu-id="f7deb-204">You can now easily test your Web application locally using SSL.</span></span>

<a id="OAuthWebForms"></a>
## <a name="add-an-oauth-20-provider"></a><span data-ttu-id="f7deb-205">Dodawanie dostawcy uwierzytelniania OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="f7deb-205">Add an OAuth 2.0 Provider</span></span>

<span data-ttu-id="f7deb-206">ASP.NET Web Forms udostępnia rozszerzone opcje członkostwa i uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="f7deb-206">ASP.NET Web Forms provides enhanced options for membership and authentication.</span></span> <span data-ttu-id="f7deb-207">Te ulepszenia obejmują OAuth.</span><span class="sxs-lookup"><span data-stu-id="f7deb-207">These enhancements include OAuth.</span></span> <span data-ttu-id="f7deb-208">OAuth jest otwarty protokół, który umożliwia bezpieczne autoryzacji w proste oraz standardowe metody z aplikacji sieci web, mobilnych i klasycznych.</span><span class="sxs-lookup"><span data-stu-id="f7deb-208">OAuth is an open protocol that allows secure authorization in a simple and standard method from web, mobile, and desktop applications.</span></span> <span data-ttu-id="f7deb-209">Szablon formularzy sieci Web platformy ASP.NET używa protokołu OAuth w celu udostępnienia Facebook, Twitter, Google i Microsoft jako dostawcy uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="f7deb-209">The ASP.NET Web Forms template uses OAuth to expose Facebook, Twitter, Google and Microsoft as authentication providers.</span></span> <span data-ttu-id="f7deb-210">Chociaż w tym samouczku jest używany tylko Google jako dostawcy uwierzytelniania, można łatwo zmodyfikować kod, aby użyć innych dostawców.</span><span class="sxs-lookup"><span data-stu-id="f7deb-210">Although this tutorial uses only Google as the authentication provider, you can easily modify the code to use any of the providers.</span></span> <span data-ttu-id="f7deb-211">Kroki, aby wdrożyć innych dostawców są bardzo podobne do czynności, które będą widoczne w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-211">The steps to implement other providers are very similar to the steps you will see in this tutorial.</span></span>

<span data-ttu-id="f7deb-212">Oprócz uwierzytelniania samouczka będzie także ról można użyć do zaimplementowania autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="f7deb-212">In addition to authentication, the tutorial will also use roles to implement authorization.</span></span> <span data-ttu-id="f7deb-213">Tylko do tych użytkowników, możesz dodać do `canEdit` roli będą mogli zmieniać dane (Tworzenie, edytowanie lub usuwanie kontaktów).</span><span class="sxs-lookup"><span data-stu-id="f7deb-213">Only those users you add to the `canEdit` role will be able to change data (create, edit, or delete contacts).</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="f7deb-214">Aplikacje Windows Live akceptować tylko na żywo adresu URL dla roboczej witryny sieci Web, więc nie możesz użyć adresu URL lokalną witrynę sieci Web do testowania nazwy logowania.</span><span class="sxs-lookup"><span data-stu-id="f7deb-214">Windows Live applications only accept a live URL for a working website, so you cannot use a local website URL for testing logins.</span></span>


<span data-ttu-id="f7deb-215">Poniższe kroki pozwala dodać dostawcę uwierzytelniania serwisu Google.</span><span class="sxs-lookup"><span data-stu-id="f7deb-215">The following steps will allow you to add a Google authentication provider.</span></span>

1. <span data-ttu-id="f7deb-216">Otwórz *aplikacji\_Start\Startup.Auth.cs* pliku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-216">Open the *App\_Start\Startup.Auth.cs* file.</span></span>
2. <span data-ttu-id="f7deb-217">Usuń znaki komentarza z `app.UseGoogleAuthentication()` metoda tak, że metoda jest wyświetlany jako poniżej:</span><span class="sxs-lookup"><span data-stu-id="f7deb-217">Remove the comment characters from the `app.UseGoogleAuthentication()` method so that the method appears as follows:</span></span> 

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample5.cs)]
3. <span data-ttu-id="f7deb-218">Przejdź do [konsoli deweloperów Google](https://console.developers.google.com/).</span><span class="sxs-lookup"><span data-stu-id="f7deb-218">Navigate to the [Google Developers Console](https://console.developers.google.com/).</span></span> <span data-ttu-id="f7deb-219">Należy również zalogować się przy użyciu swojego konta e-mail dewelopera Google (gmail.com).</span><span class="sxs-lookup"><span data-stu-id="f7deb-219">You will also need to sign-in with your Google developer email account (gmail.com).</span></span> <span data-ttu-id="f7deb-220">Jeśli nie masz konta Google, wybierz opcję **Tworzenie konta usługi** łącza.</span><span class="sxs-lookup"><span data-stu-id="f7deb-220">If you do not have a Google account, select the **Create an account** link.</span></span>   
   <span data-ttu-id="f7deb-221">Następnie zobaczysz **konsoli deweloperów Google**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-221">Next, you'll see the **Google Developers Console**.</span></span>   
    ![Konsola deweloperów Google](checkout-and-payment-with-paypal/_static/image8.png)
4. <span data-ttu-id="f7deb-223">Kliknij przycisk **Tworzenie projektu** przycisk, a następnie wprowadź nazwę projektu i identyfikator (możesz użyć wartości domyślnych).</span><span class="sxs-lookup"><span data-stu-id="f7deb-223">Click the **Create Project** button and enter a project name and ID (you can use the default values).</span></span> <span data-ttu-id="f7deb-224">Następnie kliknij przycisk **wyboru umowy** i **Utwórz** przycisku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-224">Then, click the **agreement checkbox** and the **Create** button.</span></span>  

    ![Google - nowy projekt](checkout-and-payment-with-paypal/_static/image9.png)

   <span data-ttu-id="f7deb-226">W ciągu kilku sekund zostanie utworzony nowy projekt, a przeglądarka wyświetli nową stronę projektów.</span><span class="sxs-lookup"><span data-stu-id="f7deb-226">In a few seconds the new project will be created and your browser will display the new projects page.</span></span>
5. <span data-ttu-id="f7deb-227">Na karcie po lewej stronie kliknij **interfejsów API &amp; uwierzytelniania**, a następnie kliknij przycisk **poświadczenia**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-227">In the left tab, click **APIs &amp; auth**, and then click **Credentials**.</span></span>
6. <span data-ttu-id="f7deb-228">Kliknij przycisk **Utwórz nowy identyfikator klienta** w obszarze **OAuth**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-228">Click the **Create New Client ID** under **OAuth**.</span></span>   
   <span data-ttu-id="f7deb-229">**Utwórz identyfikator klienta** zostanie wyświetlone okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="f7deb-229">The **Create Client ID** dialog will be displayed.</span></span>   
    ![Google - Utwórz identyfikator klienta](checkout-and-payment-with-paypal/_static/image10.png)
7. <span data-ttu-id="f7deb-231">W **Utwórz identyfikator klienta** okno dialogowe, zachowaj ustawienie domyślne **aplikacji sieci Web** dla typu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f7deb-231">In the **Create Client ID** dialog, keep the default **Web application** for the application type.</span></span>
8. <span data-ttu-id="f7deb-232">Ustaw **autoryzowanych źródeł JavaScript** do adresu URL protokołu SSL używany we wcześniejszej części tego samouczka (`https://localhost:44300/` chyba, że utworzono inne projekty, protokołu SSL).</span><span class="sxs-lookup"><span data-stu-id="f7deb-232">Set the **Authorized JavaScript Origins** to the SSL URL you used earlier in this tutorial (`https://localhost:44300/` unless you've created other SSL projects).</span></span>   
   <span data-ttu-id="f7deb-233">Ten adres URL jest punkt początkowy aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f7deb-233">This URL is the origin for your application.</span></span> <span data-ttu-id="f7deb-234">W tym przykładzie tylko wprowadź adres URL localhost do testowania.</span><span class="sxs-lookup"><span data-stu-id="f7deb-234">For this sample, you will only enter the localhost test URL.</span></span> <span data-ttu-id="f7deb-235">Jednak można wprowadzić wiele adresów URL dla hosta lokalnego i produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="f7deb-235">However, you can enter multiple URLs to account for localhost and production.</span></span>
9. <span data-ttu-id="f7deb-236">Ustaw **autoryzacji identyfikator URI przekierowania** do następującego:</span><span class="sxs-lookup"><span data-stu-id="f7deb-236">Set the **Authorized Redirect URI** to the following:</span></span> 

    [!code-html[Main](checkout-and-payment-with-paypal/samples/sample6.html)]

   <span data-ttu-id="f7deb-237">Ta wartość jest identyfikator URI tego OAuth ASP.NET użytkowników do komunikacji z serwerem programu google OAuth.</span><span class="sxs-lookup"><span data-stu-id="f7deb-237">This value is the URI that ASP.NET OAuth users to communicate with the google OAuth server.</span></span> <span data-ttu-id="f7deb-238">Należy pamiętać, adresu URL protokołu SSL, które zostały użyte powyżej ( `https://localhost:44300/` chyba, że utworzono inne projekty, protokołu SSL).</span><span class="sxs-lookup"><span data-stu-id="f7deb-238">Remember the SSL URL you used above (    `https://localhost:44300/` unless you've created other SSL projects).</span></span>
10. <span data-ttu-id="f7deb-239">Kliknij przycisk **Utwórz identyfikator klienta** przycisku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-239">Click the **Create Client ID** button.</span></span>
11. <span data-ttu-id="f7deb-240">W menu po lewej stronie konsoli deweloperów Google, kliknij polecenie **ekranie wyrażania zgody** element menu, a następnie ustaw swoje wiadomości e-mail adres i nazwy produktu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-240">On the left menu of the Google Developers Console, click the **Consent screen** menu item, then set your email address and product name.</span></span> <span data-ttu-id="f7deb-241">Po wypełnieniu formularza kliknij **Zapisz**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-241">When you have completed the form, click **Save**.</span></span>
12. <span data-ttu-id="f7deb-242">Kliknij przycisk **interfejsów API** elementu menu, przewiń w dół i kliknij przycisk **poza** znajdujący się obok **interfejsu API Google +**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-242">Click the **APIs** menu item, scroll down and click the **off** button next to **Google+ API**.</span></span>   
    <span data-ttu-id="f7deb-243">Akceptowanie tej opcji spowoduje włączenie interfejsu API Google +.</span><span class="sxs-lookup"><span data-stu-id="f7deb-243">Accepting this option will enable the Google+ API.</span></span>
13. <span data-ttu-id="f7deb-244">Należy również zaktualizować **Microsoft.Owin** pakietu NuGet w wersji 3.0.0.</span><span class="sxs-lookup"><span data-stu-id="f7deb-244">You must also update the **Microsoft.Owin** NuGet package to version 3.0.0.</span></span>   
    <span data-ttu-id="f7deb-245">Z **narzędzia** menu, wybierz opcję **Menedżera pakietów NuGet** , a następnie wybierz **Zarządzaj pakietami NuGet dla rozwiązania**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-245">From the **Tools** menu, select **NuGet Package Manager** and then select **Manage NuGet Packages for Solution**.</span></span>  
    <span data-ttu-id="f7deb-246">Z **Zarządzaj pakietami NuGet** okien, Znajdź i aktualizacji **Microsoft.Owin** pakiet do wersji 3.0.0.</span><span class="sxs-lookup"><span data-stu-id="f7deb-246">From the **Manage NuGet Packages** window, find and update the **Microsoft.Owin** package to version 3.0.0.</span></span>
14. <span data-ttu-id="f7deb-247">W programie Visual Studio, należy zaktualizować `UseGoogleAuthentication` metody *Startup.Auth.cs* strony przez kopiowanie i wklejanie **identyfikator klienta** i **klucz tajny klienta** do metody.</span><span class="sxs-lookup"><span data-stu-id="f7deb-247">In Visual Studio, update the `UseGoogleAuthentication` method of the *Startup.Auth.cs* page by copying and pasting the **Client ID** and **Client Secret** into the method.</span></span> <span data-ttu-id="f7deb-248">**Identyfikator klienta** i **klucz tajny klienta** wartości podanych poniżej są przykłady i nie będzie działać.</span><span class="sxs-lookup"><span data-stu-id="f7deb-248">The **Client ID** and **Client Secret** values shown below are samples and will not work.</span></span> 

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample7.cs?highlight=64-65)]
15. <span data-ttu-id="f7deb-249">Naciśnij klawisz **kombinację klawiszy CTRL + F5** Aby skompilować i uruchomić aplikację.</span><span class="sxs-lookup"><span data-stu-id="f7deb-249">Press **CTRL+F5** to build and run the application.</span></span> <span data-ttu-id="f7deb-250">Kliknij przycisk **Zaloguj** łącza.</span><span class="sxs-lookup"><span data-stu-id="f7deb-250">Click the **Log in** link.</span></span>
16. <span data-ttu-id="f7deb-251">W obszarze **Zaloguj się za pomocą innej usługi**, kliknij przycisk **Google**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-251">Under **Use another service to log in**, click **Google**.</span></span>  
    ![Zaloguj się](checkout-and-payment-with-paypal/_static/image11.png)
17. <span data-ttu-id="f7deb-253">Jeśli potrzebujesz wprowadzić swoje poświadczenia, nastąpi przekierowanie do witryny google, w którym należy wprowadzić poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="f7deb-253">If you need to enter your credentials, you will be redirected to the google site where you will enter your credentials.</span></span>  
    ![Google - logowania](checkout-and-payment-with-paypal/_static/image12.png)
18. <span data-ttu-id="f7deb-255">Po wprowadzeniu poświadczeń, wyświetli się monit o nadać uprawnienia do aplikacji sieci web, który został utworzony.</span><span class="sxs-lookup"><span data-stu-id="f7deb-255">After you enter your credentials, you will be prompted to give permissions to the web application you just created.</span></span>  
    ![Projekt domyślne konto usługi](checkout-and-payment-with-paypal/_static/image13.png)
19. <span data-ttu-id="f7deb-257">Kliknij przycisk **zaakceptować**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-257">Click **Accept**.</span></span> <span data-ttu-id="f7deb-258">Teraz nastąpi przekierowanie do **zarejestrować** strony **WingtipToys** aplikacji, gdy zarejestrujesz swoje konto Google.</span><span class="sxs-lookup"><span data-stu-id="f7deb-258">You will now be redirected back to the **Register** page of the **WingtipToys** application where you can register your Google account.</span></span>  
    ![Zarejestruj za pomocą konta Google](checkout-and-payment-with-paypal/_static/image14.png)
20. <span data-ttu-id="f7deb-260">Masz możliwość zmiany nazwy rejestracji lokalny adres e-mail używany dla tego konta usługi Gmail, ale zazwyczaj chcesz zachować aliasu adresu e-mail domyślne (czyli ten, który używany do uwierzytelniania).</span><span class="sxs-lookup"><span data-stu-id="f7deb-260">You have the option of changing the local email registration name used for your Gmail account, but you generally want to keep the default email alias (that is, the one you used for authentication).</span></span> <span data-ttu-id="f7deb-261">Kliknij przycisk **Zaloguj** jak pokazano powyżej.</span><span class="sxs-lookup"><span data-stu-id="f7deb-261">Click **Log in** as shown above.</span></span>

### <a name="modifying-login-functionality"></a><span data-ttu-id="f7deb-262">Modyfikowanie funkcji logowania</span><span class="sxs-lookup"><span data-stu-id="f7deb-262">Modifying Login Functionality</span></span>

<span data-ttu-id="f7deb-263">Jak już wspomniano w tej serii samouczków większość funkcji rejestracja użytkownika została uwzględniona w szablonie formularzy sieci Web ASP.NET domyślnie.</span><span class="sxs-lookup"><span data-stu-id="f7deb-263">As previously mentioned in this tutorial series, much of the user registration functionality has been included in the ASP.NET Web Forms template by default.</span></span> <span data-ttu-id="f7deb-264">Teraz należy zmodyfikować domyślną *Login.aspx* i *Register.aspx* strony, aby wywołać `MigrateCart` metody.</span><span class="sxs-lookup"><span data-stu-id="f7deb-264">Now you will modify the default *Login.aspx* and *Register.aspx* pages to call the `MigrateCart` method.</span></span> <span data-ttu-id="f7deb-265">`MigrateCart` Metoda kojarzy nowo zalogowanego użytkownika z anonimowych koszyk sklepowy.</span><span class="sxs-lookup"><span data-stu-id="f7deb-265">The `MigrateCart` method associates a newly logged in user with an anonymous shopping cart.</span></span> <span data-ttu-id="f7deb-266">Przykładowej aplikacji Wingtip Toys skojarzenie użytkownika i koszyk, będzie można utrzymać koszyka użytkownika między wizyty.</span><span class="sxs-lookup"><span data-stu-id="f7deb-266">By associating the user and shopping cart, the Wingtip Toys sample application will be able to maintain the shopping cart of the user between visits.</span></span>

1. <span data-ttu-id="f7deb-267">W **Eksploratora rozwiązań**, znajdowanie i otwieranie *konta* folderu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-267">In **Solution Explorer**, find and open the *Account* folder.</span></span>
2. <span data-ttu-id="f7deb-268">Modyfikuj stronę związanym z kodem o nazwie *Login.aspx.cs* obejmujący kod wyróżniony na żółto, tak aby była wyświetlana w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="f7deb-268">Modify the code-behind page named *Login.aspx.cs* to include the code highlighted in yellow, so that it appears as follows:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample8.cs?highlight=41-43)]
3. <span data-ttu-id="f7deb-269">Zapisz *Login.aspx.cs* pliku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-269">Save the *Login.aspx.cs* file.</span></span>

<span data-ttu-id="f7deb-270">Teraz możesz zignorować to ostrzeżenie, że nie ma żadnych definicji `MigrateCart` metody.</span><span class="sxs-lookup"><span data-stu-id="f7deb-270">For now, you can ignore the warning that there is no definition for the `MigrateCart` method.</span></span> <span data-ttu-id="f7deb-271">Dodasz je nieco później w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-271">You will be adding it a bit later in this tutorial.</span></span>

<span data-ttu-id="f7deb-272">*Login.aspx.cs* pliku związanego z kodem obsługuje metodę logowania.</span><span class="sxs-lookup"><span data-stu-id="f7deb-272">The *Login.aspx.cs* code-behind file supports a LogIn method.</span></span> <span data-ttu-id="f7deb-273">Sprawdzając strony Login.aspx, zobaczysz, że ta strona zawiera przycisk "Zaloguj" że w przypadku kliknij wyzwalaczy `LogIn` obsługi na związanym z kodem.</span><span class="sxs-lookup"><span data-stu-id="f7deb-273">By inspecting the Login.aspx page, you'll see that this page includes a "Log in" button that when click triggers the `LogIn` handler on the code-behind.</span></span>

<span data-ttu-id="f7deb-274">Gdy `Login` metody *Login.aspx.cs* jest wywoływana, nowe wystąpienie klasy koszyka o nazwie `usersShoppingCart` jest tworzony.</span><span class="sxs-lookup"><span data-stu-id="f7deb-274">When the `Login` method on the *Login.aspx.cs* is called, a new instance of the shopping cart named `usersShoppingCart` is created.</span></span> <span data-ttu-id="f7deb-275">Identyfikator koszyka (GUID) jest pobierana i `cartId` zmiennej.</span><span class="sxs-lookup"><span data-stu-id="f7deb-275">The ID of the shopping cart (a GUID) is retrieved and set to the `cartId` variable.</span></span> <span data-ttu-id="f7deb-276">Następnie `MigrateCart` metoda jest wywoływana z przekazaniem zarówno `cartId` i nazwa zalogowanego użytkownika do tej metody.</span><span class="sxs-lookup"><span data-stu-id="f7deb-276">Then, the `MigrateCart` method is called, passing both the `cartId` and the name of the logged-in user to this method.</span></span> <span data-ttu-id="f7deb-277">Podczas migracji koszyka identyfikator GUID używany do identyfikowania anonimowe koszyka jest zastępowana nazwą użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f7deb-277">When the shopping cart is migrated, the GUID used to identify the anonymous shopping cart is replaced with the user name.</span></span>

<span data-ttu-id="f7deb-278">Oprócz modyfikowania *Login.aspx.cs* pliku związanego z kodem, aby Migrowanie koszyka, gdy użytkownik loguje się, musisz także zmodyfikować *pliku związanego z kodem Register.aspx.cs* do Migrowanie koszyka gdy użytkownik tworzy nowe konto i loguje się.</span><span class="sxs-lookup"><span data-stu-id="f7deb-278">In addition to modifying the *Login.aspx.cs* code-behind file to migrate the shopping cart when the user logs in, you must also modify the *Register.aspx.cs code-behind file* to migrate the shopping cart when the user creates a new account and logs in.</span></span>

1. <span data-ttu-id="f7deb-279">W *konta* folder, otwórz plik związany z kodem o nazwie *Register.aspx.cs*.</span><span class="sxs-lookup"><span data-stu-id="f7deb-279">In the *Account* folder, open the code-behind file named *Register.aspx.cs*.</span></span>
2. <span data-ttu-id="f7deb-280">Modyfikowanie pliku związanego z kodem, dołączając kod w kolorze żółtym, tak, aby wyglądał następująco:</span><span class="sxs-lookup"><span data-stu-id="f7deb-280">Modify the code-behind file by including the code in yellow, so that it appears as follows:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample9.cs?highlight=28-32)]
3. <span data-ttu-id="f7deb-281">Zapisz *Register.aspx.cs* pliku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-281">Save the *Register.aspx.cs* file.</span></span> <span data-ttu-id="f7deb-282">Jeszcze raz zignorować ostrzeżenie dotyczące `MigrateCart` metody.</span><span class="sxs-lookup"><span data-stu-id="f7deb-282">Once again, ignore the warning about the `MigrateCart` method.</span></span>

<span data-ttu-id="f7deb-283">Należy zauważyć, że kodu użyto w `CreateUser_Click` programu obsługi zdarzeń jest bardzo podobny do kod używany w `LogIn` metody.</span><span class="sxs-lookup"><span data-stu-id="f7deb-283">Notice that the code you used in the `CreateUser_Click` event handler is very similar to the code you used in the `LogIn` method.</span></span> <span data-ttu-id="f7deb-284">Kiedy użytkownik rejestruje lub loguje się do witryny wywołania `MigrateCart` metody zostaną wprowadzone.</span><span class="sxs-lookup"><span data-stu-id="f7deb-284">When the user registers or logs in to the site, a call to the `MigrateCart` method will be made.</span></span>

## <a name="migrating-the-shopping-cart"></a><span data-ttu-id="f7deb-285">Migrowanie koszyka</span><span class="sxs-lookup"><span data-stu-id="f7deb-285">Migrating the Shopping Cart</span></span>

<span data-ttu-id="f7deb-286">Teraz, gdy proces logowania i rejestracji aktualizacji, można dodać kod, aby przeprowadzić migrację do koszyk sklepowy przy użyciu `MigrateCart` metody.</span><span class="sxs-lookup"><span data-stu-id="f7deb-286">Now that you have the log-in and registration process updated, you can add the code to migrate the shopping cart using the `MigrateCart` method.</span></span>

1. <span data-ttu-id="f7deb-287">W **Eksploratora rozwiązań**, Znajdź *logiki* folder i Otwórz *ShoppingCartActions.cs* pliku klasy.</span><span class="sxs-lookup"><span data-stu-id="f7deb-287">In **Solution Explorer**, find the *Logic* folder and open the *ShoppingCartActions.cs* class file.</span></span>
2. <span data-ttu-id="f7deb-288">Dodaj kod wyróżniony na żółto z istniejącym kodem w *ShoppingCartActions.cs* pliku, tak, aby kod w *ShoppingCartActions.cs* plik pojawia się w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="f7deb-288">Add the code highlighted in yellow to the existing code in the *ShoppingCartActions.cs* file, so that the code in the *ShoppingCartActions.cs* file appears as follows:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample10.cs?highlight=215-224)]

<span data-ttu-id="f7deb-289">`MigrateCart` Metoda używa istniejących cartId w celu odnalezienia koszyka użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f7deb-289">The `MigrateCart` method uses the existing cartId to find the shopping cart of the user.</span></span> <span data-ttu-id="f7deb-290">Następnie kod w pętli wszystkich elementów koszyka zakupów i zastępuje `CartId` właściwości (zgodnie z określonym `CartItem` schematu) o nazwie zalogowanego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f7deb-290">Next, the code loops through all the shopping cart items and replaces the `CartId` property (as specified by the `CartItem` schema) with the logged-in user name.</span></span>

### <a name="updating-the-database-connection"></a><span data-ttu-id="f7deb-291">Aktualizowanie połączenia z bazą danych</span><span class="sxs-lookup"><span data-stu-id="f7deb-291">Updating the Database Connection</span></span>

<span data-ttu-id="f7deb-292">Jeśli korzystasz z tego samouczka przy użyciu **wstępnie** Wingtip Toys przykładowej aplikacji, należy ponownie utworzyć domyślna baza danych członkostwa.</span><span class="sxs-lookup"><span data-stu-id="f7deb-292">If you are following this tutorial using the **prebuilt** Wingtip Toys sample application, you must recreate the default membership database.</span></span> <span data-ttu-id="f7deb-293">Po zmodyfikowaniu domyślne parametry połączenia, bazy danych członkostwa zostanie utworzony przy następnym uruchomieniu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f7deb-293">By modifying the default connection string, the membership database will be created the next time the application runs.</span></span>

1. <span data-ttu-id="f7deb-294">Otwórz *Web.config* pliku w folderze głównym projektu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-294">Open the *Web.config* file at the root of the project.</span></span>
2. <span data-ttu-id="f7deb-295">Domyślne parametry połączenia należy zaktualizować tak, aby wyglądał następująco:</span><span class="sxs-lookup"><span data-stu-id="f7deb-295">Update the default connection string so that it appears as follows:</span></span>   

    [!code-xml[Main](checkout-and-payment-with-paypal/samples/sample11.xml)]

<a id="PayPalWebForms"></a>
## <a name="integrating-paypal"></a><span data-ttu-id="f7deb-296">Integrowanie PayPal</span><span class="sxs-lookup"><span data-stu-id="f7deb-296">Integrating PayPal</span></span>

<span data-ttu-id="f7deb-297">PayPal to platforma rozliczania opartego na sieci web akceptujący płatności dokonywanych przez sprzedawców internetowych.</span><span class="sxs-lookup"><span data-stu-id="f7deb-297">PayPal is a web-based billing platform that accepts payments by online merchants.</span></span> <span data-ttu-id="f7deb-298">Następnie w tym samouczku wyjaśniono, jak integrowanie PayPal Express funkcją finalizacji zakupu w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f7deb-298">This tutorial next explains how to integrate PayPal's Express Checkout functionality into your application.</span></span> <span data-ttu-id="f7deb-299">Wyewidencjonuj Express pozwala klientom na użyć PayPal do zapłacenia za elementy dodane do ich koszyk sklepowy.</span><span class="sxs-lookup"><span data-stu-id="f7deb-299">Express Checkout allows your customers to use PayPal to pay for the items they have added to their shopping cart.</span></span>

### <a name="create-paypal-test-accounts"></a><span data-ttu-id="f7deb-300">Tworzenie konta PayPal testowania</span><span class="sxs-lookup"><span data-stu-id="f7deb-300">Create PayPal Test Accounts</span></span>

<span data-ttu-id="f7deb-301">Korzystanie z usługi PayPal, w środowisku testowym, należy utworzyć i zweryfikować konta dewelopera testu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-301">To use the PayPal testing environment, you must create and verify a developer test account.</span></span> <span data-ttu-id="f7deb-302">Testowe konto dewelopera użyje do utworzenia kupujący konto testowe i testowe konto sprzedawcy.</span><span class="sxs-lookup"><span data-stu-id="f7deb-302">You will use the developer test account to create a buyer test account and a seller test account.</span></span> <span data-ttu-id="f7deb-303">Poświadczenia konta dewelopera testu umożliwi również przykładowej aplikacji Wingtip Toys w celu dostępu do środowiska testowego systemu PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-303">The developer test account credentials also will allow the Wingtip Toys sample application to access the PayPal testing environment.</span></span>

1. <span data-ttu-id="f7deb-304">W przeglądarce przejdź do testowania witryny dewelopera PayPal:</span><span class="sxs-lookup"><span data-stu-id="f7deb-304">In a browser, navigate to the PayPal developer testing site:</span></span>   
    [https://developer.paypal.com](https://developer.paypal.com/)
2. <span data-ttu-id="f7deb-305">Jeśli nie masz konta dewelopera systemu PayPal, należy utworzyć nowe konto, klikając **Zarejestruj**i postępowanie rejestracji kroki.</span><span class="sxs-lookup"><span data-stu-id="f7deb-305">If you don't have a PayPal developer account, create a new account by clicking **Sign Up**and following the sign up steps.</span></span> <span data-ttu-id="f7deb-306">Jeśli masz istniejące konto dewelopera systemu PayPal, zaloguj się, klikając **logowanie**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-306">If you have an existing PayPal developer account, sign in by clicking **Log In**.</span></span> <span data-ttu-id="f7deb-307">Konieczne będzie konta dewelopera systemu PayPal, aby przetestować przykładowej aplikacji Wingtip Toys w dalszej części tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="f7deb-307">You will need your PayPal developer account to test the Wingtip Toys sample application later in this tutorial.</span></span>
3. <span data-ttu-id="f7deb-308">Jeśli właśnie zarejestrowano do konta dewelopera systemu PayPal, może być konieczne Sprawdź konta PayPal dewelopera w systemie PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-308">If you have just signed up for your PayPal developer account, you may need to verify your PayPal developer account with PayPal.</span></span> <span data-ttu-id="f7deb-309">Aby zweryfikować swoje konto, należy wykonać kroki, które PayPal wysyłane do swojego konta e-mail.</span><span class="sxs-lookup"><span data-stu-id="f7deb-309">You can verify your account by following the steps that PayPal sent to your email account.</span></span> <span data-ttu-id="f7deb-310">Po zweryfikowaniu konta dewelopera systemu PayPal, zaloguj się do testowania witryny dewelopera PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-310">Once you have verified your PayPal developer account, log back into the PayPal developer testing site.</span></span>
4. <span data-ttu-id="f7deb-311">Po użytkownik jest zalogowany do witryny dla deweloperów PayPal za pomocą konta dewelopera systemu PayPal, musisz utworzyć konto PayPal kupujący testu, jeśli już nie mieć jedną.</span><span class="sxs-lookup"><span data-stu-id="f7deb-311">After you are logged in to the PayPal developer site with your PayPal developer account you need to create a PayPal buyer test account if you don't already have one.</span></span> <span data-ttu-id="f7deb-312">Aby utworzyć konto testu nabywców, kliknij pozycję witryny PayPal **aplikacje** kartę, a następnie kliknij przycisk **kont piaskownicy**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-312">To create a buyer test account, on the PayPal site click the **Applications** tab and then click **Sandbox accounts**.</span></span>   
 <span data-ttu-id="f7deb-313">**Piaskownicy testowe konta** strona jest wyświetlana.</span><span class="sxs-lookup"><span data-stu-id="f7deb-313">The **Sandbox test accounts** page is shown.</span></span>   

    > [!NOTE] 
    > 
    > <span data-ttu-id="f7deb-314">Witryny dewelopera PayPal zawiera już konta handlowca testu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-314">The PayPal Developer site already provides a merchant test account.</span></span>

    ![Finalizacja zakupu i płatność w systemie PayPal — piaskownicy testowe konta](checkout-and-payment-with-paypal/_static/image15.png)
5. <span data-ttu-id="f7deb-316">Na stronie kont piaskownicy testu kliknij **Utwórz konto**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-316">On the Sandbox test accounts page, click **Create Account**.</span></span>
6. <span data-ttu-id="f7deb-317">Na **Utwórz testowe konto** strony wybierz kupującego testową wiadomość e-mail z konta i hasła wybranych przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f7deb-317">On the **Create test account** page choose a buyer test account email and password of your choice.</span></span>   

    > [!NOTE] 
    > 
    > <span data-ttu-id="f7deb-318">Konieczne będzie kupujący adresy e-mail i hasło, aby przetestować aplikację przykładową Wingtip Toys na końcu tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="f7deb-318">You will need the buyer email addresses and password to test the Wingtip Toys sample application at the end of this tutorial.</span></span>

    ![Finalizacja zakupu i płatność w systemie PayPal — piaskownicy testowe konta](checkout-and-payment-with-paypal/_static/image16.png)
7. <span data-ttu-id="f7deb-320">Tworzenie konta testowego nabywców, klikając **Utwórz konto** przycisku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-320">Create the buyer test account by clicking the **Create Account** button.</span></span>  
 <span data-ttu-id="f7deb-321">**Konta testowania piaskownicy** zostanie wyświetlona strona.</span><span class="sxs-lookup"><span data-stu-id="f7deb-321">The **Sandbox Test accounts** page is displayed.</span></span> 

    ![Finalizacja zakupu i płatność w systemie PayPal — konta PayPal](checkout-and-payment-with-paypal/_static/image17.png)
8. <span data-ttu-id="f7deb-323">Na **piaskownicy testowe konta** kliknij **facylitatora** konto e-mail.</span><span class="sxs-lookup"><span data-stu-id="f7deb-323">On the **Sandbox test accounts** page, click the **facilitator** email account.</span></span>  
    <span data-ttu-id="f7deb-324">**Profil** i **powiadomień** opcje są wyświetlane.</span><span class="sxs-lookup"><span data-stu-id="f7deb-324">**Profile** and **Notification** options appear.</span></span>
9. <span data-ttu-id="f7deb-325">Wybierz **profilu** opcji, a następnie kliknij przycisk **poświadczenia API** Aby wyświetlić poświadczenia interfejsu API dla konta handlowca testu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-325">Select the **Profile** option, then click **API credentials** to view your API credentials for the merchant test account.</span></span>
10. <span data-ttu-id="f7deb-326">Skopiuj poświadczenia testowanie interfejsu API do Notatnika.</span><span class="sxs-lookup"><span data-stu-id="f7deb-326">Copy the TEST API credentials to notepad.</span></span>

<span data-ttu-id="f7deb-327">Konieczne będzie wyświetlany poświadczenia klasycznego interfejsu API testu (nazwa użytkownika, hasło i podpis), które wykonywania wywołań interfejsu API z przykładowej aplikacji Wingtip Toys PayPal środowiska testowego.</span><span class="sxs-lookup"><span data-stu-id="f7deb-327">You will need your displayed Classic TEST API credentials (Username, Password, and Signature) to make API calls from the Wingtip Toys sample application to the PayPal testing environment.</span></span> <span data-ttu-id="f7deb-328">Poświadczenia zostaną dodane w następnym kroku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-328">You will add the credentials in the next step.</span></span>

### <a name="add-paypal-class-and-api-credentials"></a><span data-ttu-id="f7deb-329">Dodaj klasę PayPal i poświadczenia interfejsu API</span><span class="sxs-lookup"><span data-stu-id="f7deb-329">Add PayPal Class and API Credentials</span></span>

<span data-ttu-id="f7deb-330">Spowoduje umieszczenie większość kodu PayPal w jednej klasie.</span><span class="sxs-lookup"><span data-stu-id="f7deb-330">You will place the majority of the PayPal code into a single class.</span></span> <span data-ttu-id="f7deb-331">Ta klasa zawiera metody służące do komunikowania się z systemu PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-331">This class contains the methods used to communicate with PayPal.</span></span> <span data-ttu-id="f7deb-332">Ponadto doda poświadczenia PayPal do tej klasy.</span><span class="sxs-lookup"><span data-stu-id="f7deb-332">Also, you will add your PayPal credentials to this class.</span></span>

1. <span data-ttu-id="f7deb-333">W aplikacji przykładowej aplikacji Wingtip Toys w programie Visual Studio, kliknij prawym przyciskiem myszy **logiki** folder, a następnie wybierz **Dodaj**  - &gt; **nowy element**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-333">In the Wingtip Toys sample application within Visual Studio, right-click the **Logic** folder and then select **Add** -&gt; **New Item**.</span></span>   
   <span data-ttu-id="f7deb-334">**Dodaj nowy element** zostanie wyświetlone okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="f7deb-334">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="f7deb-335">W obszarze **Visual C#** z **zainstalowane** w okienku po lewej stronie, wybierz opcję **kodu**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-335">Under **Visual C#** from the **Installed** pane on the left, select **Code**.</span></span>
3. <span data-ttu-id="f7deb-336">W środkowym okienku wybierz **klasy**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-336">From the middle pane, select **Class**.</span></span> <span data-ttu-id="f7deb-337">Nazwa ta nowa klasa **PayPalFunctions.cs**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-337">Name this new class **PayPalFunctions.cs**.</span></span>
4. <span data-ttu-id="f7deb-338">Kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-338">Click **Add**.</span></span>  
   <span data-ttu-id="f7deb-339">Plik nowej klasy jest wyświetlany w edytorze.</span><span class="sxs-lookup"><span data-stu-id="f7deb-339">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="f7deb-340">Zastąp domyślny kod następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="f7deb-340">Replace the default code with the following code:</span></span>  

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample12.cs)]
6. <span data-ttu-id="f7deb-341">Dodaj poświadczenia handlowca interfejsu API (nazwa użytkownika, hasło i podpis), które wyświetlane we wcześniejszej części tego samouczka, aby można było wywołania funkcji do środowiska testowego systemu PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-341">Add the Merchant API credentials (Username, Password, and Signature) that you displayed earlier in this tutorial so that you can make function calls to the PayPal testing environment.</span></span>  

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample13.cs)]

> [!NOTE] 
> 
> <span data-ttu-id="f7deb-342">W tej przykładowej aplikacji są po prostu dodawania poświadczeń do pliku C# (CS).</span><span class="sxs-lookup"><span data-stu-id="f7deb-342">In this sample application you are simply adding credentials to a C# file (.cs).</span></span> <span data-ttu-id="f7deb-343">Jednak w rozwiązaniu zaimplementowano, należy rozważyć szyfrowanie poświadczeń w pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="f7deb-343">However, in a implemented solution, you should consider encrypting your credentials in a configuration file.</span></span>


<span data-ttu-id="f7deb-344">Klasa NVPAPICaller zawiera obsługę większości funkcji PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-344">The NVPAPICaller class contains the majority of the PayPal functionality.</span></span> <span data-ttu-id="f7deb-345">Kod w klasie zapewnia metody potrzebne do dokonywania zakupów w środowisku testowym PayPal testu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-345">The code in the class provides the methods needed to make a test purchase from the PayPal testing environment.</span></span> <span data-ttu-id="f7deb-346">Następujące trzy funkcje PayPal są używane do robienia zakupów:</span><span class="sxs-lookup"><span data-stu-id="f7deb-346">The following three PayPal functions are used to make purchases:</span></span>

- `SetExpressCheckout` <span data-ttu-id="f7deb-347"> — funkcja</span><span class="sxs-lookup"><span data-stu-id="f7deb-347">function</span></span>
- `GetExpressCheckoutDetails` <span data-ttu-id="f7deb-348"> — funkcja</span><span class="sxs-lookup"><span data-stu-id="f7deb-348">function</span></span>
- `DoExpressCheckoutPayment` <span data-ttu-id="f7deb-349"> — funkcja</span><span class="sxs-lookup"><span data-stu-id="f7deb-349">function</span></span>

<span data-ttu-id="f7deb-350">`ShortcutExpressCheckout` Metoda zbiera szczegóły informacji i produktu zakupu testu z koszyka zakupów i wywołania `SetExpressCheckout` funkcji PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-350">The `ShortcutExpressCheckout` method collects the test purchase information and product details from the shopping cart and calls the `SetExpressCheckout` PayPal function.</span></span> <span data-ttu-id="f7deb-351">`GetCheckoutDetails` Metoda potwierdza szczegóły zakupu i wywołania `GetExpressCheckoutDetails` funkcji PayPal przed dokonaniem zakupu testu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-351">The `GetCheckoutDetails` method confirms purchase details and calls the `GetExpressCheckoutDetails` PayPal function before making the test purchase.</span></span> <span data-ttu-id="f7deb-352">`DoCheckoutPayment` Ukończeniu metody zakupu testów w środowisku testowym, wywołując `DoExpressCheckoutPayment` funkcji PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-352">The `DoCheckoutPayment` method completes the test purchase from the testing environment by calling the `DoExpressCheckoutPayment` PayPal function.</span></span> <span data-ttu-id="f7deb-353">Pozostały kod obsługuje metody płatności PayPal i procesu, takie jak kodowanie ciągów, dekodowania ciągów, przetwarzanie tablic i określanie poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="f7deb-353">The remaining code supports the PayPal methods and process, such as encoding strings, decoding strings, processing arrays, and determining credentials.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="f7deb-354">PayPal umożliwia dołączanie szczegóły zakupu opcjonalne, na podstawie [specyfikacji interfejsu API PayPal](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&amp;content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout).</span><span class="sxs-lookup"><span data-stu-id="f7deb-354">PayPal allows you to include optional purchase details based on [PayPal's API specification](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&amp;content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout).</span></span> <span data-ttu-id="f7deb-355">Rozszerzając kodu w przykładowej aplikacji Wingtip Toys, może zawierać szczegóły lokalizacji, opisy produktów, podatku, numer usługi klienta, a także wiele innych pól opcjonalnych.</span><span class="sxs-lookup"><span data-stu-id="f7deb-355">By extending the code in the Wingtip Toys sample application, you can include localization details, product descriptions, tax, a customer service number, as well as many other optional fields.</span></span>


<span data-ttu-id="f7deb-356">Należy zauważyć, że adresów URL zwracane i anulowania, które są określone w **ShortcutExpressCheckout** metody używania numeru portu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-356">Notice that the return and cancel URLs that are specified in the **ShortcutExpressCheckout** method use a port number.</span></span>

[!code-html[Main](checkout-and-payment-with-paypal/samples/sample14.html)]

<span data-ttu-id="f7deb-357">Po uruchomieniu projektu sieci web przy użyciu protokołu SSL dla programu Visual Web Developer często port 44300 jest używany dla serwera sieci web.</span><span class="sxs-lookup"><span data-stu-id="f7deb-357">When Visual Web Developer runs a web project using SSL, commonly the port 44300 is used for the web server.</span></span> <span data-ttu-id="f7deb-358">Jak wspomniano powyżej, numer portu jest 44300.</span><span class="sxs-lookup"><span data-stu-id="f7deb-358">As shown above, the port number is 44300.</span></span> <span data-ttu-id="f7deb-359">Po uruchomieniu aplikacji, można uzyskać inny numer portu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-359">When you run the application, you could see a different port number.</span></span> <span data-ttu-id="f7deb-360">Twoje potrzeby numeru portu należy poprawnie ustawić w kodzie aby można było pomyślne uruchamianie przykładowej aplikacji Wingtip Toys na końcu tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="f7deb-360">Your port number needs to be correctly set in the code so that you can successful run the Wingtip Toys sample application at the end of this tutorial.</span></span> <span data-ttu-id="f7deb-361">Następna sekcji tego samouczka wyjaśniono, jak pobrać numer portu lokalnego hosta i zaktualizować klasy PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-361">The next section of this tutorial explains how to retrieve the local host port number and update the PayPal class.</span></span>

### <a name="update-the-localhost-port-number-in-the-paypal-class"></a><span data-ttu-id="f7deb-362">Zaktualizuj numer portu LocalHost w klasie PayPal</span><span class="sxs-lookup"><span data-stu-id="f7deb-362">Update the LocalHost Port Number in the PayPal Class</span></span>

<span data-ttu-id="f7deb-363">Przykładowej aplikacji Wingtip Toys zakupów produktów, przechodząc do witryny testowania PayPal i powrocie do lokalnego wystąpienia programu przykładowej aplikacji Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="f7deb-363">The Wingtip Toys sample application purchases products by navigating to the PayPal testing site and returning to your local instance of the Wingtip Toys sample application.</span></span> <span data-ttu-id="f7deb-364">Aby mogła mieć PayPal, wróć do prawidłowego adresu URL, należy określić numer portu lokalnego uruchamiania przykładowej aplikacji w kodzie PayPal wymienionych powyżej.</span><span class="sxs-lookup"><span data-stu-id="f7deb-364">In order to have PayPal return to the correct URL, you need to specify the port number of the locally running sample application in the PayPal code mentioned above.</span></span>

1. <span data-ttu-id="f7deb-365">Kliknij prawym przyciskiem myszy nazwę projektu (**WingtipToys**) w **Eksploratora rozwiązań** i wybierz **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-365">Right-click the project name (**WingtipToys**) in **Solution Explorer** and select **Properties**.</span></span>
2. <span data-ttu-id="f7deb-366">W kolumnie po lewej stronie wybierz **Web** kartę.</span><span class="sxs-lookup"><span data-stu-id="f7deb-366">In the left column, select the **Web** tab.</span></span>
3. <span data-ttu-id="f7deb-367">Pobieranie numer portu z **adres Url projektu** pole.</span><span class="sxs-lookup"><span data-stu-id="f7deb-367">Retrieve the port number from the **Project Url** box.</span></span>
4. <span data-ttu-id="f7deb-368">W razie potrzeby zaktualizuj `returnURL` i `cancelURL` w klasie PayPal (`NVPAPICaller`) w *PayPalFunctions.cs* plik do użycia numer portu w aplikacji sieci web:</span><span class="sxs-lookup"><span data-stu-id="f7deb-368">If needed, update the `returnURL` and `cancelURL` in the PayPal class (`NVPAPICaller`) in the *PayPalFunctions.cs* file to use the port number of your web application:</span></span>   

    [!code-html[Main](checkout-and-payment-with-paypal/samples/sample15.html?highlight=1-2)]

<span data-ttu-id="f7deb-369">Teraz kod, który został dodany będzie zgodna z oczekiwanym portów lokalnych aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="f7deb-369">Now the code that you added will match the expected port for your local Web application.</span></span> <span data-ttu-id="f7deb-370">PayPal będzie możliwość powrotu do prawidłowego adresu URL, na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="f7deb-370">PayPal will be able to return to the correct URL on your local machine.</span></span>

### <a name="add-the-paypal-checkout-button"></a><span data-ttu-id="f7deb-371">Dodawanie przycisku PayPal wyewidencjonowania</span><span class="sxs-lookup"><span data-stu-id="f7deb-371">Add the PayPal Checkout Button</span></span>

<span data-ttu-id="f7deb-372">Teraz, że podstawowe funkcje PayPal zostały dodane do przykładowej aplikacji, możesz rozpocząć dodawanie znaczników i kodu, wymagane do wywołania tych funkcji.</span><span class="sxs-lookup"><span data-stu-id="f7deb-372">Now that the primary PayPal functions have been added to the sample application, you can begin adding the markup and code needed to call these functions.</span></span> <span data-ttu-id="f7deb-373">Najpierw należy dodać przycisk wyewidencjonowania, który użytkownik zobaczy na stronie Koszyk sklepowy.</span><span class="sxs-lookup"><span data-stu-id="f7deb-373">First, you must add the checkout button that the user will see on the shopping cart page.</span></span>

1. <span data-ttu-id="f7deb-374">Otwórz *ShoppingCart.aspx* pliku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-374">Open the *ShoppingCart.aspx* file.</span></span>
2. <span data-ttu-id="f7deb-375">Przewiń w dół pliku i Znajdź `<!--Checkout Placeholder -->` komentarz.</span><span class="sxs-lookup"><span data-stu-id="f7deb-375">Scroll to the bottom of the file and find the `<!--Checkout Placeholder -->` comment.</span></span>
3. <span data-ttu-id="f7deb-376">Zastąp komentarz z `ImageButton` kontrolki narzutu, który zostanie zastąpiony w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="f7deb-376">Replace the comment with an `ImageButton` control so that the mark up is replaced as follows:</span></span>  

    [!code-aspx[Main](checkout-and-payment-with-paypal/samples/sample16.aspx)]
4. <span data-ttu-id="f7deb-377">W *ShoppingCart.aspx.cs* pliku po `UpdateBtn_Click` dodać program obsługi zdarzeń w pobliżu końca pliku, `CheckOutBtn_Click` program obsługi zdarzeń:</span><span class="sxs-lookup"><span data-stu-id="f7deb-377">In the *ShoppingCart.aspx.cs* file, after the `UpdateBtn_Click` event handler near the end of the file, add the `CheckOutBtn_Click` event handler:</span></span>  

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample17.cs)]
5. <span data-ttu-id="f7deb-378">Również w *ShoppingCart.aspx.cs* Dodaj odwołanie do `CheckoutBtn`, dzięki czemu przycisku Nowy obraz, mowa w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="f7deb-378">Also in the *ShoppingCart.aspx.cs* file, add a reference to the `CheckoutBtn`, so that the new image button is referenced as follows:</span></span>  

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample18.cs?highlight=18)]
6. <span data-ttu-id="f7deb-379">Zapisz zmiany w obu *ShoppingCart.aspx* pliku i *ShoppingCart.aspx.cs* pliku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-379">Save your changes to both the *ShoppingCart.aspx* file and the *ShoppingCart.aspx.cs* file.</span></span>
7. <span data-ttu-id="f7deb-380">W menu, wybierz opcję **debugowania**-&gt;**kompilacji WingtipToys**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-380">From the menu, select **Debug**-&gt;**Build WingtipToys**.</span></span>  
   <span data-ttu-id="f7deb-381">Projekt zostanie ponownie skompilowany przy użyciu nowo dodanych **ImageButton** kontroli.</span><span class="sxs-lookup"><span data-stu-id="f7deb-381">The project will be rebuilt with the newly added **ImageButton** control.</span></span>

### <a name="send-purchase-details-to-paypal"></a><span data-ttu-id="f7deb-382">Wysyłać szczegóły zakupu PayPal</span><span class="sxs-lookup"><span data-stu-id="f7deb-382">Send Purchase Details to PayPal</span></span>

<span data-ttu-id="f7deb-383">Kiedy użytkownik kliknie **wyewidencjonowania** przycisk na stronie koszyka (*ShoppingCart.aspx*), ich rozpocznie się proces zakupu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-383">When the user clicks the **Checkout** button on the shopping cart page (*ShoppingCart.aspx*), they'll begin the purchase process.</span></span> <span data-ttu-id="f7deb-384">Poniższy kod wywołuje pierwszej funkcji PayPal potrzebne do zakupu produktów.</span><span class="sxs-lookup"><span data-stu-id="f7deb-384">The following code calls the first PayPal function needed to purchase products.</span></span>

1. <span data-ttu-id="f7deb-385">Z *wyewidencjonowania* folder, otwórz plik związany z kodem o nazwie *CheckoutStart.aspx.cs*.</span><span class="sxs-lookup"><span data-stu-id="f7deb-385">From the *Checkout* folder, open the code-behind file named *CheckoutStart.aspx.cs*.</span></span>   
   <span data-ttu-id="f7deb-386">Pamiętaj otworzyć plik związany z kodem.</span><span class="sxs-lookup"><span data-stu-id="f7deb-386">Be sure to open the code-behind file.</span></span>
2. <span data-ttu-id="f7deb-387">Zastąp istniejący kod następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="f7deb-387">Replace the existing code with the following:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample19.cs)]

<span data-ttu-id="f7deb-388">Po kliknięciu przez użytkownika aplikacji **wyewidencjonowania** przycisk na stronie koszyka, przeglądarka spowoduje przejście do *CheckoutStart.aspx* strony.</span><span class="sxs-lookup"><span data-stu-id="f7deb-388">When the user of the application clicks the **Checkout** button on the shopping cart page, the browser will navigate to the *CheckoutStart.aspx* page.</span></span> <span data-ttu-id="f7deb-389">Gdy *CheckoutStart.aspx* stronie załadowanie `ShortcutExpressCheckout` metoda jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="f7deb-389">When the *CheckoutStart.aspx* page loads, the `ShortcutExpressCheckout` method is called.</span></span> <span data-ttu-id="f7deb-390">W tym momencie użytkownik jest przenoszona do witryny sieci web z testowania PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-390">At this point, the user is transferred to the PayPal testing web site.</span></span> <span data-ttu-id="f7deb-391">W witrynie PayPal użytkownika wprowadzenia poświadczeń systemu PayPal, przeglądy szczegóły zakupu, akceptuje Umowę PayPal i zwraca do przykładowej aplikacji Wingtip Toys gdzie `ShortcutExpressCheckout` ukończeniu metody.</span><span class="sxs-lookup"><span data-stu-id="f7deb-391">On the PayPal site, the user enters their PayPal credentials, reviews the purchase details, accepts the PayPal agreement and returns to the Wingtip Toys sample application where the `ShortcutExpressCheckout` method completes.</span></span> <span data-ttu-id="f7deb-392">Gdy `ShortcutExpressCheckout` metoda będzie gotowa, nastąpi przekierowanie użytkownika do *CheckoutReview.aspx* stronę określoną w `ShortcutExpressCheckout` metody.</span><span class="sxs-lookup"><span data-stu-id="f7deb-392">When the `ShortcutExpressCheckout` method is complete, it will redirect the user to the *CheckoutReview.aspx* page specified in the `ShortcutExpressCheckout` method.</span></span> <span data-ttu-id="f7deb-393">Dzięki temu użytkownikowi Przejrzyj szczegóły zamówienia w przykładowej aplikacji Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="f7deb-393">This allows the user to review the order details from within the Wingtip Toys sample application.</span></span>

### <a name="review-order-details"></a><span data-ttu-id="f7deb-394">Przejrzyj szczegóły zamówienia</span><span class="sxs-lookup"><span data-stu-id="f7deb-394">Review Order Details</span></span>

<span data-ttu-id="f7deb-395">Po powrocie z systemu PayPal, *CheckoutReview.aspx* strony przykładowej aplikacji Wingtip Toys Wyświetla szczegóły zamówienia.</span><span class="sxs-lookup"><span data-stu-id="f7deb-395">After returning from PayPal, the *CheckoutReview.aspx* page of the Wingtip Toys sample application displays the order details.</span></span> <span data-ttu-id="f7deb-396">Ta strona umożliwia użytkownikowi Przejrzyj szczegóły zamówienia przed dokonaniem zakupu produktów.</span><span class="sxs-lookup"><span data-stu-id="f7deb-396">This page allows the user to review the order details before purchasing the products.</span></span> <span data-ttu-id="f7deb-397">*CheckoutReview.aspx* strony musi zostać utworzona w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="f7deb-397">The *CheckoutReview.aspx* page must be created as follows:</span></span>

1. <span data-ttu-id="f7deb-398">W *wyewidencjonowania* folder, otwórz stronę o nazwie *CheckoutReview.aspx*.</span><span class="sxs-lookup"><span data-stu-id="f7deb-398">In the *Checkout* folder, open the page named *CheckoutReview.aspx*.</span></span>
2. <span data-ttu-id="f7deb-399">Zastąp istniejący kod znaczników następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="f7deb-399">Replace the existing markup with the following:</span></span>   

    [!code-aspx[Main](checkout-and-payment-with-paypal/samples/sample20.aspx)]
3. <span data-ttu-id="f7deb-400">Otwórz stronę związanym z kodem o nazwie *CheckoutReview.aspx.cs* i Zastąp istniejący kod następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="f7deb-400">Open the code-behind page named *CheckoutReview.aspx.cs* and replace the existing code with the following:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample21.cs)]

<span data-ttu-id="f7deb-401">**DetailsView** formantu służy do wyświetlenia szczegółów zamówienia, które zostały zwrócone z systemu PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-401">The **DetailsView** control is used to display the order details that have been returned from PayPal.</span></span> <span data-ttu-id="f7deb-402">Ponadto powyższy kod zapisuje szczegóły zamówienia do bazy danych o nazwie Wingtip Toys jako `OrderDetail` obiektu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-402">Also, the above code saves the order details to the Wingtip Toys database as an `OrderDetail` object.</span></span> <span data-ttu-id="f7deb-403">Gdy użytkownik kliknie **całe zamówienie** przycisku, zostanie przekierowany do *CheckoutComplete.aspx* strony.</span><span class="sxs-lookup"><span data-stu-id="f7deb-403">When the user clicks on the **Complete Order** button, they are redirected to the *CheckoutComplete.aspx* page.</span></span>

> [!NOTE] 
> 
> **<span data-ttu-id="f7deb-404">Porada</span><span class="sxs-lookup"><span data-stu-id="f7deb-404">Tip</span></span>**
> 
> <span data-ttu-id="f7deb-405">W znaczniku elementu *CheckoutReview.aspx* stronie należy zauważyć, że `<ItemStyle>` umożliwia zmienianie stylu elementów w tagu **DetailsView** formant w pobliżu dolnej części strony.</span><span class="sxs-lookup"><span data-stu-id="f7deb-405">In the markup of the *CheckoutReview.aspx* page, notice that the `<ItemStyle>` tag is used to change the style of the items within the **DetailsView** control near the bottom of the page.</span></span> <span data-ttu-id="f7deb-406">Wyświetlając stronę w **widoku projektu** (wybierając **projektowania** w lewym dolnym rogu programu Visual Studio), a następnie wybierając pozycję **DetailsView** sterowania i wybierając  **Tag inteligentny** (ikonę strzałki w prawym górnym rogu kontrolki), będą mogli zobaczyć **DetailsView zadania**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-406">By viewing the page in **Design View** (by selecting **Design** at the lower left corner of Visual Studio), then selecting the **DetailsView** control, and selecting the **Smart Tag** (the arrow icon at the top right of the control), you will be able to see the **DetailsView Tasks**.</span></span>
> 
> ![Finalizacja zakupu i płatność w systemie PayPal — edytowanie pól](checkout-and-payment-with-paypal/_static/image18.png)
> 
> <span data-ttu-id="f7deb-408">Wybierając **Edytuj pola**, **pola** zostanie wyświetlone okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="f7deb-408">By selecting **Edit Fields**, the **Fields** dialog box will appear.</span></span> <span data-ttu-id="f7deb-409">W tym oknie można łatwo kontrolować visual właściwości, takie jak **ItemStyle**, z **DetailsView** kontroli.</span><span class="sxs-lookup"><span data-stu-id="f7deb-409">In this dialog box you can easily control the visual properties, such as **ItemStyle**, of the **DetailsView** control.</span></span>
> 
> ![Finalizacja zakupu i płatność w systemie PayPal — okno dialogowe pola](checkout-and-payment-with-paypal/_static/image19.png)


### <a name="complete-purchase"></a><span data-ttu-id="f7deb-411">Sfinalizuj zakup</span><span class="sxs-lookup"><span data-stu-id="f7deb-411">Complete Purchase</span></span>

<span data-ttu-id="f7deb-412">*CheckoutComplete.aspx* strony sprawia, że zakupu z systemu PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-412">*CheckoutComplete.aspx* page makes the purchase from PayPal.</span></span> <span data-ttu-id="f7deb-413">Jak wspomniano powyżej, użytkownik musi kliknąć **całe zamówienie** przycisk przed aplikacji spowoduje przejście do *CheckoutComplete.aspx* strony.</span><span class="sxs-lookup"><span data-stu-id="f7deb-413">As mentioned above, the user must click on the **Complete Order** button before the application will navigate to the *CheckoutComplete.aspx* page.</span></span>

1. <span data-ttu-id="f7deb-414">W *wyewidencjonowania* folder, otwórz stronę o nazwie *CheckoutComplete.aspx*.</span><span class="sxs-lookup"><span data-stu-id="f7deb-414">In the *Checkout* folder, open the page named *CheckoutComplete.aspx*.</span></span>
2. <span data-ttu-id="f7deb-415">Zastąp istniejący kod znaczników następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="f7deb-415">Replace the existing markup with the following:</span></span>   

    [!code-aspx[Main](checkout-and-payment-with-paypal/samples/sample22.aspx)]
3. <span data-ttu-id="f7deb-416">Otwórz stronę związanym z kodem o nazwie *CheckoutComplete.aspx.cs* i Zastąp istniejący kod następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="f7deb-416">Open the code-behind page named *CheckoutComplete.aspx.cs* and replace the existing code with the following:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample23.cs)]

<span data-ttu-id="f7deb-417">Gdy *CheckoutComplete.aspx* strona została załadowana, `DoCheckoutPayment` metoda jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="f7deb-417">When the *CheckoutComplete.aspx* page is loaded, the `DoCheckoutPayment` method is called.</span></span> <span data-ttu-id="f7deb-418">Jak wspomniano wcześniej, `DoCheckoutPayment` ukończeniu metody zakupu ze środowiska testowania PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-418">As mentioned earlier, the `DoCheckoutPayment` method completes the purchase from the PayPal testing environment.</span></span> <span data-ttu-id="f7deb-419">Po zatwierdzeniu PayPal zakupu zamówienie, *CheckoutComplete.aspx* strony wyświetli transakcji płatności `ID` nabywcy.</span><span class="sxs-lookup"><span data-stu-id="f7deb-419">Once PayPal has completed the purchase of the order, the *CheckoutComplete.aspx* page displays a payment transaction `ID` to the purchaser.</span></span>

### <a name="handle-cancel-purchase"></a><span data-ttu-id="f7deb-420">Dojście do anulowania zakupu</span><span class="sxs-lookup"><span data-stu-id="f7deb-420">Handle Cancel Purchase</span></span>

<span data-ttu-id="f7deb-421">Jeśli użytkownik zdecyduje się na anulowania zakupu w witrynie, zostanie przekierowany do *CheckoutCancel.aspx* strony, gdzie zobaczą, że ich zamówienie zostało anulowane.</span><span class="sxs-lookup"><span data-stu-id="f7deb-421">If the user decides to cancel the purchase, they will be directed to the *CheckoutCancel.aspx* page where they will see that their order has been cancelled.</span></span>

1. <span data-ttu-id="f7deb-422">Otwórz stronę o nazwie *CheckoutCancel.aspx* w *wyewidencjonowania* folderu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-422">Open the page named *CheckoutCancel.aspx* in the *Checkout* folder.</span></span>
2. <span data-ttu-id="f7deb-423">Zastąp istniejący kod znaczników następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="f7deb-423">Replace the existing markup with the following:</span></span>   

    [!code-aspx[Main](checkout-and-payment-with-paypal/samples/sample24.aspx)]

### <a name="handle-purchase-errors"></a><span data-ttu-id="f7deb-424">Obsługa błędów zakupu</span><span class="sxs-lookup"><span data-stu-id="f7deb-424">Handle Purchase Errors</span></span>

<span data-ttu-id="f7deb-425">Błędy w procesie zakupu będzie obsługiwany przez *CheckoutError.aspx* strony.</span><span class="sxs-lookup"><span data-stu-id="f7deb-425">Errors during the purchase process will be handled by the *CheckoutError.aspx* page.</span></span> <span data-ttu-id="f7deb-426">Kodem z *CheckoutStart.aspx* stronie *CheckoutReview.aspx* strony i *CheckoutComplete.aspx* będzie każdego kierować do  *CheckoutError.aspx* strony, jeśli wystąpi błąd.</span><span class="sxs-lookup"><span data-stu-id="f7deb-426">The code-behind of the *CheckoutStart.aspx* page, the *CheckoutReview.aspx* page, and the *CheckoutComplete.aspx* page will each redirect to the *CheckoutError.aspx* page if an error occurs.</span></span>

1. <span data-ttu-id="f7deb-427">Otwórz stronę o nazwie *CheckoutError.aspx* w *wyewidencjonowania* folderu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-427">Open the page named *CheckoutError.aspx* in the *Checkout* folder.</span></span>
2. <span data-ttu-id="f7deb-428">Zastąp istniejący kod znaczników następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="f7deb-428">Replace the existing markup with the following:</span></span>   

    [!code-aspx[Main](checkout-and-payment-with-paypal/samples/sample25.aspx)]

<span data-ttu-id="f7deb-429">*CheckoutError.aspx* zostanie wyświetlona strona z szczegóły błędu, gdy wystąpi błąd podczas wyewidencjonowania.</span><span class="sxs-lookup"><span data-stu-id="f7deb-429">The *CheckoutError.aspx* page is displayed with the error details when an error occurs during the checkout process.</span></span>

## <a name="running-the-application"></a><span data-ttu-id="f7deb-430">Uruchamianie aplikacji</span><span class="sxs-lookup"><span data-stu-id="f7deb-430">Running the Application</span></span>

<span data-ttu-id="f7deb-431">Uruchom aplikację, aby zobaczyć, jak dokonać zakupu produktów.</span><span class="sxs-lookup"><span data-stu-id="f7deb-431">Run the application to see how to purchase products.</span></span> <span data-ttu-id="f7deb-432">Należy pamiętać, że będzie działać w systemie PayPal środowiska testowego.</span><span class="sxs-lookup"><span data-stu-id="f7deb-432">Note that you will be running in the PayPal testing environment.</span></span> <span data-ttu-id="f7deb-433">Wymienianie nie rzeczywiste pieniądze.</span><span class="sxs-lookup"><span data-stu-id="f7deb-433">No actual money is being exchanged.</span></span>

1. <span data-ttu-id="f7deb-434">Upewnij się, że wszystkie pliki są zapisywane w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f7deb-434">Make sure all your files are saved in Visual Studio.</span></span>
2. <span data-ttu-id="f7deb-435">Otwórz przeglądarkę internetową i przejdź do [ https://developer.paypal.com ](https://developer.paypal.com/).</span><span class="sxs-lookup"><span data-stu-id="f7deb-435">Open a Web browser and navigate to [https://developer.paypal.com](https://developer.paypal.com/).</span></span>
3. <span data-ttu-id="f7deb-436">Zaloguj się przy użyciu konta dewelopera systemu PayPal, który został utworzony we wcześniejszej części tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="f7deb-436">Login with your PayPal developer account that you created earlier in this tutorial.</span></span>  
   <span data-ttu-id="f7deb-437">Dla piaskownicy dla deweloperów PayPal, musisz zalogować się na [ https://developer.paypal.com ](https://developer.paypal.com/) do testowania express wyewidencjonowania.</span><span class="sxs-lookup"><span data-stu-id="f7deb-437">For PayPal's developer sandbox, you need to be logged in at [https://developer.paypal.com](https://developer.paypal.com/) to test express checkout.</span></span> <span data-ttu-id="f7deb-438">Dotyczy to tylko piaskownicy PayPal, testowania, aby nie środowiska produkcyjnego PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-438">This only applies to PayPal's sandbox testing, not to PayPal's live environment.</span></span>
4. <span data-ttu-id="f7deb-439">W programie Visual Studio, naciśnij klawisz **F5** uruchamianie przykładowej aplikacji Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="f7deb-439">In Visual Studio, press **F5** to run the Wingtip Toys sample application.</span></span>  
   <span data-ttu-id="f7deb-440">Po odbudowania bazy danych, przeglądarce otworzy się i Pokaż *Default.aspx* strony.</span><span class="sxs-lookup"><span data-stu-id="f7deb-440">After the database rebuilds, the browser will open and show the *Default.aspx* page.</span></span>
5. <span data-ttu-id="f7deb-441">Dodaj trzy różne produkty do koszyka, wybranie kategorii produktów, takich jak "Samochody", a następnie klikając polecenie **Dodaj do koszyka** obok każdego produktu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-441">Add three different products to the shopping cart by selecting the product category, such as "Cars" and then clicking **Add to Cart** next to each product.</span></span>  
   <span data-ttu-id="f7deb-442">Koszyk sklepowy wyświetli produktu, który wybrano.</span><span class="sxs-lookup"><span data-stu-id="f7deb-442">The shopping cart will display the product you have selected.</span></span>
6. <span data-ttu-id="f7deb-443">Kliknij przycisk **PayPal** przycisku do wyewidencjonowania.</span><span class="sxs-lookup"><span data-stu-id="f7deb-443">Click the **PayPal** button to checkout.</span></span> 

    ![Finalizacja zakupu i płatność w systemie PayPal — koszyka](checkout-and-payment-with-paypal/_static/image20.png)

   <span data-ttu-id="f7deb-445">Trwa wyewidencjonowywanie wymagają, że masz konto użytkownika dla przykładowej aplikacji Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="f7deb-445">Checking out will require that you have a user account for the Wingtip Toys sample application.</span></span>
7. <span data-ttu-id="f7deb-446">Kliknij przycisk **Google** łącza w prawej części strony, aby zalogować się przy użyciu istniejącego konta e-mail gmail.com.</span><span class="sxs-lookup"><span data-stu-id="f7deb-446">Click the **Google** link on the right of the page to log in with an existing gmail.com email account.</span></span>  
   <span data-ttu-id="f7deb-447">Jeśli nie masz konta gmail.com, możesz utworzyć jedną do testowania w [www.gmail.com](https://www.gmail.com/).</span><span class="sxs-lookup"><span data-stu-id="f7deb-447">If you do not have a gmail.com account, you can create one for testing purposes at [www.gmail.com](https://www.gmail.com/).</span></span> <span data-ttu-id="f7deb-448">Umożliwia także standardowe konta lokalnego, klikając przycisk "Zarejestruj".</span><span class="sxs-lookup"><span data-stu-id="f7deb-448">You can also use a standard local account by clicking "Register".</span></span> 

    ![Finalizacja zakupu i płatność w systemie PayPal — Zaloguj się](checkout-and-payment-with-paypal/_static/image21.png)
8. <span data-ttu-id="f7deb-450">Zaloguj się przy użyciu konta gmail i hasła usługi.</span><span class="sxs-lookup"><span data-stu-id="f7deb-450">Sign in with your gmail account and password.</span></span> 

    ![Finalizacja zakupu i płatność w systemie PayPal — logowanie do usługi Gmail](checkout-and-payment-with-paypal/_static/image22.png)
9. <span data-ttu-id="f7deb-452">Kliknij przycisk **Zaloguj** przycisk, aby zarejestrować konta gmail z Twoją nazwą użytkownika aplikacji przykładowej aplikacji Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="f7deb-452">Click the **Log in** button to register your gmail account with your Wingtip Toys sample application user name.</span></span> 

    ![Finalizacja zakupu i płatność w systemie PayPal — Zarejestruj konto](checkout-and-payment-with-paypal/_static/image23.png)
10. <span data-ttu-id="f7deb-454">W witrynie testu PayPal, Dodaj swoje **kupujący** adres e-mail odbiorcy oraz hasło, który został utworzony we wcześniejszej części tego samouczka, a następnie kliknij przycisk **logowanie** przycisku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-454">On the PayPal test site, add your **buyer** email address and password that you created earlier in this tutorial, then click the **Log In** button.</span></span> 

    ![Finalizacja zakupu i płatność w systemie PayPal — konta PayPal](checkout-and-payment-with-paypal/_static/image24.png)
11. <span data-ttu-id="f7deb-456">Wyraź zgodę na zasady PayPal, a następnie kliknij przycisk **Zgadzam się, kontynuuj** przycisku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-456">Agree to the PayPal policy and click the **Agree and Continue** button.</span></span>  
    <span data-ttu-id="f7deb-457">Należy zauważyć, że ta strona jest tylko wyświetlane po raz pierwszy używasz tego konta PayPal.</span><span class="sxs-lookup"><span data-stu-id="f7deb-457">Note that this page is only displayed the first time you use this PayPal account.</span></span> <span data-ttu-id="f7deb-458">Ponownie należy pamiętać, że to konto testowe są wymieniane nie rzeczywiste pieniądze.</span><span class="sxs-lookup"><span data-stu-id="f7deb-458">Again note that this is a test account, no real money is exchanged.</span></span> 

    ![Finalizacja zakupu i płatność w systemie PayPal — zasady PayPal](checkout-and-payment-with-paypal/_static/image25.png)
12. <span data-ttu-id="f7deb-460">Przejrzyj informacje o kolejności w systemie PayPal testowanie strony Przegląd środowiska i kliknij przycisk **Kontynuuj**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-460">Review the order information on the PayPal testing environment review page and click **Continue**.</span></span> 

    ![Finalizacja zakupu i płatność w systemie PayPal — Przegląd informacji](checkout-and-payment-with-paypal/_static/image26.png)
13. <span data-ttu-id="f7deb-462">Na *CheckoutReview.aspx* strony, sprawdź kwota zamówienia i wyświetlić adres wysyłkowy wygenerowany.</span><span class="sxs-lookup"><span data-stu-id="f7deb-462">On the *CheckoutReview.aspx* page, verify the order amount and view the generated shipping address.</span></span> <span data-ttu-id="f7deb-463">Następnie kliknij przycisk **całe zamówienie** przycisku.</span><span class="sxs-lookup"><span data-stu-id="f7deb-463">Then, click the **Complete Order** button.</span></span> 

    ![Finalizacja zakupu i płatność w systemie PayPal — Przegląd zamówienia](checkout-and-payment-with-paypal/_static/image27.png)
14. <span data-ttu-id="f7deb-465">**CheckoutComplete.aspx** zostanie wyświetlona strona z identyfikatorem transakcji płatności.</span><span class="sxs-lookup"><span data-stu-id="f7deb-465">The **CheckoutComplete.aspx** page is displayed with a payment transaction ID.</span></span> 

    ![Finalizacja zakupu i płatność w systemie PayPal — kompletny wyewidencjonowania](checkout-and-payment-with-paypal/_static/image28.png)

<a id="ReviewDBWebForms"></a>
## <a name="reviewing-the-database"></a><span data-ttu-id="f7deb-467">Przegląd bazy danych</span><span class="sxs-lookup"><span data-stu-id="f7deb-467">Reviewing the Database</span></span>

<span data-ttu-id="f7deb-468">Przeglądając zaktualizowane dane w bazie danych aplikacji Wingtip Toys po uruchomieniu aplikacji, zobaczysz, że aplikacja pomyślnie zarejestrowane zakupu produktów.</span><span class="sxs-lookup"><span data-stu-id="f7deb-468">By reviewing the updated data in the Wingtip Toys sample application database after running the application, you can see that the application successfully recorded the purchase of the products.</span></span>

<span data-ttu-id="f7deb-469">Możesz sprawdzić dane zawarte w *Wingtiptoys.mdf* plik bazy danych przy użyciu **Eksplorator bazy danych** okna (**Eksploratora serwera** okna w programie Visual Studio) tak jak we wcześniejszej części tej serii samouczków.</span><span class="sxs-lookup"><span data-stu-id="f7deb-469">You can inspect the data contained in the *Wingtiptoys.mdf* database file by using the **Database Explorer** window (**Server Explorer** window in Visual Studio) as you did earlier in this tutorial series.</span></span>

1. <span data-ttu-id="f7deb-470">Zamknij okno przeglądarki, jeśli jest nadal otwarty.</span><span class="sxs-lookup"><span data-stu-id="f7deb-470">Close the browser window if it is still open.</span></span>
2. <span data-ttu-id="f7deb-471">W programie Visual Studio, wybierz **Pokaż wszystkie pliki** ikonę u góry **Eksploratora rozwiązań** umożliwia rozwijanie **aplikacji\_danych** folderu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-471">In Visual Studio, select the **Show All Files** icon at the top of **Solution Explorer** to allow you to expand the **App\_Data** folder.</span></span>
3. <span data-ttu-id="f7deb-472">Rozwiń **aplikacji\_danych** folderu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-472">Expand the **App\_Data** folder.</span></span>  
 <span data-ttu-id="f7deb-473">Musisz wybrać **Pokaż wszystkie pliki** ikonę folderu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-473">You may need to select the **Show All Files** icon for the folder.</span></span>
4. <span data-ttu-id="f7deb-474">Kliknij prawym przyciskiem myszy *Wingtiptoys.mdf* plik bazy danych i wybierz pozycję **Otwórz**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-474">Right-click the *Wingtiptoys.mdf* database file and select **Open**.</span></span>  
    <span data-ttu-id="f7deb-475">**Eksplorator serwera** jest wyświetlana.</span><span class="sxs-lookup"><span data-stu-id="f7deb-475">**Server Explorer** is displayed.</span></span>
5. <span data-ttu-id="f7deb-476">Rozwiń **tabel** folderu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-476">Expand the **Tables** folder.</span></span>
6. <span data-ttu-id="f7deb-477">Kliknij prawym przyciskiem myszy **zamówienia**tabeli, a następnie wybierz pozycję **Pokaż dane tabeli**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-477">Right-click the **Orders**table and select **Show Table Data**.</span></span>  
 <span data-ttu-id="f7deb-478">**Zamówienia** tabela jest wyświetlana.</span><span class="sxs-lookup"><span data-stu-id="f7deb-478">The **Orders** table is displayed.</span></span>
7. <span data-ttu-id="f7deb-479">Przegląd **PaymentTransactionID** kolumny, aby potwierdzić pomyślne transakcje.</span><span class="sxs-lookup"><span data-stu-id="f7deb-479">Review the **PaymentTransactionID** column to confirm successful transactions.</span></span> 

    ![Finalizacja zakupu i płatność w systemie PayPal — Przegląd bazy danych](checkout-and-payment-with-paypal/_static/image29.png)
8. <span data-ttu-id="f7deb-481">Zamknij **zamówienia** okna tabeli.</span><span class="sxs-lookup"><span data-stu-id="f7deb-481">Close the **Orders** table window.</span></span>
9. <span data-ttu-id="f7deb-482">W Eksploratorze serwera, kliknij prawym przyciskiem myszy **OrderDetails** tabeli, a następnie wybierz pozycję **Pokaż dane tabeli**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-482">In the Server Explorer, right-click the **OrderDetails** table and select **Show Table Data**.</span></span>
10. <span data-ttu-id="f7deb-483">Przegląd `OrderId` i `Username` wartości w **OrderDetails** tabeli.</span><span class="sxs-lookup"><span data-stu-id="f7deb-483">Review the `OrderId` and `Username` values in the **OrderDetails** table.</span></span> <span data-ttu-id="f7deb-484">Należy zauważyć, że te wartości są zgodne `OrderId` i `Username` wartości zawarte w **zamówienia** tabeli.</span><span class="sxs-lookup"><span data-stu-id="f7deb-484">Note that these values match the `OrderId` and `Username` values included in the **Orders** table.</span></span>
11. <span data-ttu-id="f7deb-485">Zamknij **OrderDetails** okna tabeli.</span><span class="sxs-lookup"><span data-stu-id="f7deb-485">Close the **OrderDetails** table window.</span></span>
12. <span data-ttu-id="f7deb-486">Kliknij prawym przyciskiem myszy plik bazy danych o nazwie Wingtip Toys (*Wingtiptoys.mdf*) i wybierz **bliskie połączenie**.</span><span class="sxs-lookup"><span data-stu-id="f7deb-486">Right-click the Wingtip Toys database file (*Wingtiptoys.mdf*) and select **Close Connection**.</span></span>
13. <span data-ttu-id="f7deb-487">Jeśli nie widzisz **Eksploratora rozwiązań** okna, kliknij przycisk **Eksploratora rozwiązań** w dolnej części **Eksploratora serwera** do wyświetlenia w oknie **Eksploratora rozwiązań**  ponownie.</span><span class="sxs-lookup"><span data-stu-id="f7deb-487">If you do not see the **Solution Explorer** window, click **Solution Explorer** at the bottom of the **Server Explorer** window to show the **Solution Explorer** again.</span></span>

## <a name="summary"></a><span data-ttu-id="f7deb-488">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="f7deb-488">Summary</span></span>

<span data-ttu-id="f7deb-489">W tym samouczku została dodana, kolejność i schematów szczegółów zamówienia, do śledzenia do zakupu produktów.</span><span class="sxs-lookup"><span data-stu-id="f7deb-489">In this tutorial you added order and order detail schemas to track the purchase of products.</span></span> <span data-ttu-id="f7deb-490">Możesz również zintegrowane funkcje PayPal przykładowej aplikacji Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="f7deb-490">You also integrated PayPal functionality into the Wingtip Toys sample application.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="f7deb-491">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="f7deb-491">Additional Resources</span></span>

[<span data-ttu-id="f7deb-492">Omówienie konfiguracji platformy ASP.NET</span><span class="sxs-lookup"><span data-stu-id="f7deb-492">ASP.NET Configuration Overview</span></span>](https://msdn.microsoft.com/library/ms178683(v=vs.100).aspx)  
[<span data-ttu-id="f7deb-493">Wdrażanie aplikacji formularzy bezpiecznej sieci Web platformy ASP.NET z członkostwa, uwierzytelnianiem OAuth i bazą danych SQL w usłudze Azure App Service</span><span class="sxs-lookup"><span data-stu-id="f7deb-493">Deploy a Secure ASP.NET Web Forms App with Membership, OAuth, and SQL Database to Azure App Service</span></span>](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/)  
[<span data-ttu-id="f7deb-494">Microsoft Azure — bezpłatna wersja próbna</span><span class="sxs-lookup"><span data-stu-id="f7deb-494">Microsoft Azure - Free Trial</span></span>](https://azure.microsoft.com/pricing/free-trial/)

## <a name="disclaimer"></a><span data-ttu-id="f7deb-495">Zrzeczenie odpowiedzialności</span><span class="sxs-lookup"><span data-stu-id="f7deb-495">Disclaimer</span></span>

<span data-ttu-id="f7deb-496">Ten samouczek zawiera przykładowy kod.</span><span class="sxs-lookup"><span data-stu-id="f7deb-496">This tutorial contains sample code.</span></span> <span data-ttu-id="f7deb-497">Takie przykładowy kod znajduje się "w jakim jest" bez gwarancji jakiegokolwiek rodzaju.</span><span class="sxs-lookup"><span data-stu-id="f7deb-497">Such sample code is provided "as is" without warranty of any kind.</span></span> <span data-ttu-id="f7deb-498">W związku z tym Microsoft nie gwarantuje dokładności, integralność lub jakości kodu przykładowego.</span><span class="sxs-lookup"><span data-stu-id="f7deb-498">Accordingly, Microsoft does not guarantee the accuracy, integrity, or quality of the sample code.</span></span> <span data-ttu-id="f7deb-499">Użytkownik zgadza się użyć przykładowego kodu na własne ryzyko.</span><span class="sxs-lookup"><span data-stu-id="f7deb-499">You agree to use the sample code at your own risk.</span></span> <span data-ttu-id="f7deb-500">W żadnym wypadku firma Microsoft nie ponosi dla użytkownika w dowolny sposób dla każdego przykładowego kodu, treści, w tym między innymi wszelkie błędy lub pominięć w każdego przykładowego kodu, zawartość, lub straty lub szkody dowolnego rodzaju poniesionym w wyniku użycia każdego przykładowego kodu.</span><span class="sxs-lookup"><span data-stu-id="f7deb-500">Under no circumstances will Microsoft be liable to you in any way for any sample code, content, including but not limited to, any errors or omissions in any sample code, content, or any loss or damage of any kind incurred as a result of the use of any sample code.</span></span> <span data-ttu-id="f7deb-501">Niniejszym użytkownik udziela firmie są powiadamiani i uzgadniają wypłaty, zapisać i zwolnić firmę Microsoft z odpowiedzialności za wszelkie utraty, roszczeniami, strat, szkód lub szkody dowolnego rodzaju uwzględniając, bez ograniczenia, spowodowane lub wynikających z materiałów, w którym publikowane są, przesłanie, użyj lub polegają na tym między innymi, poglądy wyrażone w nim.</span><span class="sxs-lookup"><span data-stu-id="f7deb-501">You are hereby notified and do hereby agree to indemnify, save and hold Microsoft harmless from and against any and all loss, claims of loss, injury or damage of any kind including, without limitation, those occasioned by or arising from material that you post, transmit, use or rely on including, but not limited to, the views expressed therein.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f7deb-502">[Poprzednie](shopping-cart.md)
> [dalej](membership-and-administration.md)</span><span class="sxs-lookup"><span data-stu-id="f7deb-502">[Previous](shopping-cart.md)
[Next](membership-and-administration.md)</span></span>

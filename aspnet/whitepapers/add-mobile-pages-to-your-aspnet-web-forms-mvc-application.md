---
uid: whitepapers/add-mobile-pages-to-your-aspnet-web-forms-mvc-application
title: 'Instrukcje: dodawanie stron mobilnych do aplikacji ASP.NET Web Forms/MVC | Microsoft Docs'
author: rick-anderson
description: W tym artykule opisano różne sposoby obsługi stron zoptymalizowanych pod kątem urządzeń przenośnych z aplikacji ASP.NET Web Forms/MVC oraz zaproponowanie architektury i...
ms.author: riande
ms.date: 01/20/2011
ms.assetid: 3124f28e-cc32-418a-afe3-519fa56f4c36
msc.legacyurl: /whitepapers/add-mobile-pages-to-your-aspnet-web-forms-mvc-application
msc.type: content
ms.openlocfilehash: 63c555358d06a9506bb5c8c993800c3307108192
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78572738"
---
# <a name="how-to-add-mobile-pages-to-your-aspnet-web-forms--mvc-application"></a><span data-ttu-id="7beaf-103">Instrukcje: dodawanie stron dla urządzeń przenośnych do aplikacji ASP.NET Web Forms/MVC</span><span class="sxs-lookup"><span data-stu-id="7beaf-103">How To: Add Mobile Pages to Your ASP.NET Web Forms / MVC Application</span></span>

> <span data-ttu-id="7beaf-104">**Dotyczy**</span><span class="sxs-lookup"><span data-stu-id="7beaf-104">**Applies To**</span></span>
> 
> - <span data-ttu-id="7beaf-105">ASP.NET Web Forms w wersji 4,0</span><span class="sxs-lookup"><span data-stu-id="7beaf-105">ASP.NET Web Forms version 4.0</span></span>
> - <span data-ttu-id="7beaf-106">ASP.NET MVC w wersji 3,0</span><span class="sxs-lookup"><span data-stu-id="7beaf-106">ASP.NET MVC version 3.0</span></span>
> 
> <span data-ttu-id="7beaf-107">**Podsumowanie**</span><span class="sxs-lookup"><span data-stu-id="7beaf-107">**Summary**</span></span>
> 
> <span data-ttu-id="7beaf-108">W tym artykule opisano różne sposoby obsługi stron zoptymalizowanych pod kątem urządzeń przenośnych z aplikacji ASP.NET Web Forms/MVC oraz zaproponowanie problemów dotyczących architektury i projektu, które należy wziąć pod uwagę w przypadku szerokiego zakresu urządzeń.</span><span class="sxs-lookup"><span data-stu-id="7beaf-108">This How To describes various ways to serve pages optimized for mobile devices from your ASP.NET Web Forms / MVC application, and suggests architectural and design issues to consider when targeting a broad range of devices.</span></span> <span data-ttu-id="7beaf-109">W tym dokumencie wyjaśniono również, dlaczego kontrolki mobilne ASP.NET z ASP.NET 2,0 do 3,5 są już przestarzałe i omawiają niektóre nowoczesne alternatywy.</span><span class="sxs-lookup"><span data-stu-id="7beaf-109">This document also explains why the ASP.NET Mobile Controls from ASP.NET 2.0 to 3.5 are now obsolete, and discusses some modern alternatives.</span></span>

## <a name="contents"></a><span data-ttu-id="7beaf-110">Spis treści</span><span class="sxs-lookup"><span data-stu-id="7beaf-110">Contents</span></span>

- <span data-ttu-id="7beaf-111">Omówienie</span><span class="sxs-lookup"><span data-stu-id="7beaf-111">Overview</span></span>
- <span data-ttu-id="7beaf-112">Opcje architektury</span><span class="sxs-lookup"><span data-stu-id="7beaf-112">Architectural options</span></span>
- <span data-ttu-id="7beaf-113">Wykrywanie przeglądarki i urządzeń</span><span class="sxs-lookup"><span data-stu-id="7beaf-113">Browser and device detection</span></span>
- <span data-ttu-id="7beaf-114">Jak aplikacje ASP.NET Web Forms mogą prezentować strony specyficzne dla urządzeń przenośnych</span><span class="sxs-lookup"><span data-stu-id="7beaf-114">How ASP.NET Web Forms applications can present mobile-specific pages</span></span>
- <span data-ttu-id="7beaf-115">Jak aplikacje ASP.NET MVC mogą przedstawiać strony specyficzne dla urządzeń przenośnych</span><span class="sxs-lookup"><span data-stu-id="7beaf-115">How ASP.NET MVC applications can present mobile-specific pages</span></span>
- <span data-ttu-id="7beaf-116">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="7beaf-116">Additional resources</span></span>

<span data-ttu-id="7beaf-117">Przykłady kodu do pobrania przedstawiające techniki tego oficjalnego dokumentu dla ASP.NET Web Forms i MVC można znaleźć w temacie [Mobile Apps & witryny z ASP.NET](https://docs.microsoft.com/aspnet/mobile/overview).</span><span class="sxs-lookup"><span data-stu-id="7beaf-117">For downloadable code samples demonstrating this white paper's techniques for both ASP.NET Web Forms and MVC, see [Mobile Apps & Sites with ASP.NET](https://docs.microsoft.com/aspnet/mobile/overview).</span></span>

## <a name="overview"></a><span data-ttu-id="7beaf-118">Omówienie</span><span class="sxs-lookup"><span data-stu-id="7beaf-118">Overview</span></span>

<span data-ttu-id="7beaf-119">Urządzenia przenośne — telefony smartphone, telefony funkcji i tablety — Kontynuuj rozwój popularności jako środek do uzyskiwania dostępu do sieci Web.</span><span class="sxs-lookup"><span data-stu-id="7beaf-119">Mobile devices – smartphones, feature phones, and tablets – continue to grow in popularity as a means to access the Web.</span></span> <span data-ttu-id="7beaf-120">W przypadku wielu deweloperów sieci Web i firmowych sieci Web oznacza to, że coraz częściej jest zapewnienie doskonałego środowiska przeglądania dla Gości korzystających z tych urządzeń.</span><span class="sxs-lookup"><span data-stu-id="7beaf-120">For many web developers and web-oriented businesses, this means it's increasingly important to provide a great browsing experience for visitors using those devices.</span></span>

### <a name="how-earlier-versions-of-aspnet-supported-mobile-browsers"></a><span data-ttu-id="7beaf-121">Jak wcześniejsze wersje programu ASP.NET obsługują przeglądarki mobilne</span><span class="sxs-lookup"><span data-stu-id="7beaf-121">How earlier versions of ASP.NET supported mobile browsers</span></span>

<span data-ttu-id="7beaf-122">ASP.NET wersje 2,0 do 3,5 obejmowały *ASP.net Mobile Controls*: zestaw kontrolek serwera dla urządzeń przenośnych z przestrzeni nazw *System. Web. Mobile. dll* i *System. Web. UI. MobileControls* .</span><span class="sxs-lookup"><span data-stu-id="7beaf-122">ASP.NET versions 2.0 to 3.5 included *ASP.NET Mobile Controls*: a set of server controls for mobile devices in the *System.Web.Mobile.dll* assembly and the *System.Web.UI.MobileControls* namespace.</span></span> <span data-ttu-id="7beaf-123">Zestaw jest nadal uwzględniony w ASP.NET 4, ale jest przestarzały.</span><span class="sxs-lookup"><span data-stu-id="7beaf-123">The assembly is still included in ASP.NET 4, but it is deprecated.</span></span> <span data-ttu-id="7beaf-124">Deweloperzy są doradzani do migrowania do bardziej nowoczesnych metod, takich jak opisane w tym dokumencie.</span><span class="sxs-lookup"><span data-stu-id="7beaf-124">Developers are advised to migrate to more modern approaches, such as those described in this paper.</span></span>

<span data-ttu-id="7beaf-125">Powód, dla którego kontrolki mobilne ASP.NET zostały oznaczone jako przestarzałe, są zorientowane na telefony komórkowe, które były wspólne wokół 2005 i wcześniejszych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-125">The reason why ASP.NET Mobile Controls have been marked as obsolete is that their design is oriented around the mobile phones that were common around 2005 and earlier.</span></span> <span data-ttu-id="7beaf-126">Kontrolki są przeznaczone głównie do renderowania WML lub cHTML znaczników (zamiast zwykłych HTML) dla przeglądarek WAP tej ery.</span><span class="sxs-lookup"><span data-stu-id="7beaf-126">The controls are mainly designed to render WML or cHTML markup (instead of regular HTML) for the WAP browsers of that era.</span></span> <span data-ttu-id="7beaf-127">Jednak WAP, WML i cHTML nie są już potrzebne w przypadku większości projektów, ponieważ język HTML stał się powszechnie wyznacznikiem dla przeglądarek mobilnych i klasycznych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-127">But WAP, WML, and cHTML are no longer relevant for most projects, because HTML has now become the ubiquitous markup language for mobile and desktop browsers alike.</span></span>

### <a name="the-challenges-of-supporting-mobile-devices-today"></a><span data-ttu-id="7beaf-128">Wyzwania dotyczące obsługi urządzeń przenośnych dzisiaj</span><span class="sxs-lookup"><span data-stu-id="7beaf-128">The challenges of supporting mobile devices today</span></span>

<span data-ttu-id="7beaf-129">Mimo że przeglądarki mobilne są teraz niemal ogólnie obsługiwane w języku HTML, nadal będziesz mieć wiele wyzwań, gdy chcesz utworzyć wspaniałe środowiska do przeglądania mobilnego:</span><span class="sxs-lookup"><span data-stu-id="7beaf-129">Even though mobile browsers now almost universally support HTML, you will still face many challenges when aiming to create great mobile browsing experiences:</span></span>

- <span data-ttu-id="7beaf-130">***Rozmiar ekranu*** — urządzenia przenośne różnią się znacznie w formie, a ich ekrany często są znacznie mniejsze niż monitory klasyczne.</span><span class="sxs-lookup"><span data-stu-id="7beaf-130">***Screen size*** - Mobile devices vary dramatically in form, and their screens are often much smaller than desktop monitors.</span></span> <span data-ttu-id="7beaf-131">W związku z tym może być konieczne zaprojektowanie zupełnie różnych układów stron.</span><span class="sxs-lookup"><span data-stu-id="7beaf-131">So, you may need to design completely different page layouts for them.</span></span>
- <span data-ttu-id="7beaf-132">***Metody wejściowe*** — niektóre urządzenia mają konsole, niektóre mają pióro, inne używają dotyku.</span><span class="sxs-lookup"><span data-stu-id="7beaf-132">***Input methods*** – Some devices have keypads, some have styluses, others use touch.</span></span> <span data-ttu-id="7beaf-133">Konieczne może być uwzględnienie wielu mechanizmów nawigacji i metod wprowadzania danych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-133">You may need to consider multiple navigation mechanisms and data input methods.</span></span>
- <span data-ttu-id="7beaf-134">***Zgodność ze standardami*** — wiele przeglądarek dla urządzeń przenośnych nie obsługuje najnowszych standardów HTML, CSS i JavaScript.</span><span class="sxs-lookup"><span data-stu-id="7beaf-134">***Standards compliance*** – Many mobile browsers do not support the latest HTML, CSS, or JavaScript standards.</span></span>
- <span data-ttu-id="7beaf-135">***Przepustowość*** — wydajność sieci komórkowej danych różni się w zależności od siebie, a niektórzy użytkownicy końcowi pobierają opłaty przez megabajty.</span><span class="sxs-lookup"><span data-stu-id="7beaf-135">***Bandwidth*** – Cellular data network performance varies wildly, and some end users are on tariffs that charge by the megabyte.</span></span>

<span data-ttu-id="7beaf-136">Nie istnieje żadne rozwiązanie o rozmiarze jedno-do-wszystkiego. aplikacja będzie musiała wyglądać i zachowywać się inaczej w zależności od urządzenia, do którego uzyskuje dostęp.</span><span class="sxs-lookup"><span data-stu-id="7beaf-136">There's no one-size-fits-all solution; your application will have to look and behave differently according to the device accessing it.</span></span> <span data-ttu-id="7beaf-137">W zależności od wybranego poziomu pomocy technicznej dla urządzeń przenośnych może to być większe wyzwanie dla deweloperów sieci Web niż w przypadku, gdy kiedykolwiek była "liczba" konfliktów przeglądarki pulpitu ".</span><span class="sxs-lookup"><span data-stu-id="7beaf-137">Depending on what level of mobile support you want, this can be a bigger challenge for web developers than the desktop "browser wars" ever was.</span></span>

<span data-ttu-id="7beaf-138">Deweloperzy, którzy zbliżają się do obsługi przeglądarki mobilnej po raz pierwszy, często uważają, że są jedynie ważne, aby obsługiwać najnowsze i najbardziej zaawansowane telefony smartphone (np. Windows Phone 7, iPhone lub Android), prawdopodobnie ponieważ deweloperzy często są właścicielami urządzeniem.</span><span class="sxs-lookup"><span data-stu-id="7beaf-138">Developers approaching mobile browser support for the first time often initially think it's only important to support the latest and most sophisticated smartphones (e.g., Windows Phone 7, iPhone, or Android), perhaps because developers often personally own such devices.</span></span> <span data-ttu-id="7beaf-139">Jednak tańsze telefony są nadal niezwykle popularne, a ich właściciele wykorzystują je do przeglądania sieci Web — zwłaszcza w krajach, w których telefony komórkowe są łatwiejsze do pobrania niż połączenie szerokopasmowe.</span><span class="sxs-lookup"><span data-stu-id="7beaf-139">However, cheaper phones are still extremely popular, and their owners do use them to browse the web – especially in countries where mobile phones are easier to get than a broadband connection.</span></span> <span data-ttu-id="7beaf-140">Firma będzie musiała zdecydować, jakiego zakresu urządzeń należy wspierać, biorąc pod uwagę jego prawdopodobnie klientów.</span><span class="sxs-lookup"><span data-stu-id="7beaf-140">Your business will need to decide what range of devices to support by considering its likely customers.</span></span> <span data-ttu-id="7beaf-141">Jeśli tworzysz broszurę online dla Spa możliwość zaprojektowania, możesz podjąć decyzję biznesową tylko dla zaawansowanych telefonów Smartphone, podczas gdy tworzysz system rezerwacji biletów dla kina, prawdopodobnie musisz mieć konto dla odwiedzających z mniejszą zaawansowaną funkcją telefonu.</span><span class="sxs-lookup"><span data-stu-id="7beaf-141">If you're building an online brochure for a luxury health spa, you might make a business decision only to target advanced smartphones, whereas if you're creating a ticket booking system for a cinema, you probably need to account for visitors with less powerful feature phones.</span></span>

## <a name="architectural-options"></a><span data-ttu-id="7beaf-142">Opcje architektury</span><span class="sxs-lookup"><span data-stu-id="7beaf-142">Architectural options</span></span>

<span data-ttu-id="7beaf-143">Przed przekazaniem szczegółowych informacji technicznych ASP.NET Web Forms lub MVC należy zauważyć, że deweloperzy sieci Web ogólnie mają trzy główne opcje obsługi przeglądarek mobilnych:</span><span class="sxs-lookup"><span data-stu-id="7beaf-143">Before we get to the specific technical details of ASP.NET Web Forms or MVC, note that web developers in general have three main possible options for supporting mobile browsers:</span></span>

1. <span data-ttu-id="7beaf-144">***Nic nie rób —*** Możesz po prostu utworzyć standardową, zorientowaną na komputerze aplikację sieci Web i polegać na przeglądarkach mobilnych do renderowania zadowalająco IT.</span><span class="sxs-lookup"><span data-stu-id="7beaf-144">***Do nothing –*** You can simply create a standard, desktop-oriented web application, and rely on mobile browsers to render it acceptably.</span></span> 

    - <span data-ttu-id="7beaf-145">**Zalety**: jest to najtańsza opcja implementowania i konserwowania — brak dodatkowej pracy</span><span class="sxs-lookup"><span data-stu-id="7beaf-145">**Advantage**: It's the cheapest option to implement and maintain – no extra work</span></span>
    - <span data-ttu-id="7beaf-146">**Wadą**: zapewnia najgorszy interfejs użytkownika końcowego:</span><span class="sxs-lookup"><span data-stu-id="7beaf-146">**Disadvantage**: Gives the worst end-user experience:</span></span> 

        - <span data-ttu-id="7beaf-147">Najnowsze smartfony mogą renderować kod HTML tak samo jak przeglądarka pulpitu, ale użytkownicy nadal będą zmuszeni do powiększania i przewijania w poziomie i w pionie, aby wykorzystać zawartość na małym ekranie.</span><span class="sxs-lookup"><span data-stu-id="7beaf-147">The latest smartphones may render your HTML just as well as a desktop browser, but users will still be forced to zoom and scroll horizontally and vertically to consume your content on a small screen.</span></span> <span data-ttu-id="7beaf-148">Jest to daleko od optymalnej.</span><span class="sxs-lookup"><span data-stu-id="7beaf-148">This is far from optimal.</span></span>
        - <span data-ttu-id="7beaf-149">Na starszych urządzeniach i telefonach funkcji może nie być możliwe renderowanie znaczników w zadowalający sposób.</span><span class="sxs-lookup"><span data-stu-id="7beaf-149">Older devices and feature phones may fail to render your markup in a satisfactory way.</span></span>
        - <span data-ttu-id="7beaf-150">Nawet na najnowszych urządzeniach tabletu (których ekrany mogą być tak duże jak ekrany laptopów), mają zastosowanie różne reguły interakcji.</span><span class="sxs-lookup"><span data-stu-id="7beaf-150">Even on the latest tablet devices (whose screens can be as big as laptop screens), different interaction rules apply.</span></span> <span data-ttu-id="7beaf-151">Dane wejściowe oparte na dotyku działają najlepiej z większymi przyciskami i łączami, a także nie ma możliwości przesuwania kursora myszy nad menu rozwijane.</span><span class="sxs-lookup"><span data-stu-id="7beaf-151">Touch-based input works best with larger buttons and links spread further apart, and there's no way to hover a mouse cursor over a fly-out menu.</span></span>
2. <span data-ttu-id="7beaf-152">***Rozwiąż problem na kliencie* —** z starannym użyciem CSS i [ulepszaniem progresywnym](http://en.wikipedia.org/wiki/Progressive_enhancement) można utworzyć znaczniki, style i skrypty, które dostosowują się do dowolnej przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="7beaf-152">***Solve the problem on the client* –** With careful use of CSS and [progressive enhancement](http://en.wikipedia.org/wiki/Progressive_enhancement) you can create markup, styles, and scripts that adapt to whatever browser is running them.</span></span> <span data-ttu-id="7beaf-153">Na przykład w przypadku [zapytań o multimedia w języku CSS 3](http://www.w3.org/TR/2010/CR-css3-mediaqueries-20100727/)można utworzyć układ wielokolumnowy, który przekształci się w jeden układ kolumn na urządzeniach, których ekrany są węższe niż wybrany próg.</span><span class="sxs-lookup"><span data-stu-id="7beaf-153">For example, with [CSS 3 media queries](http://www.w3.org/TR/2010/CR-css3-mediaqueries-20100727/), you could create a multi-column layout that turns into a single column layout on devices whose screens are narrower than a chosen threshold.</span></span> 

    - <span data-ttu-id="7beaf-154">**Zalety**: Optymalizacja renderowania dla określonego urządzenia w użyciu, nawet w przypadku nieznanych przyszłych urządzeń w zależności od właściwości ekranu i danych wejściowych, które mają</span><span class="sxs-lookup"><span data-stu-id="7beaf-154">**Advantage**: Optimizes rendering for the specific device in use, even for unknown future devices according to whatever screen and input characteristics they have</span></span>
    - <span data-ttu-id="7beaf-155">**Zalety**: łatwe udostępnianie logiki po stronie serwera na wszystkich typach urządzeń — minimalne duplikowanie kodu lub nakładu pracy</span><span class="sxs-lookup"><span data-stu-id="7beaf-155">**Advantage**: Easily lets you share server-side logic across all device types – minimal duplication of code or effort</span></span>
    - <span data-ttu-id="7beaf-156">**Niekorzyść**: urządzenia przenośne są inne niż urządzenia stacjonarne, które mogą naprawdę chcieć, aby strony mobilne były całkowicie różne od stron pulpitu, pokazując różne informacje.</span><span class="sxs-lookup"><span data-stu-id="7beaf-156">**Disadvantage**: Mobile devices are so different from desktop devices that you may really want your mobile pages to be completely different from your desktop pages, showing different information.</span></span> <span data-ttu-id="7beaf-157">Takie wahania mogą być niewydajne lub niemożliwe do niezawodnego korzystania wyłącznie z CSS, szczególnie z uwzględnieniem, jak niespójnie starsze urządzenia interpretują reguły CSS.</span><span class="sxs-lookup"><span data-stu-id="7beaf-157">Such variations can be inefficient or impossible to achieve robustly through CSS alone, especially considering how inconsistently older devices interpret CSS rules.</span></span> <span data-ttu-id="7beaf-158">Jest to szczególnie prawdziwe w przypadku atrybutów CSS 3.</span><span class="sxs-lookup"><span data-stu-id="7beaf-158">This is particularly true of CSS 3 attributes.</span></span>
    - <span data-ttu-id="7beaf-159">**Wadą**: nie obsługuje różnych logiki po stronie serwera i przepływów pracy dla różnych urządzeń.</span><span class="sxs-lookup"><span data-stu-id="7beaf-159">**Disadvantage**: Provides no support for varying server-side logic and workflows for different devices.</span></span> <span data-ttu-id="7beaf-160">Nie można na przykład zaimplementować przepływu pracy wyewidencjonowywania koszyka dla użytkowników mobilnych za pomocą samego arkusza CSS.</span><span class="sxs-lookup"><span data-stu-id="7beaf-160">You can't, for example, implement a simplified shopping cart checkout workflow for mobile users by means of CSS alone.</span></span>
    - <span data-ttu-id="7beaf-161">**Wadą**: niewydajne użycie przepustowości.</span><span class="sxs-lookup"><span data-stu-id="7beaf-161">**Disadvantage**: Inefficient bandwidth use.</span></span> <span data-ttu-id="7beaf-162">Może być konieczne przesłanie znaczników i stylów, które mają zastosowanie do wszystkich możliwych urządzeń, nawet jeśli urządzenie docelowe będzie używać tylko podzestawu tych informacji.</span><span class="sxs-lookup"><span data-stu-id="7beaf-162">You server may have to transmit the markup and styles that apply to all possible devices, even though the target device will only use a subset of that information.</span></span>
3. <span data-ttu-id="7beaf-163">***Rozwiąż problem na serwerze* —** Jeśli serwer wie, które urządzenie uzyskuje do niego dostęp — lub co najmniej cechuje to urządzenie, takie jak rozmiar ekranu i Metoda wejściowa, a także czy jest to urządzenie przenośne — może uruchamiać inną logikę i wyprowadzać różne znaczniki HTML.</span><span class="sxs-lookup"><span data-stu-id="7beaf-163">***Solve the problem on the server* –** If your server knows what device is accessing it – or at least the characteristics of that device, such as its screen size and input method, and whether it's a mobile device – it can run different logic and output different HTML markup.</span></span> 

    - <span data-ttu-id="7beaf-164">**Zalety:** Maksymalna elastyczność.</span><span class="sxs-lookup"><span data-stu-id="7beaf-164">**Advantage:** Maximum flexibility.</span></span> <span data-ttu-id="7beaf-165">Nie ma żadnego limitu, w jaki sposób można zmienić logikę po stronie serwera dla urządzeń przenośnych lub zoptymalizować adiustację pod kątem żądanego układu określonego dla urządzenia.</span><span class="sxs-lookup"><span data-stu-id="7beaf-165">There's no limit to how much you can vary your server-side logic for mobiles or optimize your markup for the desired, device-specific layout.</span></span>
    - <span data-ttu-id="7beaf-166">**Zalety:** Efektywne wykorzystanie przepustowości.</span><span class="sxs-lookup"><span data-stu-id="7beaf-166">**Advantage:** Efficient bandwidth use.</span></span> <span data-ttu-id="7beaf-167">Wystarczy przesłać informacje o znaczniku i stylu, które będą używane przez urządzenie docelowe.</span><span class="sxs-lookup"><span data-stu-id="7beaf-167">You only need to transmit the markup and styling information that the target device is going to use.</span></span>
    - <span data-ttu-id="7beaf-168">**Wadą:** Czasami wymusza powtarzanie nakładu pracy lub kodu (np. Tworzenie podobnych, ale nieco różnych kopii stron formularzy sieci Web lub widoków MVC).</span><span class="sxs-lookup"><span data-stu-id="7beaf-168">**Disadvantage:** Sometimes forces repetition of effort or code (e.g., making you create similar but slightly different copies of your Web Forms pages or MVC views).</span></span> <span data-ttu-id="7beaf-169">Tam, gdzie to możliwe, zostanie wdrożona wspólna logika do warstwy lub usługi źródłowej, ale nadal niektóre części kodu interfejsu użytkownika lub znaczniki mogą być duplikowane, a następnie obsługiwane równolegle.</span><span class="sxs-lookup"><span data-stu-id="7beaf-169">Where possible you will factor out common logic into an underlying layer or service, but still, some parts of your UI code or markup may have to be duplicated and then maintained in parallel.</span></span>
    - <span data-ttu-id="7beaf-170">**Wadą:** Wykrywanie urządzeń nie jest proste.</span><span class="sxs-lookup"><span data-stu-id="7beaf-170">**Disadvantage:** Device detection is not trivial.</span></span> <span data-ttu-id="7beaf-171">Wymaga listy lub bazy danych znanych typów urządzeń i ich właściwości (które mogą nie zawsze być idealnie aktualne) i nie gwarantuje dokładnego dopasowania każdego żądania przychodzącego.</span><span class="sxs-lookup"><span data-stu-id="7beaf-171">It requires a list or database of known device types and their characteristics (which may not always be perfectly up-to-date) and isn't guaranteed to accurately match every incoming request.</span></span> <span data-ttu-id="7beaf-172">W tym dokumencie opisano niektóre opcje i ich pułapek w późniejszym czasie.</span><span class="sxs-lookup"><span data-stu-id="7beaf-172">This document describes some options and their pitfalls later.</span></span>

<span data-ttu-id="7beaf-173">Aby uzyskać najlepsze wyniki, większość deweloperów może znaleźć opcje połączenia (2) i (3).</span><span class="sxs-lookup"><span data-stu-id="7beaf-173">To get the best results, most developers find they need to combine options (2) and (3).</span></span> <span data-ttu-id="7beaf-174">Małe różnice stylistyczne najlepiej nadaje się na kliencie przy użyciu CSS lub nawet w języku JavaScript, a istotne różnice w zakresie danych, przepływu pracy lub znaczników są najbardziej efektywnie zaimplementowane w kodzie po stronie serwera.</span><span class="sxs-lookup"><span data-stu-id="7beaf-174">Minor stylistic differences are best accommodated on the client using CSS or even JavaScript, whereas major differences in data, workflow, or markup are most effectively implemented in server-side code.</span></span>

### <a name="this-paper-focuses-on-server-side-techniques"></a><span data-ttu-id="7beaf-175">Ten dokument koncentruje się na technikach po stronie serwera</span><span class="sxs-lookup"><span data-stu-id="7beaf-175">This paper focuses on server-side techniques</span></span>

<span data-ttu-id="7beaf-176">Ponieważ ASP.NET Web Forms i MVC są głównie technologiami po stronie serwera, ten oficjalny dokument koncentruje się na technikach po stronie serwera, które umożliwiają tworzenie różnych znaczników i logiki dla przeglądarek mobilnych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-176">Since ASP.NET Web Forms and MVC are both primarily server-side technologies, this white paper will focus on server-side techniques that let you produce different markup and logic for mobile browsers.</span></span> <span data-ttu-id="7beaf-177">Oczywiście można również połączyć ten element z dowolną techniką po stronie klienta (np. kwerendami z nośnikami CSS 3, udoskonaleniem kodu JavaScript), ale jest to bardziej kwestia projektowania sieci Web niż programowanie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="7beaf-177">Of course, you can also combine this with any client-side technique (e.g., CSS 3 media queries, progressive-enhancement JavaScript), but that's more a matter of web design than ASP.NET development.</span></span>

## <a name="browser-and-device-detection"></a><span data-ttu-id="7beaf-178">Wykrywanie przeglądarki i urządzeń</span><span class="sxs-lookup"><span data-stu-id="7beaf-178">Browser and device detection</span></span>

<span data-ttu-id="7beaf-179">Kluczowym wymaganiem wstępnym dla wszystkich technik po stronie serwera w celu obsługi urządzeń przenośnych jest określenie, które urządzenie jest używane przez Gościa.</span><span class="sxs-lookup"><span data-stu-id="7beaf-179">The key prerequisite for all server-side techniques for supporting mobile devices is to know what device your visitor is using.</span></span> <span data-ttu-id="7beaf-180">W rzeczywistości jeszcze lepszym rozwiązaniem niż znajomość producenta i numer modelu tego urządzenia jest znajomość *cech charakterystycznych* urządzenia.</span><span class="sxs-lookup"><span data-stu-id="7beaf-180">In fact, even better than knowing the manufacturer and model number of that device is knowing the *characteristics* of the device.</span></span> <span data-ttu-id="7beaf-181">Cechy mogą obejmować:</span><span class="sxs-lookup"><span data-stu-id="7beaf-181">Characteristics may include:</span></span>

- <span data-ttu-id="7beaf-182">Czy jest to urządzenie przenośne?</span><span class="sxs-lookup"><span data-stu-id="7beaf-182">Is it a mobile device?</span></span>
- <span data-ttu-id="7beaf-183">Input — Metoda (mysz/klawiatura, dotyk, klawiatura, joystick,...)</span><span class="sxs-lookup"><span data-stu-id="7beaf-183">Input method (mouse/keyboard, touch, keypad, joystick, …)</span></span>
- <span data-ttu-id="7beaf-184">Rozmiar ekranu (fizycznie i w pikselach)</span><span class="sxs-lookup"><span data-stu-id="7beaf-184">Screen size (physically and in pixels)</span></span>
- <span data-ttu-id="7beaf-185">Obsługiwane formaty multimediów i danych</span><span class="sxs-lookup"><span data-stu-id="7beaf-185">Supported media and data formats</span></span>
- <span data-ttu-id="7beaf-186">Etc.</span><span class="sxs-lookup"><span data-stu-id="7beaf-186">Etc.</span></span>

<span data-ttu-id="7beaf-187">Lepszym rozwiązaniem jest podejmowanie decyzji na podstawie cech charakterystycznych niż numer modelu, ponieważ następnie lepiej jest obsługiwać przyszłe urządzenia.</span><span class="sxs-lookup"><span data-stu-id="7beaf-187">It's better to make decisions based on characteristics than model number, because then you'll be better equipped to handle future devices.</span></span>

### <a name="using-aspnets-built-in-browser-detection-support"></a><span data-ttu-id="7beaf-188">Za pomocą ASP. Wbudowana obsługa wykrywania przeglądarki sieci</span><span class="sxs-lookup"><span data-stu-id="7beaf-188">Using ASP.NET's built-in browser detection support</span></span>

<span data-ttu-id="7beaf-189">ASP.NET Web Forms i deweloperzy MVC mogą natychmiast odnaleźć ważne cechy przeglądarki odwiedzającej, sprawdzając właściwości obiektu *Request. Browser* .</span><span class="sxs-lookup"><span data-stu-id="7beaf-189">ASP.NET Web Forms and MVC developers can immediately discover important characteristics of a visiting browser by inspecting properties of the *Request.Browser* object.</span></span> <span data-ttu-id="7beaf-190">Na przykład Zobacz</span><span class="sxs-lookup"><span data-stu-id="7beaf-190">For example, see</span></span>

- <span data-ttu-id="7beaf-191">Request.Browser.IsMobileDevice</span><span class="sxs-lookup"><span data-stu-id="7beaf-191">Request.Browser.IsMobileDevice</span></span>
- <span data-ttu-id="7beaf-192">Request.Browser.MobileDeviceManufacturer, Request.Browser.MobileDeviceModel</span><span class="sxs-lookup"><span data-stu-id="7beaf-192">Request.Browser.MobileDeviceManufacturer, Request.Browser.MobileDeviceModel</span></span>
- <span data-ttu-id="7beaf-193">Request.Browser.ScreenPixelsWidth</span><span class="sxs-lookup"><span data-stu-id="7beaf-193">Request.Browser.ScreenPixelsWidth</span></span>
- <span data-ttu-id="7beaf-194">Request.Browser.SupportsXmlHttp</span><span class="sxs-lookup"><span data-stu-id="7beaf-194">Request.Browser.SupportsXmlHttp</span></span>
- <span data-ttu-id="7beaf-195">...a wielu innych</span><span class="sxs-lookup"><span data-stu-id="7beaf-195">…and many others</span></span>

<span data-ttu-id="7beaf-196">W tle platforma ASP.NET dopasowuje nagłówek HTTP przychodzącego *agenta użytkownika* (UA) do wyrażenia regularnego w zestawie plików XML definicji przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="7beaf-196">Behind the scenes, the ASP.NET platform matches the incoming *User-Agent* (UA) HTTP header against regular expressions in a set of Browser Definition XML files.</span></span> <span data-ttu-id="7beaf-197">Domyślnie platforma zawiera definicje dla wielu popularnych urządzeń przenośnych i można dodawać niestandardowe pliki definicji przeglądarki dla innych, które mają być rozpoznawane.</span><span class="sxs-lookup"><span data-stu-id="7beaf-197">By default the platform includes definitions for many common mobile devices, and you can add custom Browser Definition files for others you wish to recognize.</span></span> <span data-ttu-id="7beaf-198">Aby uzyskać więcej informacji, zobacz strony MSDN [ASP.NET Web Server Controls and Browser Capabilities](https://msdn.microsoft.com/library/x3k2ssx2.aspx).</span><span class="sxs-lookup"><span data-stu-id="7beaf-198">For more details, see the MSDN page [ASP.NET Web Server Controls and Browser Capabilities](https://msdn.microsoft.com/library/x3k2ssx2.aspx).</span></span>

### <a name="using-the-wurfl-device-database-via-51degreesmobi-foundation"></a><span data-ttu-id="7beaf-199">Korzystanie z bazy danych urządzeń WURFL za pośrednictwem 51Degrees.mobi Foundation</span><span class="sxs-lookup"><span data-stu-id="7beaf-199">Using the WURFL device database via 51Degrees.mobi Foundation</span></span>

<span data-ttu-id="7beaf-200">Podczas gdy ASP. Wbudowana obsługa wykrywania przeglądarki sieci jest wystarczająca dla wielu aplikacji, jednak istnieją dwa główne przypadki, gdy może to być niewystarczające:</span><span class="sxs-lookup"><span data-stu-id="7beaf-200">While ASP.NET's built-in browser detection support will be sufficient for many applications, there are two main cases when it might not be enough:</span></span>

- <span data-ttu-id="7beaf-201">***Chcesz rozpoznać najnowsze urządzenia***(bez ręcznego tworzenia dla nich plików definicji przeglądarki).</span><span class="sxs-lookup"><span data-stu-id="7beaf-201">***You want to recognize the latest devices***(without manually creating Browser Definition files for them).</span></span> <span data-ttu-id="7beaf-202">Należy pamiętać, że pliki definicji przeglądarki .NET 4 nie są wystarczająco aktualne, aby można było rozpoznać Windows Phone 7, telefony z systemem Android, przeglądarki programu Opera Mobile lub Apple iPad.</span><span class="sxs-lookup"><span data-stu-id="7beaf-202">Note that .NET 4's Browser Definition files are not recent enough to recognize Windows Phone 7, Android phones, Opera Mobile browsers, or Apple iPads.</span></span>
- <span data-ttu-id="7beaf-203">***Potrzebujesz bardziej szczegółowych informacji na temat możliwości urządzeń***.</span><span class="sxs-lookup"><span data-stu-id="7beaf-203">***You need more detailed information about device capabilities***.</span></span> <span data-ttu-id="7beaf-204">Może być konieczne poznanie metody wejściowej urządzenia (np. dotknięcie klawiatury) lub formatów dźwięku obsługiwanych przez przeglądarkę.</span><span class="sxs-lookup"><span data-stu-id="7beaf-204">You may need to know about a device's input method (e.g., touch vs keypad), or what audio formats the browser supports.</span></span> <span data-ttu-id="7beaf-205">Te informacje nie są dostępne w standardowych plikach definicji przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="7beaf-205">This information isn't available in the standard Browser Definition files.</span></span>

<span data-ttu-id="7beaf-206">[Projekt WURFL ( *Wireless Universal Resource File* )](http://wurfl.sourceforge.net/) zawiera znacznie bardziej aktualne i szczegółowe informacje o urządzeniach przenośnych używanych obecnie.</span><span class="sxs-lookup"><span data-stu-id="7beaf-206">The [*Wireless Universal Resource File* (WURFL) project](http://wurfl.sourceforge.net/) maintains much more up-to-date and detailed information about mobile devices in use today.</span></span>

<span data-ttu-id="7beaf-207">Doskonałe wiadomości dla deweloperów platformy .NET to ASP. Funkcja wykrywania przeglądarki sieci jest rozszerzalna, dlatego można ją ulepszyć, aby wyeliminować te problemy.</span><span class="sxs-lookup"><span data-stu-id="7beaf-207">The great news for .NET developers is that ASP.NET's browser detection feature is extensible, so it's possible to enhance it to overcome these problems.</span></span> <span data-ttu-id="7beaf-208">Można na przykład dodać do projektu bibliotekę Open Source [*51Degrees.mobi Foundation*](https://github.com/51Degrees/dotNET-Device-Detection) .</span><span class="sxs-lookup"><span data-stu-id="7beaf-208">For example, you can add the open source [*51Degrees.mobi Foundation*](https://github.com/51Degrees/dotNET-Device-Detection) library to your project.</span></span> <span data-ttu-id="7beaf-209">Jest to ASP.NET IHttpModule lub dostawca możliwości przeglądarki (można go używać zarówno w przypadku formularzy sieci Web, jak i aplikacji MVC), które bezpośrednio odczytuje dane WURFL i przechwytuje je do ASP. Wbudowany mechanizm wykrywania przeglądarki sieci Web.</span><span class="sxs-lookup"><span data-stu-id="7beaf-209">It's an ASP.NET IHttpModule or Browser Capabilities Provider (usable on both Web Forms and MVC applications), that directly reads WURFL data and hooks it into ASP.NET's built-in browser detection mechanism.</span></span> <span data-ttu-id="7beaf-210">Po zainstalowaniu modułu *żądanie. przeglądarka* będzie nagle zawierać bardziej dokładne i szczegółowe informacje: będzie poprawnie rozpoznawać wiele wcześniej wymienionych urządzeń i wyświetlać ich możliwości (w tym dodatkowe możliwości, takie jak Metoda wejściowa).</span><span class="sxs-lookup"><span data-stu-id="7beaf-210">Once you've installed the module, *Request.Browser* will suddenly contain a lot more accurate and detailed information: it will correctly recognize many of the devices previously mentioned and list their capabilities (including additional capabilities such as input method).</span></span> <span data-ttu-id="7beaf-211">Więcej informacji można znaleźć w dokumentacji projektu.</span><span class="sxs-lookup"><span data-stu-id="7beaf-211">See the project's documentation for more details.</span></span>

## <a name="how-web-forms-applications-can-present-mobile-specific-pages"></a><span data-ttu-id="7beaf-212">Jak aplikacje formularzy sieci Web mogą przedstawiać strony z konkretnymi urządzeniami przenośnymi</span><span class="sxs-lookup"><span data-stu-id="7beaf-212">How Web Forms applications can present mobile-specific pages</span></span>

<span data-ttu-id="7beaf-213">Domyślnie poniżej przedstawiono sposób wyświetlania nowej aplikacji formularzy sieci Web na typowych urządzeniach przenośnych:</span><span class="sxs-lookup"><span data-stu-id="7beaf-213">By default, here's how a brand new Web Forms application displays on common mobile devices:</span></span>

![](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/_static/image1.png)

<span data-ttu-id="7beaf-214">Jasno, żaden układ nie wygląda dobrze przyjazny — ta strona została zaprojektowana dla dużego, zorientowanego na poziomie monitora, a nie dla małego ekranu zorientowanego na orientację pionową.</span><span class="sxs-lookup"><span data-stu-id="7beaf-214">Clearly, neither layout looks very mobile-friendly – this page was designed for a large, landscape-oriented monitor, not for a small portrait-oriented screen.</span></span> <span data-ttu-id="7beaf-215">Co możesz zrobić?</span><span class="sxs-lookup"><span data-stu-id="7beaf-215">So what can you do about it?</span></span>

<span data-ttu-id="7beaf-216">Zgodnie z opisem we wcześniejszej części tego dokumentu istnieje wiele sposobów dostosowywania stron do urządzeń przenośnych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-216">As discussed earlier in this paper, there are many ways to tailor your pages for mobile devices.</span></span> <span data-ttu-id="7beaf-217">Niektóre techniki są oparte na serwerze, inne działają na kliencie.</span><span class="sxs-lookup"><span data-stu-id="7beaf-217">Some techniques are server-based, others run on the client.</span></span>

### <a name="creating-a-mobile-specific-master-page"></a><span data-ttu-id="7beaf-218">Tworzenie strony wzorcowej specyficznej dla urządzeń przenośnych</span><span class="sxs-lookup"><span data-stu-id="7beaf-218">Creating a mobile-specific master page</span></span>

<span data-ttu-id="7beaf-219">W zależności od wymagań można korzystać z tych samych formularzy sieci Web dla wszystkich odwiedzających, ale mają dwie osobne strony główne: jeden dla odwiedzających komputery, drugi dla odwiedzających dla urządzeń przenośnych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-219">Depending on your requirements, you may be able to use the same Web Forms for all visitors, but have two separate master pages: one for desktop visitors, another for mobile visitors.</span></span> <span data-ttu-id="7beaf-220">Dzięki temu można elastycznie zmieniać arkusz stylów CSS lub znaczniki HTML najwyższego poziomu, aby odpowiadały urządzeniom przenośnym, bez wymuszania duplikowania żadnej logiki strony.</span><span class="sxs-lookup"><span data-stu-id="7beaf-220">This gives you the flexibility of changing the CSS stylesheet or your top-level HTML markup to suit mobile devices, without forcing you to duplicate any page logic.</span></span>

<span data-ttu-id="7beaf-221">Jest to bardzo proste.</span><span class="sxs-lookup"><span data-stu-id="7beaf-221">This is easy to do.</span></span> <span data-ttu-id="7beaf-222">Na przykład można dodać program obsługi przed inicjalizacją, taki jak poniższy, do formularza sieci Web:</span><span class="sxs-lookup"><span data-stu-id="7beaf-222">For example, you can add a PreInit handler such as the following to a Web Form:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample1.cs)]

<span data-ttu-id="7beaf-223">Teraz Utwórz stronę wzorcową o nazwie Mobile. Master w folderze najwyższego poziomu aplikacji, która będzie używana po wykryciu urządzenia przenośnego.</span><span class="sxs-lookup"><span data-stu-id="7beaf-223">Now, create a master page called Mobile.Master in the top-level folder of your application, and it will be used when a mobile device is detected.</span></span> <span data-ttu-id="7beaf-224">W razie potrzeby Strona wzorcowa urządzenia przenośnego może odwoływać się do arkusza stylów CSS specyficznych dla urządzeń przenośnych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-224">Your mobile master page can reference a mobile-specific CSS stylesheet if necessary.</span></span> <span data-ttu-id="7beaf-225">Osoby odwiedzające pulpit nadal będą widzieć domyślną stronę wzorcową, a nie na urządzeniu mobilnym.</span><span class="sxs-lookup"><span data-stu-id="7beaf-225">Desktop visitors will still see your default master page, not the mobile one.</span></span>

### <a name="creating-independent-mobile-specific-web-forms"></a><span data-ttu-id="7beaf-226">Tworzenie niezależnych formularzy sieci Web dla urządzeń przenośnych</span><span class="sxs-lookup"><span data-stu-id="7beaf-226">Creating independent mobile-specific Web Forms</span></span>

<span data-ttu-id="7beaf-227">W celu zapewnienia maksymalnej elastyczności można znacznie nie tylko mieć osobne strony wzorcowe dla różnych typów urządzeń.</span><span class="sxs-lookup"><span data-stu-id="7beaf-227">For maximum flexibility, you can go much further than just having separate master pages for different device types.</span></span> <span data-ttu-id="7beaf-228">Można zaimplementować dwa *całkowicie oddzielne zestawy stron formularzy sieci Web* — jeden zestaw dla przeglądarek klasycznych, inny zestaw dla urządzeń przenośnych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-228">You can implement two *totally separate sets of Web Forms pages* – one set for desktop browsers, another set for mobiles.</span></span> <span data-ttu-id="7beaf-229">Jest to najlepsze rozwiązanie, jeśli chcesz przedstawić bardzo różne informacje lub przepływy pracy odwiedzającym dla urządzeń przenośnych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-229">This works best if you want to present very different information or workflows to mobile visitors.</span></span> <span data-ttu-id="7beaf-230">Pozostała część tej sekcji opisuje to podejście szczegółowo.</span><span class="sxs-lookup"><span data-stu-id="7beaf-230">The rest of this section describes this approach in detail.</span></span>

<span data-ttu-id="7beaf-231">Przy założeniu, że masz już aplikację formularzy sieci Web zaprojektowaną pod kątem przeglądarek klasycznych, najprostszym sposobem, aby to zrobić, jest utworzenie podfolderu o nazwie "Mobile" w projekcie i skompilowanie stron mobilnych w tym miejscu.</span><span class="sxs-lookup"><span data-stu-id="7beaf-231">Assuming you already have a Web Forms application designed for desktop browsers, the easiest way to proceed is to create a subfolder called "Mobile" within your project, and build your mobile pages there.</span></span> <span data-ttu-id="7beaf-232">Można utworzyć całą podwitrynę z własnymi stronami wzorcowymi, arkuszami stylów i stronami przy użyciu wszystkich tych samych technik, które są używane dla innych aplikacji formularzy sieci Web.</span><span class="sxs-lookup"><span data-stu-id="7beaf-232">You can construct an entire sub-site, with its own master pages, style sheets, and pages, using all the same techniques that you'd use for any other Web Forms application.</span></span> <span data-ttu-id="7beaf-233">Nie trzeba tworzyć jeszcze odpowiednika dla *wszystkich* stron w witrynie klasycznej. Możesz wybrać podzbiór funkcji, który ma sens dla odwiedzających mobilnych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-233">You don't necessarily need to produce a mobile equivalent for *every* page in your desktop site; you can choose what subset of functionality makes sense for mobile visitors.</span></span>

<span data-ttu-id="7beaf-234">Twoje strony mobilne mogą udostępniać wspólne zasoby statyczne (takie jak obrazy, pliki JavaScript lub CSS) przy użyciu zwykłych stron, jeśli chcesz.</span><span class="sxs-lookup"><span data-stu-id="7beaf-234">Your mobile pages can share common static resources (such as images, JavaScript, or CSS files) with your regular pages if you wish.</span></span> <span data-ttu-id="7beaf-235">Ponieważ folder "mobilny" *nie* zostanie oznaczony jako oddzielna aplikacja, która jest hostowana w usługach IIS (tylko prosty podfolder stron formularzy sieci Web), będzie również udostępniać wszystkie takie same konfiguracje, dane sesji i inne infrastruktury, jak strony pulpitu.</span><span class="sxs-lookup"><span data-stu-id="7beaf-235">Since your "Mobile" folder will *not* be marked as a separate application when hosted in IIS (it's just a simple subfolder of Web Forms pages), it will also share all the same configuration, Session data, and other infrastructure as your desktop pages.</span></span>

> [!NOTE]
> <span data-ttu-id="7beaf-236">Ponieważ takie podejście zwykle wiąże się z duplikowaniem kodu (strony mobilne są prawdopodobnie takie same ze stronami pulpitu), ważne jest, aby zastanowić się, że wszystkie typowe reguły biznesowe lub dane dostępu do danych zostaną wdrożone w udostępnionej warstwie lub usłudze źródłowej.</span><span class="sxs-lookup"><span data-stu-id="7beaf-236">Since this approach usually involves some duplication of code (mobile pages are likely to share some similarities with desktop pages), it's important to factor out any common business logic or data access code into a shared underlying layer or service.</span></span> <span data-ttu-id="7beaf-237">W przeciwnym razie zostanie podwojony nakład pracy związany z tworzeniem i utrzymywaniem aplikacji.</span><span class="sxs-lookup"><span data-stu-id="7beaf-237">Otherwise, you'll double the effort of creating and maintaining your application.</span></span>

#### <a name="redirecting-mobile-visitors-to-your-mobile-pages"></a><span data-ttu-id="7beaf-238">Przekierowywanie odwiedzających użytkowników mobilnych do stron mobilnych</span><span class="sxs-lookup"><span data-stu-id="7beaf-238">Redirecting mobile visitors to your mobile pages</span></span>

<span data-ttu-id="7beaf-239">Często wygodnie jest przekierowywać odwiedzających do stron mobilnych tylko na *pierwszym* żądaniu w sesji przeglądania (a nie na każdym żądaniu w swojej sesji), ponieważ:</span><span class="sxs-lookup"><span data-stu-id="7beaf-239">It's often convenient to redirect mobile visitors to the mobile pages only on the *first* request in their browsing session (and not on every request in their session), because:</span></span>

- <span data-ttu-id="7beaf-240">Następnie możesz łatwo zezwolić odwiedzającym mobilnym na dostęp do stron pulpitu, jeśli chcesz, po prostu umieść link na stronie wzorcowej, który przejdzie do "wersji klasycznej".</span><span class="sxs-lookup"><span data-stu-id="7beaf-240">You can then easily allow mobile visitors to access your desktop pages if they wish – just put a link on your master page that goes to "Desktop version".</span></span> <span data-ttu-id="7beaf-241">Gość nie zostanie przekierowany z powrotem do strony mobilnej, ponieważ nie jest to już pierwsze żądanie w swojej sesji.</span><span class="sxs-lookup"><span data-stu-id="7beaf-241">The visitor won't be redirected back to a mobile page, because it's no longer the first request in their session.</span></span>
- <span data-ttu-id="7beaf-242">Pozwala to uniknąć ryzyka zakłócania żądań dla wszystkich zasobów dynamicznych współdzielonych między pulpitem i urządzeniami przenośnymi w witrynie (np. Jeśli masz wspólny formularz sieci Web, który jest wyświetlany na komputerze stacjonarnym i urządzeniach przenośnych, w elemencie IFRAME lub niektórych programach obsługi AJAX)</span><span class="sxs-lookup"><span data-stu-id="7beaf-242">It avoids the risk of interfering with requests for any dynamic resources shared between desktop and mobile parts of your site (e.g., if you have a common Web Form that both desktop and mobile parts of your site display in an IFRAME, or certain Ajax handlers)</span></span>

<span data-ttu-id="7beaf-243">W tym celu można umieścić logikę przekierowania w **sesji\_metody startowej** .</span><span class="sxs-lookup"><span data-stu-id="7beaf-243">To do this, you can place your redirection logic in a **Session\_Start** method.</span></span> <span data-ttu-id="7beaf-244">Na przykład Dodaj następującą metodę do pliku Global.asax.cs:</span><span class="sxs-lookup"><span data-stu-id="7beaf-244">For example, add the following method to your Global.asax.cs file:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample2.cs)]

#### <a name="configuring-forms-authentication-to-respect-your-mobile-pages"></a><span data-ttu-id="7beaf-245">Konfigurowanie uwierzytelniania formularzy w celu uwzględnienia stron mobilnych</span><span class="sxs-lookup"><span data-stu-id="7beaf-245">Configuring Forms Authentication to respect your mobile pages</span></span>

<span data-ttu-id="7beaf-246">Należy pamiętać, że uwierzytelnianie formularzy wykonuje pewne założenia, w których można przekierować odwiedzających w trakcie procesu uwierzytelniania i po nim:</span><span class="sxs-lookup"><span data-stu-id="7beaf-246">Note that Forms Authentication makes certain assumptions about where it can redirect visitors during and after the authentication process:</span></span>

- <span data-ttu-id="7beaf-247">Gdy użytkownik musi zostać uwierzytelniony, uwierzytelnianie formularzy przekieruje je do strony logowania pulpitu, niezależnie od tego, czy są one komputerem stacjonarnym czy użytkownikiem mobilnym (ponieważ ma tylko pojęcie *jednego* adresu URL logowania).</span><span class="sxs-lookup"><span data-stu-id="7beaf-247">When a user needs to be authenticated, Forms Authentication will redirect them to your desktop login page, regardless of whether they're a desktop or mobile user (because it only has a concept of *one* login URL).</span></span> <span data-ttu-id="7beaf-248">Przy założeniu, że chcesz stylować stronę logowania mobilnego inaczej, musisz rozszerzyć stronę logowania pulpitu, aby przekierować użytkowników mobilnych na osobną stronę logowania do urządzeń przenośnych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-248">Assuming you want to style your mobile login page differently, you need to enhance your desktop login page so that it redirects mobile users to a separate mobile login page.</span></span> <span data-ttu-id="7beaf-249">Na przykład Dodaj następujący kod na stronie logowania do **pulpitu** :</span><span class="sxs-lookup"><span data-stu-id="7beaf-249">For example, add the following code to your **desktop** login page code-behind:</span></span> 

    [!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample3.cs)]
- <span data-ttu-id="7beaf-250">Po pomyślnym zalogowaniu się użytkownika uwierzytelnianie formularzy domyślnie przekieruje je do strony głównej pulpitu (ponieważ ma tylko koncepcję *jednej* strony domyślnej).</span><span class="sxs-lookup"><span data-stu-id="7beaf-250">After a user successfully logs in, Forms Authentication will by default redirect them to your desktop home page (because it only has a concept of *one* default page).</span></span> <span data-ttu-id="7beaf-251">Musisz wzmocnić swoją stronę logowania do urządzeń przenośnych, aby przekierować ją do strony głównej mobilnej po pomyślnym zalogowaniu.</span><span class="sxs-lookup"><span data-stu-id="7beaf-251">You need to enhance your mobile login page so that it redirects to the mobile home page after a successful log-in.</span></span> <span data-ttu-id="7beaf-252">Na przykład Dodaj następujący kod do kodu strony logowania do **urządzeń przenośnych** :</span><span class="sxs-lookup"><span data-stu-id="7beaf-252">For example, add the following code to your **mobile** login page code-behind:</span></span> 

    [!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample4.cs)]
  
  <span data-ttu-id="7beaf-253">Ten kod zakłada, że strona ma kontrolkę serwer logowania o nazwie LoginUser, jak w domyślnym szablonie projektu.</span><span class="sxs-lookup"><span data-stu-id="7beaf-253">This code assumes your page has a Login server control called LoginUser, as in the default project template.</span></span>

### <a name="working-with-output-caching"></a><span data-ttu-id="7beaf-254">Praca z buforowaniem danych wyjściowych</span><span class="sxs-lookup"><span data-stu-id="7beaf-254">Working with Output Caching</span></span>

<span data-ttu-id="7beaf-255">Jeśli używasz buforowania danych wyjściowych, uważaj, aby użytkownik pulpitu mógł odwiedzać określony adres URL (powodując, że dane wyjściowe są buforowane), a następnie użytkownika mobilnego, który następnie odbiera zbuforowane dane wyjściowe na pulpicie.</span><span class="sxs-lookup"><span data-stu-id="7beaf-255">If you're using output caching, beware that by default it's possible for a desktop user to visit a certain URL (causing its output to be cached), followed by a mobile user who then receives the cached desktop output.</span></span> <span data-ttu-id="7beaf-256">To ostrzeżenie ma wpływ na to, czy jesteś w trakcie zmieniania strony wzorcowej według typu urządzenia, czy implementacji całkowicie oddzielnych formularzy sieci Web dla każdego typu urządzenia.</span><span class="sxs-lookup"><span data-stu-id="7beaf-256">This warning applies whether you're just varying your master page by device type, or implementing totally separate Web Forms per device type.</span></span>

<span data-ttu-id="7beaf-257">Aby uniknąć tego problemu, można polecić ASP.NET w celu zmiany wpisu pamięci podręcznej w zależności od tego, czy osoba odwiedzająca korzysta z urządzenia przenośnego.</span><span class="sxs-lookup"><span data-stu-id="7beaf-257">To avoid the problem, you can instruct ASP.NET to vary the cache entry according to whether the visitor is using a mobile device.</span></span> <span data-ttu-id="7beaf-258">Dodaj parametr VaryByCustom do deklaracji OutputCache strony w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="7beaf-258">Add a VaryByCustom parameter to your page's OutputCache declaration as follows:</span></span>

[!code-aspx[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample5.aspx)]

<span data-ttu-id="7beaf-259">Następnie zdefiniuj *isMobileDevice* jako niestandardowy parametr pamięci podręcznej, dodając następujące zastąpienie metody do pliku Global.asax.cs:</span><span class="sxs-lookup"><span data-stu-id="7beaf-259">Next, define *isMobileDevice* as a custom cache parameter by adding the following method override to your Global.asax.cs file:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample6.cs)]

<span data-ttu-id="7beaf-260">Dzięki temu osoby odwiedzające nie odbierają danych wyjściowych wcześniej umieszczonych w pamięci podręcznej przez użytkownika pulpitu.</span><span class="sxs-lookup"><span data-stu-id="7beaf-260">This will ensure that mobile visitors to the page don't receive output previously put into the cache by a desktop visitor.</span></span>

### <a name="a-working-example"></a><span data-ttu-id="7beaf-261">Przykład roboczy</span><span class="sxs-lookup"><span data-stu-id="7beaf-261">A working example</span></span>

<span data-ttu-id="7beaf-262">Aby zapoznać się z tymi technikami, Pobierz [przykłady kodu tego dokumentu](https://docs.microsoft.com/aspnet/mobile/overview).</span><span class="sxs-lookup"><span data-stu-id="7beaf-262">To see these techniques in action, download [this white paper's code samples](https://docs.microsoft.com/aspnet/mobile/overview).</span></span> <span data-ttu-id="7beaf-263">Aplikacja Przykładowa formularzy sieci Web automatycznie przekierowuje użytkowników mobilnych do zestawu stron dla urządzeń przenośnych w podfolderze o nazwie Mobile.</span><span class="sxs-lookup"><span data-stu-id="7beaf-263">The Web Forms sample application automatically redirects mobile users to a set of mobile-specific pages in a subfolder called Mobile.</span></span> <span data-ttu-id="7beaf-264">Znaczniki i style tych stron są lepiej zoptymalizowane pod kątem przeglądarek dla urządzeń przenośnych, ponieważ są one widoczne na następujących zrzutach ekranu:</span><span class="sxs-lookup"><span data-stu-id="7beaf-264">The markup and styling of those pages is better optimized for mobile browsers, as you can see from the following screenshots:</span></span>

![](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/_static/image2.png)

<span data-ttu-id="7beaf-265">Aby uzyskać więcej porad na temat optymalizowania znaczników i CSS w przeglądarkach dla urządzeń przenośnych, zobacz sekcję "Style mobilne strony dla przeglądarek mobilnych" w dalszej części tego dokumentu.</span><span class="sxs-lookup"><span data-stu-id="7beaf-265">For more tips about optimizing your markup and CSS for mobile browsers, see the section "Styling mobile pages for mobile browsers" later in this document.</span></span>

## <a name="how-aspnet-mvc-applications-can-present-mobile-specific-pages"></a><span data-ttu-id="7beaf-266">Jak aplikacje ASP.NET MVC mogą przedstawiać strony specyficzne dla urządzeń przenośnych</span><span class="sxs-lookup"><span data-stu-id="7beaf-266">How ASP.NET MVC applications can present mobile-specific pages</span></span>

<span data-ttu-id="7beaf-267">Ze względu na to, że wzorzec programu Model-View-Controller oddziela logikę aplikacji (w kontrolerach) z logiki prezentacji (w widokach), można wybrać jedną z następujących metod obsługi urządzeń przenośnych w kodzie po stronie serwera:</span><span class="sxs-lookup"><span data-stu-id="7beaf-267">Since the Model-View-Controller pattern decouples application logic (in controllers) from presentation logic (in views), you can choose from any of the following approaches to handling mobile support in server-side code:</span></span>

1. <span data-ttu-id="7beaf-268">\*\**używać tych samych kontrolerów i widoków zarówno dla przeglądarek klasycznych, jak i mobilnych, ale renderuje widoki z różnymi układami Razor w zależności od typu urządzenia *.**</span><span class="sxs-lookup"><span data-stu-id="7beaf-268">\***Use the same controllers and views for both desktop and mobile browsers, but render the views with different Razor layouts depending on the device type\*.**</span></span> <span data-ttu-id="7beaf-269">Ta opcja działa najlepiej, jeśli są wyświetlane identyczne dane na wszystkich urządzeniach, ale po prostu chcą podawać różne arkusze stylów CSS lub zmieniać kilka elementów HTML najwyższego poziomu dla urządzeń przenośnych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-269">This option works best if you're displaying identical data on all devices, but simply want to supply different CSS stylesheets or change a few top-level HTML elements for mobiles.</span></span>
2. <span data-ttu-id="7beaf-270">***Używaj tych samych kontrolerów zarówno dla przeglądarek klasycznych, jak i mobilnych, ale Renderuj różne widoki w zależności od typu urządzenia***.</span><span class="sxs-lookup"><span data-stu-id="7beaf-270">***Use the same controllers for both desktop and mobile browsers, but render different views depending on the device type***.</span></span> <span data-ttu-id="7beaf-271">Ta opcja działa najlepiej, jeśli są wyświetlane mniej więcej te same dane i zapewniają te same przepływy pracy dla użytkowników końcowych, ale chcemy renderować bardzo różne znaczniki HTML w celu dopasowania do używanego urządzenia.</span><span class="sxs-lookup"><span data-stu-id="7beaf-271">This option works best if you're displaying roughly the same data and providing the same workflows for end users, but want to render very different HTML markup to suit the device being used.</span></span>
3. <span data-ttu-id="7beaf-272">\*\**utworzyć oddzielne obszary dla przeglądarek klasycznych i mobilnych, implementując niezależne kontrolery i widoki dla każdego *.**</span><span class="sxs-lookup"><span data-stu-id="7beaf-272">\***Create separate areas for desktop and mobile browsers, implementing independent controllers and views for each\*.**</span></span> <span data-ttu-id="7beaf-273">Ta opcja działa najlepiej, jeśli są wyświetlane różne ekrany zawierające różne informacje i prowadzące użytkownika przez różne przepływy pracy zoptymalizowane pod kątem ich typu urządzenia.</span><span class="sxs-lookup"><span data-stu-id="7beaf-273">This option works best if you're displaying very different screens, containing different information and leading the user through different workflows optimized for their device type.</span></span> <span data-ttu-id="7beaf-274">Może to oznaczać powtarzanie kodu, ale można zminimalizować to przez rozpowszechnienie typowej logiki do warstwy podstawowej lub usługi.</span><span class="sxs-lookup"><span data-stu-id="7beaf-274">It may mean some repetition of code, but you can minimize that by factoring out common logic into an underlying layer or service.</span></span>

<span data-ttu-id="7beaf-275">Jeśli chcesz skorzystać z **pierwszej** opcji i różnią się tylko układem Razor dla każdego typu urządzenia, jest to bardzo proste.</span><span class="sxs-lookup"><span data-stu-id="7beaf-275">If you want to take the **first** option and vary only the Razor layout per device type, it's very easy.</span></span> <span data-ttu-id="7beaf-276">Zmodyfikuj plik \_ViewStart. cshtml w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="7beaf-276">Just modify your \_ViewStart.cshtml file as follows:</span></span>

[!code-cshtml[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample7.cshtml)]

<span data-ttu-id="7beaf-277">Teraz można utworzyć układ specyficzny dla urządzeń przenośnych o nazwie \_LayoutMobile. cshtml z użyciem struktury strony i reguł CSS zoptymalizowanych pod kątem urządzeń przenośnych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-277">Now you can create a mobile-specific layout called \_LayoutMobile.cshtml with a page structure and CSS rules optimized for mobile devices.</span></span>

<span data-ttu-id="7beaf-278">Jeśli chcesz wykonać **drugą** opcję Renderuj całkowicie różne widoki zgodnie z typem urządzenia gościa, zobacz [wpis w blogu Scott Hanselman](http://www.hanselman.com/blog/ABetterASPNETMVCMobileDeviceCapabilitiesViewEngine.aspx).</span><span class="sxs-lookup"><span data-stu-id="7beaf-278">If you want to take the **second** option render totally different views according to the visitor's device type, see [Scott Hanselman's blog post](http://www.hanselman.com/blog/ABetterASPNETMVCMobileDeviceCapabilitiesViewEngine.aspx).</span></span>

<span data-ttu-id="7beaf-279">Pozostała część tego dokumentu koncentruje się na **trzeciej** opcji — Tworzenie oddzielnych kontrolerów *i* widoków dla urządzeń przenośnych — dzięki temu można kontrolować, jaki podzestaw funkcji jest oferowany dla odwiedzających mobilnych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-279">The rest of this paper focuses on the **third** option – creating separate controllers *and* views for mobile devices – so you can control exactly what subset of functionality is offered for mobile visitors.</span></span>

### <a name="setting-up-a-mobile-area-within-your-aspnet-mvc-application"></a><span data-ttu-id="7beaf-280">Konfigurowanie obszaru mobilnego w aplikacji ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="7beaf-280">Setting up a Mobile area within your ASP.NET MVC application</span></span>

<span data-ttu-id="7beaf-281">Możesz dodać obszar o nazwie "Mobile" do istniejącej aplikacji ASP.NET MVC w zwykły sposób: kliknij prawym przyciskiem myszy nazwę projektu w Eksplorator rozwiązań, a następnie wybierz polecenie Dodaj obszar à.</span><span class="sxs-lookup"><span data-stu-id="7beaf-281">You can add an area called "Mobile" to an existing ASP.NET MVC application in the normal way: right-click on your project name in Solution Explorer, then choose Add à Area.</span></span> <span data-ttu-id="7beaf-282">Następnie można dodać kontrolery i widoki w taki sam sposób, jak w przypadku każdego innego obszaru w aplikacji ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="7beaf-282">You can then add controllers and views as you would for any other area within an ASP.NET MVC application.</span></span> <span data-ttu-id="7beaf-283">Na przykład Dodaj do swojego obszaru przenośnego nowy kontroler o nazwie HomeController, który będzie pełnił rolę strony głównej dla odwiedzających mobilnych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-283">For example, add to your Mobile area a new controller called HomeController to act as a homepage for mobile visitors.</span></span>

### <a name="ensuring-the-url-mobile-reaches-the-mobile-homepage"></a><span data-ttu-id="7beaf-284">Upewnienie się, że adres URL/Mobile dociera do mobilnej strony głównej</span><span class="sxs-lookup"><span data-stu-id="7beaf-284">Ensuring the URL /Mobile reaches the mobile homepage</span></span>

<span data-ttu-id="7beaf-285">Jeśli chcesz, aby adres URL/Mobile się do akcji index na HomeController w obszarze przenośnym, musisz wprowadzić dwa małe zmiany w konfiguracji routingu.</span><span class="sxs-lookup"><span data-stu-id="7beaf-285">If you want the URL /Mobile to reach the Index action on HomeController inside your Mobile area, you will need to make two small changes to your routing configuration.</span></span> <span data-ttu-id="7beaf-286">Najpierw Zaktualizuj swoją klasę MobileAreaRegistration, tak aby HomeController jest domyślnym kontrolerem w obszarze mobilnym, jak pokazano w poniższym kodzie:</span><span class="sxs-lookup"><span data-stu-id="7beaf-286">First, update your MobileAreaRegistration class so that HomeController is the default controller in your Mobile area, as shown in the following code:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample8.cs)]

<span data-ttu-id="7beaf-287">Oznacza to, że Strona główna urządzenia przenośnego będzie teraz dostępna w witrynie/Mobile, a nie/Mobile/Home, ponieważ "Strona główna" jest teraz niejawnie domyślną nazwą kontrolera dla stron mobilnych.</span><span class="sxs-lookup"><span data-stu-id="7beaf-287">This means the mobile homepage will now be located at /Mobile, rather than /Mobile/Home, because "Home" is now the implicitly default controller name for mobile pages.</span></span>

<span data-ttu-id="7beaf-288">Następnie należy zauważyć, że przez dodanie drugiego HomeController do aplikacji (tj. urządzenia przenośnego, poza istniejącym pulpitem), zostanie uszkodzona zwykła Strona główna pulpitu.</span><span class="sxs-lookup"><span data-stu-id="7beaf-288">Next, note that by adding a second HomeController to your application (i.e., the mobile one, in addition to the existing desktop one), you'll have broken your regular desktop homepage.</span></span> <span data-ttu-id="7beaf-289">Wystąpił błąd "*znaleziono wiele typów zgodnych z kontrolerem o nazwie" Home "* ".</span><span class="sxs-lookup"><span data-stu-id="7beaf-289">It will fail with the error "*Multiple types were found that match the controller named 'Home'*".</span></span> <span data-ttu-id="7beaf-290">Aby rozwiązać ten problem, zaktualizuj konfigurację routingu najwyższego poziomu (w Global.asax.cs), aby określić, że komputer stacjonarny HomeController powinien mieć priorytet w przypadku niejednoznaczności:</span><span class="sxs-lookup"><span data-stu-id="7beaf-290">To resolve this, update your top-level routing configuration (in Global.asax.cs) to specify that your desktop HomeController should take priority when there's ambiguity:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample9.cs)]

<span data-ttu-id="7beaf-291">Teraz ten błąd zostanie wysunięty, a adres URL http:\/\/*yoursite*/będzie docierał do strony głównej pulpitu, a protokół http:\/\/*yoursite*/Mobile/zostanie osiągnięty na stronie głównej urządzenia przenośnego.</span><span class="sxs-lookup"><span data-stu-id="7beaf-291">Now the error will go away, and the URL http:\/\/*yoursite*/ will reach the desktop homepage, and http:\/\/*yoursite*/mobile/ will reach the mobile homepage.</span></span>

### <a name="redirecting-mobile-visitors-to-your-mobile-area"></a><span data-ttu-id="7beaf-292">Przekierowywanie odwiedzających urządzenia przenośne do obszaru komórkowego</span><span class="sxs-lookup"><span data-stu-id="7beaf-292">Redirecting mobile visitors to your mobile area</span></span>

<span data-ttu-id="7beaf-293">Istnieje wiele różnych punktów rozszerzalności w ASP.NET MVC, dlatego istnieje wiele możliwych sposobów iniekcji logiki przekierowania.</span><span class="sxs-lookup"><span data-stu-id="7beaf-293">There are many different extensibility points in ASP.NET MVC, so there are many possible ways to inject redirection logic.</span></span> <span data-ttu-id="7beaf-294">Jedną z opcji zapełniania jest utworzenie atrybutu filtru [RedirectMobileDevicesToMobileArea], który wykonuje przekierowanie w przypadku spełnienia następujących warunków:</span><span class="sxs-lookup"><span data-stu-id="7beaf-294">One neat option is to create a filter attribute, [RedirectMobileDevicesToMobileArea], that performs a redirection if the following conditions are met:</span></span>

1. <span data-ttu-id="7beaf-295">Jest to pierwsze żądanie w sesji użytkownika (tj. Session. IsNewSession jest równe true)</span><span class="sxs-lookup"><span data-stu-id="7beaf-295">It's the first request in the user's session (i.e., Session.IsNewSession equals true)</span></span>
2. <span data-ttu-id="7beaf-296">Żądanie pochodzi z przeglądarki mobilnej (tj., żądanie. browser. IsMobileDevice jest równe true)</span><span class="sxs-lookup"><span data-stu-id="7beaf-296">The request comes from a mobile browser (i.e., Request.Browser.IsMobileDevice equals true)</span></span>
3. <span data-ttu-id="7beaf-297">Użytkownik nie zażądał jeszcze zasobu w obszarze mobilnym (tj. część *ścieżki* adresu URL nie zaczyna się od/Mobile).</span><span class="sxs-lookup"><span data-stu-id="7beaf-297">The user is not already requesting a resource in the mobile area (i.e., the *path* part of the URL does not begin with /Mobile)</span></span>

<span data-ttu-id="7beaf-298">Przykład do pobrania dołączony do tego oficjalnego dokumentu zawiera implementację tej logiki.</span><span class="sxs-lookup"><span data-stu-id="7beaf-298">The downloadable sample included with this white paper includes an implementation of this logic.</span></span> <span data-ttu-id="7beaf-299">Jest ona zaimplementowana jako filtr autoryzacji pochodzący z AuthorizeAttribute, co oznacza, że może działać poprawnie nawet w przypadku używania buforowania danych wyjściowych (w przeciwnym razie, jeśli osoba odwiedzająca komputer najpierw uzyskuje dostęp do określonego adresu URL, dane wyjściowe pulpitu mogą być buforowane, a następnie obsłużone do kolejne osoby odwiedzające Twoje urządzenia przenośne).</span><span class="sxs-lookup"><span data-stu-id="7beaf-299">It's implemented as an authorization filter, derived from AuthorizeAttribute, which means it can work correctly even if you are using output caching (otherwise, if a desktop visitor first accesses a certain URL, the desktop output might be cached and then served to subsequent mobile visitors).</span></span>

<span data-ttu-id="7beaf-300">Ponieważ jest to filtr, można wybrać jeden z nich, aby zastosować go do określonych kontrolerów i akcji, na przykład,</span><span class="sxs-lookup"><span data-stu-id="7beaf-300">As it's a filter, you can choose either to apply it to specific controllers and actions, e.g.,</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample10.cs)]

<span data-ttu-id="7beaf-301">…</span><span class="sxs-lookup"><span data-stu-id="7beaf-301">…</span></span> <span data-ttu-id="7beaf-302">można też zastosować je do wszystkich kontrolerów i akcji jako *Filtr globalny* MVC 3 w pliku Global.asax.cs:</span><span class="sxs-lookup"><span data-stu-id="7beaf-302">or you can apply it to all controllers and actions as an MVC 3 *global filter* in your Global.asax.cs file:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample11.cs)]

<span data-ttu-id="7beaf-303">Przykład do pobrania pokazuje również, jak można utworzyć podklasy tego atrybutu, który przekierowuje do określonych lokalizacji w obszarze mobilnym.</span><span class="sxs-lookup"><span data-stu-id="7beaf-303">The downloadable sample also demonstrates how you can create subclasses of this attribute that redirect to specific locations within your mobile area.</span></span> <span data-ttu-id="7beaf-304">Oznacza to, na przykład, można:</span><span class="sxs-lookup"><span data-stu-id="7beaf-304">This means, for example, you can:</span></span>

- <span data-ttu-id="7beaf-305">Zarejestruj filtr globalny, jak pokazano powyżej, który domyślnie wysyła odwiedzających do mobilnej strony głównej.</span><span class="sxs-lookup"><span data-stu-id="7beaf-305">Register a global filter as shown above that sends mobile visitors to the mobile homepage by default.</span></span>
- <span data-ttu-id="7beaf-306">Zastosuj również specjalny filtr [RedirectMobileDevicesToMobileProductPage] do akcji "Wyświetl produkt", która umożliwia odwiedzającym odwiedzanie urządzeń przenośnych do mobilnej wersji dowolnej strony produktu, której zażądał.</span><span class="sxs-lookup"><span data-stu-id="7beaf-306">Also apply a special [RedirectMobileDevicesToMobileProductPage] filter to a "view product" action that takes mobile visitors to the mobile version of whatever product page they had requested.</span></span>
- <span data-ttu-id="7beaf-307">Zastosuj również inne specjalne podklasy filtru do określonych akcji, przekierowując odwiedzających mobilnych do odpowiedniej strony mobilnej</span><span class="sxs-lookup"><span data-stu-id="7beaf-307">Also apply other special subclasses of the filter to specific actions, redirecting mobile visitors to the equivalent mobile page</span></span>

### <a name="configuring-forms-authentication-to-respect-your-mobile-pages"></a><span data-ttu-id="7beaf-308">Konfigurowanie uwierzytelniania formularzy w celu uwzględnienia stron mobilnych</span><span class="sxs-lookup"><span data-stu-id="7beaf-308">Configuring Forms Authentication to respect your mobile pages</span></span>

<span data-ttu-id="7beaf-309">W przypadku korzystania z uwierzytelniania formularzy należy pamiętać, że gdy użytkownik musi się zalogować, automatycznie przekierowuje użytkownika do pojedynczego adresu URL logowania, który domyślnie jest **/Account/LogOn**.</span><span class="sxs-lookup"><span data-stu-id="7beaf-309">If you're using Forms Authentication, you should note that when a user needs to log in, it automatically redirects the user to a single specific "log on" URL, which by default is **/Account/LogOn**.</span></span> <span data-ttu-id="7beaf-310">Oznacza to, że użytkownicy mobilni mogą zostać przekierowani do akcji logowania na pulpicie.</span><span class="sxs-lookup"><span data-stu-id="7beaf-310">This means that mobile users may be redirected to your desktop "log on" action.</span></span>

<span data-ttu-id="7beaf-311">Aby uniknąć tego problemu, należy dodać logikę do akcji logowania do komputera stacjonarnego, aby ponownie przekierować użytkowników mobilnych do akcji "Logowanie na urządzeniu przenośnym".</span><span class="sxs-lookup"><span data-stu-id="7beaf-311">To avoid this problem, add logic to your desktop "log on" action so that it redirects mobile users again to a mobile "log on" action.</span></span> <span data-ttu-id="7beaf-312">Jeśli używasz domyślnego szablonu aplikacji ASP.NET MVC, zaktualizuj akcję logowania elementu AccountController w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="7beaf-312">If you're using the default ASP.NET MVC application template, update AccountController's LogOn action as follows:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample12.cs)]

<span data-ttu-id="7beaf-313">…</span><span class="sxs-lookup"><span data-stu-id="7beaf-313">…</span></span> <span data-ttu-id="7beaf-314">a następnie Zaimplementuj odpowiednią akcję "Zaloguj się" dla urządzenia przenośnego na kontrolerze o nazwie elementu AccountController w obszarze mobilnym.</span><span class="sxs-lookup"><span data-stu-id="7beaf-314">and then implement a suitable mobile-specific "log on" action on a controller called AccountController in your Mobile area.</span></span>

### <a name="working-with-output-caching"></a><span data-ttu-id="7beaf-315">Praca z buforowaniem danych wyjściowych</span><span class="sxs-lookup"><span data-stu-id="7beaf-315">Working with Output Caching</span></span>

<span data-ttu-id="7beaf-316">W przypadku korzystania z filtru [OutputCache] należy wymusić, aby wpis pamięci podręcznej był zależny od typu urządzenia.</span><span class="sxs-lookup"><span data-stu-id="7beaf-316">If you're using the [OutputCache] filter, you must force the cache entry to vary by device type.</span></span> <span data-ttu-id="7beaf-317">Na przykład Napisz:</span><span class="sxs-lookup"><span data-stu-id="7beaf-317">For example, write:</span></span>

[!code-javascript[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample13.js)]

<span data-ttu-id="7beaf-318">Następnie Dodaj następującą metodę do pliku Global.asax.cs:</span><span class="sxs-lookup"><span data-stu-id="7beaf-318">Then, add the following method to your Global.asax.cs file:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample14.cs)]

<span data-ttu-id="7beaf-319">Dzięki temu osoby odwiedzające nie odbierają danych wyjściowych wcześniej umieszczonych w pamięci podręcznej przez użytkownika pulpitu.</span><span class="sxs-lookup"><span data-stu-id="7beaf-319">This will ensure that mobile visitors to the page don't receive output previously put into the cache by a desktop visitor.</span></span>

### <a name="a-working-example"></a><span data-ttu-id="7beaf-320">Przykład roboczy</span><span class="sxs-lookup"><span data-stu-id="7beaf-320">A working example</span></span>

<span data-ttu-id="7beaf-321">Aby zapoznać się z tymi technikami, Pobierz ten dokument z kodem zawierającym [próbki](https://docs.microsoft.com/aspnet/mobile/overview).</span><span class="sxs-lookup"><span data-stu-id="7beaf-321">To see these techniques in action, download [this white paper's code associated samples](https://docs.microsoft.com/aspnet/mobile/overview).</span></span> <span data-ttu-id="7beaf-322">Przykład obejmuje aplikację ASP.NET MVC 3 (Release Candidate) ulepszoną w celu obsługi urządzeń przenośnych przy użyciu opisanych powyżej metod.</span><span class="sxs-lookup"><span data-stu-id="7beaf-322">The sample includes an ASP.NET MVC 3 (Release Candidate) application enhanced to support mobile devices using the methods described above.</span></span>

## <a name="further-guidance-and-suggestions"></a><span data-ttu-id="7beaf-323">Dalsze wskazówki i sugestie</span><span class="sxs-lookup"><span data-stu-id="7beaf-323">Further guidance and suggestions</span></span>

<span data-ttu-id="7beaf-324">Poniższa dyskusja dotyczy zarówno formularzy sieci Web, jak i deweloperów MVC, którzy korzystają z technik opisanych w tym dokumencie.</span><span class="sxs-lookup"><span data-stu-id="7beaf-324">The following discussion applies both to Web Forms and MVC developers who are using the techniques covered in this document.</span></span>

### <a name="enhancing-your-redirection-logic-using-51degreesmobi-foundation"></a><span data-ttu-id="7beaf-325">Ulepszanie logiki przekierowania przy użyciu programu 51Degrees.mobi Foundation</span><span class="sxs-lookup"><span data-stu-id="7beaf-325">Enhancing your redirection logic using 51Degrees.mobi Foundation</span></span>

<span data-ttu-id="7beaf-326">Logika przekierowania pokazana w tym dokumencie może być idealnie wystarczająca dla aplikacji, ale nie będzie działać, jeśli konieczne jest wyłączenie sesji lub z przeglądarkami mobilnymi, które odrzucają pliki cookie (nie mogą to być sesje), ponieważ nie będzie wiadomo, czy podane żądanie jest pierwszy z nich.</span><span class="sxs-lookup"><span data-stu-id="7beaf-326">The redirection logic shown in this document may be perfectly sufficient for your application, but it won't work if you need to disable sessions, or with mobile browsers that reject cookies (these can't have sessions), because it won't know whether a given request is the first one from that visitor.</span></span>

<span data-ttu-id="7beaf-327">Wiesz już, jak program Open Source 51Degrees.mobi Foundation może poprawić dokładność ASP. Wykrywanie przeglądarki sieci.</span><span class="sxs-lookup"><span data-stu-id="7beaf-327">You already learned how the open source 51Degrees.mobi Foundation can improve the accuracy of ASP.NET's browser detection.</span></span> <span data-ttu-id="7beaf-328">Ponadto ma wbudowaną możliwość przekierowania odwiedzających urządzenia przenośne do określonych lokalizacji skonfigurowanych w pliku Web. config. W zależności od sesji ASP.NET (i w związku z tym pliki cookie) jest możliwe przechowanie tymczasowego dziennika skrótów dla nagłówków HTTP i adresów IP odwiedzających, dlatego wie, czy każde żądanie jest pierwszym z danego Vistor.</span><span class="sxs-lookup"><span data-stu-id="7beaf-328">It also has a built-in ability to redirect mobile visitors to specific locations configured in Web.config. It's able to work without depending on ASP.NET Sessions (and hence cookies) by storing a temporary log of hashes of visitors' HTTP headers and IP addresses, so it knows whether or not each request is the first one from a given vistor.</span></span>

<span data-ttu-id="7beaf-329">Następujący element został dodany do sekcji fiftyOne w pliku Web. config przekieruje pierwsze żądanie ze wykrytego urządzenia przenośnego na stronę ~/Mobile/Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="7beaf-329">The following element added to the fiftyOne section of the web.config file will redirect the first request from a detected mobile device to the page ~/Mobile/Default.aspx.</span></span> <span data-ttu-id="7beaf-330">Wszystkie żądania stron znajdujących się w folderze mobilnym *nie* będą przekierowywane niezależnie od typu urządzenia.</span><span class="sxs-lookup"><span data-stu-id="7beaf-330">Any requests to pages under the Mobile folder will *not* be redirected, regardless of device type.</span></span> <span data-ttu-id="7beaf-331">Jeśli urządzenie przenośne było nieaktywne przez okres 20 minut lub więcej, urządzenie zostanie zapomniane, a kolejne żądania będą traktowane jako nowe na potrzeby przekierowania.</span><span class="sxs-lookup"><span data-stu-id="7beaf-331">If the mobile device has been inactive for a period of 20 minutes or more the device will be forgotten and subsequent requests will be treated as new ones for the purposes of redirection.</span></span>

[!code-xml[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample15.xml)]

<span data-ttu-id="7beaf-332">Aby uzyskać więcej informacji, zobacz [dokumentację programu 51Degrees.mobi Foundation](https://github.com/51Degrees/dotNET-Device-Detection).</span><span class="sxs-lookup"><span data-stu-id="7beaf-332">For more details, see [51degrees.mobi Foundation documentation](https://github.com/51Degrees/dotNET-Device-Detection).</span></span>

> [!NOTE]
> <span data-ttu-id="7beaf-333">*Możesz* użyć funkcji przekierowywania programu 51Degrees.mobi Foundation w aplikacjach ASP.NET MVC, ale musisz zdefiniować konfigurację przekierowania w postaci zwykłych adresów URL, a nie jako parametrów routingu lub przez umieszczenie filtrów MVC w akcjach.</span><span class="sxs-lookup"><span data-stu-id="7beaf-333">You *can* use 51Degrees.mobi Foundation's redirection feature on ASP.NET MVC applications, but you will need to define your redirection configuration in terms of plain URLs, not in terms of routing parameters or by putting MVC filters on actions.</span></span> <span data-ttu-id="7beaf-334">Jest to spowodowane tym, że (w czasie pisania) 51Degrees.mobi Foundation nie rozpoznaje filtrów ani routingu.</span><span class="sxs-lookup"><span data-stu-id="7beaf-334">This is because (at the time of writing) 51Degrees.mobi Foundation does not recognize filters or routing.</span></span>

### <a name="disabling-transcoders-and-proxy-servers"></a><span data-ttu-id="7beaf-335">Wyłączanie transkoderów i serwerów proxy</span><span class="sxs-lookup"><span data-stu-id="7beaf-335">Disabling Transcoders and Proxy Servers</span></span>

<span data-ttu-id="7beaf-336">Operatorzy sieci mobilnej mają dwa szerokie cele w podejściu do mobilnego Internetu:</span><span class="sxs-lookup"><span data-stu-id="7beaf-336">Mobile network operators have two broad objectives in their approach to the mobile internet:</span></span>

1. <span data-ttu-id="7beaf-337">Podaj możliwie tyle zawartość</span><span class="sxs-lookup"><span data-stu-id="7beaf-337">Provide as much relevant content as possible</span></span>
2. <span data-ttu-id="7beaf-338">Maksymalizuj liczbę klientów, którzy mogą udostępniać ograniczoną przepustowość sieci radiowej</span><span class="sxs-lookup"><span data-stu-id="7beaf-338">Maximize the number of customers who can share the limited radio network bandwidth</span></span>

<span data-ttu-id="7beaf-339">Ze względu na to, że większość stron sieci Web została zaprojektowana pod kątem dużych ekranów o rozmiarze stacjonarnym i szybkich połączeń szerokopasmowych, wiele operatorów używa *transkoderów* lub *serwerów proxy* , które dynamicznie zmieniają zawartość sieci Web.</span><span class="sxs-lookup"><span data-stu-id="7beaf-339">Since most web pages were designed for large desktop-sized screens and fast fixed-line broadband connections, many operators use *transcoders* or *proxy servers* that dynamically alter web content.</span></span> <span data-ttu-id="7beaf-340">Mogą modyfikować znaczniki HTML lub arkusze CSS na mniejszych ekranach (szczególnie w przypadku "telefonów z funkcjami", które nie korzystają z mocy obliczeniowej do obsługi złożonych układów) i mogą rekompresować obrazy (znacznie zmniejszając ich jakość), aby zwiększyć szybkość dostarczania stron.</span><span class="sxs-lookup"><span data-stu-id="7beaf-340">They may modify your HTML markup or CSS to suit smaller screens (especially for "feature phones" that lack the processing power to handle complex layouts), and they may recompress your images (significantly reducing their quality) to improve page delivery speeds.</span></span>

<span data-ttu-id="7beaf-341">Ale jeśli podjęto wysiłki w celu utworzenia wersji witryny zoptymalizowanej pod kątem urządzeń przenośnych, prawdopodobnie nie chcesz, aby operator sieci mógł się z nim zakłócać.</span><span class="sxs-lookup"><span data-stu-id="7beaf-341">But if you've taken the effort to produce a mobile-optimized version of your site, you probably don't want the network operator to interfere with it any further.</span></span> <span data-ttu-id="7beaf-342">Możesz dodać następujący wiersz do strony\_zdarzenia ładowania w dowolnym formularzu sieci Web ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="7beaf-342">You can add the following line to the Page\_Load event in any ASP.NET Web Form:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample16.cs)]

<span data-ttu-id="7beaf-343">Lub w przypadku kontrolera ASP.NET MVC można dodać poniższe przesłonięcie metody, aby odnosił się do wszystkich akcji na tym kontrolerze:</span><span class="sxs-lookup"><span data-stu-id="7beaf-343">Or, for an ASP.NET MVC controller, you could add the following method override so that it applies to all actions on that controller:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample17.cs)]

<span data-ttu-id="7beaf-344">Wynikowy komunikat HTTP informuje transformacje zgodne ze standardem W3C i serwery proxy, aby nie można było zmieniać zawartości.</span><span class="sxs-lookup"><span data-stu-id="7beaf-344">The resulting HTTP message informs W3C compliant transcoders and proxies not to alter content.</span></span> <span data-ttu-id="7beaf-345">Oczywiście nie ma gwarancji, że operatorzy sieci komórkowej będą respektują ten komunikat.</span><span class="sxs-lookup"><span data-stu-id="7beaf-345">Of course, there is no guarantee that mobile network operators will respect this message.</span></span>

### <a name="styling-mobile-pages-for-mobile-browsers"></a><span data-ttu-id="7beaf-346">Style stron mobilnych dla przeglądarek mobilnych</span><span class="sxs-lookup"><span data-stu-id="7beaf-346">Styling mobile pages for mobile browsers</span></span>

<span data-ttu-id="7beaf-347">Ten dokument wykracza poza zakres tego dokumentu w celu opisania szczegółowych informacji o tym, jakie rodzaje znaczników HTML działają poprawnie lub jakie techniki projektowania sieci Web maksymalizują użyteczność na konkretnych urządzeniach.</span><span class="sxs-lookup"><span data-stu-id="7beaf-347">It's beyond the scope of this document to describe in great detail what kinds of HTML markup work correctly or which web design techniques maximize usability on particular devices.</span></span> <span data-ttu-id="7beaf-348">Umożliwia znalezienie wystarczająco prostego układu zoptymalizowanego pod kątem ekranu o rozmiarze mobilnym, bez konieczności korzystania z niezawodnych wskazówek dotyczących pozycjonowania HTML lub CSS.</span><span class="sxs-lookup"><span data-stu-id="7beaf-348">It's up to you to find a sufficiently simple layout, optimized for a mobile-sized screen, without using unreliable HTML or CSS positioning tricks.</span></span> <span data-ttu-id="7beaf-349">Jedną z ważnych technik oznaczanie, że jest to *tag okienka ekranu*.</span><span class="sxs-lookup"><span data-stu-id="7beaf-349">One important technique worth mentioning, however, is the *viewport meta tag*.</span></span>

<span data-ttu-id="7beaf-350">Niektóre nowoczesne przeglądarki dla urządzeń przenośnych — w miarę wyświetlania stron sieci Web przeznaczonych dla monitorów stacjonarnych, renderowanie strony na wirtualnej kanwie, nazywanej również "okienkiem ekranu" (np. w przypadku wirtualnego okienka ekranu jest 980 pikseli na telefonie iPhone i 850 pikseli szerokości w programie Opera Mobile — domyślnie), a następnie Skaluj wynik w dół w celu dopasowania do pikseli fizycznych ekranu.</span><span class="sxs-lookup"><span data-stu-id="7beaf-350">Certain modern mobile browsers, in an effort display web pages meant for desktop monitors, render the page on a virtual canvas, also called "viewport" (e.g., the virtual viewport is 980 pixels wide on iPhone, and 850 pixels wide on Opera Mobile by default) and then scale the result down to fit onto the screen's physical pixels.</span></span> <span data-ttu-id="7beaf-351">Użytkownik może następnie powiększyć i przesunąć wokół tego okienka ekranu.</span><span class="sxs-lookup"><span data-stu-id="7beaf-351">The user can then zoom in and pan around that viewport.</span></span> <span data-ttu-id="7beaf-352">Pozwala to na wyświetlenie strony w przeglądarce w odpowiednim układzie, ale ma także wady, które wymuszają powiększanie i panoramowanie, co jest niewygodne dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="7beaf-352">This has the advantage that it lets the browser display the page in its intended layout, but it's also has the disadvantage that it forces zooming and panning, which is inconvenient for the user.</span></span> <span data-ttu-id="7beaf-353">Jeśli projektujesz aplikacje dla urządzeń przenośnych, lepiej jest zaprojektować go pod kątem wąskiego ekranu, aby nie było konieczne powiększanie ani przewijanie w poziomie.</span><span class="sxs-lookup"><span data-stu-id="7beaf-353">If you're designing for mobile, it's better to design for a narrow screen so that no zooming or horizontal scrolling is necessary.</span></span>

<span data-ttu-id="7beaf-354">Sposób poinformowania przeglądarki mobilnej o szerokości okienka ekranu, który powinien znajdować się za pomocą niestandardowego znacznika *okienka ekranu* .</span><span class="sxs-lookup"><span data-stu-id="7beaf-354">A way to tell the mobile browser how wide the viewport should be is through the nonstandard *viewport* meta tag.</span></span> <span data-ttu-id="7beaf-355">Na przykład, jeśli dodasz Poniższy kod do sekcji nagłówka strony,</span><span class="sxs-lookup"><span data-stu-id="7beaf-355">For example, if you add the following to your page's HEAD section,</span></span>

[!code-html[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample18.html)]

<span data-ttu-id="7beaf-356">…</span><span class="sxs-lookup"><span data-stu-id="7beaf-356">…</span></span> <span data-ttu-id="7beaf-357">następnie Obsługa przeglądarek smartphone spowoduje przetworzenie układu strony na całej kanwie wirtualnej o 480 pikseli.</span><span class="sxs-lookup"><span data-stu-id="7beaf-357">then supporting smartphone browsers will lay out the page on a 480-pixel wide virtual canvas.</span></span> <span data-ttu-id="7beaf-358">Oznacza to, że jeśli elementy HTML definiują ich szerokość w warunkach procentowych, wartości procentowe będą interpretowane w odniesieniu do szerokości o 480 pikseli, a nie domyślnej szerokości okienka ekranu.</span><span class="sxs-lookup"><span data-stu-id="7beaf-358">This means that if your HTML elements define their widths in percentage terms, the percentages will be interpreted with respect to this 480-pixel width, not the default viewport width.</span></span> <span data-ttu-id="7beaf-359">W związku z tym użytkownik może mniej powiększać i kadrować w poziomie, znacznie ulepszając środowisko przeglądania mobilnego.</span><span class="sxs-lookup"><span data-stu-id="7beaf-359">As a result, the user is less likely to have to zoom and pan horizontally – considerably improving the mobile browsing experience.</span></span>

<span data-ttu-id="7beaf-360">Jeśli chcesz, aby szerokość okienka ekranu była zgodna z pikselami fizycznymi urządzenia, możesz określić następujące elementy:</span><span class="sxs-lookup"><span data-stu-id="7beaf-360">If you want the viewport width to match the device's physical pixels, you can specify the following:</span></span>

[!code-html[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample19.html)]

<span data-ttu-id="7beaf-361">Aby ta funkcja działała poprawnie, nie można jawnie wymusić, aby elementy przekroczą tę Szerokość (np. przy użyciu atrybutu *Width* lub właściwości CSS). w przeciwnym razie w przeglądarce zostanie wymuszone użycie większego okienka ekranu niezależnie od siebie.</span><span class="sxs-lookup"><span data-stu-id="7beaf-361">For this to work correctly, you must not explicitly force elements to exceed that width (e.g., using a *width* attribute or CSS property), otherwise the browser will be forced to use a larger viewport regardless.</span></span> <span data-ttu-id="7beaf-362">Zobacz również: [więcej informacji na temat niestandardowego znacznika okienka ekranu](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html).</span><span class="sxs-lookup"><span data-stu-id="7beaf-362">See also: [more details about the nonstandard viewport tag](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html).</span></span>

<span data-ttu-id="7beaf-363">Większość nowoczesnych telefonów Smartphone obsługuje *dwie orientacje*: mogą być przechowywane w trybie pionowym lub poziomym.</span><span class="sxs-lookup"><span data-stu-id="7beaf-363">Most modern smartphones support *dual orientation*: they can be held in either portrait or landscape mode.</span></span> <span data-ttu-id="7beaf-364">Dlatego ważne jest, aby nie wprowadzać założeń o szerokości ekranu (w pikselach).</span><span class="sxs-lookup"><span data-stu-id="7beaf-364">So, it's important not to make assumptions about the screen width in pixels.</span></span> <span data-ttu-id="7beaf-365">Nie zakładaj nawet, że szerokość ekranu jest stała, ponieważ użytkownik może zmienić orientację urządzenia na stronie.</span><span class="sxs-lookup"><span data-stu-id="7beaf-365">Don't even assume that the screen width is fixed, because the user can re-orient their device while they are on your page.</span></span>

<span data-ttu-id="7beaf-366">Starsze urządzenia z systemem Windows Mobile i BlackBerry mogą również akceptować następujące meta tagi w nagłówku strony, aby poinformować o tym, że zawartość została zoptymalizowana pod kątem urządzeń przenośnych i dlatego nie powinna być przekształcona.</span><span class="sxs-lookup"><span data-stu-id="7beaf-366">Older Windows Mobile and Blackberry devices may also accept the following meta tags in the page header to inform them content has been optimized for mobile and therefore should not be transformed.</span></span>

[!code-html[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample20.html)]

## <a name="additional-resources"></a><span data-ttu-id="7beaf-367">Dodatkowe materiały</span><span class="sxs-lookup"><span data-stu-id="7beaf-367">Additional Resources</span></span>

<span data-ttu-id="7beaf-368">Aby zapoznać się z listą emulatorów i symulatorów urządzeń przenośnych, których można użyć do testowania aplikacji sieci Web ASP.NET Mobile, zobacz stronę [symulowanie popularnych urządzeń przenośnych do testowania](../mobile/device-simulators.md).</span><span class="sxs-lookup"><span data-stu-id="7beaf-368">For a list of mobile device emulators and simulators you can use to test your mobile ASP.NET web application, see the page [Simulate popular mobile devices for testing](../mobile/device-simulators.md).</span></span>

## <a name="credits"></a><span data-ttu-id="7beaf-369">Środki</span><span class="sxs-lookup"><span data-stu-id="7beaf-369">Credits</span></span>

- <span data-ttu-id="7beaf-370">Autor podstawowy: Steven Sanderson</span><span class="sxs-lookup"><span data-stu-id="7beaf-370">Primary author: Steven Sanderson</span></span>
- <span data-ttu-id="7beaf-371">Recenzenci/dodatkowi autorzy zawartości: Kuba Rosewell, Mikael Söderström, Scott Hanselman, Scott myśliwy</span><span class="sxs-lookup"><span data-stu-id="7beaf-371">Reviewers / additional content writers: James Rosewell, Mikael Söderström, Scott Hanselman, Scott Hunter</span></span>

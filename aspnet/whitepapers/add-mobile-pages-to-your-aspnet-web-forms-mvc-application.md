---
uid: whitepapers/add-mobile-pages-to-your-aspnet-web-forms-mvc-application
title: 'Instrukcje: Dodawanie stron dla urządzeń przenośnych do aplikacji ASP.NET Web Forms / MVC aplikacji | Dokumentacja firmy Microsoft'
author: rick-anderson
description: Ten sposób można w tym artykule opisano różne sposoby, aby obsługiwać strony zoptymalizowane pod kątem urządzeń przenośnych z formularzy sieci Web platformy ASP.NET / aplikacji MVC, a także sugeruje architektury i...
ms.author: riande
ms.date: 01/20/2011
ms.assetid: 3124f28e-cc32-418a-afe3-519fa56f4c36
msc.legacyurl: /whitepapers/add-mobile-pages-to-your-aspnet-web-forms-mvc-application
msc.type: content
ms.openlocfilehash: 63c555358d06a9506bb5c8c993800c3307108192
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/06/2019
ms.locfileid: "65114445"
---
# <a name="how-to-add-mobile-pages-to-your-aspnet-web-forms--mvc-application"></a><span data-ttu-id="d618f-103">Instrukcje: dodawanie stron dla urządzeń przenośnych do aplikacji ASP.NET Web Forms/MVC</span><span class="sxs-lookup"><span data-stu-id="d618f-103">How To: Add Mobile Pages to Your ASP.NET Web Forms / MVC Application</span></span>

> <span data-ttu-id="d618f-104">**Dotyczy**</span><span class="sxs-lookup"><span data-stu-id="d618f-104">**Applies To**</span></span>
> 
> - <span data-ttu-id="d618f-105">Formularze sieci Web platformy ASP.NET w wersji 4.0</span><span class="sxs-lookup"><span data-stu-id="d618f-105">ASP.NET Web Forms version 4.0</span></span>
> - <span data-ttu-id="d618f-106">ASP.NET MVC w wersji 3.0 lub nowszej</span><span class="sxs-lookup"><span data-stu-id="d618f-106">ASP.NET MVC version 3.0</span></span>
> 
> <span data-ttu-id="d618f-107">**Podsumowanie**</span><span class="sxs-lookup"><span data-stu-id="d618f-107">**Summary**</span></span>
> 
> <span data-ttu-id="d618f-108">Ten sposób można w tym artykule opisano różne sposoby, aby obsługiwać strony zoptymalizowane pod kątem urządzeń przenośnych z formularzy sieci Web platformy ASP.NET / aplikacji MVC i sugeruje architektury i projektowania kwestie do rozważenia przy przeznaczeniu szerokiej gamy urządzeń.</span><span class="sxs-lookup"><span data-stu-id="d618f-108">This How To describes various ways to serve pages optimized for mobile devices from your ASP.NET Web Forms / MVC application, and suggests architectural and design issues to consider when targeting a broad range of devices.</span></span> <span data-ttu-id="d618f-109">W tym dokumencie wyjaśniono również, dlaczego formantów mobilnych ASP.NET z programu ASP.NET 2.0 3.5 są już nieaktualne, a w tym artykule omówiono niektóre nowoczesnych rozwiązań alternatywnych.</span><span class="sxs-lookup"><span data-stu-id="d618f-109">This document also explains why the ASP.NET Mobile Controls from ASP.NET 2.0 to 3.5 are now obsolete, and discusses some modern alternatives.</span></span>

## <a name="contents"></a><span data-ttu-id="d618f-110">Spis treści</span><span class="sxs-lookup"><span data-stu-id="d618f-110">Contents</span></span>

- <span data-ttu-id="d618f-111">Omówienie</span><span class="sxs-lookup"><span data-stu-id="d618f-111">Overview</span></span>
- <span data-ttu-id="d618f-112">Opcje architektury</span><span class="sxs-lookup"><span data-stu-id="d618f-112">Architectural options</span></span>
- <span data-ttu-id="d618f-113">Wykrywanie przeglądarki i urządzenia</span><span class="sxs-lookup"><span data-stu-id="d618f-113">Browser and device detection</span></span>
- <span data-ttu-id="d618f-114">Jak aplikacji formularzy sieci Web programu ASP.NET może powodować mobile specyficznych stron</span><span class="sxs-lookup"><span data-stu-id="d618f-114">How ASP.NET Web Forms applications can present mobile-specific pages</span></span>
- <span data-ttu-id="d618f-115">Jak aplikacje programu ASP.NET MVC można przedstawić mobile specyficznych stron</span><span class="sxs-lookup"><span data-stu-id="d618f-115">How ASP.NET MVC applications can present mobile-specific pages</span></span>
- <span data-ttu-id="d618f-116">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="d618f-116">Additional resources</span></span>

<span data-ttu-id="d618f-117">Aby uzyskać przykłady kodu do pobrania, prezentacja technik ten oficjalny dokument dla platformy MVC i formularzy sieci Web ASP.NET, zobacz [Mobile Apps & witryny ASP.NET](https://docs.microsoft.com/aspnet/mobile/overview).</span><span class="sxs-lookup"><span data-stu-id="d618f-117">For downloadable code samples demonstrating this white paper's techniques for both ASP.NET Web Forms and MVC, see [Mobile Apps & Sites with ASP.NET](https://docs.microsoft.com/aspnet/mobile/overview).</span></span>

## <a name="overview"></a><span data-ttu-id="d618f-118">Omówienie</span><span class="sxs-lookup"><span data-stu-id="d618f-118">Overview</span></span>

<span data-ttu-id="d618f-119">Urządzenia przenośne — smartfony, funkcja telefony i tablety — w dalszym ciągu Zwiększanie popularności jako sposób dostępu do sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d618f-119">Mobile devices – smartphones, feature phones, and tablets – continue to grow in popularity as a means to access the Web.</span></span> <span data-ttu-id="d618f-120">W przypadku wielu programistów sieci web i zorientowane na sieci web firmy oznacza to, że jest coraz ważniejsze zapewnić doskonałe środowisko przeglądania dla gości korzystających z tych urządzeń.</span><span class="sxs-lookup"><span data-stu-id="d618f-120">For many web developers and web-oriented businesses, this means it's increasingly important to provide a great browsing experience for visitors using those devices.</span></span>

### <a name="how-earlier-versions-of-aspnet-supported-mobile-browsers"></a><span data-ttu-id="d618f-121">Jak wcześniejszych wersjach programu ASP.NET obsługiwanych przeglądarek dla urządzeń przenośnych</span><span class="sxs-lookup"><span data-stu-id="d618f-121">How earlier versions of ASP.NET supported mobile browsers</span></span>

<span data-ttu-id="d618f-122">Program ASP.NET w wersji 2.0 do 3.5 uwzględnione *formantów mobilnych ASP.NET*: zestaw formantów serwera dla urządzeń przenośnych w *System.Web.Mobile.dll* zestawu i  *System.Web.UI.MobileControls* przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="d618f-122">ASP.NET versions 2.0 to 3.5 included *ASP.NET Mobile Controls*: a set of server controls for mobile devices in the *System.Web.Mobile.dll* assembly and the *System.Web.UI.MobileControls* namespace.</span></span> <span data-ttu-id="d618f-123">Zestaw jest dostępny w ASP.NET 4, ale jest przestarzały.</span><span class="sxs-lookup"><span data-stu-id="d618f-123">The assembly is still included in ASP.NET 4, but it is deprecated.</span></span> <span data-ttu-id="d618f-124">Deweloperom doradza się przeprowadzić migrację do bardziej nowoczesnego podejścia, takich jak opisane w tym dokumencie.</span><span class="sxs-lookup"><span data-stu-id="d618f-124">Developers are advised to migrate to more modern approaches, such as those described in this paper.</span></span>

<span data-ttu-id="d618f-125">Powód, dlaczego formantów mobilnych ASP.NET została oznaczona jako przestarzała jest, że ich projektu jest zorientowany na wokół telefony komórkowe, które były wspólnego wokół 2005 i wcześniejszych.</span><span class="sxs-lookup"><span data-stu-id="d618f-125">The reason why ASP.NET Mobile Controls have been marked as obsolete is that their design is oriented around the mobile phones that were common around 2005 and earlier.</span></span> <span data-ttu-id="d618f-126">Formanty przede wszystkim są przeznaczone do renderowania kodu znaczników WML lub cHTML (zamiast regularnego HTML) dla przeglądarek WAP, że ery.</span><span class="sxs-lookup"><span data-stu-id="d618f-126">The controls are mainly designed to render WML or cHTML markup (instead of regular HTML) for the WAP browsers of that era.</span></span> <span data-ttu-id="d618f-127">Ale WAP, WML i cHTML nie są już odpowiednie dla większości projektów, ponieważ kodu HTML teraz stał się wszechobecne znaczników języka dla przeglądarek mobilnych i klasycznych podobne.</span><span class="sxs-lookup"><span data-stu-id="d618f-127">But WAP, WML, and cHTML are no longer relevant for most projects, because HTML has now become the ubiquitous markup language for mobile and desktop browsers alike.</span></span>

### <a name="the-challenges-of-supporting-mobile-devices-today"></a><span data-ttu-id="d618f-128">Wyzwania związane z obecnie obsługi urządzeń przenośnych</span><span class="sxs-lookup"><span data-stu-id="d618f-128">The challenges of supporting mobile devices today</span></span>

<span data-ttu-id="d618f-129">Mimo że teraz przeglądarki dla urządzeń przenośnych obsługują powszechnie HTML, nadal będą występować wiele wyzwań podczas mające na celu tworzenie wspaniałych środowisk przeglądania mobilnych:</span><span class="sxs-lookup"><span data-stu-id="d618f-129">Even though mobile browsers now almost universally support HTML, you will still face many challenges when aiming to create great mobile browsing experiences:</span></span>

- <span data-ttu-id="d618f-130">***Rozmiar ekranu*** — urządzeń przenośnych różnią się znacznie w formularzu, a ich ekrany często są znacznie mniejsze niż monitory pulpitu.</span><span class="sxs-lookup"><span data-stu-id="d618f-130">***Screen size*** - Mobile devices vary dramatically in form, and their screens are often much smaller than desktop monitors.</span></span> <span data-ttu-id="d618f-131">Dlatego należy do projektowania układów całkowicie różne strony dla nich.</span><span class="sxs-lookup"><span data-stu-id="d618f-131">So, you may need to design completely different page layouts for them.</span></span>
- <span data-ttu-id="d618f-132">***Dane wejściowe metody*** — niektóre urządzenia mają dominują, niektóre z nich mają styluses, inne osoby za pomocą dotyku.</span><span class="sxs-lookup"><span data-stu-id="d618f-132">***Input methods*** – Some devices have keypads, some have styluses, others use touch.</span></span> <span data-ttu-id="d618f-133">Może być konieczne należy wziąć pod uwagę nawigacji wiele mechanizmów metody i danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="d618f-133">You may need to consider multiple navigation mechanisms and data input methods.</span></span>
- <span data-ttu-id="d618f-134">***Zgodność ze standardami*** — wiele przeglądarek dla urządzeń przenośnych nie obsługują najnowszych standardów HTML, CSS i JavaScript.</span><span class="sxs-lookup"><span data-stu-id="d618f-134">***Standards compliance*** – Many mobile browsers do not support the latest HTML, CSS, or JavaScript standards.</span></span>
- <span data-ttu-id="d618f-135">***Przepustowość*** — wydajność sieci danych komórkowych zmienia się bardzo popularny i niektórzy użytkownicy końcowi znajdują się na taryf, które opłaty wg megabajtów.</span><span class="sxs-lookup"><span data-stu-id="d618f-135">***Bandwidth*** – Cellular data network performance varies wildly, and some end users are on tariffs that charge by the megabyte.</span></span>

<span data-ttu-id="d618f-136">Istnieje rozwiązanie opracowanie; Aplikacja musi wyglądały i zachowywały się różnie zgodnie z urządzeń, uzyskiwanie do niej dostępu.</span><span class="sxs-lookup"><span data-stu-id="d618f-136">There's no one-size-fits-all solution; your application will have to look and behave differently according to the device accessing it.</span></span> <span data-ttu-id="d618f-137">W zależności od stopnia obsługę operacji mobilnych, należy to być większe wyzwanie dla deweloperów sieci web niż kiedykolwiek było pulpitu "gwiezdnych przeglądarki".</span><span class="sxs-lookup"><span data-stu-id="d618f-137">Depending on what level of mobile support you want, this can be a bigger challenge for web developers than the desktop "browser wars" ever was.</span></span>

<span data-ttu-id="d618f-138">Deweloperzy często początkowo zbliża się obsługa przeglądarek mobilnych po raz pierwszy wydaje się, że jest tylko ważne do obsługi smartfonów najnowsze i najbardziej zaawansowane (np. Windows Phone 7, telefonu iPhone lub Android), może być, ponieważ deweloperzy często osobiście takie właścicielem urządzenia.</span><span class="sxs-lookup"><span data-stu-id="d618f-138">Developers approaching mobile browser support for the first time often initially think it's only important to support the latest and most sophisticated smartphones (e.g., Windows Phone 7, iPhone, or Android), perhaps because developers often personally own such devices.</span></span> <span data-ttu-id="d618f-139">Telefony tańsze nadal są bardzo popularne i ich właścicieli ich używać do przeglądania sieci web — w szczególności w krajach, w których łatwiej niż połączenie szerokopasmowe telefonów komórkowych.</span><span class="sxs-lookup"><span data-stu-id="d618f-139">However, cheaper phones are still extremely popular, and their owners do use them to browse the web – especially in countries where mobile phones are easier to get than a broadband connection.</span></span> <span data-ttu-id="d618f-140">Należy wybrać zakres urządzeń na potrzeby obsługi, biorąc pod uwagę jej klientom prawdopodobnie Twojej firmy.</span><span class="sxs-lookup"><span data-stu-id="d618f-140">Your business will need to decide what range of devices to support by considering its likely customers.</span></span> <span data-ttu-id="d618f-141">Jeśli tworzysz online innej, spa kondycji luksusowe można wprowadzać decyzji biznesowych tylko do docelowych zaawansowane smartfonów, dlatego jeśli tworzysz system rezerwacji biletów dla kin prawdopodobnie trzeba będzie konta dla użytkowników zewnętrznych z mniej zaawansowanych funkcji telefony.</span><span class="sxs-lookup"><span data-stu-id="d618f-141">If you're building an online brochure for a luxury health spa, you might make a business decision only to target advanced smartphones, whereas if you're creating a ticket booking system for a cinema, you probably need to account for visitors with less powerful feature phones.</span></span>

## <a name="architectural-options"></a><span data-ttu-id="d618f-142">Opcje architektury</span><span class="sxs-lookup"><span data-stu-id="d618f-142">Architectural options</span></span>

<span data-ttu-id="d618f-143">Przed przejściem do szczegółowych informacji technicznych formularzy sieci Web ASP.NET lub MVC, należy zauważyć, że Deweloperzy sieci web w zasadzie trzy główne sposoby, aby obsługa przeglądarek urządzeń przenośnych:</span><span class="sxs-lookup"><span data-stu-id="d618f-143">Before we get to the specific technical details of ASP.NET Web Forms or MVC, note that web developers in general have three main possible options for supporting mobile browsers:</span></span>

1. <span data-ttu-id="d618f-144">***Nic nie rób —*** można po prostu utworzyć aplikację sieci web standard, zorientowanych na pulpicie i zależą od przeglądarki dla urządzeń przenośnych do jej akceptowalny sposób renderowania.</span><span class="sxs-lookup"><span data-stu-id="d618f-144">***Do nothing –*** You can simply create a standard, desktop-oriented web application, and rely on mobile browsers to render it acceptably.</span></span> 

    - <span data-ttu-id="d618f-145">**Zaletą**: To najtańszy opcję, aby zaimplementować i obsługa — działają bez żadnych dodatkowych</span><span class="sxs-lookup"><span data-stu-id="d618f-145">**Advantage**: It's the cheapest option to implement and maintain – no extra work</span></span>
    - <span data-ttu-id="d618f-146">**Wadą**: Zapewnia najgorszy środowisko użytkownika końcowego:</span><span class="sxs-lookup"><span data-stu-id="d618f-146">**Disadvantage**: Gives the worst end-user experience:</span></span> 

        - <span data-ttu-id="d618f-147">Najnowsze smartfonów może spowodować HTML równie dobrze jak przeglądarki na komputerze, ale użytkownicy nadal będą zmuszeni do powiększania i być przewijane w poziomie i w pionie do korzystania z zawartości na małym ekranie.</span><span class="sxs-lookup"><span data-stu-id="d618f-147">The latest smartphones may render your HTML just as well as a desktop browser, but users will still be forced to zoom and scroll horizontally and vertically to consume your content on a small screen.</span></span> <span data-ttu-id="d618f-148">To nie jest optymalne.</span><span class="sxs-lookup"><span data-stu-id="d618f-148">This is far from optimal.</span></span>
        - <span data-ttu-id="d618f-149">Starsze urządzenia i telefony funkcji może zakończyć się niepowodzeniem do renderowania znaczników w zadowalający sposób.</span><span class="sxs-lookup"><span data-stu-id="d618f-149">Older devices and feature phones may fail to render your markup in a satisfactory way.</span></span>
        - <span data-ttu-id="d618f-150">Nawet na najnowszych urządzeniach tablet (których ekranach może być tak dużego jak ekranów komputerów przenośnych) interakcji z innej reguły.</span><span class="sxs-lookup"><span data-stu-id="d618f-150">Even on the latest tablet devices (whose screens can be as big as laptop screens), different interaction rules apply.</span></span> <span data-ttu-id="d618f-151">Oparte na dotyku dane wejściowe sprawdza się najlepiej w przypadku większych przycisków i łączy rozprzestrzeniania się dalej od siebie, a nie istnieje sposób, aby umieść kursor myszy nad menu wysuwanego.</span><span class="sxs-lookup"><span data-stu-id="d618f-151">Touch-based input works best with larger buttons and links spread further apart, and there's no way to hover a mouse cursor over a fly-out menu.</span></span>
2. <span data-ttu-id="d618f-152">***Rozwiązuje problem na komputerze klienckim* —** przy użyciu dokładnej CSS i [stopniowym rozszerzaniu funkcji](http://en.wikipedia.org/wiki/Progressive_enhancement) możesz utworzyć kod znaczników, stylów i skrypty, które się do dowolnych przeglądarki je uruchomiono.</span><span class="sxs-lookup"><span data-stu-id="d618f-152">***Solve the problem on the client* –** With careful use of CSS and [progressive enhancement](http://en.wikipedia.org/wiki/Progressive_enhancement) you can create markup, styles, and scripts that adapt to whatever browser is running them.</span></span> <span data-ttu-id="d618f-153">Na przykład za pomocą [zapytaniami multimediów CSS 3](http://www.w3.org/TR/2010/CR-css3-mediaqueries-20100727/), można utworzyć układ wielokolumnowych, który jest przekształcany układ jedną kolumnę na urządzeniach, na których ekrany są węższe niż wybrany próg.</span><span class="sxs-lookup"><span data-stu-id="d618f-153">For example, with [CSS 3 media queries](http://www.w3.org/TR/2010/CR-css3-mediaqueries-20100727/), you could create a multi-column layout that turns into a single column layout on devices whose screens are narrower than a chosen threshold.</span></span> 

    - <span data-ttu-id="d618f-154">**Zaletą**: Optymalizuje renderowania dla określonego urządzenia na użytek, jeszcze nieznanych przyszłych urządzeń zgodnie z dowolnego ekranu i właściwości danych wejściowych mają</span><span class="sxs-lookup"><span data-stu-id="d618f-154">**Advantage**: Optimizes rendering for the specific device in use, even for unknown future devices according to whatever screen and input characteristics they have</span></span>
    - <span data-ttu-id="d618f-155">**Zaletą**: Pozwala łatwo udostępniać logikę po stronie serwera w przypadku wszystkich typów urządzeń — minimalny powielania kodu lub nakładu pracy</span><span class="sxs-lookup"><span data-stu-id="d618f-155">**Advantage**: Easily lets you share server-side logic across all device types – minimal duplication of code or effort</span></span>
    - <span data-ttu-id="d618f-156">**Wadą**: Urządzenia przenośne tak różnią się od urządzeń komputerowych, że może być naprawdę potrzebujesz swoje stron dla urządzeń przenośnych całkowicie różni się od strony pulpitu przedstawiający różne informacje.</span><span class="sxs-lookup"><span data-stu-id="d618f-156">**Disadvantage**: Mobile devices are so different from desktop devices that you may really want your mobile pages to be completely different from your desktop pages, showing different information.</span></span> <span data-ttu-id="d618f-157">Te różnice mogą być mało wydajne i niemożliwe do osiągnięcia niezawodnie za pomocą CSS samodzielnie, szczególnie biorąc pod uwagę sposób niespójnie starszych urządzeń interpretowania reguły CSS.</span><span class="sxs-lookup"><span data-stu-id="d618f-157">Such variations can be inefficient or impossible to achieve robustly through CSS alone, especially considering how inconsistently older devices interpret CSS rules.</span></span> <span data-ttu-id="d618f-158">Jest to szczególnie istotne, atrybutów CSS 3.</span><span class="sxs-lookup"><span data-stu-id="d618f-158">This is particularly true of CSS 3 attributes.</span></span>
    - <span data-ttu-id="d618f-159">**Wadą**: Nie obsługuje różnych logiki po stronie serwera i przepływów pracy dla różnych urządzeń.</span><span class="sxs-lookup"><span data-stu-id="d618f-159">**Disadvantage**: Provides no support for varying server-side logic and workflows for different devices.</span></span> <span data-ttu-id="d618f-160">Uproszczone zakupy koszyka wyewidencjonowania przepływ pracy dla użytkowników urządzeń przenośnych nie na przykład zaimplementować przy użyciu CSS samodzielnie.</span><span class="sxs-lookup"><span data-stu-id="d618f-160">You can't, for example, implement a simplified shopping cart checkout workflow for mobile users by means of CSS alone.</span></span>
    - <span data-ttu-id="d618f-161">**Wadą**: Wykorzystanie przepustowości nieefektywne.</span><span class="sxs-lookup"><span data-stu-id="d618f-161">**Disadvantage**: Inefficient bandwidth use.</span></span> <span data-ttu-id="d618f-162">Serwer może być konieczne przesyłać znaczników i style, które są stosowane do wszystkich możliwych urządzeniach, nawet jeśli urządzenie będzie używać tylko podzbiór tych informacji.</span><span class="sxs-lookup"><span data-stu-id="d618f-162">You server may have to transmit the markup and styles that apply to all possible devices, even though the target device will only use a subset of that information.</span></span>
3. <span data-ttu-id="d618f-163">***Rozwiązuje problem na serwerze* —** Jeśli serwer wie, jakiego urządzenia uzyskuje dostęp do — lub w co najmniej właściwości danego urządzenia, takie jak rozmiar ekranu i metodę wprowadzania i czy jest to urządzenie przenośne — można uruchomić w niej inną logikę i dane wyjściowe różny kod znaczników HTML.</span><span class="sxs-lookup"><span data-stu-id="d618f-163">***Solve the problem on the server* –** If your server knows what device is accessing it – or at least the characteristics of that device, such as its screen size and input method, and whether it's a mobile device – it can run different logic and output different HTML markup.</span></span> 

    - <span data-ttu-id="d618f-164">**Korzyści:** Aby zapewnić maksymalną elastyczność.</span><span class="sxs-lookup"><span data-stu-id="d618f-164">**Advantage:** Maximum flexibility.</span></span> <span data-ttu-id="d618f-165">Nie ma żadnego limitu, ile różnią się w logice po stronie serwera dla przenośne lub zoptymalizować znaczników dla układu żądaną, specyficzne dla urządzenia.</span><span class="sxs-lookup"><span data-stu-id="d618f-165">There's no limit to how much you can vary your server-side logic for mobiles or optimize your markup for the desired, device-specific layout.</span></span>
    - <span data-ttu-id="d618f-166">**Korzyści:** Wykorzystanie przepustowości wydajne.</span><span class="sxs-lookup"><span data-stu-id="d618f-166">**Advantage:** Efficient bandwidth use.</span></span> <span data-ttu-id="d618f-167">Należy przesyłać znaczników i informacje dotyczące stylu, który zamierza użyć urządzenia docelowego.</span><span class="sxs-lookup"><span data-stu-id="d618f-167">You only need to transmit the markup and styling information that the target device is going to use.</span></span>
    - <span data-ttu-id="d618f-168">**Wady:** Czasami wymusza powtórzenia nakład pracy lub kodu (np. dzięki czemu można tworzyć kopie podobnym, lecz nieco stron formularzy sieci Web lub widoków MVC).</span><span class="sxs-lookup"><span data-stu-id="d618f-168">**Disadvantage:** Sometimes forces repetition of effort or code (e.g., making you create similar but slightly different copies of your Web Forms pages or MVC views).</span></span> <span data-ttu-id="d618f-169">Gdzie to możliwe, który będzie wyodrębnić wspólnej logiki do odpowiedniej warstwy lub usługi, ale nadal niektóre części kodu interfejsu użytkownika lub znaczników może mieć zduplikowanych i następnie przechowywane w sposób równoległy.</span><span class="sxs-lookup"><span data-stu-id="d618f-169">Where possible you will factor out common logic into an underlying layer or service, but still, some parts of your UI code or markup may have to be duplicated and then maintained in parallel.</span></span>
    - <span data-ttu-id="d618f-170">**Wady:** Wykrywanie urządzeń nie jest proste.</span><span class="sxs-lookup"><span data-stu-id="d618f-170">**Disadvantage:** Device detection is not trivial.</span></span> <span data-ttu-id="d618f-171">On wymaga listy lub bazy danych typów znanych urządzeń i ich właściwości (które nie zawsze są całkowicie aktualne) i nie jest gwarantowana, aby dokładnie dopasować każdego żądania przychodzącego.</span><span class="sxs-lookup"><span data-stu-id="d618f-171">It requires a list or database of known device types and their characteristics (which may not always be perfectly up-to-date) and isn't guaranteed to accurately match every incoming request.</span></span> <span data-ttu-id="d618f-172">W tym dokumencie opisano niektóre opcje i ich przeszkody w dalszej części.</span><span class="sxs-lookup"><span data-stu-id="d618f-172">This document describes some options and their pitfalls later.</span></span>

<span data-ttu-id="d618f-173">Aby uzyskać najlepsze wyniki, większość deweloperów Znajdź potrzebne im łączyć opcji (2) i (3).</span><span class="sxs-lookup"><span data-stu-id="d618f-173">To get the best results, most developers find they need to combine options (2) and (3).</span></span> <span data-ttu-id="d618f-174">Niewielkie różnice stylistyczne najlepiej są obsługiwane na komputerze klienckim przy użyciu CSS lub nawet języku JavaScript, istotne różnice w danych, przepływ pracy lub znaczników najbardziej efektywne są wdrażane w kodzie po stronie serwera.</span><span class="sxs-lookup"><span data-stu-id="d618f-174">Minor stylistic differences are best accommodated on the client using CSS or even JavaScript, whereas major differences in data, workflow, or markup are most effectively implemented in server-side code.</span></span>

### <a name="this-paper-focuses-on-server-side-techniques"></a><span data-ttu-id="d618f-175">Ten dokument zawiera omówienie metod po stronie serwera</span><span class="sxs-lookup"><span data-stu-id="d618f-175">This paper focuses on server-side techniques</span></span>

<span data-ttu-id="d618f-176">Ponieważ MVC i formularzy sieci Web platformy ASP.NET są obie technologie przede wszystkim po stronie serwera, ten dokument koncentruje się na technik po stronie serwera, które pozwalają tworzyć różny kod znaczników i logikę przeglądarki dla urządzeń przenośnych.</span><span class="sxs-lookup"><span data-stu-id="d618f-176">Since ASP.NET Web Forms and MVC are both primarily server-side technologies, this white paper will focus on server-side techniques that let you produce different markup and logic for mobile browsers.</span></span> <span data-ttu-id="d618f-177">Oczywiście można także połączyć to przy użyciu dowolnej techniki po stronie klienta (np. CSS 3 zapytaniami multimediów, rozszerzenie progresywnego JavaScript), ale jest bardziej kwestią projekt sieci web niż projektowanie programu ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="d618f-177">Of course, you can also combine this with any client-side technique (e.g., CSS 3 media queries, progressive-enhancement JavaScript), but that's more a matter of web design than ASP.NET development.</span></span>

## <a name="browser-and-device-detection"></a><span data-ttu-id="d618f-178">Wykrywanie przeglądarki i urządzenia</span><span class="sxs-lookup"><span data-stu-id="d618f-178">Browser and device detection</span></span>

<span data-ttu-id="d618f-179">Kluczowe wstępnym dla wszystkich metod po stronie serwera do obsługi urządzeń przenośnych jest wiedzieć, jakiego urządzenia, które korzysta z obiektu odwiedzającego.</span><span class="sxs-lookup"><span data-stu-id="d618f-179">The key prerequisite for all server-side techniques for supporting mobile devices is to know what device your visitor is using.</span></span> <span data-ttu-id="d618f-180">W rzeczywistości jeszcze lepsze niż wiedza, producent i model liczbę tego urządzenia jest uświadomienie *charakterystyki* urządzenia.</span><span class="sxs-lookup"><span data-stu-id="d618f-180">In fact, even better than knowing the manufacturer and model number of that device is knowing the *characteristics* of the device.</span></span> <span data-ttu-id="d618f-181">Właściwości mogą obejmować:</span><span class="sxs-lookup"><span data-stu-id="d618f-181">Characteristics may include:</span></span>

- <span data-ttu-id="d618f-182">Czy urządzenie przenośne?</span><span class="sxs-lookup"><span data-stu-id="d618f-182">Is it a mobile device?</span></span>
- <span data-ttu-id="d618f-183">Metoda wprowadzania (mysz i klawiatura, dotykowe, klawiatury, joystick,...)</span><span class="sxs-lookup"><span data-stu-id="d618f-183">Input method (mouse/keyboard, touch, keypad, joystick, …)</span></span>
- <span data-ttu-id="d618f-184">Rozmiar ekranu (fizycznie i w pikselach)</span><span class="sxs-lookup"><span data-stu-id="d618f-184">Screen size (physically and in pixels)</span></span>
- <span data-ttu-id="d618f-185">Obsługiwane formaty mediów i danych</span><span class="sxs-lookup"><span data-stu-id="d618f-185">Supported media and data formats</span></span>
- <span data-ttu-id="d618f-186">Etc.</span><span class="sxs-lookup"><span data-stu-id="d618f-186">Etc.</span></span>

<span data-ttu-id="d618f-187">Zaleca się decyzje na podstawie charakterystyki niż numer modelu, ponieważ, a następnie będzie lepiej wyposażone w celu obsługi przyszłych urządzeń.</span><span class="sxs-lookup"><span data-stu-id="d618f-187">It's better to make decisions based on characteristics than model number, because then you'll be better equipped to handle future devices.</span></span>

### <a name="using-aspnets-built-in-browser-detection-support"></a><span data-ttu-id="d618f-188">Za pomocą stron ASP. Obsługa wykrywania przeglądarki wbudowanej w sieci</span><span class="sxs-lookup"><span data-stu-id="d618f-188">Using ASP.NET's built-in browser detection support</span></span>

<span data-ttu-id="d618f-189">Deweloperzy i formularzy sieci Web platformy ASP.NET MVC można natychmiastowego poznania istotne cechy zaproszonych przeglądarki, sprawdzając właściwości *Request.Browser* obiektu.</span><span class="sxs-lookup"><span data-stu-id="d618f-189">ASP.NET Web Forms and MVC developers can immediately discover important characteristics of a visiting browser by inspecting properties of the *Request.Browser* object.</span></span> <span data-ttu-id="d618f-190">Na przykład zobacz</span><span class="sxs-lookup"><span data-stu-id="d618f-190">For example, see</span></span>

- <span data-ttu-id="d618f-191">Request.Browser.IsMobileDevice</span><span class="sxs-lookup"><span data-stu-id="d618f-191">Request.Browser.IsMobileDevice</span></span>
- <span data-ttu-id="d618f-192">Request.Browser.MobileDeviceManufacturer, Request.Browser.MobileDeviceModel</span><span class="sxs-lookup"><span data-stu-id="d618f-192">Request.Browser.MobileDeviceManufacturer, Request.Browser.MobileDeviceModel</span></span>
- <span data-ttu-id="d618f-193">Request.Browser.ScreenPixelsWidth</span><span class="sxs-lookup"><span data-stu-id="d618f-193">Request.Browser.ScreenPixelsWidth</span></span>
- <span data-ttu-id="d618f-194">Request.Browser.SupportsXmlHttp</span><span class="sxs-lookup"><span data-stu-id="d618f-194">Request.Browser.SupportsXmlHttp</span></span>
- <span data-ttu-id="d618f-195">...a wielu innych</span><span class="sxs-lookup"><span data-stu-id="d618f-195">…and many others</span></span>

<span data-ttu-id="d618f-196">W tle, platforma ASP.NET jest zgodna z przychodzącego *User-Agent* nagłówka HTTP (UA) dla wyrażenia regularne w zestawie plików XML definicji przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="d618f-196">Behind the scenes, the ASP.NET platform matches the incoming *User-Agent* (UA) HTTP header against regular expressions in a set of Browser Definition XML files.</span></span> <span data-ttu-id="d618f-197">Domyślnie ta platforma obejmuje definicje wiele wspólnych urządzeń przenośnych, a następnie można dodać niestandardowe pliki definicji przeglądarki dla innych osób, które mają aby rozpoznawał.</span><span class="sxs-lookup"><span data-stu-id="d618f-197">By default the platform includes definitions for many common mobile devices, and you can add custom Browser Definition files for others you wish to recognize.</span></span> <span data-ttu-id="d618f-198">Aby uzyskać więcej informacji, zobacz stronę MSDN [formanty serwera sieci Web ASP.NET i możliwości przeglądarki](https://msdn.microsoft.com/library/x3k2ssx2.aspx).</span><span class="sxs-lookup"><span data-stu-id="d618f-198">For more details, see the MSDN page [ASP.NET Web Server Controls and Browser Capabilities](https://msdn.microsoft.com/library/x3k2ssx2.aspx).</span></span>

### <a name="using-the-wurfl-device-database-via-51degreesmobi-foundation"></a><span data-ttu-id="d618f-199">Przy użyciu bazy danych urządzenia WURFL za pośrednictwem 51Degrees.mobi Foundation</span><span class="sxs-lookup"><span data-stu-id="d618f-199">Using the WURFL device database via 51Degrees.mobi Foundation</span></span>

<span data-ttu-id="d618f-200">Podczas gdy ASP. Wsparcie w zakresie wykrywania przeglądarki wbudowanej na NET będą wystarczające dla wielu aplikacji istnieją dwa główne przypadki podczas może nie być wystarczająca:</span><span class="sxs-lookup"><span data-stu-id="d618f-200">While ASP.NET's built-in browser detection support will be sufficient for many applications, there are two main cases when it might not be enough:</span></span>

- <span data-ttu-id="d618f-201">***Aby rozpoznać najnowszych urządzeniach***(bez ręcznego tworzenia plików definicji przeglądarki dla nich).</span><span class="sxs-lookup"><span data-stu-id="d618f-201">***You want to recognize the latest devices***(without manually creating Browser Definition files for them).</span></span> <span data-ttu-id="d618f-202">Należy pamiętać, że pliki definicji przeglądarki .NET 4 nie są wystarczająco aktualne, rozpoznawał Windows Phone 7, telefony z systemem Android, programie Opera Mobile przeglądarki lub urządzenia Ipad firmy Apple.</span><span class="sxs-lookup"><span data-stu-id="d618f-202">Note that .NET 4's Browser Definition files are not recent enough to recognize Windows Phone 7, Android phones, Opera Mobile browsers, or Apple iPads.</span></span>
- <span data-ttu-id="d618f-203">***Potrzebujesz bardziej szczegółowe informacje dotyczące możliwości urządzenia***.</span><span class="sxs-lookup"><span data-stu-id="d618f-203">***You need more detailed information about device capabilities***.</span></span> <span data-ttu-id="d618f-204">Musisz wiedzieć o metodę wprowadzania urządzenia (np. dotyk vs klawiatury numerycznej) lub jakie audio formatuje przeglądarka obsługuje.</span><span class="sxs-lookup"><span data-stu-id="d618f-204">You may need to know about a device's input method (e.g., touch vs keypad), or what audio formats the browser supports.</span></span> <span data-ttu-id="d618f-205">Te informacje są niedostępne w standardowych plikach definicji przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="d618f-205">This information isn't available in the standard Browser Definition files.</span></span>

<span data-ttu-id="d618f-206">[ *Uniwersalny plik zasobów sieci bezprzewodowej* projektu (WURFL)](http://wurfl.sourceforge.net/) obsługuje znacznie więcej aktualności i szczegółowych informacji dotyczących urządzeń przenośnych w użyciu już dziś.</span><span class="sxs-lookup"><span data-stu-id="d618f-206">The [*Wireless Universal Resource File* (WURFL) project](http://wurfl.sourceforge.net/) maintains much more up-to-date and detailed information about mobile devices in use today.</span></span>

<span data-ttu-id="d618f-207">Dobra wiadomość dla deweloperów platformy .NET jest ASP. Funkcji wykrywania przeglądarki firmy NET jest rozszerzalny, więc istnieje możliwość rozbudowy, aby wyeliminować te problemy.</span><span class="sxs-lookup"><span data-stu-id="d618f-207">The great news for .NET developers is that ASP.NET's browser detection feature is extensible, so it's possible to enhance it to overcome these problems.</span></span> <span data-ttu-id="d618f-208">Na przykład można dodać typu open source [ *51Degrees.mobi Foundation* ](https://github.com/51Degrees/dotNET-Device-Detection) biblioteki do projektu.</span><span class="sxs-lookup"><span data-stu-id="d618f-208">For example, you can add the open source [*51Degrees.mobi Foundation*](https://github.com/51Degrees/dotNET-Device-Detection) library to your project.</span></span> <span data-ttu-id="d618f-209">Jest ASP.NET IHttpModule lub przeglądarki możliwości dostawcy (można go używać w aplikacji MVC i formularzy sieci Web), który bezpośrednio odczytuje dane WURFL i przyczepia go do ASP. Mechanizm wykrywania przeglądarki wbudowanej w sieci.</span><span class="sxs-lookup"><span data-stu-id="d618f-209">It's an ASP.NET IHttpModule or Browser Capabilities Provider (usable on both Web Forms and MVC applications), that directly reads WURFL data and hooks it into ASP.NET's built-in browser detection mechanism.</span></span> <span data-ttu-id="d618f-210">Po zainstalowaniu modułu, *Request.Browser* nagle będzie zawierać znacznie bardziej dokładne i szczegółowe informacje: będzie poprawnie rozpoznać wieloma typami urządzeń wymienionych wcześniej i wyświetlanie listy ich możliwości (w tym dodatkowe funkcje takie jak metoda wprowadzania).</span><span class="sxs-lookup"><span data-stu-id="d618f-210">Once you've installed the module, *Request.Browser* will suddenly contain a lot more accurate and detailed information: it will correctly recognize many of the devices previously mentioned and list their capabilities (including additional capabilities such as input method).</span></span> <span data-ttu-id="d618f-211">W dokumentacji projektu Aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="d618f-211">See the project's documentation for more details.</span></span>

## <a name="how-web-forms-applications-can-present-mobile-specific-pages"></a><span data-ttu-id="d618f-212">Jak aplikacji formularzy sieci Web może powodować mobile specyficznych stron</span><span class="sxs-lookup"><span data-stu-id="d618f-212">How Web Forms applications can present mobile-specific pages</span></span>

<span data-ttu-id="d618f-213">Domyślnie poniżej przedstawiono sposób wyświetlania zupełnie nowa aplikacja formularzy sieci Web na urządzeniach przenośnych wspólne:</span><span class="sxs-lookup"><span data-stu-id="d618f-213">By default, here's how a brand new Web Forms application displays on common mobile devices:</span></span>

![](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/_static/image1.png)

<span data-ttu-id="d618f-214">Wyraźnie widać ani układu wygląda bardzo przyjazne dla urządzeń przenośnych — ta strona została opracowana dla dużych, zorientowanych na pozioma monitora nie na małym ekranie orientacji pionowej.</span><span class="sxs-lookup"><span data-stu-id="d618f-214">Clearly, neither layout looks very mobile-friendly – this page was designed for a large, landscape-oriented monitor, not for a small portrait-oriented screen.</span></span> <span data-ttu-id="d618f-215">Dlatego co można zrobić na jego temat?</span><span class="sxs-lookup"><span data-stu-id="d618f-215">So what can you do about it?</span></span>

<span data-ttu-id="d618f-216">Jak wspomniano wcześniej w tym dokumencie, istnieje wiele sposobów, aby dostosować strony dla urządzeń przenośnych.</span><span class="sxs-lookup"><span data-stu-id="d618f-216">As discussed earlier in this paper, there are many ways to tailor your pages for mobile devices.</span></span> <span data-ttu-id="d618f-217">Kilka technik są oparte na serwerze, innym uruchomienia na kliencie.</span><span class="sxs-lookup"><span data-stu-id="d618f-217">Some techniques are server-based, others run on the client.</span></span>

### <a name="creating-a-mobile-specific-master-page"></a><span data-ttu-id="d618f-218">Tworzenie strony wzorcowej specyficzne dla mobile</span><span class="sxs-lookup"><span data-stu-id="d618f-218">Creating a mobile-specific master page</span></span>

<span data-ttu-id="d618f-219">W zależności od wymagań można użyć tego samego formularzy sieci Web dla wszystkich użytkowników zewnętrznych, ale masz dwa oddzielne strony wzorcowe: jeden dla użytkowników pulpitu, drugie odwiedziny na urządzeniach mobilnych.</span><span class="sxs-lookup"><span data-stu-id="d618f-219">Depending on your requirements, you may be able to use the same Web Forms for all visitors, but have two separate master pages: one for desktop visitors, another for mobile visitors.</span></span> <span data-ttu-id="d618f-220">Zapewnia to elastyczność zmiany stylów CSS lub najwyższego poziomu znaczników HTML do własnych urządzeń przenośnych bez zduplikowane wszelka logika strony.</span><span class="sxs-lookup"><span data-stu-id="d618f-220">This gives you the flexibility of changing the CSS stylesheet or your top-level HTML markup to suit mobile devices, without forcing you to duplicate any page logic.</span></span>

<span data-ttu-id="d618f-221">Jest to proste.</span><span class="sxs-lookup"><span data-stu-id="d618f-221">This is easy to do.</span></span> <span data-ttu-id="d618f-222">Na przykład można dodać program obsługi PreInit podobny do następującego formularza sieci Web:</span><span class="sxs-lookup"><span data-stu-id="d618f-222">For example, you can add a PreInit handler such as the following to a Web Form:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample1.cs)]

<span data-ttu-id="d618f-223">Teraz Utwórz stronę wzorcową, o nazwie Mobile.Master w folderze najwyższego poziomu w aplikacji i będzie on używany w przypadku wykrycia urządzenia przenośnego.</span><span class="sxs-lookup"><span data-stu-id="d618f-223">Now, create a master page called Mobile.Master in the top-level folder of your application, and it will be used when a mobile device is detected.</span></span> <span data-ttu-id="d618f-224">Stronę wzorcową mobilnych można odwoływać arkusz stylów CSS specyficzne dla mobilnych, w razie potrzeby.</span><span class="sxs-lookup"><span data-stu-id="d618f-224">Your mobile master page can reference a mobile-specific CSS stylesheet if necessary.</span></span> <span data-ttu-id="d618f-225">Goście pulpitu będą również widzieć domyślnej strony głównej, nie przenośnych jeden.</span><span class="sxs-lookup"><span data-stu-id="d618f-225">Desktop visitors will still see your default master page, not the mobile one.</span></span>

### <a name="creating-independent-mobile-specific-web-forms"></a><span data-ttu-id="d618f-226">Tworzenie niezależnych formularzy sieci Web specyficzne dla mobile</span><span class="sxs-lookup"><span data-stu-id="d618f-226">Creating independent mobile-specific Web Forms</span></span>

<span data-ttu-id="d618f-227">Aby zapewnić maksymalną elastyczność możesz znacznie więcej niż tylko posiadanie oddzielnych stron wzorcowych dla różnych typów urządzeń.</span><span class="sxs-lookup"><span data-stu-id="d618f-227">For maximum flexibility, you can go much further than just having separate master pages for different device types.</span></span> <span data-ttu-id="d618f-228">Można zaimplementować dwa *całkowicie oddzielić zestawów stron formularzy sieci Web* — jednego zestawu, w przypadku przeglądarek komputerowych, innego zestawu dla przenośne.</span><span class="sxs-lookup"><span data-stu-id="d618f-228">You can implement two *totally separate sets of Web Forms pages* – one set for desktop browsers, another set for mobiles.</span></span> <span data-ttu-id="d618f-229">Ten sposób działa najlepiej, jeśli mają być przedstawiane bardzo różne informacje i przepływów pracy do odwiedziny na urządzeniach mobilnych.</span><span class="sxs-lookup"><span data-stu-id="d618f-229">This works best if you want to present very different information or workflows to mobile visitors.</span></span> <span data-ttu-id="d618f-230">W pozostałej części tej sekcji opisano tego podejścia szczegółowo.</span><span class="sxs-lookup"><span data-stu-id="d618f-230">The rest of this section describes this approach in detail.</span></span>

<span data-ttu-id="d618f-231">Przy założeniu, że masz już aplikację formularzy sieci Web, przeznaczony dla przeglądarek komputerowych, aby kontynuować najłatwiej Utwórz podfolder o nazwie "wyraz Mobile" w obrębie projektu i twórz swoje stron dla urządzeń przenośnych.</span><span class="sxs-lookup"><span data-stu-id="d618f-231">Assuming you already have a Web Forms application designed for desktop browsers, the easiest way to proceed is to create a subfolder called "Mobile" within your project, and build your mobile pages there.</span></span> <span data-ttu-id="d618f-232">Można skonstruować całej lokacji podrzędnych, za pomocą własnej strony wzorcowe, arkusze stylów i strony, przy użyciu tych samych technik, które są używane dla innych aplikacji formularzy sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d618f-232">You can construct an entire sub-site, with its own master pages, style sheets, and pages, using all the same techniques that you'd use for any other Web Forms application.</span></span> <span data-ttu-id="d618f-233">Nie jest konieczna utworzyć przenośnych równorzędne do *co* strony w witrynie pulpitu; można wybrać podzbiór funkcji ma sens dla odwiedziny na urządzeniach mobilnych.</span><span class="sxs-lookup"><span data-stu-id="d618f-233">You don't necessarily need to produce a mobile equivalent for *every* page in your desktop site; you can choose what subset of functionality makes sense for mobile visitors.</span></span>

<span data-ttu-id="d618f-234">Twoje stron dla urządzeń przenośnych mogą udostępniać typowe zasoby statyczne (takich jak obrazy, JavaScript i CSS plików) za pomocą regularnego strony w razie potrzeby.</span><span class="sxs-lookup"><span data-stu-id="d618f-234">Your mobile pages can share common static resources (such as images, JavaScript, or CSS files) with your regular pages if you wish.</span></span> <span data-ttu-id="d618f-235">Ponieważ folderu "wyraz Mobile" będzie *nie* można oznaczyć jako oddzielną aplikację w przypadku hostowania w usługach IIS (jest to prosty podfolder stron formularzy sieci Web), jego również udostępniać te same konfiguracji, dane sesji i innych infrastruktury jako usługi strony pulpitu.</span><span class="sxs-lookup"><span data-stu-id="d618f-235">Since your "Mobile" folder will *not* be marked as a separate application when hosted in IIS (it's just a simple subfolder of Web Forms pages), it will also share all the same configuration, Session data, and other infrastructure as your desktop pages.</span></span>

> [!NOTE]
> <span data-ttu-id="d618f-236">Ponieważ takie podejście zazwyczaj polega na niektórych duplikatów kodu (stron dla urządzeń przenośnych prawdopodobnie może udostępnić pewne podobieństwa stron pulpitu), ważne jest, aby współczynnik żadnych wspólnych firm logiki lub dane kod dostępu do udostępnionej warstwy podstawowej lub usługi.</span><span class="sxs-lookup"><span data-stu-id="d618f-236">Since this approach usually involves some duplication of code (mobile pages are likely to share some similarities with desktop pages), it's important to factor out any common business logic or data access code into a shared underlying layer or service.</span></span> <span data-ttu-id="d618f-237">W przeciwnym razie będziesz double nakład pracy podczas tworzenia i obsługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d618f-237">Otherwise, you'll double the effort of creating and maintaining your application.</span></span>

#### <a name="redirecting-mobile-visitors-to-your-mobile-pages"></a><span data-ttu-id="d618f-238">Przekierowywanie odwiedziny na urządzeniach mobilnych do usługi stron dla urządzeń przenośnych</span><span class="sxs-lookup"><span data-stu-id="d618f-238">Redirecting mobile visitors to your mobile pages</span></span>

<span data-ttu-id="d618f-239">Często jest to wygodne przekierować odwiedziny na urządzeniach mobilnych do stron dla urządzeń przenośnych tylko na *pierwszy* żądania w ich sesji przeglądania (a nie na każde żądanie w ich sesji), ponieważ:</span><span class="sxs-lookup"><span data-stu-id="d618f-239">It's often convenient to redirect mobile visitors to the mobile pages only on the *first* request in their browsing session (and not on every request in their session), because:</span></span>

- <span data-ttu-id="d618f-240">Następnie umożliwia łatwe odwiedziny na urządzeniach mobilnych dostępu stron pulpitu, sieci, gdy mają być — po prostu umieść łącze na stronie głównej, która przechodzi do "Wersja pulpitu".</span><span class="sxs-lookup"><span data-stu-id="d618f-240">You can then easily allow mobile visitors to access your desktop pages if they wish – just put a link on your master page that goes to "Desktop version".</span></span> <span data-ttu-id="d618f-241">Nie można przekierować odwiedzający powrót do strony aplikacji mobilnej, ponieważ nie jest już pierwszego żądania w ich sesji.</span><span class="sxs-lookup"><span data-stu-id="d618f-241">The visitor won't be redirected back to a mobile page, because it's no longer the first request in their session.</span></span>
- <span data-ttu-id="d618f-242">Takie rozwiązanie pomaga uniknąć ryzyka nie zakłócają żądania wszelkie dynamiczne zasobów udostępnionych między częściami komputerów i urządzeń przenośnych w lokacji (np. w przypadku typowych formularz sieci Web, zarówno komputerów i urządzeń przenośnych części witryny do wyświetlania w IFRAME lub niektórych obsługi technologii Ajax)</span><span class="sxs-lookup"><span data-stu-id="d618f-242">It avoids the risk of interfering with requests for any dynamic resources shared between desktop and mobile parts of your site (e.g., if you have a common Web Form that both desktop and mobile parts of your site display in an IFRAME, or certain Ajax handlers)</span></span>

<span data-ttu-id="d618f-243">Aby to zrobić, możesz umieścić logikę przekierowania w **sesji\_Start** metody.</span><span class="sxs-lookup"><span data-stu-id="d618f-243">To do this, you can place your redirection logic in a **Session\_Start** method.</span></span> <span data-ttu-id="d618f-244">Na przykład dodaj następującą metodę do pliku Global.asax.cs:</span><span class="sxs-lookup"><span data-stu-id="d618f-244">For example, add the following method to your Global.asax.cs file:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample2.cs)]

#### <a name="configuring-forms-authentication-to-respect-your-mobile-pages"></a><span data-ttu-id="d618f-245">Konfigurowanie uwierzytelniania formularzy do przestrzegania swoje stron dla urządzeń przenośnych</span><span class="sxs-lookup"><span data-stu-id="d618f-245">Configuring Forms Authentication to respect your mobile pages</span></span>

<span data-ttu-id="d618f-246">Należy zwrócić uwagę na to, że uwierzytelnianie formularzy sprawia, że pewne założenia, o której go można skierować użytkowników podczas i po zakończeniu procesu uwierzytelniania:</span><span class="sxs-lookup"><span data-stu-id="d618f-246">Note that Forms Authentication makes certain assumptions about where it can redirect visitors during and after the authentication process:</span></span>

- <span data-ttu-id="d618f-247">Po użytkownik wymaga uwierzytelniania, uwierzytelnianie formularzy spowoduje przekierowanie do strony logowania pulpitu, niezależnie od tego, czy są one użytkownikiem komputerze lub urządzeniu przenośnym (ponieważ ma on tylko koncepcji *jeden* adres URL logowania).</span><span class="sxs-lookup"><span data-stu-id="d618f-247">When a user needs to be authenticated, Forms Authentication will redirect them to your desktop login page, regardless of whether they're a desktop or mobile user (because it only has a concept of *one* login URL).</span></span> <span data-ttu-id="d618f-248">Przy założeniu, że chcesz do nadawania stylu Twoja strona logowania przenośnych inaczej, należy zwiększyć Twoja strona logowania pulpitu tak, aby użytkownicy urządzeń przenośnych zostanie przekierowany na stronę logowania przenośnych oddzielne.</span><span class="sxs-lookup"><span data-stu-id="d618f-248">Assuming you want to style your mobile login page differently, you need to enhance your desktop login page so that it redirects mobile users to a separate mobile login page.</span></span> <span data-ttu-id="d618f-249">Na przykład, Dodaj następujący kod, aby Twoje **pulpitu** kodem strony logowania:</span><span class="sxs-lookup"><span data-stu-id="d618f-249">For example, add the following code to your **desktop** login page code-behind:</span></span> 

    [!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample3.cs)]
- <span data-ttu-id="d618f-250">Po pomyślnym zalogowaniu użytkownika, uwierzytelnianie formularzy będzie domyślnie przekierowanie do strony głównej pulpitu (ponieważ ma on tylko koncepcji *jeden* domyślna strona).</span><span class="sxs-lookup"><span data-stu-id="d618f-250">After a user successfully logs in, Forms Authentication will by default redirect them to your desktop home page (because it only has a concept of *one* default page).</span></span> <span data-ttu-id="d618f-251">Należy poprawić Twoja strona logowania mobilnych tak, aby zostanie przekierowany do strony głównej telefon komórkowy po pomyślnym zalogowaniu się w.</span><span class="sxs-lookup"><span data-stu-id="d618f-251">You need to enhance your mobile login page so that it redirects to the mobile home page after a successful log-in.</span></span> <span data-ttu-id="d618f-252">Na przykład, Dodaj następujący kod, aby Twoje **przenośnych** kodem strony logowania:</span><span class="sxs-lookup"><span data-stu-id="d618f-252">For example, add the following code to your **mobile** login page code-behind:</span></span> 

    [!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample4.cs)]
  
  <span data-ttu-id="d618f-253">Ten kod zakłada, że Twoja strona zawiera formant serwera logowania o nazwie odwoływały, tak jak w domyślnym szablonie projektu.</span><span class="sxs-lookup"><span data-stu-id="d618f-253">This code assumes your page has a Login server control called LoginUser, as in the default project template.</span></span>

### <a name="working-with-output-caching"></a><span data-ttu-id="d618f-254">Praca z buforowania danych wyjściowych</span><span class="sxs-lookup"><span data-stu-id="d618f-254">Working with Output Caching</span></span>

<span data-ttu-id="d618f-255">Jeśli używasz, buforowanie danych wyjściowych, należy pamiętać, że domyślnie, możliwe, że pulpitu użytkownika, aby znaleźć niektórych adresu URL (co powoduje jego dane wyjściowe pamięci podręcznej), zostały wykonane przez użytkownika mobilnego, który odbiera pamięci podręcznej danych wyjściowych z pulpitu.</span><span class="sxs-lookup"><span data-stu-id="d618f-255">If you're using output caching, beware that by default it's possible for a desktop user to visit a certain URL (causing its output to be cached), followed by a mobile user who then receives the cached desktop output.</span></span> <span data-ttu-id="d618f-256">To ostrzeżenie dotyczy zarówno one po prostu zmieniającego się Strona wzorcowa według typu urządzenia lub implementacji całkowicie oddzielnych formularzach sieci Web na typ urządzenia.</span><span class="sxs-lookup"><span data-stu-id="d618f-256">This warning applies whether you're just varying your master page by device type, or implementing totally separate Web Forms per device type.</span></span>

<span data-ttu-id="d618f-257">Aby uniknąć tego problemu, możesz wydać polecenie ASP.NET różnicującej wpisu pamięci podręcznej według tego, czy obiekt odwiedzający jest na urządzeniu przenośnym.</span><span class="sxs-lookup"><span data-stu-id="d618f-257">To avoid the problem, you can instruct ASP.NET to vary the cache entry according to whether the visitor is using a mobile device.</span></span> <span data-ttu-id="d618f-258">Dodaj parametr Element VaryByCustom do strony swojego OutputCache deklaracji w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="d618f-258">Add a VaryByCustom parameter to your page's OutputCache declaration as follows:</span></span>

[!code-aspx[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample5.aspx)]

<span data-ttu-id="d618f-259">Następnie zdefiniuj *isMobileDevice* jako niestandardowy pamięć podręczną parametr, dodając następującą metodę zastąpienie pliku Global.asax.cs:</span><span class="sxs-lookup"><span data-stu-id="d618f-259">Next, define *isMobileDevice* as a custom cache parameter by adding the following method override to your Global.asax.cs file:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample6.cs)]

<span data-ttu-id="d618f-260">Pozwoli to zagwarantować, że odwiedziny na urządzeniach mobilnych do strony nie pojawić się dane wyjściowe wcześniej umieścić w pamięci podręcznej przez obiekt odwiedzający pulpitu.</span><span class="sxs-lookup"><span data-stu-id="d618f-260">This will ensure that mobile visitors to the page don't receive output previously put into the cache by a desktop visitor.</span></span>

### <a name="a-working-example"></a><span data-ttu-id="d618f-261">Praktyczny przykład</span><span class="sxs-lookup"><span data-stu-id="d618f-261">A working example</span></span>

<span data-ttu-id="d618f-262">Aby wyświetlić te techniki w działaniu, Pobierz [przykładów kodu w tym oficjalnym dokumencie](https://docs.microsoft.com/aspnet/mobile/overview).</span><span class="sxs-lookup"><span data-stu-id="d618f-262">To see these techniques in action, download [this white paper's code samples](https://docs.microsoft.com/aspnet/mobile/overview).</span></span> <span data-ttu-id="d618f-263">Przykładowa aplikacja formularzy sieci Web automatycznie przekierowuje użytkowników urządzeń przenośnych z zestawem mobile specyficznych stron w podfolderze o nazwie Mobile.</span><span class="sxs-lookup"><span data-stu-id="d618f-263">The Web Forms sample application automatically redirects mobile users to a set of mobile-specific pages in a subfolder called Mobile.</span></span> <span data-ttu-id="d618f-264">Znaczniki i stylów tych stron jest lepiej zoptymalizowany pod kątem przeglądarek dla urządzeń przenośnych, jak widać na poniższych zrzutach ekranu:</span><span class="sxs-lookup"><span data-stu-id="d618f-264">The markup and styling of those pages is better optimized for mobile browsers, as you can see from the following screenshots:</span></span>

![](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/_static/image2.png)

<span data-ttu-id="d618f-265">Aby uzyskać więcej porad na temat optymalizowania swoje znaczników i arkusze CSS dla przeglądarki dla urządzeń przenośnych zobacz sekcję "Stylu stron dla urządzeń przenośnych dla przeglądarki dla urządzeń przenośnych" w dalszej części tego dokumentu.</span><span class="sxs-lookup"><span data-stu-id="d618f-265">For more tips about optimizing your markup and CSS for mobile browsers, see the section "Styling mobile pages for mobile browsers" later in this document.</span></span>

## <a name="how-aspnet-mvc-applications-can-present-mobile-specific-pages"></a><span data-ttu-id="d618f-266">Jak aplikacje programu ASP.NET MVC można przedstawić mobile specyficznych stron</span><span class="sxs-lookup"><span data-stu-id="d618f-266">How ASP.NET MVC applications can present mobile-specific pages</span></span>

<span data-ttu-id="d618f-267">Ponieważ wzorzec Model-View-Controller oddziela logiki aplikacji (w kontrolerach) od logiki prezentacji (w widokach), można za pomocą dowolnego z następujących metod do obsługi obsługę operacji mobilnych w kodzie po stronie serwera:</span><span class="sxs-lookup"><span data-stu-id="d618f-267">Since the Model-View-Controller pattern decouples application logic (in controllers) from presentation logic (in views), you can choose from any of the following approaches to handling mobile support in server-side code:</span></span>

1. <span data-ttu-id="d618f-268">\***Przy użyciu tego samego kontrolerów i widoków dla przeglądarek, zarówno komputerów i urządzeń przenośnych, ale renderowania widoków przy użyciu różnych układów Razor, w zależności od typu urządzenia\*.**</span><span class="sxs-lookup"><span data-stu-id="d618f-268">\***Use the same controllers and views for both desktop and mobile browsers, but render the views with different Razor layouts depending on the device type\*.**</span></span> <span data-ttu-id="d618f-269">Ta opcja sprawdza się najlepiej, jeśli jest wyświetlanie danych taka sama na wszystkich urządzeniach, ale po prostu chcesz podać inną arkuszy stylów CSS lub zmienić kilka elementów HTML najwyższego poziomu dla przenośne.</span><span class="sxs-lookup"><span data-stu-id="d618f-269">This option works best if you're displaying identical data on all devices, but simply want to supply different CSS stylesheets or change a few top-level HTML elements for mobiles.</span></span>
2. <span data-ttu-id="d618f-270">***Użyj tego samego kontrolerów dla przeglądarek, zarówno komputerów i urządzeń przenośnych, ale renderowania różnych widoków w zależności od typu urządzenia***.</span><span class="sxs-lookup"><span data-stu-id="d618f-270">***Use the same controllers for both desktop and mobile browsers, but render different views depending on the device type***.</span></span> <span data-ttu-id="d618f-271">Ta opcja działa najlepiej, jeśli jesteś około wyświetlania tych samych danych i zapewniając tym samym przepływów pracy dla użytkowników końcowych, ale ma być renderowany bardzo różny kod znaczników HTML do własnych urządzenie używane.</span><span class="sxs-lookup"><span data-stu-id="d618f-271">This option works best if you're displaying roughly the same data and providing the same workflows for end users, but want to render very different HTML markup to suit the device being used.</span></span>
3. <span data-ttu-id="d618f-272">\***Utwórz oddzielne obszary dla przeglądarek komputerów i urządzeń przenośnych, wdrażanie niezależny kontrolery i widoki dla każdego\*.**</span><span class="sxs-lookup"><span data-stu-id="d618f-272">\***Create separate areas for desktop and mobile browsers, implementing independent controllers and views for each\*.**</span></span> <span data-ttu-id="d618f-273">Ta opcja sprawdza się najlepiej, jeśli wyświetlanie bardzo różnych ekranach, zawierające różne informacje i początkowe użytkownika za pomocą różnych przepływów pracy, zoptymalizowane pod kątem ich typ urządzenia.</span><span class="sxs-lookup"><span data-stu-id="d618f-273">This option works best if you're displaying very different screens, containing different information and leading the user through different workflows optimized for their device type.</span></span> <span data-ttu-id="d618f-274">Może oznaczać, że niektóre powtórzenia kodu, ale można zminimalizować, który, uwzględniając limitu wspólnej logiki do warstwy podstawowej lub usługi.</span><span class="sxs-lookup"><span data-stu-id="d618f-274">It may mean some repetition of code, but you can minimize that by factoring out common logic into an underlying layer or service.</span></span>

<span data-ttu-id="d618f-275">Jeśli chcesz móc **pierwszy** opcji i różnią się tylko układ Razor na typ urządzenia jest bardzo proste.</span><span class="sxs-lookup"><span data-stu-id="d618f-275">If you want to take the **first** option and vary only the Razor layout per device type, it's very easy.</span></span> <span data-ttu-id="d618f-276">Po prostu zmodyfikuj swoje \_ViewStart.cshtml pliku w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="d618f-276">Just modify your \_ViewStart.cshtml file as follows:</span></span>

[!code-cshtml[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample7.cshtml)]

<span data-ttu-id="d618f-277">Teraz możesz utworzyć układ specyficzne dla mobile, o nazwie \_LayoutMobile.cshtml ze strukturą strony i arkusze CSS reguł, zoptymalizowane pod kątem urządzeń przenośnych.</span><span class="sxs-lookup"><span data-stu-id="d618f-277">Now you can create a mobile-specific layout called \_LayoutMobile.cshtml with a page structure and CSS rules optimized for mobile devices.</span></span>

<span data-ttu-id="d618f-278">Jeśli chcesz móc **drugi** opcji renderowania widoków zupełnie różne zależnie od typu urządzenia zewnętrznego, zobacz [wpis w blogu Scotta Hanselmana](http://www.hanselman.com/blog/ABetterASPNETMVCMobileDeviceCapabilitiesViewEngine.aspx).</span><span class="sxs-lookup"><span data-stu-id="d618f-278">If you want to take the **second** option render totally different views according to the visitor's device type, see [Scott Hanselman's blog post](http://www.hanselman.com/blog/ABetterASPNETMVCMobileDeviceCapabilitiesViewEngine.aspx).</span></span>

<span data-ttu-id="d618f-279">Pozostała część ten dokument koncentruje się na **trzeci** opcja — tworzenie oddzielnych kontrolerów *i* widoków dla urządzeń przenośnych — dzięki czemu można kontrolować, dokładnie podzbiór funkcji jest oferowana w przypadku odwiedziny na urządzeniach mobilnych.</span><span class="sxs-lookup"><span data-stu-id="d618f-279">The rest of this paper focuses on the **third** option – creating separate controllers *and* views for mobile devices – so you can control exactly what subset of functionality is offered for mobile visitors.</span></span>

### <a name="setting-up-a-mobile-area-within-your-aspnet-mvc-application"></a><span data-ttu-id="d618f-280">Konfigurowanie mobilnej obszaru w aplikacji ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="d618f-280">Setting up a Mobile area within your ASP.NET MVC application</span></span>

<span data-ttu-id="d618f-281">Można dodać obszaru o nazwie wyraz "Mobile" do istniejącej aplikacji platformy ASP.NET MVC w normalny sposób: kliknij prawym przyciskiem myszy nazwę projektu w Eksploratorze rozwiązań, a następnie wybierz pozycję Dodaj, a obszar.</span><span class="sxs-lookup"><span data-stu-id="d618f-281">You can add an area called "Mobile" to an existing ASP.NET MVC application in the normal way: right-click on your project name in Solution Explorer, then choose Add à Area.</span></span> <span data-ttu-id="d618f-282">Następnie można dodać widoków i kontrolerów podobnie jak w przypadku innych obszarów, w ramach aplikacji ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="d618f-282">You can then add controllers and views as you would for any other area within an ASP.NET MVC application.</span></span> <span data-ttu-id="d618f-283">Na przykład dodać do usługi mobilnej obszaru nowy kontroler o nazwie HomeController ma działać jako stronę główną dla odwiedziny na urządzeniach mobilnych roboczej.</span><span class="sxs-lookup"><span data-stu-id="d618f-283">For example, add to your Mobile area a new controller called HomeController to act as a homepage for mobile visitors.</span></span>

### <a name="ensuring-the-url-mobile-reaches-the-mobile-homepage"></a><span data-ttu-id="d618f-284">Zapewnienie /Mobile adresu URL osiągnie przenośnych strony głównej</span><span class="sxs-lookup"><span data-stu-id="d618f-284">Ensuring the URL /Mobile reaches the mobile homepage</span></span>

<span data-ttu-id="d618f-285">Chcąc /Mobile adres URL do osiągnięcia akcji indeksu na HomeController wewnątrz obszaru mobilnych, konieczne będzie wprowadź dwie niewielkich zmian w konfiguracji usługi routingu.</span><span class="sxs-lookup"><span data-stu-id="d618f-285">If you want the URL /Mobile to reach the Index action on HomeController inside your Mobile area, you will need to make two small changes to your routing configuration.</span></span> <span data-ttu-id="d618f-286">Najpierw zaktualizuj klasy MobileAreaRegistration tak, aby HomeController domyślny kontroler w Twojej okolicy przenośne, jak pokazano w poniższym kodzie:</span><span class="sxs-lookup"><span data-stu-id="d618f-286">First, update your MobileAreaRegistration class so that HomeController is the default controller in your Mobile area, as shown in the following code:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample8.cs)]

<span data-ttu-id="d618f-287">Oznacza to, przenośne strony głównej teraz powinien znajdować się w /Mobile zamiast/Mobile domowych, ponieważ "Home" jest teraz niejawnie domyślna nazwa kontrolera dla stron dla urządzeń przenośnych.</span><span class="sxs-lookup"><span data-stu-id="d618f-287">This means the mobile homepage will now be located at /Mobile, rather than /Mobile/Home, because "Home" is now the implicitly default controller name for mobile pages.</span></span>

<span data-ttu-id="d618f-288">Następnie należy pamiętać, że dodając HomeController drugi do aplikacji (czyli mobilnych, oprócz istniejącego pulpitu jeden), będzie Przerwano regularne strona główna pulpitu.</span><span class="sxs-lookup"><span data-stu-id="d618f-288">Next, note that by adding a second HomeController to your application (i.e., the mobile one, in addition to the existing desktop one), you'll have broken your regular desktop homepage.</span></span> <span data-ttu-id="d618f-289">Zakończy się niepowodzeniem z powodu błędu "*znaleziono wiele typów zgodnych kontroler o nazwie"Home"* ".</span><span class="sxs-lookup"><span data-stu-id="d618f-289">It will fail with the error "*Multiple types were found that match the controller named 'Home'*".</span></span> <span data-ttu-id="d618f-290">Aby rozwiązać ten problem, zaktualizuj konfigurację routingu najwyższego poziomu (w Global.asax.cs) do określenia Twojej pulpitu HomeController powinno zająć priorytet po niejednoznaczności:</span><span class="sxs-lookup"><span data-stu-id="d618f-290">To resolve this, update your top-level routing configuration (in Global.asax.cs) to specify that your desktop HomeController should take priority when there's ambiguity:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample9.cs)]

<span data-ttu-id="d618f-291">Teraz błąd zaczną away i URL http:\/\/*twoja_witryna*/ będzie korzystał z strony głównej pulpitu i http:\/\/*twoja_witryna*będzie /mobile/ Docieraj do większej przenośnych strony głównej.</span><span class="sxs-lookup"><span data-stu-id="d618f-291">Now the error will go away, and the URL http:\/\/*yoursite*/ will reach the desktop homepage, and http:\/\/*yoursite*/mobile/ will reach the mobile homepage.</span></span>

### <a name="redirecting-mobile-visitors-to-your-mobile-area"></a><span data-ttu-id="d618f-292">Przekierowywanie odwiedziny na urządzeniach mobilnych do usługi mobilnej obszaru</span><span class="sxs-lookup"><span data-stu-id="d618f-292">Redirecting mobile visitors to your mobile area</span></span>

<span data-ttu-id="d618f-293">Istnieje wiele punktów rozszerzeń innej we wzorcu ASP.NET MVC, więc istnieje wiele sposobów możliwych do dodania logiki przekierowania.</span><span class="sxs-lookup"><span data-stu-id="d618f-293">There are many different extensibility points in ASP.NET MVC, so there are many possible ways to inject redirection logic.</span></span> <span data-ttu-id="d618f-294">Jedną z opcji ładnie jest utworzyć atrybutu filtru, [RedirectMobileDevicesToMobileArea], który wykonuje przekierowanie, jeśli są spełnione następujące warunki:</span><span class="sxs-lookup"><span data-stu-id="d618f-294">One neat option is to create a filter attribute, [RedirectMobileDevicesToMobileArea], that performs a redirection if the following conditions are met:</span></span>

1. <span data-ttu-id="d618f-295">Pierwsze żądanie jest w sesji użytkownika (czyli Session.IsNewSession jest równa true)</span><span class="sxs-lookup"><span data-stu-id="d618f-295">It's the first request in the user's session (i.e., Session.IsNewSession equals true)</span></span>
2. <span data-ttu-id="d618f-296">Żądanie pochodzi z przeglądarce dla urządzeń przenośnych (czyli Request.Browser.IsMobileDevice jest równa true)</span><span class="sxs-lookup"><span data-stu-id="d618f-296">The request comes from a mobile browser (i.e., Request.Browser.IsMobileDevice equals true)</span></span>
3. <span data-ttu-id="d618f-297">Użytkownik już nie żąda zasobu, w obszarze przenośnych (czyli *ścieżki* w adresie URL nie rozpoczyna się od /Mobile)</span><span class="sxs-lookup"><span data-stu-id="d618f-297">The user is not already requesting a resource in the mobile area (i.e., the *path* part of the URL does not begin with /Mobile)</span></span>

<span data-ttu-id="d618f-298">Do pobrania próbki, dołączone ten dokument zawiera implementację tę logikę.</span><span class="sxs-lookup"><span data-stu-id="d618f-298">The downloadable sample included with this white paper includes an implementation of this logic.</span></span> <span data-ttu-id="d618f-299">Są one zaimplementowane jako filtru autoryzacji, pochodzi od klasy AuthorizeAttribute, co oznacza, że jej poprawnego działania nawet wtedy, gdy używasz buforowania danych wyjściowych (w przeciwnym razie, jeśli pulpitu odwiedzający pierwszy uzyskuje dostęp do niektórych adresu URL, pulpitu dane wyjściowe mogą być buforowane i następnie obsłużonych kolejne odwiedziny na urządzeniach mobilnych).</span><span class="sxs-lookup"><span data-stu-id="d618f-299">It's implemented as an authorization filter, derived from AuthorizeAttribute, which means it can work correctly even if you are using output caching (otherwise, if a desktop visitor first accesses a certain URL, the desktop output might be cached and then served to subsequent mobile visitors).</span></span>

<span data-ttu-id="d618f-300">Ponieważ jest filtr, możesz wybrać dowolną stosować je do określonych kontrolerów i akcji, np.</span><span class="sxs-lookup"><span data-stu-id="d618f-300">As it's a filter, you can choose either to apply it to specific controllers and actions, e.g.,</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample10.cs)]

<span data-ttu-id="d618f-301">…</span><span class="sxs-lookup"><span data-stu-id="d618f-301">…</span></span> <span data-ttu-id="d618f-302">lub można zastosować do wszystkich kontrolerów i akcji jako MVC 3 *filtrów globalnych* w pliku Global.asax.cs:</span><span class="sxs-lookup"><span data-stu-id="d618f-302">or you can apply it to all controllers and actions as an MVC 3 *global filter* in your Global.asax.cs file:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample11.cs)]

<span data-ttu-id="d618f-303">Przykład pliku do pobrania ilustruje też sposób tworzenia podklasy tego atrybutu, które przekierowują do określonych lokalizacji w Twojej okolicy mobilnych.</span><span class="sxs-lookup"><span data-stu-id="d618f-303">The downloadable sample also demonstrates how you can create subclasses of this attribute that redirect to specific locations within your mobile area.</span></span> <span data-ttu-id="d618f-304">Oznacza to, na przykład, możesz:</span><span class="sxs-lookup"><span data-stu-id="d618f-304">This means, for example, you can:</span></span>

- <span data-ttu-id="d618f-305">Zarejestrowanie filtru globalnego jak pokazano powyżej wysyłający odwiedziny na urządzeniach mobilnych na stronie głównej przenośnych domyślnie.</span><span class="sxs-lookup"><span data-stu-id="d618f-305">Register a global filter as shown above that sends mobile visitors to the mobile homepage by default.</span></span>
- <span data-ttu-id="d618f-306">Dotyczą również specjalne [RedirectMobileDevicesToMobileProductPage] filtru akcji "Wyświetl produkt", która przyjmuje odwiedziny na urządzeniach mobilnych do mobilnej wersji niezależnie od produktu one miały żądanej strony.</span><span class="sxs-lookup"><span data-stu-id="d618f-306">Also apply a special [RedirectMobileDevicesToMobileProductPage] filter to a "view product" action that takes mobile visitors to the mobile version of whatever product page they had requested.</span></span>
- <span data-ttu-id="d618f-307">Dotyczą również innych specjalnych podklasy filtr konkretne akcje, przekierowywanie odwiedziny na urządzeniach mobilnych do odpowiedniej strony mobilnych</span><span class="sxs-lookup"><span data-stu-id="d618f-307">Also apply other special subclasses of the filter to specific actions, redirecting mobile visitors to the equivalent mobile page</span></span>

### <a name="configuring-forms-authentication-to-respect-your-mobile-pages"></a><span data-ttu-id="d618f-308">Konfigurowanie uwierzytelniania formularzy do przestrzegania swoje stron dla urządzeń przenośnych</span><span class="sxs-lookup"><span data-stu-id="d618f-308">Configuring Forms Authentication to respect your mobile pages</span></span>

<span data-ttu-id="d618f-309">Jeśli używasz uwierzytelniania formularzy, należy pamiętać, że gdy użytkownik zechce się zalogować, go automatycznie przekierowuje użytkownika do pojedynczego określonego "Zaloguj" adresu URL, czyli domyślnie **/konta/logowania**.</span><span class="sxs-lookup"><span data-stu-id="d618f-309">If you're using Forms Authentication, you should note that when a user needs to log in, it automatically redirects the user to a single specific "log on" URL, which by default is **/Account/LogOn**.</span></span> <span data-ttu-id="d618f-310">Oznacza to, że użytkownicy urządzeń przenośnych może zostać przekierowany do akcji pulpitu "Zaloguj".</span><span class="sxs-lookup"><span data-stu-id="d618f-310">This means that mobile users may be redirected to your desktop "log on" action.</span></span>

<span data-ttu-id="d618f-311">Aby uniknąć tego problemu, należy dodać logikę do klasycznych akcji "Zaloguj", aby użytkownicy urządzeń przenośnych zostanie przekierowany ponownie do mobilnych akcji "Zaloguj".</span><span class="sxs-lookup"><span data-stu-id="d618f-311">To avoid this problem, add logic to your desktop "log on" action so that it redirects mobile users again to a mobile "log on" action.</span></span> <span data-ttu-id="d618f-312">Jeśli używasz domyślnego szablonu aplikacji platformy ASP.NET MVC, zaktualizuj działań logowania tego elementu AccountController w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="d618f-312">If you're using the default ASP.NET MVC application template, update AccountController's LogOn action as follows:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample12.cs)]

<span data-ttu-id="d618f-313">…</span><span class="sxs-lookup"><span data-stu-id="d618f-313">…</span></span> <span data-ttu-id="d618f-314">a następnie wdrożyć odpowiedniej akcji "Zaloguj" mobile określonych w kontrolerze o nazwie elementu AccountController w Twojej okolicy mobilnych.</span><span class="sxs-lookup"><span data-stu-id="d618f-314">and then implement a suitable mobile-specific "log on" action on a controller called AccountController in your Mobile area.</span></span>

### <a name="working-with-output-caching"></a><span data-ttu-id="d618f-315">Praca z buforowania danych wyjściowych</span><span class="sxs-lookup"><span data-stu-id="d618f-315">Working with Output Caching</span></span>

<span data-ttu-id="d618f-316">Jeśli używasz filtru [OutputCache], należy wymusić wpisu pamięci podręcznej będzie się różnić od typu urządzenia.</span><span class="sxs-lookup"><span data-stu-id="d618f-316">If you're using the [OutputCache] filter, you must force the cache entry to vary by device type.</span></span> <span data-ttu-id="d618f-317">Na przykład napisać:</span><span class="sxs-lookup"><span data-stu-id="d618f-317">For example, write:</span></span>

[!code-javascript[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample13.js)]

<span data-ttu-id="d618f-318">Następnie dodaj następującą metodę do pliku Global.asax.cs:</span><span class="sxs-lookup"><span data-stu-id="d618f-318">Then, add the following method to your Global.asax.cs file:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample14.cs)]

<span data-ttu-id="d618f-319">Pozwoli to zagwarantować, że odwiedziny na urządzeniach mobilnych do strony nie pojawić się dane wyjściowe wcześniej umieścić w pamięci podręcznej przez obiekt odwiedzający pulpitu.</span><span class="sxs-lookup"><span data-stu-id="d618f-319">This will ensure that mobile visitors to the page don't receive output previously put into the cache by a desktop visitor.</span></span>

### <a name="a-working-example"></a><span data-ttu-id="d618f-320">Praktyczny przykład</span><span class="sxs-lookup"><span data-stu-id="d618f-320">A working example</span></span>

<span data-ttu-id="d618f-321">Aby wyświetlić te techniki w działaniu, Pobierz [kod ten oficjalny dokument skojarzony przykłady](https://docs.microsoft.com/aspnet/mobile/overview).</span><span class="sxs-lookup"><span data-stu-id="d618f-321">To see these techniques in action, download [this white paper's code associated samples](https://docs.microsoft.com/aspnet/mobile/overview).</span></span> <span data-ttu-id="d618f-322">Przykład obejmuje aplikację ASP.NET MVC 3 (Wersja Release Candidate) ulepszony na potrzeby obsługi urządzeń przenośnych za pomocą metod opisanych powyżej.</span><span class="sxs-lookup"><span data-stu-id="d618f-322">The sample includes an ASP.NET MVC 3 (Release Candidate) application enhanced to support mobile devices using the methods described above.</span></span>

## <a name="further-guidance-and-suggestions"></a><span data-ttu-id="d618f-323">Dalsze wskazówki i sugestie</span><span class="sxs-lookup"><span data-stu-id="d618f-323">Further guidance and suggestions</span></span>

<span data-ttu-id="d618f-324">Następujące dyskusji mają zastosowanie zarówno do deweloperów MVC, którzy korzystają z technik w niniejszym dokumencie i formularzy sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d618f-324">The following discussion applies both to Web Forms and MVC developers who are using the techniques covered in this document.</span></span>

### <a name="enhancing-your-redirection-logic-using-51degreesmobi-foundation"></a><span data-ttu-id="d618f-325">Udoskonalanie logikę przekierowania za pomocą 51Degrees.mobi Foundation</span><span class="sxs-lookup"><span data-stu-id="d618f-325">Enhancing your redirection logic using 51Degrees.mobi Foundation</span></span>

<span data-ttu-id="d618f-326">Logika przekierowania opisane w tym dokumencie może być całkowicie wystarczający dla aplikacji, ale nie będzie działać, jeśli chcesz wyłączyć sesje lub za pomocą przeglądarki dla urządzeń przenośnych, które odrzucić pliki cookie (muszą one nie może być sesji), ponieważ nie będzie wiadomo, czy danego żądania jest pierwsza od tej osoby odwiedzającej.</span><span class="sxs-lookup"><span data-stu-id="d618f-326">The redirection logic shown in this document may be perfectly sufficient for your application, but it won't work if you need to disable sessions, or with mobile browsers that reject cookies (these can't have sessions), because it won't know whether a given request is the first one from that visitor.</span></span>

<span data-ttu-id="d618f-327">Wiesz już, jak poprawić dokładność ASP 51Degrees.mobi "open source" Foundation. Wykrywanie przeglądarki przez sieć.</span><span class="sxs-lookup"><span data-stu-id="d618f-327">You already learned how the open source 51Degrees.mobi Foundation can improve the accuracy of ASP.NET's browser detection.</span></span> <span data-ttu-id="d618f-328">Ma wbudowaną funkcję, aby skierować użytkowników mobilnych na określonych lokalizacjach skonfigurowany w pliku Web.config. Jest w stanie działać bez zależności od tego, w sesji programu ASP.NET (i w związku z tym pliki cookie), przechowując dziennika tymczasowych skrótów odwiedzających nagłówków HTTP i adresów IP, dlatego wie czy każdego żądania jest to pierwsza z danym vistor.</span><span class="sxs-lookup"><span data-stu-id="d618f-328">It also has a built-in ability to redirect mobile visitors to specific locations configured in Web.config. It's able to work without depending on ASP.NET Sessions (and hence cookies) by storing a temporary log of hashes of visitors' HTTP headers and IP addresses, so it knows whether or not each request is the first one from a given vistor.</span></span>

<span data-ttu-id="d618f-329">Następujący element dodany do sekcji fiftyOne pliku web.config będzie przekierowywać pierwsze żądanie wykrytego urządzenia przenośnego do strony ~ / Mobile/Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="d618f-329">The following element added to the fiftyOne section of the web.config file will redirect the first request from a detected mobile device to the page ~/Mobile/Default.aspx.</span></span> <span data-ttu-id="d618f-330">Wszystkie żądania do stron w folderze przenośnych będą *nie* przekierowanie, niezależnie od typu urządzenia.</span><span class="sxs-lookup"><span data-stu-id="d618f-330">Any requests to pages under the Mobile folder will *not* be redirected, regardless of device type.</span></span> <span data-ttu-id="d618f-331">Jeśli urządzenie przenośne jest nieaktywny przez okres 20 minut lub większej liczby urządzeń spowoduje usunięcie i kolejnych żądań będzie traktowane jako nowe na potrzeby przekierowywania.</span><span class="sxs-lookup"><span data-stu-id="d618f-331">If the mobile device has been inactive for a period of 20 minutes or more the device will be forgotten and subsequent requests will be treated as new ones for the purposes of redirection.</span></span>

[!code-xml[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample15.xml)]

<span data-ttu-id="d618f-332">Aby uzyskać więcej informacji, zobacz [51degrees.mobi dokumentacji Foundation](https://github.com/51Degrees/dotNET-Device-Detection).</span><span class="sxs-lookup"><span data-stu-id="d618f-332">For more details, see [51degrees.mobi Foundation documentation](https://github.com/51Degrees/dotNET-Device-Detection).</span></span>

> [!NOTE]
> <span data-ttu-id="d618f-333">Możesz *można* Foundation 51Degrees.mobi Użyj funkcji Przekierowanie na aplikacje programu ASP.NET MVC, ale należy zdefiniować konfigurację przekierowania pod względem zwykły adresów URL, nie w zakresie routingu parametrów lub poprzez umieszczenie filtrów platformy MVC w akcji.</span><span class="sxs-lookup"><span data-stu-id="d618f-333">You *can* use 51Degrees.mobi Foundation's redirection feature on ASP.NET MVC applications, but you will need to define your redirection configuration in terms of plain URLs, not in terms of routing parameters or by putting MVC filters on actions.</span></span> <span data-ttu-id="d618f-334">Jest to spowodowane (w momencie pisania) nie może rozpoznać 51Degrees.mobi Foundation filtry lub routingu.</span><span class="sxs-lookup"><span data-stu-id="d618f-334">This is because (at the time of writing) 51Degrees.mobi Foundation does not recognize filters or routing.</span></span>

### <a name="disabling-transcoders-and-proxy-servers"></a><span data-ttu-id="d618f-335">Wyłączanie Transkoderów i serwerów Proxy</span><span class="sxs-lookup"><span data-stu-id="d618f-335">Disabling Transcoders and Proxy Servers</span></span>

<span data-ttu-id="d618f-336">Operatory sieci komórkowej mają dwa cele szerokiego w ich podejście do mobilnych internet.</span><span class="sxs-lookup"><span data-stu-id="d618f-336">Mobile network operators have two broad objectives in their approach to the mobile internet:</span></span>

1. <span data-ttu-id="d618f-337">Podaj jako znacznie odpowiedniej zawartości, jak to możliwe</span><span class="sxs-lookup"><span data-stu-id="d618f-337">Provide as much relevant content as possible</span></span>
2. <span data-ttu-id="d618f-338">Zwiększenie liczby klientów, którzy mogą udostępniać radio ograniczonej przepustowości sieci</span><span class="sxs-lookup"><span data-stu-id="d618f-338">Maximize the number of customers who can share the limited radio network bandwidth</span></span>

<span data-ttu-id="d618f-339">Ponieważ większość stron sieci web zostały zaprojektowane dla dużych ekranów o rozmiarze pulpitu i połączenia szerokopasmowego szybko stała wierszy, użyć wielu operatorów *transkoderów* lub *serwerów proxy* , dynamicznie zmieniać zawartość sieci web.</span><span class="sxs-lookup"><span data-stu-id="d618f-339">Since most web pages were designed for large desktop-sized screens and fast fixed-line broadband connections, many operators use *transcoders* or *proxy servers* that dynamically alter web content.</span></span> <span data-ttu-id="d618f-340">Mogą oni modyfikować swoje kod znaczników HTML i CSS, aby odpowiadały na mniejszych ekranach (szczególnie w przypadku "Funkcja telefony" braku mocy obliczeniowej do obsługi złożonych układów), a ich może ponownie kompresować obrazów (znacznemu ograniczeniu ich jakość) w celu zwiększenia szybkości dostarczania strony.</span><span class="sxs-lookup"><span data-stu-id="d618f-340">They may modify your HTML markup or CSS to suit smaller screens (especially for "feature phones" that lack the processing power to handle complex layouts), and they may recompress your images (significantly reducing their quality) to improve page delivery speeds.</span></span>

<span data-ttu-id="d618f-341">Ale jeśli wykorzystaliście nakład pracy w celu wygenerowania zoptymalizowanych pod kątem mobile wersji lokacji prawdopodobnie nie chcesz, operatorem sieci kolidować z niego dowolny dalsze.</span><span class="sxs-lookup"><span data-stu-id="d618f-341">But if you've taken the effort to produce a mobile-optimized version of your site, you probably don't want the network operator to interfere with it any further.</span></span> <span data-ttu-id="d618f-342">Można dodać następujący wiersz do strony\_załadowane zdarzenie w dowolnej formie sieci Web platformy ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="d618f-342">You can add the following line to the Page\_Load event in any ASP.NET Web Form:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample16.cs)]

<span data-ttu-id="d618f-343">Lub dla kontroler składnika ASP.NET MVC można dodać następujące zastąpienie metody, tak aby dotyczyła wszystkich akcji na tym kontrolerze:</span><span class="sxs-lookup"><span data-stu-id="d618f-343">Or, for an ASP.NET MVC controller, you could add the following method override so that it applies to all actions on that controller:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample17.cs)]

<span data-ttu-id="d618f-344">Wynikowy komunikatu HTTP informuje transkoderów zgodne W3C i serwery proxy, aby nie zmieniać zawartość.</span><span class="sxs-lookup"><span data-stu-id="d618f-344">The resulting HTTP message informs W3C compliant transcoders and proxies not to alter content.</span></span> <span data-ttu-id="d618f-345">Oczywiście nie ma żadnej gwarancji, Operatorzy sieci komórkowej zachowuje tę wiadomość.</span><span class="sxs-lookup"><span data-stu-id="d618f-345">Of course, there is no guarantee that mobile network operators will respect this message.</span></span>

### <a name="styling-mobile-pages-for-mobile-browsers"></a><span data-ttu-id="d618f-346">Ustawianie stylów stron dla urządzeń przenośnych dla przeglądarki dla urządzeń przenośnych</span><span class="sxs-lookup"><span data-stu-id="d618f-346">Styling mobile pages for mobile browsers</span></span>

<span data-ttu-id="d618f-347">Jest to poza zakres tego dokumentu opisano szczegółowo jakiego rodzaju pracę kod znaczników HTML poprawnie lub które technik projektu sieci web zmaksymalizować użyteczności na poszczególnych urządzeń.</span><span class="sxs-lookup"><span data-stu-id="d618f-347">It's beyond the scope of this document to describe in great detail what kinds of HTML markup work correctly or which web design techniques maximize usability on particular devices.</span></span> <span data-ttu-id="d618f-348">Się użytkownikowi w celu znalezienia wystarczająco prostym układzie, optymalizacji dla ekranu o rozmiarze mobile, bez używania zawodnych HTML i CSS, pozycjonowanie wskazówki.</span><span class="sxs-lookup"><span data-stu-id="d618f-348">It's up to you to find a sufficiently simple layout, optimized for a mobile-sized screen, without using unreliable HTML or CSS positioning tricks.</span></span> <span data-ttu-id="d618f-349">Jest jednak jeden ważną technikę warte wskazujące, *okienka ekranu metatag*.</span><span class="sxs-lookup"><span data-stu-id="d618f-349">One important technique worth mentioning, however, is the *viewport meta tag*.</span></span>

<span data-ttu-id="d618f-350">Niektóre nowoczesne przeglądarki dla urządzeń przenośnych, na stronach sieci web wyświetlaną nakład pracy przeznaczone dla pulpitu monitorów renderowania strony na kanwie wirtualnych również o nazwie "okienka ekranu" (np. wirtualnych okienko ekranu jest 980 pikseli na urządzeniu iPhone oraz 850 pikseli w programie Opera Mobile domyślnie) i następnie Skaluj wynik w dół w celu dopasowania go do pikselach fizycznych.</span><span class="sxs-lookup"><span data-stu-id="d618f-350">Certain modern mobile browsers, in an effort display web pages meant for desktop monitors, render the page on a virtual canvas, also called "viewport" (e.g., the virtual viewport is 980 pixels wide on iPhone, and 850 pixels wide on Opera Mobile by default) and then scale the result down to fit onto the screen's physical pixels.</span></span> <span data-ttu-id="d618f-351">Użytkownik może, a następnie powiększanie i przesuwanie tego okienka ekranu.</span><span class="sxs-lookup"><span data-stu-id="d618f-351">The user can then zoom in and pan around that viewport.</span></span> <span data-ttu-id="d618f-352">Ma tę zaletę, że umożliwia ona przeglądarki wyświetlenia strony w jego zamierzone układ, ale jest również ma wadą wymusza powiększanie i przesuwanie, który jest wygodne, dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d618f-352">This has the advantage that it lets the browser display the page in its intended layout, but it's also has the disadvantage that it forces zooming and panning, which is inconvenient for the user.</span></span> <span data-ttu-id="d618f-353">Projektując aplikacje mobilne dla zaleca się projektowanie wąskie ekranu tak, aby bez powiększanie i przewijanie w poziomie jest niezbędne.</span><span class="sxs-lookup"><span data-stu-id="d618f-353">If you're designing for mobile, it's better to design for a narrow screen so that no zooming or horizontal scrolling is necessary.</span></span>

<span data-ttu-id="d618f-354">Umożliwia informowanie przeglądarce dla urządzeń przenośnych, jak szeroki powinien być okienka ekranu jest za pomocą niestandardowych *okienka ekranu* meta tag.</span><span class="sxs-lookup"><span data-stu-id="d618f-354">A way to tell the mobile browser how wide the viewport should be is through the nonstandard *viewport* meta tag.</span></span> <span data-ttu-id="d618f-355">Na przykład, jeśli Dodaj następujący kod do sekcji HEAD na stronie</span><span class="sxs-lookup"><span data-stu-id="d618f-355">For example, if you add the following to your page's HEAD section,</span></span>

[!code-html[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample18.html)]

<span data-ttu-id="d618f-356">…</span><span class="sxs-lookup"><span data-stu-id="d618f-356">…</span></span> <span data-ttu-id="d618f-357">następnie Obsługa przeglądarek smartphone będzie układ strony na kanwie szeroki wirtualnego 480 pikseli.</span><span class="sxs-lookup"><span data-stu-id="d618f-357">then supporting smartphone browsers will lay out the page on a 480-pixel wide virtual canvas.</span></span> <span data-ttu-id="d618f-358">Oznacza to, że elementów HTML zdefiniować ich szerokości w ujęciu procentowym, wartości procentowe będą interpretowane względem szerokość piksela 480 ta nie domyślnej szerokości okienka ekranu.</span><span class="sxs-lookup"><span data-stu-id="d618f-358">This means that if your HTML elements define their widths in percentage terms, the percentages will be interpreted with respect to this 480-pixel width, not the default viewport width.</span></span> <span data-ttu-id="d618f-359">W rezultacie użytkownik jest mniej prawdopodobne na powiększanie i przesuwanie poziomo — znacznie ulepszanie mobilnymi przeglądania.</span><span class="sxs-lookup"><span data-stu-id="d618f-359">As a result, the user is less likely to have to zoom and pan horizontally – considerably improving the mobile browsing experience.</span></span>

<span data-ttu-id="d618f-360">Chcąc szerokość okienka ekranu, aby dopasować pikselach fizycznych urządzeń, można określić następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="d618f-360">If you want the viewport width to match the device's physical pixels, you can specify the following:</span></span>

[!code-html[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample19.html)]

<span data-ttu-id="d618f-361">Aby to działało poprawnie, należy nie jawnie wymusić elementów przekracza tej szerokości (np. przy użyciu *szerokość* atrybutu lub właściwość CSS), wymuszają przeglądarki do użycia niezależnie od tego, większy okienka ekranu.</span><span class="sxs-lookup"><span data-stu-id="d618f-361">For this to work correctly, you must not explicitly force elements to exceed that width (e.g., using a *width* attribute or CSS property), otherwise the browser will be forced to use a larger viewport regardless.</span></span> <span data-ttu-id="d618f-362">Zobacz również: [więcej szczegółów na temat tagów niestandardowych okienka ekranu](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html).</span><span class="sxs-lookup"><span data-stu-id="d618f-362">See also: [more details about the nonstandard viewport tag](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html).</span></span>

<span data-ttu-id="d618f-363">Obsługa większości współczesnych smartfonów *podwójną orientacji*: mogą być przechowywane w trybie pionowej lub poziomej.</span><span class="sxs-lookup"><span data-stu-id="d618f-363">Most modern smartphones support *dual orientation*: they can be held in either portrait or landscape mode.</span></span> <span data-ttu-id="d618f-364">Jest tak, nie należy wprowadzać założeń dotyczących szerokość ekranu w pikselach.</span><span class="sxs-lookup"><span data-stu-id="d618f-364">So, it's important not to make assumptions about the screen width in pixels.</span></span> <span data-ttu-id="d618f-365">Nie nawet przyjęto założenie, że jest stała szerokość ekranu, ponieważ użytkownik może ponownie poznaniu swojego urządzenia, bez przerywania ich na stronie.</span><span class="sxs-lookup"><span data-stu-id="d618f-365">Don't even assume that the screen width is fixed, because the user can re-orient their device while they are on your page.</span></span>

<span data-ttu-id="d618f-366">Starsze urządzenia Windows Mobile i Blackberry może również przyjmować następujące tagi meta w nagłówku strony, aby poinformować zawartości zoptymalizowany dla urządzeń przenośnych i dlatego nie powinny zostać przekształcone.</span><span class="sxs-lookup"><span data-stu-id="d618f-366">Older Windows Mobile and Blackberry devices may also accept the following meta tags in the page header to inform them content has been optimized for mobile and therefore should not be transformed.</span></span>

[!code-html[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample20.html)]

## <a name="additional-resources"></a><span data-ttu-id="d618f-367">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="d618f-367">Additional Resources</span></span>

<span data-ttu-id="d618f-368">Aby uzyskać listę urządzeń przenośnych emulatorów i symulatorów, można użyć do testowania mobilnych aplikacji sieci web ASP.NET, zobacz stronę [symulowanie testowanie popularnych urządzeń przenośnych](../mobile/device-simulators.md).</span><span class="sxs-lookup"><span data-stu-id="d618f-368">For a list of mobile device emulators and simulators you can use to test your mobile ASP.NET web application, see the page [Simulate popular mobile devices for testing](../mobile/device-simulators.md).</span></span>

## <a name="credits"></a><span data-ttu-id="d618f-369">Napisy końcowe</span><span class="sxs-lookup"><span data-stu-id="d618f-369">Credits</span></span>

- <span data-ttu-id="d618f-370">Głównego autora: Steven sanderson o</span><span class="sxs-lookup"><span data-stu-id="d618f-370">Primary author: Steven Sanderson</span></span>
- <span data-ttu-id="d618f-371">Recenzenci / dodatkowych składników zapisywania zawartości: James Rosewell, Mikael Söderström, Scott Hanselman, Scott Hunter</span><span class="sxs-lookup"><span data-stu-id="d618f-371">Reviewers / additional content writers: James Rosewell, Mikael Söderström, Scott Hanselman, Scott Hunter</span></span>

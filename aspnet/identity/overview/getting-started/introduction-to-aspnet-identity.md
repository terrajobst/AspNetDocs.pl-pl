---
uid: identity/overview/getting-started/introduction-to-aspnet-identity
title: Wprowadzenie do ASP.NET Identity ASP.NET 4. x
author: jongalloway
description: System członkostwa ASP.NET został wprowadzony z ASP.NET 2,0 z powrotem w 2005, a następnie wprowadzono wiele zmian w sposób typowy dla aplikacji sieci Web...
ms.author: riande
ms.date: 01/22/2019
ms.assetid: 38717fc1-5989-43cf-952d-4007cc1dd923
ms.custom: seoapril2019
msc.legacyurl: /identity/overview/getting-started/introduction-to-aspnet-identity
msc.type: authoredcontent
ms.openlocfilehash: 0268dfc16cd2cfb1e79ee14997a4c5eb247af950
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78583847"
---
# <a name="introduction-to-aspnet-identity"></a><span data-ttu-id="27581-103">Wprowadzenie do systemu ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="27581-103">Introduction to ASP.NET Identity</span></span>

> <span data-ttu-id="27581-104">System członkostwa ASP.NET został wprowadzony z ASP.NET 2,0 z powrotem w 2005, a następnie wprowadzono wiele zmian w sposób, w jaki aplikacje sieci Web zwykle obsługują uwierzytelnianie i autoryzację.</span><span class="sxs-lookup"><span data-stu-id="27581-104">The ASP.NET membership system was introduced with ASP.NET 2.0 back in 2005, and since then there have been many changes in the ways web applications typically handle authentication and authorization.</span></span> <span data-ttu-id="27581-105">ASP.NET Identity to świeży wygląd systemu członkostwa, który powinien być używany podczas tworzenia nowoczesnych aplikacji dla sieci Web, telefonu lub tabletu.</span><span class="sxs-lookup"><span data-stu-id="27581-105">ASP.NET Identity is a fresh look at what the membership system should be when you are building modern applications for the web, phone, or tablet.</span></span>

## <a name="background-membership-in-aspnet"></a><span data-ttu-id="27581-106">Tło: członkostwo w ASP.NET</span><span class="sxs-lookup"><span data-stu-id="27581-106">Background: Membership in ASP.NET</span></span>

### <a name="aspnet-membership"></a><span data-ttu-id="27581-107">Członkostwo platformy ASP.NET</span><span class="sxs-lookup"><span data-stu-id="27581-107">ASP.NET Membership</span></span>

<span data-ttu-id="27581-108">[Członkostwo ASP.NET](https://msdn.microsoft.com/library/yh26yfzy(v=VS.100).aspx) zostało zaprojektowane do rozwiązywania wymagań dotyczących członkostwa w lokacji, które były wspólne w 2005, które dotyczyły uwierzytelniania formularzy oraz SQL Server bazy danych dla nazw użytkowników, haseł i danych profilu.</span><span class="sxs-lookup"><span data-stu-id="27581-108">[ASP.NET Membership](https://msdn.microsoft.com/library/yh26yfzy(v=VS.100).aspx) was designed to solve site membership requirements that were common in 2005, which involved Forms Authentication, and a SQL Server database for user names, passwords, and profile data.</span></span> <span data-ttu-id="27581-109">Dzisiaj istnieje dużo większa tablica opcji przechowywania danych dla aplikacji sieci Web, a większość deweloperów chce umożliwić swoim lokacjom korzystanie z dostawców tożsamości społecznościowych na potrzeby funkcji uwierzytelniania i autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="27581-109">Today there is a much broader array of data storage options for web applications, and most developers want to enable their sites to use social identity providers for authentication and authorization functionality.</span></span> <span data-ttu-id="27581-110">Ograniczenia projektu członkostwa ASP.NET sprawiają, że to przejście jest trudne:</span><span class="sxs-lookup"><span data-stu-id="27581-110">The limitations of ASP.NET Membership's design make this transition difficult:</span></span>

- <span data-ttu-id="27581-111">Schemat bazy danych został zaprojektowany dla SQL Server i nie można go zmienić.</span><span class="sxs-lookup"><span data-stu-id="27581-111">The database schema was designed for SQL Server and you can't change it.</span></span> <span data-ttu-id="27581-112">Możesz dodać informacje o profilu, ale dodatkowe dane są pakowane do innej tabeli, co utrudnia dostęp do nich za pomocą jakichkolwiek metod, z wyjątkiem interfejsu API dostawcy profilów.</span><span class="sxs-lookup"><span data-stu-id="27581-112">You can add profile information, but the additional data is packed into a different table, which makes it difficult to access by any means except through the Profile Provider API.</span></span>
- <span data-ttu-id="27581-113">System dostawcy umożliwia zmianę magazynu danych zapasowych, ale system został zaprojektowany wokół założeń, które są odpowiednie dla relacyjnej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="27581-113">The provider system enables you to change the backing data store, but the system is designed around assumptions appropriate for a relational database.</span></span> <span data-ttu-id="27581-114">Można napisać dostawcę, aby przechowywać informacje o członkostwie w mechanizmie nierelacyjnego magazynu, takim jak tabele usługi Azure Storage, ale należy obejść projekt relacyjny, pisząc wiele kodu i wiele `System.NotImplementedException` wyjątków dla metod, które nie mają zastosowania do baz danych NoSQL.</span><span class="sxs-lookup"><span data-stu-id="27581-114">You can write a provider to store membership information in a non-relational storage mechanism, such as Azure Storage Tables, but then you have to work around the relational design by writing much code and a lot of `System.NotImplementedException` exceptions for methods that don't apply to NoSQL databases.</span></span>
- <span data-ttu-id="27581-115">Ponieważ funkcja logowania/wylogowywania jest oparta na uwierzytelnianiu formularzy, system członkostwa nie może używać [Owin](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md).</span><span class="sxs-lookup"><span data-stu-id="27581-115">Since the log-in/log-out functionality is based on Forms Authentication, the membership system can't use [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md).</span></span> <span data-ttu-id="27581-116">OWIN obejmuje składniki oprogramowania pośredniczącego do uwierzytelniania, w tym obsługę logowania przy użyciu zewnętrznych dostawców tożsamości (takich jak konta Microsoft, Facebook, Google, Twitter) i logowania przy użyciu kont organizacji z Active Directory lokalnego lub Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="27581-116">OWIN includes middleware components for authentication, including support for log-ins using external identity providers (like Microsoft Accounts, Facebook, Google, Twitter), and log-ins using organizational accounts from on-premises Active Directory or Azure Active Directory.</span></span> <span data-ttu-id="27581-117">OWIN obejmuje również obsługę protokołu OAuth 2,0, JWT i CORS.</span><span class="sxs-lookup"><span data-stu-id="27581-117">OWIN also includes support for OAuth 2.0, JWT and CORS.</span></span>

### <a name="aspnet-simple-membership"></a><span data-ttu-id="27581-118">ASP.NET proste członkostwo</span><span class="sxs-lookup"><span data-stu-id="27581-118">ASP.NET Simple Membership</span></span>

<span data-ttu-id="27581-119">[ASP.NET Simple Membership](../../../web-pages/overview/security/16-adding-security-and-membership.md) został opracowany jako system członkostwa dla stron sieci Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="27581-119">[ASP.NET simple membership](../../../web-pages/overview/security/16-adding-security-and-membership.md) was developed as a membership system for ASP.NET Web Pages.</span></span> <span data-ttu-id="27581-120">Został on opublikowany w programie WebMatrix i programie Visual Studio 2010 z dodatkiem SP1.</span><span class="sxs-lookup"><span data-stu-id="27581-120">It was released with WebMatrix and Visual Studio 2010 SP1.</span></span> <span data-ttu-id="27581-121">Celem prostego członkostwa było ułatwienie dodawania funkcji członkostwa do aplikacji Web Pages.</span><span class="sxs-lookup"><span data-stu-id="27581-121">The goal of Simple Membership was to make it easy to add membership functionality to a Web Pages application.</span></span>

<span data-ttu-id="27581-122">Proste członkowstwo ułatwia dostosowanie informacji o profilach użytkowników, ale nadal udostępnia inne problemy z członkostwem ASP.NET i ma pewne ograniczenia:</span><span class="sxs-lookup"><span data-stu-id="27581-122">Simple Membership did make it easier to customize user profile information, but it still shares the other problems with ASP.NET Membership, and it has some limitations:</span></span>

- <span data-ttu-id="27581-123">Trudno było utrwalać dane systemu członkostwa w magazynie nierelacyjnym.</span><span class="sxs-lookup"><span data-stu-id="27581-123">It was hard to persist membership system data in a non-relational store.</span></span>
- <span data-ttu-id="27581-124">Nie można używać go z OWIN.</span><span class="sxs-lookup"><span data-stu-id="27581-124">You can't use it with OWIN.</span></span>
- <span data-ttu-id="27581-125">Nie działa dobrze z istniejącymi dostawcami członkostwa ASP.NET i nie jest rozszerzalny.</span><span class="sxs-lookup"><span data-stu-id="27581-125">It doesn't work well with existing ASP.NET Membership providers, and it's not extensible.</span></span>

### <a name="aspnet-universal-providers"></a><span data-ttu-id="27581-126">Standardowi dostawcy ASP.NET</span><span class="sxs-lookup"><span data-stu-id="27581-126">ASP.NET Universal Providers</span></span>

<span data-ttu-id="27581-127">[ASP.NET uniwersalnych dostawców](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) opracowano, aby umożliwić utrwalanie informacji o członkostwie w Microsoft Azure SQL Database, a także współpracują z SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="27581-127">[ASP.NET Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) were developed to make it possible to persist membership information in Microsoft Azure SQL Database, and they also work with SQL Server Compact.</span></span> <span data-ttu-id="27581-128">Dostawcy Uniwersalni byli w Entity Framework Code First, co oznacza, że uniwersalnych dostawców można używać do utrwalania danych w magazynie obsługiwanym przez EF.</span><span class="sxs-lookup"><span data-stu-id="27581-128">The Universal Providers were built on Entity Framework Code First, which means that the Universal Providers can be used to persist data in any store supported by EF.</span></span> <span data-ttu-id="27581-129">W przypadku uniwersalnych dostawców schemat bazy danych został również oczyszczony.</span><span class="sxs-lookup"><span data-stu-id="27581-129">With the Universal Providers, the database schema was cleaned up quite a lot as well.</span></span>

<span data-ttu-id="27581-130">Dostawcy Uniwersalni są Wbudowani w infrastrukturę członkostwa ASP.NET, więc nadal mają takie same ograniczenia jak w przypadku dostawcy sqlmemberd.</span><span class="sxs-lookup"><span data-stu-id="27581-130">The Universal Providers are built on the ASP.NET Membership infrastructure, so they still carry the same limitations as the SqlMembership Provider.</span></span> <span data-ttu-id="27581-131">Oznacza to, że zostały zaprojektowane dla relacyjnych baz danych i trudno jest dostosować profil i informacje o użytkowniku.</span><span class="sxs-lookup"><span data-stu-id="27581-131">That is, they were designed for relational databases and it's hard to customize profile and user information.</span></span> <span data-ttu-id="27581-132">Ci dostawcy nadal używają również uwierzytelniania formularzy do logowania i wylogowania.</span><span class="sxs-lookup"><span data-stu-id="27581-132">These providers also still use Forms Authentication for sign-in and sign-out functionality.</span></span>

## <a name="aspnet-identity"></a><span data-ttu-id="27581-133">ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="27581-133">ASP.NET Identity</span></span>

<span data-ttu-id="27581-134">W miarę rozwoju historii członkostwa w ASP.NET przez lata zespół ASP.NET zauczył opinię od klientów.</span><span class="sxs-lookup"><span data-stu-id="27581-134">As the membership story in ASP.NET has evolved over the years, the ASP.NET team has learned a lot from feedback from customers.</span></span>

<span data-ttu-id="27581-135">Założenie, że użytkownicy będą logować się, wprowadzając nazwę użytkownika i hasło, które zostały zarejestrowane we własnej aplikacji, nie są już prawidłowe.</span><span class="sxs-lookup"><span data-stu-id="27581-135">The assumption that users will sign in by entering a user name and password that they have registered in your own application is no longer valid.</span></span> <span data-ttu-id="27581-136">Sieć Web staje się bardziej społecznościowa.</span><span class="sxs-lookup"><span data-stu-id="27581-136">The web has become more social.</span></span> <span data-ttu-id="27581-137">Użytkownicy pracują ze sobą w czasie rzeczywistym za pomocą kanałów społecznościowych, takich jak Facebook, Twitter i inne witryny sieci Web społecznościowych.</span><span class="sxs-lookup"><span data-stu-id="27581-137">Users are interacting with each other in real time through social channels such as Facebook, Twitter, and other social web sites.</span></span> <span data-ttu-id="27581-138">Deweloperzy chcą, aby użytkownicy mogli logować się przy użyciu tożsamości społecznościowych, aby mogli mieć bogate środowisko w swoich witrynach sieci Web.</span><span class="sxs-lookup"><span data-stu-id="27581-138">Developers want users to be able to sign in with their social identities so that they can have a rich experience on their web sites.</span></span> <span data-ttu-id="27581-139">Nowoczesne systemy członkostwa muszą włączać logowania oparte na przekierowaniu do dostawców uwierzytelniania, takich jak Facebook, Twitter i inne.</span><span class="sxs-lookup"><span data-stu-id="27581-139">A modern membership system must enable redirection-based log-ins to authentication providers such as Facebook, Twitter, and others.</span></span>

<span data-ttu-id="27581-140">W miarę rozwoju sieci Web, tak jakby były wzorcem rozwoju sieci Web.</span><span class="sxs-lookup"><span data-stu-id="27581-140">As web development evolved, so did the patterns of web development.</span></span> <span data-ttu-id="27581-141">Testy jednostkowe kodu aplikacji stały się podstawą dla deweloperów aplikacji.</span><span class="sxs-lookup"><span data-stu-id="27581-141">Unit testing of application code became a core concern for application developers.</span></span> <span data-ttu-id="27581-142">W 2008 ASP.NET dodano nową strukturę opartą na wzorcu Model-View-Controller (MVC), w części ułatwiającej deweloperom tworzenie aplikacji weryfikowalne ASP.NET w zespole.</span><span class="sxs-lookup"><span data-stu-id="27581-142">In 2008 ASP.NET added a new framework based on the Model-View-Controller (MVC) pattern, in part to help developers build unit testable ASP.NET applications.</span></span> <span data-ttu-id="27581-143">Deweloperzy, którzy chcą przetestować jednostkę logiki aplikacji, powinni również mieć możliwość wykonania tej czynności w systemie członkostwa.</span><span class="sxs-lookup"><span data-stu-id="27581-143">Developers who wanted to unit test their application logic also wanted to be able to do that with the membership system.</span></span>

<span data-ttu-id="27581-144">Uwzględniając te zmiany w programowaniu aplikacji sieci Web, ASP.NET Identity został opracowany z następującymi celami:</span><span class="sxs-lookup"><span data-stu-id="27581-144">Considering these changes in web application development, ASP.NET Identity was developed with the following goals:</span></span>

- <span data-ttu-id="27581-145">**Jeden ASP.NET Identity system**</span><span class="sxs-lookup"><span data-stu-id="27581-145">**One ASP.NET Identity system**</span></span>

    - <span data-ttu-id="27581-146">ASP.NET Identity można używać ze wszystkimi platformami ASP.NET, takimi jak ASP.NET MVC, formularze sieci Web, strony sieci Web, internetowy interfejs API i sygnalizujący.</span><span class="sxs-lookup"><span data-stu-id="27581-146">ASP.NET Identity can be used with all of the ASP.NET frameworks, such as ASP.NET MVC, Web Forms, Web Pages, Web API, and SignalR.</span></span>
    - <span data-ttu-id="27581-147">ASP.NET Identity można używać podczas tworzenia aplikacji sieci Web, telefonów, sklepu lub hybrydowej.</span><span class="sxs-lookup"><span data-stu-id="27581-147">ASP.NET Identity can be used when you are building web, phone, store, or hybrid applications.</span></span>
- <span data-ttu-id="27581-148">**Łatwość podłączania w danych profilu dotyczących użytkownika**</span><span class="sxs-lookup"><span data-stu-id="27581-148">**Ease of plugging in profile data about the user**</span></span>

    - <span data-ttu-id="27581-149">Masz kontrolę nad schematem informacji o użytkownikach i profilach.</span><span class="sxs-lookup"><span data-stu-id="27581-149">You have control over the schema of user and profile information.</span></span> <span data-ttu-id="27581-150">Na przykład można łatwo umożliwić systemowi przechowywanie dat urodzenia wprowadzonych przez użytkowników po zarejestrowaniu konta w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="27581-150">For example, you can easily enable the system to store birth dates entered by users when they register an account in your application.</span></span>

- <span data-ttu-id="27581-151">**Kontrola trwałości**</span><span class="sxs-lookup"><span data-stu-id="27581-151">**Persistence control**</span></span>

    - <span data-ttu-id="27581-152">Domyślnie system ASP.NET Identity przechowuje wszystkie informacje o użytkowniku w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="27581-152">By default, the ASP.NET Identity system stores all the user information in a database.</span></span> <span data-ttu-id="27581-153">ASP.NET Identity używa Entity Framework Code First do wdrożenia całego mechanizmu trwałości.</span><span class="sxs-lookup"><span data-stu-id="27581-153">ASP.NET Identity uses Entity Framework Code First to implement all of its persistence mechanism.</span></span>
    - <span data-ttu-id="27581-154">Ze względu na to, że kontrolujesz schemat bazy danych, typowe zadania, takie jak zmiana nazw tabel lub zmiana typu danych kluczy podstawowych, są proste do wykonania.</span><span class="sxs-lookup"><span data-stu-id="27581-154">Since you control the database schema, common tasks such as changing table names or changing the data type of primary keys is simple to do.</span></span>
    - <span data-ttu-id="27581-155">W łatwy sposób można podłączyć różne mechanizmy magazynu, takie jak SharePoint, usługa tabel usługi Azure Storage, bazy danych NoSQL itp., bez konieczności zgłaszania wyjątków `System.NotImplementedExceptions`.</span><span class="sxs-lookup"><span data-stu-id="27581-155">It's easy to plug in different storage mechanisms such as SharePoint, Azure Storage Table Service, NoSQL databases, etc., without having to throw `System.NotImplementedExceptions` exceptions.</span></span>
- <span data-ttu-id="27581-156">**Testowanie jednostkowe**</span><span class="sxs-lookup"><span data-stu-id="27581-156">**Unit testability**</span></span>

    - <span data-ttu-id="27581-157">ASP.NET Identity sprawia, że aplikacja sieci Web weryfikowalne więcej jednostek.</span><span class="sxs-lookup"><span data-stu-id="27581-157">ASP.NET Identity makes the web application more unit testable.</span></span> <span data-ttu-id="27581-158">Można napisać testy jednostkowe dla części aplikacji, które używają ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="27581-158">You can write unit tests for the parts of your application that use ASP.NET Identity.</span></span>
- <span data-ttu-id="27581-159">**Dostawca roli**</span><span class="sxs-lookup"><span data-stu-id="27581-159">**Role provider**</span></span>

    - <span data-ttu-id="27581-160">Istnieje dostawca roli, który umożliwia ograniczenie dostępu do części aplikacji przez role.</span><span class="sxs-lookup"><span data-stu-id="27581-160">There is a role provider which lets you restrict access to parts of your application by roles.</span></span> <span data-ttu-id="27581-161">Możesz łatwo tworzyć role, takie jak "Administrator" i dodawać użytkowników do ról.</span><span class="sxs-lookup"><span data-stu-id="27581-161">You can easily create roles such as "Admin" and add users to roles.</span></span>
- <span data-ttu-id="27581-162">**Oparte na oświadczeniach**</span><span class="sxs-lookup"><span data-stu-id="27581-162">**Claims Based**</span></span>

    - <span data-ttu-id="27581-163">ASP.NET Identity obsługuje uwierzytelnianie oparte na oświadczeniach, gdzie tożsamość użytkownika jest reprezentowana jako zestaw oświadczeń.</span><span class="sxs-lookup"><span data-stu-id="27581-163">ASP.NET Identity supports claims-based authentication, where the user's identity is represented as a set of claims.</span></span> <span data-ttu-id="27581-164">Oświadczenia umożliwiają deweloperom bardziej dokładniejsze określenie tożsamości użytkownika niż Zezwalanie na role.</span><span class="sxs-lookup"><span data-stu-id="27581-164">Claims allow developers to be a lot more expressive in describing a user's identity than roles allow.</span></span> <span data-ttu-id="27581-165">Członkostwo roli jest tylko wartością logiczną (składową lub niebędącą członkiem), ale może zawierać bogate informacje o tożsamości i członkostwie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="27581-165">Whereas role membership is just a boolean (member or non-member), a claim can include rich information about the user's identity and membership.</span></span>
- <span data-ttu-id="27581-166">**Dostawcy logowania społecznościowego**</span><span class="sxs-lookup"><span data-stu-id="27581-166">**Social Login Providers**</span></span>

    - <span data-ttu-id="27581-167">W aplikacji można łatwo dodawać usługi logowania do społeczności, takie jak konta Microsoft, Facebook, Twitter, Google i inne, a także przechowywać dane specyficzne dla użytkownika w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="27581-167">You can easily add social log-ins such as Microsoft Account, Facebook, Twitter, Google, and others to your application, and store the user-specific data in your application.</span></span>

- <span data-ttu-id="27581-168">**Integracja OWIN**</span><span class="sxs-lookup"><span data-stu-id="27581-168">**OWIN Integration**</span></span>

    - <span data-ttu-id="27581-169">Uwierzytelnianie ASP.NET jest teraz oparte na oprogramowaniu pośredniczącym OWIN, które może być używane na dowolnym hoście opartym na OWIN.</span><span class="sxs-lookup"><span data-stu-id="27581-169">ASP.NET authentication is now based on OWIN middleware that can be used on any OWIN-based host.</span></span> <span data-ttu-id="27581-170">ASP.NET Identity nie ma żadnej zależności od elementu System. Web.</span><span class="sxs-lookup"><span data-stu-id="27581-170">ASP.NET Identity does not have any dependency on System.Web.</span></span> <span data-ttu-id="27581-171">Jest to w pełni zgodne środowisko OWIN i może być używane w dowolnej aplikacji hostowanej OWIN.</span><span class="sxs-lookup"><span data-stu-id="27581-171">It is a fully compliant OWIN framework and can be used in any OWIN hosted application.</span></span>
    - <span data-ttu-id="27581-172">ASP.NET Identity używa uwierzytelniania OWIN do logowania/wylogowywania użytkowników w witrynie sieci Web.</span><span class="sxs-lookup"><span data-stu-id="27581-172">ASP.NET Identity uses OWIN Authentication for log-in/log-out of users in the web site.</span></span> <span data-ttu-id="27581-173">Oznacza to, że zamiast używać FormsAuthentication do wygenerowania pliku cookie, aplikacja używa OWIN CookieAuthentication w tym celu.</span><span class="sxs-lookup"><span data-stu-id="27581-173">This means that instead of using FormsAuthentication to generate the cookie, the application uses OWIN CookieAuthentication to do that.</span></span>
- <span data-ttu-id="27581-174">**Pakiet NuGet**</span><span class="sxs-lookup"><span data-stu-id="27581-174">**NuGet package**</span></span>

    - <span data-ttu-id="27581-175">ASP.NET Identity jest rozpowszechniana jako pakiet NuGet, który jest instalowany w szablonach ASP.NET MVC, Web Forms i Web API, które są dostarczane z programem Visual Studio 2017.</span><span class="sxs-lookup"><span data-stu-id="27581-175">ASP.NET Identity is redistributed as a NuGet package which is installed in the ASP.NET MVC, Web Forms and Web API templates that ship with Visual Studio 2017.</span></span> <span data-ttu-id="27581-176">Pakiet NuGet można pobrać z galerii NuGet.</span><span class="sxs-lookup"><span data-stu-id="27581-176">You can download this NuGet package from the NuGet gallery.</span></span>
    - <span data-ttu-id="27581-177">Zwalnianie ASP.NET Identity jako pakietu NuGet ułatwia zespołowi ASP.NET Iterowanie nowych funkcji i poprawek błędów oraz dostarczanie ich do deweloperów w sposób Agile.</span><span class="sxs-lookup"><span data-stu-id="27581-177">Releasing ASP.NET Identity as a NuGet package makes it easier for the ASP.NET team to iterate on new features and bug fixes, and deliver these to developers in an agile manner.</span></span>

## <a name="get-started-with-aspnet-identity"></a><span data-ttu-id="27581-178">Wprowadzenie do ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="27581-178">Get started with ASP.NET Identity</span></span>

<span data-ttu-id="27581-179">ASP.NET Identity jest używany w szablonach projektów programu Visual Studio 2017 dla ASP.NET MVC, formularzy sieci Web, internetowego interfejsu API i SPA.</span><span class="sxs-lookup"><span data-stu-id="27581-179">ASP.NET Identity is used in the Visual Studio 2017 project templates for ASP.NET MVC, Web Forms, Web API and SPA.</span></span> <span data-ttu-id="27581-180">W tym instruktażu przedstawiono sposób, w jaki szablony projektów używają ASP.NET Identity do dodawania funkcji do rejestrowania, logowania i wylogowywania użytkownika.</span><span class="sxs-lookup"><span data-stu-id="27581-180">In this walkthrough, we'll illustrate how the project templates use ASP.NET Identity to add functionality to register, sign in and sign out a user.</span></span>

<span data-ttu-id="27581-181">ASP.NET Identity jest implementowana przy użyciu poniższej procedury.</span><span class="sxs-lookup"><span data-stu-id="27581-181">ASP.NET Identity is implemented using the following procedure.</span></span> <span data-ttu-id="27581-182">Celem tego artykułu jest zapewnienie ogólnego omówienia ASP.NET Identity; Możesz wykonać instrukcje krok po kroku lub po prostu przeczytać szczegóły.</span><span class="sxs-lookup"><span data-stu-id="27581-182">The purpose of this article is to give you a high level overview of ASP.NET Identity; you can follow it step by step or just read the details.</span></span> <span data-ttu-id="27581-183">Aby uzyskać bardziej szczegółowe instrukcje dotyczące tworzenia aplikacji przy użyciu ASP.NET Identity, w tym przy użyciu nowego interfejsu API do dodawania użytkowników, ról i informacji o profilu, zobacz sekcję następne kroki na końcu tego artykułu.</span><span class="sxs-lookup"><span data-stu-id="27581-183">For more detailed instructions on creating apps using ASP.NET Identity, including using the new API to add users, roles and profile information, see the Next Steps section at the end of this article.</span></span>

1. <span data-ttu-id="27581-184">Utwórz aplikację ASP.NET MVC z poszczególnymi kontami.</span><span class="sxs-lookup"><span data-stu-id="27581-184">Create an ASP.NET MVC application with Individual Accounts.</span></span> <span data-ttu-id="27581-185">ASP.NET Identity można użyć w ASP.NET MVC, formularzach sieci Web, interfejsie API sieci Web, sygnale itp. W tym artykule zaczniemy od aplikacji ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="27581-185">You can use ASP.NET Identity in ASP.NET MVC, Web Forms, Web API, SignalR etc. In this article we will start with an ASP.NET MVC application.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image1.png)
2. <span data-ttu-id="27581-186">Utworzony projekt zawiera następujące trzy pakiety dla ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="27581-186">The created project contains the following three packages for ASP.NET Identity.</span></span>

    - [`Microsoft.AspNet.Identity.EntityFramework`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.EntityFramework/)  
   <span data-ttu-id="27581-187">Ten pakiet ma Entity Framework implementację ASP.NET Identity, która będzie utrzymywać ASP.NET Identity dane i schemat do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="27581-187">This package has the Entity Framework implementation of ASP.NET Identity which will persist the ASP.NET Identity data and schema to SQL Server.</span></span>
    - [`Microsoft.AspNet.Identity.Core`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Core/)  
   <span data-ttu-id="27581-188">Ten pakiet ma podstawowe interfejsy dla ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="27581-188">This package has the core interfaces for ASP.NET Identity.</span></span> <span data-ttu-id="27581-189">Ten pakiet może służyć do pisania implementacji dla ASP.NET Identity, które są przeznaczone dla różnych magazynów trwałości, takich jak Azure Table Storage, bazy danych NoSQL itp.</span><span class="sxs-lookup"><span data-stu-id="27581-189">This package can be used to write an implementation for ASP.NET Identity that targets different persistence stores such as Azure Table Storage, NoSQL databases etc.</span></span>
    - [`Microsoft.AspNet.Identity.OWIN`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Owin/)  
   <span data-ttu-id="27581-190">Ten pakiet zawiera funkcje, które są używane do wtyczki uwierzytelniania OWIN przy użyciu ASP.NET Identity w aplikacjach ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="27581-190">This package contains functionality that is used to plug in OWIN authentication with ASP.NET Identity in ASP.NET applications.</span></span> <span data-ttu-id="27581-191">Jest on używany podczas dodawania funkcji logowania do aplikacji i wywoływać do programu OWINego uwierzytelnianie plików cookie w celu wygenerowania pliku cookie.</span><span class="sxs-lookup"><span data-stu-id="27581-191">This is used when you add sign in functionality to your application and call into OWIN Cookie Authentication middleware to generate a cookie.</span></span>
3. <span data-ttu-id="27581-192">Tworzenie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="27581-192">Creating a user.</span></span>  
   <span data-ttu-id="27581-193">Uruchom aplikację, a następnie kliknij link **zarejestruj** , aby utworzyć użytkownika.</span><span class="sxs-lookup"><span data-stu-id="27581-193">Launch the application and then click on the **Register** link to create a user.</span></span> <span data-ttu-id="27581-194">Na poniższej ilustracji przedstawiono stronę rejestracji, która gromadzi informacje o nazwie użytkownika i haśle.</span><span class="sxs-lookup"><span data-stu-id="27581-194">The following image shows the Register page that collects the user name and password.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image2.png)  
  
   <span data-ttu-id="27581-195">Gdy użytkownik wybierze przycisk **zarejestruj** , Akcja `Register` kontrolera konta tworzy użytkownika przez wywołanie interfejsu API ASP.NET Identity, jak pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="27581-195">When the user selects the **Register** button, the `Register` action of the Account controller creates the user by calling the ASP.NET Identity API, as highlighted below:</span></span>

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample1.cs?highlight=8-9)]
4. <span data-ttu-id="27581-196">Rejestrowanie.</span><span class="sxs-lookup"><span data-stu-id="27581-196">Sign in.</span></span>  
   <span data-ttu-id="27581-197">Jeśli użytkownik został pomyślnie utworzony, jest zalogowany przez metodę `SignInAsync`.</span><span class="sxs-lookup"><span data-stu-id="27581-197">If the user was successfully created, she is signed in by the `SignInAsync` method.</span></span>  

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample6.cs?highlight=12)]

   <span data-ttu-id="27581-198">Metoda `SignInManager.SignInAsync` generuje [Identyfikator oświadczenia](https://msdn.microsoft.com/library/system.security.claims.claimsidentity.aspx).</span><span class="sxs-lookup"><span data-stu-id="27581-198">The `SignInManager.SignInAsync` method generates a [ClaimsIdentity](https://msdn.microsoft.com/library/system.security.claims.claimsidentity.aspx).</span></span> <span data-ttu-id="27581-199">Ponieważ ASP.NET Identity i OWIN uwierzytelnianie plików cookie to system oparty na oświadczeniach, struktura wymaga, aby aplikacja generowała identyfikator oświadczenia dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="27581-199">Since ASP.NET Identity and OWIN Cookie Authentication are claims-based system, the framework requires the app to generate a ClaimsIdentity for the user.</span></span> <span data-ttu-id="27581-200">Identyfikator oświadczenia zawiera informacje o wszystkich oświadczeniach dla użytkownika, takich jak role, do których należy użytkownik.</span><span class="sxs-lookup"><span data-stu-id="27581-200">ClaimsIdentity has information about all the claims for the user, such as what roles the user belongs to.</span></span>   
 
5. <span data-ttu-id="27581-201">Wyloguj się.</span><span class="sxs-lookup"><span data-stu-id="27581-201">Log off.</span></span>  
   <span data-ttu-id="27581-202">Wybierz łącze **Wyloguj się, aby** wywołać akcję wylogowania w kontrolerze konta.</span><span class="sxs-lookup"><span data-stu-id="27581-202">Select the **Log off** link to call the LogOff action in the account controller.</span></span> 

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample5.cs?highlight=6)]

   <span data-ttu-id="27581-203">W wyróżnionym powyżej kodzie przedstawiono metodę OWIN `AuthenticationManager.SignOut`.</span><span class="sxs-lookup"><span data-stu-id="27581-203">The highlighted code above shows the OWIN `AuthenticationManager.SignOut` method.</span></span> <span data-ttu-id="27581-204">Jest to analogiczne do metody [FormsAuthentication. wylogowaniu](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) używanej przez moduł [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) w formularzach sieci Web.</span><span class="sxs-lookup"><span data-stu-id="27581-204">This is analogous to [FormsAuthentication.SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) method used by the [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) module in Web Forms.</span></span>

## <a name="components-of-aspnet-identity"></a><span data-ttu-id="27581-205">Składniki ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="27581-205">Components of ASP.NET Identity</span></span>

<span data-ttu-id="27581-206">Na poniższym diagramie przedstawiono składniki systemu ASP.NET Identity ( [Wybierz na diagramie, aby](introduction-to-aspnet-identity/_static/image3.png) go powiększyć).</span><span class="sxs-lookup"><span data-stu-id="27581-206">The diagram below shows the components of the ASP.NET Identity system (select on [this](introduction-to-aspnet-identity/_static/image3.png) or on the diagram to enlarge it).</span></span> <span data-ttu-id="27581-207">Pakiety w kolorze zielonym składają się na system ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="27581-207">The packages in green make up the ASP.NET Identity system.</span></span> <span data-ttu-id="27581-208">Wszystkie inne pakiety są zależnościami, które są konieczne do korzystania z systemu ASP.NET Identity w aplikacjach ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="27581-208">All the other packages are dependencies which are needed to use the ASP.NET Identity system in ASP.NET applications.</span></span>

[![](introduction-to-aspnet-identity/_static/image5.png)](introduction-to-aspnet-identity/_static/image4.png)

<span data-ttu-id="27581-209">Poniżej znajduje się krótki opis pakietów NuGet, które nie zostały wymienione wcześniej:</span><span class="sxs-lookup"><span data-stu-id="27581-209">The following is a brief description of the NuGet packages not mentioned previously:</span></span>

- [<span data-ttu-id="27581-210">Microsoft.Owin.Security.Cookies</span><span class="sxs-lookup"><span data-stu-id="27581-210">Microsoft.Owin.Security.Cookies</span></span>](http://www.nuget.org/packages/Microsoft.Owin.Security.Cookies/)  
 <span data-ttu-id="27581-211">Oprogramowanie pośredniczące, które umożliwia aplikacji używanie uwierzytelniania opartego na plikach cookie, podobnie jak w przypadku środowiska ASP. Uwierzytelnianie formularzy netto.</span><span class="sxs-lookup"><span data-stu-id="27581-211">Middleware that enables an application to use cookie based authentication, similar to ASP.NET's Forms Authentication.</span></span>
- [<span data-ttu-id="27581-212">EntityFramework</span><span class="sxs-lookup"><span data-stu-id="27581-212">EntityFramework</span></span>](http://www.nuget.org/packages/EntityFramework/)  
 <span data-ttu-id="27581-213">Entity Framework to technologia dostępu do danych dla relacyjnych baz danych firmy Microsoft.</span><span class="sxs-lookup"><span data-stu-id="27581-213">Entity Framework is Microsoft's recommended data access technology for relational databases.</span></span>

## <a name="migrating-from-membership-to-aspnet-identity"></a><span data-ttu-id="27581-214">Migrowanie z członkostwa do ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="27581-214">Migrating from Membership to ASP.NET Identity</span></span>

<span data-ttu-id="27581-215">Mamy nadzieję, że wkrótce udostępnimy wskazówki dotyczące migrowania istniejących aplikacji, które korzystają z członkostwa ASP.NET lub prostego członkostwa w nowym systemie ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="27581-215">We hope to soon provide guidance on migrating your existing apps that use ASP.NET Membership or Simple Membership to the new ASP.NET Identity system.</span></span>

## <a name="next-steps"></a><span data-ttu-id="27581-216">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="27581-216">Next Steps</span></span>

- [<span data-ttu-id="27581-217">Tworzenie aplikacji ASP.NET MVC 5 za pomocą usługi Facebook i usług Google OAuth2 i OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="27581-217">Create an ASP.NET MVC 5 App with Facebook and Google OAuth2 and OpenID Sign-on</span></span>](../../../mvc/overview/security/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on.md)  
 <span data-ttu-id="27581-218">Samouczek używa interfejsu API ASP.NET Identity, aby dodać informacje o profilu do bazy danych użytkownika oraz jak przeprowadzić uwierzytelnianie za pomocą usługi Google i serwisu Facebook.</span><span class="sxs-lookup"><span data-stu-id="27581-218">The tutorial uses the ASP.NET Identity API to add profile information to the user database, and how to authenticate with Google and Facebook.</span></span>
- [<span data-ttu-id="27581-219">Utwórz aplikację ASP.NET MVC z uwierzytelnianiem i bazą danych SQL, a następnie wdróż ją w Azure App Service</span><span class="sxs-lookup"><span data-stu-id="27581-219">Create an ASP.NET MVC app with auth and SQL DB and deploy to Azure App Service</span></span>](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data)  
 <span data-ttu-id="27581-220">W tym samouczku pokazano, jak dodać użytkowników i role przy użyciu interfejsu API tożsamości.</span><span class="sxs-lookup"><span data-stu-id="27581-220">This tutorial shows how to use the Identity API to add users and roles.</span></span>
- [https://github.com/rustd/AspnetIdentitySample](https://github.com/rustd/AspnetIdentitySample)  
 <span data-ttu-id="27581-221">Przykładowa aplikacja, która pokazuje, jak dodawać podstawowe role i obsługę użytkowników oraz jak wykonywać role i zarządzać użytkownikami.</span><span class="sxs-lookup"><span data-stu-id="27581-221">Sample application that shows how to add basic roles and user support and how to do roles and user management.</span></span>

---
uid: identity/overview/extensibility/implementing-a-custom-mysql-aspnet-identity-storage-provider
title: Implementowanie dostawcy magazynu MySQL niestandardowe produktu ASP.NET Identity — ASP.NET 4.x
author: raquelsa
description: ASP.NET Identity jest rozszerzalny system, co pozwala na tworzenie własnego dostawcę magazynu i podłącz go do aplikacji bez ponownego pracy likacji...
ms.author: riande
ms.date: 05/22/2015
ms.assetid: 248f5fe7-39ba-40ea-ab1e-71a69b0bd649
ms.custom: seoapril2019
msc.legacyurl: /identity/overview/extensibility/implementing-a-custom-mysql-aspnet-identity-storage-provider
msc.type: authoredcontent
ms.openlocfilehash: 224fa56a455affcbbdf76eceee5422850415037e
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/17/2019
ms.locfileid: "59420773"
---
# <a name="implementing-a-custom-mysql-aspnet-identity-storage-provider"></a><span data-ttu-id="9f3a5-103">Implementowanie niestandardowego dostawcy magazynu MySQL dla systemu ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="9f3a5-103">Implementing a Custom MySQL ASP.NET Identity Storage Provider</span></span>

<span data-ttu-id="9f3a5-104">przez [Raquel Soares De Almeida](https://github.com/raquelsa), [Suhas Joshi](https://github.com/suhasj), [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="9f3a5-104">by [Raquel Soares De Almeida](https://github.com/raquelsa), [Suhas Joshi](https://github.com/suhasj), [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="9f3a5-105">ASP.NET Identity jest rozszerzalny system, co pozwala na tworzenie własnego dostawcę magazynu i podłącz go do aplikacji bez ponownego pracy aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-105">ASP.NET Identity is an extensible system which enables you to create your own storage provider and plug it into your application without re-working the application.</span></span> <span data-ttu-id="9f3a5-106">W tym temacie opisano sposób tworzenia dostawcy magazynu MySQL dla produktu ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-106">This topic describes how to create a MySQL storage provider for ASP.NET Identity.</span></span> <span data-ttu-id="9f3a5-107">Aby zapoznać się z omówieniem Tworzenie niestandardowych dostawców magazynu, zobacz [przegląd z niestandardowych dostawców magazynu dla produktu ASP.NET Identity](overview-of-custom-storage-providers-for-aspnet-identity.md).</span><span class="sxs-lookup"><span data-stu-id="9f3a5-107">For an overview of creating custom storage providers, see [Overview of Custom Storage Providers for ASP.NET Identity](overview-of-custom-storage-providers-for-aspnet-identity.md).</span></span>
> 
> <span data-ttu-id="9f3a5-108">Do ukończenia tego samouczka, musi mieć programu Visual Studio 2013 z aktualizacją Update 2.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-108">To complete this tutorial, you must have Visual Studio 2013 with Update 2.</span></span>
> 
> <span data-ttu-id="9f3a5-109">W tym samouczku wykonują następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="9f3a5-109">This tutorial will:</span></span>
> 
> - <span data-ttu-id="9f3a5-110">W tym temacie opisano tworzenie wystąpienia bazy danych MySQL na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-110">Show how to create a MySQL database instance on Azure.</span></span>
> - <span data-ttu-id="9f3a5-111">Pokazują, jak tworzyć tabele oraz zarządzanie zdalne bazy danych na platformie Azure za pomocą narzędzia klienta MySQL (MySQL Workbench).</span><span class="sxs-lookup"><span data-stu-id="9f3a5-111">Show how to use a MySQL client tool (MySQL Workbench) to create tables and manage your remote database on Azure.</span></span>
> - <span data-ttu-id="9f3a5-112">Pokazują, jak zastąpić domyślną implementację magazynu tożsamości ASP.NET przy użyciu naszej implementacji niestandardowych w projekcie aplikacji MVC.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-112">Show how to replace the default ASP.NET Identity storage implementation with our custom implementation on a MVC application project.</span></span>
> 
> <span data-ttu-id="9f3a5-113">W tym samouczku pierwotnie został napisany przez Raquel Soares De Almeida i Rick Anderson ( [ @RickAndMSFT ](https://twitter.com/#!/RickAndMSFT) ).</span><span class="sxs-lookup"><span data-stu-id="9f3a5-113">This tutorial was originally written by Raquel Soares De Almeida and Rick Anderson ( [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT) ).</span></span> <span data-ttu-id="9f3a5-114">Przykładowy projekt został zaktualizowany na potrzeby tożsamości w wersji 2.0, Suhas Joshi.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-114">The sample project was updated for Identity 2.0 by Suhas Joshi.</span></span> <span data-ttu-id="9f3a5-115">Temat został zaktualizowany na potrzeby tożsamości w wersji 2.0, Tom FitzMacken.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-115">The topic was updated for Identity 2.0 by Tom FitzMacken.</span></span>


## <a name="download-completed-project"></a><span data-ttu-id="9f3a5-116">Zakończono pobieranie projektu</span><span class="sxs-lookup"><span data-stu-id="9f3a5-116">Download completed project</span></span>

<span data-ttu-id="9f3a5-117">Na końcu tego samouczka będziesz mieć projekt aplikacji MVC w produkcie ASP.NET Identity Praca z bazy danych MySQL hostowanej na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-117">At the end of this tutorial, you will have an MVC application project with ASP.NET Identity working with a MySQL database hosted on Azure.</span></span>

<span data-ttu-id="9f3a5-118">Możesz pobrać zakończone dostawcy magazynu MySQL w [AspNet.Identity.MySQL (CodePlex)](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/).</span><span class="sxs-lookup"><span data-stu-id="9f3a5-118">You can download the completed MySQL storage provider at [AspNet.Identity.MySQL (CodePlex)](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/).</span></span>

## <a name="the-steps-you-will-perform"></a><span data-ttu-id="9f3a5-119">Kroki, które należy wykonać</span><span class="sxs-lookup"><span data-stu-id="9f3a5-119">The steps you will perform</span></span>

<span data-ttu-id="9f3a5-120">W tym samouczku wykonasz następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="9f3a5-120">In this tutorial you will:</span></span>

1. <span data-ttu-id="9f3a5-121">Tworzenie bazy danych MySQL na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="9f3a5-121">Create a MySQL database on Azure</span></span>
2. <span data-ttu-id="9f3a5-122">Tworzenie tabel w bazie danych MySQL produktu ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="9f3a5-122">Create the ASP.NET Identity tables in MySQL</span></span>
3. <span data-ttu-id="9f3a5-123">Tworzenie aplikacji MVC i skonfigurować go do używania dostawcy bazy danych MySQL</span><span class="sxs-lookup"><span data-stu-id="9f3a5-123">Create an MVC application and configure it to use the MySQL provider</span></span>
4. <span data-ttu-id="9f3a5-124">Uruchamianie aplikacji</span><span class="sxs-lookup"><span data-stu-id="9f3a5-124">Run the app</span></span>

<span data-ttu-id="9f3a5-125">W tym temacie nie opisano architektury produktu ASP.NET Identity i decyzje, które należy wykonać podczas implementowania dostawcy magazynu klienta.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-125">This topic does not cover the architecture of ASP.NET Identity and the decisions you must make when implementing a customer storage provider.</span></span> <span data-ttu-id="9f3a5-126">Aby uzyskać te informacje, zobacz [przegląd z niestandardowego dostawcy magazynu dla produktu ASP.NET Identity](overview-of-custom-storage-providers-for-aspnet-identity.md).</span><span class="sxs-lookup"><span data-stu-id="9f3a5-126">For that information, see [Overview of Custom Storage Providers for ASP.NET Identity](overview-of-custom-storage-providers-for-aspnet-identity.md).</span></span>

## <a name="review-mysql-storage-provider-classes"></a><span data-ttu-id="9f3a5-127">Przegląd klasy dostawcy magazynu MySQL</span><span class="sxs-lookup"><span data-stu-id="9f3a5-127">Review MySQL storage provider classes</span></span>

<span data-ttu-id="9f3a5-128">Zanim przejdziemy do kroki, aby utworzyć dostawcy magazynu MySQL, Przyjrzyjmy się klasy, które tworzą dostawcę magazynu.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-128">Before jumping into the steps to create the MySQL storage provider, let's look at the classes that make up the storage provider.</span></span> <span data-ttu-id="9f3a5-129">Konieczne będzie klas, które zarządzają operacji bazy danych i klas, które są wywoływane z poziomu aplikacji do zarządzania użytkownikami i rolami.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-129">You will need classes that manage the database operations and classes that are called from the application to manage users and roles.</span></span>

### <a name="storage-classes"></a><span data-ttu-id="9f3a5-130">Klasy magazynu</span><span class="sxs-lookup"><span data-stu-id="9f3a5-130">Storage classes</span></span>

- <span data-ttu-id="9f3a5-131">[IdentityUser](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/IdentityUser.cs) — zawiera właściwości użytkownika.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-131">[IdentityUser](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/IdentityUser.cs) - contains properties for the user.</span></span>
- <span data-ttu-id="9f3a5-132">[Magazynie UserStore](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserStore.cs) — zawiera operacje dodawania, aktualizowania i pobierania użytkowników.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-132">[UserStore](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserStore.cs) - contains operations for adding, updating or retrieving users.</span></span>
- <span data-ttu-id="9f3a5-133">[IdentityRole](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/IdentityRole.cs) — zawiera właściwości dla ról.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-133">[IdentityRole](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/IdentityRole.cs) - contains properties for roles.</span></span>
- <span data-ttu-id="9f3a5-134">[Elemencie RoleStore](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/RoleStore.cs) — zawiera operacje dodawania, usuwania, aktualizowania i pobierania ról.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-134">[RoleStore](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/RoleStore.cs) - contains operations for adding, deleting, updating and retrieving roles.</span></span>

### <a name="data-access-layer-classes"></a><span data-ttu-id="9f3a5-135">Klasy warstwy dostępu do danych</span><span class="sxs-lookup"><span data-stu-id="9f3a5-135">Data access layer classes</span></span>

<span data-ttu-id="9f3a5-136">W tym przykładzie klasy warstwy dostępu do danych zawierają instrukcje SQL do pracy z tabel. Jednak w kodzie można używać mapowania obiektowo relacyjny (ORM), takich jak Entity Framework lub NHibernate.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-136">For this example, the data access layer classes contain SQL statements for working with the tables; however, in your code you might want to use object-relational mapping (ORM) such as Entity Framework or NHibernate.</span></span> <span data-ttu-id="9f3a5-137">W szczególności aplikacji może wystąpić spadek wydajności bez ORM, obejmującą powolne ładowanie i buforowania obiektów.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-137">In particular, your application may experience poor performance without an ORM that includes lazy loading and object caching.</span></span> <span data-ttu-id="9f3a5-138">Aby uzyskać więcej informacji, zobacz [bez programu Entity Framework w wersji 2.0 tożsamości ASP.NET?](https://aspnetidentity.codeplex.com/discussions/561828)</span><span class="sxs-lookup"><span data-stu-id="9f3a5-138">For more information, see [ASP.NET Identity 2.0 without Entity Framework?](https://aspnetidentity.codeplex.com/discussions/561828)</span></span>

- <span data-ttu-id="9f3a5-139">[MySQLDatabase](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/MySQLDatabase.cs) — zawiera metody służące do wykonywania operacji w bazie danych i połączenie z bazą danych MySQL.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-139">[MySQLDatabase](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/MySQLDatabase.cs) - contains the MySQL database connection and methods for performing database operations.</span></span> <span data-ttu-id="9f3a5-140">Magazynie UserStore i elemencie RoleStore są zarówno tworzone przy użyciu wystąpienia tej klasy.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-140">UserStore and RoleStore are both instantiated with an instance of this class.</span></span>
- <span data-ttu-id="9f3a5-141">[RoleTable](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/RoleTable.cs) — zawiera operacje bazy danych dla tabeli, która przechowuje role.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-141">[RoleTable](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/RoleTable.cs) - contains database operations for the table that stores roles.</span></span>
- <span data-ttu-id="9f3a5-142">[UserClaimsTable](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserClaimsTable.cs) — zawiera operacje bazy danych dla tabeli, która przechowuje oświadczenia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-142">[UserClaimsTable](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserClaimsTable.cs) - contains database operations for the table that stores user claims.</span></span>
- <span data-ttu-id="9f3a5-143">[UserLoginsTable](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserLoginsTable.cs) — zawiera operacje bazy danych dla tabeli, która przechowuje dane logowania użytkownika.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-143">[UserLoginsTable](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserLoginsTable.cs) - contains database operations for the table that stores user login information.</span></span>
- <span data-ttu-id="9f3a5-144">[UserRoleTable](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserRoleTable.cs) — zawiera operacje bazy danych dla tabeli, który przechowuje, czyli użytkownicy przypisani do ról.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-144">[UserRoleTable](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserRoleTable.cs) - contains database operations for the table that stores which users are assigned to which roles.</span></span>
- <span data-ttu-id="9f3a5-145">[UserTable](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserTable.cs) — zawiera operacje bazy danych dla tabeli, która przechowuje użytkowników.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-145">[UserTable](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserTable.cs) - contains database operations for the table that stores users.</span></span>

## <a name="create-a-mysql-database-instance-on-azure"></a><span data-ttu-id="9f3a5-146">Tworzenie wystąpienia bazy danych MySQL na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="9f3a5-146">Create a MySQL database instance on Azure</span></span>

1. <span data-ttu-id="9f3a5-147">Zaloguj się do [witryny Azure Portal](https://manage.windowsazure.com/).</span><span class="sxs-lookup"><span data-stu-id="9f3a5-147">Log in to the [Azure Portal](https://manage.windowsazure.com/).</span></span>
2. <span data-ttu-id="9f3a5-148">Kliknij przycisk **+ nowy** w dolnej części strony, a następnie wybierz **MAGAZYNU**.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-148">Click **+NEW** at the bottom of the page, and then select **STORE**.</span></span>  
    ![](implementing-a-custom-mysql-aspnet-identity-storage-provider/_static/image1.png)
3. <span data-ttu-id="9f3a5-149">W **wybierz i dodatek** kreatora wybierz **bazy danych MySQL ClearDB** i kliknij strzałkę dalej w prawym dolnym rogu okna dialogowego.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-149">In the **Choose and Add-on** wizard, select **ClearDB MySQL Database** and click on the next arrow at the bottom right of the dialog.</span></span>  
    ![](implementing-a-custom-mysql-aspnet-identity-storage-provider/_static/image2.png)
4. <span data-ttu-id="9f3a5-150">Zachowaj wartość domyślną **bezpłatna** planowania i zmienić **nazwa** do **IdentityMySQLDatabase**.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-150">Keep the default **Free** plan and change the **Name** to **IdentityMySQLDatabase**.</span></span> <span data-ttu-id="9f3a5-151">Wybierz region najbliższą, a następnie kliknij strzałkę dalej.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-151">Select the region nearest you and then click the next arrow.</span></span>  
    ![](implementing-a-custom-mysql-aspnet-identity-storage-provider/_static/image3.png)
5. <span data-ttu-id="9f3a5-152">Kliknij znacznik wyboru, aby zakończyć tworzenie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-152">Click the checkmark to complete the database creation.</span></span>  
    ![](implementing-a-custom-mysql-aspnet-identity-storage-provider/_static/image4.png)
6. <span data-ttu-id="9f3a5-153">Po utworzeniu bazy danych można zarządzać nim z **dodatki** karta w portalu zarządzania.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-153">After your database has been created, you can manage it from the **ADD-ONS** tab in the management portal.</span></span>   
    ![](implementing-a-custom-mysql-aspnet-identity-storage-provider/_static/image5.png)
7. <span data-ttu-id="9f3a5-154">Informacje o połączeniu bazy danych można uzyskać, klikając **informacje o połączeniu** w dolnej części strony.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-154">You can get the database connection information by clicking on **CONNECTION INFO** at the bottom of the page.</span></span>  
    ![](implementing-a-custom-mysql-aspnet-identity-storage-provider/_static/image6.png)
8. <span data-ttu-id="9f3a5-155">Skopiuj parametry połączenia, klikając przycisk kopiowania i zapisz go, aby można było używać później w aplikacji MVC.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-155">Copy the connection string by clicking on the copy button and save it so you can use later in your MVC application.</span></span>   
    ![](implementing-a-custom-mysql-aspnet-identity-storage-provider/_static/image7.png)

## <a name="create-the-aspnet-identity-tables-in-a-mysql-database"></a><span data-ttu-id="9f3a5-156">Tworzenie produktu ASP.NET Identity tabel w bazie danych MySQL</span><span class="sxs-lookup"><span data-stu-id="9f3a5-156">Create the ASP.NET Identity tables in a MySQL database</span></span>

### <a name="install-mysql-workbench-tool-to-connect-and-manage-mysql-database"></a><span data-ttu-id="9f3a5-157">Zainstaluj narzędzie MySQL Workbench do nawiązywania połączeń i zarządzania bazą danych MySQL</span><span class="sxs-lookup"><span data-stu-id="9f3a5-157">Install MySQL Workbench tool to connect and manage MySQL database</span></span>

1. <span data-ttu-id="9f3a5-158">Zainstaluj **połączenia aplikacji MySQL Workbench** narzędzia z [strony pobierania MySQL](http://dev.mysql.com/downloads/windows/installer/)</span><span class="sxs-lookup"><span data-stu-id="9f3a5-158">Install the **MySQL Workbench** tool from the [MySQL downloads page](http://dev.mysql.com/downloads/windows/installer/)</span></span>
2. <span data-ttu-id="9f3a5-159">Uruchom aplikację i dodać kliknij na **MySQLConnections +** przycisk, aby dodać nowe połączenie.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-159">Launch the app and add click on the **MySQLConnections +** button to add a new connection.</span></span> <span data-ttu-id="9f3a5-160">Przy użyciu danych parametry połączenia skopiowane z bazy danych Azure MySQL utworzonej we wcześniejszej części tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-160">Use the connection string data you copied from the Azure MySQL database you created earlier in this tutorial.</span></span>
3. <span data-ttu-id="9f3a5-161">Po ustanowieniu połączenia, otwórz nowy **zapytania** karcie; Wklej poleceń z [MySQLIdentity.sql](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/MySQLIdentity.sql) do zapytania i uruchomić go w celu tworzenia tabel bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-161">After establishing the connection, open a new **Query** tab; paste the commands from [MySQLIdentity.sql](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/MySQLIdentity.sql) into the query and execute it in order to create the database tables.</span></span>
4. <span data-ttu-id="9f3a5-162">Masz teraz wszystkie produktu ASP.NET Identity niezbędne tabele utworzone w bazie danych programu MySQL hostowanej na platformie Azure, jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-162">You now have all the ASP.NET Identity necessary tables created on a MySQL database hosted on Azure as shown below.</span></span>  
    ![](implementing-a-custom-mysql-aspnet-identity-storage-provider/_static/image1.jpg)

## <a name="create-an-mvc-application-project-from-template-and-configure-it-to-use-mysql-provider"></a><span data-ttu-id="9f3a5-163">Tworzenie projektu aplikacji MVC za pomocą szablonu i skonfigurować go do używania dostawcy bazy danych MySQL</span><span class="sxs-lookup"><span data-stu-id="9f3a5-163">Create an MVC application project from template and configure it to use MySQL provider</span></span>

<span data-ttu-id="9f3a5-164">Jeśli to konieczne, zainstaluj albo [Visual Studio Express 2013 for Web](https://go.microsoft.com/fwlink/?LinkId=299058) lub [programu Visual Studio 2013](https://go.microsoft.com/fwlink/?LinkId=306566) z aktualizacją Update 2.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-164">If needed, install either [Visual Studio Express 2013 for Web](https://go.microsoft.com/fwlink/?LinkId=299058) or [Visual Studio 2013](https://go.microsoft.com/fwlink/?LinkId=306566) with Update 2.</span></span>

### <a name="download-the-aspnetidentitymysql-project-from-codeplex"></a><span data-ttu-id="9f3a5-165">Pobieranie projektu ASP.NET.Identity.MySQL z witryny CodePlex</span><span class="sxs-lookup"><span data-stu-id="9f3a5-165">Download the ASP.NET.Identity.MySQL project from CodePlex</span></span>

1. <span data-ttu-id="9f3a5-166">Przejdź do adresu URL repozytorium na [AspNet.Identity.MySQL (CodePlex)](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/).</span><span class="sxs-lookup"><span data-stu-id="9f3a5-166">Browse to the repository URL at [AspNet.Identity.MySQL (CodePlex)](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/).</span></span>
2. <span data-ttu-id="9f3a5-167">Pobierz kod źródłowy.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-167">Download the source code.</span></span>
3. <span data-ttu-id="9f3a5-168">Wyodrębnij plik zip do folderu lokalnego.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-168">Extract the .zip file into a local folder.</span></span>
4. <span data-ttu-id="9f3a5-169">Otwórz rozwiązanie AspNet.Identity.MySQL i skompiluj je.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-169">Open the AspNet.Identity.MySQL solution and build it.</span></span>

### <a name="create-a-new-mvc-application-project-from-template"></a><span data-ttu-id="9f3a5-170">Utwórz nowy projekt aplikacji MVC za pomocą szablonu</span><span class="sxs-lookup"><span data-stu-id="9f3a5-170">Create a new MVC application project from template</span></span>

1. <span data-ttu-id="9f3a5-171">Kliknij prawym przyciskiem myszy **AspNet.Identity.MySQL** rozwiązania i **Dodaj**, **nowy projekt**</span><span class="sxs-lookup"><span data-stu-id="9f3a5-171">Right click the **AspNet.Identity.MySQL** solution and **Add**, **New Project**</span></span>
2. <span data-ttu-id="9f3a5-172">W **Dodaj nowy projekt** okna dialogowego wybierz **Visual C#** po lewej stronie, następnie **Web** , a następnie wybierz **aplikacji sieci Web ASP.NET**.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-172">In the **Add New Project** Dialog select **Visual C#** on the left, then **Web** and then select **ASP.NET Web Application**.</span></span> <span data-ttu-id="9f3a5-173">Nazwij swój projekt **IdentityMySQLDemo**; a następnie kliknij przycisk OK.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-173">Name your project **IdentityMySQLDemo**; and then click OK.</span></span>  
  
    ![](implementing-a-custom-mysql-aspnet-identity-storage-provider/_static/image2.jpg)
3. <span data-ttu-id="9f3a5-174">W **nowy projekt ASP.NET** okno dialogowe, wybierz szablon MVC, z opcjami domyślnymi (który zawiera **indywidualne konta użytkowników** jako metodę uwierzytelniania) i kliknij przycisk **OK** .![](implementing-a-custom-mysql-aspnet-identity-storage-provider/_static/image3.jpg)</span><span class="sxs-lookup"><span data-stu-id="9f3a5-174">In the **New ASP.NET Project** dialog, select the MVC template with the default options (that includes **Individual User Accounts** as authentication method) and click **OK**.![](implementing-a-custom-mysql-aspnet-identity-storage-provider/_static/image3.jpg)</span></span>
4. <span data-ttu-id="9f3a5-175">W Eksploratorze rozwiązań kliknij prawym przyciskiem myszy projekt IdentityMySQLDemo, a następnie wybierz **Zarządzaj pakietami NuGet**.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-175">In Solution Explorer, right-click your IdentityMySQLDemo project and select **Manage NuGet Packages**.</span></span> <span data-ttu-id="9f3a5-176">W oknie dialogowym pole tekstowe wyszukiwania wpisz **Identity.EntityFramework**.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-176">In the search text box dialog, type **Identity.EntityFramework**.</span></span> <span data-ttu-id="9f3a5-177">Wybierz ten pakiet na liście wyników i kliknij przycisk **Odinstaluj**.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-177">Select this package in the list of results and click **Uninstall**.</span></span> <span data-ttu-id="9f3a5-178">Zostanie wyświetlony monit Odinstaluj pakiet zależności platformy EntityFramework.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-178">You will be prompted to uninstall the dependency package EntityFramework.</span></span> <span data-ttu-id="9f3a5-179">Kliknij Tak, jak firma Microsoft nie będą już ten pakiet w tej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-179">Click on Yes as we will no longer this package on this application.</span></span>
5. <span data-ttu-id="9f3a5-180">Kliknij prawym przyciskiem myszy projekt IdentityMySQLDemo, wybierz **Dodaj**, **odwołania, rozwiązania, projekty;** zaznacz projekt AspNet.Identity.MySQL, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-180">Right click the IdentityMySQLDemo project, select **Add**, **Reference, Solution, Projects;** select the AspNet.Identity.MySQL project and click **OK**.</span></span>
6. <span data-ttu-id="9f3a5-181">W projekcie IdentityMySQLDemo Zastąp wszystkie odwołania do</span><span class="sxs-lookup"><span data-stu-id="9f3a5-181">In the IdentityMySQLDemo project, replace all references to</span></span>  
    `using Microsoft.AspNet.Identity.EntityFramework;`  
   <span data-ttu-id="9f3a5-182">with</span><span class="sxs-lookup"><span data-stu-id="9f3a5-182">with</span></span>  
     `using AspNet.Identity.MySQL;`
7. <span data-ttu-id="9f3a5-183">W IdentityModels.cs, ustaw **ApplicationDbContext** wyprowadzenia z **MySqlDatabase** i zawiera konstruktora, który przyjmować jeden parametr o nazwie połączenia.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-183">In IdentityModels.cs, set **ApplicationDbContext** to derive from **MySqlDatabase** and include a constructor that take a single parameter with the connection name.</span></span>  

    [!code-csharp[Main](implementing-a-custom-mysql-aspnet-identity-storage-provider/samples/sample1.cs)]
8. <span data-ttu-id="9f3a5-184">Otwórz plik IdentityConfig.cs.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-184">Open the IdentityConfig.cs file.</span></span> <span data-ttu-id="9f3a5-185">W **ApplicationUserManager.Create** metody, Zastąp wystąpienia menedżera UserManager następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="9f3a5-185">In the **ApplicationUserManager.Create** method, replace instantiating UserManager with the following code:</span></span>  

    [!code-csharp[Main](implementing-a-custom-mysql-aspnet-identity-storage-provider/samples/sample2.cs)]
9. <span data-ttu-id="9f3a5-186">Otwórz plik web.config i Zastąp ciąg DefaultConnection ten wpis, zastępując wartości wyróżnione parametry połączenia bazy danych MySQL, który został utworzony w poprzednich krokach:</span><span class="sxs-lookup"><span data-stu-id="9f3a5-186">Open the web.config file and replace the DefaultConnection string with this entry replacing the highlighted values with the connection string of the MySQL database you created on previous steps:</span></span>  

    [!code-xml[Main](implementing-a-custom-mysql-aspnet-identity-storage-provider/samples/sample3.xml?highlight=2)]

## <a name="run-the-app-and-connect-to-the-mysql-db"></a><span data-ttu-id="9f3a5-187">Uruchom aplikację i Połącz z bazą danych MySQL</span><span class="sxs-lookup"><span data-stu-id="9f3a5-187">Run the app and connect to the MySQL DB</span></span>

1. <span data-ttu-id="9f3a5-188">Kliknij prawym przyciskiem myszy **IdentityMySQLDemo** projektu, a następnie wybierz **Ustaw jako projekt startowy**</span><span class="sxs-lookup"><span data-stu-id="9f3a5-188">Right click the **IdentityMySQLDemo** project and select **Set as Startup Project**</span></span>
2. <span data-ttu-id="9f3a5-189">Naciśnij klawisz **klawiszy Ctrl + F5** Aby skompilować i uruchomić aplikację.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-189">Press **Ctrl + F5** to build and run the app.</span></span>
3. <span data-ttu-id="9f3a5-190">Kliknij pozycję **zarejestrować** kartę w górnej części strony.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-190">Click on **Register** tab on the top of the page.</span></span>
4. <span data-ttu-id="9f3a5-191">Wprowadź nową nazwę użytkownika i hasło, a następnie kliknij polecenie **zarejestrować**.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-191">Enter a new user name and password and then click on **Register**.</span></span>  
  
    ![](implementing-a-custom-mysql-aspnet-identity-storage-provider/_static/image8.png)
5. <span data-ttu-id="9f3a5-192">Nowy użytkownik jest teraz zarejestrowany i zalogowany.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-192">The new user is now registered and logged in.</span></span>  
  
    ![](implementing-a-custom-mysql-aspnet-identity-storage-provider/_static/image9.png)
6. <span data-ttu-id="9f3a5-193">Wróć do narzędzia MySQL Workbench i sprawdzić **IdentityMySQLDatabase** zawartości tabeli.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-193">Go back to the MySQL Workbench tool and inspect the **IdentityMySQLDatabase** table's contents.</span></span> <span data-ttu-id="9f3a5-194">Tabela użytkowników zapisów należy sprawdzić, jak zarejestrować nowych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="9f3a5-194">Inspect the users table for the entries as you register new users.</span></span>  
  
    ![](implementing-a-custom-mysql-aspnet-identity-storage-provider/_static/image10.png)

## <a name="next-steps"></a><span data-ttu-id="9f3a5-195">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="9f3a5-195">Next Steps</span></span>

<span data-ttu-id="9f3a5-196">Aby uzyskać więcej informacji o sposobie włączania innych metod uwierzytelniania, w tej aplikacji, zapoznaj się [tworzenie aplikacji platformy ASP.NET MVC 5 za pomocą usługi Facebook i Google OAuth2 i OpenID logowanie jednokrotne](../../../mvc/overview/security/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on.md).</span><span class="sxs-lookup"><span data-stu-id="9f3a5-196">For more information on how to enable other authentication methods on this app, refer to [Create an ASP.NET MVC 5 App with Facebook and Google OAuth2 and OpenID Sign-on](../../../mvc/overview/security/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on.md).</span></span>

<span data-ttu-id="9f3a5-197">Aby dowiedzieć się, jak zintegrować swoje bazy danych z uwierzytelnianiem OAuth i konfigurowanie ról, aby ograniczyć dostęp użytkowników do aplikacji, zobacz [wdrażanie aplikacji bezpiecznego ASP.NET MVC 5 z członkostwa, uwierzytelnianiem OAuth i bazą danych SQL na platformie Azure](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data).</span><span class="sxs-lookup"><span data-stu-id="9f3a5-197">To learn how to integrate your DB with OAuth and to set up roles to limit users access to your app, see [Deploy a Secure ASP.NET MVC 5 app with Membership, OAuth, and SQL Database to Azure](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data).</span></span>

---
uid: web-pages/overview/data/working-with-files
title: Praca z plikami w witrynie ASP.NET Web Pages (Razor) | Dokumentacja firmy Microsoft
author: Rick-Anderson
description: W tym rozdziale wyjaśniono, jak do odczytu, zapisu, dołączania, usuwania i przekazywania plików.
ms.author: riande
ms.date: 02/20/2014
ms.assetid: eee916e4-ba4c-439a-a24e-68df7d45a569
msc.legacyurl: /web-pages/overview/data/working-with-files
msc.type: authoredcontent
ms.openlocfilehash: 684c47a8a8480dc040e5144144577c94c35d39e5
ms.sourcegitcommit: dd0dc556a3d99a31d8fdbc763e9a2e53f3441b70
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/27/2019
ms.locfileid: "67411186"
---
# <a name="working-with-files-in-an-aspnet-web-pages-razor-site"></a><span data-ttu-id="d4dc2-103">Praca z plikami w witrynie ASP.NET Web Pages (Razor)</span><span class="sxs-lookup"><span data-stu-id="d4dc2-103">Working with Files in an ASP.NET Web Pages (Razor) Site</span></span>

<span data-ttu-id="d4dc2-104">przez [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="d4dc2-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="d4dc2-105">W tym artykule wyjaśniono, jak do odczytu, zapisu, dołączania, usuwania i przekazywanie plików w witrynie ASP.NET Web Pages (Razor).</span><span class="sxs-lookup"><span data-stu-id="d4dc2-105">This article explains how to read, write, append, delete, and upload files in an ASP.NET Web Pages (Razor) site.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="d4dc2-106">Jeśli chcesz przekazywać obrazy i manipulować nimi (na przykład przerzucić lub zmieniać ich rozmiar), zobacz [Praca z obrazami w witrynie ASP.NET Web Pages](/aspnet/web-pages/overview/ui-layouts-and-themes/9-working-with-images).</span><span class="sxs-lookup"><span data-stu-id="d4dc2-106">If you want to upload images and manipulate them (for example, flip or resize them), see [Working with Images in an ASP.NET Web Pages Site](/aspnet/web-pages/overview/ui-layouts-and-themes/9-working-with-images).</span></span>
> 
> 
> <span data-ttu-id="d4dc2-107">**Zawartość:**</span><span class="sxs-lookup"><span data-stu-id="d4dc2-107">**What you'll learn:**</span></span> 
> 
> - <span data-ttu-id="d4dc2-108">Jak utworzyć plik tekstowy i zapisanie w nim danych.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-108">How to create a text file and write data to it.</span></span>
> - <span data-ttu-id="d4dc2-109">Jak dołączyć dane do istniejącego pliku.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-109">How to append data to an existing file.</span></span>
> - <span data-ttu-id="d4dc2-110">Jak odczytać plik i wyświetlić z niego.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-110">How to read a file and display from it.</span></span>
> - <span data-ttu-id="d4dc2-111">Jak usunąć pliki z witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-111">How to delete files from a website.</span></span>
> - <span data-ttu-id="d4dc2-112">Jak umożliwić użytkownikom przekazywanie jednego lub wielu plików.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-112">How to let users upload one file or multiple files.</span></span>
> 
> <span data-ttu-id="d4dc2-113">Poniżej przedstawiono funkcje wprowadzone w artykule programowania programu ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="d4dc2-113">These are the ASP.NET programming features introduced in the article:</span></span>
> 
> - <span data-ttu-id="d4dc2-114">`File` Obiektu, który umożliwia zarządzanie plikami.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-114">The `File` object, which provides a way to manage files.</span></span>
> - <span data-ttu-id="d4dc2-115">`FileUpload` Pomocnika.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-115">The `FileUpload` helper.</span></span>
> - <span data-ttu-id="d4dc2-116">`Path` Obiektu, który udostępnia metody, które pozwala manipulować ścieżkę i nazwy plików.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-116">The `Path` object, which provides methods that let you manipulate path and file names.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="d4dc2-117">Wersje oprogramowania używanego w tym samouczku</span><span class="sxs-lookup"><span data-stu-id="d4dc2-117">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="d4dc2-118">ASP.NET Web Pages (Razor) 2</span><span class="sxs-lookup"><span data-stu-id="d4dc2-118">ASP.NET Web Pages (Razor) 2</span></span>
> - <span data-ttu-id="d4dc2-119">WebMatrix 2</span><span class="sxs-lookup"><span data-stu-id="d4dc2-119">WebMatrix 2</span></span>
>   
> 
> <span data-ttu-id="d4dc2-120">W tym samouczku współpracuje również z programu WebMatrix 3.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-120">This tutorial also works with WebMatrix 3.</span></span>

<a id="Creating_a_Text_File"></a>
## <a name="creating-a-text-file-and-writing-data-to-it"></a><span data-ttu-id="d4dc2-121">Tworzenie pliku tekstowego i zapisywania danych</span><span class="sxs-lookup"><span data-stu-id="d4dc2-121">Creating a Text File and Writing Data to It</span></span>

<span data-ttu-id="d4dc2-122">Oprócz używania bazy danych w witrynie sieci Web, mogą pracować z plikami.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-122">In addition to using a database in your website, you might work with files.</span></span> <span data-ttu-id="d4dc2-123">Na przykład może używać plików tekstowych jako prosty sposób przechowywania danych dla tej witryny.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-123">For example, you might use text files as a simple way to store data for the site.</span></span> <span data-ttu-id="d4dc2-124">(Plik tekstowy, który jest używany do przechowywania danych jest czasami nazywane *pliku prostego*.) Pliki tekstowe mogą być w różnych formatach, na przykład *.txt*, *.xml*, lub *CSV* (wartości rozdzielane przecinkami).</span><span class="sxs-lookup"><span data-stu-id="d4dc2-124">(A text file that's used to store data is sometimes called a *flat file*.) Text files can be in different formats, like *.txt*, *.xml*, or *.csv* (comma-delimited values).</span></span>

<span data-ttu-id="d4dc2-125">Jeśli chcesz przechowywać dane w pliku tekstowym, możesz użyć `File.WriteAllText` metodę, aby określić plik, aby utworzyć i zapisanie w nim dane.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-125">If you want to store data in a text file, you can use the `File.WriteAllText` method to specify the file to create and the data to write to it.</span></span> <span data-ttu-id="d4dc2-126">W tej procedurze utworzysz strony, który zawiera prosty formularz z trzema `input` elementów (pól Imię, nazwisko i adres e-mail) i **przesyłania** przycisku.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-126">In this procedure, you'll create a page that contains a simple form with three `input` elements (first name, last name, and email address) and a **Submit** button.</span></span> <span data-ttu-id="d4dc2-127">Gdy użytkownik przesyła formularz, będzie przechowywać dane wejściowe użytkownika w pliku tekstowym.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-127">When the user submits the form, you'll store the user's input in a text file.</span></span>

1. <span data-ttu-id="d4dc2-128">Utwórz nowy folder o nazwie *aplikacji\_danych*, jeśli nie już istnieje.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-128">Create a new folder named *App\_Data*, if it doesn't exist already.</span></span>
2. <span data-ttu-id="d4dc2-129">W katalogu głównym witryny sieci Web, Utwórz nowy plik o nazwie *UserData.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-129">At the root of your website, create a new file named *UserData.cshtml*.</span></span>
3. <span data-ttu-id="d4dc2-130">Zastąp istniejącą zawartość następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="d4dc2-130">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample1.cshtml)]

    <span data-ttu-id="d4dc2-131">Kod znaczników HTML tworzy formularz z pól tekstowych trzy.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-131">The HTML markup creates the form with the three text boxes.</span></span> <span data-ttu-id="d4dc2-132">W kodzie, należy użyć `IsPost` właściwości w celu określenia, czy strony zostały przesłane, przed rozpoczęciem przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-132">In the code, you use the `IsPost` property to determine whether the page has been submitted before you start processing.</span></span>

    <span data-ttu-id="d4dc2-133">Pierwsze zadanie jest pobrać dane wejściowe użytkownika i przypisz je do zmiennych.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-133">The first task is to get the user input and assign it to variables.</span></span> <span data-ttu-id="d4dc2-134">Kod następnie łączy wartości zmiennych oddzielne w jeden ciąg rozdzielonych przecinkami, który następnie jest przechowywany w innej zmiennej.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-134">The code then concatenates the values of the separate variables into one comma-delimited string, which is then stored in a different variable.</span></span> <span data-ttu-id="d4dc2-135">Należy zauważyć, że przecinka jako separatora jest ciągiem zawarte w znaki cudzysłowu (","), ponieważ przecinek dosłownie osadzasz w dużych ciąg, który tworzysz.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-135">Notice that the comma separator is a string contained in quotation marks (","), because you're literally embedding a comma into the big string that you're creating.</span></span> <span data-ttu-id="d4dc2-136">Na końcu danych, które mają zostać połączone, możesz dodać `Environment.NewLine`.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-136">At the end of the data that you concatenate together, you add `Environment.NewLine`.</span></span> <span data-ttu-id="d4dc2-137">Spowoduje to dodanie podział wiersza (znak nowego wiersza).</span><span class="sxs-lookup"><span data-stu-id="d4dc2-137">This adds a line break (a newline character).</span></span> <span data-ttu-id="d4dc2-138">Tworzysz przy użyciu wszystkich to połączenie jest ciągiem, który wygląda w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="d4dc2-138">What you're creating with all this concatenation is a string that looks like this:</span></span>

    [!code-css[Main](working-with-files/samples/sample2.css)]

    <span data-ttu-id="d4dc2-139">(Przy użyciu niewidocznej podziału wiersza na końcu.)</span><span class="sxs-lookup"><span data-stu-id="d4dc2-139">(With an invisible line break at the end.)</span></span>

    <span data-ttu-id="d4dc2-140">Następnie Utwórz zmienną (`dataFile`) zawierający lokalizację i nazwę pliku do przechowywania danych.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-140">You then create a variable (`dataFile`) that contains the location and name of the file to store the data in.</span></span> <span data-ttu-id="d4dc2-141">Ustawianie lokalizacji wymaga pewnych specjalnej obsługi.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-141">Setting the location requires some special handling.</span></span> <span data-ttu-id="d4dc2-142">W witrynach sieci Web, jest złym zwyczajem się w kodzie do ścieżki bezwzględnej, jak *C:\Folder\File.txt* dla plików na serwerze sieci web.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-142">In websites, it's a bad practice to refer in code to absolute paths like *C:\Folder\File.txt* for files on the web server.</span></span> <span data-ttu-id="d4dc2-143">Jeśli witryna sieci Web zostanie przeniesiony, ścieżka bezwzględna będą nieprawidłowe.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-143">If a website is moved, an absolute path will be wrong.</span></span> <span data-ttu-id="d4dc2-144">Ponadto hostowanej witryny (a nie na swoim komputerze) należy zwykle nawet prawidłowej ścieżki jest nieznana podczas pisania kodu.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-144">Moreover, for a hosted site (as opposed to on your own computer) you typically don't even know what the correct path is when you're writing the code.</span></span>

    <span data-ttu-id="d4dc2-145">Jednak czasami (np. teraz do zapisywania pliku) należy pełną ścieżkę.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-145">But sometimes (like now, for writing a file) you do need a complete path.</span></span> <span data-ttu-id="d4dc2-146">Rozwiązaniem jest użycie `MapPath` metody `Server` obiektu.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-146">The solution is to use the `MapPath` method of the `Server` object.</span></span> <span data-ttu-id="d4dc2-147">Spowoduje to zwrócenie pełnej ścieżki do witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-147">This returns the complete path to your website.</span></span> <span data-ttu-id="d4dc2-148">Aby pobrać ścieżkę do katalogu głównego witryny sieci Web, użytkownik zostanie `~` — operator (do represen lokacji użytkownika wirtualnego katalogu głównego) do `MapPath`.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-148">To get the path for the website root, you user the `~` operator (to represen the site's virtual root) to `MapPath`.</span></span> <span data-ttu-id="d4dc2-149">(Można również przekazać nazwę podfolderu, takich jak *~/App\_danych /* , aby pobrać ścieżkę do tego podfolderu.) Można następnie łączyć ze sobą dodatkowe informacje na zwraca niezależnie od metody, aby można było utworzyć pełną ścieżkę.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-149">(You can also pass a subfolder name to it, like *~/App\_Data/*, to get the path for that subfolder.) You can then concatenate additional information onto whatever the method returns in order to create a complete path.</span></span> <span data-ttu-id="d4dc2-150">W tym przykładzie należy dodać nazwę pliku.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-150">In this example, you add a file name.</span></span> <span data-ttu-id="d4dc2-151">(Możesz dowiedzieć się więcej o tym, jak pracować z ścieżek plików i folderów w [wprowadzenie do platformy ASP.NET Web Pages programowania z użyciem składni Razor](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span><span class="sxs-lookup"><span data-stu-id="d4dc2-151">(You can read more about how to work with file and folder paths in [Introduction to ASP.NET Web Pages Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span></span>

    <span data-ttu-id="d4dc2-152">Plik jest zapisywany w *aplikacji\_danych* folderu.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-152">The file is saved in the *App\_Data* folder.</span></span> <span data-ttu-id="d4dc2-153">Ten folder jest na platformie ASP.NET, który jest używany do przechowywania plików danych, zgodnie z opisem w folderze specjalnym [wprowadzenie do pracy z bazą danych w witrynach stron sieci Web platformy ASP.NET](https://go.microsoft.com/fwlink/?LinkId=195209).</span><span class="sxs-lookup"><span data-stu-id="d4dc2-153">This folder is a special folder in ASP.NET that's used to store data files, as described in [Introduction to Working with a Database in ASP.NET Web Pages Sites](https://go.microsoft.com/fwlink/?LinkId=195209).</span></span>

    <span data-ttu-id="d4dc2-154">`WriteAllText` Metody `File` obiekt zapisuje dane do pliku.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-154">The `WriteAllText` method of the `File` object writes the data to the file.</span></span> <span data-ttu-id="d4dc2-155">Ta metoda przyjmuje dwa parametry: Nazwa (ze ścieżką) pliku do zapisu i rzeczywistego dane do zapisania.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-155">This method takes two parameters: the name (with path) of the file to write to, and the actual data to write.</span></span> <span data-ttu-id="d4dc2-156">Należy zauważyć, że nazwa pierwszego parametru ma `@` znak jako prefiksu.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-156">Notice that the name of the first parameter has an `@` character as a prefix.</span></span> <span data-ttu-id="d4dc2-157">To informuje program ASP.NET, że udostępniasz verbatim literał ciągu znaków i znaków, takich jak "/" nie mogą być traktowane w specjalny sposób.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-157">This tells ASP.NET that you're providing a verbatim string literal, and that characters like "/" should not be interpreted in special ways.</span></span> <span data-ttu-id="d4dc2-158">(Aby uzyskać więcej informacji, zobacz [wprowadzenie do platformy ASP.NET sieci Web programowania z użyciem składni Razor](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span><span class="sxs-lookup"><span data-stu-id="d4dc2-158">(For more information, see [Introduction to ASP.NET Web Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span></span>

    > [!NOTE]
    > <span data-ttu-id="d4dc2-159">W kolejności, w kodzie zapisać plik w *aplikacji\_danych* folderu, aplikacja musi odczytu i zapisu uprawnienia do tego folderu.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-159">In order for your code to save files in the *App\_Data* folder, the application needs read-write permissions for that folder.</span></span> <span data-ttu-id="d4dc2-160">Na komputerze deweloperskim to nie jest zazwyczaj problem.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-160">On your development computer this is not typically an issue.</span></span> <span data-ttu-id="d4dc2-161">Jednak podczas publikowania witryny dostawcy hostingu serwera sieci web, konieczne może być jawnie ustawić te uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-161">However, when you publish your site to a hosting provider's web server, you might need to explicitly set those permissions.</span></span> <span data-ttu-id="d4dc2-162">Jeśli możesz uruchomić ten kod na serwerze dostawcy hostingu i występują błędy, skontaktuj się z dostawcy hostingu, aby dowiedzieć się, jak ustawić te uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-162">If you run this code on a hosting provider's server and get errors, check with the hosting provider to find out how to set those permissions.</span></span>

- <span data-ttu-id="d4dc2-163">Uruchom stronę w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-163">Run the page in a browser.</span></span> 

    ![](working-with-files/_static/image1.jpg)
- <span data-ttu-id="d4dc2-164">Wprowadź wartości w polach, a następnie kliknij przycisk **przesyłania**.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-164">Enter values into the fields and then click **Submit**.</span></span>
- <span data-ttu-id="d4dc2-165">Zamknij przeglądarkę.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-165">Close the browser.</span></span>
- <span data-ttu-id="d4dc2-166">Wróć do projektu, a następnie Odśwież widok.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-166">Return to the project and refresh the view.</span></span>
- <span data-ttu-id="d4dc2-167">Otwórz *data.txt* pliku.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-167">Open the *data.txt* file.</span></span> <span data-ttu-id="d4dc2-168">Dane, przesłanych w formularzu znajdują się w pliku.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-168">The data you submitted in the form is in the file.</span></span> 

    ![[image]](working-with-files/_static/image2.jpg)
- <span data-ttu-id="d4dc2-170">Zamknij *data.txt* pliku.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-170">Close the *data.txt* file.</span></span>

<a id="Appending_Data"></a>
## <a name="appending-data-to-an-existing-file"></a><span data-ttu-id="d4dc2-171">Dołączanie danych do istniejącego pliku</span><span class="sxs-lookup"><span data-stu-id="d4dc2-171">Appending Data to an Existing File</span></span>

<span data-ttu-id="d4dc2-172">W poprzednim przykładzie użyto `WriteAllText` utworzyć plik tekstowy, który ma stało się w niej tylko jednego elementu danych.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-172">In the previous example, you used `WriteAllText` to create a text file that's got just one piece of data in it.</span></span> <span data-ttu-id="d4dc2-173">Jeśli ponownie wywołaj metodę i przekazać go taką samą nazwę, istniejący plik jest całkowicie zastąpiony.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-173">If you call the method again and pass it the same file name, the existing file is completely overwritten.</span></span> <span data-ttu-id="d4dc2-174">Jednak po utworzeniu pliku często chcesz dodać nowe dane do końca pliku.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-174">However, after you've created a file you often want to add new data to the end of the file.</span></span> <span data-ttu-id="d4dc2-175">Możesz zrobić, przy użyciu `AppendAllText` metody `File` obiektu.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-175">You can do that using the `AppendAllText` method of the `File` object.</span></span>

1. <span data-ttu-id="d4dc2-176">W witrynie sieci Web, należy utworzyć kopię *UserData.cshtml* pliku i nazwę kopii *UserDataMultiple.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-176">In the website, make a copy of the *UserData.cshtml* file and name the copy *UserDataMultiple.cshtml*.</span></span>
2. <span data-ttu-id="d4dc2-177">Zastąp blok kodu, przed otwarciem `<!DOCTYPE html>` tag z następującym fragmencie kodu:</span><span class="sxs-lookup"><span data-stu-id="d4dc2-177">Replace the code block before the opening `<!DOCTYPE html>` tag with the following code block:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample3.cshtml)]

    <span data-ttu-id="d4dc2-178">Ten kod zawiera jedną zmianę w poprzednim przykładzie.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-178">This code has one change in it from the previous example.</span></span> <span data-ttu-id="d4dc2-179">Zamiast używania `WriteAllText`, używa ona `the AppendAllText` metody.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-179">Instead of using `WriteAllText`, it uses `the AppendAllText` method.</span></span> <span data-ttu-id="d4dc2-180">Metody są podobne, z tą różnicą, że `AppendAllText` dodaje dane na końcu pliku.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-180">The methods are similar, except that `AppendAllText` adds the data to the end of the file.</span></span> <span data-ttu-id="d4dc2-181">Podobnie jak w przypadku `WriteAllText`, `AppendAllText` tworzy plik jeśli jeszcze nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-181">As with `WriteAllText`, `AppendAllText` creates the file if it doesn't already exist.</span></span>
3. <span data-ttu-id="d4dc2-182">Uruchom stronę w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-182">Run the page in a browser.</span></span>
4. <span data-ttu-id="d4dc2-183">Wprowadź wartości w polach, a następnie kliknij przycisk **przesyłania**.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-183">Enter values for the fields and then click **Submit**.</span></span>
5. <span data-ttu-id="d4dc2-184">Dodawanie większej ilości danych i ponownie Prześlij formularz.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-184">Add more data and submit the form again.</span></span>
6. <span data-ttu-id="d4dc2-185">Wróć do projektu, kliknij prawym przyciskiem myszy folder projektu, a następnie kliknij **Odśwież**.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-185">Return to your project, right-click the project folder, and then click **Refresh**.</span></span>
7. <span data-ttu-id="d4dc2-186">Otwórz *data.txt* pliku.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-186">Open the *data.txt* file.</span></span> <span data-ttu-id="d4dc2-187">Zawiera teraz nowe dane, które wprowadziłeś.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-187">It now contains the new data that you just entered.</span></span> 

    ![[image]](working-with-files/_static/image3.jpg)

<a id="Reading_and_Displaying_Data"></a>
## <a name="reading-and-displaying-data-from-a-file"></a><span data-ttu-id="d4dc2-189">Odczytywanie i wyświetlanie danych z pliku</span><span class="sxs-lookup"><span data-stu-id="d4dc2-189">Reading and Displaying Data from a File</span></span>

<span data-ttu-id="d4dc2-190">Nawet wtedy, gdy nie ma potrzeby zapisywania danych do pliku tekstowego, należy prawdopodobnie czasami odczytywać dane z jednego.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-190">Even if you don't need to write data to a text file, you'll probably sometimes need to read data from one.</span></span> <span data-ttu-id="d4dc2-191">Aby to zrobić, należy ponownie użyć `File` obiektu.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-191">To do this, you can again use the `File` object.</span></span> <span data-ttu-id="d4dc2-192">Możesz użyć `File` obiektu do odczytania indywidualnie każdy wiersz (rozdzielonych przez podziały wiersza) lub do odczytania pojedynczych elementów niezależnie od tego, w jaki sposób są oddzielone.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-192">You can use the `File` object to read each line individually (separated by line breaks) or to read individual item no matter how they're separated.</span></span>

<span data-ttu-id="d4dc2-193">Ta procedura pokazuje, jak odczytywać i wyświetlić dane, który został utworzony w poprzednim przykładzie.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-193">This procedure shows you how to read and display the data that you created in the previous example.</span></span>

1. <span data-ttu-id="d4dc2-194">W katalogu głównym witryny sieci Web, Utwórz nowy plik o nazwie *DisplayData.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-194">At the root of your website, create a new file named *DisplayData.cshtml*.</span></span>
2. <span data-ttu-id="d4dc2-195">Zastąp istniejącą zawartość następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="d4dc2-195">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample4.cshtml)]

    <span data-ttu-id="d4dc2-196">Kod, który rozpoczyna się od odczytu pliku, który został utworzony w poprzednim przykładzie w zmiennej o nazwie `userData`, za pomocą wywołanie tej metody:</span><span class="sxs-lookup"><span data-stu-id="d4dc2-196">The code starts by reading the file that you created in the previous example into a variable named `userData`, using this method call:</span></span>

    [!code-css[Main](working-with-files/samples/sample5.css)]

    <span data-ttu-id="d4dc2-197">Kod w tym celu znajduje się wewnątrz `if` instrukcji.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-197">The code to do this is inside an `if` statement.</span></span> <span data-ttu-id="d4dc2-198">Jeśli chcesz odczytać plik jest dobry pomysł, aby użyć `File.Exists` metodę, aby najpierw sprawdzić, czy plik jest dostępny.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-198">When you want to read a file, it's a good idea to use the `File.Exists` method to determine first whether the file is available.</span></span> <span data-ttu-id="d4dc2-199">Kod sprawdza również, czy plik jest pusty.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-199">The code also checks whether the file is empty.</span></span>

    <span data-ttu-id="d4dc2-200">Treść strony zawiera dwa `foreach` w pętli, jeden zagnieżdżone wewnątrz innych.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-200">The body of the page contains two `foreach` loops, one nested inside the other.</span></span> <span data-ttu-id="d4dc2-201">Zewnętrzny `foreach` pętla przechodzi jeden wiersz jednocześnie z pliku danych.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-201">The outer `foreach` loop gets one line at a time from the data file.</span></span> <span data-ttu-id="d4dc2-202">W tym przypadku wiersze są definiowane przez podziały wierszy w pliku &#8212; każdy element danych jest w osobnym wierszu.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-202">In this case, the lines are defined by line breaks in the file &#8212; that is, each data item is on its own line.</span></span> <span data-ttu-id="d4dc2-203">Zewnętrzna Pętla tworzy nowy element (`<li>` elementu) wewnątrz listy uporządkowanej (`<ol>` elementu).</span><span class="sxs-lookup"><span data-stu-id="d4dc2-203">The outer loop creates a new item (`<li>` element) inside an ordered list (`<ol>` element).</span></span>

    <span data-ttu-id="d4dc2-204">Wewnętrzną pętlę dzieli każdy wiersz danych na elementy (pola), za pomocą przecinka jako ogranicznik.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-204">The inner loop splits each data line into items (fields) using a comma as a delimiter.</span></span> <span data-ttu-id="d4dc2-205">(Na podstawie poprzedniego przykładu, oznacza to, że każdy wiersz zawiera trzy pola &#8212; imię, nazwisko i adres e-mail, każda jest oddzielona przecinkiem.) Tworzy również wewnętrzną pętlę `<ul>` listy i wyświetla listę jednego elementu dla każdego pola w wierszu danych.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-205">(Based on the previous example, this means that each line contains three fields &#8212; the first name, last name, and email address, each separated by a comma.) The inner loop also creates a `<ul>` list and displays one list item for each field in the data line.</span></span>

    <span data-ttu-id="d4dc2-206">Kod ilustruje sposób użycia dwa typy danych, tablicy i `char` typu danych.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-206">The code illustrates how to use two data types, an array and the `char` data type.</span></span> <span data-ttu-id="d4dc2-207">Tablica jest wymagana, ponieważ `File.ReadAllLines` metoda zwraca dane jako tabelę.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-207">The array is required because the `File.ReadAllLines` method returns data as an array.</span></span> <span data-ttu-id="d4dc2-208">`char` Typ danych jest wymagany, ponieważ `Split` metoda zwraca `array` w której każdy element jest typu `char`.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-208">The `char` data type is required because the `Split` method returns an `array` in which each element is of the type `char`.</span></span> <span data-ttu-id="d4dc2-209">(Aby uzyskać informacje na temat tablic, zobacz [wprowadzenie do platformy ASP.NET sieci Web programowania z użyciem składni Razor](https://go.microsoft.com/fwlink/?LinkId=202890#ID_CollectionsAndObjects).)</span><span class="sxs-lookup"><span data-stu-id="d4dc2-209">(For information about arrays, see [Introduction to ASP.NET Web Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=202890#ID_CollectionsAndObjects).)</span></span>
3. <span data-ttu-id="d4dc2-210">Uruchom stronę w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-210">Run the page in a browser.</span></span> <span data-ttu-id="d4dc2-211">Dane, wprowadzonych w poprzednich przykładach są wyświetlane.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-211">The data you entered for the previous examples is displayed.</span></span> 

    ![[image]](working-with-files/_static/image4.jpg)

> [!TIP] 
> 
> <span data-ttu-id="d4dc2-213">**Wyświetlanie danych z pliku rozdzielanego przecinkami programu Microsoft Excel**</span><span class="sxs-lookup"><span data-stu-id="d4dc2-213">**Displaying Data from a Microsoft Excel Comma-Delimited File**</span></span>
> 
> <span data-ttu-id="d4dc2-214">Można użyć programu Microsoft Excel, można zapisać danych zawartych w arkuszu kalkulacyjnym jako pliku rozdzielanego przecinkami (*CSV* pliku).</span><span class="sxs-lookup"><span data-stu-id="d4dc2-214">You can use Microsoft Excel to save the data contained in a spreadsheet as a comma-delimited file (*.csv* file).</span></span> <span data-ttu-id="d4dc2-215">Po wykonaniu, plik jest zapisywany w postaci zwykłego tekstu, a nie w formacie programu Excel.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-215">When you do, the file is saved in plain text, not in Excel format.</span></span> <span data-ttu-id="d4dc2-216">Każdy wiersz w arkuszu kalkulacyjnym jest rozdzielonych przez podziały wiersza w pliku tekstowym, a każdy element danych jest oddzielona przecinkiem.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-216">Each row in the spreadsheet is separated by a line break in the text file, and each data item is separated by a comma.</span></span> <span data-ttu-id="d4dc2-217">Kod przedstawiony w poprzednim przykładzie służy do odczytu z pliku rozdzielanego przecinkami programu Excel po prostu zmieniając nazwę pliku danych w kodzie.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-217">You can use the code shown in the previous example to read an Excel comma-delimited file just by changing the name of the data file in your code.</span></span>

<a id="Deleting_Files"></a>
## <a name="deleting-files"></a><span data-ttu-id="d4dc2-218">Usuwanie plików</span><span class="sxs-lookup"><span data-stu-id="d4dc2-218">Deleting Files</span></span>

<span data-ttu-id="d4dc2-219">Aby usunąć pliki z witryny sieci Web, można użyć `File.Delete` metody.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-219">To delete files from your website, you can use the `File.Delete` method.</span></span> <span data-ttu-id="d4dc2-220">Za pomocą poniższej procedury zezwolić użytkownikom na usuwanie obrazu ( *.jpg* plik) z *obrazów* folderu, jeśli znają nazwę pliku.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-220">This procedure shows how to let users delete an image (*.jpg* file) from an *images* folder if they know the name of the file.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="d4dc2-221">**Ważne** w produkcyjnej witrynie internetowej można zwykle ograniczają kto ma prawo do wprowadzania zmian w danych.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-221">**Important** In a production website, you typically restrict who's allowed to make changes to the data.</span></span> <span data-ttu-id="d4dc2-222">Aby uzyskać informacje dotyczące sposobu konfigurowania członkostwa i sposobów autoryzacji użytkowników do wykonywania zadań w lokacji, zobacz [Dodawanie zabezpieczeń i członkostwa w witrynie ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=202904).</span><span class="sxs-lookup"><span data-stu-id="d4dc2-222">For information about how to set up membership and about ways to authorize users to perform tasks on the site, see [Adding Security and Membership to an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202904).</span></span>

1. <span data-ttu-id="d4dc2-223">W witrynie sieci Web, utwórz podfolder o nazwie *obrazów*.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-223">In the website, create a subfolder named *images*.</span></span>
2. <span data-ttu-id="d4dc2-224">Kopiuj co najmniej jeden *.jpg* pliki do *obrazów* folderu.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-224">Copy one or more *.jpg* files into the *images* folder.</span></span>
3. <span data-ttu-id="d4dc2-225">W katalogu głównym witryny sieci Web, Utwórz nowy plik o nazwie *FileDelete.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-225">In the root of the website, create a new file named *FileDelete.cshtml*.</span></span>
4. <span data-ttu-id="d4dc2-226">Zastąp istniejącą zawartość następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="d4dc2-226">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample6.cshtml)]

    <span data-ttu-id="d4dc2-227">Ta strona zawiera formularza, w którym użytkownik może wprowadzić nazwę pliku obrazu.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-227">This page contains a form where users can enter the name of an image file.</span></span> <span data-ttu-id="d4dc2-228">Użytkownik nie podał *.jpg* rozszerzenia nazwy pliku; ograniczając nazwę pliku, tak, możesz uzyskać pomoc uniemożliwia użytkownikom usuwanie dowolnych plików w witrynie.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-228">They don't enter the *.jpg* file-name extension; by restricting the file name like this, you help prevents users from deleting arbitrary files on your site.</span></span>

    <span data-ttu-id="d4dc2-229">Kod odczytuje nazwę pliku, że użytkownik wprowadził i następnie tworzy pełną ścieżkę.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-229">The code reads the file name that the user has entered and then constructs a complete path.</span></span> <span data-ttu-id="d4dc2-230">Aby utworzyć ścieżkę, kod używa bieżącej ścieżki witryny sieci Web (zwrócone przez `Server.MapPath` metoda), *obrazów* nazwę folderu, nazwę, która użytkownik udostępnił i ".jpg" jako ciąg literału.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-230">To create the path, the code uses the current website path (as returned by the `Server.MapPath` method), the *images* folder name, the name that the user has provided, and ".jpg" as a literal string.</span></span>

    <span data-ttu-id="d4dc2-231">Można usunąć pliku, kod wywołuje `File.Delete` metody przekazanie jej pełną ścieżkę, która po prostu skonstruowany.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-231">To delete the file, the code calls the `File.Delete` method, passing it the full path that you just constructed.</span></span> <span data-ttu-id="d4dc2-232">Na końcu znaczników kod wyświetla komunikat potwierdzający, że plik został usunięty.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-232">At the end of the markup, code displays a confirmation message that the file was deleted.</span></span>
5. <span data-ttu-id="d4dc2-233">Uruchom stronę w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-233">Run the page in a browser.</span></span> 

    ![[image]](working-with-files/_static/image5.jpg)
6. <span data-ttu-id="d4dc2-235">Wprowadź nazwę pliku do usunięcia, a następnie kliknij przycisk **przesyłania**.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-235">Enter the name of the file to delete and then click **Submit**.</span></span> <span data-ttu-id="d4dc2-236">Jeśli plik został usunięty, nazwa pliku jest wyświetlane w dolnej części strony.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-236">If the file was deleted, the name of the file is displayed at the bottom of the page.</span></span>

<a id="Letting_Users_Upload_a_File"></a>
## <a name="letting-users-upload-a-file"></a><span data-ttu-id="d4dc2-237">Dzięki czemu użytkownicy przekazywania pliku</span><span class="sxs-lookup"><span data-stu-id="d4dc2-237">Letting Users Upload a File</span></span>

<span data-ttu-id="d4dc2-238">`FileUpload` Pomocnika umożliwia użytkownikom przekazywanie plików do witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-238">The `FileUpload` helper lets users upload files to your website.</span></span> <span data-ttu-id="d4dc2-239">Poniższa procedura pokazuje, jak umożliwić użytkownikom przekazać jeden plik.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-239">The procedure below shows you how to let users upload a single file.</span></span>

1. <span data-ttu-id="d4dc2-240">Dodaj bibliotekę pomocników platformy ASP.NET sieci Web do witryny sieci Web, zgodnie z opisem w [instalowanie obiekty pomocnicze w witrynie ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=252372), jeśli użytkownik nie został dodany wcześniej.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-240">Add the ASP.NET Web Helpers Library to your website as described in [Installing Helpers in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=252372), if you didn't add it previously.</span></span>
2. <span data-ttu-id="d4dc2-241">W *aplikacji\_danych* folderu, Utwórz nowy folder i nadaj mu nazwę *UploadedFiles*.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-241">In the *App\_Data* folder, create a new a folder and name it *UploadedFiles*.</span></span>
3. <span data-ttu-id="d4dc2-242">W katalogu głównym, Utwórz nowy plik o nazwie *FileUpload.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-242">In the root, create a new file named *FileUpload.cshtml*.</span></span>
4. <span data-ttu-id="d4dc2-243">Zastąp istniejącą zawartość na stronie następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="d4dc2-243">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample7.cshtml)]

    <span data-ttu-id="d4dc2-244">Korzysta z części treści strony `FileUpload` element pomocniczy służący do tworzenia okno przekazywania i przyciski, które znasz prawdopodobnie:</span><span class="sxs-lookup"><span data-stu-id="d4dc2-244">The body portion of the page uses the `FileUpload` helper to create the upload box and buttons that you're probably familiar with:</span></span>

    ![[image]](working-with-files/_static/image6.jpg)

    <span data-ttu-id="d4dc2-246">Właściwości, które można ustawić dla `FileUpload` pomocnika określić, czy pojedyncze pole, aby uzyskać plik do przekazania i mają przycisk Prześlij, aby przeczytać **przekazywanie**.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-246">The properties that you set for the `FileUpload` helper specify that you want a single box for the file to upload and that you want the submit button to read **Upload**.</span></span> <span data-ttu-id="d4dc2-247">(Należy dodać więcej pól w dalszej części tego artykułu.)</span><span class="sxs-lookup"><span data-stu-id="d4dc2-247">(You'll add more boxes later in the article.)</span></span>

    <span data-ttu-id="d4dc2-248">Kiedy użytkownik kliknie **przekazywanie**, kod w górnej części strony pobiera plik i zapisuje go.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-248">When the user clicks **Upload**, the code at the top of the page gets the file and saves it.</span></span> <span data-ttu-id="d4dc2-249">`Request` Obiekt, który umożliwia zwykle pobierają wartości z pól formularza również ma `Files` tablicę, która zawiera plik (lub pliki) zostały przekazane.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-249">The `Request` object that you normally use to get values from form fields also has a `Files` array that contains the file (or files) that have been uploaded.</span></span> <span data-ttu-id="d4dc2-250">Możesz uzyskać pojedyncze pliki z określonych pozycji w tablicy &#8212; na przykład, aby uzyskać pierwszy przekazany plik, możesz pobrać `Request.Files[0]`, aby uzyskać drugi plik otrzymasz `Request.Files[1]`i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-250">You can get individual files out of specific positions in the array &#8212; for example, to get the first uploaded file, you get `Request.Files[0]`, to get the second file, you get `Request.Files[1]`, and so on.</span></span> <span data-ttu-id="d4dc2-251">(Należy pamiętać, że w programowaniu zliczanie zwykle zaczyna się od zera).</span><span class="sxs-lookup"><span data-stu-id="d4dc2-251">(Remember that in programming, counting usually starts at zero.)</span></span>

    <span data-ttu-id="d4dc2-252">Po pobraniu przekazany plik, można umieścić w zmiennej (w tym miejscu `uploadedFile`), dzięki czemu można manipulować go.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-252">When you fetch an uploaded file, you put it in a variable (here, `uploadedFile`) so that you can manipulate it.</span></span> <span data-ttu-id="d4dc2-253">Aby określić nazwę przekazanego pliku, po prostu otrzymasz jego `FileName` właściwości.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-253">To determine the name of the uploaded file, you just get its `FileName` property.</span></span> <span data-ttu-id="d4dc2-254">Jednak po użytkownik służy do przekazywania pliku, `FileName` zawiera oryginalna nazwa użytkownika, który zawiera pełną ścieżkę.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-254">However, when the user uploads a file, `FileName` contains the user's original name, which includes the entire path.</span></span> <span data-ttu-id="d4dc2-255">Jego może wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="d4dc2-255">It might look like this:</span></span>

    <span data-ttu-id="d4dc2-256">*C:\Users\Public\Sample.txt*</span><span class="sxs-lookup"><span data-stu-id="d4dc2-256">*C:\Users\Public\Sample.txt*</span></span>

    <span data-ttu-id="d4dc2-257">Nie chcesz tych informacji ścieżki, ponieważ jest to ścieżka na komputerze użytkownika, nie dla serwera.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-257">You don't want all that path information, though, because that's the path on the user's computer, not for your server.</span></span> <span data-ttu-id="d4dc2-258">Po prostu chcesz rzeczywiste nazwy plików (*przykład.txt*).</span><span class="sxs-lookup"><span data-stu-id="d4dc2-258">You just want the actual file name (*Sample.txt*).</span></span> <span data-ttu-id="d4dc2-259">Po prostu pliku ze ścieżki mogą odłączenia przy użyciu `Path.GetFileName` metoda następująco:</span><span class="sxs-lookup"><span data-stu-id="d4dc2-259">You can strip out just the file from a path by using the `Path.GetFileName` method, like this:</span></span>

    [!code-csharp[Main](working-with-files/samples/sample8.cs)]

    <span data-ttu-id="d4dc2-260">`Path` Obiektu to narzędzie, które ma kilka metod, takich jak ta, używanej do paska ścieżki, łączenia ścieżek i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-260">The `Path` object is a utility that has a number of methods like this that you can use to strip paths, combine paths, and so on.</span></span>

    <span data-ttu-id="d4dc2-261">Po trafiła do Ciebie nazwa przekazany plik, możesz utworzyć nową ścieżkę dla której chcesz przechowywać przekazanego pliku w witrynie sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-261">Once you've gotten the name of the uploaded file, you can build a new path for where you want to store the uploaded file in your website.</span></span> <span data-ttu-id="d4dc2-262">W takim przypadku możesz połączyć `Server.MapPath`, nazwy folderów (*aplikacji\_danych/UploadedFiles*) i nazwę nowo usuniętych plików, aby utworzyć nową ścieżkę.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-262">In this case, you combine `Server.MapPath`, the folder names (*App\_Data/UploadedFiles*), and the newly stripped file name to create a new path.</span></span> <span data-ttu-id="d4dc2-263">Następnie możesz wywołać przekazanego pliku `SaveAs` metodę, aby faktycznie Zapisz plik.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-263">You can then call the uploaded file's `SaveAs` method to actually save the file.</span></span>
5. <span data-ttu-id="d4dc2-264">Uruchom stronę w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-264">Run the page in a browser.</span></span> 

    ![[image]](working-with-files/_static/image7.jpg)
6. <span data-ttu-id="d4dc2-266">Kliknij przycisk **Przeglądaj** a następnie wybierz plik do przekazania.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-266">Click **Browse** and then select a file to upload.</span></span> 

    ![[image]](working-with-files/_static/image8.jpg)

    <span data-ttu-id="d4dc2-268">Pole tekstowe obok **Przeglądaj** przycisk będzie zawierać ścieżkę i lokalizacji.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-268">The text box next to the **Browse** button will contain the path and file location.</span></span>

    ![[image]](working-with-files/_static/image9.jpg)
7. <span data-ttu-id="d4dc2-270">Kliknij pozycję **Przekaż**.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-270">Click **Upload**.</span></span>
8. <span data-ttu-id="d4dc2-271">W witrynie sieci Web, kliknij prawym przyciskiem myszy folder projektu, a następnie kliknij przycisk **Odśwież**.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-271">In the website, right-click the project folder and then click **Refresh**.</span></span>
9. <span data-ttu-id="d4dc2-272">Otwórz *UploadedFiles* folderu.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-272">Open the *UploadedFiles* folder.</span></span> <span data-ttu-id="d4dc2-273">Przekazany plik znajduje się w folderze.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-273">The file that you uploaded is in the folder.</span></span> 

    ![[image]](working-with-files/_static/image10.jpg)

<a id="Letting_Users_Upload_Multiple_Files"></a>
## <a name="letting-users-upload-multiple-files"></a><span data-ttu-id="d4dc2-275">Umożliwienie użytkownikom przekazywanie wielu plików</span><span class="sxs-lookup"><span data-stu-id="d4dc2-275">Letting Users Upload Multiple Files</span></span>

<span data-ttu-id="d4dc2-276">W poprzednim przykładzie możesz zezwolić użytkownikom przekazać jeden plik.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-276">In the previous example, you let users upload one file.</span></span> <span data-ttu-id="d4dc2-277">Ale można użyć `FileUpload` element pomocniczy służący do przekazywania więcej niż jeden plik jednocześnie.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-277">But you can use the `FileUpload` helper to upload more than one file at a time.</span></span> <span data-ttu-id="d4dc2-278">Jest to przydatne w scenariuszach, takich jak przekazywanie zdjęć, gdzie jest niewygodna przekazywania jeden plik jednocześnie.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-278">This is handy for scenarios like uploading photos, where uploading one file at a time is tedious.</span></span> <span data-ttu-id="d4dc2-279">(Możesz przeczytać o przekazywania zdjęć w [Praca z obrazami w witrynie ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=202897).) Ten przykład pokazuje, jak umożliwić użytkownikom przekazywanie dwóch naraz, chociaż można używać tej samej techniki, można przekazać więcej niż.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-279">(You can read about uploading photos in [Working with Images in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202897).) This example shows how to let users upload two at a time, although you can use the same technique to upload more than that.</span></span>

1. <span data-ttu-id="d4dc2-280">Dodaj bibliotekę pomocników platformy ASP.NET sieci Web do witryny sieci Web, zgodnie z opisem w [instalowanie obiekty pomocnicze w witrynie ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=252372), jeśli jeszcze go.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-280">Add the ASP.NET Web Helpers Library to your website as described in [Installing Helpers in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=252372), if you haven't already.</span></span>
2. <span data-ttu-id="d4dc2-281">Utwórz nową stronę o nazwie *FileUploadMultiple.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-281">Create a new page named *FileUploadMultiple.cshtml*.</span></span>
3. <span data-ttu-id="d4dc2-282">Zastąp istniejącą zawartość na stronie następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="d4dc2-282">Replace the existing content in the page with the following:</span></span>  

    [!code-cshtml[Main](working-with-files/samples/sample9.cshtml)]

    <span data-ttu-id="d4dc2-283">W tym przykładzie `FileUpload` pomocnika w treści strony jest domyślnie skonfigurowana do zezwala użytkownikom na przekazywanie dwa pliki.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-283">In this example, the `FileUpload` helper in the body of the page is configured to let users upload two files by default.</span></span> <span data-ttu-id="d4dc2-284">Ponieważ `allowMoreFilesToBeAdded` ustawiono `true`, pomocnika renderuje łącze, które pozwala użytkownikowi na dodanie więcej pól przekazywania:</span><span class="sxs-lookup"><span data-stu-id="d4dc2-284">Because `allowMoreFilesToBeAdded` is set to `true`, the helper renders a link that lets user add more upload boxes:</span></span>

    ![[image]](working-with-files/_static/image11.jpg)

    <span data-ttu-id="d4dc2-286">Aby przetwarzać pliki, które przekazuje użytkownika, w kodzie za pomocą tej samej techniki podstawowe, które było używane w poprzednim przykładzie &#8212; pobieranie pliku z `Request.Files` i zapisz go.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-286">To process the files that the user uploads, the code uses the same basic technique that you used in the previous example &#8212; get a file from `Request.Files` and then save it.</span></span> <span data-ttu-id="d4dc2-287">(W tym różne elementy należy zrobić, aby uzyskać prawo nazwę i ścieżkę.) Wprowadzanie innowacji w tej chwili jest, czy użytkownik może przekazać wiele plików i nie wiesz, wiele.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-287">(Including the various things you need to do to get the right file name and path.) The innovation this time is that the user might be uploading multiple files and you don't know many.</span></span> <span data-ttu-id="d4dc2-288">Aby dowiedzieć się, możesz uzyskać `Request.Files.Count`.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-288">To find out, you can get `Request.Files.Count`.</span></span>

    <span data-ttu-id="d4dc2-289">Ten numer strony, można pętli `Request.Files`, z kolei pobierania każdego pliku i zapisz go.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-289">With this number in hand, you can loop through `Request.Files`, fetch each file in turn, and save it.</span></span> <span data-ttu-id="d4dc2-290">Sprzężenie znanych kilka razy w kolekcji, należy można użyć `for` pętli następująco:</span><span class="sxs-lookup"><span data-stu-id="d4dc2-290">When you want to loop a known number of times through a collection, you can use a `for` loop, like this:</span></span>

    [!code-csharp[Main](working-with-files/samples/sample10.cs)]

    <span data-ttu-id="d4dc2-291">Zmienna `i` to tylko tymczasowy licznik, który przechodzi od zera do dowolnych górny limit zostanie ustawiona.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-291">The variable `i` is just a temporary counter that will go from zero to whatever upper limit you set.</span></span> <span data-ttu-id="d4dc2-292">W tym przypadku górny limit jest to liczba plików.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-292">In this case, the upper limit is the number of files.</span></span> <span data-ttu-id="d4dc2-293">Jednak ponieważ licznik rozpoczyna się od zera, podobnie jak w typowej do zliczania scenariuszy dla platformy ASP.NET, górny limit jest faktycznie jeden mniejsza niż liczba plików.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-293">But because the counter starts at zero, as is typical for counting scenarios in ASP.NET, the upper limit is actually one less than the file count.</span></span> <span data-ttu-id="d4dc2-294">(Jeśli trzy pliki są przekazywane, liczba jest zero, 2).</span><span class="sxs-lookup"><span data-stu-id="d4dc2-294">(If three files are uploaded, the count is zero to 2.)</span></span>

    <span data-ttu-id="d4dc2-295">`uploadedCount` Zmiennej sumuje wszystkie pliki, które zostaną pomyślnie przekazane i zapisane.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-295">The `uploadedCount` variable totals all the files that are successfully uploaded and saved.</span></span> <span data-ttu-id="d4dc2-296">Ten kod kont możliwość, że oczekiwany plik może okazać się niemożliwe do przekazania.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-296">This code accounts for the possibility that an expected file may not be able to be uploaded.</span></span>
4. <span data-ttu-id="d4dc2-297">Uruchom stronę w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-297">Run the page in a browser.</span></span> <span data-ttu-id="d4dc2-298">W przeglądarce pojawi się Strona i jego przekazywanie dwóch polach.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-298">The browser displays the page and its two upload boxes.</span></span>
5. <span data-ttu-id="d4dc2-299">Wybierz dwa pliki do przekazania.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-299">Select two files to upload.</span></span>
6. <span data-ttu-id="d4dc2-300">Kliknij przycisk **dodać inny plik**.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-300">Click **Add another file**.</span></span> <span data-ttu-id="d4dc2-301">Strony wyświetli nowe okno przekazywania.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-301">The page displays a new upload box.</span></span> 

    ![[image]](working-with-files/_static/image12.jpg)
7. <span data-ttu-id="d4dc2-303">Kliknij pozycję **Przekaż**.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-303">Click **Upload**.</span></span>
8. <span data-ttu-id="d4dc2-304">W witrynie sieci Web, kliknij prawym przyciskiem myszy folder projektu, a następnie kliknij przycisk **Odśwież**.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-304">In the website, right-click the project folder and then click **Refresh**.</span></span>
9. <span data-ttu-id="d4dc2-305">Otwórz *UploadedFiles* folder, aby wyświetlić pliki, które pomyślnie przekazano.</span><span class="sxs-lookup"><span data-stu-id="d4dc2-305">Open the *UploadedFiles* folder to see the successfully uploaded files.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="d4dc2-306">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="d4dc2-306">Additional Resources</span></span>

[<span data-ttu-id="d4dc2-307">Praca z obrazami w witrynie ASP.NET Web Pages</span><span class="sxs-lookup"><span data-stu-id="d4dc2-307">Working with Images in an ASP.NET Web Pages Site</span></span>](https://go.microsoft.com/fwlink/?LinkId=202897)

[<span data-ttu-id="d4dc2-308">Eksportowanie do pliku CSV</span><span class="sxs-lookup"><span data-stu-id="d4dc2-308">Exporting to a CSV File</span></span>](https://msdn.microsoft.com/library/ms155919.aspx)

---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
title: Wprowadzenie do stron sieci Web ASP.NET — wprowadzanie danych bazy danych przy użyciu formularzy | Microsoft Docs
author: Rick-Anderson
description: W tym samouczku pokazano, jak utworzyć formularz wprowadzania, a następnie wprowadzić dane uzyskane z formularza do tabeli bazy danych w przypadku używania stron sieci Web ASP.NET (...
ms.author: riande
ms.date: 05/28/2015
ms.assetid: d37c93fc-25fd-4e94-8671-0d437beef206
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
msc.type: authoredcontent
ms.openlocfilehash: b9354a7b97a7df9020a681f709e16a92650cfcf0
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78624538"
---
# <a name="introducing-aspnet-web-pages---entering-database-data-by-using-forms"></a><span data-ttu-id="4fc72-103">Wprowadzenie do stron sieci Web ASP.NET — wprowadzanie danych bazy danych za pomocą formularzy</span><span class="sxs-lookup"><span data-stu-id="4fc72-103">Introducing ASP.NET Web Pages - Entering Database Data by Using Forms</span></span>

<span data-ttu-id="4fc72-104">Autor [FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="4fc72-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="4fc72-105">W tym samouczku pokazano, jak utworzyć formularz wprowadzania, a następnie wprowadzić dane uzyskane z formularza do tabeli bazy danych w przypadku używania stron sieci Web ASP.NET (Razor).</span><span class="sxs-lookup"><span data-stu-id="4fc72-105">This tutorial shows you how to create an entry form and then enter the data that you get from the form into a database table when you use ASP.NET Web Pages (Razor).</span></span> <span data-ttu-id="4fc72-106">Przyjęto założenie, że serie zostały wykonane za pomocą [podstaw formularzy HTML na stronach sieci Web ASP.NET](https://go.microsoft.com/fwlink/?LinkId=251581).</span><span class="sxs-lookup"><span data-stu-id="4fc72-106">It assumes you have completed the series through [Basics of HTML Forms in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581).</span></span>
> 
> <span data-ttu-id="4fc72-107">Zawartość:</span><span class="sxs-lookup"><span data-stu-id="4fc72-107">What you'll learn:</span></span>
> 
> - <span data-ttu-id="4fc72-108">Więcej informacji o sposobie przetwarzania formularzy wprowadzania.</span><span class="sxs-lookup"><span data-stu-id="4fc72-108">More about how to process entry forms.</span></span>
> - <span data-ttu-id="4fc72-109">Dodawanie (wstawianie) danych w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="4fc72-109">How to add (insert) data in a database.</span></span>
> - <span data-ttu-id="4fc72-110">Jak upewnić się, że użytkownicy wprowadzili wymaganą wartość w formularzu (jak sprawdzić poprawność danych wejściowych użytkownika).</span><span class="sxs-lookup"><span data-stu-id="4fc72-110">How to make sure that users have entered a required value in a form (how to validate user input).</span></span>
> - <span data-ttu-id="4fc72-111">Jak wyświetlić błędy walidacji.</span><span class="sxs-lookup"><span data-stu-id="4fc72-111">How to display validation errors.</span></span>
> - <span data-ttu-id="4fc72-112">Jak przejść do innej strony z bieżącej strony.</span><span class="sxs-lookup"><span data-stu-id="4fc72-112">How to jump to another page from the current page.</span></span>
>   
> 
> <span data-ttu-id="4fc72-113">Omówione funkcje/technologie:</span><span class="sxs-lookup"><span data-stu-id="4fc72-113">Features/technologies discussed:</span></span>
> 
> - <span data-ttu-id="4fc72-114">Metoda `Database.Execute`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-114">The `Database.Execute` method.</span></span>
> - <span data-ttu-id="4fc72-115">Instrukcja SQL `Insert Into`</span><span class="sxs-lookup"><span data-stu-id="4fc72-115">The SQL `Insert Into` statement</span></span>
> - <span data-ttu-id="4fc72-116">Pomocnik `Validation`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-116">The `Validation` helper.</span></span>
> - <span data-ttu-id="4fc72-117">Metoda `Response.Redirect`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-117">The `Response.Redirect` method.</span></span>

## <a name="what-youll-build"></a><span data-ttu-id="4fc72-118">Co będziesz kompilować</span><span class="sxs-lookup"><span data-stu-id="4fc72-118">What You'll Build</span></span>

<span data-ttu-id="4fc72-119">W samouczku, który pokazano, jak utworzyć bazę danych, wprowadzono dane bazy danych, edytując bazę danych bezpośrednio w programie WebMatrix, pracując w obszarze roboczym **bazy danych** .</span><span class="sxs-lookup"><span data-stu-id="4fc72-119">In the tutorial earlier that showed you how to create a database, you entered database data by editing the database directly in WebMatrix, working in the **Database** workspace.</span></span> <span data-ttu-id="4fc72-120">W większości aplikacji to nie jest praktyczny sposób umieszczania danych w bazie danych, chociaż.</span><span class="sxs-lookup"><span data-stu-id="4fc72-120">In most apps, that's not a practical way to put data into the database, though.</span></span> <span data-ttu-id="4fc72-121">W tym samouczku utworzysz interfejs oparty na sieci Web, który pozwala na wprowadzanie danych i zapisywanie ich w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="4fc72-121">So in this tutorial, you'll create a web-based interface that lets you or anyone enter data and save it to the database.</span></span>

<span data-ttu-id="4fc72-122">Utworzysz stronę umożliwiającą wprowadzanie nowych filmów.</span><span class="sxs-lookup"><span data-stu-id="4fc72-122">You'll create a page where you can enter new movies.</span></span> <span data-ttu-id="4fc72-123">Strona będzie zawierać formularz wprowadzania zawierający pola (pola tekstowe), w których można wprowadzić tytuł filmu, gatunek i rok.</span><span class="sxs-lookup"><span data-stu-id="4fc72-123">The page will contain an entry form that has fields (text boxes) where you can enter a movie title, genre, and year.</span></span> <span data-ttu-id="4fc72-124">Strona będzie wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="4fc72-124">The page will look like this page:</span></span>

![Strona "Dodaj film" w przeglądarce](entering-data/_static/image1.png)

<span data-ttu-id="4fc72-126">Pola tekstowe będą `<input>` elementy HTML, które będą wyglądać jak w tym znaczniku:</span><span class="sxs-lookup"><span data-stu-id="4fc72-126">The text boxes will be HTML `<input>` elements that will look like this markup:</span></span>

`<input type="text" name="genre" value="" />`

## <a name="creating-the-basic-entry-form"></a><span data-ttu-id="4fc72-127">Tworzenie podstawowego formularza wprowadzania</span><span class="sxs-lookup"><span data-stu-id="4fc72-127">Creating the Basic Entry Form</span></span>

<span data-ttu-id="4fc72-128">Utwórz stronę o nazwie *addmovie. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="4fc72-128">Create a page named *AddMovie.cshtml*.</span></span>

<span data-ttu-id="4fc72-129">Zastąp zawartość pliku następującym znacznikiem.</span><span class="sxs-lookup"><span data-stu-id="4fc72-129">Replace what's in the file with the following markup.</span></span> <span data-ttu-id="4fc72-130">Zastąp wszystko; Wkrótce dodasz blok kodu u góry.</span><span class="sxs-lookup"><span data-stu-id="4fc72-130">Overwrite everything; you'll add a code block at the top shortly.</span></span>

[!code-cshtml[Main](entering-data/samples/sample1.cshtml)]

<span data-ttu-id="4fc72-131">Ten przykład pokazuje typowy kod HTML na potrzeby tworzenia formularza.</span><span class="sxs-lookup"><span data-stu-id="4fc72-131">This example shows typical HTML for creating a form.</span></span> <span data-ttu-id="4fc72-132">Używa `<input>` elementów dla pól tekstowych i dla przycisku Prześlij.</span><span class="sxs-lookup"><span data-stu-id="4fc72-132">It uses `<input>` elements for the text boxes and for the submit button.</span></span> <span data-ttu-id="4fc72-133">Podpisy dla pól tekstowych są tworzone przy użyciu standardowych elementów `<label>`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-133">The captions for the text boxes are created by using standard `<label>` elements.</span></span> <span data-ttu-id="4fc72-134">Elementy `<fieldset>` i `<legend>` umieszczają w postaci całkiem dobre pole.</span><span class="sxs-lookup"><span data-stu-id="4fc72-134">The `<fieldset>` and `<legend>` elements put a nice box around the form.</span></span>

<span data-ttu-id="4fc72-135">Zwróć uwagę na to, że na tej stronie element `<form>` używa `post` jako wartości atrybutu `method`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-135">Notice that in this page, the `<form>` element uses `post` as the value for the `method` attribute.</span></span> <span data-ttu-id="4fc72-136">W poprzednim samouczku utworzono formularz, który używa metody `get`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-136">In the previous tutorial, you created a form that used the `get` method.</span></span> <span data-ttu-id="4fc72-137">Jest to poprawne, ponieważ mimo że formularz przesłał wartości do serwera, żądanie nie wprowadza żadnych zmian.</span><span class="sxs-lookup"><span data-stu-id="4fc72-137">That was correct, because although the form submitted values to the server, the request did not make any changes.</span></span> <span data-ttu-id="4fc72-138">Wszystkie dane były pobierane na różne sposoby.</span><span class="sxs-lookup"><span data-stu-id="4fc72-138">All it did was fetch data in different ways.</span></span> <span data-ttu-id="4fc72-139">Jednak na tej *stronie wprowadzisz* zmiany — będziesz dodawać nowe rekordy bazy danych.</span><span class="sxs-lookup"><span data-stu-id="4fc72-139">However, in this page you *will* make changes—you're going to add new database records.</span></span> <span data-ttu-id="4fc72-140">W związku z tym formularz powinien używać metody `post`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-140">Therefore, this form should use the `post` method.</span></span> <span data-ttu-id="4fc72-141">(Aby uzyskać więcej informacji o różnicach między operacjami `GET` i `POST`, zobacz pasek boczny[bezpieczeństwa czasowników Get, post i http](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) w poprzednim samouczku.)</span><span class="sxs-lookup"><span data-stu-id="4fc72-141">(For more about the difference between `GET` and `POST` operations, see the[GET, POST, and HTTP Verb Safety](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) sidebar in the previous tutorial.)</span></span>

<span data-ttu-id="4fc72-142">Zwróć uwagę, że każde pole tekstowe ma `name` element (`title`, `genre`, `year`).</span><span class="sxs-lookup"><span data-stu-id="4fc72-142">Note that each text box has a `name` element (`title`, `genre`, `year`).</span></span> <span data-ttu-id="4fc72-143">Jak widać w poprzednim samouczku, te nazwy są ważne, ponieważ trzeba mieć te nazwy, aby można było później uzyskać dane wejściowe użytkownika.</span><span class="sxs-lookup"><span data-stu-id="4fc72-143">As you saw in the previous tutorial, these names are important because you must have those names so you can get the user's input later.</span></span> <span data-ttu-id="4fc72-144">Możesz użyć dowolnych nazw.</span><span class="sxs-lookup"><span data-stu-id="4fc72-144">You can use any names.</span></span> <span data-ttu-id="4fc72-145">Warto używać znaczących nazw, które ułatwiają zapamiętywanie danych, z którymi pracujesz.</span><span class="sxs-lookup"><span data-stu-id="4fc72-145">It's helpful to use meaningful names that help you remember what data you're working with.</span></span>

<span data-ttu-id="4fc72-146">Atrybut `value` każdego elementu `<input>` zawiera bit kodu Razor (na przykład `Request.Form["title"]`).</span><span class="sxs-lookup"><span data-stu-id="4fc72-146">The `value` attribute of each `<input>` element contains a bit of Razor code (for example, `Request.Form["title"]`).</span></span> <span data-ttu-id="4fc72-147">W poprzednim samouczku poznasz wersję tej lewie, aby zachować wartość wprowadzoną w polu tekstowym (jeśli istnieje) po przesłaniu formularza.</span><span class="sxs-lookup"><span data-stu-id="4fc72-147">You learned a version of this trick in the previous tutorial to preserve the value entered into the text box (if any) after the form has been submitted.</span></span>

## <a name="getting-the-form-values"></a><span data-ttu-id="4fc72-148">Pobieranie wartości formularza</span><span class="sxs-lookup"><span data-stu-id="4fc72-148">Getting the Form Values</span></span>

<span data-ttu-id="4fc72-149">Następnie Dodaj kod, który przetwarza formularz.</span><span class="sxs-lookup"><span data-stu-id="4fc72-149">Next, you add code that processes the form.</span></span> <span data-ttu-id="4fc72-150">W obszarze konspekt należy wykonać następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="4fc72-150">In outline, you'll do the following:</span></span>

1. <span data-ttu-id="4fc72-151">Sprawdź, czy strona jest ogłaszana (została przesłana).</span><span class="sxs-lookup"><span data-stu-id="4fc72-151">Check whether the page is being posted (was submitted).</span></span> <span data-ttu-id="4fc72-152">Chcesz, aby kod był uruchamiany tylko wtedy, gdy użytkownik kliknął przycisk, a nie podczas pierwszego uruchomienia strony.</span><span class="sxs-lookup"><span data-stu-id="4fc72-152">You want to your code to run only when users have clicked the button, not when the page first runs.</span></span>
2. <span data-ttu-id="4fc72-153">Pobierz wartości wprowadzone przez użytkownika do pól tekstowych.</span><span class="sxs-lookup"><span data-stu-id="4fc72-153">Get the values that the user entered into the text boxes.</span></span> <span data-ttu-id="4fc72-154">W tym przypadku, ponieważ formularz używa zlecenia `POST`, otrzymujesz wartości formularza z kolekcji `Request.Form`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-154">In this case, because the form is using the `POST` verb, you get the form values from the `Request.Form` collection.</span></span>
3. <span data-ttu-id="4fc72-155">Wstaw wartości jako nowy rekord w tabeli bazy danych *filmów* .</span><span class="sxs-lookup"><span data-stu-id="4fc72-155">Insert the values as a new record in the *Movies* database table.</span></span>

<span data-ttu-id="4fc72-156">W górnej części pliku Dodaj następujący kod:</span><span class="sxs-lookup"><span data-stu-id="4fc72-156">At the top of the file, add the following code:</span></span>

[!code-cshtml[Main](entering-data/samples/sample2.cshtml)]

<span data-ttu-id="4fc72-157">Pierwsze kilka wierszy tworzy zmienne (`title`, `genre`i `year`), aby przechowywać wartości z pól tekstowych.</span><span class="sxs-lookup"><span data-stu-id="4fc72-157">The first few lines create variables (`title`, `genre`, and `year`) to hold the values from the text boxes.</span></span> <span data-ttu-id="4fc72-158">Wiersz `if(IsPost)` upewnij się, że zmienne są ustawiane *tylko* wtedy, gdy użytkownik kliknie przycisk **Dodaj film** , czyli po opublikowaniu formularza.</span><span class="sxs-lookup"><span data-stu-id="4fc72-158">The line `if(IsPost)` makes sure that the variables are set *only* when users click the **Add Movie** button — that is, when the form has been posted.</span></span>

<span data-ttu-id="4fc72-159">Jak pokazano w poprzednim samouczku, uzyskasz wartość pola tekstowego przy użyciu wyrażenia, takiego jak `Request.Form["name"]`, gdzie *name* jest nazwą elementu `<input>`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-159">As you saw in an earlier tutorial, you get the value of a text box by using an expression like `Request.Form["name"]`, where *name* is the name of the `<input>` element.</span></span>

<span data-ttu-id="4fc72-160">Nazwy zmiennych (`title`, `genre`i `year`) są dowolne.</span><span class="sxs-lookup"><span data-stu-id="4fc72-160">The names of the variables (`title`, `genre`, and `year`) are arbitrary.</span></span> <span data-ttu-id="4fc72-161">Podobnie jak w przypadku nazw przypisanych do `<input>` elementów, możesz je wywoływać w dowolny sposób.</span><span class="sxs-lookup"><span data-stu-id="4fc72-161">Like the names that you assign to `<input>` elements, you can call them anything you like.</span></span> <span data-ttu-id="4fc72-162">(Nazwy zmiennych nie muszą odpowiadać atrybutom nazwy elementów `<input>` w formularzu). Ale podobnie jak w przypadku elementów `<input>`, dobrym pomysłem jest użycie nazw zmiennych, które odzwierciedlają zawarte w nich dane.</span><span class="sxs-lookup"><span data-stu-id="4fc72-162">(The names of the variables don't have to match the name attributes of `<input>` elements on the form.) But as with the `<input>` elements, it's a good idea to use variable names that reflect the data that they contain.</span></span> <span data-ttu-id="4fc72-163">Gdy piszesz kod, spójne nazwy ułatwiają zapamiętywanie danych, z którymi pracujesz.</span><span class="sxs-lookup"><span data-stu-id="4fc72-163">When you write code, consistent names make it easier for you to remember what data you're working with.</span></span>

## <a name="adding-data-to-the-database"></a><span data-ttu-id="4fc72-164">Dodawanie danych do bazy danych</span><span class="sxs-lookup"><span data-stu-id="4fc72-164">Adding Data to the Database</span></span>

<span data-ttu-id="4fc72-165">W bloku kodu, który właśnie został dodany, tuż *wewnątrz* zamykającego nawiasu klamrowego (`}`) bloku `if` (nie tylko wewnątrz bloku kodu), Dodaj następujący kod:</span><span class="sxs-lookup"><span data-stu-id="4fc72-165">In the code block you just added, just *inside* the closing brace ( `}` ) of the `if` block (not just inside the code block), add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample3.cs)]

<span data-ttu-id="4fc72-166">Ten przykład przypomina kod użyty w poprzednim samouczku do pobierania i wyświetlania danych.</span><span class="sxs-lookup"><span data-stu-id="4fc72-166">This example is similar to the code you used in a previous tutorial to fetch and display data.</span></span> <span data-ttu-id="4fc72-167">Wiersz rozpoczynający się od `db =` otwiera bazę danych, jak poprzednio, a następny wiersz definiuje instrukcję SQL ponownie, jak wcześniej.</span><span class="sxs-lookup"><span data-stu-id="4fc72-167">The line that starts with `db =` opens the database, like before, and the next line defines a SQL statement, again as you saw before.</span></span> <span data-ttu-id="4fc72-168">Jednak ten czas definiuje instrukcję SQL `Insert Into`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-168">However, this time it defines a SQL `Insert Into` statement.</span></span> <span data-ttu-id="4fc72-169">Poniższy przykład przedstawia ogólną składnię instrukcji `Insert Into`:</span><span class="sxs-lookup"><span data-stu-id="4fc72-169">The following example shows the general syntax of the `Insert Into` statement:</span></span>

`INSERT INTO table (column1, column2, column3, ...) VALUES (value1, value2, value3, ...)`

<span data-ttu-id="4fc72-170">Innymi słowy, należy określić tabelę do wstawienia, a następnie wyświetlić listę kolumn do wstawienia, a następnie wyświetlić listę wartości do wstawienia.</span><span class="sxs-lookup"><span data-stu-id="4fc72-170">In other words, you specify the table to insert into, then list the columns to insert into, and then list the values to insert.</span></span> <span data-ttu-id="4fc72-171">(Jak wspomniano wcześniej, w języku SQL nie jest rozróżniana wielkość liter, ale niektóre osoby mają wielkie słowa kluczowe, aby ułatwić odczytywanie polecenia).</span><span class="sxs-lookup"><span data-stu-id="4fc72-171">(As noted before, SQL is not case sensitive but some people capitalize the keywords to make it easier to read the command.)</span></span>

<span data-ttu-id="4fc72-172">Kolumny, które są wstawiane, są już wymienione w poleceniu — `(Title, Genre, Year)`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-172">The columns that you're inserting into are already listed in the command — `(Title, Genre, Year)`.</span></span> <span data-ttu-id="4fc72-173">Interesująca część polega na tym, jak otrzymujesz wartości z pól tekstowych do `VALUES` części polecenia.</span><span class="sxs-lookup"><span data-stu-id="4fc72-173">The interesting part is how you get the values from the text boxes into the `VALUES` part of the command.</span></span> <span data-ttu-id="4fc72-174">Zamiast wartości rzeczywistych widoczne są `@0`, `@1`i `@2`, które są symbolami zastępczymi kursów.</span><span class="sxs-lookup"><span data-stu-id="4fc72-174">Instead of actual values, you see `@0`, `@1`, and `@2`, which are of course placeholders.</span></span> <span data-ttu-id="4fc72-175">Po uruchomieniu polecenia (w wierszu `db.Execute`) przekazywane są wartości z pól tekstowych.</span><span class="sxs-lookup"><span data-stu-id="4fc72-175">When you run the command (on the `db.Execute` line), you pass the values that you got from the text boxes.</span></span>

<span data-ttu-id="4fc72-176">**Ważne!**</span><span class="sxs-lookup"><span data-stu-id="4fc72-176">**Important!**</span></span> <span data-ttu-id="4fc72-177">Należy pamiętać, że jedynym sposobem, w jaki należy uwzględnić dane wprowadzone w trybie online przez użytkownika w instrukcji SQL, jest użycie symboli zastępczych, jak widać tutaj (`VALUES(@0, @1, @2)`).</span><span class="sxs-lookup"><span data-stu-id="4fc72-177">Remember that the only way you should ever include data entered online by a user in a SQL statement is to use placeholders, as you see here (`VALUES(@0, @1, @2)`).</span></span> <span data-ttu-id="4fc72-178">Jeśli połączysz dane wprowadzane przez użytkownika z instrukcją SQL, możesz otworzyć siebie do ataku polegającego na iniekcji SQL, jak wyjaśniono w [formularzach podstawowe informacje na stronach sieci Web ASP.NET](https://go.microsoft.com/fwlink/?LinkId=251581) (poprzedni samouczek).</span><span class="sxs-lookup"><span data-stu-id="4fc72-178">If you concatenate user input into a SQL statement, you open yourself to a SQL injection attack, as explained in [Form Basics in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581) (the previous tutorial).</span></span>

<span data-ttu-id="4fc72-179">Nadal wewnątrz bloku `if`, Dodaj następujący wiersz po wierszu `db.Execute`:</span><span class="sxs-lookup"><span data-stu-id="4fc72-179">Still inside the `if` block, add the following line after the `db.Execute` line:</span></span>

[!code-css[Main](entering-data/samples/sample4.css)]

<span data-ttu-id="4fc72-180">Po wstawieniu nowego filmu do bazy danych ten wiersz przeskakuje użytkownika (przekierowania) do strony *filmy* , aby zobaczyć właśnie wprowadzony film.</span><span class="sxs-lookup"><span data-stu-id="4fc72-180">After the new movie has been inserted into the database, this line jumps you (redirects) to the *Movies* page so you can see the movie you just entered.</span></span> <span data-ttu-id="4fc72-181">Operator `~` oznacza "katalog główny witryny sieci Web".</span><span class="sxs-lookup"><span data-stu-id="4fc72-181">The `~` operator means "root of the website."</span></span> <span data-ttu-id="4fc72-182">(Operator `~` działa tylko na stronach ASP.NET, a nie w języku HTML Generally).</span><span class="sxs-lookup"><span data-stu-id="4fc72-182">(The `~` operator works only in ASP.NET pages, not in HTML generally.)</span></span>

<span data-ttu-id="4fc72-183">Pełny blok kodu wygląda podobnie do tego przykładu:</span><span class="sxs-lookup"><span data-stu-id="4fc72-183">The complete code block looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample5.cshtml)]

## <a name="testing-the-insert-command-so-far"></a><span data-ttu-id="4fc72-184">Testowanie polecenia INSERT (dotąd)</span><span class="sxs-lookup"><span data-stu-id="4fc72-184">Testing the Insert Command (So Far)</span></span>

<span data-ttu-id="4fc72-185">Nie zostało to jeszcze zrobione, ale teraz jest to dobry czas na przetestowanie.</span><span class="sxs-lookup"><span data-stu-id="4fc72-185">You're not done yet, but now is a good time to test.</span></span>

<span data-ttu-id="4fc72-186">W widoku drzewa plików w programie WebMatrix kliknij prawym przyciskiem myszy stronę *addmovie. cshtml* , a następnie kliknij polecenie **Uruchom w przeglądarce**.</span><span class="sxs-lookup"><span data-stu-id="4fc72-186">In the tree view of files in WebMatrix, right-click the *AddMovie.cshtml* page and then click **Launch in browser**.</span></span>

![Strona "Dodaj film" w przeglądarce](entering-data/_static/image2.png)

<span data-ttu-id="4fc72-188">(Jeśli w przeglądarce zostanie zainstalowana inna strona, upewnij się, że adres URL jest `http://localhost:nnnnn/AddMovie`), gdzie *nnnnn* jest numerem portu, którego używasz.)</span><span class="sxs-lookup"><span data-stu-id="4fc72-188">(If you end up with a different page in the browser, make sure that the URL is `http://localhost:nnnnn/AddMovie`), where *nnnnn* is the port number that you're using.)</span></span>

<span data-ttu-id="4fc72-189">Czy pojawiły się strona błędu?</span><span class="sxs-lookup"><span data-stu-id="4fc72-189">Did you get an error page?</span></span> <span data-ttu-id="4fc72-190">Jeśli tak, przeczytaj ją uważnie i upewnij się, że kod wygląda dokładnie na wymienionym wcześniej.</span><span class="sxs-lookup"><span data-stu-id="4fc72-190">If so, read it carefully and make sure that the code looks exactly what was listed earlier.</span></span>

<span data-ttu-id="4fc72-191">Wprowadź film w formularzu &mdash; na przykład użyj "Obywatel Kane", "dramat" i "1941".</span><span class="sxs-lookup"><span data-stu-id="4fc72-191">Enter a movie in the form &mdash; for example, use "Citizen Kane", "Drama", and "1941".</span></span> <span data-ttu-id="4fc72-192">(Lub niezależnie od siebie). Następnie kliknij pozycję **Dodaj film**.</span><span class="sxs-lookup"><span data-stu-id="4fc72-192">(Or whatever.) Then click **Add Movie**.</span></span>

<span data-ttu-id="4fc72-193">Jeśli wszystko przebiegnie prawidłowo, nastąpi przekierowanie do strony *filmów* .</span><span class="sxs-lookup"><span data-stu-id="4fc72-193">If all goes well, you're redirected to the *Movies* page.</span></span> <span data-ttu-id="4fc72-194">Upewnij się, że Twój nowy film znajduje się na liście.</span><span class="sxs-lookup"><span data-stu-id="4fc72-194">Make sure that your new movie is listed.</span></span>

![Strona filmów pokazująca nowo dodany film](entering-data/_static/image3.png)

## <a name="validating-user-input"></a><span data-ttu-id="4fc72-196">Sprawdzanie poprawności danych wejściowych użytkownika</span><span class="sxs-lookup"><span data-stu-id="4fc72-196">Validating User Input</span></span>

<span data-ttu-id="4fc72-197">Wróć do strony *addmovie* lub uruchom ją ponownie.</span><span class="sxs-lookup"><span data-stu-id="4fc72-197">Go back to the *AddMovie* page, or run it again.</span></span> <span data-ttu-id="4fc72-198">Wprowadź inny film, ale tym razem wprowadź tylko tytuł, &mdash; na przykład wprowadź "Singin' w deszczu".</span><span class="sxs-lookup"><span data-stu-id="4fc72-198">Enter another movie, but this time, enter only the title &mdash; for example, enter "Singin' in the Rain".</span></span> <span data-ttu-id="4fc72-199">Następnie kliknij pozycję **Dodaj film**.</span><span class="sxs-lookup"><span data-stu-id="4fc72-199">Then click **Add Movie**.</span></span>

<span data-ttu-id="4fc72-200">Nastąpi ponowne przekierowanie na stronę *filmów* .</span><span class="sxs-lookup"><span data-stu-id="4fc72-200">You're redirected to the *Movies* page again.</span></span> <span data-ttu-id="4fc72-201">Nowy film można znaleźć, ale jest on niekompletny.</span><span class="sxs-lookup"><span data-stu-id="4fc72-201">You can find the new movie, but it's incomplete.</span></span>

![Strona filmów pokazująca nowy film, w którym brakuje niektórych wartości](entering-data/_static/image4.png)

<span data-ttu-id="4fc72-203">Po utworzeniu tabeli *filmów* jawnie określono, że żadne z pól nie może mieć wartości null.</span><span class="sxs-lookup"><span data-stu-id="4fc72-203">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="4fc72-204">Tutaj masz formularz wprowadzania nowych filmów i opuszczasz pola.</span><span class="sxs-lookup"><span data-stu-id="4fc72-204">Here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="4fc72-205">To jest błąd.</span><span class="sxs-lookup"><span data-stu-id="4fc72-205">That's an error.</span></span>

<span data-ttu-id="4fc72-206">W takim przypadku baza danych w rzeczywistości nie *podnosi lub nie*zgłasza błędu.</span><span class="sxs-lookup"><span data-stu-id="4fc72-206">In this case, the database didn't actually raise (or *throw*) an error.</span></span> <span data-ttu-id="4fc72-207">Nie podano gatunku lub roku, dlatego kod na stronie *addmovie* traktuje te wartości jako *ciągi puste*.</span><span class="sxs-lookup"><span data-stu-id="4fc72-207">You didn't supply a genre or year, so the code in the *AddMovie* page treated those values as so-called *empty strings*.</span></span> <span data-ttu-id="4fc72-208">Gdy uruchomiono polecenie SQL `Insert Into`, pola gatunek i rok nie miały przydatnych danych, ale nie mają wartości null.</span><span class="sxs-lookup"><span data-stu-id="4fc72-208">When the SQL `Insert Into` command ran, the genre and year fields didn't have useful data in them, but they weren't null.</span></span>

<span data-ttu-id="4fc72-209">Oczywiście nie chcesz zezwalać użytkownikom na wprowadzanie informacji o połowach pustych do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="4fc72-209">Obviously, you don't want to let users enter half-empty movie information into the database.</span></span> <span data-ttu-id="4fc72-210">Rozwiązaniem jest zweryfikowanie danych wejściowych użytkownika.</span><span class="sxs-lookup"><span data-stu-id="4fc72-210">The solution is to validate the user's input.</span></span> <span data-ttu-id="4fc72-211">Początkowo Walidacja będzie mieć pewność, że użytkownik wprowadził wartość dla wszystkich pól (oznacza to, że żaden z nich nie zawiera pustego ciągu).</span><span class="sxs-lookup"><span data-stu-id="4fc72-211">Initially, the validation will simply make sure that the user has entered a value for all of the fields (that is, that none of them contains an empty string).</span></span>

> [!TIP]
> 
> <span data-ttu-id="4fc72-212">**Ciągi o wartości null i puste**</span><span class="sxs-lookup"><span data-stu-id="4fc72-212">**Null and Empty Strings**</span></span>
> 
> <span data-ttu-id="4fc72-213">W programowaniu istnieje rozróżnienie między różnymi pojęciemi "brak wartości".</span><span class="sxs-lookup"><span data-stu-id="4fc72-213">In programming, there's a distinction between different notions of "no value."</span></span> <span data-ttu-id="4fc72-214">Ogólnie rzecz biorąc, wartość jest *równa null* , jeśli nigdy nie została ustawiona lub nie została zainicjowana w jakikolwiek sposób.</span><span class="sxs-lookup"><span data-stu-id="4fc72-214">In general, a value is *null* if it has never been set or initialized in any way.</span></span> <span data-ttu-id="4fc72-215">Natomiast zmienna, która oczekuje, że dane znakowe (ciągi) można ustawić na *pusty ciąg*.</span><span class="sxs-lookup"><span data-stu-id="4fc72-215">In contrast, a variable that expects character data (strings) can be set to an *empty string*.</span></span> <span data-ttu-id="4fc72-216">W takim przypadku wartość nie jest równa null; jest on właśnie jawnie ustawiony na ciąg znaków, którego długość wynosi zero.</span><span class="sxs-lookup"><span data-stu-id="4fc72-216">In that case, the value is not null; it's just been explicitly set to a string of characters whose length is zero.</span></span> <span data-ttu-id="4fc72-217">Te dwie instrukcje przedstawiają różnicę:</span><span class="sxs-lookup"><span data-stu-id="4fc72-217">These two statements show the difference:</span></span>
> 
> [!code-csharp[Main](entering-data/samples/sample6.cs)]
> 
> <span data-ttu-id="4fc72-218">Jest nieco bardziej skomplikowany niż ten, ale ważnym punktem jest to, że `null` reprezentuje sortowanie stanu nieokreślony.</span><span class="sxs-lookup"><span data-stu-id="4fc72-218">It's a little more complicated than that, but the important point is that `null` represents a sort of undetermined state.</span></span>
> 
> <span data-ttu-id="4fc72-219">Teraz ważne jest, aby dokładnie zrozumieć, kiedy wartość jest równa null i kiedy jest tylko pustym ciągiem.</span><span class="sxs-lookup"><span data-stu-id="4fc72-219">Now and then it's important to understand exactly when a value is null and when it's just an empty string.</span></span> <span data-ttu-id="4fc72-220">W kodzie strony *addmovie* uzyskasz wartości pól tekstowych przy użyciu `Request.Form["title"]` i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="4fc72-220">In the code for the *AddMovie* page, you get the values of the text boxes by using `Request.Form["title"]` and so on.</span></span> <span data-ttu-id="4fc72-221">Gdy strona jest uruchamiana po raz pierwszy (przed kliknięciem przycisku), wartość `Request.Form["title"]` ma wartość null.</span><span class="sxs-lookup"><span data-stu-id="4fc72-221">When the page first runs (before you click the button), the value of `Request.Form["title"]` is null.</span></span> <span data-ttu-id="4fc72-222">Ale podczas przesyłania formularza `Request.Form["title"]` Pobiera wartość pola tekstowego `title`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-222">But when you submit the form, `Request.Form["title"]` gets the value of the `title` text box.</span></span> <span data-ttu-id="4fc72-223">Nie jest to oczywiste, ale puste pole tekstowe nie ma wartości null; po prostu zawiera pusty ciąg.</span><span class="sxs-lookup"><span data-stu-id="4fc72-223">It's not obvious, but an empty text box is not null; it just has an empty string in it.</span></span> <span data-ttu-id="4fc72-224">Tak więc, gdy kod jest uruchamiany w odpowiedzi na kliknięcie przycisku, `Request.Form["title"]` zawiera pusty ciąg.</span><span class="sxs-lookup"><span data-stu-id="4fc72-224">So when the code runs in response to the button click, `Request.Form["title"]` has an empty string in it.</span></span>
> 
> <span data-ttu-id="4fc72-225">Dlaczego to odrębne znaczenie?</span><span class="sxs-lookup"><span data-stu-id="4fc72-225">Why is this distinction important?</span></span> <span data-ttu-id="4fc72-226">Po utworzeniu tabeli *filmów* jawnie określono, że żadne z pól nie może mieć wartości null.</span><span class="sxs-lookup"><span data-stu-id="4fc72-226">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="4fc72-227">Ale w tym miejscu masz formularz wprowadzania nowych filmów i opuszczasz pola puste.</span><span class="sxs-lookup"><span data-stu-id="4fc72-227">But here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="4fc72-228">Przed próbą zapisania nowych filmów, które nie zawierały wartości dla gatunku lub roku, należy oczekiwać, że baza danych ma zaistnieć skargę.</span><span class="sxs-lookup"><span data-stu-id="4fc72-228">You would reasonably expect the database to complain when you tried to save new movies that didn't have values for genre or year.</span></span> <span data-ttu-id="4fc72-229">Ale jest to punkt &mdash; nawet wtedy, gdy te pola tekstowe zostaną pozostawione puste, wartości nie będą puste. są to puste ciągi.</span><span class="sxs-lookup"><span data-stu-id="4fc72-229">But that's the point &mdash; even if you leave those text boxes blank, the values aren't null; they're empty strings.</span></span> <span data-ttu-id="4fc72-230">W efekcie można zapisać nowe filmy w bazie danych z tymi kolumnami puste &mdash; ale nie wartości null!</span><span class="sxs-lookup"><span data-stu-id="4fc72-230">As a result, you're able to save new movies to the database with these columns empty &mdash; but not null!</span></span> <span data-ttu-id="4fc72-231">wartości &mdash;.</span><span class="sxs-lookup"><span data-stu-id="4fc72-231">&mdash; values.</span></span> <span data-ttu-id="4fc72-232">W związku z tym trzeba upewnić się, że użytkownicy nie przesyłają pustego ciągu, co można zrobić, sprawdzając dane wejściowe użytkownika.</span><span class="sxs-lookup"><span data-stu-id="4fc72-232">Therefore, you have to make sure that users don't submit an empty string, which you can do by validating the user's input.</span></span>

### <a name="the-validation-helper"></a><span data-ttu-id="4fc72-233">Pomocnik walidacji</span><span class="sxs-lookup"><span data-stu-id="4fc72-233">The Validation Helper</span></span>

<span data-ttu-id="4fc72-234">ASP.NET Web Pages zawiera pomocnika &mdash; `Validation` pomocnik &mdash;, za pomocą którego można upewnić się, że użytkownicy wprowadzają dane spełniające Twoje wymagania.</span><span class="sxs-lookup"><span data-stu-id="4fc72-234">ASP.NET Web Pages includes a helper &mdash; the `Validation` helper &mdash; that you can use to make sure that users enter data that meets your requirements.</span></span> <span data-ttu-id="4fc72-235">Pomocnik `Validation` jest jednym z pomocników wbudowanych w ASP.NET stron sieci Web, więc nie trzeba instalować jej jako pakietu przy użyciu narzędzia NuGet, w jaki sposób zainstalowano pomocnika skonfigurowali Gravatar w poprzednim samouczku.</span><span class="sxs-lookup"><span data-stu-id="4fc72-235">The `Validation` helper is one of the helpers that's built in to ASP.NET Web Pages, so you don't have to install it as a package by using NuGet, the way you installed the Gravatar helper in an earlier tutorial.</span></span>

<span data-ttu-id="4fc72-236">Aby sprawdzić poprawność danych wejściowych użytkownika, wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="4fc72-236">To validate the user's input, you'll do the following:</span></span>

- <span data-ttu-id="4fc72-237">Użyj kodu, aby określić, że wartości w polach tekstowych na stronie mają być wymagane.</span><span class="sxs-lookup"><span data-stu-id="4fc72-237">Use code to specify that you want to require values in the text boxes on the page.</span></span>
- <span data-ttu-id="4fc72-238">Należy umieścić test w kodzie, aby informacje o filmie były dodawane do bazy danych tylko wtedy, gdy wszystko jest poprawnie zweryfikowane.</span><span class="sxs-lookup"><span data-stu-id="4fc72-238">Put a test into the code so that the movie information is added to the database only if everything validates properly.</span></span>
- <span data-ttu-id="4fc72-239">Dodaj kod do znacznika, aby wyświetlić komunikaty o błędach.</span><span class="sxs-lookup"><span data-stu-id="4fc72-239">Add code into the markup to display error messages.</span></span>

<span data-ttu-id="4fc72-240">W bloku kodu na stronie *Addmovie* na początku przed deklaracjami zmiennych Dodaj następujący kod:</span><span class="sxs-lookup"><span data-stu-id="4fc72-240">In the code block in the *AddMovie* page, right up at the top before the variable declarations, add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample7.cs)]

<span data-ttu-id="4fc72-241">Należy wywołać `Validation.RequireField` raz dla każdego pola (`<input>` elementu), gdzie ma być wymagany wpis.</span><span class="sxs-lookup"><span data-stu-id="4fc72-241">You call `Validation.RequireField` once for each field (`<input>` element) where you want to require an entry.</span></span> <span data-ttu-id="4fc72-242">Możesz również dodać niestandardowy komunikat o błędzie dla każdego wywołania, tak jak tutaj.</span><span class="sxs-lookup"><span data-stu-id="4fc72-242">You can also add a custom error message for each call, like you see here.</span></span> <span data-ttu-id="4fc72-243">(Zmieniamy komunikaty po prostu, aby pokazać, że możesz umieścić coś w tym miejscu).</span><span class="sxs-lookup"><span data-stu-id="4fc72-243">(We varied the messages just to show that you can put anything you like there.)</span></span>

<span data-ttu-id="4fc72-244">Jeśli wystąpił problem, chcesz uniemożliwić wstawianie nowych informacji o filmie do bazy danych programu.</span><span class="sxs-lookup"><span data-stu-id="4fc72-244">If there's a problem, you want to prevent the new movie information from being inserted into the database.</span></span> <span data-ttu-id="4fc72-245">W bloku `if(IsPost)` Użyj `&&` (koniunkcja logiczna i), aby dodać kolejny warunek, który testuje `Validation.IsValid()`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-245">In the `if(IsPost)` block, use `&&` (logical AND) to add another condition that tests `Validation.IsValid()`.</span></span> <span data-ttu-id="4fc72-246">Gdy wszystko będzie gotowe, cały blok `if(IsPost)` będzie wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="4fc72-246">When you're done, the whole `if(IsPost)` block looks like this code:</span></span>

[!code-csharp[Main](entering-data/samples/sample8.cs)]

<span data-ttu-id="4fc72-247">Jeśli wystąpi błąd walidacji w dowolnym z pól, które zostały zarejestrowane przy użyciu pomocnika `Validation`, Metoda `Validation.IsValid` zwróci wartość false.</span><span class="sxs-lookup"><span data-stu-id="4fc72-247">If there's a validation error with any of the fields that you registered by using the `Validation` helper, the `Validation.IsValid` method returns false.</span></span> <span data-ttu-id="4fc72-248">W takim przypadku żaden kod w tym bloku nie zostanie uruchomiony, więc żadne nieprawidłowe wpisy filmu nie zostaną wstawione do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="4fc72-248">And in that case, none of the code in that block will run, so no invalid movie entries will be inserted into the database.</span></span> <span data-ttu-id="4fc72-249">I oczywiście nie przekierowywać Cię do strony *filmów* .</span><span class="sxs-lookup"><span data-stu-id="4fc72-249">And of course you're not redirected to the *Movies* page.</span></span>

<span data-ttu-id="4fc72-250">Pełny blok kodu, w tym kod sprawdzania poprawności, wygląda teraz następująco:</span><span class="sxs-lookup"><span data-stu-id="4fc72-250">The complete code block, including the validation code, now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample9.cshtml?highlight=10)]

## <a name="displaying-validation-errors"></a><span data-ttu-id="4fc72-251">Wyświetlanie błędów walidacji</span><span class="sxs-lookup"><span data-stu-id="4fc72-251">Displaying Validation Errors</span></span>

<span data-ttu-id="4fc72-252">Ostatnim krokiem jest wyświetlenie wszystkich komunikatów o błędach.</span><span class="sxs-lookup"><span data-stu-id="4fc72-252">The last step is to display any error messages.</span></span> <span data-ttu-id="4fc72-253">Można wyświetlić poszczególne komunikaty dla każdego błędu walidacji lub można wyświetlić podsumowanie albo oba te błędy.</span><span class="sxs-lookup"><span data-stu-id="4fc72-253">You can display individual messages for each validation error, or you can display a summary, or both.</span></span> <span data-ttu-id="4fc72-254">W tym samouczku wykonasz oba czynności, aby zobaczyć, jak to działa.</span><span class="sxs-lookup"><span data-stu-id="4fc72-254">For this tutorial, you'll do both so that you can see how it works.</span></span>

<span data-ttu-id="4fc72-255">Obok każdego elementu `<input>`, który jest weryfikowany, wywołaj metodę `Html.ValidationMessage` i przekaż ją do nazwy elementu `<input>`, którego dotyczy Walidacja.</span><span class="sxs-lookup"><span data-stu-id="4fc72-255">Next to each `<input>` element that you're validating, call the `Html.ValidationMessage` method and pass it the name of the `<input>` element you're validating.</span></span> <span data-ttu-id="4fc72-256">Należy umieścić metodę `Html.ValidationMessage`, w której ma pojawić się komunikat o błędzie.</span><span class="sxs-lookup"><span data-stu-id="4fc72-256">You put the `Html.ValidationMessage` method right where you want the error message to appear.</span></span> <span data-ttu-id="4fc72-257">Po uruchomieniu strony `Html.ValidationMessage` Metoda renderuje `<span>` elementu, w którym zostanie wystawiony błąd walidacji.</span><span class="sxs-lookup"><span data-stu-id="4fc72-257">When the page runs, the `Html.ValidationMessage` method renders a `<span>` element where the validation error will go.</span></span> <span data-ttu-id="4fc72-258">(Jeśli nie ma żadnego błędu, element `<span>` jest renderowany, ale nie zawiera tekstu.)</span><span class="sxs-lookup"><span data-stu-id="4fc72-258">(If there's no error, the `<span>` element is rendered, but there's no text in it.)</span></span>

<span data-ttu-id="4fc72-259">Zmień adiustację na stronie tak, aby zawierała metodę `Html.ValidationMessage` dla każdego z trzech elementów `<input>` na stronie, jak w tym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="4fc72-259">Change the markup in the page so that it includes an `Html.ValidationMessage` method for each of the three `<input>` elements on the page, like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample10.cshtml?highlight=3,8,13)]

<span data-ttu-id="4fc72-260">Aby zobaczyć, jak działa podsumowanie, Dodaj również następujące znaczniki i kod po elemencie `<h1>Add a Movie</h1>` na stronie:</span><span class="sxs-lookup"><span data-stu-id="4fc72-260">To see how the summary works, also add the following markup and code right after the `<h1>Add a Movie</h1>` element on the page:</span></span>

[!code-cshtml[Main](entering-data/samples/sample11.cshtml)]

<span data-ttu-id="4fc72-261">Domyślnie metoda `Html.ValidationSummary` wyświetla wszystkie komunikaty weryfikacyjne na liście (element `<ul>` znajdujący się wewnątrz elementu `<div>`).</span><span class="sxs-lookup"><span data-stu-id="4fc72-261">By default, the `Html.ValidationSummary` method displays all the validation messages in a list (a `<ul>` element that's inside a `<div>` element).</span></span> <span data-ttu-id="4fc72-262">Podobnie jak w przypadku metody `Html.ValidationMessage`, znaczniki dla podsumowania walidacji są zawsze renderowane; Jeśli nie ma żadnych błędów, nie są renderowane żadne elementy listy.</span><span class="sxs-lookup"><span data-stu-id="4fc72-262">As with the `Html.ValidationMessage` method, the markup for the validation summary is always rendered; if there are no errors, no list items are rendered.</span></span>

<span data-ttu-id="4fc72-263">Podsumowanie może być alternatywnym sposobem wyświetlania komunikatów weryfikacyjnych zamiast przy użyciu metody `Html.ValidationMessage` do wyświetlania każdego błędu związanego z polem.</span><span class="sxs-lookup"><span data-stu-id="4fc72-263">The summary can be an alternative way to display validation messages instead of by using the `Html.ValidationMessage` method to display each field-specific error.</span></span> <span data-ttu-id="4fc72-264">Można też użyć podsumowania i szczegółów.</span><span class="sxs-lookup"><span data-stu-id="4fc72-264">Or you can use both a summary and the details.</span></span> <span data-ttu-id="4fc72-265">Można też użyć metody `Html.ValidationSummary`, aby wyświetlić błąd ogólny, a następnie użyć pojedynczych wywołań `Html.ValidationMessage`, aby wyświetlić szczegóły.</span><span class="sxs-lookup"><span data-stu-id="4fc72-265">Or you can use the `Html.ValidationSummary` method to display a generic error and then use individual `Html.ValidationMessage` calls to display details.</span></span>

<span data-ttu-id="4fc72-266">Pełna strona wygląda teraz następująco:</span><span class="sxs-lookup"><span data-stu-id="4fc72-266">The complete page now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample12.cshtml)]

<span data-ttu-id="4fc72-267">Gotowe.</span><span class="sxs-lookup"><span data-stu-id="4fc72-267">That's it.</span></span> <span data-ttu-id="4fc72-268">Możesz teraz przetestować stronę, dodając film, ale pozostawiając co najmniej jedno pole.</span><span class="sxs-lookup"><span data-stu-id="4fc72-268">You can now test the page by adding a movie but leaving out one or more of the fields.</span></span> <span data-ttu-id="4fc72-269">Gdy to zrobisz, zostanie wyświetlony następujący komunikat o błędzie:</span><span class="sxs-lookup"><span data-stu-id="4fc72-269">When you do, you see the following error display:</span></span>

![Dodawanie strony filmu zawierającej komunikaty o błędach walidacji](entering-data/_static/image5.png)

## <a name="styling-the-validation-error-messages"></a><span data-ttu-id="4fc72-271">Określanie stylu komunikatów o błędach walidacji</span><span class="sxs-lookup"><span data-stu-id="4fc72-271">Styling the Validation Error Messages</span></span>

<span data-ttu-id="4fc72-272">Zobaczysz, że są wyświetlane komunikaty o błędach, ale nie są one naprawdę bardzo dobrze.</span><span class="sxs-lookup"><span data-stu-id="4fc72-272">You can see that there are error messages, but they don't really stand out very well.</span></span> <span data-ttu-id="4fc72-273">Istnieje prosty sposób na styl komunikatów o błędach.</span><span class="sxs-lookup"><span data-stu-id="4fc72-273">There's an easy way to style the error messages, though.</span></span>

<span data-ttu-id="4fc72-274">Aby w stylu poszczególnych komunikatów o błędach, które są wyświetlane przez `Html.ValidationMessage`, Utwórz klasę stylów CSS o nazwie `field-validation-error`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-274">To style the individual error messages that are displayed by `Html.ValidationMessage`, create a CSS style class named `field-validation-error`.</span></span> <span data-ttu-id="4fc72-275">Aby zdefiniować poszukiwanie podsumowania walidacji, Utwórz klasę stylów CSS o nazwie `validation-summary-errors`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-275">To define the look for the validation summary, create a CSS style class named `validation-summary-errors`.</span></span>

<span data-ttu-id="4fc72-276">Aby zobaczyć, jak działa ta technika, Dodaj element `<style>` w sekcji `<head>` strony.</span><span class="sxs-lookup"><span data-stu-id="4fc72-276">To see how this technique works, add a `<style>` element inside the `<head>` section of the page.</span></span> <span data-ttu-id="4fc72-277">Następnie zdefiniuj klasy stylów o nazwie `field-validation-error` i `validation-summary-errors`, które zawierają następujące reguły:</span><span class="sxs-lookup"><span data-stu-id="4fc72-277">Then define style classes named `field-validation-error` and `validation-summary-errors` that contain the following rules:</span></span>

[!code-cshtml[Main](entering-data/samples/sample13.cshtml?highlight=4-17)]

<span data-ttu-id="4fc72-278">Zazwyczaj prawdopodobnie umieścisz informacje o stylu w oddzielnym pliku *. css* , ale dla uproszczenia możesz umieścić je na stronie.</span><span class="sxs-lookup"><span data-stu-id="4fc72-278">Normally you'd probably put style information into a separate *.css* file, but for simplicity you can put them in the page for now.</span></span> <span data-ttu-id="4fc72-279">(W dalszej części tego samouczka przeniesiesz reguły CSS do oddzielnego pliku *. css* ).</span><span class="sxs-lookup"><span data-stu-id="4fc72-279">(Later in this tutorial set, you'll move the CSS rules to a separate *.css* file.)</span></span>

<span data-ttu-id="4fc72-280">W przypadku błędu walidacji metoda `Html.ValidationMessage` renderuje element `<span>`, który zawiera `class="field-validation-error"`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-280">If there's a validation error, the `Html.ValidationMessage` method renders a `<span>` element that includes `class="field-validation-error"`.</span></span> <span data-ttu-id="4fc72-281">Dodając definicję stylu dla tej klasy, można skonfigurować wygląd wiadomości.</span><span class="sxs-lookup"><span data-stu-id="4fc72-281">By adding a style definition for that class, you can configure what the message looks like.</span></span> <span data-ttu-id="4fc72-282">W przypadku wystąpienia błędów Metoda `ValidationSummary` podobnie dynamicznie renderuje atrybut `class="validation-summary-errors"`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-282">If there are errors, the `ValidationSummary` method likewise dynamically renders the attribute `class="validation-summary-errors"`.</span></span>

<span data-ttu-id="4fc72-283">Ponownie uruchom stronę i zanotuj kilka pól.</span><span class="sxs-lookup"><span data-stu-id="4fc72-283">Run the page again and deliberately leave out a couple of the fields.</span></span> <span data-ttu-id="4fc72-284">Błędy są teraz bardziej zauważalne.</span><span class="sxs-lookup"><span data-stu-id="4fc72-284">The errors are now more noticeable.</span></span> <span data-ttu-id="4fc72-285">(W rzeczywistości są one overdone, ale właśnie pokazują, co można zrobić).</span><span class="sxs-lookup"><span data-stu-id="4fc72-285">(In fact, they're overdone, but that's just to show what you can do.)</span></span>

![Dodawanie strony filmu zawierającej błędy walidacji, które zostały przypisane do stylu](entering-data/_static/image6.png)

## <a name="adding-a-link-to-the-movies-page"></a><span data-ttu-id="4fc72-287">Dodawanie linku do strony filmów</span><span class="sxs-lookup"><span data-stu-id="4fc72-287">Adding a Link to the Movies Page</span></span>

<span data-ttu-id="4fc72-288">Jednym z etapów końcowych jest wygodne przechodzenie do strony *addmovie* z oryginalnej listy filmów.</span><span class="sxs-lookup"><span data-stu-id="4fc72-288">One final step is to make it convenient to get to the *AddMovie* page from the original movie listing.</span></span>

<span data-ttu-id="4fc72-289">Otwórz ponownie stronę *filmy* .</span><span class="sxs-lookup"><span data-stu-id="4fc72-289">Open the *Movies* page again.</span></span> <span data-ttu-id="4fc72-290">Po tagu `</div>` zamykającego, który następuje po Pomocniku `WebGrid`, Dodaj następujący znacznik:</span><span class="sxs-lookup"><span data-stu-id="4fc72-290">After the closing `</div>` tag that follows the `WebGrid` helper, add the following markup:</span></span>

[!code-cshtml[Main](entering-data/samples/sample14.cshtml)]

<span data-ttu-id="4fc72-291">Zgodnie z oczekiwaniami ASP.NET interpretuje operator `~` jako element główny witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="4fc72-291">As you saw before, ASP.NET interprets the `~` operator as the root of the website.</span></span> <span data-ttu-id="4fc72-292">Nie musisz używać operatora `~`; Możesz użyć znacznika `<a href="./AddMovie">Add a movie</a>` lub innego sposobu definiowania ścieżki zrozumiałej dla kodu HTML.</span><span class="sxs-lookup"><span data-stu-id="4fc72-292">You don't have to use the `~` operator; you could use the markup `<a href="./AddMovie">Add a movie</a>` or some other way to define the path that HTML understands.</span></span> <span data-ttu-id="4fc72-293">Jednak operator `~` jest dobrym podejściem, gdy tworzysz linki dla stron Razor, ponieważ lokacja jest bardziej elastyczna — Jeśli przenosisz bieżącą stronę do podfolderu, link nadal przejdzie do strony *addmovie* .</span><span class="sxs-lookup"><span data-stu-id="4fc72-293">But the `~` operator is a good general approach when you create links for Razor pages, because it makes the site more flexible — if you move the current page to a subfolder, the link will still go to the *AddMovie* page.</span></span> <span data-ttu-id="4fc72-294">(Należy pamiętać, że operator `~` działa tylko na stronach *. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="4fc72-294">(Remember that the `~` operator only works in *.cshtml* pages.</span></span> <span data-ttu-id="4fc72-295">ASP.NET rozumie, ale nie jest to standardowy kod HTML.</span><span class="sxs-lookup"><span data-stu-id="4fc72-295">ASP.NET understands it, but it's not standard HTML.)</span></span>

<span data-ttu-id="4fc72-296">Gdy skończysz, Uruchom stronę *filmy* .</span><span class="sxs-lookup"><span data-stu-id="4fc72-296">When you're done, run the *Movies* page.</span></span> <span data-ttu-id="4fc72-297">Będzie wyglądać podobnie do tej strony:</span><span class="sxs-lookup"><span data-stu-id="4fc72-297">It will look like this page:</span></span>

![Strona filmów z linkiem do strony "Dodawanie filmów"](entering-data/_static/image7.png)

<span data-ttu-id="4fc72-299">Kliknij link **Dodaj film** , aby upewnić się, że przechodzi do strony *addmovie* .</span><span class="sxs-lookup"><span data-stu-id="4fc72-299">Click the **Add a movie** link to make sure that it goes to the *AddMovie* page.</span></span>

## <a name="coming-up-next"></a><span data-ttu-id="4fc72-300">Przyszłe przejście</span><span class="sxs-lookup"><span data-stu-id="4fc72-300">Coming Up Next</span></span>

<span data-ttu-id="4fc72-301">W następnym samouczku dowiesz się, jak umożliwić użytkownikom edycję danych znajdujących się już w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="4fc72-301">In the next tutorial, you'll learn how to let users edit data that's already in the database.</span></span>

## <a name="complete-listing-for-addmovie-page"></a><span data-ttu-id="4fc72-302">Pełna lista dla strony addmovie</span><span class="sxs-lookup"><span data-stu-id="4fc72-302">Complete Listing for AddMovie Page</span></span>

[!code-cshtml[Main](entering-data/samples/sample15.cshtml)]

## <a name="additional-resources"></a><span data-ttu-id="4fc72-303">Dodatkowe materiały</span><span class="sxs-lookup"><span data-stu-id="4fc72-303">Additional Resources</span></span>

- [<span data-ttu-id="4fc72-304">Wprowadzenie do programowania w ASP.NET sieci Web przy użyciu składni Razor</span><span class="sxs-lookup"><span data-stu-id="4fc72-304">Introduction to ASP.NET Web Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=202890)
- <span data-ttu-id="4fc72-305">[Instrukcja INSERT języka SQL](http://www.w3schools.com/sql/sql_insert.asp) w witrynie w3schools</span><span class="sxs-lookup"><span data-stu-id="4fc72-305">[SQL INSERT INTO Statement](http://www.w3schools.com/sql/sql_insert.asp) on the W3Schools site</span></span>
- <span data-ttu-id="4fc72-306">[Sprawdzanie poprawności danych wejściowych użytkownika w witrynach stron sieci Web ASP.NET](https://go.microsoft.com/fwlink/?LinkId=253002).</span><span class="sxs-lookup"><span data-stu-id="4fc72-306">[Validating User Input in ASP.NET Web Pages Sites](https://go.microsoft.com/fwlink/?LinkId=253002).</span></span> <span data-ttu-id="4fc72-307">Więcej informacji na temat pracy z pomocnikiem `Validation`.</span><span class="sxs-lookup"><span data-stu-id="4fc72-307">More information about working with the `Validation` helper.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="4fc72-308">[Poprzednie](form-basics.md)
> [dalej](updating-data.md)</span><span class="sxs-lookup"><span data-stu-id="4fc72-308">[Previous](form-basics.md)
[Next](updating-data.md)</span></span>

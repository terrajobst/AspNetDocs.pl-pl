---
uid: aspnet/overview/developing-apps-with-windows-azure/maintainable-azure-websites-managing-change-and-scale
title: 'Wskazówki dotyczące laboratorium: obsługa usługi Azure Websites: zarządzanie zmianami i skalowaniem | Microsoft Docs'
author: rick-anderson
description: W tym laboratorium dowiesz się, jak Microsoft Azure ułatwiają tworzenie i wdrażanie witryn sieci Web w środowisku produkcyjnym.
ms.author: riande
ms.date: 07/16/2014
ms.assetid: ecfd0eb4-c4ad-44e6-9db9-a2a66611ff6a
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/maintainable-azure-websites-managing-change-and-scale
msc.type: authoredcontent
ms.openlocfilehash: c88bae40a8aa092037c0b359ee391acaf161cf10
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78624272"
---
# <a name="hands-on-lab-maintainable-azure-websites-managing-change-and-scale"></a><span data-ttu-id="8f8c7-103">Ćwiczenia praktyczne: łatwe w obsłudze witryny internetowe platformy Azure: zarządzanie zmianami i skalowaniem</span><span class="sxs-lookup"><span data-stu-id="8f8c7-103">Hands on Lab: Maintainable Azure Websites: Managing Change and Scale</span></span>

<span data-ttu-id="8f8c7-104">przez [zespół Camp sieci Web](https://twitter.com/webcamps)</span><span class="sxs-lookup"><span data-stu-id="8f8c7-104">by [Web Camps Team](https://twitter.com/webcamps)</span></span>

[<span data-ttu-id="8f8c7-105">Pobierz zestaw szkoleniowy dla sieci Web Camp</span><span class="sxs-lookup"><span data-stu-id="8f8c7-105">Download Web Camps Training Kit</span></span>](https://aka.ms/webcamps-training-kit)

> <span data-ttu-id="8f8c7-106">Microsoft Azure ułatwia tworzenie i wdrażanie witryn sieci Web w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-106">Microsoft Azure makes it easy to build and deploy websites to production.</span></span> <span data-ttu-id="8f8c7-107">Ale nie jesteś gotowy, gdy aplikacja jest aktywna, zaczynasz od razu zacząć pracę.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-107">But you're not done when your application is live, you're just getting started!</span></span> <span data-ttu-id="8f8c7-108">Musisz obsługiwać zmieniające się wymagania, aktualizacje bazy danych, skalowanie i nie tylko.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-108">You'll need to handle changing requirements, database updates, scale, and more.</span></span> <span data-ttu-id="8f8c7-109">Na szczęście Azure App Service został objęty dużą ilością funkcji, które ułatwiają bezproblemowe działanie witryn.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-109">Fortunately, Azure App Service has you covered, with plenty of features to help you keep your sites running smoothly.</span></span>
>
> <span data-ttu-id="8f8c7-110">Platforma Azure oferuje bezpieczne i elastyczne opcje programowania, wdrażania i skalowania dla aplikacji sieci Web dowolnej wielkości.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-110">Azure offers secure and flexible development, deployment and scaling options for any size web application.</span></span> <span data-ttu-id="8f8c7-111">Korzystaj z istniejących narzędzi do tworzenia i wdrażania aplikacji bez konieczności zarządzania infrastrukturą.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-111">Leverage your existing tools to create and deploy applications without the hassle of managing infrastructure.</span></span>
>
> <span data-ttu-id="8f8c7-112">Zapewnij sobie produkcyjną aplikację sieci Web w kilka minut, korzystając z łatwego wdrażania zawartości utworzonej przy użyciu ulubionego narzędzia deweloperskiego.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-112">Provision a production web application yourself in minutes by easily deploying content created using your favorite development tool.</span></span> <span data-ttu-id="8f8c7-113">Istniejącą witrynę można wdrożyć bezpośrednio z kontroli źródła z obsługą usługi **git**, **GitHub**, **BitBucket**, **TFS**i nawet usługi **Dropbox**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-113">You can deploy an existing site directly from source control with support for **Git**, **GitHub**, **Bitbucket**, **TFS**, and even **DropBox**.</span></span> <span data-ttu-id="8f8c7-114">Wdrażaj bezpośrednio z ulubionych środowiska IDE lub skryptów przy użyciu **programu PowerShell** w systemie Windows lub w narzędziach **interfejsu wiersza polecenia** uruchomionych w dowolnym systemie operacyjnym.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-114">Deploy directly from your favorite IDE or from scripts using **PowerShell** in Windows or **CLI** tools running on any OS.</span></span> <span data-ttu-id="8f8c7-115">Po wdrożeniu witryny są stale aktualne dzięki obsłudze ciągłego wdrażania.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-115">Once deployed, keep your sites constantly up-to-date with support for continuous deployment.</span></span>
>
> <span data-ttu-id="8f8c7-116">Platforma Azure oferuje skalowalne i niezawodne rozwiązania magazynu w chmurze, kopii zapasowych i odzyskiwania dla dowolnych danych, dużych i małych.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-116">Azure provides scalable, durable cloud storage, backup, and recovery solutions for any data, big or small.</span></span> <span data-ttu-id="8f8c7-117">W przypadku wdrażania aplikacji w środowisku produkcyjnym usługi magazynu, takie jak tabele, obiekty blob i bazy danych SQL, ułatwiają skalowanie aplikacji w chmurze.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-117">When deploying applications to a production environment, storage services such as Tables, Blobs and SQL Databases, help you scale your application in the cloud.</span></span>
>
> <span data-ttu-id="8f8c7-118">W przypadku baz danych SQL ważne jest, aby zachować aktualność bazy danych podczas wdrażania nowych wersji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-118">With SQL Databases, it is important to keep your productive database up-to-date when deploying new versions of your application.</span></span> <span data-ttu-id="8f8c7-119">Dzięki **migracje Code First platformy Entity Frameworkom**rozwój i wdrażanie modelu danych zostały uproszczone, aby aktualizować środowiska w kilka minut.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-119">Thanks to **Entity Framework Code First Migrations**, the development and deployment of your data model has been simplified to update your environments in minutes.</span></span> <span data-ttu-id="8f8c7-120">W ramach tego praktycznego laboratorium zostaną wyświetlone różne tematy, które można napotkać podczas wdrażania aplikacji sieci Web w środowiskach produkcyjnych w Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-120">This hands-on lab will show you the different topics you could encounter when deploying your web app to production environments in Microsoft Azure.</span></span>
>
> <span data-ttu-id="8f8c7-121">Wszystkie przykładowe kod i fragmenty kodu są zawarte w zestawie szkoleń w sieci Web Camp, które są dostępne w [https://aka.ms/webcamps-training-kit](https://aka.ms/webcamps-training-kit).</span><span class="sxs-lookup"><span data-stu-id="8f8c7-121">All sample code and snippets are included in the Web Camps Training Kit, available at [https://aka.ms/webcamps-training-kit](https://aka.ms/webcamps-training-kit).</span></span>
>
> <span data-ttu-id="8f8c7-122">Aby uzyskać więcej szczegółowych informacji dotyczących tego tematu, zobacz [Tworzenie aplikacji w chmurze w świecie przy użyciu książki elektronicznej platformy Azure](building-real-world-cloud-apps-with-windows-azure/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="8f8c7-122">For more in-depth coverage of this topic, see the [Building Real-World Cloud Apps with Azure e-book](building-real-world-cloud-apps-with-windows-azure/introduction.md).</span></span>

<a id="Overview"></a>
## <a name="overview"></a><span data-ttu-id="8f8c7-123">Omówienie</span><span class="sxs-lookup"><span data-stu-id="8f8c7-123">Overview</span></span>

<a id="Objectives"></a>
### <a name="objectives"></a><span data-ttu-id="8f8c7-124">Cele</span><span class="sxs-lookup"><span data-stu-id="8f8c7-124">Objectives</span></span>

<span data-ttu-id="8f8c7-125">W tym ćwiczeniu dowiesz się, jak:</span><span class="sxs-lookup"><span data-stu-id="8f8c7-125">In this hands-on lab, you will learn how to:</span></span>

- <span data-ttu-id="8f8c7-126">Włączanie migracji Entity Framework przy użyciu istniejącego modelu</span><span class="sxs-lookup"><span data-stu-id="8f8c7-126">Enable Entity Framework Migrations with an existing model</span></span>
- <span data-ttu-id="8f8c7-127">Zaktualizuj model obiektów i bazę danych odpowiednio przy użyciu migracji Entity Framework</span><span class="sxs-lookup"><span data-stu-id="8f8c7-127">Update the object model and database accordingly using Entity Framework Migrations</span></span>
- <span data-ttu-id="8f8c7-128">Wdrażanie do Azure App Service przy użyciu usługi git</span><span class="sxs-lookup"><span data-stu-id="8f8c7-128">Deploy to Azure App Service using Git</span></span>
- <span data-ttu-id="8f8c7-129">Wycofywanie do poprzedniego wdrożenia przy użyciu portalu zarządzania platformy Azure</span><span class="sxs-lookup"><span data-stu-id="8f8c7-129">Rollback to a previous deployment using the Azure Management portal</span></span>
- <span data-ttu-id="8f8c7-130">Skalowanie aplikacji sieci Web przy użyciu usługi Azure Storage</span><span class="sxs-lookup"><span data-stu-id="8f8c7-130">Use Azure Storage to scale a web app</span></span>
- <span data-ttu-id="8f8c7-131">Konfigurowanie automatycznego skalowania aplikacji sieci Web przy użyciu usługi Azure portal zarządzania</span><span class="sxs-lookup"><span data-stu-id="8f8c7-131">Configure auto-scaling for a web app using the Azure Management Portal</span></span>
- <span data-ttu-id="8f8c7-132">Tworzenie i Konfigurowanie projektu testu obciążenia w programie Visual Studio</span><span class="sxs-lookup"><span data-stu-id="8f8c7-132">Create and configure a load test project in Visual Studio</span></span>

<a id="Prerequisites"></a>
### <a name="prerequisites"></a><span data-ttu-id="8f8c7-133">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="8f8c7-133">Prerequisites</span></span>

<span data-ttu-id="8f8c7-134">Następujące czynności są wymagane do wykonania tego laboratorium praktycznego:</span><span class="sxs-lookup"><span data-stu-id="8f8c7-134">The following is required to complete this hands-on lab:</span></span>

- <span data-ttu-id="8f8c7-135">[Visual Studio Express 2013 dla sieci Web](https://www.microsoft.com/visualstudio/) lub nowszego</span><span class="sxs-lookup"><span data-stu-id="8f8c7-135">[Visual Studio Express 2013 for Web](https://www.microsoft.com/visualstudio/) or greater</span></span>
- [<span data-ttu-id="8f8c7-136">Zestaw Azure SDK dla programu .NET 2,2</span><span class="sxs-lookup"><span data-stu-id="8f8c7-136">Azure SDK for .NET 2.2</span></span>](https://www.microsoft.com/windowsazure/sdk/)
- [<span data-ttu-id="8f8c7-137">System kontroli wersji GIT</span><span class="sxs-lookup"><span data-stu-id="8f8c7-137">GIT Version Control System</span></span>](http://git-scm.com/download)
- <span data-ttu-id="8f8c7-138">Subskrypcja Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="8f8c7-138">A Microsoft Azure subscription</span></span>

    - <span data-ttu-id="8f8c7-139">Zarejestruj się, aby skorzystać z [bezpłatnej wersji próbnej](https://aka.ms/watk-freetrial)</span><span class="sxs-lookup"><span data-stu-id="8f8c7-139">Sign up for a [Free Trial](https://aka.ms/watk-freetrial)</span></span>
    - <span data-ttu-id="8f8c7-140">Jeśli jesteś Visual Studio Professional, Test Professional, Premium lub Ultimate z subskrypcją MSDN lub Platformy MSDN, Aktywuj teraz [korzyść MSDN](https://aka.ms/watk-msdn) , aby rozpocząć opracowywanie i testowanie na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="8f8c7-140">If you are a Visual Studio Professional, Test Professional, Premium or Ultimate with MSDN or MSDN Platforms subscriber, activate your [MSDN benefit](https://aka.ms/watk-msdn) now to start developing and testing on Azure</span></span>
    - <span data-ttu-id="8f8c7-141">[BizSpark](https://aka.ms/watk-bizspark) członkowie automatycznie otrzymują korzyść platformy Azure za pomocą subskrypcji Visual Studio Ultimate z subskrypcją MSDN</span><span class="sxs-lookup"><span data-stu-id="8f8c7-141">[BizSpark](https://aka.ms/watk-bizspark) members automatically receive the Azure benefit through their Visual Studio Ultimate with MSDN subscriptions</span></span>
    - <span data-ttu-id="8f8c7-142">Członkowie programu [Microsoft Partner Network](https://aka.ms/watk-mpn) Cloud Essentials otrzymują bezpłatnie środki na korzystanie z platformy Azure</span><span class="sxs-lookup"><span data-stu-id="8f8c7-142">Members of the [Microsoft Partner Network](https://aka.ms/watk-mpn) Cloud Essentials program receive monthly Azure credits at no charge</span></span>

<a id="Setup"></a>
### <a name="setup"></a><span data-ttu-id="8f8c7-143">Konfigurowanie</span><span class="sxs-lookup"><span data-stu-id="8f8c7-143">Setup</span></span>

<span data-ttu-id="8f8c7-144">Aby można było uruchomić ćwiczenia w tym ćwiczeniu, należy najpierw skonfigurować środowisko.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-144">In order to run the exercises in this hands-on lab, you will need to set up your environment first.</span></span>

1. <span data-ttu-id="8f8c7-145">Otwórz Eksploratora Windows i przejdź do folderu **źródłowego** laboratorium.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-145">Open Windows Explorer and browse to the lab's **Source** folder.</span></span>
2. <span data-ttu-id="8f8c7-146">Kliknij prawym przyciskiem myszy pozycję **Setup. cmd** i wybierz polecenie **Uruchom jako administrator** , aby uruchomić proces instalacji, który skonfiguruje środowisko i zainstaluje fragmenty kodu programu Visual Studio dla tego laboratorium.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-146">Right-click on **Setup.cmd** and select **Run as administrator** to launch the setup process that will configure your environment and install the Visual Studio code snippets for this lab.</span></span>
3. <span data-ttu-id="8f8c7-147">Jeśli zostanie wyświetlone okno dialogowe Kontrola konta użytkownika, potwierdź akcję, aby wykonać operację.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-147">If the User Account Control dialog is shown, confirm the action to proceed.</span></span>

> [!NOTE]
> <span data-ttu-id="8f8c7-148">Upewnij się, że wszystkie zależności dla tego laboratorium zostały sprawdzone przed uruchomieniem Instalatora.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-148">Make sure you have checked all the dependencies for this lab before running the setup.</span></span>

<a id="CodeSnippets"></a>
### <a name="using-the-code-snippets"></a><span data-ttu-id="8f8c7-149">Używanie fragmentów kodu</span><span class="sxs-lookup"><span data-stu-id="8f8c7-149">Using the Code Snippets</span></span>

<span data-ttu-id="8f8c7-150">W całym dokumencie laboratoryjnym pojawi się monit o wstawienie bloków kodu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-150">Throughout the lab document, you will be instructed to insert code blocks.</span></span> <span data-ttu-id="8f8c7-151">Dla wygody większość tego kodu jest udostępniana jako fragmenty Visual Studio Code, do których można uzyskać dostęp z poziomu Visual Studio 2013, aby uniknąć konieczności ręcznego dodawania go.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-151">For your convenience, most of this code is provided as Visual Studio Code Snippets, which you can access from within Visual Studio 2013 to avoid having to add it manually.</span></span>

> [!NOTE]
> <span data-ttu-id="8f8c7-152">Każdemu z nich towarzyszy rozpoczęcie rozwiązanie znajdujące się w folderze **BEGIN** w ćwiczeniu, który umożliwia wykonywanie poszczególnych czynności niezależnie od innych.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-152">Each exercise is accompanied by a starting solution located in the **Begin** folder of the exercise that allows you to follow each exercise independently of the others.</span></span> <span data-ttu-id="8f8c7-153">Należy pamiętać, że fragmenty kodu dodawane podczas wykonywania nie są dostępne w tych rozwiązaniach i mogą nie działać do czasu ukończenia ćwiczenia.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-153">Please be aware that the code snippets that are added during an exercise are missing from these starting solutions and may not work until you have completed the exercise.</span></span> <span data-ttu-id="8f8c7-154">Wewnątrz kodu źródłowego dla ćwiczenia znajdziesz również folder **końcowy** zawierający rozwiązanie programu Visual Studio z kodem, który wynika z wykonania czynności w odpowiednim ćwiczeniu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-154">Inside the source code for an exercise, you will also find an **End** folder containing a Visual Studio solution with the code that results from completing the steps in the corresponding exercise.</span></span> <span data-ttu-id="8f8c7-155">Te rozwiązania można wykorzystać jako wskazówkę, jeśli potrzebujesz dodatkowej pomocy podczas pracy w ramach tego praktycznego laboratorium.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-155">You can use these solutions as guidance if you need additional help as you work through this hands-on lab.</span></span>

---

<a id="Exercises"></a>
## <a name="exercises"></a><span data-ttu-id="8f8c7-156">Symulacyjn</span><span class="sxs-lookup"><span data-stu-id="8f8c7-156">Exercises</span></span>

<span data-ttu-id="8f8c7-157">To laboratorium praktyczne obejmuje następujące ćwiczenia:</span><span class="sxs-lookup"><span data-stu-id="8f8c7-157">This hands-on lab includes the following exercises:</span></span>

1. [<span data-ttu-id="8f8c7-158">Korzystanie z Entity Framework migracji</span><span class="sxs-lookup"><span data-stu-id="8f8c7-158">Using Entity Framework Migrations</span></span>](#Exercise1)
2. [<span data-ttu-id="8f8c7-159">Wdrażanie aplikacji sieci Web do przemieszczania</span><span class="sxs-lookup"><span data-stu-id="8f8c7-159">Deploying a Web App to Staging</span></span>](#Exercise2)
3. [<span data-ttu-id="8f8c7-160">Wykonywanie wycofywania wdrożenia w środowisku produkcyjnym</span><span class="sxs-lookup"><span data-stu-id="8f8c7-160">Performing Deployment Rollback in Production</span></span>](#Exercise3)
4. [<span data-ttu-id="8f8c7-161">Skalowanie przy użyciu usługi Azure Storage</span><span class="sxs-lookup"><span data-stu-id="8f8c7-161">Scaling Using Azure Storage</span></span>](#Exercise4)
5. <span data-ttu-id="8f8c7-162">[Używanie skalowania automatycznego dla Web Apps](#Exercise5) (opcjonalnie w przypadku wersji Visual Studio 2013 Ultimate)</span><span class="sxs-lookup"><span data-stu-id="8f8c7-162">[Using Autoscale for Web Apps](#Exercise5) (Optional for Visual Studio 2013 Ultimate edition)</span></span>

<span data-ttu-id="8f8c7-163">Szacowany czas wykonywania tego laboratorium: **75 minut**</span><span class="sxs-lookup"><span data-stu-id="8f8c7-163">Estimated time to complete this lab: **75 minutes**</span></span>

> [!NOTE]
> <span data-ttu-id="8f8c7-164">Po pierwszym uruchomieniu programu Visual Studio należy wybrać jedną z wstępnie zdefiniowanych kolekcji ustawień.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-164">When you first start Visual Studio, you must select one of the predefined settings collections.</span></span> <span data-ttu-id="8f8c7-165">Każda wstępnie zdefiniowana kolekcja jest zaprojektowana tak, aby była zgodna z konkretnym stylem deweloperskim i określa układy okien, zachowanie edytora, fragmenty kodu IntelliSense i opcje okna dialogowego.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-165">Each predefined collection is designed to match a particular development style and determines window layouts, editor behavior, IntelliSense code snippets, and dialog box options.</span></span> <span data-ttu-id="8f8c7-166">Procedury przedstawione w tym laboratorium opisują akcje niezbędne do wykonania danego zadania w programie Visual Studio, gdy jest używana **Ogólna kolekcja ustawień deweloperskich** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-166">The procedures in this lab describe the actions necessary to accomplish a given task in Visual Studio when using the **General Development Settings** collection.</span></span> <span data-ttu-id="8f8c7-167">W przypadku wybrania innej kolekcji ustawień dla środowiska programistycznego mogą wystąpić różnice w czynnościach, które należy wziąć pod uwagę.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-167">If you choose a different settings collection for your development environment, there may be differences in the steps that you should take into account.</span></span>

<a id="Exercise1"></a>
### <a name="exercise-1-using-entity-framework-migrations"></a><span data-ttu-id="8f8c7-168">Ćwiczenie 1: korzystanie z Entity Framework migracji</span><span class="sxs-lookup"><span data-stu-id="8f8c7-168">Exercise 1: Using Entity Framework Migrations</span></span>

<span data-ttu-id="8f8c7-169">Podczas tworzenia aplikacji model danych może ulec zmianie z upływem czasu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-169">When you are developing an application, your data model might change over time.</span></span> <span data-ttu-id="8f8c7-170">Te zmiany mogą wpływać na istniejący model bazy danych (Jeśli tworzysz nową wersję) i ważne jest, aby zachować aktualność bazy danych, aby zapobiec wystąpieniu błędów.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-170">These changes could affect the existing model in your database (if you are creating a new version) and it is important to keep your database up-to-date to prevent errors.</span></span>

<span data-ttu-id="8f8c7-171">Aby uprościć śledzenie tych zmian w modelu, **migracje Code First platformy Entity Framework** automatycznie wykrywać zmiany porównujące model ze schematem bazy danych i generować określony kod w celu zaktualizowania bazy danych, tworząc nowe *wersje* bazy danych.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-171">To simplify the tracking of these changes in your model, **Entity Framework Code First Migrations** automatically detect changes comparing your model with the database schema and generates specific code to update your database, creating new *versions* of your database.</span></span>

<span data-ttu-id="8f8c7-172">W tym ćwiczeniu pokazano, jak włączyć **migracje** dla aplikacji oraz jak łatwo wykrywać i generować zmiany w celu zaktualizowania baz danych.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-172">This exercise shows you how to enable **Migrations** for your application and how you can easily detect and generate changes to update your databases.</span></span>

<a id="Ex1Task1"></a>
#### <a name="task-1--enabling-migrations"></a><span data-ttu-id="8f8c7-173">Zadanie 1 — Włączanie migracji</span><span class="sxs-lookup"><span data-stu-id="8f8c7-173">Task 1 – Enabling Migrations</span></span>

<span data-ttu-id="8f8c7-174">W tym zadaniu przedstawiono kroki umożliwiające włączenie **migracje Code First platformy Entity Framework** do bazy danych **quizu pojedynek maniaków komputerowych** , zmiana modelu i zrozumienie sposobu odzwierciedlenia tych zmian w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-174">In this task, you will go through the steps of enabling **Entity Framework Code First Migrations** to the **Geek Quiz** database, changing the model and understanding how those changes are reflected in the database.</span></span>

1. <span data-ttu-id="8f8c7-175">Otwórz program Visual Studio i Otwórz plik rozwiązania **GeekQuiz. sln** z **Source\Ex1-UsingEntityFrameworkMigrations\Begin**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-175">Open Visual Studio and open the **GeekQuiz.sln** solution file from **Source\Ex1-UsingEntityFrameworkMigrations\Begin**.</span></span>
2. <span data-ttu-id="8f8c7-176">Skompiluj rozwiązanie, aby pobrać i zainstalować zależności pakietów **NuGet** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-176">Build the solution in order to download and install the **NuGet** package dependencies.</span></span> <span data-ttu-id="8f8c7-177">W tym celu kliknij prawym przyciskiem myszy rozwiązanie, a następnie kliknij pozycję **Kompiluj rozwiązanie** lub naciśnij **klawisze CTRL + SHIFT + B**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-177">To do this, right-click the solution and click **Build Solution** or press **Ctrl + Shift + B**.</span></span>
3. <span data-ttu-id="8f8c7-178">W menu **Narzędzia** w programie Visual Studio wybierz pozycję **Menedżer pakietów NuGet**, a następnie kliknij pozycję **konsola Menedżera pakietów**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-178">From the **Tools** menu in Visual Studio, select **NuGet Package Manager**, and then click **Package Manager Console**.</span></span>
4. <span data-ttu-id="8f8c7-179">W **konsoli Menedżera pakietów**wprowadź następujące polecenie, a następnie naciśnij klawisz **Enter**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-179">In the **Package Manager Console**, enter the following command and then press **Enter**.</span></span> <span data-ttu-id="8f8c7-180">Zostanie utworzona początkowa migracja oparta na istniejącym modelu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-180">An initial migration based on the existing model will be created.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample1.ps1)]

    <span data-ttu-id="8f8c7-181">![Włączanie migracji](maintainable-azure-websites-managing-change-and-scale/_static/image1.png "Włączanie migracji")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-181">![Enabling Migrations](maintainable-azure-websites-managing-change-and-scale/_static/image1.png "Enabling Migrations")</span></span>

    <span data-ttu-id="8f8c7-182">*Włączanie migracji*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-182">*Enabling Migrations*</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-183">To polecenie dodaje folder **migracji** do projektu quizu pojedynek maniaków komputerowych, który zawiera plik o nazwie **Configuration.cs**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-183">This command adds a **Migrations** folder to Geek Quiz project that contains a file called **Configuration.cs**.</span></span> <span data-ttu-id="8f8c7-184">Klasa **konfiguracji** umożliwia skonfigurowanie sposobu zachowania migracji w kontekście.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-184">The **Configuration** class allows you to configure how Migrations behaves for your context.</span></span>
5. <span data-ttu-id="8f8c7-185">Po włączeniu migracji należy zaktualizować klasę **konfiguracji** , aby wypełnić bazę danych początkowymi danymi, które są wymagane przez **Quiz pojedynek maniaków komputerowych** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-185">With Migrations enabled, you need to update the **Configuration** class to populate the database with the initial data that **Geek Quiz** requires.</span></span> <span data-ttu-id="8f8c7-186">W obszarze **migracje**Zastąp plik **Configuration.cs** plikiem znajdującym się w folderze **Source\Assets** w tym laboratorium.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-186">Under **Migrations**, replace the **Configuration.cs** file with the one located in the **Source\Assets** folder of this lab.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-187">Ponieważ **migracje** spowodują wywołanie metody **inicjatora** przy każdej aktualizacji bazy danych, należy się upewnić, że rekordy nie są zduplikowane w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-187">Since **Migrations** will call the **Seed** method with every database update, you need to be sure that records are not duplicated in the database.</span></span> <span data-ttu-id="8f8c7-188">Metoda **AddOrUpdate** pomaga zapobiegać duplikowaniu danych.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-188">The **AddOrUpdate** method will help to prevent duplicate data.</span></span>
6. <span data-ttu-id="8f8c7-189">Aby dodać początkową migrację, wprowadź następujące polecenie, a następnie naciśnij klawisz **Enter**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-189">To add an initial migration, enter the following command and then press **Enter**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-190">Upewnij się, że w wystąpieniu LocalDB nie ma bazy danych o nazwie &quot;GeekQuizProd&quot;.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-190">Make sure that there is no database named &quot;GeekQuizProd&quot; in your LocalDB instance.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample2.ps1)]

    <span data-ttu-id="8f8c7-191">![Dodawanie migracji schematu bazowego](maintainable-azure-websites-managing-change-and-scale/_static/image2.png "Dodawanie migracji schematu bazowego")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-191">![Adding base schema migration](maintainable-azure-websites-managing-change-and-scale/_static/image2.png "Adding base schema migration")</span></span>

    <span data-ttu-id="8f8c7-192">*Dodawanie migracji schematu bazowego*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-192">*Adding base schema migration*</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-193">Po zakończeniu migracji **dodatek** będzie szkieletem następnej migracji na podstawie zmian wprowadzonych w modelu od momentu utworzenia ostatniej migracji.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-193">**Add-Migration** will scaffold the next migration based on changes you have made to your model since the last migration was created.</span></span> <span data-ttu-id="8f8c7-194">W tym przypadku, ponieważ jest to pierwsza migracja projektu, spowoduje dodanie skryptów w celu utworzenia wszystkich tabel zdefiniowanych w klasie **TriviaContext** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-194">In this case, as it is the first migration of the project, it will add the scripts to create all the tables defined in the **TriviaContext** class.</span></span>
7. <span data-ttu-id="8f8c7-195">Wykonaj migrację, aby zaktualizować bazę danych, uruchamiając następujące polecenie.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-195">Execute the migration to update the database by running the following command.</span></span> <span data-ttu-id="8f8c7-196">Dla tego polecenia należy określić flagę **verbose** , aby wyświetlić instrukcje SQL mające zastosowanie do docelowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-196">For this command you will specify the **Verbose** flag to view the SQL statements being applied to the target database.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample3.ps1)]

    <span data-ttu-id="8f8c7-197">![Tworzenie początkowej bazy danych](maintainable-azure-websites-managing-change-and-scale/_static/image3.png "Tworzenie początkowej bazy danych")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-197">![Creating initial database](maintainable-azure-websites-managing-change-and-scale/_static/image3.png "Creating initial database")</span></span>

    <span data-ttu-id="8f8c7-198">*Tworzenie początkowej bazy danych*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-198">*Creating initial database*</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-199">**Aktualizacja — baza danych** będzie stosować wszystkie oczekujące migracje do bazy danych programu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-199">**Update-Database** will apply any pending migrations to the database.</span></span> <span data-ttu-id="8f8c7-200">W takim przypadku zostanie utworzona baza danych przy użyciu parametrów połączenia zdefiniowanych w pliku Web. config.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-200">In this case, it will create the database using the connection string defined in your web.config file.</span></span>
8. <span data-ttu-id="8f8c7-201">Przejdź do menu **Widok** i Otwórz **Eksplorator obiektów SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-201">Go to **View** menu and open **SQL Server Object Explorer**.</span></span>

    <span data-ttu-id="8f8c7-202">![Otwórz w Eksplorator obiektów SQL Server](maintainable-azure-websites-managing-change-and-scale/_static/image4.png "Otwórz w Eksplorator obiektów SQL Server")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-202">![Open in SQL Server Object Explorer](maintainable-azure-websites-managing-change-and-scale/_static/image4.png "Open in SQL Server Object Explorer")</span></span>

    <span data-ttu-id="8f8c7-203">*Otwórz w Eksplorator obiektów SQL Server*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-203">*Open in SQL Server Object Explorer*</span></span>
9. <span data-ttu-id="8f8c7-204">W oknie **Eksplorator obiektów SQL Server** Połącz się z wystąpieniem LocalDB, klikając prawym przyciskiem myszy węzeł **SQL Server** i wybierając polecenie **Dodaj SQL Server...** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-204">In the **SQL Server Object Explorer** window, connect to your LocalDB instance by right-clicking the **SQL Server** node and selecting **Add SQL Server...** option.</span></span>

    <span data-ttu-id="8f8c7-205">![Dodawanie wystąpienia SQL Server](maintainable-azure-websites-managing-change-and-scale/_static/image5.png "Dodawanie wystąpienia SQL Server")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-205">![Adding a SQL Server Instance](maintainable-azure-websites-managing-change-and-scale/_static/image5.png "Adding a SQL Server Instance")</span></span>

    <span data-ttu-id="8f8c7-206">*Dodawanie wystąpienia SQL Server do Eksplorator obiektów SQL Server*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-206">*Adding a SQL Server instance to SQL Server Object Explorer*</span></span>
10. <span data-ttu-id="8f8c7-207">Ustaw **nazwę serwera** na *(LocalDB) \V11.0* i pozostaw **uwierzytelnianie systemu Windows** jako tryb uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-207">Set the **server name** to *(localdb)\v11.0* and leave **Windows Authentication** as your authentication mode.</span></span> <span data-ttu-id="8f8c7-208">Kliknij pozycję **Połącz**, aby kontynuować.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-208">Click **Connect** to continue.</span></span>

    <span data-ttu-id="8f8c7-209">![Nawiązywanie połączenia z usługą LocalDB](maintainable-azure-websites-managing-change-and-scale/_static/image6.png "Nawiązywanie połączenia z usługą LocalDB")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-209">![Connecting to LocalDB](maintainable-azure-websites-managing-change-and-scale/_static/image6.png "Connecting to LocalDB")</span></span>

    <span data-ttu-id="8f8c7-210">*Nawiązywanie połączenia z usługą LocalDB*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-210">*Connecting to LocalDB*</span></span>
11. <span data-ttu-id="8f8c7-211">Otwórz bazę danych **GeekQuizProd** i rozwiń węzeł **tabele** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-211">Open the **GeekQuizProd** database and expand the **Tables** node.</span></span> <span data-ttu-id="8f8c7-212">Jak widać, polecenie **Update-Database** wygenerowało wszystkie tabele zdefiniowane w klasie **TriviaContext** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-212">As you can see, the **Update-Database** command generated all the tables defined in the **TriviaContext** class.</span></span> <span data-ttu-id="8f8c7-213">Znajdź obiekt **dbo. TriviaQuestions** tabelę i Otwórz węzeł kolumny.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-213">Locate the **dbo.TriviaQuestions** table and open the columns node.</span></span> <span data-ttu-id="8f8c7-214">W następnym zadaniu dodasz nową kolumnę do tej tabeli i zaktualizujesz bazę danych przy użyciu **migracji**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-214">In the next task, you will add a new column to this table and update the database using **Migrations**.</span></span>

    <span data-ttu-id="8f8c7-215">![Kolumny pytań kwizy](maintainable-azure-websites-managing-change-and-scale/_static/image7.png "Kolumny pytań kwizy")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-215">![Trivia Questions Columns](maintainable-azure-websites-managing-change-and-scale/_static/image7.png "Trivia Questions Columns")</span></span>

    <span data-ttu-id="8f8c7-216">*Kolumny pytań kwizy*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-216">*Trivia Questions Columns*</span></span>

<a id="Ex1Task2"></a>
#### <a name="task-2--updating-database-schema-using-migrations"></a><span data-ttu-id="8f8c7-217">Zadanie 2 — aktualizowanie schematu bazy danych za pomocą migracji</span><span class="sxs-lookup"><span data-stu-id="8f8c7-217">Task 2 – Updating Database Schema Using Migrations</span></span>

<span data-ttu-id="8f8c7-218">W tym zadaniu będziesz używać **migracje Code First platformy Entity Framework** do wykrywania zmiany w modelu i generowania niezbędnego kodu w celu zaktualizowania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-218">In this task, you will use **Entity Framework Code First Migrations** to detect a change in your model and generate the necessary code to update the database.</span></span> <span data-ttu-id="8f8c7-219">Jednostkę **TriviaQuestions** należy zaktualizować, dodając do niej nową właściwość.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-219">You will update the **TriviaQuestions** entity by adding a new property to it.</span></span> <span data-ttu-id="8f8c7-220">Następnie uruchomisz polecenia, aby utworzyć nową migrację w celu uwzględnienia nowej kolumny w tabeli.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-220">Then you will run commands to create a new Migration to include the new column in the table.</span></span>

1. <span data-ttu-id="8f8c7-221">W **Eksplorator rozwiązań**kliknij dwukrotnie plik **TriviaQuestion.cs** znajdujący się wewnątrz folderu **models** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-221">In **Solution Explorer**, double-click the **TriviaQuestion.cs** file located inside the **Models** folder.</span></span>
2. <span data-ttu-id="8f8c7-222">Dodaj nową właściwość o nazwie **Hint**, jak pokazano w poniższym fragmencie kodu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-222">Add a new property named **Hint**, as shown in the following code snippet.</span></span>

    [!code-csharp[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample4.cs)]
3. <span data-ttu-id="8f8c7-223">W **konsoli Menedżera pakietów**wprowadź następujące polecenie, a następnie naciśnij klawisz **Enter**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-223">In the **Package Manager Console**, enter the following command and then press **Enter**.</span></span> <span data-ttu-id="8f8c7-224">Zostanie utworzona nowa migracja odzwierciedlająca zmianę w modelu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-224">A new migration will be created reflecting the change in our model.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample5.ps1)]

    <span data-ttu-id="8f8c7-225">![Dodawanie-migracja](maintainable-azure-websites-managing-change-and-scale/_static/image8.png "Dodawanie-migracja")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-225">![Add-Migration](maintainable-azure-websites-managing-change-and-scale/_static/image8.png "Add-Migration")</span></span>

    <span data-ttu-id="8f8c7-226">*Dodawanie-migracja*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-226">*Add-Migration*</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-227">Plik migracji składa się z dwóch metod — w **górę** i **w dół**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-227">A Migration file is composed of two methods, **Up** and **Down**.</span></span>
    >
    > - <span data-ttu-id="8f8c7-228">Metoda **up** zostanie użyta do określenia, jakie zmiany bieżąca wersja naszej aplikacji musi zastosować do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-228">The **Up** method will be used to specify what changes the current version of our application need to apply to the database.</span></span>
    > - <span data-ttu-id="8f8c7-229">W **dół** jest używany do odwrócenia zmian, które zostały dodane do metody **up** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-229">The **Down** is used to reverse the changes we have added to the **Up** method.</span></span>
    >
    > <span data-ttu-id="8f8c7-230">Gdy migracja bazy danych aktualizuje bazę danych, zostanie uruchomiona wszystkie migracje w kolejności sygnatur czasowych, a tylko te, które nie były używane od ostatniej aktualizacji (\_tabela MigrationHistory śledzi zastosowanych migracji).</span><span class="sxs-lookup"><span data-stu-id="8f8c7-230">When the Database Migration updates the database, it will run all migrations in the timestamp order, and only those that have not been used since the last update (The \_MigrationHistory table keeps track of which migrations have been applied).</span></span> <span data-ttu-id="8f8c7-231">Metoda **up** wszystkich migracji zostanie wywołana i wprowadzi zmiany w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-231">The **Up** method of all migrations will be called and will make the changes we have specified to the database.</span></span> <span data-ttu-id="8f8c7-232">Jeśli zdecydujesz się powrócić do poprzedniej migracji, metoda w **dół** zostanie wywołana, aby ponownie wykonać zmiany w odwrotnej kolejności.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-232">If we decide to go back to a previous migration, the **Down** method will be called to redo the changes in a reverse order.</span></span>
4. <span data-ttu-id="8f8c7-233">W **konsoli Menedżera pakietów**wprowadź następujące polecenie, a następnie naciśnij klawisz **Enter**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-233">In the **Package Manager Console**, enter the following command and then press **Enter**.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample6.ps1)]
5. <span data-ttu-id="8f8c7-234">Dane wyjściowe polecenia **Update-Database** wygenerowały instrukcję **ALTER TABLE** SQL, aby dodać nową kolumnę do tabeli **TriviaQuestions** , jak pokazano na poniższej ilustracji.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-234">The output of the **Update-Database** command generated an **Alter Table** SQL statement to add a new column to the **TriviaQuestions** table, as shown in the image below.</span></span>

    <span data-ttu-id="8f8c7-235">![Wygenerowana instrukcja SQL Add Column](maintainable-azure-websites-managing-change-and-scale/_static/image9.png "Wygenerowana instrukcja SQL Add Column")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-235">![Add column SQL statement generated](maintainable-azure-websites-managing-change-and-scale/_static/image9.png "Add column SQL statement generated")</span></span>

    <span data-ttu-id="8f8c7-236">*Wygenerowana instrukcja SQL Add Column*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-236">*Add column SQL statement generated*</span></span>
6. <span data-ttu-id="8f8c7-237">W **Eksplorator obiektów SQL Server**Odśwież obiekt **dbo. TriviaQuestions** tabelę i sprawdź, czy jest wyświetlana nowa kolumna **podpowiedzi** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-237">In **SQL Server Object Explorer**, refresh the **dbo.TriviaQuestions** table and check that the new **Hint** column is displayed.</span></span>

    <span data-ttu-id="8f8c7-238">![Wyświetlanie nowej kolumny podpowiedzi](maintainable-azure-websites-managing-change-and-scale/_static/image10.png "Wyświetlanie nowej kolumny podpowiedzi")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-238">![Showing the new Hint Column](maintainable-azure-websites-managing-change-and-scale/_static/image10.png "Showing the new Hint Column")</span></span>

    <span data-ttu-id="8f8c7-239">*Wyświetlanie nowej kolumny podpowiedzi*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-239">*Showing the new Hint Column*</span></span>
7. <span data-ttu-id="8f8c7-240">W edytorze **TriviaQuestion.cs** Dodaj ograniczenie **StringLength** do właściwości *wskazówki* , jak pokazano w poniższym fragmencie kodu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-240">Back in the **TriviaQuestion.cs** editor, add a **StringLength** constraint to the *Hint* property, as shown in the following code snippet.</span></span>

    [!code-csharp[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample7.cs)]
8. <span data-ttu-id="8f8c7-241">W **konsoli Menedżera pakietów**wprowadź następujące polecenie, a następnie naciśnij klawisz **Enter**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-241">In the **Package Manager Console**, enter the following command and then press **Enter**.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample8.ps1)]
9. <span data-ttu-id="8f8c7-242">W **konsoli Menedżera pakietów**wprowadź następujące polecenie, a następnie naciśnij klawisz **Enter**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-242">In the **Package Manager Console**, enter the following command and then press **Enter**.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample9.ps1)]
10. <span data-ttu-id="8f8c7-243">Dane wyjściowe polecenia **Update-Database** wygenerowały instrukcję **ALTER TABLE** SQL, aby zaktualizować typ kolumny *wskazówki* tabeli **TriviaQuestions** , jak pokazano na poniższej ilustracji.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-243">The output of the **Update-Database** command generated an **Alter Table** SQL statement to update the *hint* column type of the **TriviaQuestions** table, as shown in the image below.</span></span>

    <span data-ttu-id="8f8c7-244">![Wygenerowana instrukcja SQL ALTER COLUMN](maintainable-azure-websites-managing-change-and-scale/_static/image11.png "Wygenerowana instrukcja SQL ALTER COLUMN")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-244">![Alter column SQL statement generated](maintainable-azure-websites-managing-change-and-scale/_static/image11.png "Alter column SQL statement generated")</span></span>

    <span data-ttu-id="8f8c7-245">*Wygenerowana instrukcja SQL ALTER COLUMN*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-245">*Alter column SQL statement generated*</span></span>
11. <span data-ttu-id="8f8c7-246">W **Eksplorator obiektów SQL Server**Odśwież obiekt **dbo. TriviaQuestions** tabelę i sprawdź, czy typ kolumny **wskazówki** to **nvarchar (150)** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-246">In **SQL Server Object Explorer**, refresh the **dbo.TriviaQuestions** table and check that the **Hint** column type is **nvarchar(150)**.</span></span>

    <span data-ttu-id="8f8c7-247">![Wyświetlanie nowego ograniczenia](maintainable-azure-websites-managing-change-and-scale/_static/image12.png "Wyświetlanie nowego ograniczenia")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-247">![Showing the new constraint](maintainable-azure-websites-managing-change-and-scale/_static/image12.png "Showing the new constraint")</span></span>

    <span data-ttu-id="8f8c7-248">*Wyświetlanie nowego ograniczenia*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-248">*Showing the new constraint*</span></span>

<a id="Exercise2"></a>
### <a name="exercise-2-deploying-a-web-app-to-staging"></a><span data-ttu-id="8f8c7-249">Ćwiczenie 2: wdrażanie aplikacji sieci Web do przemieszczania</span><span class="sxs-lookup"><span data-stu-id="8f8c7-249">Exercise 2: Deploying a Web App to Staging</span></span>

<span data-ttu-id="8f8c7-250">**Web Apps w Azure App Service** umożliwia przeprowadzenie publikacji etapowej.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-250">**Web Apps in Azure App Service** enables you to perform staged publishing.</span></span> <span data-ttu-id="8f8c7-251">Publikowanie etapowe tworzy miejsce na lokację przejściową dla każdej domyślnej witryny produkcyjnej i umożliwia zastępowanie tych gniazd bez określonego czasu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-251">Staged publishing creates a staging site slot for each default production site and enables you to swap these slots with no down time.</span></span> <span data-ttu-id="8f8c7-252">Jest to naprawdę przydatne do weryfikowania zmian przed udostępnieniem ich publicznie, przyrostowo integrowania zawartości lokacji i wycofywania, jeśli zmiany nie działają zgodnie z oczekiwaniami.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-252">This is really useful to validate changes before releasing to the public, incrementally integrate site content, and roll back if changes are not working as expected.</span></span>

<span data-ttu-id="8f8c7-253">W tym ćwiczeniu aplikacja **quizu pojedynek maniaków komputerowych** zostanie wdrożona w środowisku przejściowym aplikacji sieci Web przy użyciu kontroli źródła git.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-253">In this exercise, you will deploy the **Geek Quiz** application to the staging environment of your web app using Git source control.</span></span> <span data-ttu-id="8f8c7-254">W tym celu należy utworzyć aplikację sieci Web i udostępnić wymagane składniki w portalu zarządzania, skonfigurować repozytorium **git** i wypchnąć kod źródłowy aplikacji z komputera lokalnego do miejsca przejściowego.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-254">To do this, you will create the web app and provision the required components at the management portal, configure a **Git** repository and push the application source code from your local computer to the staging slot.</span></span> <span data-ttu-id="8f8c7-255">Możesz również zaktualizować produkcyjną bazę danych do **migracje Code First** utworzonej w poprzednim ćwiczeniu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-255">You will also update your production database with the **Code First Migrations** you created in the previous exercise.</span></span> <span data-ttu-id="8f8c7-256">Następnie wykonasz aplikację w tym środowisku testowym, aby sprawdzić jej działanie.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-256">You will then execute the application in this test environment to verify its operation.</span></span> <span data-ttu-id="8f8c7-257">Po upewnieniu się, że działa ona zgodnie z oczekiwaniami, będziesz wspierać aplikację w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-257">Once you are satisfied that it is working according to your expectations, you will promote the application to production.</span></span>

> [!NOTE]
> <span data-ttu-id="8f8c7-258">Aby włączyć publikowanie etapowe, aplikacja sieci Web musi być w **trybie standardowym**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-258">To enable staged publishing, the web app must be in **Standard mode**.</span></span> <span data-ttu-id="8f8c7-259">Należy pamiętać, że w przypadku zmiany aplikacji sieci Web na tryb standardowy zostaną naliczone dodatkowe opłaty.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-259">Note that additional charges will be incurred if you change your web app to Standard mode.</span></span> <span data-ttu-id="8f8c7-260">Aby uzyskać więcej informacji na temat cen, zobacz [Cennik usługi App Service](https://azure.microsoft.com/pricing/details/app-service/).</span><span class="sxs-lookup"><span data-stu-id="8f8c7-260">For more information about pricing, see [App Service Pricing](https://azure.microsoft.com/pricing/details/app-service/).</span></span>

<a id="Ex2Task1"></a>
#### <a name="task-1--creating-a-web-app-in-azure-app-service"></a><span data-ttu-id="8f8c7-261">Zadanie 1 — Tworzenie aplikacji sieci Web w Azure App Service</span><span class="sxs-lookup"><span data-stu-id="8f8c7-261">Task 1 – Creating a Web App in Azure App Service</span></span>

<span data-ttu-id="8f8c7-262">To zadanie spowoduje utworzenie aplikacji sieci Web w **Azure App Service** z poziomu portalu zarządzania.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-262">In this task, you will create a web app in **Azure App Service** from the management portal.</span></span> <span data-ttu-id="8f8c7-263">Skonfigurujesz również **SQL Database** , aby zachować dane aplikacji, i skonfigurować lokalne repozytorium git dla kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-263">You will also configure a **SQL Database** to persist the application data, and configure a local Git repository for source control.</span></span>

1. <span data-ttu-id="8f8c7-264">Przejdź do [portalu zarządzania platformy Azure](https://manage.windowsazure.com) i zaloguj się przy użyciu konto Microsoft skojarzonego z subskrypcją.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-264">Go to the [Azure management portal](https://manage.windowsazure.com) and sign in using the Microsoft account associated with your subscription.</span></span>

    ![Logowanie się do portalu zarządzania systemu Azure](maintainable-azure-websites-managing-change-and-scale/_static/image13.png)

    <span data-ttu-id="8f8c7-266">*Logowanie się do portalu zarządzania systemu Azure*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-266">*Sign in to the Azure management portal*</span></span>
2. <span data-ttu-id="8f8c7-267">Kliknij przycisk **Nowy** na pasku poleceń w dolnej części strony.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-267">Click **New** in the command bar at the bottom of the page.</span></span>

    <span data-ttu-id="8f8c7-268">![Tworzenie nowej aplikacji sieci Web](maintainable-azure-websites-managing-change-and-scale/_static/image14.png "Tworzenie nowej aplikacji sieci Web")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-268">![Creating a new web app](maintainable-azure-websites-managing-change-and-scale/_static/image14.png "Creating a new web app")</span></span>

    <span data-ttu-id="8f8c7-269">*Tworzenie nowej aplikacji sieci Web*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-269">*Creating a new web app*</span></span>
3. <span data-ttu-id="8f8c7-270">Kliknij pozycje **obliczenia**, **Witryna sieci Web** , a następnie pozycję **Tworzenie niestandardowe**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-270">Click **Compute**, **Website** and then **Custom Create**.</span></span>

    <span data-ttu-id="8f8c7-271">![Tworzenie nowej aplikacji sieci Web przy użyciu funkcji tworzenia niestandardowego](maintainable-azure-websites-managing-change-and-scale/_static/image15.png "Tworzenie nowej aplikacji sieci Web przy użyciu funkcji tworzenia niestandardowego")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-271">![Creating a new web app using Custom Create](maintainable-azure-websites-managing-change-and-scale/_static/image15.png "Creating a new web app using Custom Create")</span></span>

    <span data-ttu-id="8f8c7-272">*Tworzenie nowej aplikacji sieci Web przy użyciu funkcji tworzenia niestandardowego*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-272">*Creating a new web app using Custom Create*</span></span>
4. <span data-ttu-id="8f8c7-273">W oknie dialogowym **Nowy witryna sieci Web — Tworzenie niestandardowe** Podaj dostępny **adres URL** (np. *pojedynek maniaków komputerowych-Quiz*), wybierz lokalizację na liście rozwijanej **region** , a następnie wybierz pozycję **Utwórz nową bazę danych SQL** na liście rozwijanej **baza danych** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-273">In the **New Website - Custom Create** dialog box, provide an available **URL** (e.g. *geek-quiz*), select a location in the **Region** drop-down list, and select **Create a new SQL database** in the **Database** drop-down list.</span></span> <span data-ttu-id="8f8c7-274">Na koniec zaznacz pole wyboru **Opublikuj z kontroli źródła** i kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-274">Finally, select the **Publish from source control** check box and click **Next**.</span></span>

    ![Dostosowywanie nowej aplikacji sieci Web](maintainable-azure-websites-managing-change-and-scale/_static/image16.png)

    <span data-ttu-id="8f8c7-276">*Dostosowywanie nowej aplikacji sieci Web*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-276">*Customizing the new web app*</span></span>
5. <span data-ttu-id="8f8c7-277">Określ następujące informacje dotyczące ustawień bazy danych:</span><span class="sxs-lookup"><span data-stu-id="8f8c7-277">Specify the following information for the database settings:</span></span>

   - <span data-ttu-id="8f8c7-278">W polu tekstowym **Nazwa** wprowadź nazwę bazy danych (np. *geekquiz\_DB*)</span><span class="sxs-lookup"><span data-stu-id="8f8c7-278">In the **Name** text box, enter a database name (e.g. *geekquiz\_db*)</span></span>
   - <span data-ttu-id="8f8c7-279">Z listy **rozwijanej** serwer wybierz pozycję **nowy serwer bazy danych SQL**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-279">In the Server **drop-down** list, select **New SQL database server**.</span></span> <span data-ttu-id="8f8c7-280">Alternatywnie można wybrać istniejący serwer.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-280">Alternatively, you can select an existing server.</span></span>
   - <span data-ttu-id="8f8c7-281">W polach **Nazwa użytkownika** i **hasło bazy** danych wprowadź nazwę użytkownika i hasło administratora dla serwera bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-281">In the **Database username** and **Database password** boxes, enter the administrator username and password for the SQL database server.</span></span> <span data-ttu-id="8f8c7-282">W przypadku wybrania już utworzonego serwera zostanie wyświetlony monit o podanie hasła.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-282">If you select a server you have already created, you will be prompted for the password.</span></span>

     ![Określanie ustawień bazy danych](maintainable-azure-websites-managing-change-and-scale/_static/image17.png)

     <span data-ttu-id="8f8c7-284">*Określanie ustawień bazy danych*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-284">*Specifying the database settings*</span></span>
6. <span data-ttu-id="8f8c7-285">Kliknij przycisk **Dalej**, aby kontynuować.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-285">Click **Next** to continue.</span></span>
7. <span data-ttu-id="8f8c7-286">Wybierz **lokalne repozytorium git** , które ma być używane przez kontrolę źródłową, a następnie kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-286">Select **Local Git repository** for the source control to use and click **Next**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-287">Może zostać wyświetlony monit o podanie poświadczeń wdrożenia (nazwy użytkownika i hasła).</span><span class="sxs-lookup"><span data-stu-id="8f8c7-287">You may be prompted for the deployment credentials (a username and password).</span></span>

    ![Tworzenie repozytorium git](maintainable-azure-websites-managing-change-and-scale/_static/image18.png)

    <span data-ttu-id="8f8c7-289">*Tworzenie repozytorium git*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-289">*Creating the Git repository*</span></span>
8. <span data-ttu-id="8f8c7-290">Poczekaj na utworzenie nowej aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-290">Wait until the new web app is created.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-291">Domyślnie platforma Azure udostępnia domeny pod adresem *azurewebsites.NET* , ale zapewnia również możliwość ustawiania domen niestandardowych przy użyciu portalu zarządzania Azure.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-291">By default, Azure provides domains at *azurewebsites.net* but also gives you the possibility to set custom domains using the Azure management portal.</span></span> <span data-ttu-id="8f8c7-292">Można jednak zarządzać domenami niestandardowymi tylko w przypadku korzystania z określonych trybów Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-292">However, you can only manage custom domains if you are using certain Azure App Service modes.</span></span>
    >
    > <span data-ttu-id="8f8c7-293">Azure App Service jest dostępna w wersjach bezpłatna, współdzielona, podstawowa, standardowa i Premium.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-293">Azure App Service is available in Free, Shared, Basic, Standard, and Premium editions.</span></span> <span data-ttu-id="8f8c7-294">W trybie bezpłatna i współdzielona wszystkie aplikacje sieci Web działają w środowisku wielodostępnym i mają przydziały użycia procesora CPU, pamięci i sieci.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-294">In Free and Shared mode, all web apps run in a multi-tenant environment and have quotas for CPU, Memory, and Network usage.</span></span> <span data-ttu-id="8f8c7-295">Maksymalna liczba bezpłatnych aplikacji może się różnić w zależności od planu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-295">The maximum number of free apps may vary with your plan.</span></span> <span data-ttu-id="8f8c7-296">W trybie standardowym można wybrać aplikacje, które będą uruchamiane na dedykowanych maszynach wirtualnych odpowiadających standardowym zasobom obliczeniowym platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-296">In Standard mode, you choose which apps run on dedicated virtual machines that correspond to the standard Azure compute resources.</span></span> <span data-ttu-id="8f8c7-297">Konfigurację trybu aplikacji sieci Web można znaleźć w menu **skalowanie** aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-297">You can find the web app mode configuration in the **Scale** menu of your web app.</span></span>
    >
    > <span data-ttu-id="8f8c7-298">![Tryby Azure App Service](maintainable-azure-websites-managing-change-and-scale/_static/image19.png "Tryby Azure App Service")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-298">![Azure App Service Modes](maintainable-azure-websites-managing-change-and-scale/_static/image19.png "Azure App Service Modes")</span></span>
    >
    > <span data-ttu-id="8f8c7-299">Jeśli używasz trybu **współużytkowanego** lub **standardowego** , będziesz mieć możliwość zarządzania domenami niestandardowymi dla aplikacji sieci Web, przechodząc do menu **konfigurowania** aplikacji i klikając pozycję **Zarządzaj domenami** w obszarze *nazwy domen*.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-299">If you are using **Shared** or **Standard** mode, you will be able to manage custom domains for your web app by going to your app's **Configure** menu and clicking **Manage Domains** under *domain names*.</span></span>
    >
    > <span data-ttu-id="8f8c7-300">![Zarządzanie domenami](maintainable-azure-websites-managing-change-and-scale/_static/image20.png "Zarządzanie domenami")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-300">![Manage Domains](maintainable-azure-websites-managing-change-and-scale/_static/image20.png "Manage Domains")</span></span>
    >
    > <span data-ttu-id="8f8c7-301">![Zarządzanie domenami niestandardowymi](maintainable-azure-websites-managing-change-and-scale/_static/image21.png "Zarządzanie domenami niestandardowymi")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-301">![Manage Custom Domains](maintainable-azure-websites-managing-change-and-scale/_static/image21.png "Manage Custom Domains")</span></span>
9. <span data-ttu-id="8f8c7-302">Po utworzeniu aplikacji sieci Web kliknij link w kolumnie **adres URL** , aby sprawdzić, czy nowa aplikacja sieci Web jest uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-302">Once the web app is created, click the link under the **URL** column to check that the new web app is running.</span></span>

    ![Przeglądanie w nowej aplikacji sieci Web](maintainable-azure-websites-managing-change-and-scale/_static/image22.png)

    <span data-ttu-id="8f8c7-304">*Przeglądanie w nowej aplikacji sieci Web*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-304">*Browsing to the new web app*</span></span>

    ![uruchomiona aplikacja sieci Web](maintainable-azure-websites-managing-change-and-scale/_static/image23.png)

    <span data-ttu-id="8f8c7-306">*uruchomiona aplikacja sieci Web*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-306">*web app running*</span></span>

<a id="Ex2Task2"></a>
#### <a name="task-2--creating-the-production-sql-database"></a><span data-ttu-id="8f8c7-307">Zadanie 2 — Tworzenie SQL Database produkcyjnych</span><span class="sxs-lookup"><span data-stu-id="8f8c7-307">Task 2 – Creating the Production SQL Database</span></span>

<span data-ttu-id="8f8c7-308">W tym zadaniu zostanie użyta **migracje Code First platformy Entity Framework** do utworzenia bazy danych dla wystąpienia **Azure SQL Database** utworzonego w poprzednim zadaniu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-308">In this task, you will use the **Entity Framework Code First Migrations** to create the database targeting the **Azure SQL Database** instance you created in the previous task.</span></span>

1. <span data-ttu-id="8f8c7-309">W portal zarządzania przejdź do aplikacji sieci Web utworzonej w poprzednim zadaniu i przejdź do jej **pulpitu nawigacyjnego**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-309">In the Management Portal, navigate to the web app you created in the previous task and go to its **Dashboard**.</span></span>
2. <span data-ttu-id="8f8c7-310">Na stronie **pulpit nawigacyjny** kliknij link **Wyświetl parametry połączenia** w sekcji **szybki przegląd** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-310">In the **Dashboard** page, click **View connection strings** link under the **quick glance** section.</span></span>

    <span data-ttu-id="8f8c7-311">![Wyświetlanie parametrów połączenia](maintainable-azure-websites-managing-change-and-scale/_static/image24.png "Wyświetlanie parametrów połączenia")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-311">![View connection strings](maintainable-azure-websites-managing-change-and-scale/_static/image24.png "View connection strings")</span></span>

    <span data-ttu-id="8f8c7-312">*Wyświetlanie parametrów połączenia*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-312">*View connection strings*</span></span>
3. <span data-ttu-id="8f8c7-313">Skopiuj wartość **parametrów połączenia** i Zamknij okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-313">Copy the **connection string** value and close the dialog box.</span></span>

    <span data-ttu-id="8f8c7-314">![Parametry połączenia w usłudze Azure portal zarządzania](maintainable-azure-websites-managing-change-and-scale/_static/image25.png "Parametry połączenia w usłudze Azure portal zarządzania")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-314">![Connection String in Azure Management Portal](maintainable-azure-websites-managing-change-and-scale/_static/image25.png "Connection String in Azure Management Portal")</span></span>

    <span data-ttu-id="8f8c7-315">*Parametry połączenia w usłudze Azure portal zarządzania*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-315">*Connection String in Azure Management Portal*</span></span>
4. <span data-ttu-id="8f8c7-316">Kliknij pozycję **bazy danych SQL** , aby wyświetlić listę baz danych SQL na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="8f8c7-316">Click **SQL Databases** to see the list of SQL databases in Azure</span></span>

    <span data-ttu-id="8f8c7-317">![Menu SQL Database](maintainable-azure-websites-managing-change-and-scale/_static/image26.png "Menu SQL Database")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-317">![SQL Database menu](maintainable-azure-websites-managing-change-and-scale/_static/image26.png "SQL Database menu")</span></span>

    <span data-ttu-id="8f8c7-318">*Menu SQL Database*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-318">*SQL Database menu*</span></span>
5. <span data-ttu-id="8f8c7-319">Znajdź bazę danych utworzoną w poprzednim zadaniu i kliknij serwer.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-319">Locate the database you created in the previous task and click on the Server.</span></span>

    <span data-ttu-id="8f8c7-320">![Serwer SQL Database](maintainable-azure-websites-managing-change-and-scale/_static/image27.png "Serwer usługi SQL Database")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-320">![SQL Database server](maintainable-azure-websites-managing-change-and-scale/_static/image27.png "SQL Database server")</span></span>

    <span data-ttu-id="8f8c7-321">*Serwer SQL Database*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-321">*SQL Database server*</span></span>
6. <span data-ttu-id="8f8c7-322">Na stronie **Szybki Start** serwera kliknij pozycję **Konfiguruj**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-322">In the **Quick Start** page of the server, click on **Configure**.</span></span>

    <span data-ttu-id="8f8c7-323">![Konfigurowanie menu](maintainable-azure-websites-managing-change-and-scale/_static/image28.png "Konfigurowanie menu")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-323">![Configure menu](maintainable-azure-websites-managing-change-and-scale/_static/image28.png "Configure menu")</span></span>

    <span data-ttu-id="8f8c7-324">*Konfigurowanie menu*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-324">*Configure menu*</span></span>
7. <span data-ttu-id="8f8c7-325">W sekcji **dozwolone adresy IP** kliknij pozycję **Dodaj do linku dozwolone adresy IP** , aby umożliwić IP łączenie się z serwerem SQL Database.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-325">In the **Allowed IP addresses** section, click on **Add to the allowed IP addresses** link to enable your IP to connect to the SQL Database server.</span></span>

    <span data-ttu-id="8f8c7-326">![Dozwolone adresy IP](maintainable-azure-websites-managing-change-and-scale/_static/image29.png "Dozwolone adresy IP")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-326">![Allowed IP addresses](maintainable-azure-websites-managing-change-and-scale/_static/image29.png "Allowed IP addresses")</span></span>

    <span data-ttu-id="8f8c7-327">*Dozwolone adresy IP*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-327">*Allowed IP addresses*</span></span>
8. <span data-ttu-id="8f8c7-328">Kliknij przycisk **Zapisz** w dolnej części strony, aby ukończyć ten krok.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-328">Click **Save** at the bottom of the page to complete the step.</span></span>
9. <span data-ttu-id="8f8c7-329">Przełącz się z powrotem do programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-329">Switch back to Visual Studio.</span></span>
10. <span data-ttu-id="8f8c7-330">W **konsoli Menedżera pakietów**wykonaj następujące polecenie zastępujące symbol zastępczy *[The-Connection-String]* z parametrami połączenia skopiowanymi z platformy Azure</span><span class="sxs-lookup"><span data-stu-id="8f8c7-330">In the **Package Manager Console**, execute the following command replacing *[YOUR-CONNECTION-STRING]* placeholder with the connection string you copied from Azure</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample10.ps1)]

    <span data-ttu-id="8f8c7-331">![Aktualizuj bazę danych dla systemu Windows Azure SQL Database](maintainable-azure-websites-managing-change-and-scale/_static/image30.png "Aktualizuj bazę danych dla systemu Windows Azure SQL Database")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-331">![Update database targeting Windows Azure SQL Database](maintainable-azure-websites-managing-change-and-scale/_static/image30.png "Update database targeting Windows Azure SQL Database")</span></span>

    <span data-ttu-id="8f8c7-332">*Aktualizowanie Azure SQL Database określania wartości docelowej bazy danych*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-332">*Update database targeting Azure SQL Database*</span></span>

<a id="Ex2Task3"></a>
#### <a name="task-3--deploying-geek-quiz-to-staging-using-git"></a><span data-ttu-id="8f8c7-333">Zadanie 3 — wdrażanie quizu pojedynek maniaków komputerowych do przemieszczania za pomocą usługi git</span><span class="sxs-lookup"><span data-stu-id="8f8c7-333">Task 3 – Deploying Geek Quiz to Staging Using Git</span></span>

<span data-ttu-id="8f8c7-334">W tym zadaniu zostanie włączone publikowanie etapowe w aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-334">In this task, you will enable staged publishing in your web app.</span></span> <span data-ttu-id="8f8c7-335">Następnie będzie można opublikować aplikację quizu pojedynek maniaków komputerowych bezpośrednio z komputera lokalnego w środowisku tymczasowym aplikacji sieci Web za pomocą narzędzia Git.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-335">Then, you will use Git to publish the Geek Quiz application directly from your local computer to the staging environment of your web app.</span></span>

1. <span data-ttu-id="8f8c7-336">Wróć do portalu i kliknij nazwę aplikacji sieci Web w kolumnie **Nazwa** , aby wyświetlić strony zarządzania.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-336">Go back to the portal and click the name of the web app under the **Name** column to display the management pages.</span></span>

    ![Otwieranie stron zarządzania aplikacjami sieci Web](maintainable-azure-websites-managing-change-and-scale/_static/image31.png)

    <span data-ttu-id="8f8c7-338">*Otwieranie stron zarządzania aplikacjami sieci Web*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-338">*Opening the web app management pages*</span></span>
2. <span data-ttu-id="8f8c7-339">Przejdź do strony **skalowanie** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-339">Navigate to the **Scale** page.</span></span> <span data-ttu-id="8f8c7-340">W obszarze **Ogólne** wybierz pozycję Konfiguracja **standardowa** , a następnie kliknij pozycję **Zapisz** na pasku poleceń.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-340">Under the **general** section, select **Standard** for the configuration and click **Save** in the command bar.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-341">Aby uruchamiać wszystkie aplikacje sieci Web w bieżącym regionie i subskrypcji w trybie **standardowym** , należy pozostawić pole wyboru **Zaznacz wszystko** zaznaczone w konfiguracji **wybierz lokacje** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-341">To run all web apps in the current region and subscription in **Standard** mode, leave the **Select All** check box selected in the **Choose Sites** configuration.</span></span> <span data-ttu-id="8f8c7-342">W przeciwnym razie wyczyść pole wyboru **Zaznacz wszystko** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-342">Otherwise, clear the **Select All** check box.</span></span>

    <span data-ttu-id="8f8c7-343">![Uaktualnianie aplikacji sieci Web do trybu standardowego](maintainable-azure-websites-managing-change-and-scale/_static/image32.png "Uaktualnianie aplikacji sieci Web do trybu standardowego")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-343">![Upgrading the web app to Standard mode](maintainable-azure-websites-managing-change-and-scale/_static/image32.png "Upgrading the web app to Standard mode")</span></span>

    <span data-ttu-id="8f8c7-344">*Uaktualnianie aplikacji sieci Web do trybu standardowego*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-344">*Upgrading the Web App to Standard mode*</span></span>
3. <span data-ttu-id="8f8c7-345">Kliknij przycisk **tak** , aby potwierdzić zmiany.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-345">Click **Yes** to confirm the changes.</span></span>

    <span data-ttu-id="8f8c7-346">![Potwierdzanie zmiany do trybu standardowego](maintainable-azure-websites-managing-change-and-scale/_static/image33.png "Kontynuowanie zmiany trybu aplikacji sieci Web")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-346">![Confirming the change to Standard mode](maintainable-azure-websites-managing-change-and-scale/_static/image33.png "Continuing with the changing of the web app mode")</span></span>

    <span data-ttu-id="8f8c7-347">*Potwierdzanie zmiany do trybu standardowego*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-347">*Confirming the change to Standard mode*</span></span>
4. <span data-ttu-id="8f8c7-348">Przejdź do strony **pulpit nawigacyjny** , a następnie kliknij pozycję **Włącz publikowanie etapowe** w sekcji **szybki przegląd** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-348">Go to the **Dashboard** page and click **Enable staged publishing** under the **quick glance** section.</span></span>

    <span data-ttu-id="8f8c7-349">![Włączanie publikowania etapowego](maintainable-azure-websites-managing-change-and-scale/_static/image34.png "Włączanie publikowania etapowego")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-349">![Enabling staged publishing](maintainable-azure-websites-managing-change-and-scale/_static/image34.png "Enabling staged publishing")</span></span>

    <span data-ttu-id="8f8c7-350">*Włączanie publikowania etapowego*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-350">*Enabling staged publishing*</span></span>
5. <span data-ttu-id="8f8c7-351">Kliknij przycisk **tak** , aby włączyć publikowanie etapowe.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-351">Click **Yes** to enable staged publishing.</span></span>

    <span data-ttu-id="8f8c7-352">![Potwierdzanie publikowania etapowego](maintainable-azure-websites-managing-change-and-scale/_static/image35.png "Kliknij przycisk tak, aby włączyć publikowanie etapowe")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-352">![Confirming staged publishing](maintainable-azure-websites-managing-change-and-scale/_static/image35.png "Clicking Yes to enable staged publishing")</span></span>

    <span data-ttu-id="8f8c7-353">*Potwierdzanie publikowania etapowego*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-353">*Confirming staged publishing*</span></span>
6. <span data-ttu-id="8f8c7-354">Na liście aplikacji sieci Web rozwiń znacznik z lewej strony nazwy aplikacji sieci Web, aby wyświetlić miejsce lokacji tymczasowej.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-354">In the list of web apps, expand the mark to the left of your web app name to display the staging site slot.</span></span> <span data-ttu-id="8f8c7-355">Ma nazwę aplikacji sieci Web, a następnie ***(przejściową)***.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-355">It has the name of your web app followed by ***(staging)***.</span></span> <span data-ttu-id="8f8c7-356">Kliknij lokację przemieszczania, aby przejść do strony zarządzania.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-356">Click the staging site to go to the management page.</span></span>

    <span data-ttu-id="8f8c7-357">![Nawigowanie do tymczasowej aplikacji sieci Web](maintainable-azure-websites-managing-change-and-scale/_static/image36.png "Nawigowanie do tymczasowej aplikacji sieci Web")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-357">![Navigating to the staging web app](maintainable-azure-websites-managing-change-and-scale/_static/image36.png "Navigating to the staging web app")</span></span>

    <span data-ttu-id="8f8c7-358">*Przechodzenie do aplikacji tymczasowej*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-358">*Navigating to the staging app*</span></span>
7. <span data-ttu-id="8f8c7-359">Zwróć uwagę, że strona zarządzania będzie wyglądać podobnie do strony zarządzania inną aplikacją sieci Web.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-359">Notice that he management page looks like any other web app's management page.</span></span> <span data-ttu-id="8f8c7-360">Przejdź do strony **wdrożenia** i skopiuj wartość **adres URL usługi git** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-360">Navigate to the **Deployments** page and copy the **Git URL** value.</span></span> <span data-ttu-id="8f8c7-361">Będzie on używany później w tym ćwiczeniu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-361">You will use it later in this exercise.</span></span>

    ![Kopiowanie wartości adresu URL usługi git](maintainable-azure-websites-managing-change-and-scale/_static/image37.png)

    <span data-ttu-id="8f8c7-363">*Kopiowanie wartości adresu URL usługi git*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-363">*Copying the Git URL value*</span></span>
8. <span data-ttu-id="8f8c7-364">Otwórz nową konsolę usługi **git bash** i wykonaj następujące polecenia.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-364">Open a new **Git Bash** console and execute the following commands.</span></span> <span data-ttu-id="8f8c7-365">Zaktualizuj symbol zastępczy *[moja aplikacja-ścieżka]* ścieżką do rozwiązania **GeekQuiz** znajdującego się w folderze **Source\Ex1-DeployingWebSiteToStaging\Begin** w tym laboratorium.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-365">Update the *[YOUR-APPLICATION-PATH]* placeholder with the path to the **GeekQuiz** solution, located in the **Source\Ex1-DeployingWebSiteToStaging\Begin** folder of this lab.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample11.cmd)]

    ![Inicjalizacja git i pierwsze zatwierdzenie](maintainable-azure-websites-managing-change-and-scale/_static/image38.png)

    <span data-ttu-id="8f8c7-367">*Inicjalizacja git i pierwsze zatwierdzenie*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-367">*Git initialization and first commit*</span></span>
9. <span data-ttu-id="8f8c7-368">Uruchom następujące polecenie, aby wypchnąć aplikację sieci Web do zdalnego repozytorium **git** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-368">Run the following command to push your web app to the remote **Git** repository.</span></span> <span data-ttu-id="8f8c7-369">Zamień symbol zastępczy na adres URL uzyskany w portalu zarządzania.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-369">Replace the placeholder with the URL you obtained from the management portal.</span></span> <span data-ttu-id="8f8c7-370">Zostanie wyświetlony monit o hasło wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-370">You will be prompted for your deployment password.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample12.cmd)]

    ![Wypychanie do systemu Windows Azure](maintainable-azure-websites-managing-change-and-scale/_static/image39.png)

    <span data-ttu-id="8f8c7-372">*Wypychanie do platformy Azure*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-372">*Pushing to Azure*</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-373">Podczas wdrażania zawartości na hoście FTP lub repozytorium GIT aplikacji sieci Web, należy uwierzytelnić się przy użyciu **poświadczeń wdrożenia** utworzonych na podstawie **Szybki Start** lub stron zarządzania **pulpitu nawigacyjnego** aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-373">When you deploy content to the FTP host or GIT repository of a web app, you must authenticate using the **deployment credentials** that you created from the web app's **Quick Start** or **Dashboard** management pages.</span></span> <span data-ttu-id="8f8c7-374">Jeśli poświadczenia wdrożenia nie są znane, możesz je łatwo zresetować przy użyciu portalu zarządzania.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-374">If you do not know your deployment credentials you can easily reset them using the management portal.</span></span> <span data-ttu-id="8f8c7-375">Otwórz stronę **pulpit nawigacyjny** aplikacji sieci Web i kliknij link **Zresetuj poświadczenia wdrożenia** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-375">Open the web app **Dashboard** page and click the **Reset your deployment credentials** link.</span></span> <span data-ttu-id="8f8c7-376">Podaj nowe hasło i kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-376">Provide a new password and click **OK**.</span></span> <span data-ttu-id="8f8c7-377">Poświadczenia wdrożenia są prawidłowe do użycia ze wszystkimi aplikacjami sieci Web skojarzonymi z Twoją subskrypcją.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-377">Deployment credentials are valid for use with all web apps associated with your subscription.</span></span>
10. <span data-ttu-id="8f8c7-378">Aby sprawdzić, czy aplikacja sieci Web została pomyślnie przekazana do platformy Azure, Wróć do portalu zarządzania i kliknij pozycję **witryny sieci Web**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-378">In order to verify the web app was successfully pushed to Azure, go back to the management portal and click **Websites**.</span></span>
11. <span data-ttu-id="8f8c7-379">Znajdź aplikację sieci Web i rozwiń wpis, aby wyświetlić miejsce lokacji tymczasowej.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-379">Locate your web app and expand the entry to display the staging site slot.</span></span> <span data-ttu-id="8f8c7-380">Kliknij jego **nazwę** , aby przejść do strony zarządzania.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-380">Click its **Name** to go to the management page.</span></span>
12. <span data-ttu-id="8f8c7-381">Kliknij pozycję **wdrożenia** , aby wyświetlić **historię wdrożenia**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-381">Click **Deployments** to see the **deployment history**.</span></span> <span data-ttu-id="8f8c7-382">Sprawdź, czy istnieje **aktywne wdrożenie** z *&quot;&quot;wstępnego zatwierdzania* .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-382">Verify that there is an **Active Deployment** with your *&quot;Initial Commit&quot;*.</span></span>

    ![Aktywne wdrożenie](maintainable-azure-websites-managing-change-and-scale/_static/image40.png)

    <span data-ttu-id="8f8c7-384">*Aktywne wdrożenie*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-384">*Active deployment*</span></span>
13. <span data-ttu-id="8f8c7-385">Na koniec kliknij przycisk **Przeglądaj** na pasku poleceń, aby przejść do aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-385">Finally, click **Browse** in the command bar to go to the web app.</span></span>

    ![Przeglądaj aplikację sieci Web](maintainable-azure-websites-managing-change-and-scale/_static/image41.png)

    <span data-ttu-id="8f8c7-387">*Przeglądaj aplikację sieci Web*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-387">*Browse web app*</span></span>
14. <span data-ttu-id="8f8c7-388">Jeśli aplikacja zostanie pomyślnie wdrożona, zostanie wyświetlona strona logowania quizu pojedynek maniaków komputerowych.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-388">If the application is successfully deployed, you will see the Geek Quiz login page.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-389">Adres URL wdrożonej aplikacji zawiera nazwę aplikacji sieci Web, a następnie *przemieszczenie*.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-389">The address URL of the deployed application contains the name of your web app followed by *-staging*.</span></span>

    ![Aplikacja uruchomiona w środowisku przejściowym](maintainable-azure-websites-managing-change-and-scale/_static/image42.png)

    <span data-ttu-id="8f8c7-391">*Aplikacja uruchomiona w środowisku przejściowym*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-391">*Application running in the staging environment*</span></span>
15. <span data-ttu-id="8f8c7-392">Jeśli chcesz eksplorować aplikację, kliknij pozycję **zarejestruj** , aby zarejestrować nowego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-392">If you wish to explore the application, click **Register** to register a new user.</span></span> <span data-ttu-id="8f8c7-393">Aby uzyskać szczegółowe informacje o koncie, wprowadź nazwę użytkownika, adres e-mail i hasło.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-393">Complete the account details by entering a user name, email address and password.</span></span> <span data-ttu-id="8f8c7-394">Następnie aplikacja pokazuje pierwsze pytanie quizu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-394">Next, the application shows the first question of the quiz.</span></span> <span data-ttu-id="8f8c7-395">Odpowiedz na kilka pytań, aby upewnić się, że działa zgodnie z oczekiwaniami.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-395">Answer a few questions to make sure it is working as expected.</span></span>

    ![Aplikacja gotowa do użycia](maintainable-azure-websites-managing-change-and-scale/_static/image43.png)

    <span data-ttu-id="8f8c7-397">*Aplikacja gotowa do użycia*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-397">*Application ready to be used*</span></span>

<a id="Ex2Task4"></a>
#### <a name="task-4--promoting-the-web-app-to-production"></a><span data-ttu-id="8f8c7-398">Zadanie 4 — promowanie aplikacji sieci Web do środowiska produkcyjnego</span><span class="sxs-lookup"><span data-stu-id="8f8c7-398">Task 4 – Promoting the Web App to Production</span></span>

<span data-ttu-id="8f8c7-399">Po zweryfikowaniu, że aplikacja sieci Web działa prawidłowo w środowisku przejściowym, możesz przystąpić do promowania jej do produkcji.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-399">Now that you have verified that the web app is working correctly in the staging environment, you are ready to promote it to production.</span></span> <span data-ttu-id="8f8c7-400">W tym zadaniu zastąpią miejsce lokacji tymczasowej miejscem produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-400">In this task, you will swap the staging site slot with the production site slot.</span></span>

1. <span data-ttu-id="8f8c7-401">Wróć do portalu zarządzania i wybierz miejsce lokacji tymczasowej.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-401">Go back to the management portal and select the staging site slot.</span></span> <span data-ttu-id="8f8c7-402">Kliknij pozycję **Zamień** na pasku poleceń.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-402">Click **Swap** in the command bar.</span></span>

    ![Zamień na produkcję](maintainable-azure-websites-managing-change-and-scale/_static/image44.png)

    <span data-ttu-id="8f8c7-404">*Zamień na produkcję*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-404">*Swap to production*</span></span>
2. <span data-ttu-id="8f8c7-405">Kliknij przycisk **tak** w oknie dialogowym potwierdzenia, aby kontynuować operację zamiany.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-405">Click **Yes** in the confirmation dialog box to proceed with the swap operation.</span></span> <span data-ttu-id="8f8c7-406">Platforma Azure natychmiast zamienia zawartość witryny produkcyjnej na zawartość lokacji tymczasowej.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-406">Azure will immediately swap the content of the production site with the content of the staging site.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-407">Niektóre ustawienia z wersji przemieszczanej zostaną automatycznie skopiowane do wersji produkcyjnej (np. zastąpienia parametrów połączenia, mapowania programu obsługi itp.), ale inne ustawienia nie zmienią się (np. punktów końcowych usługi DNS, powiązań SSL itp.).</span><span class="sxs-lookup"><span data-stu-id="8f8c7-407">Some settings from the staged version will automatically be copied to the production version (e.g. connection string overrides, handler mappings, etc.) but other settings will not change (e.g. DNS endpoints, SSL bindings, etc.).</span></span>

    ![Potwierdzanie operacji wymiany](maintainable-azure-websites-managing-change-and-scale/_static/image45.png)

    <span data-ttu-id="8f8c7-409">*Potwierdzanie operacji wymiany*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-409">*Confirming swap operation*</span></span>
3. <span data-ttu-id="8f8c7-410">Po zakończeniu wymiany wybierz miejsce produkcyjne i kliknij przycisk **Przeglądaj** na pasku poleceń, aby otworzyć lokację produkcyjną.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-410">Once the swap is complete, select the production slot and click **Browse** in the command bar to open the production site.</span></span> <span data-ttu-id="8f8c7-411">Zwróć uwagę na adres URL na pasku adresu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-411">Notice the URL in the address bar.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-412">Może być konieczne odświeżenie przeglądarki w celu wyczyszczenia pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-412">You might need to refresh your browser to clear cache.</span></span> <span data-ttu-id="8f8c7-413">W programie Internet Explorer można to zrobić przez naciśnięcie **klawiszy Ctrl + R**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-413">In Internet Explorer, you can do this by pressing **CTRL+R**.</span></span>

    ![Aplikacja sieci Web działająca w środowisku produkcyjnym](maintainable-azure-websites-managing-change-and-scale/_static/image46.png)
4. <span data-ttu-id="8f8c7-415">W konsoli **GitBash** zaktualizuj zdalny adres URL dla lokalnego repozytorium git, aby określić miejsce docelowe w miejscu produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-415">In the **GitBash** console, update the remote URL for the local Git repository to target the production slot.</span></span> <span data-ttu-id="8f8c7-416">W tym celu uruchom następujące polecenie, zastępując symbole zastępcze nazwą użytkownika wdrożenia i nazwą aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-416">To do this, run the following command replacing the placeholders with your deployment username and the name of your web app.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-417">W poniższych ćwiczeniach nastąpi wypychanie zmian w witrynie produkcyjnej, a nie tylko na potrzeby uproszczenia laboratorium.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-417">In the following exercises, you will push changes to the production site instead of staging just for the simplicity of the lab.</span></span> <span data-ttu-id="8f8c7-418">W rzeczywistym scenariuszu zaleca się zweryfikowanie zmian w środowisku przejściowym przed podwyższeniem poziomu do produkcji.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-418">In a real-world scenario, it is recommended to verify the changes in the staging environment before promoting to production.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample13.cmd)]

<a id="Exercise3"></a>
### <a name="exercise-3-performing-deployment-rollback-in-production"></a><span data-ttu-id="8f8c7-419">Ćwiczenie 3: wykonywanie wycofywania wdrożenia w środowisku produkcyjnym</span><span class="sxs-lookup"><span data-stu-id="8f8c7-419">Exercise 3: Performing Deployment Rollback in Production</span></span>

<span data-ttu-id="8f8c7-420">Istnieją scenariusze, w których nie ma miejsca przejściowego do przeprowadzenia gorącą wymianę między etapami przejściowymi i produkcyjnymi, na przykład w przypadku pracy z trybem **bezpłatnym** lub **udostępnionym** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-420">There are scenarios where you do not have a staging slot to perform hot swap between staging and production, for example, if you are working with **Free** or **Shared** mode.</span></span> <span data-ttu-id="8f8c7-421">W tych scenariuszach należy przetestować aplikację w środowisku testowym — lokalnie lub w lokacji zdalnej — przed wdrożeniem do produkcji.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-421">In those scenarios, you should test your application in a testing environment –either locally or in a remote site– before deploying to production.</span></span> <span data-ttu-id="8f8c7-422">Jednak jest możliwe, że problem nie został wykryty podczas fazy testowania może wystąpić w lokacji produkcyjnej.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-422">However, it is possible that an issue not detected during the testing phase may arise in the production site.</span></span> <span data-ttu-id="8f8c7-423">W takim przypadku należy mieć mechanizm, który umożliwia łatwe przełączenie na poprzednią i bardziej stabilną wersję aplikacji tak szybko, jak to możliwe.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-423">In this case, it is important to have a mechanism to easily switch to a previous and more stable version of the application as quickly as possible.</span></span>

<span data-ttu-id="8f8c7-424">W **Azure App Service**ciągłe wdrażanie z kontroli źródła pozwala to na dostęp do akcji **ponownego wdrażania** w portalu zarządzania.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-424">In **Azure App Service**, continuous deployment from source control makes this possible thanks to the **redeploy** action available in the management portal.</span></span> <span data-ttu-id="8f8c7-425">Platforma Azure śledzi wdrożenia skojarzone z zatwierdzeń wypychanych do repozytorium i udostępnia opcję ponownego wdrażania aplikacji przy użyciu dowolnych z poprzednich wdrożeń w dowolnym momencie.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-425">Azure keeps track of the deployments associated with the commits pushed to the repository and provides an option to redeploy your application using any of your previous deployments, at any time.</span></span>

<span data-ttu-id="8f8c7-426">W tym ćwiczeniu wykonasz zmianę w kodzie w aplikacji **quizu pojedynek maniaków komputerowych** , która celowo wprowadza *usterkę*.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-426">In this exercise you will perform a change to the code in the **Geek Quiz** application that intentionally injects a *bug*.</span></span> <span data-ttu-id="8f8c7-427">Aplikacja zostanie wdrożona w środowisku produkcyjnym w celu wyświetlenia błędu, a następnie będzie można skorzystać z funkcji ponownego wdrażania, aby powrócić do poprzedniego stanu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-427">You will deploy the application to production to see the error, and then you will take advantage of the redeploy feature to go back to the previous state.</span></span>

<a id="Ex3Task1"></a>
#### <a name="task-1--updating-the-geek-quiz-application"></a><span data-ttu-id="8f8c7-428">Zadanie 1 — aktualizowanie aplikacji quizu pojedynek maniaków komputerowych</span><span class="sxs-lookup"><span data-stu-id="8f8c7-428">Task 1 – Updating the Geek Quiz Application</span></span>

<span data-ttu-id="8f8c7-429">W tym zadaniu zostanie Refaktoryzacja niewielki fragment kodu klasy **TriviaController** w celu wyodrębnienia części logiki pobierającej wybraną opcję quizu z bazy danych do nowej metody.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-429">In this task, you will refactor a small piece of code of the **TriviaController** class to extract part of the logic that retrieves the selected quiz option from the database into a new method.</span></span>

1. <span data-ttu-id="8f8c7-430">Przejdź do wystąpienia programu Visual Studio z rozwiązaniem **GeekQuiz** z poprzedniego ćwiczenia.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-430">Switch to the Visual Studio instance with the **GeekQuiz** solution from the previous exercise.</span></span>
2. <span data-ttu-id="8f8c7-431">W **Eksplorator rozwiązań**otwórz plik **TriviaController.cs** wewnątrz folderu **controllers** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-431">In **Solution Explorer**, open the **TriviaController.cs** file inside the **Controllers** folder.</span></span>
3. <span data-ttu-id="8f8c7-432">Znajdź metodę **StoreAsync** i wybierz kod wyróżniony na poniższej ilustracji.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-432">Locate the **StoreAsync** method and select the code highlighted in the following figure.</span></span>

    ![Wybieranie kodu](maintainable-azure-websites-managing-change-and-scale/_static/image47.png)

    <span data-ttu-id="8f8c7-434">*Wybieranie kodu*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-434">*Selecting the code*</span></span>
4. <span data-ttu-id="8f8c7-435">Kliknij prawym przyciskiem myszy wybrany kod, rozwiń menu **refaktoryzacji** i wybierz polecenie **Wyodrębnij metodę.** ...</span><span class="sxs-lookup"><span data-stu-id="8f8c7-435">Right-click the selected code, expand the **Refactor** menu and select **Extract Method...**.</span></span>

    ![Wyodrębnianie kodu jako nowej metody](maintainable-azure-websites-managing-change-and-scale/_static/image48.png)

    <span data-ttu-id="8f8c7-437">*Wybieranie metody Extract*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-437">*Selecting Extract Method*</span></span>
5. <span data-ttu-id="8f8c7-438">W oknie dialogowym **Wyodrębnij metodę** Nazwij nową metodę *MatchesOption* , a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-438">In the **Extract Method** dialog box, name the new method *MatchesOption* and click **OK**.</span></span>

    ![Określanie nazwy metody](maintainable-azure-websites-managing-change-and-scale/_static/image49.png)

    <span data-ttu-id="8f8c7-440">*Określanie nazwy wyodrębnionej metody*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-440">*Specifying the name for the extracted method*</span></span>
6. <span data-ttu-id="8f8c7-441">Wybrany kod jest następnie wyodrębniany do metody **MatchesOption** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-441">The selected code is then extracted into the **MatchesOption** method.</span></span> <span data-ttu-id="8f8c7-442">Kod wynikowy jest przedstawiony w poniższym fragmencie kodu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-442">The resulting code is shown in the following snippet.</span></span>

    [!code-csharp[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample14.cs)]
7. <span data-ttu-id="8f8c7-443">Naciśnij **kombinację klawiszy Ctrl + S** , aby zapisać zmiany.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-443">Press **CTRL + S** to save the changes.</span></span>

<a id="Ex3Task2"></a>
#### <a name="task-2--redeploying-the-geek-quiz-application"></a><span data-ttu-id="8f8c7-444">Zadanie 2 — ponowne wdrażanie aplikacji quizu pojedynek maniaków komputerowych</span><span class="sxs-lookup"><span data-stu-id="8f8c7-444">Task 2 – Redeploying the Geek Quiz Application</span></span>

<span data-ttu-id="8f8c7-445">Teraz można wypchnąć zmiany wprowadzone w poprzednim zadaniu do repozytorium, które wyzwoli nowe wdrożenie w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-445">You will now push the changes you made in the previous task to the repository, which will trigger a new deployment to the production environment.</span></span> <span data-ttu-id="8f8c7-446">Następnie Troubleshot problem przy użyciu **narzędzi programistycznych F12** dostarczonych przez program Internet Explorer, a następnie wykonaj wycofanie do poprzedniego wdrożenia z portalu zarządzania Azure.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-446">Then, you will troubleshot an issue using the **F12 development tools** provided by Internet Explorer, and then perform a rollback to the previous deployment from the Azure management portal.</span></span>

1. <span data-ttu-id="8f8c7-447">Otwórz nową konsolę **bash usługi git** , aby wdrożyć zaktualizowaną aplikację do Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-447">Open a new **Git Bash** console to deploy the updated application to Azure App Service.</span></span>
2. <span data-ttu-id="8f8c7-448">Wykonaj następujące polecenia, aby wypchnąć zmiany do platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-448">Execute the following commands to push the changes to Azure.</span></span> <span data-ttu-id="8f8c7-449">Zaktualizuj symbol zastępczy *[The-Application-path]* ze ścieżką do rozwiązania **GeekQuiz** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-449">Update the *[YOUR-APPLICATION-PATH]* placeholder with the path to the **GeekQuiz** solution.</span></span> <span data-ttu-id="8f8c7-450">Zostanie wyświetlony monit o hasło wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-450">You will be prompted for your deployment password.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample15.cmd)]

    ![Wypychanie refaktoryzacji kodu do platformy Azure](maintainable-azure-websites-managing-change-and-scale/_static/image50.png)

    <span data-ttu-id="8f8c7-452">*Wypychanie refaktoryzacji kodu do platformy Azure*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-452">*Pushing refactored code to Azure*</span></span>
3. <span data-ttu-id="8f8c7-453">Otwórz program Internet Explorer i przejdź do aplikacji sieci Web (np. `http://<your-web-site>.azurewebsites.net`).</span><span class="sxs-lookup"><span data-stu-id="8f8c7-453">Open Internet Explorer and navigate to your web app (e.g. `http://<your-web-site>.azurewebsites.net`).</span></span> <span data-ttu-id="8f8c7-454">Zaloguj się przy użyciu wcześniej utworzonych poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-454">Log in using the previously created credentials.</span></span>
4. <span data-ttu-id="8f8c7-455">Naciśnij klawisz **F12** , aby uruchomić narzędzia programistyczne, wybierz kartę **Sieć** , a następnie kliknij przycisk **Odtwórz** , aby rozpocząć nagrywanie.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-455">Press **F12** to launch the development tools, select the **Network** tab and click the **Play** button to start recording.</span></span>

    <span data-ttu-id="8f8c7-456">![Rozpoczynanie rejestrowania w sieci](maintainable-azure-websites-managing-change-and-scale/_static/image51.png "Rozpoczynanie rejestrowania w sieci")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-456">![Starting network recording](maintainable-azure-websites-managing-change-and-scale/_static/image51.png "Starting network recording")</span></span>

    <span data-ttu-id="8f8c7-457">*Rozpoczynanie rejestrowania w sieci*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-457">*Starting network recording*</span></span>
5. <span data-ttu-id="8f8c7-458">Wybierz dowolną opcję quizu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-458">Select any option of the quiz.</span></span> <span data-ttu-id="8f8c7-459">Zobaczysz, że nic się nie dzieje.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-459">You will see that nothing happens.</span></span>
6. <span data-ttu-id="8f8c7-460">W oknie **F12** wpis odpowiadający żądaniu post protokołu HTTP pokazuje wynik http **500** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-460">In the **F12** window, the entry corresponding to the POST HTTP request shows an HTTP **500** result.</span></span>

    ![Błąd HTTP 500](maintainable-azure-websites-managing-change-and-scale/_static/image52.png)

    <span data-ttu-id="8f8c7-462">*Błąd HTTP 500*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-462">*HTTP 500 error*</span></span>
7. <span data-ttu-id="8f8c7-463">Wybierz kartę **konsola** . Błąd jest rejestrowany ze szczegółowymi informacjami o przyczynie.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-463">Select the **Console** tab. An error is logged with the details of the cause.</span></span>

    ![Zarejestrowany błąd](maintainable-azure-websites-managing-change-and-scale/_static/image53.png)

    <span data-ttu-id="8f8c7-465">*Zarejestrowany błąd*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-465">*Logged error*</span></span>
8. <span data-ttu-id="8f8c7-466">Znajdź część szczegółów błędu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-466">Locate the details part of the error.</span></span> <span data-ttu-id="8f8c7-467">Jasno ten błąd jest spowodowany przez refaktoryzację kodu, który został przekazany w poprzednich krokach.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-467">Clearly, this error is caused by the code refactoring you committed in the previous steps.</span></span>

    <span data-ttu-id="8f8c7-468">`Details: LINQ to Entities does not recognize the method 'Boolean MatchesOption ...`.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-468">`Details: LINQ to Entities does not recognize the method 'Boolean MatchesOption ...`.</span></span>
9. <span data-ttu-id="8f8c7-469">Nie zamykaj przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-469">Do not close the browser.</span></span>
10. <span data-ttu-id="8f8c7-470">W nowym wystąpieniu przeglądarki przejdź do [portalu zarządzania systemu Azure](https://manage.windowsazure.com) i zaloguj się przy użyciu konto Microsoft skojarzonego z subskrypcją.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-470">In a new browser instance, navigate to the [Azure management portal](https://manage.windowsazure.com) and sign in using the Microsoft account associated with your subscription.</span></span>
11. <span data-ttu-id="8f8c7-471">Wybierz pozycję **websites** i kliknij aplikację sieci Web utworzoną w ćwiczeniu 2.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-471">Select **Websites** and click the web app you created in Exercise 2.</span></span>
12. <span data-ttu-id="8f8c7-472">Przejdź do strony **wdrożenia** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-472">Navigate to the **Deployments** page.</span></span> <span data-ttu-id="8f8c7-473">Zwróć uwagę, że wszystkie wykonane zatwierdzenia są wymienione w historii wdrażania.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-473">Notice that all the commits performed are listed in the deployment history.</span></span>

    ![Lista istniejących wdrożeń](maintainable-azure-websites-managing-change-and-scale/_static/image54.png)

    <span data-ttu-id="8f8c7-475">*Lista istniejących wdrożeń*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-475">*List of existing deployments*</span></span>
13. <span data-ttu-id="8f8c7-476">Wybierz poprzednie zatwierdzenie i kliknij pozycję **Wdróż** ponownie na pasku poleceń.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-476">Select the previous commit and click **Redeploy** on the command bar.</span></span>

    ![Ponowne wdrażanie poprzedniego zatwierdzenia](maintainable-azure-websites-managing-change-and-scale/_static/image55.png)

    <span data-ttu-id="8f8c7-478">*Ponowne wdrażanie poprzedniego zatwierdzenia*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-478">*Redeploying the previous commit*</span></span>
14. <span data-ttu-id="8f8c7-479">Po wyświetleniu monitu o potwierdzenie kliknij przycisk **tak**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-479">When prompted to confirm, click **Yes**.</span></span>

    ![Potwierdzenie ponownego wdrożenia](maintainable-azure-websites-managing-change-and-scale/_static/image56.png)
15. <span data-ttu-id="8f8c7-481">Po zakończeniu wdrożenia przejdź z powrotem do wystąpienia przeglądarki za pomocą aplikacji sieci Web i naciśnij **klawisze CTRL + F5**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-481">When the deployment completes, switch back to the browser instance with your web app and press **CTRL + F5**.</span></span>
16. <span data-ttu-id="8f8c7-482">Kliknij dowolną z opcji.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-482">Click any of the options.</span></span> <span data-ttu-id="8f8c7-483">Przerzucanie animacji zostanie teraz wykonane i zostanie wyświetlony wynik (*poprawna/niepoprawna*).</span><span class="sxs-lookup"><span data-stu-id="8f8c7-483">The flip animation will now take place and the result (*correct/incorrect*) will be displayed.</span></span>
17. <span data-ttu-id="8f8c7-484">Obowiązkowe Przejdź do konsoli **git bash** i wykonaj następujące polecenia, aby przywrócić poprzednie zatwierdzenie.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-484">(Optional) Switch to the **Git Bash** console and execute the following commands to revert to the previous commit.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-485">Te polecenia tworzą nowe zatwierdzenie, które wycofa wszystkie zmiany w repozytorium git, które zostały wprowadzone w nieprawidłowym zatwierdzeniu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-485">These commands create a new commit that undoes all changes in the Git repository that were made in the bad commit.</span></span> <span data-ttu-id="8f8c7-486">Platforma Azure ponownie wdroży aplikację przy użyciu nowego zatwierdzenia.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-486">Azure will then redeploy the application using the new commit.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample16.cmd)]

<a id="Exercise4"></a>
### <a name="exercise-4-scaling-using-azure-storage"></a><span data-ttu-id="8f8c7-487">Ćwiczenie 4: skalowanie przy użyciu usługi Azure Storage</span><span class="sxs-lookup"><span data-stu-id="8f8c7-487">Exercise 4: Scaling Using Azure Storage</span></span>

<span data-ttu-id="8f8c7-488">**Obiekty blob** to najprostszy sposób przechowywania dużych ilości danych tekstowych lub binarnych bez struktury, takich jak wideo, audio i obrazy.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-488">**Blobs** are the simplest way to store large amounts of unstructured text or binary data such as video, audio and images.</span></span> <span data-ttu-id="8f8c7-489">Przeniesienie zawartości statycznej aplikacji do magazynu ułatwia skalowanie aplikacji przez obsługę obrazów lub dokumentów bezpośrednio w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-489">Moving the static content of your application to Storage, helps to scale your application by serving images or documents directly to the browser.</span></span>

<span data-ttu-id="8f8c7-490">W tym ćwiczeniu zawartość statyczna aplikacji zostanie przeniesiona do kontenera obiektów BLOB.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-490">In this exercise, you will move the static content of your application to a Blob container.</span></span> <span data-ttu-id="8f8c7-491">Następnie skonfigurujesz aplikację w taki sposób, aby dodać **regułę ponownego zapisywania adresów URL ASP.NET** w **pliku Web. config** w celu przekierowania zawartości do kontenera obiektów BLOB.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-491">Then you will configure your application to add an **ASP.NET URL rewrite rule** in the **Web.config** to redirect your content to the Blob container.</span></span>

<a id="Ex4Task1"></a>
#### <a name="task-1--creating-an-azure-storage-account"></a><span data-ttu-id="8f8c7-492">Zadanie 1 — Tworzenie konta usługi Azure Storage</span><span class="sxs-lookup"><span data-stu-id="8f8c7-492">Task 1 – Creating an Azure Storage Account</span></span>

<span data-ttu-id="8f8c7-493">W tym zadaniu dowiesz się, jak utworzyć nowe konto magazynu przy użyciu portalu zarządzania.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-493">In this task you will learn how to create a new storage account using the management portal.</span></span>

1. <span data-ttu-id="8f8c7-494">Przejdź do [portalu zarządzania platformy Azure](https://manage.windowsazure.com) i zaloguj się przy użyciu konto Microsoft skojarzonego z subskrypcją.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-494">Navigate to the [Azure management portal](https://manage.windowsazure.com) and sign in using the Microsoft account associated with your subscription.</span></span>
2. <span data-ttu-id="8f8c7-495">Wybierz pozycję **Nowy | Data Services | Magazyn | Szybkie tworzenie** , aby rozpocząć tworzenie nowego konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-495">Select **New | Data Services | Storage | Quick Create** to start creating a new storage account.</span></span> <span data-ttu-id="8f8c7-496">Wprowadź unikatową nazwę konta i wybierz **region** z listy.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-496">Enter a unique name for the account and select a **Region** from the list.</span></span> <span data-ttu-id="8f8c7-497">Kliknij pozycję **Utwórz konto magazynu** , aby kontynuować.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-497">Click **Create Storage Account** to continue.</span></span>

    <span data-ttu-id="8f8c7-498">![Tworzenie nowego konta magazynu](maintainable-azure-websites-managing-change-and-scale/_static/image57.png "Tworzenie nowego konta magazynu")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-498">![Creating a new Storage Account](maintainable-azure-websites-managing-change-and-scale/_static/image57.png "Creating a new Storage Account")</span></span>

    <span data-ttu-id="8f8c7-499">*Tworzenie nowego konta magazynu*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-499">*Creating a new storage account*</span></span>
3. <span data-ttu-id="8f8c7-500">W sekcji **Magazyn** poczekaj, aż stan nowego konta magazynu zmieni się na *online* , aby kontynuować pracę z następującym krokiem.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-500">In the **Storage** section, wait until the status of the new storage account changes to *Online* in order to continue with the following step.</span></span>

    <span data-ttu-id="8f8c7-501">![Utworzono konto magazynu](maintainable-azure-websites-managing-change-and-scale/_static/image58.png "Utworzono konto magazynu")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-501">![Storage Account created](maintainable-azure-websites-managing-change-and-scale/_static/image58.png "Storage Account created")</span></span>

    <span data-ttu-id="8f8c7-502">*Utworzono konto magazynu*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-502">*Storage Account created*</span></span>
4. <span data-ttu-id="8f8c7-503">Kliknij nazwę konta magazynu, a następnie kliknij link **pulpitu nawigacyjnego** w górnej części strony.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-503">Click on the storage account name and then click the **Dashboard** link at the top of the page.</span></span> <span data-ttu-id="8f8c7-504">Na stronie **pulpit nawigacyjny** znajdują się informacje o stanie konta i punktach końcowych usługi, które mogą być używane w aplikacjach.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-504">The **Dashboard** page provides you with information about the status of the account and the service endpoints that can be used within your applications.</span></span>

    <span data-ttu-id="8f8c7-505">![Wyświetlanie pulpitu nawigacyjnego konta magazynu](maintainable-azure-websites-managing-change-and-scale/_static/image59.png "Wyświetlanie pulpitu nawigacyjnego konta magazynu")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-505">![Displaying the Storage Account Dashboard](maintainable-azure-websites-managing-change-and-scale/_static/image59.png "Displaying the Storage Account Dashboard")</span></span>

    <span data-ttu-id="8f8c7-506">*Wyświetlanie pulpitu nawigacyjnego konta magazynu*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-506">*Displaying the Storage Account Dashboard*</span></span>
5. <span data-ttu-id="8f8c7-507">Kliknij przycisk **Zarządzaj kluczami dostępu** na pasku nawigacyjnym.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-507">Click the **Manage Access Keys** button in the navigation bar.</span></span>

    <span data-ttu-id="8f8c7-508">![Przycisk Zarządzaj kluczami dostępu](maintainable-azure-websites-managing-change-and-scale/_static/image60.png "Przycisk Zarządzaj kluczami dostępu")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-508">![Manage Access Keys button](maintainable-azure-websites-managing-change-and-scale/_static/image60.png "Manage Access Keys button")</span></span>

    <span data-ttu-id="8f8c7-509">*Przycisk Zarządzaj kluczami dostępu*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-509">*Manage Access Keys button*</span></span>
6. <span data-ttu-id="8f8c7-510">W oknie dialogowym **Zarządzanie kluczami dostępu** Skopiuj **nazwę konta magazynu** i **podstawowy klucz dostępu** , ponieważ będą one potrzebne w poniższym ćwiczeniu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-510">In the **Manage Access Keys** dialog box, copy the **Storage Account Name** and **Primary Access Key** as you will need them in the following exercise.</span></span> <span data-ttu-id="8f8c7-511">Następnie zamknij okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-511">Then, close the dialog box.</span></span>

    <span data-ttu-id="8f8c7-512">![Okno dialogowe Zarządzanie kluczem dostępu](maintainable-azure-websites-managing-change-and-scale/_static/image61.png "Okno dialogowe Zarządzanie kluczem dostępu")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-512">![Manage Access Key dialog box](maintainable-azure-websites-managing-change-and-scale/_static/image61.png "Manage Access Key dialog box")</span></span>

    <span data-ttu-id="8f8c7-513">*Okno dialogowe Zarządzanie kluczem dostępu*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-513">*Manage Access Key dialog box*</span></span>

<a id="Ex4Task2"></a>
#### <a name="task-2--uploading-an-asset-to-azure-blob-storage"></a><span data-ttu-id="8f8c7-514">Zadanie 2 — przekazywanie elementu zawartości do usługi Azure Blob Storage</span><span class="sxs-lookup"><span data-stu-id="8f8c7-514">Task 2 – Uploading an Asset to Azure Blob Storage</span></span>

<span data-ttu-id="8f8c7-515">W tym zadaniu użyjesz okna Eksplorator serwera z programu Visual Studio, aby nawiązać połączenie z kontem magazynu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-515">In this task, you will use the Server Explorer window from Visual Studio to connect to your storage account.</span></span> <span data-ttu-id="8f8c7-516">Następnie utworzysz kontener obiektów blob i przekażesz plik z logo quizu pojedynek maniaków komputerowych do kontenera.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-516">You will then create a blob container and upload a file with the Geek Quiz logo to the container.</span></span>

1. <span data-ttu-id="8f8c7-517">Przejdź do wystąpienia programu Visual Studio z rozwiązaniem **GeekQuiz** z poprzedniego ćwiczenia.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-517">Switch to the Visual Studio instance with the **GeekQuiz** solution from the previous exercise.</span></span>
2. <span data-ttu-id="8f8c7-518">Na pasku menu wybierz pozycję **Widok** , a następnie kliknij pozycję **Eksplorator serwera**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-518">From the menu bar, select **View** and then click **Server Explorer**.</span></span>
3. <span data-ttu-id="8f8c7-519">W **Eksplorator serwera**kliknij prawym przyciskiem myszy węzeł **platformy Azure** i wybierz pozycję **Połącz z platformą Azure...** . Zaloguj się przy użyciu konto Microsoft skojarzonego z subskrypcją.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-519">In **Server Explorer**, right-click the **Azure** node and select **Connect to Azure...**. Sign in using the Microsoft account associated with your subscription.</span></span>

    ![Nawiązywanie połączenia z systemem Windows Azure](maintainable-azure-websites-managing-change-and-scale/_static/image62.png)

    <span data-ttu-id="8f8c7-521">*Łączenie się z platformą Azure*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-521">*Connect to Azure*</span></span>
4. <span data-ttu-id="8f8c7-522">Rozwiń węzeł **Azure** , kliknij prawym przyciskiem myszy pozycję **Magazyn** , a następnie wybierz pozycję **Dołącz magazyn zewnętrzny..** ..</span><span class="sxs-lookup"><span data-stu-id="8f8c7-522">Expand the **Azure** node, right-click **Storage** and select **Attach External Storage...**.</span></span>
5. <span data-ttu-id="8f8c7-523">W oknie dialogowym **Dodawanie nowego konta magazynu** wprowadź **nazwę konta** i **klucz konta** uzyskany w poprzednim zadaniu, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-523">In the **Add New Storage Account** dialog box, enter the **Account name** and **Account key** you obtained in the previous task and click **OK**.</span></span>

    ![Okno dialogowe Dodawanie nowego konta magazynu](maintainable-azure-websites-managing-change-and-scale/_static/image63.png)

    <span data-ttu-id="8f8c7-525">*Okno dialogowe Dodawanie nowego konta magazynu*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-525">*Add New Storage Account dialog box*</span></span>
6. <span data-ttu-id="8f8c7-526">Konto magazynu powinno pojawić się w węźle **Magazyn** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-526">Your storage account should appear under the **Storage** node.</span></span> <span data-ttu-id="8f8c7-527">Rozwiń konto magazynu, kliknij prawym przyciskiem myszy pozycję **obiekty blob** i wybierz pozycję **Utwórz kontener obiektów BLOB..** ..</span><span class="sxs-lookup"><span data-stu-id="8f8c7-527">Expand your storage account, right-click **Blobs** and select **Create Blob Container...**.</span></span>

    <span data-ttu-id="8f8c7-528">![Utwórz kontener obiektów BLOB](maintainable-azure-websites-managing-change-and-scale/_static/image64.png "Utwórz kontener obiektów BLOB")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-528">![Create Blob Container](maintainable-azure-websites-managing-change-and-scale/_static/image64.png "Create Blob Container")</span></span>

    <span data-ttu-id="8f8c7-529">*Utwórz kontener obiektów BLOB*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-529">*Create Blob Container*</span></span>
7. <span data-ttu-id="8f8c7-530">W oknie dialogowym **Tworzenie kontenera obiektów BLOB** wprowadź nazwę kontenera obiektów blob, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-530">In the **Create Blob Container** dialog box, enter a name for the blob container and click **OK**.</span></span>

    <span data-ttu-id="8f8c7-531">![Utwórz kontener obiektów BLOB — okno dialogowe](maintainable-azure-websites-managing-change-and-scale/_static/image65.png "Utwórz kontener obiektów BLOB — okno dialogowe")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-531">![Create Blob Container dialog box](maintainable-azure-websites-managing-change-and-scale/_static/image65.png "Create Blob Container dialog box")</span></span>

    <span data-ttu-id="8f8c7-532">*Utwórz kontener obiektów BLOB — okno dialogowe*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-532">*Create Blob Container dialog box*</span></span>
8. <span data-ttu-id="8f8c7-533">Nowy kontener obiektów BLOB należy dodać do węzła **obiektów BLOB** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-533">The new blob container should be added to the **Blobs** node.</span></span> <span data-ttu-id="8f8c7-534">Zmień uprawnienia dostępu w kontenerze, aby utworzyć kontener jako publiczny.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-534">Change the access permissions in the container to make the container public.</span></span> <span data-ttu-id="8f8c7-535">Aby to zrobić, kliknij prawym przyciskiem myszy kontener **obrazy** i wybierz polecenie **Właściwości**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-535">To do this, right-click the **images** container and select **Properties**.</span></span>

    <span data-ttu-id="8f8c7-536">![właściwości kontenera obrazów](maintainable-azure-websites-managing-change-and-scale/_static/image66.png "właściwości kontenera obrazów")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-536">![images container properties](maintainable-azure-websites-managing-change-and-scale/_static/image66.png "images container properties")</span></span>

    <span data-ttu-id="8f8c7-537">*Właściwości kontenera obrazów*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-537">*Images container properties*</span></span>
9. <span data-ttu-id="8f8c7-538">W oknie **Właściwości** Ustaw **publiczny dostęp do odczytu** do **kontenera**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-538">In the **Properties** window, set the **Public Read Access** to **Container**.</span></span>

    <span data-ttu-id="8f8c7-539">![Zmiana właściwości publicznego dostępu do odczytu](maintainable-azure-websites-managing-change-and-scale/_static/image67.png "Zmiana właściwości publicznego dostępu do odczytu")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-539">![Changing public read access property](maintainable-azure-websites-managing-change-and-scale/_static/image67.png "Changing public read access property")</span></span>

    <span data-ttu-id="8f8c7-540">*Zmiana właściwości publicznego dostępu do odczytu*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-540">*Changing public read access property*</span></span>
10. <span data-ttu-id="8f8c7-541">Po wyświetleniu monitu, jeśli na pewno chcesz zmienić właściwość dostępu publicznego, kliknij przycisk **tak**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-541">When prompted if you are sure you want to change the public access property, click **Yes**.</span></span>

    <span data-ttu-id="8f8c7-542">![Ostrzeżenie Microsoft Visual Studio](maintainable-azure-websites-managing-change-and-scale/_static/image68.png "Ostrzeżenie Microsoft Visual Studio")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-542">![Microsoft Visual Studio warning](maintainable-azure-websites-managing-change-and-scale/_static/image68.png "Microsoft Visual Studio warning")</span></span>

    <span data-ttu-id="8f8c7-543">*Ostrzeżenie Microsoft Visual Studio*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-543">*Microsoft Visual Studio warning*</span></span>
11. <span data-ttu-id="8f8c7-544">W **Eksplorator serwera**kliknij prawym przyciskiem myszy kontener obiektów BLOB **obrazów** i wybierz pozycję **Wyświetl kontener obiektów BLOB**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-544">In **Server Explorer**, right-click in the **images** blob container and select **View Blob Container**.</span></span>

    <span data-ttu-id="8f8c7-545">![Wyświetlanie kontenera obiektów BLOB](maintainable-azure-websites-managing-change-and-scale/_static/image69.png "Wyświetlanie kontenera obiektów BLOB")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-545">![View Blob Container](maintainable-azure-websites-managing-change-and-scale/_static/image69.png "View Blob Container")</span></span>

    <span data-ttu-id="8f8c7-546">*Wyświetlanie kontenera obiektów BLOB*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-546">*View Blob Container*</span></span>
12. <span data-ttu-id="8f8c7-547">Kontener obrazów powinien zostać otwarty w nowym oknie, a legenda bez wpisów powinna być pokazywana.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-547">The images container should open in a new window and a legend with no entries should be shown.</span></span> <span data-ttu-id="8f8c7-548">Kliknij ikonę **Przekaż** , aby przekazać plik do kontenera obiektów BLOB.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-548">Click the **upload** icon to upload a file to the blob container.</span></span>

    <span data-ttu-id="8f8c7-549">![Kontener obrazów bez wpisów](maintainable-azure-websites-managing-change-and-scale/_static/image70.png "Kontener obrazów bez wpisów")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-549">![Images container with no entries](maintainable-azure-websites-managing-change-and-scale/_static/image70.png "Images container with no entries")</span></span>

    <span data-ttu-id="8f8c7-550">*Kontener obrazów bez wpisów*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-550">*Images container with no entries*</span></span>
13. <span data-ttu-id="8f8c7-551">W oknie dialogowym **przekazywanie obiektu BLOB** przejdź do folderu **Assets** w środowisku laboratoryjnym.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-551">In the **Upload Blob** dialog box, navigate to the **Assets** folder of the lab.</span></span> <span data-ttu-id="8f8c7-552">Wybierz plik **logo-Big. png** , a następnie kliknij przycisk **Otwórz**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-552">Select the **logo-big.png** file and click **Open**.</span></span>
14. <span data-ttu-id="8f8c7-553">Poczekaj, aż plik zostanie przekazany.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-553">Wait until the file is uploaded.</span></span> <span data-ttu-id="8f8c7-554">Po zakończeniu przekazywania plik powinien znajdować się w kontenerze obrazy.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-554">When the upload completes, the file should be listed in the images container.</span></span> <span data-ttu-id="8f8c7-555">Kliknij prawym przyciskiem myszy wpis pliku i wybierz polecenie **Kopiuj adres URL**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-555">Right-click the file entry and select **Copy URL**.</span></span>

    <span data-ttu-id="8f8c7-556">![Kopiuj adres URL obiektu BLOB](maintainable-azure-websites-managing-change-and-scale/_static/image71.png "Kopiuj adres URL pliku BLOB")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-556">![Copy blob URL](maintainable-azure-websites-managing-change-and-scale/_static/image71.png "Copy blob file URL")</span></span>

    <span data-ttu-id="8f8c7-557">*Kopiuj adres URL obiektu BLOB*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-557">*Copy blob URL*</span></span>
15. <span data-ttu-id="8f8c7-558">Otwórz program Internet Explorer i wklej adres URL.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-558">Open Internet Explorer and paste the URL.</span></span> <span data-ttu-id="8f8c7-559">W przeglądarce powinien zostać wyświetlony następujący obraz.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-559">The following image should be shown in the browser.</span></span>

    <span data-ttu-id="8f8c7-560">![Obraz logo-Big. png z systemu Windows Blob Storage](maintainable-azure-websites-managing-change-and-scale/_static/image72.png "logo-Big. png — obraz z magazynu")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-560">![logo-big.png image from Windows Blob Storage](maintainable-azure-websites-managing-change-and-scale/_static/image72.png "logo-big.png image from storage")</span></span>

    <span data-ttu-id="8f8c7-561">*Obraz logo-Big. png z usługi Azure Blob Storage*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-561">*logo-big.png image from Azure Blob Storage*</span></span>

<a id="Ex4Task3"></a>
#### <a name="task-3--updating-the-solution-to-consume-static-content-from-azure-blob-storage"></a><span data-ttu-id="8f8c7-562">Zadanie 3 — Aktualizowanie rozwiązania do korzystania z zawartości statycznej z usługi Azure Blob Storage</span><span class="sxs-lookup"><span data-stu-id="8f8c7-562">Task 3 – Updating the Solution to Consume Static Content from Azure Blob Storage</span></span>

<span data-ttu-id="8f8c7-563">W tym zadaniu skonfigurujesz rozwiązanie **GeekQuiz** , aby korzystało z obrazu przekazanego do platformy Azure Blob Storage (zamiast obrazu znajdującego się w aplikacji sieci Web) przez dodanie reguły ponownego zapisu ASP.net URL w pliku **Web. config** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-563">In this task, you will configure the **GeekQuiz** solution to consume the image uploaded to Azure Blob Storage (instead of the image located in the web app) by adding an ASP.NET URL rewrite rule in the **web.config** file.</span></span>

1. <span data-ttu-id="8f8c7-564">W programie Visual Studio Otwórz plik **Web. config** w projekcie **GeekQuiz** i Znajdź element **&lt;system. WebServer&gt;** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-564">In Visual Studio, open the **Web.config** file inside the **GeekQuiz** project and locate the **&lt;system.webServer&gt;** element.</span></span>
2. <span data-ttu-id="8f8c7-565">Dodaj następujący kod, aby dodać regułę ponownego zapisywania adresu URL, aktualizując symbol zastępczy przy użyciu nazwy konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-565">Add the following code to add an URL rewrite rule, updating the placeholder with your storage account name.</span></span>

    <span data-ttu-id="8f8c7-566">(Fragment kodu- *WebSitesInProduction-EX4-UrlRewriteRule*)</span><span class="sxs-lookup"><span data-stu-id="8f8c7-566">(Code Snippet - *WebSitesInProduction - Ex4 - UrlRewriteRule*)</span></span>

    [!code-xml[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample17.xml)]

    > [!NOTE]
    > <span data-ttu-id="8f8c7-567">Ponowne zapisywanie adresów URL to proces przechwytywania przychodzącego żądania sieci Web i przekierowania żądania do innego zasobu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-567">URL rewriting is the process of intercepting an incoming Web request and redirecting the request to a different resource.</span></span> <span data-ttu-id="8f8c7-568">Reguły zapisywania adresów URL instruują aparat ponownego zapisywania, gdy żądanie musi zostać przekierowane, i gdzie należy je przekierowywać.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-568">The URL rewriting rules tells the rewriting engine when a request needs to be redirected, and where should they be redirected.</span></span> <span data-ttu-id="8f8c7-569">Reguła ponownego zapisywania składa się z dwóch ciągów: wzorca, który ma być wyszukiwany w żądanym adresie URL (zazwyczaj przy użyciu wyrażeń regularnych), oraz ciągu, w którym ma zostać zamieniony wzorzec, jeśli znaleziono.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-569">A rewriting rule is composed of two strings: the pattern to look for in the requested URL (usually, using regular expressions), and the string to replace the pattern with, if found.</span></span> <span data-ttu-id="8f8c7-570">Aby uzyskać więcej informacji, zobacz Ponowne [Zapisywanie adresów URL w ASP.NET](https://msdn.microsoft.com/library/ms972974.aspx).</span><span class="sxs-lookup"><span data-stu-id="8f8c7-570">For more information, see [URL Rewriting in ASP.NET](https://msdn.microsoft.com/library/ms972974.aspx).</span></span>
3. <span data-ttu-id="8f8c7-571">Naciśnij **kombinację klawiszy Ctrl + S** , aby zapisać zmiany.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-571">Press **CTRL + S** to save the changes.</span></span>
4. <span data-ttu-id="8f8c7-572">Otwórz nową konsolę **bash usługi git** , aby wdrożyć zaktualizowaną aplikację do Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-572">Open a new **Git Bash** console to deploy the updated application to Azure App Service.</span></span>
5. <span data-ttu-id="8f8c7-573">Wykonaj następujące polecenia, aby wypchnąć zmiany do platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-573">Execute the following commands to push the changes to Azure.</span></span> <span data-ttu-id="8f8c7-574">Zaktualizuj symbol zastępczy *[The-Application-path]* ze ścieżką do rozwiązania **GeekQuiz** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-574">Update the *[YOUR-APPLICATION-PATH]* placeholder with the path to the **GeekQuiz** solution.</span></span> <span data-ttu-id="8f8c7-575">Zostanie wyświetlony monit o hasło wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-575">You will be prompted for your deployment password.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample18.cmd)]

    ![Wdrażanie aktualizacji na platformie Azure](maintainable-azure-websites-managing-change-and-scale/_static/image73.png)

    <span data-ttu-id="8f8c7-577">*Wdrażanie aktualizacji na platformie Azure*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-577">*Deploying update to Azure*</span></span>

<a id="Ex4Task4"></a>
#### <a name="task-4--verification"></a><span data-ttu-id="8f8c7-578">Zadanie 4 — weryfikacja</span><span class="sxs-lookup"><span data-stu-id="8f8c7-578">Task 4 – Verification</span></span>

<span data-ttu-id="8f8c7-579">W tym zadaniu będziesz używać programu **Internet Explorer** do przeglądania aplikacji **quizu pojedynek maniaków komputerowych** i sprawdzenia, czy reguła ponownego zapisywania adresów URL dla obrazów działa i że nastąpi przekierowanie do obrazu hostowanego na **platformie Azure Blob Storage**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-579">In this task you will use **Internet Explorer** to browse the **Geek Quiz** application and check that the URL rewrite rule for images works and you are redirected to the image hosted on **Azure Blob Storage**.</span></span>

1. <span data-ttu-id="8f8c7-580">Otwórz program Internet Explorer i przejdź do aplikacji sieci Web (np. `http://<your-web-site>.azurewebsites.net`).</span><span class="sxs-lookup"><span data-stu-id="8f8c7-580">Open Internet Explorer and navigate to your web app (e.g. `http://<your-web-site>.azurewebsites.net`).</span></span> <span data-ttu-id="8f8c7-581">Zaloguj się przy użyciu wcześniej utworzonych poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-581">Log in using the previously created credentials.</span></span>

    <span data-ttu-id="8f8c7-582">![Wyświetlanie aplikacji sieci Web quizu pojedynek maniaków komputerowych z obrazem](maintainable-azure-websites-managing-change-and-scale/_static/image74.png "Wyświetlanie aplikacji sieci Web quizu pojedynek maniaków komputerowych z obrazem")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-582">![Showing the Geek Quiz web app with the image](maintainable-azure-websites-managing-change-and-scale/_static/image74.png "Showing the Geek Quiz web app with the image")</span></span>

    <span data-ttu-id="8f8c7-583">*Wyświetlanie aplikacji sieci Web quizu pojedynek maniaków komputerowych z obrazem*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-583">*Showing the Geek Quiz web app with the image*</span></span>
2. <span data-ttu-id="8f8c7-584">Naciśnij klawisz **F12** , aby uruchomić narzędzia programistyczne, wybierz kartę **Sieć** i Rozpocznij nagrywanie.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-584">Press **F12** to launch the development tools, select the **Network** tab and start recording.</span></span>

    <span data-ttu-id="8f8c7-585">![Rozpoczynanie rejestrowania w sieci](maintainable-azure-websites-managing-change-and-scale/_static/image75.png "Rozpoczynanie rejestrowania w sieci")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-585">![Starting network recording](maintainable-azure-websites-managing-change-and-scale/_static/image75.png "Starting network recording")</span></span>

    <span data-ttu-id="8f8c7-586">*Rozpoczynanie rejestrowania w sieci*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-586">*Starting network recording*</span></span>
3. <span data-ttu-id="8f8c7-587">Naciśnij **kombinację klawiszy CTRL + F5** , aby odświeżyć stronę sieci Web.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-587">Press **CTRL + F5** to refresh the web page.</span></span>
4. <span data-ttu-id="8f8c7-588">Po zakończeniu ładowania strony powinno zostać wyświetlone żądanie HTTP dla adresu URL **/IMG/logo-Big.png** z wynikiem http **301** (redirect) i innym żądaniem dla `http://[YOUR-STORAGE-ACCOUNT].blob.core.windows.net/images/logo-big.png` adres url z wynikiem http **200** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-588">Once the page has finished loading, you should see an HTTP request for the **/img/logo-big.png** URL with an HTTP **301** result (redirect) and another request for `http://[YOUR-STORAGE-ACCOUNT].blob.core.windows.net/images/logo-big.png` URL with a HTTP **200** result.</span></span>

    <span data-ttu-id="8f8c7-589">![Weryfikowanie przekierowania adresu URL](maintainable-azure-websites-managing-change-and-scale/_static/image76.png "Wyświetlanie przekierowania w narzędziach deweloperskich")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-589">![Verifying the URL redirect](maintainable-azure-websites-managing-change-and-scale/_static/image76.png "Showing the redirect in Dev Tools")</span></span>

    <span data-ttu-id="8f8c7-590">*Weryfikowanie przekierowania adresu URL*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-590">*Verifying the URL redirect*</span></span>

<a id="Exercise5"></a>
### <a name="exercise-5-using-autoscale-for-web-apps"></a><span data-ttu-id="8f8c7-591">Ćwiczenie 5. Używanie skalowania automatycznego dla Web Apps</span><span class="sxs-lookup"><span data-stu-id="8f8c7-591">Exercise 5: Using Autoscale for Web Apps</span></span>

> [!NOTE]
> <span data-ttu-id="8f8c7-592">To ćwiczenie jest opcjonalne, ponieważ wymaga obsługi testowania wydajności &amp; sieci Web, który jest dostępny tylko dla **Visual Studio 2013 Ultimate Edition**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-592">This exercise is optional, since it requires support for Web Load &amp; Performance Testing which is only available for **Visual Studio 2013 Ultimate Edition**.</span></span> <span data-ttu-id="8f8c7-593">Aby uzyskać więcej informacji na temat określonych funkcji Visual Studio 2013, należy porównać wersje w [tym miejscu](https://www.microsoft.com/visualstudio/eng/products/compare).</span><span class="sxs-lookup"><span data-stu-id="8f8c7-593">For more information on specific Visual Studio 2013 features, compare versions [here](https://www.microsoft.com/visualstudio/eng/products/compare).</span></span>

<span data-ttu-id="8f8c7-594">**Azure App Service Web Apps** udostępnia funkcję skalowania automatycznego dla aplikacji sieci Web działających w **trybie standardowym**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-594">**Azure App Service Web Apps** provides the Autoscale feature for web apps running in **Standard Mode**.</span></span> <span data-ttu-id="8f8c7-595">Funkcja automatycznego skalowania umożliwia platformie Azure automatyczne skalowanie liczby wystąpień aplikacji sieci Web w zależności od obciążenia.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-595">Autoscale lets Azure automatically scale the instance count of your web app depending on the load.</span></span> <span data-ttu-id="8f8c7-596">Gdy automatyczne skalowanie jest włączone, platforma Azure sprawdza procesor aplikacji sieci Web co pięć minut i dodaje wystąpienia w miarę potrzeb w danym momencie.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-596">When Autoscale is enabled, Azure checks the CPU of your web app once every five minutes and adds instances as needed at that point in time.</span></span> <span data-ttu-id="8f8c7-597">Jeśli użycie procesora CPU jest niskie, platforma Azure usunie wystąpienia co dwie godziny, aby upewnić się, że wydajność aplikacji sieci Web nie została obniżona.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-597">If the CPU usage is low, Azure will remove instances once every two hours to ensure that the performance of your web app is not degraded.</span></span>

<span data-ttu-id="8f8c7-598">W tym ćwiczeniu przedstawiono kroki wymagane do skonfigurowania funkcji **automatycznego skalowania** dla aplikacji sieci Web **pojedynek maniaków komputerowych Quiz** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-598">In this exercise you will go through the steps required to configure the **Autoscale** feature for the **Geek Quiz** web app.</span></span> <span data-ttu-id="8f8c7-599">Tę funkcję należy zweryfikować, uruchamiając test obciążenia programu Visual Studio w celu wygenerowania wystarczającego obciążenia procesora w aplikacji w celu wyzwolenia uaktualnienia wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-599">You will verify this feature by running a Visual Studio load test to generate enough CPU load on the application to trigger an instance upgrade.</span></span>

<a id="Ex5Task1"></a>
#### <a name="task-1--configuring-autoscale-based-on-the-cpu-metric"></a><span data-ttu-id="8f8c7-600">Zadanie 1 — Konfigurowanie automatycznego skalowania na podstawie metryki procesora</span><span class="sxs-lookup"><span data-stu-id="8f8c7-600">Task 1 – Configuring Autoscale Based on the CPU Metric</span></span>

<span data-ttu-id="8f8c7-601">W tym zadaniu zostanie użyty Portal zarządzania Azure, aby włączyć funkcję skalowania automatycznego dla aplikacji sieci Web utworzonej w ćwiczeniu 2.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-601">In this task you will use the Azure management portal to enable the Autoscale feature for the web app you created in Exercise 2.</span></span>

1. <span data-ttu-id="8f8c7-602">W [portalu zarządzania platformy Azure](https://manage.windowsazure.com/)wybierz pozycję **witryny sieci** Web, a następnie kliknij aplikację internetową utworzoną w ćwiczeniu 2.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-602">In the [Azure management portal](https://manage.windowsazure.com/), select **Websites** and click the web app you created in Exercise 2.</span></span>
2. <span data-ttu-id="8f8c7-603">Przejdź do strony **skalowanie** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-603">Navigate to the **Scale** page.</span></span> <span data-ttu-id="8f8c7-604">W obszarze **pojemność** wybierz opcję **procesor CPU** dla konfiguracji **skalowania według metryk** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-604">Under the **capacity** section, select **CPU** for the **Scale by Metric** configuration.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-605">Przy skalowaniu według procesora, platforma Azure dynamicznie dostosowuje liczbę wystąpień używanych przez aplikację w przypadku zmiany użycia procesora CPU.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-605">When scaling by CPU, Azure dynamically adjusts the number of instances that the app uses if the CPU usage changes.</span></span>

    <span data-ttu-id="8f8c7-606">![Wybieranie do skalowania według procesora CPU](maintainable-azure-websites-managing-change-and-scale/_static/image77.png "Wybieranie metryki procesora CPU na potrzeby automatycznego skalowania")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-606">![Selecting to scale by CPU](maintainable-azure-websites-managing-change-and-scale/_static/image77.png "Selecting the CPU metric for auto scaling")</span></span>

    <span data-ttu-id="8f8c7-607">*Wybieranie do skalowania według procesora CPU*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-607">*Selecting to scale by CPU*</span></span>
3. <span data-ttu-id="8f8c7-608">Zmień **docelową konfigurację procesora** na **20**-**40** procent.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-608">Change the **Target CPU** configuration to **20**-**40** percent.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-609">Ten zakres reprezentuje średnie użycie procesora dla aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-609">This range represents the average CPU usage for your web app.</span></span> <span data-ttu-id="8f8c7-610">Platforma Azure doda lub usunie wystąpienia, aby zachować swoją aplikację internetową w tym zakresie.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-610">Azure will add or remove instances to keep your web app in this range.</span></span> <span data-ttu-id="8f8c7-611">Minimalna i Maksymalna liczba wystąpień używanych do skalowania jest określona w konfiguracji **liczby wystąpień** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-611">The minimum and maximum number of instances used for scaling is specified in the **Instance Count** configuration.</span></span> <span data-ttu-id="8f8c7-612">Platforma Azure nigdy nie będzie przekroczyć tego limitu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-612">Azure will never go above or beyond that limit.</span></span>
    >
    > <span data-ttu-id="8f8c7-613">Domyślne **docelowe wartości procesora** są modyfikowane tylko w celach tego laboratorium.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-613">The default **Target CPU** values are modified just for the purposes of this lab.</span></span> <span data-ttu-id="8f8c7-614">Konfigurując zakres procesorów przy użyciu małych wartości, zwiększasz prawdopodobieństwo wyzwalania automatycznego skalowania w przypadku umieszczenia w aplikacji umiarkowanego obciążenia.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-614">By configuring the CPU range with small values, you are increasing the chances to trigger Autoscale when a moderate load is placed on the application.</span></span>

    <span data-ttu-id="8f8c7-615">![Zmiana docelowego procesora CPU na wartość z zakresu od 20 do 40%](maintainable-azure-websites-managing-change-and-scale/_static/image78.png "Zmiana docelowego procesora CPU na wartość z zakresu od 20 do 40%")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-615">![Changing the target CPU to be between 20 and 40 percent](maintainable-azure-websites-managing-change-and-scale/_static/image78.png "Changing the target CPU to be between 20 and 40 percent")</span></span>

    <span data-ttu-id="8f8c7-616">*Zmiana docelowego procesora CPU na wartość z zakresu od 20 do 40%*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-616">*Changing the Target CPU to be between 20 and 40 percent*</span></span>
4. <span data-ttu-id="8f8c7-617">Kliknij przycisk **Zapisz** na pasku poleceń, aby zapisać zmiany.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-617">Click **Save** in the command bar to save the changes.</span></span>

<a id="Ex5Task2"></a>
#### <a name="task-2--load-testing-with-visual-studio"></a><span data-ttu-id="8f8c7-618">Zadanie 2 — testowanie obciążenia za pomocą programu Visual Studio</span><span class="sxs-lookup"><span data-stu-id="8f8c7-618">Task 2 – Load Testing with Visual Studio</span></span>

<span data-ttu-id="8f8c7-619">Teraz po skonfigurowaniu **automatycznego skalowania** utworzysz **projekt testu wydajności i obciążenia sieci Web** w programie Visual Studio, aby wygenerować obciążenie procesora CPU w aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-619">Now that **Autoscale** has been configured, you will create a **Web Performance and Load Test Project** in Visual Studio to generate some CPU load on your web app.</span></span>

1. <span data-ttu-id="8f8c7-620">Otwórz **Visual Studio Ultimate 2013** i wybierz pozycję **plik | Nowy | Projekt...** , aby rozpocząć nowe rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-620">Open **Visual Studio Ultimate 2013** and select **File | New | Project...** to start a new solution.</span></span>

    <span data-ttu-id="8f8c7-621">![Tworzenie nowego projektu](maintainable-azure-websites-managing-change-and-scale/_static/image79.png "Tworzenie nowego projektu")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-621">![Creating a new project](maintainable-azure-websites-managing-change-and-scale/_static/image79.png "Creating a new project")</span></span>

    <span data-ttu-id="8f8c7-622">*Tworzenie nowego projektu*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-622">*Creating a new project*</span></span>
2. <span data-ttu-id="8f8c7-623">W oknie dialogowym **Nowy projekt** wybierz **projekt test wydajności i obciążenia sieci Web** w obszarze **Wizualizacja C# | Karta test** . Upewnij się, że **.NET Framework 4,5** jest zaznaczone, nazwij *projekt WebAndLoadTestProject*, wybierz **lokalizację** i kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-623">In the **New Project** dialog box, select **Web Performance and Load Test Project** under the **Visual C# | Test** tab. Make sure **.NET Framework 4.5** is selected, name the project *WebAndLoadTestProject*, choose a **Location** and click **OK**.</span></span>

    <span data-ttu-id="8f8c7-624">![Tworzenie nowego projektu testu sieci Web i obciążenia](maintainable-azure-websites-managing-change-and-scale/_static/image80.png "Tworzenie nowego projektu testu sieci Web i obciążenia")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-624">![Creating a new Web and Load Test project](maintainable-azure-websites-managing-change-and-scale/_static/image80.png "Creating a new Web and Load Test project")</span></span>

    <span data-ttu-id="8f8c7-625">*Tworzenie nowego projektu testu sieci Web i obciążenia*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-625">*Creating a new Web and Load Test project*</span></span>
3. <span data-ttu-id="8f8c7-626">W **WebTest1. webtest** kliknij prawym przyciskiem myszy węzeł **WebTest1** i kliknij polecenie **Dodaj żądanie**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-626">In the **WebTest1.webtest** Right-click the **WebTest1** node and click **Add Request**.</span></span>

    <span data-ttu-id="8f8c7-627">![Dodawanie żądania do WebTest1](maintainable-azure-websites-managing-change-and-scale/_static/image81.png "Dodawanie żądania do WebTest1")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-627">![Adding a request to WebTest1](maintainable-azure-websites-managing-change-and-scale/_static/image81.png "Adding a request to WebTest1")</span></span>

    <span data-ttu-id="8f8c7-628">*Dodawanie żądania do WebTest1*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-628">*Adding a request to WebTest1*</span></span>
4. <span data-ttu-id="8f8c7-629">W oknie **Właściwości** nowego węzła żądania zaktualizuj właściwość **adresu URL** , aby wskazywała adres URL aplikacji sieci web (np. *[http://geek-quiz.azurewebsites.net/](http://geek-quiz.azurewebsites.net/)* ).</span><span class="sxs-lookup"><span data-stu-id="8f8c7-629">In the **Properties** window of the new request node, update the **Url** property to point to the URL of your web app (e.g. *[http://geek-quiz.azurewebsites.net/](http://geek-quiz.azurewebsites.net/)*).</span></span>

    <span data-ttu-id="8f8c7-630">![Zmiana właściwości adresu URL](maintainable-azure-websites-managing-change-and-scale/_static/image82.png "Zmiana właściwości adresu URL")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-630">![Changing the Url property](maintainable-azure-websites-managing-change-and-scale/_static/image82.png "Changing the Url property")</span></span>

    <span data-ttu-id="8f8c7-631">*Zmiana właściwości adresu URL*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-631">*Changing the Url property*</span></span>
5. <span data-ttu-id="8f8c7-632">W oknie **WebTest1. webtest** kliknij prawym przyciskiem myszy pozycję **WebTest1** , a następnie kliknij pozycję **Dodaj pętlę...** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-632">In the **WebTest1.webtest** window, right-click **WebTest1** and click **Add Loop...**.</span></span>

    <span data-ttu-id="8f8c7-633">![Dodawanie pętli do WebTest1](maintainable-azure-websites-managing-change-and-scale/_static/image83.png "Dodawanie pętli do WebTest1")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-633">![Adding a loop to WebTest1](maintainable-azure-websites-managing-change-and-scale/_static/image83.png "Adding a loop to WebTest1")</span></span>

    <span data-ttu-id="8f8c7-634">*Dodawanie pętli do WebTest1*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-634">*Adding a loop to WebTest1*</span></span>
6. <span data-ttu-id="8f8c7-635">W oknie dialogowym **Dodaj regułę warunkową i elementy do pętli** wybierz regułę **pętli for** i zmodyfikuj następujące właściwości.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-635">In the **Add Conditional Rule and Items to Loop** dialog box, select the **For Loop** rule and modify the following properties.</span></span>

   1. <span data-ttu-id="8f8c7-636">**Wartość zakończenia:** 1000</span><span class="sxs-lookup"><span data-stu-id="8f8c7-636">**Terminating value:** 1000</span></span>
   2. <span data-ttu-id="8f8c7-637">**Nazwa parametru kontekstu:** Iterator</span><span class="sxs-lookup"><span data-stu-id="8f8c7-637">**Context Parameter Name:** Iterator</span></span>
   3. <span data-ttu-id="8f8c7-638">**Wartość przyrostu:** 1</span><span class="sxs-lookup"><span data-stu-id="8f8c7-638">**Increment Value:** 1</span></span>

      <span data-ttu-id="8f8c7-639">![Wybieranie reguły pętli for i aktualizowanie właściwości](maintainable-azure-websites-managing-change-and-scale/_static/image84.png "Wybieranie reguły pętli for i aktualizowanie właściwości")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-639">![Selecting the For Loop rule and updating the properties](maintainable-azure-websites-managing-change-and-scale/_static/image84.png "Selecting the For Loop rule and updating the properties")</span></span>

      <span data-ttu-id="8f8c7-640">*Wybieranie reguły pętli for i aktualizowanie właściwości*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-640">*Selecting the For Loop rule and updating the properties*</span></span>
7. <span data-ttu-id="8f8c7-641">W sekcji **elementy w pętli** wybierz utworzone wcześniej żądanie jako pierwszy i ostatni element dla pętli.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-641">Under the **Items in loop** section, select the request you created previously to be the first and last item for the loop.</span></span> <span data-ttu-id="8f8c7-642">Kliknij przycisk **OK** , aby kontynuować.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-642">Click **OK** to continue.</span></span>

    <span data-ttu-id="8f8c7-643">![Wybieranie pierwszych i ostatnich elementów dla pętli](maintainable-azure-websites-managing-change-and-scale/_static/image85.png "Wybieranie pierwszych i ostatnich elementów dla pętli")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-643">![Selecting the first and last items for the loop](maintainable-azure-websites-managing-change-and-scale/_static/image85.png "Selecting the first and last items for the loop")</span></span>

    <span data-ttu-id="8f8c7-644">*Wybieranie pierwszych i ostatnich elementów dla pętli*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-644">*Selecting the first and last items for the loop*</span></span>
8. <span data-ttu-id="8f8c7-645">W **Eksplorator rozwiązań**kliknij prawym przyciskiem myszy projekt **WebAndLoadTestProject** , rozwiń menu **Dodaj** i wybierz polecenie **test obciążenia.** ...</span><span class="sxs-lookup"><span data-stu-id="8f8c7-645">In **Solution Explorer**, right-click the **WebAndLoadTestProject** project, expand the **Add** menu and select **Load Test...**.</span></span>

    <span data-ttu-id="8f8c7-646">![Dodawanie testu obciążenia do projektu WebAndLoadTestProject](maintainable-azure-websites-managing-change-and-scale/_static/image86.png "Dodawanie testu obciążenia do projektu WebAndLoadTestProject")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-646">![Adding a Load Test to the WebAndLoadTestProject project](maintainable-azure-websites-managing-change-and-scale/_static/image86.png "Adding a Load Test to the WebAndLoadTestProject project")</span></span>

    <span data-ttu-id="8f8c7-647">*Dodawanie testu obciążenia do projektu WebAndLoadTestProject*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-647">*Adding a Load Test to the WebAndLoadTestProject project*</span></span>
9. <span data-ttu-id="8f8c7-648">W oknie dialogowym **nowy Kreator testu obciążeniowego** kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-648">In the **New Load Test Wizard** dialog box, click **Next**.</span></span>

    <span data-ttu-id="8f8c7-649">![Nowe Kreator testu obciążeniowego](maintainable-azure-websites-managing-change-and-scale/_static/image87.png "Nowe Kreator testu obciążeniowego")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-649">![New Load Test Wizard](maintainable-azure-websites-managing-change-and-scale/_static/image87.png "New Load Test Wizard")</span></span>

    <span data-ttu-id="8f8c7-650">*Nowe Kreator testu obciążeniowego*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-650">*New Load Test Wizard*</span></span>
10. <span data-ttu-id="8f8c7-651">Na stronie **scenariusz** wybierz opcję nie **Używaj czasów reakcji** i kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-651">In the **Scenario** page, select **Do not use think times** and click **Next**.</span></span>

    <span data-ttu-id="8f8c7-652">![Wybieranie, aby nie używać czasów reakcji](maintainable-azure-websites-managing-change-and-scale/_static/image88.png "Wybieranie, aby nie używać czasów reakcji")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-652">![Selecting not to use think times](maintainable-azure-websites-managing-change-and-scale/_static/image88.png "Selecting not to use think times")</span></span>

    <span data-ttu-id="8f8c7-653">*Wybieranie, aby nie używać czasów reakcji*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-653">*Selecting not to use think times*</span></span>
11. <span data-ttu-id="8f8c7-654">Na stronie **wzorzec obciążenia** upewnij się, że opcja **ładowania stałego** jest zaznaczona.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-654">In the **Load Pattern** page, make sure that the **Constant Load** option is selected.</span></span> <span data-ttu-id="8f8c7-655">Zmień ustawienie **Liczba użytkowników** na **250** , a następnie kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-655">Change the **User Count** setting to **250** users and click **Next**.</span></span>

    <span data-ttu-id="8f8c7-656">![Zmiana liczby użytkowników na 250](maintainable-azure-websites-managing-change-and-scale/_static/image89.png "Zmiana liczby użytkowników na 250")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-656">![Changing the user count to 250](maintainable-azure-websites-managing-change-and-scale/_static/image89.png "Changing the user count to 250")</span></span>

    <span data-ttu-id="8f8c7-657">*Zmiana liczby użytkowników na 250*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-657">*Changing the user count to 250*</span></span>
12. <span data-ttu-id="8f8c7-658">Na stronie **model testu mieszanego** wybierz pozycję **na podstawie sekwencyjnej kolejności testów** i kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-658">In the **Test Mix Model** page, select **Based on sequential test order** and click **Next**.</span></span>

    <span data-ttu-id="8f8c7-659">![Wybieranie modelu testu mieszanego](maintainable-azure-websites-managing-change-and-scale/_static/image90.png "Wybieranie modelu testu mieszanego")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-659">![Selecting the test mix model](maintainable-azure-websites-managing-change-and-scale/_static/image90.png "Selecting the test mix model")</span></span>

    <span data-ttu-id="8f8c7-660">*Wybieranie modelu testu mieszanego*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-660">*Selecting the test mix model*</span></span>
13. <span data-ttu-id="8f8c7-661">Na stronie **model testu mieszanego** kliknij przycisk **Dodaj...** , aby dodać test do kombinacji.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-661">In the **Test Mix Model** page, click **Add...** to add a test to the mix.</span></span>

    <span data-ttu-id="8f8c7-662">![Dodawanie testu do testu mieszanego](maintainable-azure-websites-managing-change-and-scale/_static/image91.png "Dodawanie testu do testu mieszanego")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-662">![Adding a test to the test mix](maintainable-azure-websites-managing-change-and-scale/_static/image91.png "Adding a test to the test mix")</span></span>

    <span data-ttu-id="8f8c7-663">*Dodawanie testu do testu mieszanego*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-663">*Adding a test to the test mix*</span></span>
14. <span data-ttu-id="8f8c7-664">W oknie dialogowym **Dodawanie testów** kliknij dwukrotnie pozycję **WebTest1** , aby dodać test do listy **Wybrane testy** .</span><span class="sxs-lookup"><span data-stu-id="8f8c7-664">In the **Add Tests** dialog box, double-click **WebTest1** to add the test to the **Selected tests** list.</span></span> <span data-ttu-id="8f8c7-665">Kliknij przycisk **OK** , aby kontynuować.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-665">Click **OK** to continue.</span></span>

    <span data-ttu-id="8f8c7-666">![Dodawanie testu WebTest1](maintainable-azure-websites-managing-change-and-scale/_static/image92.png "Dodawanie testu WebTest1")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-666">![Adding the WebTest1 test](maintainable-azure-websites-managing-change-and-scale/_static/image92.png "Adding the WebTest1 test")</span></span>

    <span data-ttu-id="8f8c7-667">*Dodawanie testu WebTest1*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-667">*Adding the WebTest1 test*</span></span>
15. <span data-ttu-id="8f8c7-668">Na stronie **test mix** kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-668">Back in the **Test Mix** page, click **Next**.</span></span>

    <span data-ttu-id="8f8c7-669">![Ukończenie testu mieszanego](maintainable-azure-websites-managing-change-and-scale/_static/image93.png "Ukończenie testu mieszanego")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-669">![Completing the Test Mix page](maintainable-azure-websites-managing-change-and-scale/_static/image93.png "Completing the Test Mix page")</span></span>

    <span data-ttu-id="8f8c7-670">*Ukończenie testu mieszanego*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-670">*Completing the Test Mix page*</span></span>
16. <span data-ttu-id="8f8c7-671">Na stronie **mieszanie sieci** kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-671">In the **Network Mix** page, click **Next**.</span></span>

    <span data-ttu-id="8f8c7-672">![Kliknięcie przycisku Dalej na stronie mieszanie sieci](maintainable-azure-websites-managing-change-and-scale/_static/image94.png "Kliknięcie przycisku Dalej na stronie mieszanie sieci")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-672">![Clicking next in the Network Mix page](maintainable-azure-websites-managing-change-and-scale/_static/image94.png "Clicking next in the Network Mix page")</span></span>

    <span data-ttu-id="8f8c7-673">*Kliknięcie przycisku Dalej na stronie mieszanie sieci*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-673">*Clicking next in the Network Mix page*</span></span>
17. <span data-ttu-id="8f8c7-674">Na stronie **mieszanie przeglądarki** wybierz opcję **Internet Explorer 10,0** jako typ przeglądarki, a następnie kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-674">In the **Browser Mix** page, select **Internet Explorer 10.0** as the browser type and click **Next**.</span></span>

    <span data-ttu-id="8f8c7-675">![Wybieranie typu przeglądarki](maintainable-azure-websites-managing-change-and-scale/_static/image95.png "Wybieranie typu przeglądarki")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-675">![Selecting the browser type](maintainable-azure-websites-managing-change-and-scale/_static/image95.png "Selecting the browser type")</span></span>

    <span data-ttu-id="8f8c7-676">*Wybieranie typu przeglądarki*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-676">*Selecting the browser type*</span></span>
18. <span data-ttu-id="8f8c7-677">Na stronie **zbiory liczników** kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-677">In the **Counter Sets** page, click **Next**.</span></span>

    <span data-ttu-id="8f8c7-678">![Kliknięcie przycisku Dalej na stronie zbiory liczników](maintainable-azure-websites-managing-change-and-scale/_static/image96.png "Kliknięcie przycisku Dalej na stronie zbiory liczników")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-678">![Clicking Next in the Counter Sets page](maintainable-azure-websites-managing-change-and-scale/_static/image96.png "Clicking Next in the Counter Sets page")</span></span>

    <span data-ttu-id="8f8c7-679">*Kliknięcie przycisku Dalej na stronie zbiory liczników*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-679">*Clicking Next in the Counter Sets page*</span></span>
19. <span data-ttu-id="8f8c7-680">Na stronie **Ustawienia uruchomieniowe** Ustaw **czas trwania testu obciążenia** na **5 minut** , a następnie kliknij przycisk **Zakończ**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-680">In the **Run Settings** page, set the **Load test duration** to **5 minutes** and click **Finish**.</span></span>

    <span data-ttu-id="8f8c7-681">![Ustawianie czasu trwania testu obciążenia na 5 minut](maintainable-azure-websites-managing-change-and-scale/_static/image97.png "Ustawianie czasu trwania testu obciążenia na 5 minut")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-681">![Setting the load test duration to 5 minutes](maintainable-azure-websites-managing-change-and-scale/_static/image97.png "Setting the load test duration to 5 minutes")</span></span>

    <span data-ttu-id="8f8c7-682">*Ustawianie czasu trwania testu obciążenia na 5 minut*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-682">*Setting the load test duration to 5 minutes*</span></span>
20. <span data-ttu-id="8f8c7-683">W **Eksplorator rozwiązań**kliknij dwukrotnie plik **Local. Settings** , aby poznać ustawienia testu.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-683">In **Solution Explorer**, double-click the **Local.settings** file to explore the test settings.</span></span> <span data-ttu-id="8f8c7-684">Domyślnie program Visual Studio używa komputera lokalnego do uruchamiania testów.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-684">By default, Visual Studio uses your local computer to run the tests.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-685">Alternatywnie można skonfigurować projekt testowy do uruchamiania testów obciążenia w chmurze przy użyciu **Azure test Plans**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-685">Alternatively, you can configure your test project to run the load tests in the cloud using **Azure Test Plans**.</span></span> <span data-ttu-id="8f8c7-686">Azure Test Plans zapewnia usługę testowania obciążenia opartego na chmurze, która symuluje bardziej realistyczne obciążenie, unikając ograniczeń środowiska lokalnego, takich jak pojemność procesora CPU, dostępna pamięć i przepustowość sieci.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-686">Azure Test Plans provides a cloud-based load testing service that simulates a more realistic load, avoiding local environment constraints like CPU capacity, available memory, and network bandwidth.</span></span> <span data-ttu-id="8f8c7-687">Aby uzyskać więcej informacji na temat używania Azure Test Plans do uruchamiania testów obciążenia, zobacz [scenariusze testowania obciążenia](/azure/devops/test/load-test/overview?view=vsts).</span><span class="sxs-lookup"><span data-stu-id="8f8c7-687">For more information about using Azure Test Plans to run load tests, see [Load testing scenarios](/azure/devops/test/load-test/overview?view=vsts).</span></span>

    ![Ustawienia testu](maintainable-azure-websites-managing-change-and-scale/_static/image98.png)

<a id="Ex5Task3"></a>
#### <a name="task-3--autoscale-verification"></a><span data-ttu-id="8f8c7-689">Zadanie 3 — weryfikacja skalowania automatycznego</span><span class="sxs-lookup"><span data-stu-id="8f8c7-689">Task 3 – Autoscale Verification</span></span>

<span data-ttu-id="8f8c7-690">Teraz wykonasz test obciążenia utworzony w poprzednim zadaniu i zobaczysz, jak Twoja aplikacja internetowa zachowuje się pod obciążeniem.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-690">You will now execute the load test you created in the previous task and see how your web app behaves under load.</span></span>

1. <span data-ttu-id="8f8c7-691">W **Eksplorator rozwiązań**kliknij dwukrotnie pozycję **LoadTest1. LoadTest** , aby otworzyć test obciążenia.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-691">In **Solution Explorer**, double-click **LoadTest1.loadtest** to open the load test.</span></span>

    <span data-ttu-id="8f8c7-692">![Otwieranie LoadTest1. LoadTest](maintainable-azure-websites-managing-change-and-scale/_static/image99.png "Otwieranie LoadTest1. LoadTest")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-692">![Opening LoadTest1.loadtest](maintainable-azure-websites-managing-change-and-scale/_static/image99.png "Opening LoadTest1.loadtest")</span></span>

    <span data-ttu-id="8f8c7-693">*Otwieranie LoadTest1. LoadTest*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-693">*Opening LoadTest1.loadtest*</span></span>
2. <span data-ttu-id="8f8c7-694">W oknie **LoadTest1. LoadTest** kliknij pierwszy przycisk w przyborniku, aby uruchomić test obciążenia.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-694">In the **LoadTest1.loadtest** window, click the first button in the toolbox to run the load test.</span></span>

    <span data-ttu-id="8f8c7-695">![Uruchamianie testu obciążenia](maintainable-azure-websites-managing-change-and-scale/_static/image100.png "Uruchamianie testu obciążenia")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-695">![Running the load test](maintainable-azure-websites-managing-change-and-scale/_static/image100.png "Running the load test")</span></span>

    <span data-ttu-id="8f8c7-696">*Uruchamianie testu obciążenia*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-696">*Running the load test*</span></span>
3. <span data-ttu-id="8f8c7-697">Poczekaj na zakończenie testu obciążenia.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-697">Wait until the load test completes.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-698">Test obciążenia symuluje wielu użytkowników, którzy jednocześnie wysyłają żądania do aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-698">The load test simulates multiple users that send requests to the web app simultaneously.</span></span> <span data-ttu-id="8f8c7-699">Gdy test jest uruchomiony, można monitorować dostępne liczniki w celu wykrywania wszelkich błędów, ostrzeżeń lub innych informacji dotyczących przebiegu testu obciążenia.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-699">When the test is running, you can monitor the available counters to detect any errors, warnings or other information related to your load test run.</span></span>

    <span data-ttu-id="8f8c7-700">![Test obciążenia jest uruchomiony](maintainable-azure-websites-managing-change-and-scale/_static/image101.png "Oczekiwanie na zakończenie testu obciążenia")</span><span class="sxs-lookup"><span data-stu-id="8f8c7-700">![Load test running](maintainable-azure-websites-managing-change-and-scale/_static/image101.png "Waiting until the load test completes")</span></span>

    <span data-ttu-id="8f8c7-701">*Test obciążenia jest uruchomiony*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-701">*Load test running*</span></span>
4. <span data-ttu-id="8f8c7-702">Po zakończeniu testu Wróć do portalu zarządzania i przejdź do strony **skalowanie** aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-702">Once the test completes, go back to the management portal and navigate to the **Scale** page of your web app.</span></span> <span data-ttu-id="8f8c7-703">W sekcji **pojemność** powinna zostać wyświetlona na grafie, że nowe wystąpienie zostało automatycznie wdrożone.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-703">Under the **capacity** section, you should see in the graph that a new instance was automatically deployed.</span></span>

    ![Nowe wystąpienie automatycznie wdrożone](maintainable-azure-websites-managing-change-and-scale/_static/image102.png)

    <span data-ttu-id="8f8c7-705">*Nowe wystąpienie automatycznie wdrożone*</span><span class="sxs-lookup"><span data-stu-id="8f8c7-705">*New instance automatically deployed*</span></span>

    > [!NOTE]
    > <span data-ttu-id="8f8c7-706">Aby zmiany pojawiły się na wykresie, może upłynąć kilka minut (okresowo naciśnij **kombinację klawiszy CTRL + F5** , aby odświeżyć stronę).</span><span class="sxs-lookup"><span data-stu-id="8f8c7-706">It may take several minutes for the changes to appear in the graph (press **CTRL + F5** periodically to refresh the page).</span></span> <span data-ttu-id="8f8c7-707">Jeśli nie widzisz żadnych zmian, możesz spróbować wykonać następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="8f8c7-707">If you do not see any changes, you can try the following:</span></span>
    >
    > - <span data-ttu-id="8f8c7-708">Zwiększ czas trwania testu obciążenia (np. do **10 minut**)</span><span class="sxs-lookup"><span data-stu-id="8f8c7-708">Increase the duration of the load test (e.g. to **10 minutes**)</span></span>
    > - <span data-ttu-id="8f8c7-709">Zmniejsz maksymalne i minimalne wartości **docelowego zakresu procesora CPU** w konfiguracji automatycznego skalowania aplikacji sieci Web</span><span class="sxs-lookup"><span data-stu-id="8f8c7-709">Reduce the maximum and minimum values of the **Target CPU** range in the Autoscale configuration of your web app</span></span>
    > - <span data-ttu-id="8f8c7-710">Uruchom test obciążenia w chmurze za pomocą **Azure test Plans**.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-710">Run the load test in the cloud with **Azure Test Plans**.</span></span> <span data-ttu-id="8f8c7-711">Więcej informacji [znajdziesz tutaj](/azure/devops/test/load-test/index?view=vsts)</span><span class="sxs-lookup"><span data-stu-id="8f8c7-711">More information [here](/azure/devops/test/load-test/index?view=vsts)</span></span>

---

<a id="Summary"></a>
## <a name="summary"></a><span data-ttu-id="8f8c7-712">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="8f8c7-712">Summary</span></span>

<span data-ttu-id="8f8c7-713">W tym ćwiczeniu dowiesz się, jak skonfigurować i wdrożyć aplikację do produkcyjnych aplikacji sieci Web na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-713">In this hands-on lab, you learned how to set up and deploy your application to production web apps in Azure.</span></span> <span data-ttu-id="8f8c7-714">Rozpoczęto od wykrywania i aktualizowania baz danych przy użyciu **migracje Code First platformy Entity Framework**, a następnie kontynuowania przez wdrożenie nowych wersji witryny przy użyciu **narzędzia Git** i przeprowadzenie wycofywania do najnowszej stabilnej wersji lokacji.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-714">You started by detecting and updating your databases using **Entity Framework Code First Migrations**, then continued by deploying new versions of your site using **Git** and performing rollbacks to the latest stable version of your site.</span></span> <span data-ttu-id="8f8c7-715">Ponadto wiesz już, jak skalować aplikację przy użyciu usługi Storage, aby przenieść zawartość statyczną do kontenera obiektów BLOB.</span><span class="sxs-lookup"><span data-stu-id="8f8c7-715">Additionally, you learned how to scale your app using Storage to move your static content to a Blob container.</span></span>

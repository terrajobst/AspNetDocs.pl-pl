---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/design-to-survive-failures
title: Projektowanie pod kątem niepowodzeń (Tworzenie rzeczywistych aplikacji w chmurze na platformie Azure) | Microsoft Docs
author: MikeWasson
description: Tworzenie aplikacji w chmurze w świecie rzeczywistym za pomocą książki elektronicznej platformy Azure jest oparte na prezentacji opracowanej przez Scott Guthrie. Wyjaśniono 13 wzorców i praktyk, które mogą...
ms.author: riande
ms.date: 06/12/2014
ms.assetid: 364ce84e-5af8-4e08-afc9-75a512b01f84
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/design-to-survive-failures
msc.type: authoredcontent
ms.openlocfilehash: 9bf9acb8b4f8521d03c053c124c5fc4a07d6cb9a
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/28/2019
ms.locfileid: "74585652"
---
# <a name="design-to-survive-failures-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="e718c-104">Projektowanie pod kątem niepowodzeń (Tworzenie aplikacji w chmurze w rzeczywistych warunkach na platformie Azure)</span><span class="sxs-lookup"><span data-stu-id="e718c-104">Design to Survive Failures (Building Real-World Cloud Apps with Azure)</span></span>

<span data-ttu-id="e718c-105">przez [Jan Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tomasz Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="e718c-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="e718c-106">[Pobierz poprawkę](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) lub [Pobierz książkę elektroniczną](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="e718c-106">[Download Fix It Project](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="e718c-107">**Tworzenie aplikacji w chmurze w świecie rzeczywistym za pomocą książki elektronicznej platformy Azure** jest oparte na prezentacji opracowanej przez Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="e718c-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="e718c-108">Wyjaśniono 13 wzorców i praktyk, które mogą pomóc w pomyślnym tworzeniu aplikacji sieci Web dla chmury.</span><span class="sxs-lookup"><span data-stu-id="e718c-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="e718c-109">Aby uzyskać informacje na temat książki elektronicznej, zobacz [pierwszy rozdział](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="e718c-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>

<span data-ttu-id="e718c-110">Jednym z rzeczy, które należy wziąć pod uwagę podczas tworzenia aplikacji dowolnego typu, ale szczególnie tych, które będą działać w chmurze, w których będą używane przez wiele osób, można zaprojektować aplikację tak, aby mogła ona bezpiecznie obsłużyć awarie i w dalszym ciągu dostarczać wartość najmniejszy.</span><span class="sxs-lookup"><span data-stu-id="e718c-110">One of the things you have to think about when you build any type of application, but especially one that will run in the cloud where lots of people will be using it, is how to design the app so that it can gracefully handle failures and continue to deliver value as much as possible.</span></span> <span data-ttu-id="e718c-111">Mając wystarczająco dużo czasu, elementy są niewłaściwe w środowisku lub dowolnym systemie oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="e718c-111">Given enough time, things are going to go wrong in any environment or any software system.</span></span> <span data-ttu-id="e718c-112">Sposób, w jaki aplikacja obsługuje te sytuacje, decyduje o tym, jak zakłócają klienci i ile czasu trzeba poświęcać na analizowanie i rozwiązywanie problemów.</span><span class="sxs-lookup"><span data-stu-id="e718c-112">How your app handles those situations determines how upset your customers will get and how much time you have to spend analyzing and fixing problems.</span></span>

## <a name="types-of-failures"></a><span data-ttu-id="e718c-113">Typy błędów</span><span class="sxs-lookup"><span data-stu-id="e718c-113">Types of failures</span></span>

<span data-ttu-id="e718c-114">Istnieją dwie podstawowe kategorie niepowodzeń, które mają być obsługiwane inaczej:</span><span class="sxs-lookup"><span data-stu-id="e718c-114">There are two basic categories of failures that you'll want to handle differently:</span></span>

- <span data-ttu-id="e718c-115">Przejściowe błędy samonaprawiania, takie jak sporadyczne problemy z łącznością sieciową.</span><span class="sxs-lookup"><span data-stu-id="e718c-115">Transient, self-healing failures such as intermittent network connectivity issues.</span></span>
- <span data-ttu-id="e718c-116">Trwałe błędy wymagające interwencji.</span><span class="sxs-lookup"><span data-stu-id="e718c-116">Enduring failures that require intervention.</span></span>

<span data-ttu-id="e718c-117">W przypadku błędów przejściowych można zaimplementować zasady ponawiania, aby upewnić się, że przez większość czasu aplikacja będzie szybko i automatycznie odzyskiwana.</span><span class="sxs-lookup"><span data-stu-id="e718c-117">For transient failures, you can implement a retry policy to ensure that most of the time the app recovers quickly and automatically.</span></span> <span data-ttu-id="e718c-118">Klienci mogą zauważyć nieco dłuższy czas odpowiedzi, ale w przeciwnym razie nie będzie to miało wpływu.</span><span class="sxs-lookup"><span data-stu-id="e718c-118">Your customers might notice slightly longer response time, but otherwise they won't be affected.</span></span> <span data-ttu-id="e718c-119">Pokażemy kilka sposobów obsługi tych błędów w [rozdziale obsługi błędów przejściowych](transient-fault-handling.md).</span><span class="sxs-lookup"><span data-stu-id="e718c-119">We'll show some ways to handle these errors in the [Transient Fault Handling chapter](transient-fault-handling.md).</span></span>

<span data-ttu-id="e718c-120">W przypadku trwałych błędów można zaimplementować funkcje monitorowania i rejestrowania, które powiadamiają natychmiast o problemach i ułatwiają analizę głównych przyczyn.</span><span class="sxs-lookup"><span data-stu-id="e718c-120">For enduring failures, you can implement monitoring and logging functionality that notifies you promptly when issues arise and that facilitates root cause analysis.</span></span> <span data-ttu-id="e718c-121">Pokażemy kilka sposobów, aby pomóc Ci w powyższym rodzaju błędach w [rozdziale monitorowanie i telemetrię](monitoring-and-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="e718c-121">We'll show some ways to help you stay on top of these kinds of errors in the [Monitoring and Telemetry chapter](monitoring-and-telemetry.md).</span></span>

## <a name="failure-scope"></a><span data-ttu-id="e718c-122">Zakres niepowodzeń</span><span class="sxs-lookup"><span data-stu-id="e718c-122">Failure scope</span></span>

<span data-ttu-id="e718c-123">Należy również wziąć pod uwagę zakres błędów — niezależnie od tego, czy dotyczy to pojedynczej maszyny, cała usługa, taka jak SQL Database czy magazyn lub cały region.</span><span class="sxs-lookup"><span data-stu-id="e718c-123">You also have to think about failure scope – whether a single machine is affected, a whole service such as SQL Database or Storage, or an entire region.</span></span>

![Zakres niepowodzeń](design-to-survive-failures/_static/image1.png)

### <a name="machine-failures"></a><span data-ttu-id="e718c-125">Awarie maszyn</span><span class="sxs-lookup"><span data-stu-id="e718c-125">Machine failures</span></span>

<span data-ttu-id="e718c-126">Na platformie Azure serwer, który uległ awarii, jest automatycznie zastępowany nowym, a dobrze zaprojektowana aplikacja w chmurze jest automatycznie i szybka.</span><span class="sxs-lookup"><span data-stu-id="e718c-126">In Azure, a failed server is automatically replaced by a new one, and a well-designed cloud app recovers from this kind of failure automatically and quickly.</span></span> <span data-ttu-id="e718c-127">Wcześniej wprowadziliśmy zalety skalowalności warstwy sieci Web bezstanowej i łatwość odzyskiwania z serwera, który uległ awarii, jest kolejną zaletą bezstanową.</span><span class="sxs-lookup"><span data-stu-id="e718c-127">Earlier we stressed the scalability benefits of a stateless web tier, and ease of recovery from a failed server is another benefit of statelessness.</span></span> <span data-ttu-id="e718c-128">Łatwość odzyskiwania to również jedna z zalet funkcji platformy jako usługi (PaaS, Platform-as-a-Service), takich jak SQL Database i Azure App Service Web Apps.</span><span class="sxs-lookup"><span data-stu-id="e718c-128">Ease of recovery is also one of the benefits of platform-as-a-service (PaaS) features such as SQL Database and Azure App Service Web Apps.</span></span> <span data-ttu-id="e718c-129">Awarie sprzętu są rzadkie, ale gdy występują te usługi, obsługują je automatycznie; nie trzeba nawet pisać kodu, aby obsłużyć awarie maszyn w przypadku korzystania z jednej z tych usług.</span><span class="sxs-lookup"><span data-stu-id="e718c-129">Hardware failures are rare, but when they occur these services handle them automatically; you don't even have to write code to handle machine failures when you're using one of these services.</span></span>

### <a name="service-failures"></a><span data-ttu-id="e718c-130">Błędy usługi</span><span class="sxs-lookup"><span data-stu-id="e718c-130">Service failures</span></span>

<span data-ttu-id="e718c-131">Aplikacje w chmurze zwykle korzystają z wielu usług.</span><span class="sxs-lookup"><span data-stu-id="e718c-131">Cloud apps typically use multiple services.</span></span> <span data-ttu-id="e718c-132">Na przykład aplikacja do rozwiązywania problemów używa usługi SQL Database, usługi magazynu i aplikacji internetowej wdrożonej do Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="e718c-132">For example, the Fix It app uses the SQL Database service, the Storage service, and the web app is deployed to Azure App Service.</span></span> <span data-ttu-id="e718c-133">Co aplikacja będzie działać, jeśli jedna z usług, z których korzystasz, zakończy się niepowodzeniem?</span><span class="sxs-lookup"><span data-stu-id="e718c-133">What will your app do if one of the services you depend on fails?</span></span> <span data-ttu-id="e718c-134">W przypadku niektórych błędów usługi niezrozumiały komunikat "Niestety, spróbuj ponownie później" może być najlepszym rozwiązaniem.</span><span class="sxs-lookup"><span data-stu-id="e718c-134">For some service failures a friendly "sorry, try again later" message might be the best you can do.</span></span> <span data-ttu-id="e718c-135">Jednak w wielu scenariuszach można to zrobić lepiej.</span><span class="sxs-lookup"><span data-stu-id="e718c-135">But in many scenarios you can do better.</span></span> <span data-ttu-id="e718c-136">Na przykład jeśli magazyn danych zaplecza nie działa, można zaakceptować dane wejściowe użytkownika, wyświetlić komunikat "żądanie zostało odebrane" i zapisać dane wejściowe zwrócono komunikatu inaczej. gdy potrzebna usługa będzie ponownie działać, możesz pobrać dane wejściowe i przetworzyć je.</span><span class="sxs-lookup"><span data-stu-id="e718c-136">For example, when your back-end data store is down, you can accept user input, display "your request has been received," and store the input someplace else temporarily; then when the service you need is operational again, you can retrieve the input and process it.</span></span>

<span data-ttu-id="e718c-137">Rozdział [wzorca pracy skoncentrowanego na kolejce](queue-centric-work-pattern.md) pokazuje jeden ze sposobów obsługi tego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="e718c-137">The [Queue-centric Work Pattern](queue-centric-work-pattern.md) chapter shows one way to handle this scenario.</span></span> <span data-ttu-id="e718c-138">Aplikacja Fix it przechowuje zadania w SQL Database, ale nie musi ona zamykać pracy, gdy SQL Database nie działa.</span><span class="sxs-lookup"><span data-stu-id="e718c-138">The Fix It app stores tasks in SQL Database, but it doesn't have to quit working when SQL Database is down.</span></span> <span data-ttu-id="e718c-139">W tym rozdziale zobaczymy, jak przechowywać dane wejściowe użytkownika dla zadania w kolejce, a następnie użyć procesu roboczego, aby odczytać kolejkę i zaktualizować zadanie.</span><span class="sxs-lookup"><span data-stu-id="e718c-139">In that chapter we'll see how to store user input for a task in a queue, and use a worker process to read the queue and update the task.</span></span> <span data-ttu-id="e718c-140">Jeśli program SQL nie działa, można utworzyć poprawkę, której nie dotyczy to zadanie. proces roboczy może czekać i przetwarzać nowe zadania, gdy SQL Database jest dostępna.</span><span class="sxs-lookup"><span data-stu-id="e718c-140">If SQL is down, the ability to create Fix It tasks is unaffected; the worker process can wait and process new tasks when SQL Database is available.</span></span>

### <a name="region-failures"></a><span data-ttu-id="e718c-141">Awarie regionów</span><span class="sxs-lookup"><span data-stu-id="e718c-141">Region failures</span></span>

<span data-ttu-id="e718c-142">Całe regiony mogą zakończyć się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="e718c-142">Entire regions may fail.</span></span> <span data-ttu-id="e718c-143">Klęska żywiołowa może zniszczyć centrum danych, ale może zostać spłaszczona przez platforma Meteor, a linia magistrali do centrum dane może zostać zacięta przez rolnika, Burying krowę backhoe itd. Jeśli aplikacja jest hostowana w Stricken centrum danych?</span><span class="sxs-lookup"><span data-stu-id="e718c-143">A natural disaster might destroy a data center, it might get flattened by a meteor, the trunk line into the datacenter could be cut by a farmer burying a cow with a backhoe, etc. If your app is hosted in the stricken datacenter what do you do?</span></span> <span data-ttu-id="e718c-144">Istnieje możliwość skonfigurowania aplikacji na platformie Azure tak, aby działała w wielu regionach jednocześnie, tak aby w przypadku awarii w jednym regionie nadal działała.</span><span class="sxs-lookup"><span data-stu-id="e718c-144">It's possible to set up your app in Azure to run in multiple regions simultaneously so that if there's a disaster in one, you continue running in another region.</span></span> <span data-ttu-id="e718c-145">Takie niepowodzenia są bardzo rzadkimi wystąpieniami, a większość aplikacji nie przeskakuje przez przeszkód niezbędne do zapewnienia nieprzerwanej usługi za pomocą błędów tego sortowania.</span><span class="sxs-lookup"><span data-stu-id="e718c-145">Such failures are extremely rare occurrences, and most apps don't jump through the hoops necessary to ensure uninterrupted service through failures of this sort.</span></span> <span data-ttu-id="e718c-146">Zapoznaj się z sekcją resources na końcu rozdziału, aby uzyskać informacje o tym, jak utrzymać dostęp do aplikacji nawet przez awarię regionu.</span><span class="sxs-lookup"><span data-stu-id="e718c-146">See the Resources section at the end of the chapter for information about how to keep your app available even through a region failure.</span></span>

<span data-ttu-id="e718c-147">Celem systemu Azure jest zapewnienie, że wszystkie te rodzaje błędów są znacznie łatwiejsze, a zobaczysz kilka przykładów tego, jak robimy to w następujących działach.</span><span class="sxs-lookup"><span data-stu-id="e718c-147">A goal of Azure is to make handling all of these kinds of failures a lot easier, and you'll see some examples of how we're doing that in the following chapters.</span></span>

## <a name="slas"></a><span data-ttu-id="e718c-148">Umowy SLA</span><span class="sxs-lookup"><span data-stu-id="e718c-148">SLAs</span></span>

<span data-ttu-id="e718c-149">Ludzie często słuchają umów dotyczących poziomu usług (umowy SLA) w środowisku chmury.</span><span class="sxs-lookup"><span data-stu-id="e718c-149">People often hear about service-level agreements (SLAs) in the cloud environment.</span></span> <span data-ttu-id="e718c-150">Zasadniczo są to niesie obietnice zwiększenia, że firmy sprawiają, że ich usługi są niezawodne.</span><span class="sxs-lookup"><span data-stu-id="e718c-150">Basically these are promises that companies make about how reliable their service is.</span></span> <span data-ttu-id="e718c-151">Umowa SLA na 99,9% oznacza, że usługa powinna działać prawidłowo 99,9% czasu.</span><span class="sxs-lookup"><span data-stu-id="e718c-151">A 99.9% SLA means you should expect the service to be working correctly 99.9% of the time.</span></span> <span data-ttu-id="e718c-152">Jest to dość typowa wartość umowy SLA, która jest taka sama jak w przypadku bardzo dużej liczby, ale może nie zachodzić, ile czasu w dół w procentach rzeczywiście wynosi.</span><span class="sxs-lookup"><span data-stu-id="e718c-152">That's a fairly typical value for an SLA and it sounds like a very high number, but you might not realize how much down time .1% actually amounts to.</span></span> <span data-ttu-id="e718c-153">Poniżej znajduje się tabela, która pokazuje, ile przestojów różnej wartości procentowej umowy SLA ma wartość w ciągu roku, miesiąca i tygodnia.</span><span class="sxs-lookup"><span data-stu-id="e718c-153">Here's a table that shows how much downtime various SLA percentages amount to over a year, a month, and a week.</span></span>

![Tabela umów SLA](design-to-survive-failures/_static/image2.png)

<span data-ttu-id="e718c-155">W związku z tym umowa SLA na 99,9% oznacza, że usługa może być 8,76 wyłączona o godz. w roku lub 43,2 minut w miesiącu.</span><span class="sxs-lookup"><span data-stu-id="e718c-155">So a 99.9% SLA means your service could be down 8.76 hours a year or 43.2 minutes a month.</span></span> <span data-ttu-id="e718c-156">To więcej czasu niż większość użytkowników.</span><span class="sxs-lookup"><span data-stu-id="e718c-156">That's more down time than most people realize.</span></span> <span data-ttu-id="e718c-157">W związku z tym deweloper powinien mieć świadomość, że jest możliwy pewien czas i obsłużyć go w sposób płynny.</span><span class="sxs-lookup"><span data-stu-id="e718c-157">So as a developer you want to be aware that a certain amount of down time is possible and handle it in a graceful way.</span></span> <span data-ttu-id="e718c-158">W pewnym momencie ktoś będzie korzystać z aplikacji, a usługa zostanie wyłączona i chcesz zminimalizować negatywny wpływ tego działania na klienta.</span><span class="sxs-lookup"><span data-stu-id="e718c-158">At some point someone is going to be using your app, and a service is going to be down, and you want to minimize the negative impact of that on the customer.</span></span>

<span data-ttu-id="e718c-159">Jednym z nich należy wiedzieć o umowie SLA, do której odnosi się czas: czy zegar jest resetowany co tydzień, co miesiąc czy w każdym roku?</span><span class="sxs-lookup"><span data-stu-id="e718c-159">One thing you should know about an SLA is what time-frame it refers to: does the clock get reset every week, every month, or every year?</span></span> <span data-ttu-id="e718c-160">Na platformie Azure zresetuję zegar co miesiąc, co jest lepsze od rocznej umowy SLA, ponieważ Roczna umowa SLA może ukryć niewłaściwe miesiące, przenosząc je na serię dobrych miesięcy.</span><span class="sxs-lookup"><span data-stu-id="e718c-160">In Azure we reset the clock every month, which is better for you than a yearly SLA, since a yearly SLA could hide bad months by offsetting them with a series of good months.</span></span>

<span data-ttu-id="e718c-161">Oczywiście zawsze zależy się lepiej niż umowa SLA; zwykle znacznie mniej niż to możliwe.</span><span class="sxs-lookup"><span data-stu-id="e718c-161">Of course we always aspire to do better than the SLA; usually you'll be down much less than that.</span></span> <span data-ttu-id="e718c-162">Obietnica polega na tym, że jeśli kiedykolwiek wyjdziesz dłużej niż maksymalny czas, w którym możesz poprosił o zwrot pieniędzy.</span><span class="sxs-lookup"><span data-stu-id="e718c-162">The promise is that if we're ever down for longer than the maximum down time you can ask for money back.</span></span> <span data-ttu-id="e718c-163">Kwota pieniędzy, którą powrócisz, prawdopodobnie nie może w pełni wynagradzać użytkownika w celu skorzystania z nadmiarowego czasu, ale ten aspekt umowy SLA działa jako zasady wymuszania i informuje o tym, że bardzo poważnie zajmiemy się tym.</span><span class="sxs-lookup"><span data-stu-id="e718c-163">The amount of money you get back probably wouldn't fully compensate you for the business impact of the excess down time, but that aspect of the SLA acts as an enforcement policy and lets you know that we do take it very seriously.</span></span>

### <a name="composite-slas"></a><span data-ttu-id="e718c-164">Umowy SLA złożony</span><span class="sxs-lookup"><span data-stu-id="e718c-164">Composite SLAs</span></span>

<span data-ttu-id="e718c-165">Ważną kwestią, którą należy wziąć pod uwagę podczas korzystania z usługi umowy SLA, jest wpływ używania wielu usług w aplikacji, a każda z nich ma odrębną umowę SLA.</span><span class="sxs-lookup"><span data-stu-id="e718c-165">An important thing to think about when you're looking at SLAs is the impact of using multiple services in an app, with each service having a separate SLA.</span></span> <span data-ttu-id="e718c-166">Na przykład aplikacja do rozwiązywania problemów używa Azure App Service Web Apps, Azure Storage i SQL Database.</span><span class="sxs-lookup"><span data-stu-id="e718c-166">For example, the Fix It app uses Azure App Service Web Apps, Azure Storage, and SQL Database.</span></span> <span data-ttu-id="e718c-167">Poniżej przedstawiono numery umów SLA w dniu, w którym książka elektroniczna jest zapisywana w grudniu, 2013:</span><span class="sxs-lookup"><span data-stu-id="e718c-167">Here are their SLA numbers as of the date this e-book is being written in December, 2013:</span></span>

![Witryna sieci Web SLA, magazyn SQL Database](design-to-survive-failures/_static/image3.png)

<span data-ttu-id="e718c-169">Jaki jest maksymalny czas oczekiwania dla aplikacji na podstawie tej usługi umowy SLA?</span><span class="sxs-lookup"><span data-stu-id="e718c-169">What is the maximum down time you would expect for the app based on these service SLAs?</span></span> <span data-ttu-id="e718c-170">Może się zdarzyć, że w tym przypadku czas w dół będzie równy wartości procentowej najgorszej umowy SLA lub 99,9%.</span><span class="sxs-lookup"><span data-stu-id="e718c-170">You might think that your down time would be equal to the worst SLA percentage, or 99.9% in this case.</span></span> <span data-ttu-id="e718c-171">Może to być prawdziwe, jeśli wszystkie trzy usługi zawsze się nie powiodły, ale nie jest to konieczne w rzeczywistości.</span><span class="sxs-lookup"><span data-stu-id="e718c-171">That would be true if all three services always failed at the same time, but that isn't necessarily what actually happens.</span></span> <span data-ttu-id="e718c-172">Każda usługa może się nie powieść niezależnie w różnym czasie, więc należy obliczyć umowną umowę SLA, mnożąc poszczególne numery umowy SLA.</span><span class="sxs-lookup"><span data-stu-id="e718c-172">Each service may fail independently at different times, so you have to calculate the composite SLA by multiplying the individual SLA numbers.</span></span>

![Złożona umowa SLA](design-to-survive-failures/_static/image4.png)

<span data-ttu-id="e718c-174">W związku z tym Twoja aplikacja może być wyłączona nie tylko przez 43,2 minut w miesiącu, ale 3 razy więcej, 108 minut w miesiącu i nadal mieści się w granicach umowy SLA platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="e718c-174">So your app could be down not just 43.2 minutes a month but 3 times that amount, 108 minutes a month – and still be within the Azure SLA limits.</span></span>

<span data-ttu-id="e718c-175">Ten problem nie jest unikatowy dla platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="e718c-175">This issue is not unique to Azure.</span></span> <span data-ttu-id="e718c-176">Firma Microsoft udostępnia obecnie najlepszą umowy slaą usługę w chmurze, a także podobne problemy, które należy wykonać w przypadku korzystania z usług w chmurze dowolnego dostawcy.</span><span class="sxs-lookup"><span data-stu-id="e718c-176">We actually provide the best cloud SLAs of any cloud service available, and you'll have similar issues to deal with if you use any vendor's cloud services.</span></span> <span data-ttu-id="e718c-177">To najważniejsze informacje dotyczą sposobu, w jaki można zaprojektować aplikację, aby bezpiecznie rozwiązywać błędy usługi, ponieważ mogą one być często wystarczająco duże, aby mieć wpływ na klientów lub użytkowników.</span><span class="sxs-lookup"><span data-stu-id="e718c-177">What this highlights is the importance of thinking about how you can design your app to handle the inevitable service failures gracefully, because they might happen often enough to impact your customers or users.</span></span>

### <a name="cloud-slas-compared-to-enterprise-down-time-experience"></a><span data-ttu-id="e718c-178">Cloud umowy SLA w porównaniu do korporacyjnego środowiska w czasie</span><span class="sxs-lookup"><span data-stu-id="e718c-178">Cloud SLAs compared to enterprise down-time experience</span></span>

<span data-ttu-id="e718c-179">Osoby czasami mówią, "w mojej aplikacji korporacyjnej nigdy nie mam tych problemów".</span><span class="sxs-lookup"><span data-stu-id="e718c-179">People sometimes say, "In my enterprise app I never have these problems."</span></span> <span data-ttu-id="e718c-180">Jeśli podasz informacje o tym, jak dużo czasu w miesiącu, w którym faktycznie się znajdują, zazwyczaj mówią, że jest to również sporadycznie wykonywane.</span><span class="sxs-lookup"><span data-stu-id="e718c-180">If you ask how much down time a month they actually have, they usually say, "Well, it happens occasionally."</span></span> <span data-ttu-id="e718c-181">W przypadku poproszenia o to, jak często zauważamy, że "Czasami trzeba utworzyć kopię zapasową lub zainstalować nowy serwer lub aktualizować oprogramowanie".</span><span class="sxs-lookup"><span data-stu-id="e718c-181">And if you ask how often, they admit that "Sometimes we do need to back up or install a new server or update software."</span></span> <span data-ttu-id="e718c-182">Oczywiście, które liczą się w miarę upływu czasu.</span><span class="sxs-lookup"><span data-stu-id="e718c-182">Of course, that counts as down time.</span></span> <span data-ttu-id="e718c-183">Większość aplikacji przedsiębiorstwa, o ile nie są szczególnie krytyczne, są w rzeczywistości wyłączone przez ponad ilość czasu dozwoloną przez naszą usługę umowy SLA.</span><span class="sxs-lookup"><span data-stu-id="e718c-183">Most enterprise apps unless they are especially mission-critical are actually down for more than the amount of time allowed by our service SLAs.</span></span> <span data-ttu-id="e718c-184">Ale jeśli jest to Twój serwer i Twoja infrastruktura, a ty ponosisz odpowiedzialność za nią i kontrolujesz ją, zamierzasz mniej Angst o czas nieokreślony.</span><span class="sxs-lookup"><span data-stu-id="e718c-184">But when it's your server and your infrastructure and you're responsible for it and in control of it, you tend to feel less angst about down times.</span></span> <span data-ttu-id="e718c-185">W środowisku chmury jest zależne od kogoś innego i nie wiesz, co się dzieje, więc możesz uzyskać więcej martwisz się na jego temat.</span><span class="sxs-lookup"><span data-stu-id="e718c-185">In a cloud environment you're dependent on someone else and you don't know what's going on, so you might tend to get more worried about it.</span></span>

<span data-ttu-id="e718c-186">Gdy firma osiągnie większy procent czasu, niż wynika z umowy SLA w chmurze, realizuje ją, oferując dużo więcej pieniędzy na sprzęt.</span><span class="sxs-lookup"><span data-stu-id="e718c-186">When an enterprise achieves a greater up-time percentage than you get from a cloud SLA, they do it by spending a lot more money on hardware.</span></span> <span data-ttu-id="e718c-187">Usługa w chmurze mogła to zrobić, ale będzie musiała naliczać wiele innych usług.</span><span class="sxs-lookup"><span data-stu-id="e718c-187">A cloud service could do that but would have to charge much more for its services.</span></span> <span data-ttu-id="e718c-188">Zamiast tego można korzystać z ekonomicznej usługi i projektować swoje oprogramowanie, aby nieuniknione błędy powodowały minimalne zakłócenia dla klientów.</span><span class="sxs-lookup"><span data-stu-id="e718c-188">Instead, you take advantage of a cost-effective service and design your software so that the inevitable failures cause minimum disruption to your customers.</span></span> <span data-ttu-id="e718c-189">Twoje zadanie jako projektant aplikacji w chmurze nie jest tak duże, aby uniknąć awarii, ponieważ nie jest to konieczne, aby uniknąć katastrofami, i można to zrobić, koncentrując się na oprogramowaniu, a nie na sprzęcie.</span><span class="sxs-lookup"><span data-stu-id="e718c-189">Your job as a cloud app designer is not so much to avoid failure as to avoid catastrophe, and you do that by focusing on software, not on hardware.</span></span> <span data-ttu-id="e718c-190">Aplikacje dla przedsiębiorstw dążą do zmaksymalizowania średniego czasu między awariami, dzięki czemu aplikacje w chmurze dążą do zminimalizowania średniego czasu na odzyskanie.</span><span class="sxs-lookup"><span data-stu-id="e718c-190">Whereas enterprise apps strive to maximize mean time between failures, cloud apps strive to minimize mean time to recover.</span></span>

### <a name="not-all-cloud-services-have-slas"></a><span data-ttu-id="e718c-191">Nie wszystkie usługi w chmurze mają umowy SLA</span><span class="sxs-lookup"><span data-stu-id="e718c-191">Not all cloud services have SLAs</span></span>

<span data-ttu-id="e718c-192">Należy pamiętać, że nie każda usługa w chmurze ma nawet umowę SLA.</span><span class="sxs-lookup"><span data-stu-id="e718c-192">Be aware also that not every cloud service even has an SLA.</span></span> <span data-ttu-id="e718c-193">Jeśli aplikacja jest zależna od usługi, która nie ma gwarancji w czasie, może być dłuższa niż największa.</span><span class="sxs-lookup"><span data-stu-id="e718c-193">If your app is dependent on a service with no up-time guarantee, you could be down far longer than you might imagine.</span></span> <span data-ttu-id="e718c-194">Jeśli na przykład zalogujesz się do swojej witryny przy użyciu dostawcy społecznościowego, takiego jak Facebook lub Twitter, skontaktuj się z dostawcą usług, aby dowiedzieć się, czy istnieje umowa SLA i czy nie jest to możliwe.</span><span class="sxs-lookup"><span data-stu-id="e718c-194">For example, if you enable log-in to your site using a social provider such as Facebook or Twitter, check with the service provider to find out if there is an SLA, and you might find out there isn't one.</span></span> <span data-ttu-id="e718c-195">Jeśli jednak usługa uwierzytelniania ulegnie awarii lub nie jest w stanie obsłużyć ilości zgłaszanych żądań, klienci są Zablokowani z Twojej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e718c-195">But if the authentication service goes down or is unable to support the volume of requests you throw at it, your customers are locked out of your app.</span></span> <span data-ttu-id="e718c-196">Możesz być wyłączony przez dni lub dłużej.</span><span class="sxs-lookup"><span data-stu-id="e718c-196">You could be down for days or longer.</span></span> <span data-ttu-id="e718c-197">Twórcy jednej nowej aplikacji oczekują setki milionów plików do pobrania i brali zależność od uwierzytelniania w serwisie Facebook, ale nie uczestniczyły w serwisie Facebook przed kontynuowaniem i wykryciem zbyt późno, że nie istniała umowa SLA dla tej usługi.</span><span class="sxs-lookup"><span data-stu-id="e718c-197">The creators of one new app expected hundreds of millions of downloads and took a dependency on Facebook authentication – but didn't talk to Facebook before going live and discovered too late that there was no SLA for that service.</span></span>

### <a name="not-all-downtime-counts-toward-slas"></a><span data-ttu-id="e718c-198">Brak wszystkich przestojów w kierunku umowy SLA</span><span class="sxs-lookup"><span data-stu-id="e718c-198">Not all downtime counts toward SLAs</span></span>

<span data-ttu-id="e718c-199">Niektóre usługi w chmurze mogą świadomie odmówić usługi, jeśli aplikacja przestanie korzystać z niej.</span><span class="sxs-lookup"><span data-stu-id="e718c-199">Some cloud services may deliberately deny service if your app over-uses them.</span></span> <span data-ttu-id="e718c-200">Jest to tzw. *ograniczanie*.</span><span class="sxs-lookup"><span data-stu-id="e718c-200">This is called *throttling*.</span></span> <span data-ttu-id="e718c-201">Jeśli usługa jest objęta umową SLA, powinna określać warunki, w których można ograniczyć ograniczenia, a projekt aplikacji powinien uniknąć tych warunków i odpowiednio reagować na ograniczanie przepustowości.</span><span class="sxs-lookup"><span data-stu-id="e718c-201">If a service has an SLA, it should state the conditions under which you might be throttled, and your app design should avoid those conditions and react appropriately to the throttling if it happens.</span></span> <span data-ttu-id="e718c-202">Na przykład jeśli żądania do usługi kończą się niepowodzeniem, gdy przekroczy określoną liczbę na sekundę, chcesz upewnić się, że automatyczne ponowne próby nie nastąpiły tak szybko, że powodują, że ograniczanie przepływności będzie kontynuowane.</span><span class="sxs-lookup"><span data-stu-id="e718c-202">For example, if requests to a service start to fail when you exceed a certain number per second, you want to make sure automatic retries don't happen so fast that they cause the throttling to continue.</span></span> <span data-ttu-id="e718c-203">Więcej informacji o ograniczaniu przepływności można znaleźć w [rozdziale obsługa błędów przejściowych](transient-fault-handling.md).</span><span class="sxs-lookup"><span data-stu-id="e718c-203">We'll have more to say about throttling in the [Transient Fault Handling chapter](transient-fault-handling.md).</span></span>

## <a name="summary"></a><span data-ttu-id="e718c-204">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="e718c-204">Summary</span></span>

<span data-ttu-id="e718c-205">W tym rozdziale podjęto próbę zapoznania się z tym, dlaczego prawdziwa aplikacja w chmurze musi być zaprojektowana w celu bezpiecznego przeżycia błędów.</span><span class="sxs-lookup"><span data-stu-id="e718c-205">This chapter has tried to help you realize why a real world cloud app has to be designed to survive failures gracefully.</span></span> <span data-ttu-id="e718c-206">Począwszy od [następnego rozdziału](monitoring-and-telemetry.md), pozostałe wzorce w tej serii zawierają więcej szczegółów na temat niektórych strategii, których można użyć do wykonania tej czynności:</span><span class="sxs-lookup"><span data-stu-id="e718c-206">Starting with the [next chapter](monitoring-and-telemetry.md), the remaining patterns in this series go into more detail about some strategies you can use to do that:</span></span>

- <span data-ttu-id="e718c-207">Mają dobre [monitorowanie i telemetrię](monitoring-and-telemetry.md), dzięki czemu możesz szybko sprawdzić niepowodzenia, które wymagają interwencji, i masz wystarczające informacje, aby je rozwiązać.</span><span class="sxs-lookup"><span data-stu-id="e718c-207">Have good [monitoring and telemetry](monitoring-and-telemetry.md), so that you find out quickly about failures that require intervention, and you have sufficient information to resolve them.</span></span>
- <span data-ttu-id="e718c-208">[Obsługa błędów przejściowych](transient-fault-handling.md) przez implementację logiki inteligentnego ponawiania, dzięki czemu aplikacja automatycznie odzyska dostęp do logiki [wyłącznika](transient-fault-handling.md#circuitbreakers) , gdy nie jest to możliwe.</span><span class="sxs-lookup"><span data-stu-id="e718c-208">[Handle transient faults](transient-fault-handling.md) by implementing intelligent retry logic, so that your app recovers automatically when it can and falls back to [circuit breaker](transient-fault-handling.md#circuitbreakers) logic when it can't.</span></span>
- <span data-ttu-id="e718c-209">Użyj [rozproszonego buforowania](distributed-caching.md) , aby zminimalizować problemy dotyczące przepływności, opóźnienia i połączenia z dostępem do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="e718c-209">Use [distributed caching](distributed-caching.md) in order to minimize throughput, latency, and connection problems with database access.</span></span>
- <span data-ttu-id="e718c-210">Zaimplementuj luźny sprzężenie za pośrednictwem [wzorca pracy skoncentrowanego na kolejkach](queue-centric-work-pattern.md), dzięki czemu fronton aplikacji może kontynuować pracę, gdy zaplecze nie działa.</span><span class="sxs-lookup"><span data-stu-id="e718c-210">Implement loose coupling via the [queue-centric work pattern](queue-centric-work-pattern.md), so that your app front end can continue to work when the back end is down.</span></span>

## <a name="resources"></a><span data-ttu-id="e718c-211">Resources</span><span class="sxs-lookup"><span data-stu-id="e718c-211">Resources</span></span>

<span data-ttu-id="e718c-212">Aby uzyskać więcej informacji, zobacz dalsze rozdziały w tej książce elektronicznej oraz następujące zasoby.</span><span class="sxs-lookup"><span data-stu-id="e718c-212">For more information, see later chapters in this e-book and the following resources.</span></span>

<span data-ttu-id="e718c-213">Łączoną</span><span class="sxs-lookup"><span data-stu-id="e718c-213">Documentation:</span></span>

- <span data-ttu-id="e718c-214">[Failsafe: wskazówki dotyczące odpornych architektur chmurowych](https://msdn.microsoft.com/library/windowsazure/jj853352.aspx).</span><span class="sxs-lookup"><span data-stu-id="e718c-214">[Failsafe: Guidance for Resilient Cloud Architectures](https://msdn.microsoft.com/library/windowsazure/jj853352.aspx).</span></span> <span data-ttu-id="e718c-215">Oficjalny dokument według wytłoczyn Mercuri, Ulrich Homann i Andrew TOWNHILL.</span><span class="sxs-lookup"><span data-stu-id="e718c-215">White paper by Marc Mercuri, Ulrich Homann, and Andrew Townhill.</span></span> <span data-ttu-id="e718c-216">Wersja strony sieci Web serii wideo FailSafe.</span><span class="sxs-lookup"><span data-stu-id="e718c-216">Web page version of the FailSafe video series.</span></span>
- <span data-ttu-id="e718c-217">[Najlepsze rozwiązania dotyczące projektowania usług na dużą skalę w usłudze Azure Cloud Services](https://msdn.microsoft.com/library/windowsazure/jj717232.aspx).</span><span class="sxs-lookup"><span data-stu-id="e718c-217">[Best Practices for the Design of Large-Scale Services on Azure Cloud Services](https://msdn.microsoft.com/library/windowsazure/jj717232.aspx).</span></span> <span data-ttu-id="e718c-218">Oficjalny dokument ze znakami SIMM i Michael Thomassy.</span><span class="sxs-lookup"><span data-stu-id="e718c-218">White paper by Mark Simms and Michael Thomassy.</span></span>
- <span data-ttu-id="e718c-219">[Wskazówki techniczne dotyczące ciągłości działania platformy Azure](https://msdn.microsoft.com/library/windowsazure/hh873027.aspx).</span><span class="sxs-lookup"><span data-stu-id="e718c-219">[Azure Business Continuity Technical Guidance](https://msdn.microsoft.com/library/windowsazure/hh873027.aspx).</span></span> <span data-ttu-id="e718c-220">Oficjalny dokument o Wickline i Jason Roth.</span><span class="sxs-lookup"><span data-stu-id="e718c-220">White paper by Patrick Wickline and Jason Roth.</span></span>
- <span data-ttu-id="e718c-221">[Odzyskiwanie po awarii i wysoka dostępność dla aplikacji platformy Azure](https://msdn.microsoft.com/library/windowsazure/dn251004.aspx).</span><span class="sxs-lookup"><span data-stu-id="e718c-221">[Disaster Recovery and High Availability for Azure Applications](https://msdn.microsoft.com/library/windowsazure/dn251004.aspx).</span></span> <span data-ttu-id="e718c-222">Oficjalny dokument przez Michael McKeown, hanu Kommalapati i Jason Roth.</span><span class="sxs-lookup"><span data-stu-id="e718c-222">White paper by Michael McKeown, Hanu Kommalapati, and Jason Roth.</span></span>
- <span data-ttu-id="e718c-223">[Wzorce i praktyki firmy Microsoft — wskazówki dotyczące platformy Azure](https://msdn.microsoft.com/library/dn568099.aspx).</span><span class="sxs-lookup"><span data-stu-id="e718c-223">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="e718c-224">Zobacz wskazówki dotyczące wdrażania w ramach programu wiele centrów danych, wzorzec wyłącznika.</span><span class="sxs-lookup"><span data-stu-id="e718c-224">See Multi Data Center Deployment guidance, Circuit breaker pattern.</span></span>
- <span data-ttu-id="e718c-225">[Pomoc techniczna platformy Azure — umowy dotyczące poziomu usług](https://azure.microsoft.com/support/legal/sla/).</span><span class="sxs-lookup"><span data-stu-id="e718c-225">[Azure Support - Service Level Agreements](https://azure.microsoft.com/support/legal/sla/).</span></span>
- <span data-ttu-id="e718c-226">[Ciągłość działania w Azure SQL Database](https://msdn.microsoft.com/library/windowsazure/hh852669.aspx).</span><span class="sxs-lookup"><span data-stu-id="e718c-226">[Business Continuity in Azure SQL Database](https://msdn.microsoft.com/library/windowsazure/hh852669.aspx).</span></span> <span data-ttu-id="e718c-227">Dokumentacja dotycząca SQL Database funkcji wysokiej dostępności i odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="e718c-227">Documentation about SQL Database high availability and disaster recovery features.</span></span>
- <span data-ttu-id="e718c-228">[Wysoka dostępność i odzyskiwanie po awarii dla SQL Server na platformie Azure Virtual Machines](https://msdn.microsoft.com/library/windowsazure/jj870962.aspx).</span><span class="sxs-lookup"><span data-stu-id="e718c-228">[High Availability and Disaster Recovery for SQL Server in Azure Virtual Machines](https://msdn.microsoft.com/library/windowsazure/jj870962.aspx).</span></span>

<span data-ttu-id="e718c-229">Filmy wideo:</span><span class="sxs-lookup"><span data-stu-id="e718c-229">Videos:</span></span>

- <span data-ttu-id="e718c-230">[Failsafe: kompilowanie skalowalnych, Odpornych Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="e718c-230">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="e718c-231">Seria dziewięciu części przez Ulrich Homann, Marc Mercuri i marking SIMM.</span><span class="sxs-lookup"><span data-stu-id="e718c-231">Nine-part series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="e718c-232">Prezentuje koncepcje wysokiego poziomu i zasady architektury w bardzo dostępnym i interesującym scenariuszu, w tym scenariusze opracowane przez firmę Microsoft Customer Advisory Team (CAT) z rzeczywistymi klientami.</span><span class="sxs-lookup"><span data-stu-id="e718c-232">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="e718c-233">Odcinki 1 i 8 umożliwiają projektowanie aplikacji w chmurze w celu przechodzenia do niepowodzeń.</span><span class="sxs-lookup"><span data-stu-id="e718c-233">Episodes 1 and 8 go in depth into the reasons for designing cloud apps to survive failures.</span></span> <span data-ttu-id="e718c-234">Zobacz również dyskusję na temat ograniczania przepustowości w epizod 2, zaczynając od 49:57, Omówienie punktów awarii i trybów niepowodzeń w epizod 2, rozpoczynając od 56:05, i Omówienie wyłączników w epizod 3, zaczynając od 40:55.</span><span class="sxs-lookup"><span data-stu-id="e718c-234">See also the follow-up discussion of throttling in episode 2 starting at 49:57, the discussion of failure points and failure modes in episode 2 starting at 56:05, and the discussion of circuit breakers in episode 3 starting at 40:55.</span></span>
- <span data-ttu-id="e718c-235">[Tworzenie dużych: lekcje uzyskane od klientów platformy Azure — część II](https://channel9.msdn.com/Events/Build/2012/3-030).</span><span class="sxs-lookup"><span data-stu-id="e718c-235">[Building Big: Lessons learned from Azure customers - Part II](https://channel9.msdn.com/Events/Build/2012/3-030).</span></span> <span data-ttu-id="e718c-236">Oznacz moduły SIMM rozmowy dotyczące projektowania pod kątem awarii i Instrumentacji wszystkich elementów.</span><span class="sxs-lookup"><span data-stu-id="e718c-236">Mark Simms talks about designing for failure and instrumenting everything.</span></span> <span data-ttu-id="e718c-237">Podobnie jak w przypadku serii failsafe, ale więcej szczegółów.</span><span class="sxs-lookup"><span data-stu-id="e718c-237">Similar to the Failsafe series but goes into more how-to details.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="e718c-238">[Poprzednie](unstructured-blob-storage.md)
> [dalej](monitoring-and-telemetry.md)</span><span class="sxs-lookup"><span data-stu-id="e718c-238">[Previous](unstructured-blob-storage.md)
[Next](monitoring-and-telemetry.md)</span></span>

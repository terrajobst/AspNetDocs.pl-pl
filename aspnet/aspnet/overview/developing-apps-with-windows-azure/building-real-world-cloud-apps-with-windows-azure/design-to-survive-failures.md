---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/design-to-survive-failures
title: Projektowanie pod kątem przetrwania awarii (tworzenie rzeczywistych aplikacji w chmurze dzięki platformie Azure) | Dokumentacja firmy Microsoft
author: MikeWasson
description: Tworzenie rzeczywistych aplikacji w chmurze za pomocą platformy Azure Książka elektroniczna jest oparta na prezentacji, opracowane przez Scotta Guthrie. Wyjaśniono 13 wzorców i praktyk, które może on...
ms.author: riande
ms.date: 06/12/2014
ms.assetid: 364ce84e-5af8-4e08-afc9-75a512b01f84
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/design-to-survive-failures
msc.type: authoredcontent
ms.openlocfilehash: fbe618acfc70711933996f97657a4326d389b3dd
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/09/2019
ms.locfileid: "59411244"
---
# <a name="design-to-survive-failures-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="e8e24-104">Projektowanie po awarii (tworzenie rzeczywistych aplikacji w chmurze dzięki platformie Azure)</span><span class="sxs-lookup"><span data-stu-id="e8e24-104">Design to Survive Failures (Building Real-World Cloud Apps with Azure)</span></span>

<span data-ttu-id="e8e24-105">przez [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="e8e24-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="e8e24-106">[Pobierz go naprawić projektu](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) lub [Pobierz książkę elektroniczną](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="e8e24-106">[Download Fix It Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="e8e24-107">**Tworzenie rzeczywistych aplikacji w chmurze dzięki platformie Azure** Książka elektroniczna jest oparta na prezentacji opracowany przez Scotta Guthrie.</span><span class="sxs-lookup"><span data-stu-id="e8e24-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="e8e24-108">Wyjaśniono 13 wzorców i praktyk, które mogą pomóc Ci odnieść sukces, tworzenie aplikacji sieci web w chmurze.</span><span class="sxs-lookup"><span data-stu-id="e8e24-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="e8e24-109">Aby uzyskać informacji o książce elektronicznej, zobacz [pierwszy rozdział](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="e8e24-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>


<span data-ttu-id="e8e24-110">Jedną z rzeczy, o których należy przemyśleć podczas kompilowania dowolny typ aplikacji, ale szczególnie taki, który zostanie uruchomiony w chmurze, gdy wiele osób będą używać, jest sposób projektowania aplikacji, dzięki czemu mogą bezpiecznie obsługiwać awarie i w dalszym ciągu dostarczać wartość jak możliwe.</span><span class="sxs-lookup"><span data-stu-id="e8e24-110">One of the things you have to think about when you build any type of application, but especially one that will run in the cloud where lots of people will be using it, is how to design the app so that it can gracefully handle failures and continue to deliver value as much as possible.</span></span> <span data-ttu-id="e8e24-111">Mając wystarczająco dużo czasu, przebieg procesu się nie udaje się w dowolnym środowisku lub w każdym systemie oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="e8e24-111">Given enough time, things are going to go wrong in any environment or any software system.</span></span> <span data-ttu-id="e8e24-112">Jak aplikację pod kątem obsługi tych sytuacji Określa, jak zły usługi klienci otrzymają oraz ile czasu trzeba poświęcić na analizowanie i rozwiązywanie problemów.</span><span class="sxs-lookup"><span data-stu-id="e8e24-112">How your app handles those situations determines how upset your customers will get and how much time you have to spend analyzing and fixing problems.</span></span>

## <a name="types-of-failures"></a><span data-ttu-id="e8e24-113">Typy błędów</span><span class="sxs-lookup"><span data-stu-id="e8e24-113">Types of failures</span></span>

<span data-ttu-id="e8e24-114">Istnieją dwie kategorie podstawowe błędy, które można obsłużyć inaczej:</span><span class="sxs-lookup"><span data-stu-id="e8e24-114">There are two basic categories of failures that you'll want to handle differently:</span></span>

- <span data-ttu-id="e8e24-115">Przejściowy naprawiać błędów, takich jak problemy z połączeniem sieciowym sporadycznie.</span><span class="sxs-lookup"><span data-stu-id="e8e24-115">Transient, self-healing failures such as intermittent network connectivity issues.</span></span>
- <span data-ttu-id="e8e24-116">Trwałej błędów, które wymagają interwencji.</span><span class="sxs-lookup"><span data-stu-id="e8e24-116">Enduring failures that require intervention.</span></span>

<span data-ttu-id="e8e24-117">W przypadku błędów przejściowych można zaimplementować zasady ponawiania, aby upewnić się, że większość czas odzyskiwania aplikacji, szybko i automatycznie.</span><span class="sxs-lookup"><span data-stu-id="e8e24-117">For transient failures, you can implement a retry policy to ensure that most of the time the app recovers quickly and automatically.</span></span> <span data-ttu-id="e8e24-118">Twoi klienci mogą zauważą nieznacznie dłuższy czas odpowiedzi, ale w przeciwnym razie nie ulegnie zmianie.</span><span class="sxs-lookup"><span data-stu-id="e8e24-118">Your customers might notice slightly longer response time, but otherwise they won't be affected.</span></span> <span data-ttu-id="e8e24-119">Pokażemy niektóre sposoby obsługi tych błędów w [obsługi błędów przejściowych rozdział](transient-fault-handling.md).</span><span class="sxs-lookup"><span data-stu-id="e8e24-119">We'll show some ways to handle these errors in the [Transient Fault Handling chapter](transient-fault-handling.md).</span></span>

<span data-ttu-id="e8e24-120">Dla trwałe błędy, można zaimplementować monitorowanie i rejestrowanie funkcji, które powiadamia niezwłocznie problemów i które ułatwia analizą głównych przyczyn problemów.</span><span class="sxs-lookup"><span data-stu-id="e8e24-120">For enduring failures, you can implement monitoring and logging functionality that notifies you promptly when issues arise and that facilitates root cause analysis.</span></span> <span data-ttu-id="e8e24-121">Pokażemy niektóre sposoby na bieżąco te rodzaje błędów w [rozdział monitorowanie i dane telemetryczne](monitoring-and-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="e8e24-121">We'll show some ways to help you stay on top of these kinds of errors in the [Monitoring and Telemetry chapter](monitoring-and-telemetry.md).</span></span>

## <a name="failure-scope"></a><span data-ttu-id="e8e24-122">Zakres awarii</span><span class="sxs-lookup"><span data-stu-id="e8e24-122">Failure scope</span></span>

<span data-ttu-id="e8e24-123">Masz również wziąć pod uwagę zakres awarii — czy dotyczy jednej maszynie, całą usługę, takich jak bazy danych SQL lub magazynu lub cały region.</span><span class="sxs-lookup"><span data-stu-id="e8e24-123">You also have to think about failure scope – whether a single machine is affected, a whole service such as SQL Database or Storage, or an entire region.</span></span>

![Zakres awarii](design-to-survive-failures/_static/image1.png)

### <a name="machine-failures"></a><span data-ttu-id="e8e24-125">Błędy maszyny</span><span class="sxs-lookup"><span data-stu-id="e8e24-125">Machine failures</span></span>

<span data-ttu-id="e8e24-126">Na platformie Azure serwer nie powiodło się, jest automatycznie zastępowany przez nowy i aplikacji w chmurze dobrze zaprojektowanego sprawności tego rodzaju błąd, szybko i automatycznie.</span><span class="sxs-lookup"><span data-stu-id="e8e24-126">In Azure, a failed server is automatically replaced by a new one, and a well-designed cloud app recovers from this kind of failure automatically and quickly.</span></span> <span data-ttu-id="e8e24-127">Wcześniej podkreślić, firma Microsoft skalowalność zalet warstwy sieci web o bezstanowa i łatwość odzyskiwania z serwera nie powiodło się jest kolejną korzyścią wynikającą z statelessness.</span><span class="sxs-lookup"><span data-stu-id="e8e24-127">Earlier we stressed the scalability benefits of a stateless web tier, and ease of recovery from a failed server is another benefit of statelessness.</span></span> <span data-ttu-id="e8e24-128">Łatwość odzyskiwania jest również jedną z zalet platformy jako usługi (PaaS) funkcji, takich jak bazy danych SQL Database i Azure App Service Web Apps.</span><span class="sxs-lookup"><span data-stu-id="e8e24-128">Ease of recovery is also one of the benefits of platform-as-a-service (PaaS) features such as SQL Database and Azure App Service Web Apps.</span></span> <span data-ttu-id="e8e24-129">Awarie sprzętowe są rzadkie, ale kiedy występują one, czy usługi te określają je automatycznie; nie trzeba nawet pisać kod obsługujący maszyny błędy podczas korzystania z jednej z tych usług.</span><span class="sxs-lookup"><span data-stu-id="e8e24-129">Hardware failures are rare, but when they occur these services handle them automatically; you don't even have to write code to handle machine failures when you're using one of these services.</span></span>

### <a name="service-failures"></a><span data-ttu-id="e8e24-130">Błędy usługi</span><span class="sxs-lookup"><span data-stu-id="e8e24-130">Service failures</span></span>

<span data-ttu-id="e8e24-131">Aplikacje w chmurze zazwyczaj używają wielu usług.</span><span class="sxs-lookup"><span data-stu-id="e8e24-131">Cloud apps typically use multiple services.</span></span> <span data-ttu-id="e8e24-132">Na przykład aplikacja naprawić korzysta z usługi SQL Database, usługi Storage i aplikacji sieci web jest wdrażana w usłudze Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="e8e24-132">For example, the Fix It app uses the SQL Database service, the Storage service, and the web app is deployed to Azure App Service.</span></span> <span data-ttu-id="e8e24-133">Co będzie aplikacji zrobić, jeśli jedna z usług, których zależysz zakończy się niepowodzeniem?</span><span class="sxs-lookup"><span data-stu-id="e8e24-133">What will your app do if one of the services you depend on fails?</span></span> <span data-ttu-id="e8e24-134">Dla niektórych błędów usługi przyjazną "Niestety, spróbuj ponownie później" komunikat może być najlepsze, możesz zrobić.</span><span class="sxs-lookup"><span data-stu-id="e8e24-134">For some service failures a friendly "sorry, try again later" message might be the best you can do.</span></span> <span data-ttu-id="e8e24-135">Ale w wielu scenariuszach możesz to zrobić lepiej.</span><span class="sxs-lookup"><span data-stu-id="e8e24-135">But in many scenarios you can do better.</span></span> <span data-ttu-id="e8e24-136">Na przykład gdy magazyn danych zaplecza nie działa, możesz można akceptować dane wejściowe użytkownika, wyświetlać "Twoje żądanie zostało odebrane" i przechowywać dane wejściowe wiadomo gdzie jeszcze tymczasowo; następnie podczas service, konieczne będzie działać ponownie, można pobrać danych wejściowych i go przetworzyć.</span><span class="sxs-lookup"><span data-stu-id="e8e24-136">For example, when your back-end data store is down, you can accept user input, display "your request has been received," and store the input someplace else temporarily; then when the service you need is operational again, you can retrieve the input and process it.</span></span>

<span data-ttu-id="e8e24-137">[Wzorzec pracy skoncentrowany na kolejkach](queue-centric-work-pattern.md) rozdziale pokazano jeden ze sposobów postępowania w tym scenariuszu.</span><span class="sxs-lookup"><span data-stu-id="e8e24-137">The [Queue-centric Work Pattern](queue-centric-work-pattern.md) chapter shows one way to handle this scenario.</span></span> <span data-ttu-id="e8e24-138">Aplikacja naprawić przechowuje zadania w usłudze SQL Database, ale nie musi on zakończyć pracy, gdy baza danych SQL nie działa.</span><span class="sxs-lookup"><span data-stu-id="e8e24-138">The Fix It app stores tasks in SQL Database, but it doesn't have to quit working when SQL Database is down.</span></span> <span data-ttu-id="e8e24-139">W tym rozdziale opisano sposób przechowywania danych wejściowych użytkownika dla zadania w kolejce i używać procesu roboczego do odczytywania kolejki i aktualizacji zadania podrzędnego.</span><span class="sxs-lookup"><span data-stu-id="e8e24-139">In that chapter we'll see how to store user input for a task in a queue, and use a worker process to read the queue and update the task.</span></span> <span data-ttu-id="e8e24-140">Jeśli SQL działa, możliwość tworzenia zadania usuń go pozostanie nienaruszona; proces roboczy może poczekać i przetwarzać nowych zadań w przypadku, gdy baza danych SQL jest dostępna.</span><span class="sxs-lookup"><span data-stu-id="e8e24-140">If SQL is down, the ability to create Fix It tasks is unaffected; the worker process can wait and process new tasks when SQL Database is available.</span></span>

### <a name="region-failures"></a><span data-ttu-id="e8e24-141">Błędy regionu</span><span class="sxs-lookup"><span data-stu-id="e8e24-141">Region failures</span></span>

<span data-ttu-id="e8e24-142">Cały regionów może zakończyć się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="e8e24-142">Entire regions may fail.</span></span> <span data-ttu-id="e8e24-143">Klęski żywiołowe może zniszczyć centrum danych, może uzyskać spłaszczona za meteor, wiersza magistrali w centrum danych można było obciąć przez rolnika zakopanie krowy z backhoe itp. Co należy zrobić, jeśli aplikacja jest hostowana w stricken centrum danych?</span><span class="sxs-lookup"><span data-stu-id="e8e24-143">A natural disaster might destroy a data center, it might get flattened by a meteor, the trunk line into the datacenter could be cut by a farmer burying a cow with a backhoe, etc. If your app is hosted in the stricken datacenter what do you do?</span></span> <span data-ttu-id="e8e24-144">Istnieje możliwość skonfigurować aplikację na platformie Azure do jednoczesnego uruchamiania w wielu regionach, aby w przypadku awarii w jednym, możesz nadal działa w innym regionie.</span><span class="sxs-lookup"><span data-stu-id="e8e24-144">It's possible to set up your app in Azure to run in multiple regions simultaneously so that if there's a disaster in one, you continue running in another region.</span></span> <span data-ttu-id="e8e24-145">Takie błędy są bardzo rzadko, a większość aplikacji nie szybkiego dostępu za pośrednictwem przeszkód niezbędne do zapewnienia ciągłości usługi za pośrednictwem tego rodzaju błędów.</span><span class="sxs-lookup"><span data-stu-id="e8e24-145">Such failures are extremely rare occurrences, and most apps don't jump through the hoops necessary to ensure uninterrupted service through failures of this sort.</span></span> <span data-ttu-id="e8e24-146">Sekcja zasobów na końcu rozdział informacje na temat zachować swoją aplikację, które są dostępne nawet za pośrednictwem awarię regionu.</span><span class="sxs-lookup"><span data-stu-id="e8e24-146">See the Resources section at the end of the chapter for information about how to keep your app available even through a region failure.</span></span>

<span data-ttu-id="e8e24-147">Celem usługi Azure jest zapewnienie obsługi wszystkich tych rodzajów błędów o wiele prostsze i pojawi się kilka przykładów jak nam idzie, w następujących rozdziałach.</span><span class="sxs-lookup"><span data-stu-id="e8e24-147">A goal of Azure is to make handling all of these kinds of failures a lot easier, and you'll see some examples of how we're doing that in the following chapters.</span></span>

## <a name="slas"></a><span data-ttu-id="e8e24-148">Umowy SLA</span><span class="sxs-lookup"><span data-stu-id="e8e24-148">SLAs</span></span>

<span data-ttu-id="e8e24-149">Ludzie często Posłuchaj o umów dotyczących poziomu usług (SLA) w środowisku chmury.</span><span class="sxs-lookup"><span data-stu-id="e8e24-149">People often hear about service-level agreements (SLAs) in the cloud environment.</span></span> <span data-ttu-id="e8e24-150">Zasadniczo są to obietnic wchodzące w firmach o jak niezawodnej usługi.</span><span class="sxs-lookup"><span data-stu-id="e8e24-150">Basically these are promises that companies make about how reliable their service is.</span></span> <span data-ttu-id="e8e24-151">Dostępność na poziomie 99,9% czasu zgodnie z umową SLA oznacza, że możesz oczekiwać usługi działają poprawnie przez 99,9% czasu.</span><span class="sxs-lookup"><span data-stu-id="e8e24-151">A 99.9% SLA means you should expect the service to be working correctly 99.9% of the time.</span></span> <span data-ttu-id="e8e24-152">Jest dość typowy wartość umowy SLA i dźwięki, takich jak bardzo wysoką liczbę, ale nie zakładane dół czas, jaki. faktycznie wynosi 1%.</span><span class="sxs-lookup"><span data-stu-id="e8e24-152">That's a fairly typical value for an SLA and it sounds like a very high number, but you might not realize how much down time .1% actually amounts to.</span></span> <span data-ttu-id="e8e24-153">Poniżej przedstawiono tabelę, która pokazuje jak długi przestój różnych procentach umowy SLA, kwota przez rok, miesiąc i tydzień.</span><span class="sxs-lookup"><span data-stu-id="e8e24-153">Here's a table that shows how much downtime various SLA percentages amount to over a year, a month, and a week.</span></span>

![Tabela umowy SLA](design-to-survive-failures/_static/image2.png)

<span data-ttu-id="e8e24-155">Dlatego dostępność na poziomie 99,9% czasu zgodnie z umowy SLA oznacza, że usługa może nie działać 8.76 godzin roku lub 43,2 minut w miesiącu.</span><span class="sxs-lookup"><span data-stu-id="e8e24-155">So a 99.9% SLA means your service could be down 8.76 hours a year or 43.2 minutes a month.</span></span> <span data-ttu-id="e8e24-156">To więcej czasu niż większość osób weź pod uwagę.</span><span class="sxs-lookup"><span data-stu-id="e8e24-156">That's more down time than most people realize.</span></span> <span data-ttu-id="e8e24-157">Tak więc jako deweloper chcesz należy pamiętać, że pewien czas przestoju i obsługiwał go w taki sposób, bezpieczne.</span><span class="sxs-lookup"><span data-stu-id="e8e24-157">So as a developer you want to be aware that a certain amount of down time is possible and handle it in a graceful way.</span></span> <span data-ttu-id="e8e24-158">W pewnym momencie ktoś będzie korzystać z aplikacji, usługa ma być wyłączone i chcesz zminimalizować negatywny wpływ tego na klienta.</span><span class="sxs-lookup"><span data-stu-id="e8e24-158">At some point someone is going to be using your app, and a service is going to be down, and you want to minimize the negative impact of that on the customer.</span></span>

<span data-ttu-id="e8e24-159">Co należy wiedzieć na temat umowy SLA jest jakim przedziale czasu odnosi się do: powoduje zegara Rozpoczynanie resetowania co tydzień, co miesiąc lub co rok?</span><span class="sxs-lookup"><span data-stu-id="e8e24-159">One thing you should know about an SLA is what time-frame it refers to: does the clock get reset every week, every month, or every year?</span></span> <span data-ttu-id="e8e24-160">Na platformie Azure możemy teraz zresetować zegar co miesiąc, co jest dla Ciebie lepsza roczne umowy SLA, roczne umów SLA można ukryć odnotowane przesuwając z serii dobre miesięcy.</span><span class="sxs-lookup"><span data-stu-id="e8e24-160">In Azure we reset the clock every month, which is better for you than a yearly SLA, since a yearly SLA could hide bad months by offsetting them with a series of good months.</span></span>

<span data-ttu-id="e8e24-161">Oczywiście możemy zawsze Oczekuj lepiej niż SLA; zwykle będzie znacznie mniej, niż w dół.</span><span class="sxs-lookup"><span data-stu-id="e8e24-161">Of course we always aspire to do better than the SLA; usually you'll be down much less than that.</span></span> <span data-ttu-id="e8e24-162">Gwarantuje to, jeśli mamy problem nigdy nie dłużej niż maksymalny czas przestoju możesz poprosić dla pieniędzy.</span><span class="sxs-lookup"><span data-stu-id="e8e24-162">The promise is that if we're ever down for longer than the maximum down time you can ask for money back.</span></span> <span data-ttu-id="e8e24-163">Kwotę, wracając prawdopodobnie nie ma w pełni kompensuje znaczenie biznesowe nadmiarowe czas przestoju, ale ten aspekt umowy SLA działa jako zasady wymuszania i informuje o tym, że traktujemy on bardzo poważnie.</span><span class="sxs-lookup"><span data-stu-id="e8e24-163">The amount of money you get back probably wouldn't fully compensate you for the business impact of the excess down time, but that aspect of the SLA acts as an enforcement policy and lets you know that we do take it very seriously.</span></span>

### <a name="composite-slas"></a><span data-ttu-id="e8e24-164">Złożone umowy SLA</span><span class="sxs-lookup"><span data-stu-id="e8e24-164">Composite SLAs</span></span>

<span data-ttu-id="e8e24-165">Ważne jest, aby zastanów się, gdy rozważasz umowy SLA jest wpływ przy użyciu wielu usług w aplikacji, z każda usługa zawierająca osobne umowy SLA.</span><span class="sxs-lookup"><span data-stu-id="e8e24-165">An important thing to think about when you're looking at SLAs is the impact of using multiple services in an app, with each service having a separate SLA.</span></span> <span data-ttu-id="e8e24-166">Na przykład aplikacja naprawić korzysta z usługi Azure App Service Web Apps, Azure Storage i SQL Database.</span><span class="sxs-lookup"><span data-stu-id="e8e24-166">For example, the Fix It app uses Azure App Service Web Apps, Azure Storage, and SQL Database.</span></span> <span data-ttu-id="e8e24-167">Oto ich numery umowy SLA w dniu ta Książka elektroniczna jest zapisywana w grudnia 2013:</span><span class="sxs-lookup"><span data-stu-id="e8e24-167">Here are their SLA numbers as of the date this e-book is being written in December, 2013:</span></span>

![Umowa SLA witryny sieci Web, Storage, SQL Database](design-to-survive-failures/_static/image3.png)

<span data-ttu-id="e8e24-169">Co to jest maksymalny czas, czego można oczekiwać dla aplikacji, w oparciu o te umowom SLA przestoju?</span><span class="sxs-lookup"><span data-stu-id="e8e24-169">What is the maximum down time you would expect for the app based on these service SLAs?</span></span> <span data-ttu-id="e8e24-170">Może się wydawać, że czas dół są takie same najgorszy wartość procentowa umów SLA lub 99,9% w tym przypadku.</span><span class="sxs-lookup"><span data-stu-id="e8e24-170">You might think that your down time would be equal to the worst SLA percentage, or 99.9% in this case.</span></span> <span data-ttu-id="e8e24-171">Byłoby wartość true, jeśli wszystkie trzy usługi zawsze nie powiodło się w tym samym czasie, ale która niekoniecznie co rzeczywiście się dzieje.</span><span class="sxs-lookup"><span data-stu-id="e8e24-171">That would be true if all three services always failed at the same time, but that isn't necessarily what actually happens.</span></span> <span data-ttu-id="e8e24-172">Każda usługa może zakończyć się niepowodzeniem niezależnie w różnym czasie, więc trzeba obliczyć złożona umowa SLA mnożąc poszczególnych numerów umowy SLA.</span><span class="sxs-lookup"><span data-stu-id="e8e24-172">Each service may fail independently at different times, so you have to calculate the composite SLA by multiplying the individual SLA numbers.</span></span>

![Złożona umowa SLA](design-to-survive-failures/_static/image4.png)

<span data-ttu-id="e8e24-174">Dzięki czemu aplikacja może działać nie tylko 43,2 minut miesięcznie, ale 3 razy ta kwota, 108 minut w miesiącu — i nadal mieścić się w granicach umowy SLA platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="e8e24-174">So your app could be down not just 43.2 minutes a month but 3 times that amount, 108 minutes a month – and still be within the Azure SLA limits.</span></span>

<span data-ttu-id="e8e24-175">Ten problem nie jest unikatowa na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="e8e24-175">This issue is not unique to Azure.</span></span> <span data-ttu-id="e8e24-176">Firma Microsoft zapewnia faktycznie Najlepsza chmura SLA dowolnej usługi w chmurze dostępna i będziesz mieć podobne problemy, aby się zająć, jeśli używasz dowolnego dostawcy usług w chmurze.</span><span class="sxs-lookup"><span data-stu-id="e8e24-176">We actually provide the best cloud SLAs of any cloud service available, and you'll have similar issues to deal with if you use any vendor's cloud services.</span></span> <span data-ttu-id="e8e24-177">Co to powoduje zaznaczenie jest znaczenie zastanawiać się, jak projektowanie aplikacji do obsługi błędów usługi nieuniknione poprawnie, ponieważ one mogą odbywa się wystarczająco często mających wpływ na klientów lub użytkowników.</span><span class="sxs-lookup"><span data-stu-id="e8e24-177">What this highlights is the importance of thinking about how you can design your app to handle the inevitable service failures gracefully, because they might happen often enough to impact your customers or users.</span></span>

### <a name="cloud-slas-compared-to-enterprise-down-time-experience"></a><span data-ttu-id="e8e24-178">Umowy SLA chmury w porównaniu do środowiska czas przestoju przedsiębiorstwa</span><span class="sxs-lookup"><span data-stu-id="e8e24-178">Cloud SLAs compared to enterprise down-time experience</span></span>

<span data-ttu-id="e8e24-179">Osoby czasami powiedzieć "W swojej aplikacji w organizacji nigdy nie mam te problemy."</span><span class="sxs-lookup"><span data-stu-id="e8e24-179">People sometimes say, "In my enterprise app I never have these problems."</span></span> <span data-ttu-id="e8e24-180">Jeśli zadasz pytanie o czas, jaki dół miesięcznie faktycznie posiadany zwykle mówią, "Dobrze, zdarza się czasami."</span><span class="sxs-lookup"><span data-stu-id="e8e24-180">If you ask how much down time a month they actually have, they usually say, "Well, it happens occasionally."</span></span> <span data-ttu-id="e8e24-181">I jeśli zadasz pytanie częstotliwość wprowadzanych, "Czasami musimy utworzyć kopię zapasową lub zainstalować nowe oprogramowanie serwera lub aktualizacji."</span><span class="sxs-lookup"><span data-stu-id="e8e24-181">And if you ask how often, they admit that "Sometimes we do need to back up or install a new server or update software."</span></span> <span data-ttu-id="e8e24-182">Oczywiście, który zlicza czas przestoju.</span><span class="sxs-lookup"><span data-stu-id="e8e24-182">Of course, that counts as down time.</span></span> <span data-ttu-id="e8e24-183">Większości aplikacji firmowych, chyba że są one szczególnie o kluczowym znaczeniu są faktycznie w dół dla więcej niż dozwolone przez umowy SLA usługi czas.</span><span class="sxs-lookup"><span data-stu-id="e8e24-183">Most enterprise apps unless they are especially mission-critical are actually down for more than the amount of time allowed by our service SLAs.</span></span> <span data-ttu-id="e8e24-184">Ale jeśli jesteś odpowiedzialny za i kontrolę nad jego serwera i infrastruktury, zwykle możesz mniej angst dół razy.</span><span class="sxs-lookup"><span data-stu-id="e8e24-184">But when it's your server and your infrastructure and you're responsible for it and in control of it, you tend to feel less angst about down times.</span></span> <span data-ttu-id="e8e24-185">W środowisku chmury jest zależny od kogoś innego i nie wiesz, co się dzieje, dzięki czemu może przeważnie, aby uzyskać bardziej niepokoju go.</span><span class="sxs-lookup"><span data-stu-id="e8e24-185">In a cloud environment you're dependent on someone else and you don't know what's going on, so you might tend to get more worried about it.</span></span>

<span data-ttu-id="e8e24-186">Gdy przedsiębiorstwa uzyskuje większy procent czasu, niż uzyskiwanie chmury umowy SLA, im jego spędzając znacznie więcej pieniędzy na sprzęcie.</span><span class="sxs-lookup"><span data-stu-id="e8e24-186">When an enterprise achieves a greater up-time percentage than you get from a cloud SLA, they do it by spending a lot more money on hardware.</span></span> <span data-ttu-id="e8e24-187">Usługa w chmurze można to zrobić, ale musi opłaty za dużo więcej dla swoich usług.</span><span class="sxs-lookup"><span data-stu-id="e8e24-187">A cloud service could do that but would have to charge much more for its services.</span></span> <span data-ttu-id="e8e24-188">Zamiast tego należy korzystać z zalet usługi ekonomiczne i projektowania oprogramowania, tak aby błędy nieuniknione spowodować zakłócenie minimalną dla klientów.</span><span class="sxs-lookup"><span data-stu-id="e8e24-188">Instead, you take advantage of a cost-effective service and design your software so that the inevitable failures cause minimum disruption to your customers.</span></span> <span data-ttu-id="e8e24-189">Zadanie jako Projektant aplikacji chmury nie jest tak wiele w celu uniknięcia błędów, aby uniknąć katastrofy i można to zrobić, skupiając się na oprogramowanie, nie na sprzęcie.</span><span class="sxs-lookup"><span data-stu-id="e8e24-189">Your job as a cloud app designer is not so much to avoid failure as to avoid catastrophe, and you do that by focusing on software, not on hardware.</span></span> <span data-ttu-id="e8e24-190">Natomiast aplikacjami w przedsiębiorstwie Dokładamy wszelkich starań zmaksymalizować średniego czasu między awariami, aplikacje w chmurze Dokładamy wszelkich starań zminimalizować Średni czas do odzyskania.</span><span class="sxs-lookup"><span data-stu-id="e8e24-190">Whereas enterprise apps strive to maximize mean time between failures, cloud apps strive to minimize mean time to recover.</span></span>

### <a name="not-all-cloud-services-have-slas"></a><span data-ttu-id="e8e24-191">Nie wszystkie usługi w chmurze ma umowy SLA</span><span class="sxs-lookup"><span data-stu-id="e8e24-191">Not all cloud services have SLAs</span></span>

<span data-ttu-id="e8e24-192">Pamiętaj również, nie każdej usługi w chmurze nawet zgodnie z umową SLA.</span><span class="sxs-lookup"><span data-stu-id="e8e24-192">Be aware also that not every cloud service even has an SLA.</span></span> <span data-ttu-id="e8e24-193">Jeśli Twoja aplikacja jest zależna od usługi, za pomocą żadnej gwarancji czasu, może być w dół znacznie dłużej, niż może imagine.</span><span class="sxs-lookup"><span data-stu-id="e8e24-193">If your app is dependent on a service with no up-time guarantee, you could be down far longer than you might imagine.</span></span> <span data-ttu-id="e8e24-194">Na przykład jeśli włączysz Zaloguj się do witryny, korzystając z mediów społecznościowych, takich jak Facebook lub Twitter, skontaktuj się z dostawcy usług, aby dowiedzieć się, jeśli jest objęta umową SLA i może się okazać tam nie.</span><span class="sxs-lookup"><span data-stu-id="e8e24-194">For example, if you enable log-in to your site using a social provider such as Facebook or Twitter, check with the service provider to find out if there is an SLA, and you might find out there isn't one.</span></span> <span data-ttu-id="e8e24-195">Ale jeśli usługa uwierzytelniania ulegnie awarii lub nie obsługuje liczby żądań, które generują go, klientów z zablokowanym dostępem do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e8e24-195">But if the authentication service goes down or is unable to support the volume of requests you throw at it, your customers are locked out of your app.</span></span> <span data-ttu-id="e8e24-196">Mogą być wyłączone, dni lub dłużej.</span><span class="sxs-lookup"><span data-stu-id="e8e24-196">You could be down for days or longer.</span></span> <span data-ttu-id="e8e24-197">Twórcy jedną nową aplikację oczekiwano setki milionów plików do pobrania i zależna uwierzytelniania serwisu Facebook — ale nie komunikować się z usługi Facebook, przed przejściem na żywo i wykrytych za późno, które nie było żadnej umowy SLA dla usługi.</span><span class="sxs-lookup"><span data-stu-id="e8e24-197">The creators of one new app expected hundreds of millions of downloads and took a dependency on Facebook authentication – but didn't talk to Facebook before going live and discovered too late that there was no SLA for that service.</span></span>

### <a name="not-all-downtime-counts-toward-slas"></a><span data-ttu-id="e8e24-198">Nie wszystkie liczniki czas przestoju kierunku umowy SLA</span><span class="sxs-lookup"><span data-stu-id="e8e24-198">Not all downtime counts toward SLAs</span></span>

<span data-ttu-id="e8e24-199">Niektóre usługi w chmurze celowo może odmówić usługi, jeśli aplikacja używa nadmiernej je.</span><span class="sxs-lookup"><span data-stu-id="e8e24-199">Some cloud services may deliberately deny service if your app over-uses them.</span></span> <span data-ttu-id="e8e24-200">Jest to nazywane *ograniczania*.</span><span class="sxs-lookup"><span data-stu-id="e8e24-200">This is called *throttling*.</span></span> <span data-ttu-id="e8e24-201">Jeśli usługa jest objęta umową SLA, należy go stanu warunki, w których może być ograniczona i projekt aplikacji należy uniknąć tych warunków i odpowiednio reagować na ograniczenia wydajności, jeśli występuje on.</span><span class="sxs-lookup"><span data-stu-id="e8e24-201">If a service has an SLA, it should state the conditions under which you might be throttled, and your app design should avoid those conditions and react appropriately to the throttling if it happens.</span></span> <span data-ttu-id="e8e24-202">Na przykład jeśli żądania do usługi zaczynają się niepowodzeniem, jeśli klient przekroczy pewną liczbę na sekundę, chcesz upewnij się, że automatyczne ponawianie prób nie występują tak szybko, spowodują ograniczania kontynuować.</span><span class="sxs-lookup"><span data-stu-id="e8e24-202">For example, if requests to a service start to fail when you exceed a certain number per second, you want to make sure automatic retries don't happen so fast that they cause the throttling to continue.</span></span> <span data-ttu-id="e8e24-203">Więcej na temat ograniczania przepustowości w odpowiemy [obsługi błędów przejściowych rozdział](transient-fault-handling.md).</span><span class="sxs-lookup"><span data-stu-id="e8e24-203">We'll have more to say about throttling in the [Transient Fault Handling chapter](transient-fault-handling.md).</span></span>

## <a name="summary"></a><span data-ttu-id="e8e24-204">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="e8e24-204">Summary</span></span>

<span data-ttu-id="e8e24-205">W tym rozdziale próbował łatwiej wykorzystać, dlaczego rzeczywistych aplikacji w chmurze musi być zaprojektowany do poprawnego działania po awarii.</span><span class="sxs-lookup"><span data-stu-id="e8e24-205">This chapter has tried to help you realize why a real world cloud app has to be designed to survive failures gracefully.</span></span> <span data-ttu-id="e8e24-206">Począwszy od [następny rozdział](monitoring-and-telemetry.md), pozostałe wzorców w tej serii przejść do bardziej szczegółowo kilka strategii, można użyć, aby to zrobić:</span><span class="sxs-lookup"><span data-stu-id="e8e24-206">Starting with the [next chapter](monitoring-and-telemetry.md), the remaining patterns in this series go into more detail about some strategies you can use to do that:</span></span>

- <span data-ttu-id="e8e24-207">Masz dobre [monitorowanie i telemetria](monitoring-and-telemetry.md), dzięki czemu możesz dowiedzieć się szybko o błędach, które wymagają interwencji, a użytkownik ma wystarczające informacje, aby je rozwiązać.</span><span class="sxs-lookup"><span data-stu-id="e8e24-207">Have good [monitoring and telemetry](monitoring-and-telemetry.md), so that you find out quickly about failures that require intervention, and you have sufficient information to resolve them.</span></span>
- <span data-ttu-id="e8e24-208">[Obsługa błędów przejściowych](transient-fault-handling.md) przez zaimplementowanie logiki ponowień inteligentne tak, aby aplikacja automatycznie odzyskuje po można i powraca do [wyłącznik](transient-fault-handling.md#circuitbreakers) logiki, gdy nie jest.</span><span class="sxs-lookup"><span data-stu-id="e8e24-208">[Handle transient faults](transient-fault-handling.md) by implementing intelligent retry logic, so that your app recovers automatically when it can and falls back to [circuit breaker](transient-fault-handling.md#circuitbreakers) logic when it can't.</span></span>
- <span data-ttu-id="e8e24-209">Użyj [rozproszonej pamięci podręcznej](distributed-caching.md) aby zminimalizować problemy przepływności, opóźnienia i połączenie z dostępu do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="e8e24-209">Use [distributed caching](distributed-caching.md) in order to minimize throughput, latency, and connection problems with database access.</span></span>
- <span data-ttu-id="e8e24-210">Implementowanie luźne sprzężenia za pośrednictwem [wzorzec pracy skoncentrowany na kolejkach](queue-centric-work-pattern.md), dzięki czemu Twoje fronton aplikacji mogą w dalszym ciągu działać po zaplecza nie działa.</span><span class="sxs-lookup"><span data-stu-id="e8e24-210">Implement loose coupling via the [queue-centric work pattern](queue-centric-work-pattern.md), so that your app front end can continue to work when the back end is down.</span></span>

## <a name="resources"></a><span data-ttu-id="e8e24-211">Zasoby</span><span class="sxs-lookup"><span data-stu-id="e8e24-211">Resources</span></span>

<span data-ttu-id="e8e24-212">Aby uzyskać więcej informacji zobacz dalszych rozdziałach tę książkę elektroniczną i następujące zasoby.</span><span class="sxs-lookup"><span data-stu-id="e8e24-212">For more information, see later chapters in this e-book and the following resources.</span></span>

<span data-ttu-id="e8e24-213">Dokumentacja:</span><span class="sxs-lookup"><span data-stu-id="e8e24-213">Documentation:</span></span>

- <span data-ttu-id="e8e24-214">[Przed uszkodzeniami: Wskazówki dotyczące architektury na temat odporności chmury](https://msdn.microsoft.com/library/windowsazure/jj853352.aspx).</span><span class="sxs-lookup"><span data-stu-id="e8e24-214">[Failsafe: Guidance for Resilient Cloud Architectures](https://msdn.microsoft.com/library/windowsazure/jj853352.aspx).</span></span> <span data-ttu-id="e8e24-215">Oficjalny dokument, Marc Mercuri, Ulrich Homann i Andrew Townhill.</span><span class="sxs-lookup"><span data-stu-id="e8e24-215">White paper by Marc Mercuri, Ulrich Homann, and Andrew Townhill.</span></span> <span data-ttu-id="e8e24-216">Wersja strony sieci Web przed uszkodzeniami serii filmów wideo.</span><span class="sxs-lookup"><span data-stu-id="e8e24-216">Web page version of the FailSafe video series.</span></span>
- <span data-ttu-id="e8e24-217">[Najlepsze rozwiązania dotyczące projektowania usług na dużą skalę w usługach Azure Cloud Services](https://msdn.microsoft.com/library/windowsazure/jj717232.aspx).</span><span class="sxs-lookup"><span data-stu-id="e8e24-217">[Best Practices for the Design of Large-Scale Services on Azure Cloud Services](https://msdn.microsoft.com/library/windowsazure/jj717232.aspx).</span></span> <span data-ttu-id="e8e24-218">Oficjalny dokument — Markiem Simmsem i Michael Thomassy.</span><span class="sxs-lookup"><span data-stu-id="e8e24-218">White paper by Mark Simms and Michael Thomassy.</span></span>
- <span data-ttu-id="e8e24-219">[Wskazówki techniczne ciągłości biznesowej platformy Azure](https://msdn.microsoft.com/library/windowsazure/hh873027.aspx).</span><span class="sxs-lookup"><span data-stu-id="e8e24-219">[Azure Business Continuity Technical Guidance](https://msdn.microsoft.com/library/windowsazure/hh873027.aspx).</span></span> <span data-ttu-id="e8e24-220">Oficjalny dokument Patrick Wickline i Jason Roth.</span><span class="sxs-lookup"><span data-stu-id="e8e24-220">White paper by Patrick Wickline and Jason Roth.</span></span>
- <span data-ttu-id="e8e24-221">[Odzyskiwanie po awarii i wysoka dostępność dla aplikacji platformy Azure](https://msdn.microsoft.com/library/windowsazure/dn251004.aspx).</span><span class="sxs-lookup"><span data-stu-id="e8e24-221">[Disaster Recovery and High Availability for Azure Applications](https://msdn.microsoft.com/library/windowsazure/dn251004.aspx).</span></span> <span data-ttu-id="e8e24-222">Oficjalny dokument przez Michaela McKeown, Hanu Kommalapati i Jason Roth.</span><span class="sxs-lookup"><span data-stu-id="e8e24-222">White paper by Michael McKeown, Hanu Kommalapati, and Jason Roth.</span></span>
- <span data-ttu-id="e8e24-223">[Microsoft Patterns and Practices — wskazówki dotyczące platformy Azure](https://msdn.microsoft.com/library/dn568099.aspx).</span><span class="sxs-lookup"><span data-stu-id="e8e24-223">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="e8e24-224">Zobacz wskazówki dotyczące wdrażania centrum danych Multi, wzorzec wyłącznika.</span><span class="sxs-lookup"><span data-stu-id="e8e24-224">See Multi Data Center Deployment guidance, Circuit breaker pattern.</span></span>
- <span data-ttu-id="e8e24-225">[Pomoc techniczna platformy Azure — umowy dotyczące poziomu usług](https://azure.microsoft.com/support/legal/sla/).</span><span class="sxs-lookup"><span data-stu-id="e8e24-225">[Azure Support - Service Level Agreements](https://azure.microsoft.com/support/legal/sla/).</span></span>
- <span data-ttu-id="e8e24-226">[Ciągłość prowadzenia działalności biznesowej w usłudze Azure SQL Database](https://msdn.microsoft.com/library/windowsazure/hh852669.aspx).</span><span class="sxs-lookup"><span data-stu-id="e8e24-226">[Business Continuity in Azure SQL Database](https://msdn.microsoft.com/library/windowsazure/hh852669.aspx).</span></span> <span data-ttu-id="e8e24-227">Dokumentacja usługi o wysokiej dostępności i odzyskiwania funkcji usługi SQL Database.</span><span class="sxs-lookup"><span data-stu-id="e8e24-227">Documentation about SQL Database high availability and disaster recovery features.</span></span>
- <span data-ttu-id="e8e24-228">[Wysoka dostępność i odzyskiwanie po awarii programu SQL Server na maszynach wirtualnych platformy Azure](https://msdn.microsoft.com/library/windowsazure/jj870962.aspx).</span><span class="sxs-lookup"><span data-stu-id="e8e24-228">[High Availability and Disaster Recovery for SQL Server in Azure Virtual Machines](https://msdn.microsoft.com/library/windowsazure/jj870962.aspx).</span></span>

<span data-ttu-id="e8e24-229">Filmy wideo:</span><span class="sxs-lookup"><span data-stu-id="e8e24-229">Videos:</span></span>

- <span data-ttu-id="e8e24-230">[Przed uszkodzeniami: Tworzenie usługi w chmurze skalowalne, odporne](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="e8e24-230">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="e8e24-231">Dziewięć serii Ulrich Homann, Marc Mercuri i — Markiem Simmsem.</span><span class="sxs-lookup"><span data-stu-id="e8e24-231">Nine-part series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="e8e24-232">Przedstawia informacje o szczegółowo pojęcia i zasady dotyczące architektury w sposób bardzo dostępny i interesujące z historii z doświadczenia zespołu doradczego klientów firmy Microsoft (CAT) z klientów.</span><span class="sxs-lookup"><span data-stu-id="e8e24-232">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="e8e24-233">Odcinki 1 do 8 konstrukcyjnym szczegółowo powody do projektowania aplikacji w chmurze po awarii.</span><span class="sxs-lookup"><span data-stu-id="e8e24-233">Episodes 1 and 8 go in depth into the reasons for designing cloud apps to survive failures.</span></span> <span data-ttu-id="e8e24-234">Zobacz też monitowania dyskusję na temat ograniczania przepustowości w odcinek 2 zaczynając od 49:57, omówienie punktów awarii i trybów awarii w odcinek 2 zaczynając od 56:05 i dyskusji wyłączników w odcinek 3 zaczynając od 40:55.</span><span class="sxs-lookup"><span data-stu-id="e8e24-234">See also the follow-up discussion of throttling in episode 2 starting at 49:57, the discussion of failure points and failure modes in episode 2 starting at 56:05, and the discussion of circuit breakers in episode 3 starting at 40:55.</span></span>
- <span data-ttu-id="e8e24-235">[Tworzenie dużych: Lekcje wyniesione z klientów platformy Azure — część II](https://channel9.msdn.com/Events/Build/2012/3-030).</span><span class="sxs-lookup"><span data-stu-id="e8e24-235">[Building Big: Lessons learned from Azure customers - Part II](https://channel9.msdn.com/Events/Build/2012/3-030).</span></span> <span data-ttu-id="e8e24-236">— Markiem Simmsem omawia projektowanie pod kątem błędów i instrumentacji wszystko.</span><span class="sxs-lookup"><span data-stu-id="e8e24-236">Mark Simms talks about designing for failure and instrumenting everything.</span></span> <span data-ttu-id="e8e24-237">Podobnie jak przed uszkodzeniami serii, ale zbliża się bardziej szczegółowe informacje z instrukcjami.</span><span class="sxs-lookup"><span data-stu-id="e8e24-237">Similar to the Failsafe series but goes into more how-to details.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="e8e24-238">[Poprzednie](unstructured-blob-storage.md)
> [dalej](monitoring-and-telemetry.md)</span><span class="sxs-lookup"><span data-stu-id="e8e24-238">[Previous](unstructured-blob-storage.md)
[Next](monitoring-and-telemetry.md)</span></span>

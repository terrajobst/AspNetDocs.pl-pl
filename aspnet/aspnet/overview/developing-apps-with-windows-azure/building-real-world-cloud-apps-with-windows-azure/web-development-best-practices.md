---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/web-development-best-practices
title: Najlepsze praktyki dotyczące programowania w sieci Web (Tworzenie aplikacji w chmurze w rzeczywistych warunkach na platformie Azure) | Microsoft Docs
author: MikeWasson
description: Tworzenie aplikacji w chmurze w świecie rzeczywistym za pomocą książki elektronicznej platformy Azure jest oparte na prezentacji opracowanej przez Scott Guthrie. Wyjaśniono 13 wzorców i praktyk, które mogą...
ms.author: riande
ms.date: 06/12/2014
ms.assetid: 52d6c941-2cd9-442f-9872-2c798d6d90cd
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/web-development-best-practices
msc.type: authoredcontent
ms.openlocfilehash: 0956aaaf1f6a1a0d2f5d93f98cb6959cec98dbaf
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/28/2019
ms.locfileid: "74582706"
---
# <a name="web-development-best-practices-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="9a5e3-104">Najlepsze praktyki dotyczące programowania w sieci Web (Tworzenie aplikacji w chmurze w rzeczywistych warunkach na platformie Azure)</span><span class="sxs-lookup"><span data-stu-id="9a5e3-104">Web Development Best Practices (Building Real-World Cloud Apps with Azure)</span></span>

<span data-ttu-id="9a5e3-105">przez [Jan Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tomasz Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="9a5e3-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="9a5e3-106">[Pobierz poprawkę](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) lub [Pobierz książkę elektroniczną](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="9a5e3-106">[Download Fix It Project](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="9a5e3-107">**Tworzenie aplikacji w chmurze w świecie rzeczywistym za pomocą książki elektronicznej platformy Azure** jest oparte na prezentacji opracowanej przez Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="9a5e3-108">Wyjaśniono 13 wzorców i praktyk, które mogą pomóc w pomyślnym tworzeniu aplikacji sieci Web dla chmury.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="9a5e3-109">Aby uzyskać informacje na temat książki elektronicznej, zobacz [pierwszy rozdział](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="9a5e3-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>

<span data-ttu-id="9a5e3-110">Pierwsze trzy wzorce miały na celu skonfigurowanie procesu programowania Agile. Pozostałe informacje dotyczą architektury i kodu.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-110">The first three patterns were about setting up an agile development process; the rest are about architecture and code.</span></span> <span data-ttu-id="9a5e3-111">Jest to zbiór najlepszych rozwiązań dotyczących programowania w sieci Web:</span><span class="sxs-lookup"><span data-stu-id="9a5e3-111">This one is a collection of web development best practices:</span></span>

- <span data-ttu-id="9a5e3-112">[Bezstanowe serwery sieci Web](#stateless) za pomocą inteligentnego modułu równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-112">[Stateless web servers](#stateless) behind a smart load balancer.</span></span>
- <span data-ttu-id="9a5e3-113">[Należy unikać stanu sesji](#sessionstate) (lub jeśli nie można tego uniknąć, należy użyć rozproszonej pamięci podręcznej, a nie bazy danych).</span><span class="sxs-lookup"><span data-stu-id="9a5e3-113">[Avoid session state](#sessionstate) (or if you can't avoid it, use distributed cache rather than a database).</span></span>
- <span data-ttu-id="9a5e3-114">[Użyj sieci CDN](#cdn) do statycznych zasobów plików (obrazów, skryptów) w pamięci podręcznej usługi Edge.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-114">[Use a CDN](#cdn) to edge-cache static file assets (images, scripts).</span></span>
- <span data-ttu-id="9a5e3-115">[Używaj asynchronicznej obsługi platformy .NET 4.5](#async) , aby uniknąć blokowania wywołań.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-115">[Use .NET 4.5's async support](#async) to avoid blocking calls.</span></span>

<span data-ttu-id="9a5e3-116">Te praktyki są prawidłowe dla całego programowania w sieci Web, a nie tylko dla aplikacji w chmurze, ale są szczególnie ważne w przypadku aplikacji w chmurze.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-116">These practices are valid for all web development, not just for cloud apps, but they're especially important for cloud apps.</span></span> <span data-ttu-id="9a5e3-117">Współpracują ze sobą, aby ułatwić optymalne wykorzystanie wysoce elastycznego skalowania oferowanego przez środowisko chmury.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-117">They work together to help you make optimal use of the highly flexible scaling offered by the cloud environment.</span></span> <span data-ttu-id="9a5e3-118">Jeśli nie korzystasz z tych zasad, podczas próby skalowania aplikacji będziesz mieć ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-118">If you don't follow these practices, you'll run into limitations when you try to scale your application.</span></span>

<a id="stateless"></a>
## <a name="stateless-web-tier-behind-a-smart-load-balancer"></a><span data-ttu-id="9a5e3-119">Bezstanowa warstwa internetowa za pomocą inteligentnego modułu równoważenia obciążenia</span><span class="sxs-lookup"><span data-stu-id="9a5e3-119">Stateless web tier behind a smart load balancer</span></span>

<span data-ttu-id="9a5e3-120">*Bezstanowa warstwa sieci Web* oznacza, że nie są przechowywane żadne dane aplikacji w pamięci serwera sieci Web lub w systemie plików.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-120">*Stateless web tier* means you don't store any application data in the web server memory or file system.</span></span> <span data-ttu-id="9a5e3-121">Pozostawienie warstwy sieci Web bezstanowej umożliwia zarówno lepsze środowisko pracy klienta, jak i oszczędność pieniędzy:</span><span class="sxs-lookup"><span data-stu-id="9a5e3-121">Keeping your web tier stateless enables you to both provide a better customer experience and save money:</span></span>

- <span data-ttu-id="9a5e3-122">Jeśli warstwa sieci Web jest bezstanowa i znajduje się za modułem równoważenia obciążenia, możesz szybko reagować na zmiany w ruchu aplikacji przez dynamiczne dodawanie lub usuwanie serwerów.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-122">If the web tier is stateless and it sits behind a load balancer, you can quickly respond to changes in application traffic by dynamically adding or removing servers.</span></span> <span data-ttu-id="9a5e3-123">W środowisku chmury, w przypadku których płacisz tylko za zasoby serwera, tak długo, jak faktycznie są używane, możliwość reagowania na zmiany popytu może przełożyć na ogromne oszczędności.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-123">In the cloud environment where you only pay for server resources for as long as you actually use them, that ability to respond to changes in demand can translate into huge savings.</span></span>
- <span data-ttu-id="9a5e3-124">Bezstanowa warstwa internetowa jest znacznie prostsza do skalowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-124">A stateless web tier is architecturally much simpler to scale out the application.</span></span> <span data-ttu-id="9a5e3-125">Pozwala to na szybsze reagowanie na skalowanie, a także poświęcanie mniejszej nakładu na rozwój i testowanie w procesie.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-125">That too enables you to respond to scaling needs more quickly, and spend less money on development and testing in the process.</span></span>
- <span data-ttu-id="9a5e3-126">Serwery w chmurze, takie jak serwery lokalne, muszą być poprawiane i uruchamiane ponownie sporadycznie; a jeśli warstwa sieci Web jest bezstanowa, ponowne kierowanie ruchem po tymczasowym przekroczeniu serwera nie spowoduje błędów lub nieoczekiwane zachowanie.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-126">Cloud servers, like on-premises servers, need to be patched and rebooted occasionally; and if the web tier is stateless, re-routing traffic when a server goes down temporarily won't cause errors or unexpected behavior.</span></span>

<span data-ttu-id="9a5e3-127">Większość aplikacji w świecie musi przechowywać stan dla sesji sieci Web; głównym punktem nie jest przechowywanie go na serwerze sieci Web.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-127">Most real-world applications do need to store state for a web session; the main point here is not to store it on the web server.</span></span> <span data-ttu-id="9a5e3-128">Można przechowywać stan w inny sposób, na przykład na kliencie w plikach cookie lub poza procesami w ASP.NET stan sesji przy użyciu dostawcy pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-128">You can store state in other ways, such as on the client in cookies or out of process server-side in ASP.NET session state using a cache provider.</span></span> <span data-ttu-id="9a5e3-129">Pliki można przechowywać w [magazynie obiektów BLOB systemu Windows Azure](unstructured-blob-storage.md) zamiast w lokalnym systemie plików.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-129">You can store files in [Windows Azure Blob storage](unstructured-blob-storage.md) instead of the local file system.</span></span>

<span data-ttu-id="9a5e3-130">Przykładowo, jak łatwo jest skalować aplikację w witrynach sieci Web systemu Windows Azure, jeśli warstwa sieci Web jest bezstanowa, zobacz kartę **Skala** dla witryny sieci Web systemu Windows Azure w portalu zarządzania:</span><span class="sxs-lookup"><span data-stu-id="9a5e3-130">As an example of how easy it is to scale an application in Windows Azure Web Sites if your web tier is stateless, see the **Scale** tab for a Windows Azure Web Site in the management portal:</span></span>

![Karta Skala](web-development-best-practices/_static/image1.png)

<span data-ttu-id="9a5e3-132">Aby dodać serwery sieci Web, można po prostu przeciągnąć suwak liczby wystąpień w prawo.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-132">If you want to add web servers, you can just drag the instance count slider to the right.</span></span> <span data-ttu-id="9a5e3-133">Ustaw ją na 5 i kliknij przycisk **Zapisz**, a w ciągu kilku sekund masz 5 serwerów sieci Web w systemie Windows Azure obsługujących ruch witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-133">Set it to 5 and click **Save**, and within seconds you have 5 web servers in Windows Azure handling your web site's traffic.</span></span>

![Pięć wystąpień](web-development-best-practices/_static/image2.png)

<span data-ttu-id="9a5e3-135">Można równie łatwo ustawić liczbę wystąpień w dół do 3 lub z powrotem na 1.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-135">You can just as easily set the instance count down to 3 or back down to 1.</span></span> <span data-ttu-id="9a5e3-136">Po skalowaniu z powrotem należy natychmiast zacząć zaoszczędzić pieniądze, ponieważ system Windows Azure obciąża minutę, a nie godzinę.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-136">When you scale back, you start saving money immediately because Windows Azure charges by the minute, not by the hour.</span></span>

<span data-ttu-id="9a5e3-137">Możesz również poinformować platformę Microsoft Azure, aby automatycznie zwiększać lub zmniejszać liczbę serwerów sieci Web na podstawie użycia procesora CPU.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-137">You can also tell Windows Azure to automatically increase or decrease the number of web servers based on CPU usage.</span></span> <span data-ttu-id="9a5e3-138">W poniższym przykładzie, gdy użycie procesora CPU spadnie poniżej 60%, liczba serwerów sieci Web obniży się do co najmniej 2. Jeśli użycie procesora CPU spadnie powyżej 80%, liczba serwerów sieci Web zostanie zwiększona do maksymalnie 4.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-138">In the following example, when CPU usage goes below 60%, the number of web servers will decrease to a minimum of 2, and if CPU usage goes above 80%, the number of web servers will be increased up to a maximum of 4.</span></span>

![Skalowanie według użycia procesora CPU](web-development-best-practices/_static/image3.png)

<span data-ttu-id="9a5e3-140">Lub co zrobić, Jeśli wiesz, że Twoja witryna będzie zajęta tylko w godzinach pracy?</span><span class="sxs-lookup"><span data-stu-id="9a5e3-140">Or what if you know that your site will only be busy during working hours?</span></span> <span data-ttu-id="9a5e3-141">Możesz powiedzieć, że platforma Microsoft Azure będzie uruchamiać wiele serwerów w godzinach dziennych i zmniejszać się do jednego serwera nawet, nocy i weekendów.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-141">You can tell Windows Azure to run multiple servers during the daytime and decrease to a single server evenings, nights, and weekends.</span></span> <span data-ttu-id="9a5e3-142">Poniższa seria zrzutów ekranu pokazuje, jak skonfigurować witrynę sieci Web tak, aby uruchamiała jeden serwer w godzinach poza godzinami i 4 serwerami w godzinach pracy od 8 do 5 PM.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-142">The following series of screen shots shows how to set up the web site to run one server in off hours and 4 servers during work hours from 8 AM to 5 PM.</span></span>

![Skalowanie według harmonogramu](web-development-best-practices/_static/image4.png)

![Ustawianie czasów harmonogramu](web-development-best-practices/_static/image5.png)

![Harmonogram dzienny](web-development-best-practices/_static/image6.png)

![Harmonogram weeknight](web-development-best-practices/_static/image7.png)

![Harmonogram weekendowy](web-development-best-practices/_static/image8.png)

<span data-ttu-id="9a5e3-148">I oczywiście wszystkie te czynności można wykonać w skryptach, a także w portalu.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-148">And of course all of this can be done in scripts as well as in the portal.</span></span>

<span data-ttu-id="9a5e3-149">Możliwość skalowania w poziomie aplikacji jest niemal nieograniczona w systemie Windows Azure, o ile pozwala uniknąć przeszkód w dynamicznym dodawaniu lub usuwaniu maszyn wirtualnych na serwerze, utrzymując warstwę sieci Web bez ograniczeń.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-149">The ability of your application to scale out is almost unlimited in Windows Azure, so long as you avoid impediments to dynamically adding or removing server VMs, by keeping the web tier stateless.</span></span>

<a id="sessionstate"></a>
## <a name="avoid-session-state"></a><span data-ttu-id="9a5e3-150">Unikaj stanu sesji</span><span class="sxs-lookup"><span data-stu-id="9a5e3-150">Avoid session state</span></span>

<span data-ttu-id="9a5e3-151">Często nie jest to praktyczne w aplikacji w chmurze w rzeczywistości, aby uniknąć przechowywania niektórych form stanu dla sesji użytkownika, ale niektóre podejścia mają wpływ na wydajność i skalowalność więcej niż inne.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-151">It's often not practical in a real-world cloud app to avoid storing some form of state for a user session, but some approaches impact performance and scalability more than others.</span></span> <span data-ttu-id="9a5e3-152">Jeśli musisz przechowywać stan, najlepszym rozwiązaniem jest zachowanie małego stanu i zapisanie go w plikach cookie.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-152">If you have to store state, the best solution is to keep the amount of state small and store it in cookies.</span></span> <span data-ttu-id="9a5e3-153">Jeśli to nie jest możliwe, następnym najlepszym rozwiązaniem jest użycie ASP.NET stanu sesji z dostawcą dla [rozproszonej pamięci podręcznej w pamięci](distributed-caching.md#sessionstate).</span><span class="sxs-lookup"><span data-stu-id="9a5e3-153">If that isn't feasible, the next best solution is to use ASP.NET session state with a provider for [distributed, in-memory cache](distributed-caching.md#sessionstate).</span></span> <span data-ttu-id="9a5e3-154">Najgorszym rozwiązaniem z punktu widzenia wydajności i skalowalności jest użycie dostawcy stanu sesji bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-154">The worst solution from a performance and scalability standpoint is to use a database backed session state provider.</span></span>

<a id="cdn"></a>
## <a name="use-a-cdn-to-cache-static-file-assets"></a><span data-ttu-id="9a5e3-155">Używanie sieci CDN do buforowania statycznych zasobów plików</span><span class="sxs-lookup"><span data-stu-id="9a5e3-155">Use a CDN to cache static file assets</span></span>

<span data-ttu-id="9a5e3-156">Usługa CDN jest akronimem dla Content Delivery Network.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-156">CDN is an acronym for Content Delivery Network.</span></span> <span data-ttu-id="9a5e3-157">Udostępniasz statyczne zasoby plików, takie jak obrazy i pliki skryptów, do dostawcy usługi CDN, a dostawca buforuje te pliki w centrach danych na całym świecie, dzięki czemu wszędzie tam, gdzie użytkownicy uzyskują dostęp do aplikacji, uzyskują stosunkowo szybką odpowiedź i małe opóźnienia w przypadku pamięci podręcznej stanu.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-157">You provide static file assets such as images and script files to a CDN provider, and the provider caches these files in data centers all over the world so that wherever people access your application, they get relatively quick response and low latency for the cached assets.</span></span> <span data-ttu-id="9a5e3-158">Skraca to całkowity czas ładowania lokacji i zmniejsza obciążenie serwerów sieci Web.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-158">This speeds up the overall load time of the site and reduces the load on your web servers.</span></span> <span data-ttu-id="9a5e3-159">Sieci CDN są szczególnie ważne, jeśli docierasz do odbiorców, które są szeroko rozdystrybuowane geograficznie.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-159">CDNs are especially important if you are reaching an audience that is widely distributed geographically.</span></span>

<span data-ttu-id="9a5e3-160">System Windows Azure ma sieć CDN i można używać innych sieci CDN w aplikacji działającej w systemie Windows Azure lub dowolnym środowisku hostingu w sieci Web.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-160">Windows Azure has a CDN, and you can use other CDNs in an application that runs in Windows Azure or any web hosting environment.</span></span>

<a id="async"></a>
## <a name="use-net-45s-async-support-to-avoid-blocking-calls"></a><span data-ttu-id="9a5e3-161">Używaj asynchronicznej obsługi platformy .NET 4.5, aby uniknąć blokowania wywołań</span><span class="sxs-lookup"><span data-stu-id="9a5e3-161">Use .NET 4.5's async support to avoid blocking calls</span></span>

<span data-ttu-id="9a5e3-162">.NET 4,5 udoskonalone C# Języki programowania i VB w celu znacznie prostszej obsługi zadań.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-162">.NET 4.5 enhanced the C# and VB programming languages in order to make it much simpler to handle tasks asynchronously.</span></span> <span data-ttu-id="9a5e3-163">Korzystanie z programowania asynchronicznego nie dotyczy tylko sytuacji przetwarzania równoległego, takich jak w przypadku, gdy chcesz uruchomić jednocześnie wiele wywołań usługi sieci Web.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-163">The benefit of asynchronous programming is not just for parallel processing situations such as when you want to kick off multiple web service calls simultaneously.</span></span> <span data-ttu-id="9a5e3-164">Umożliwia ona również wydajniejsze i niezawodne działanie serwera sieci Web w warunkach dużego obciążenia.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-164">It also enables your web server to perform more efficiently and reliable under high load conditions.</span></span> <span data-ttu-id="9a5e3-165">Serwer sieci Web ma ograniczoną liczbę dostępnych wątków i w warunkach wysokiego obciążenia, gdy wszystkie wątki są używane, żądania przychodzące muszą oczekiwać do momentu zwolnienia wątków.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-165">A web server only has a limited number of threads available, and under high load conditions when all of the threads are in use, incoming requests have to wait until threads are freed up.</span></span> <span data-ttu-id="9a5e3-166">Jeśli kod aplikacji nie obsługuje zadań, takich jak zapytania bazy danych i wywołania usługi sieci Web asynchroniczne, wiele wątków jest niepotrzebnie powiązane, gdy serwer oczekuje na odpowiedź we/wy.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-166">If your application code doesn't handle tasks like database queries and web service calls asynchronously, many threads are unnecessarily tied up while the server is waiting for an I/O response.</span></span> <span data-ttu-id="9a5e3-167">Ogranicza to ilość ruchu, jaki serwer może obsłużyć w warunkach dużego obciążenia.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-167">This limits the amount of traffic the server can handle under high load conditions.</span></span> <span data-ttu-id="9a5e3-168">Dzięki programowaniu asynchronicznym wątki, które oczekują na zwrot danych przez usługę sieci Web lub bazę danych, są zwalniane do obsługi nowych żądań do momentu odebrania danych.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-168">With asynchronous programming, threads that are waiting for a web service or database to return data are freed up to service new requests until the data the is received.</span></span> <span data-ttu-id="9a5e3-169">W przypadku zajętego serwera sieci Web setki lub tysiące żądań można następnie przetwarzać w ten sposób, co w przeciwnym razie będzie oczekiwać na zwolnienie wątków.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-169">In a busy web server, hundreds or thousands of requests can then be processed promptly which would otherwise be waiting for threads to be freed up.</span></span>

<span data-ttu-id="9a5e3-170">Jak już wcześniej się znajdują, można łatwo zmniejszyć liczbę serwerów sieci Web obsługujących witrynę sieci Web w miarę ich zwiększania.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-170">As you saw earlier, it's as easy to decrease the number of web servers handling your web site as it is to increase them.</span></span> <span data-ttu-id="9a5e3-171">Tak więc, jeśli serwer może uzyskać większą przepływność, nie musisz być tyle z nich i możesz obniżyć koszty, ponieważ potrzebujesz mniejszej liczby serwerów dla danego natężenia ruchu sieciowego niż w przeciwnym razie.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-171">So if a server can achieve greater throughput, you don't need as many of them and you can decrease your costs because you need fewer servers for a given traffic volume than you otherwise would.</span></span>

<span data-ttu-id="9a5e3-172">Obsługa asynchronicznego modelu programowania .NET 4,5 jest uwzględniona w ASP.NET 4,5 dla formularzy Web Forms, MVC i Web API; w Entity Framework 6 i w [interfejsie API usługi Windows Azure Storage](https://blogs.msdn.com/b/windowsazurestorage/archive/2013/07/12/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8.aspx).</span><span class="sxs-lookup"><span data-stu-id="9a5e3-172">Support for the .NET 4.5 asynchronous programming model is included in ASP.NET 4.5 for Web Forms, MVC, and Web API; in Entity Framework 6, and in the [Windows Azure Storage API](https://blogs.msdn.com/b/windowsazurestorage/archive/2013/07/12/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8.aspx).</span></span>

### <a name="async-support-in-aspnet-45"></a><span data-ttu-id="9a5e3-173">Obsługa asynchroniczna w ASP.NET 4,5</span><span class="sxs-lookup"><span data-stu-id="9a5e3-173">Async support in ASP.NET 4.5</span></span>

<span data-ttu-id="9a5e3-174">W programie ASP.NET 4,5 zostało dodane wsparcie dla programowania asynchronicznego, które nie jest przeznaczone tylko do języka, ale również do struktur interfejsu API MVC, sieci Web i sieci Web.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-174">In ASP.NET 4.5, support for asynchronous programming has been added not just to the language but also to the MVC, Web Forms, and Web API frameworks.</span></span> <span data-ttu-id="9a5e3-175">Na przykład Metoda akcji kontrolera MVC ASP.NET odbiera dane z żądania sieci Web i przekazuje dane do widoku, który następnie tworzy kod HTML do wysłania do przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-175">For example, an ASP.NET MVC controller action method receives data from a web request and passes the data to a view which then creates the HTML to be sent to the browser.</span></span> <span data-ttu-id="9a5e3-176">Często Metoda działania wymaga pobrania danych z bazy danych lub usługi sieci Web w celu wyświetlenia jej na stronie sieci Web lub zapisania danych wprowadzonych na stronie sieci Web.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-176">Frequently the action method needs to get data from a database or web service in order to display it in a web page or to save data entered in a web page.</span></span> <span data-ttu-id="9a5e3-177">W tych scenariuszach łatwo jest utworzyć metodę akcji asynchronicznie: zamiast zwracać obiekt *ActionResult* , zwracasz *zadanie&lt;ActionResult&gt;* i oznacz metodę za pomocą słowa kluczowego *Async* .</span><span class="sxs-lookup"><span data-stu-id="9a5e3-177">In those scenarios it's easy to make the action method asynchronous: instead of returning an *ActionResult* object, you return *Task&lt;ActionResult&gt;* and mark the method with the *async* keyword.</span></span> <span data-ttu-id="9a5e3-178">Wewnątrz metody, gdy wiersz kodu zaczyna się na operacji, która obejmuje czas oczekiwania, oznacz go za pomocą słowa kluczowego await.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-178">Inside the method, when a line of code kicks off an operation that involves wait time, you mark it with the await keyword.</span></span>

<span data-ttu-id="9a5e3-179">Oto prosta metoda działania, która wywołuje metodę repozytorium dla zapytania bazy danych:</span><span class="sxs-lookup"><span data-stu-id="9a5e3-179">Here is a simple action method that calls a repository method for a database query:</span></span>

[!code-csharp[Main](web-development-best-practices/samples/sample1.cs)]

<span data-ttu-id="9a5e3-180">A oto ta sama metoda, która obsługuje asynchroniczne wywołanie bazy danych:</span><span class="sxs-lookup"><span data-stu-id="9a5e3-180">And here is the same method that handles the database call asynchronously:</span></span>

[!code-csharp[Main](web-development-best-practices/samples/sample2.cs?highlight=1,4)]

<span data-ttu-id="9a5e3-181">W obszarze okładki kompilator generuje odpowiedni kod asynchroniczny.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-181">Under the covers the compiler generates the appropriate asynchronous code.</span></span> <span data-ttu-id="9a5e3-182">Gdy aplikacja wywołuje `FindTaskByIdAsync`, ASP.NET wykonuje żądanie `FindTask`, a następnie cofa wątek roboczy i udostępnia go do przetwarzania innego żądania.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-182">When the application makes the call to `FindTaskByIdAsync`, ASP.NET makes the `FindTask` request and then unwinds the worker thread and makes it available to process another request.</span></span> <span data-ttu-id="9a5e3-183">Po wykonaniu żądania `FindTask` wątek jest uruchamiany ponownie w celu kontynuowania przetwarzania kodu, który jest dostępny po wywołaniu.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-183">When the `FindTask` request is done, a thread is restarted to continue processing the code that comes after that call.</span></span> <span data-ttu-id="9a5e3-184">W okresie przejściowym między zainicjowaniem żądania `FindTask`, gdy dane są zwracane, dostępny jest wątek, który umożliwia wykonywanie użytecznych zadań, które w przeciwnym razie byłyby związane z oczekiwaniem na odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-184">During the interim between when the `FindTask` request is initiated and when the data is returned, you have a thread available to do useful work which otherwise would be tied up waiting for the response.</span></span>

<span data-ttu-id="9a5e3-185">Istnieją pewne koszty związane z kodem asynchronicznym, ale w przypadku warunków o niskim obciążeniu obciążenie jest nieznaczne, a w warunkach dużego obciążenia można przetwarzać żądania, które w przeciwnym razie byłyby w stanie oczekiwać na dostępne wątki.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-185">There is some overhead for asynchronous code, but under low-load conditions, that overhead is negligible, while under high-load conditions you're able to process requests that otherwise would be held up waiting for available threads.</span></span>

<span data-ttu-id="9a5e3-186">Możliwe jest wykonanie tego rodzaju programowania asynchronicznego od ASP.NET 1,1, ale trudno było pisać, podatne na błędy i trudne do debugowania.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-186">It has been possible to do this kind of asynchronous programming since ASP.NET 1.1, but it was difficult to write, error-prone, and difficult to debug.</span></span> <span data-ttu-id="9a5e3-187">Teraz upraszczamy kodowanie dla IT w ASP.NET 4,5, dlatego nie jest to konieczne.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-187">Now that we've simplified the coding for it in ASP.NET 4.5, there's no reason not to do it anymore.</span></span>

### <a name="async-support-in-entity-framework-6"></a><span data-ttu-id="9a5e3-188">Obsługa asynchroniczna w Entity Framework 6</span><span class="sxs-lookup"><span data-stu-id="9a5e3-188">Async support in Entity Framework 6</span></span>

<span data-ttu-id="9a5e3-189">W ramach obsługi asynchronicznej w 4,5 Firma Microsoft otrzymała asynchroniczne wsparcie dla wywołań usługi sieci Web, gniazd i systemu plików we/wy, ale najpopularniejszym wzorcem dla aplikacji sieci Web jest osiągnięcie bazy danych, a nasze biblioteki danych nie obsługują Async.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-189">As part of async support in 4.5 we shipped async support for web service calls, sockets, and file system I/O, but the most common pattern for web applications is to hit a database, and our data libraries didn't support async.</span></span> <span data-ttu-id="9a5e3-190">Teraz Entity Framework 6 dodaje obsługę asynchroniczną dostępu do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-190">Now Entity Framework 6 adds async support for database access.</span></span>

<span data-ttu-id="9a5e3-191">W Entity Framework 6 wszystkie metody, które powodują wysłanie zapytania lub polecenia do bazy danych, mają wersje asynchroniczne.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-191">In Entity Framework 6 all methods that cause a query or command to be sent to the database have async versions.</span></span> <span data-ttu-id="9a5e3-192">W tym przykładzie przedstawiono asynchroniczne wersje metody *Find* .</span><span class="sxs-lookup"><span data-stu-id="9a5e3-192">The example here shows the async version of the *Find* method.</span></span>

[!code-csharp[Main](web-development-best-practices/samples/sample3.cs?highlight=8)]

<span data-ttu-id="9a5e3-193">Ta obsługa asynchronicznych działa nie tylko w przypadku operacji INSERT, usunięć, Update i Simple, ale działa również z kwerendami LINQ:</span><span class="sxs-lookup"><span data-stu-id="9a5e3-193">And this async support works not just for inserts, deletes, updates, and simple finds, it also works with LINQ queries:</span></span>

[!code-csharp[Main](web-development-best-practices/samples/sample4.cs?highlight=7,10)]

<span data-ttu-id="9a5e3-194">Istnieje `Async` wersja metody `ToList`, ponieważ w tym kodzie jest to metoda, która powoduje wysłanie zapytania do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-194">There's an `Async` version of the `ToList` method because in this code that's the method that causes a query to be sent to the database.</span></span> <span data-ttu-id="9a5e3-195">Metody `Where` i `OrderByDescending` konfigurują tylko zapytanie, podczas gdy metoda `ToListAsync` wykonuje zapytanie i zapisuje odpowiedź w zmiennej `result`.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-195">The `Where` and `OrderByDescending` methods only configure the query, while the `ToListAsync` method executes the query and stores the response in the `result` variable.</span></span>

## <a name="summary"></a><span data-ttu-id="9a5e3-196">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="9a5e3-196">Summary</span></span>

<span data-ttu-id="9a5e3-197">Najlepsze rozwiązania związane z programowaniem w sieci Web można zaimplementować w dowolnym miejscu w dowolnym środowisku programowania sieci Web i w każdym ze środowisk chmurowych, ale mamy narzędzia w ASP.NET i platformie Microsoft Azure, które ułatwią jego łatwą obsługę.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-197">You can implement the web development best practices outlined here in any web programming framework and any cloud environment, but we have tools in ASP.NET and Windows Azure to make it easy.</span></span> <span data-ttu-id="9a5e3-198">Jeśli skorzystasz z tych wzorców, możesz łatwo skalować warstwę sieci Web i zminimalizować wydatki, ponieważ każdy serwer będzie mógł obsłużyć więcej ruchu.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-198">If you follow these patterns, you can easily scale out your web tier, and you'll minimize your expenses because each server will be able to handle more traffic.</span></span>

<span data-ttu-id="9a5e3-199">W [następnym rozdziale](single-sign-on.md) przedstawiono sposób, w jaki chmura włącza scenariusze rejestracji jednokrotnej.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-199">The [next chapter](single-sign-on.md) looks at how the cloud enables single sign-on scenarios.</span></span>

## <a name="resources"></a><span data-ttu-id="9a5e3-200">Resources</span><span class="sxs-lookup"><span data-stu-id="9a5e3-200">Resources</span></span>

<span data-ttu-id="9a5e3-201">Aby uzyskać więcej informacji, zobacz następujące zasoby.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-201">For more information see the following resources.</span></span>

<span data-ttu-id="9a5e3-202">Bezstanowe serwery sieci Web:</span><span class="sxs-lookup"><span data-stu-id="9a5e3-202">Stateless web servers:</span></span>

- <span data-ttu-id="9a5e3-203">[Wzorce i praktyki firmy Microsoft — wskazówki dotyczące skalowania](https://msdn.microsoft.com/library/dn589774.aspx)automatycznego.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-203">[Microsoft Patterns and Practices - Autoscaling guidance](https://msdn.microsoft.com/library/dn589774.aspx).</span></span>
- <span data-ttu-id="9a5e3-204">[Wyłączanie koligacji wystąpienia ARR w witrynach sieci Web systemu Windows Azure](https://azure.microsoft.com/blog/2013/11/18/disabling-arrs-instance-affinity-in-windows-azure-web-sites/).</span><span class="sxs-lookup"><span data-stu-id="9a5e3-204">[Disabling ARR's Instance Affinity in Windows Azure Web Sites](https://azure.microsoft.com/blog/2013/11/18/disabling-arrs-instance-affinity-in-windows-azure-web-sites/).</span></span> <span data-ttu-id="9a5e3-205">Wpis w blogu według Ereza Benariego, objaśnia koligację sesji w witrynach sieci Web systemu Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-205">Blog post by Erez Benari, explains session affinity in Windows Azure Web Sites.</span></span>

<span data-ttu-id="9a5e3-206">CDN</span><span class="sxs-lookup"><span data-stu-id="9a5e3-206">CDN:</span></span>

- <span data-ttu-id="9a5e3-207">[Failsafe: kompilowanie skalowalnych, Odpornych Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="9a5e3-207">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="9a5e3-208">Seria wideo dziewięć części przez Ulrich Homann, Marc Mercuri i marking SIMM.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-208">Nine-part video series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="9a5e3-209">Zapoznaj się z dyskusjami w usłudze CDN w epizod 3, rozpoczynając od 1:34:00.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-209">See the CDN discussion in episode 3 starting at 1:34:00.</span></span>
- [<span data-ttu-id="9a5e3-210">Wzorzec hostingu zawartości dla wzorców i praktyk firmy Microsoft</span><span class="sxs-lookup"><span data-stu-id="9a5e3-210">Microsoft Patterns and Practices Static Content Hosting pattern</span></span>](https://msdn.microsoft.com/library/dn589776.aspx)
- <span data-ttu-id="9a5e3-211">[Przeglądy sieci CDN](http://www.cdnreviews.com/).</span><span class="sxs-lookup"><span data-stu-id="9a5e3-211">[CDN Reviews](http://www.cdnreviews.com/).</span></span> <span data-ttu-id="9a5e3-212">Przegląd wielu sieci CDN.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-212">Overview of many CDNs.</span></span>

<span data-ttu-id="9a5e3-213">Programowanie asynchroniczne:</span><span class="sxs-lookup"><span data-stu-id="9a5e3-213">Asynchronous programming:</span></span>

- <span data-ttu-id="9a5e3-214">[Używanie metod asynchronicznych w ASP.NET MVC 4](../../../../mvc/overview/performance/using-asynchronous-methods-in-aspnet-mvc-4.md).</span><span class="sxs-lookup"><span data-stu-id="9a5e3-214">[Using Asynchronous Methods in ASP.NET MVC 4](../../../../mvc/overview/performance/using-asynchronous-methods-in-aspnet-mvc-4.md).</span></span> <span data-ttu-id="9a5e3-215">Samouczek według Rick Anderson.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-215">Tutorial by Rick Anderson.</span></span>
- <span data-ttu-id="9a5e3-216">[Programowanie asynchroniczne z Async i Await (C# i Visual Basic)](https://msdn.microsoft.com/library/vstudio/hh191443.aspx).</span><span class="sxs-lookup"><span data-stu-id="9a5e3-216">[Asynchronous Programming with Async and Await (C# and Visual Basic)](https://msdn.microsoft.com/library/vstudio/hh191443.aspx).</span></span> <span data-ttu-id="9a5e3-217">Oficjalny dokument MSDN, który wyjaśnia uzasadnienie dla programowania asynchronicznego, jak działa w programie ASP.NET 4,5 i jak napisać kod w celu jego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-217">MSDN white paper that explains rationale for asynchronous programming, how it works in ASP.NET 4.5, and how to write code to implement it.</span></span>
- [<span data-ttu-id="9a5e3-218">Entity Framework asynchroniczne zapytanie i Zapisz</span><span class="sxs-lookup"><span data-stu-id="9a5e3-218">Entity Framework Async Query and Save</span></span>](https://msdn.microsoft.com/data/jj819165)
- <span data-ttu-id="9a5e3-219">[Jak kompilować ASP.NET aplikacje sieci Web przy użyciu usługi asynchronicznej](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2013/DEV-B337#fbid=tgkT4SR_DK7).</span><span class="sxs-lookup"><span data-stu-id="9a5e3-219">[How to Build ASP.NET Web Applications Using Async](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2013/DEV-B337#fbid=tgkT4SR_DK7).</span></span> <span data-ttu-id="9a5e3-220">Prezentacja wideo według Rowan Miller.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-220">Video presentation by Rowan Miller.</span></span> <span data-ttu-id="9a5e3-221">Zawiera ilustracja przedstawiająca sposób, w jaki programowanie asynchroniczne może ułatwić znaczący wzrost przepływności serwera sieci Web w warunkach dużego obciążenia.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-221">Includes a graphic demonstration of how asynchronous programming can facilitate dramatic increases in web server throughput under high load conditions.</span></span>
- <span data-ttu-id="9a5e3-222">[Failsafe: kompilowanie skalowalnych, Odpornych Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="9a5e3-222">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="9a5e3-223">Seria wideo dziewięć części przez Ulrich Homann, Marc Mercuri i marking SIMM.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-223">Nine-part video series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="9a5e3-224">Aby poznać dyskusje na temat wpływu programowania asynchronicznego na skalowalność, zobacz część epizod 4 i odcinek 8.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-224">For discussions about the impact of asynchronous programming on scalability, see episode 4 and episode 8.</span></span>
- <span data-ttu-id="9a5e3-225">[Magiczna Metoda używania metod asynchronicznych w ASP.NET 4,5 i ważna Gotcha](http://www.hanselman.com/blog/TheMagicOfUsingAsynchronousMethodsInASPNET45PlusAnImportantGotcha.aspx).</span><span class="sxs-lookup"><span data-stu-id="9a5e3-225">[The Magic of using Asynchronous Methods in ASP.NET 4.5 plus an important gotcha](http://www.hanselman.com/blog/TheMagicOfUsingAsynchronousMethodsInASPNET45PlusAnImportantGotcha.aspx).</span></span> <span data-ttu-id="9a5e3-226">Wpis w blogu przez Scott Hanselman, przede wszystkim o używanie Async w aplikacjach formularzy sieci Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-226">Blog post by Scott Hanselman, primarily about using async in ASP.NET Web Forms applications.</span></span>

<span data-ttu-id="9a5e3-227">Aby uzyskać dodatkowe najlepsze rozwiązania dotyczące programowania w sieci Web, zobacz następujące zasoby:</span><span class="sxs-lookup"><span data-stu-id="9a5e3-227">For additional web development best practices, see the following resources:</span></span>

- <span data-ttu-id="9a5e3-228">[Naprawa przykładowej aplikacji — najlepsze rozwiązania](the-fix-it-sample-application.md#bestpractices).</span><span class="sxs-lookup"><span data-stu-id="9a5e3-228">[The Fix It Sample Application - Best Practices](the-fix-it-sample-application.md#bestpractices).</span></span> <span data-ttu-id="9a5e3-229">Dodatek do tej książki elektronicznej zawiera kilka najlepszych rozwiązań, które zostały zaimplementowane w aplikacji IT.</span><span class="sxs-lookup"><span data-stu-id="9a5e3-229">The appendix to this e-book lists a number of best practices that were implemented in the Fix It application.</span></span>
- [<span data-ttu-id="9a5e3-230">Lista kontrolna dewelopera sieci Web</span><span class="sxs-lookup"><span data-stu-id="9a5e3-230">Web Developer Checklist</span></span>](http://webdevchecklist.com/asp.net)

> [!div class="step-by-step"]
> <span data-ttu-id="9a5e3-231">[Poprzednie](continuous-integration-and-continuous-delivery.md)
> [dalej](single-sign-on.md)</span><span class="sxs-lookup"><span data-stu-id="9a5e3-231">[Previous](continuous-integration-and-continuous-delivery.md)
[Next](single-sign-on.md)</span></span>

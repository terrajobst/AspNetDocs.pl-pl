---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/queue-centric-work-pattern
title: Wzorzec pracy skoncentrowanej na kolejkach (Tworzenie aplikacji w chmurze w rzeczywistych warunkach na platformie Azure) | Microsoft Docs
author: MikeWasson
description: Tworzenie aplikacji w chmurze w świecie rzeczywistym za pomocą książki elektronicznej platformy Azure jest oparte na prezentacji opracowanej przez Scott Guthrie. Wyjaśniono 13 wzorców i praktyk, które mogą...
ms.author: riande
ms.date: 06/12/2014
ms.assetid: cc1ad51b-40c3-4c68-8620-9aaa0fd1f6cf
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/queue-centric-work-pattern
msc.type: authoredcontent
ms.openlocfilehash: c73b070f11366e781bcea70ffc84fd49a47d469a
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/28/2019
ms.locfileid: "74582765"
---
# <a name="queue-centric-work-pattern-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="07894-104">Wzorzec pracy skoncentrowanej na kolejkach (Tworzenie aplikacji w chmurze w rzeczywistych warunkach na platformie Azure)</span><span class="sxs-lookup"><span data-stu-id="07894-104">Queue-Centric Work Pattern (Building Real-World Cloud Apps with Azure)</span></span>

<span data-ttu-id="07894-105">przez [Jan Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tomasz Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="07894-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="07894-106">[Pobierz poprawkę](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) lub [Pobierz książkę elektroniczną](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="07894-106">[Download Fix It Project](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="07894-107">**Tworzenie aplikacji w chmurze w świecie rzeczywistym za pomocą książki elektronicznej platformy Azure** jest oparte na prezentacji opracowanej przez Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="07894-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="07894-108">Wyjaśniono 13 wzorców i praktyk, które mogą pomóc w pomyślnym tworzeniu aplikacji sieci Web dla chmury.</span><span class="sxs-lookup"><span data-stu-id="07894-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="07894-109">Aby uzyskać informacje na temat książki elektronicznej, zobacz [pierwszy rozdział](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="07894-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>

<span data-ttu-id="07894-110">Wcześniej dodaliśmy, że korzystanie z wielu usług może skutkować umową SLA "złożona", w której obowiązująca umowa SLA aplikacji jest *produktem* poszczególnych umowy SLA.</span><span class="sxs-lookup"><span data-stu-id="07894-110">Earlier, we saw that using multiple services can result in a "composite" SLA, where the app's effective SLA is the *product* of the individual SLAs.</span></span> <span data-ttu-id="07894-111">Na przykład aplikacja do rozwiązywania problemów używa witryn sieci Web, magazynu i SQL Database.</span><span class="sxs-lookup"><span data-stu-id="07894-111">For example, the Fix It app uses Web Sites, Storage, and SQL Database.</span></span> <span data-ttu-id="07894-112">Jeśli jakakolwiek z tych usług ulegnie awarii, aplikacja zwróci błąd do użytkownika.</span><span class="sxs-lookup"><span data-stu-id="07894-112">If any one of these services fails, the app will return an error to the user.</span></span>

<span data-ttu-id="07894-113">Buforowanie jest dobrym sposobem obsługi błędów przejściowych dla zawartości tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="07894-113">Caching is a good way to handle transient failures for read-only content.</span></span> <span data-ttu-id="07894-114">Ale co zrobić, jeśli aplikacja wymaga wykonania pracy?</span><span class="sxs-lookup"><span data-stu-id="07894-114">But what if your application needs to do work?</span></span> <span data-ttu-id="07894-115">Na przykład gdy użytkownik prześle nowe zadanie poprawki IT, aplikacja nie może po prostu umieścić zadania w pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="07894-115">For example, when the user submits a new Fix It task, the app can't just put the task into the cache.</span></span> <span data-ttu-id="07894-116">Aplikacja musi napisać to zadanie Fix it do trwałego magazynu danych, aby można było je przetworzyć.</span><span class="sxs-lookup"><span data-stu-id="07894-116">The app needs to write the Fix It task into a persistent data store, so it can be processed.</span></span>

<span data-ttu-id="07894-117">Jest to miejsce, w którym znajduje się wzorzec pracy skoncentrowanej na kolejce.</span><span class="sxs-lookup"><span data-stu-id="07894-117">That's where the queue-centric work pattern comes in.</span></span> <span data-ttu-id="07894-118">Ten wzorzec umożliwia swobodne sprzęganie między warstwą sieci Web i usługą zaplecza.</span><span class="sxs-lookup"><span data-stu-id="07894-118">This pattern enables loose coupling between a web tier and a backend service.</span></span>

<span data-ttu-id="07894-119">Oto jak działa wzorzec.</span><span class="sxs-lookup"><span data-stu-id="07894-119">Here's how the pattern works.</span></span> <span data-ttu-id="07894-120">Gdy aplikacja uzyskuje żądanie, umieszcza element roboczy w kolejce i natychmiast zwraca odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="07894-120">When the application gets a request, it puts a work item onto a queue and immediately returns the response.</span></span> <span data-ttu-id="07894-121">Następnie oddzielny proces zaplecza Pobiera elementy robocze z kolejki i wykonuje prace.</span><span class="sxs-lookup"><span data-stu-id="07894-121">Then a separate backend process pulls work items from the queue and does the work.</span></span>

<span data-ttu-id="07894-122">Wzorzec pracy skoncentrowanej na kolejce jest przydatny dla:</span><span class="sxs-lookup"><span data-stu-id="07894-122">The queue-centric work pattern is useful for:</span></span>

- <span data-ttu-id="07894-123">Pracy, która jest czasochłonna (duże opóźnienie).</span><span class="sxs-lookup"><span data-stu-id="07894-123">Work that is time consuming (high latency).</span></span>
- <span data-ttu-id="07894-124">Działanie, które wymaga usługi zewnętrznej, która może być niezawsze dostępna.</span><span class="sxs-lookup"><span data-stu-id="07894-124">Work that requires an external service that might not always be available.</span></span>
- <span data-ttu-id="07894-125">Pracuj intensywnie korzystające z zasobów (High CPU).</span><span class="sxs-lookup"><span data-stu-id="07894-125">Work that is resource-intensive (high CPU).</span></span>
- <span data-ttu-id="07894-126">Działa, które byłyby korzystne w przypadku bilansowania (z uwzględnieniem nagłych obciążeń obciążenia).</span><span class="sxs-lookup"><span data-stu-id="07894-126">Work that would benefit from rate leveling (subject to sudden load bursts).</span></span>

## <a name="reduced-latency"></a><span data-ttu-id="07894-127">Ograniczone opóźnienie</span><span class="sxs-lookup"><span data-stu-id="07894-127">Reduced Latency</span></span>

<span data-ttu-id="07894-128">Kolejki są przydatne podczas czasochłonnych zadań.</span><span class="sxs-lookup"><span data-stu-id="07894-128">Queues are useful any time you are doing time-consuming work.</span></span> <span data-ttu-id="07894-129">Jeśli zadanie trwa kilka sekund lub dłużej, zamiast blokować użytkownika końcowego, umieść element roboczy w kolejce.</span><span class="sxs-lookup"><span data-stu-id="07894-129">If a task takes a few seconds or longer, instead of blocking the end user, put the work item into a queue.</span></span> <span data-ttu-id="07894-130">Poinformuj użytkownika o tym, że pracujemy nad nim, a następnie przetwórz zadanie w tle za pomocą odbiornika kolejki.</span><span class="sxs-lookup"><span data-stu-id="07894-130">Tell the user "We're working on it," and then use a queue listener to process the task in the background.</span></span>

<span data-ttu-id="07894-131">Jeśli na przykład kupisz coś w sprzedaży detalicznej, witryna sieci Web natychmiast potwierdzi zamówienie.</span><span class="sxs-lookup"><span data-stu-id="07894-131">For example, when you purchase something at an online retailer, the web site confirms your order immediately.</span></span> <span data-ttu-id="07894-132">Ale nie oznacza to, że Twoje rzeczy są już w trakcie dostarczania samochodów.</span><span class="sxs-lookup"><span data-stu-id="07894-132">But that doesn't mean your stuff is already in a truck being delivered.</span></span> <span data-ttu-id="07894-133">Umieszczają zadania w kolejce, a w tle przeprowadzają kontrolę kredytową, przygotowując elementy do wysyłki i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="07894-133">They put a task in a queue, and in the background they are doing the credit check, preparing your items for shipping, and so forth.</span></span>

<span data-ttu-id="07894-134">W przypadku scenariuszy z krótkim opóźnieniem całkowity czas od końca do końca może już być używany w kolejce w porównaniu z wykonywaniem zadania synchronicznie.</span><span class="sxs-lookup"><span data-stu-id="07894-134">For scenarios with short latency, the total end-to-end time might be longer using a queue, compared with doing the task synchronously.</span></span> <span data-ttu-id="07894-135">Jednak nawet inne korzyści mogą przeważyć tę wadą.</span><span class="sxs-lookup"><span data-stu-id="07894-135">But even then, the other benefits can outweigh that disadvantage.</span></span>

## <a name="increased-reliability"></a><span data-ttu-id="07894-136">Zwiększona niezawodność</span><span class="sxs-lookup"><span data-stu-id="07894-136">Increased Reliability</span></span>

<span data-ttu-id="07894-137">W wersji poprawki, która została już przeszukana, fronton sieci Web jest ściśle połączony z zaplecem SQL Database.</span><span class="sxs-lookup"><span data-stu-id="07894-137">In the version of Fix It that we've been looking at so far, the web front-end is tightly coupled with the SQL Database back-end.</span></span> <span data-ttu-id="07894-138">Jeśli usługa SQL Database jest niedostępna, użytkownik otrzymuje błąd.</span><span class="sxs-lookup"><span data-stu-id="07894-138">If the SQL database service is unavailable, the user gets an error.</span></span> <span data-ttu-id="07894-139">Jeśli ponawianie próby nie zadziała (oznacza to, że awaria jest większa niż przejściowa), jedyną czynnością, którą można zrobić, jest wyświetlenie błędu i poproszenie użytkownika o próbę ponowienie próby później.</span><span class="sxs-lookup"><span data-stu-id="07894-139">If retries don't work (that is, the failure is more than transient), the only thing you can do is show an error and ask the user to try again later.</span></span>

![Diagram przedstawiający niepowodzenie frontonu sieci Web w przypadku niepowodzenia SQL Database zaplecza](queue-centric-work-pattern/_static/image1.png)

<span data-ttu-id="07894-141">Przy użyciu kolejek, gdy użytkownik przesyła zadanie poprawki IT, aplikacja zapisuje komunikat do kolejki.</span><span class="sxs-lookup"><span data-stu-id="07894-141">Using queues, when a user submits a Fix It task, the app writes a message to the queue.</span></span> <span data-ttu-id="07894-142">Ładunek wiadomości jest reprezentacją [JSON](http://json.org/) zadania.</span><span class="sxs-lookup"><span data-stu-id="07894-142">The message payload is a [JSON](http://json.org/) representation of the task.</span></span> <span data-ttu-id="07894-143">Natychmiast po zapisaniu komunikatu w kolejce aplikacja zwraca i natychmiast wyświetla komunikat o powodzeniu dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="07894-143">As soon as the message is written to the queue, the app returns and immediately shows a success message to the user.</span></span>

<span data-ttu-id="07894-144">Jeśli którykolwiek z usług zaplecza, takich jak baza danych SQL lub odbiornik kolejki — przejdź do trybu offline, użytkownicy nadal będą mogli przesłać nowe zadania poprawki.</span><span class="sxs-lookup"><span data-stu-id="07894-144">If any of the backend services – such as the SQL database or the queue listener -- go offline, users can still submit new Fix It tasks.</span></span> <span data-ttu-id="07894-145">Komunikaty będą po prostu umieszczane w kolejce do momentu ponownego udostępnienia usług zaplecza.</span><span class="sxs-lookup"><span data-stu-id="07894-145">The messages will just queue up until the backend services are available again.</span></span> <span data-ttu-id="07894-146">W tym momencie usługi zaplecza będą przechwycić w zaległości.</span><span class="sxs-lookup"><span data-stu-id="07894-146">At that point, the backend services will catch up on the backlog.</span></span>

![Diagram przedstawiający funkcję frontonu internetowego kontynuuje działanie w przypadku wystąpienia błędu SQL Database](queue-centric-work-pattern/_static/image2.png)

<span data-ttu-id="07894-148">Ponadto teraz można dodać więcej logiki zaplecza bez konieczności odporności frontonu.</span><span class="sxs-lookup"><span data-stu-id="07894-148">Moreover, now you can add more backend logic without worrying about the resiliency of the front end.</span></span> <span data-ttu-id="07894-149">Na przykład możesz chcieć wysłać wiadomość e-mail lub wiadomości SMS do właściciela po każdym przypisaniu nowej poprawki.</span><span class="sxs-lookup"><span data-stu-id="07894-149">For example, you might want to send an email or SMS message to the owner whenever a new Fix It is assigned.</span></span> <span data-ttu-id="07894-150">Jeśli poczta e-mail lub usługa programu SMS stanie się niedostępna, możesz przetwarzać wszystko inne, a następnie umieścić komunikat w osobnej kolejce do wysyłania wiadomości e-mail/SMS.</span><span class="sxs-lookup"><span data-stu-id="07894-150">If the email or SMS service becomes unavailable, you can process everything else, and then put a message into a separate queue for sending email/SMS messages.</span></span>

<span data-ttu-id="07894-151">Wcześniej nasza obowiązująca umowa SLA była Web Apps &times; magazynu &times; SQL Database = 99,7%.</span><span class="sxs-lookup"><span data-stu-id="07894-151">Previously, our effective SLA was Web Apps &times; Storage &times; SQL Database = 99.7%.</span></span> <span data-ttu-id="07894-152">(Zobacz [projekt, aby przetrwać awarie](design-to-survive-failures.md)).</span><span class="sxs-lookup"><span data-stu-id="07894-152">(See [Design to Survive Failures](design-to-survive-failures.md).)</span></span>

<span data-ttu-id="07894-153">Gdy zmienimy aplikację w taki sposób, aby korzystała z kolejki, fronton sieci Web będzie zależny od Web Apps i magazynu dla złożonej umowy SLA 99,8%.</span><span class="sxs-lookup"><span data-stu-id="07894-153">When we change the app to use a queue, the web front end depends only on Web Apps and Storage, for a composite SLA of 99.8%.</span></span> <span data-ttu-id="07894-154">(Należy zauważyć, że kolejki są częścią usługi Azure Storage, dlatego są uwzględnione w tej samej umowie SLA co magazyn obiektów BLOB).</span><span class="sxs-lookup"><span data-stu-id="07894-154">(Note that queues are part of the Azure storage service, so they are included in the same SLA as blob storage.)</span></span>

<span data-ttu-id="07894-155">Jeśli potrzebujesz jeszcze lepszego niż 99,8%, możesz utworzyć dwie kolejki w dwóch różnych regionach.</span><span class="sxs-lookup"><span data-stu-id="07894-155">If you need even better than 99.8%, you can create two queues in two different regions.</span></span> <span data-ttu-id="07894-156">Wyznacz jeden jako podstawowy, a drugi jako pomocniczy.</span><span class="sxs-lookup"><span data-stu-id="07894-156">Designate one as the primary, and the other as the secondary.</span></span> <span data-ttu-id="07894-157">Jeśli kolejka główna jest niedostępna w aplikacji, przełącz się do kolejki pomocniczej.</span><span class="sxs-lookup"><span data-stu-id="07894-157">In your app, fail over to the secondary queue if the primary queue is not available.</span></span> <span data-ttu-id="07894-158">Prawdopodobieństwo, że oba są niedostępne w tym samym czasie, jest bardzo mały.</span><span class="sxs-lookup"><span data-stu-id="07894-158">The chance of both being unavailable at the same time is very small.</span></span>

## <a name="rate-leveling-and-independent-scaling"></a><span data-ttu-id="07894-159">Skalowanie na poziomie i niezależność</span><span class="sxs-lookup"><span data-stu-id="07894-159">Rate Leveling and Independent Scaling</span></span>

<span data-ttu-id="07894-160">Kolejki są również przydatne w przypadku czegoś *o nazwie lub* *wyrównywania obciążeń*.</span><span class="sxs-lookup"><span data-stu-id="07894-160">Queues are also useful for something called *rate leveling* or *load leveling*.</span></span>

<span data-ttu-id="07894-161">Aplikacje sieci Web są często podatne na nagłe rozerwania ruchu.</span><span class="sxs-lookup"><span data-stu-id="07894-161">Web apps are often susceptible to sudden bursts in traffic.</span></span> <span data-ttu-id="07894-162">Funkcja automatycznego skalowania umożliwia automatyczne dodawanie serwerów sieci Web w celu obsługi zwiększonego ruchu w sieci Web, jednak skalowanie automatyczna może nie być w stanie szybko reagować w celu obsługi nieoczekiwanych obciążeń.</span><span class="sxs-lookup"><span data-stu-id="07894-162">While you can use autoscaling to automatically add web servers to handle increased web traffic, autoscaling might not be able to react quickly enough to handle abrupt spikes in load.</span></span> <span data-ttu-id="07894-163">Jeśli serwery sieci Web mogą odciążać część pracy, którą trzeba wykonać, pisząc komunikat do kolejki, może obsłużyć więcej ruchu.</span><span class="sxs-lookup"><span data-stu-id="07894-163">If the web servers can offload some of the work they have to do by writing a message to a queue, they can handle more traffic.</span></span> <span data-ttu-id="07894-164">Usługa zaplecza może następnie odczytywać komunikaty z kolejki i przetwarzać je.</span><span class="sxs-lookup"><span data-stu-id="07894-164">A backend service can then read messages from the queue and process them.</span></span> <span data-ttu-id="07894-165">Głębokość kolejki zostanie powiększana lub zmniejszana, gdy obciążenie przychodzące będzie się różnić.</span><span class="sxs-lookup"><span data-stu-id="07894-165">The depth of the queue will grow or shrink as the incoming load varies.</span></span>

<span data-ttu-id="07894-166">W przypadku wielu czasochłonnych zadań załadowanych do usługi zaplecza warstwa sieci Web może łatwiej reagować na nagłe skoki ruchu.</span><span class="sxs-lookup"><span data-stu-id="07894-166">With much of its time-consuming work off-loaded to a backend service, the web tier can more easily respond to sudden spikes in traffic.</span></span> <span data-ttu-id="07894-167">Można zaoszczędzić pieniądze, ponieważ każdy ruch może być obsługiwany przez mniejszą liczbę serwerów sieci Web.</span><span class="sxs-lookup"><span data-stu-id="07894-167">And you save money because any given amount of traffic can be handled by fewer web servers.</span></span>

<span data-ttu-id="07894-168">Warstwę sieci Web i usługę zaplecza można skalować niezależnie.</span><span class="sxs-lookup"><span data-stu-id="07894-168">You can scale the web tier and backend service independently.</span></span> <span data-ttu-id="07894-169">Na przykład mogą być potrzebne trzy serwery sieci Web, ale tylko jeden komunikat kolejki przetwarzania serwera.</span><span class="sxs-lookup"><span data-stu-id="07894-169">For example, you might need three web servers but only one server processing queue messages.</span></span> <span data-ttu-id="07894-170">Lub jeśli uruchamiasz zadanie intensywnie korzystające z obliczeń w tle, może być konieczne zwiększenie liczby serwerów zaplecza.</span><span class="sxs-lookup"><span data-stu-id="07894-170">Or if you're running a compute-intensive task in the background, you might need more backend servers.</span></span>

![](queue-centric-work-pattern/_static/image3.png)

<span data-ttu-id="07894-171">Skalowanie automatyczne współpracuje z usługami zaplecza oraz z warstwą sieci Web.</span><span class="sxs-lookup"><span data-stu-id="07894-171">Autoscaling works with backend services as well as with the web tier.</span></span> <span data-ttu-id="07894-172">Można skalować w górę lub w dół liczbę maszyn wirtualnych, które przetwarzają zadania w kolejce, w oparciu o użycie procesora na maszynach wirtualnych zaplecza.</span><span class="sxs-lookup"><span data-stu-id="07894-172">You can scale up or scale down the number of VMs that are processing the tasks in the queue, based on the CPU usage of the backend VMs.</span></span> <span data-ttu-id="07894-173">Możesz też automatycznie skalować w zależności od liczby elementów znajdujących się w kolejce.</span><span class="sxs-lookup"><span data-stu-id="07894-173">Or, you can autoscale based on how many items are in a queue.</span></span> <span data-ttu-id="07894-174">Na przykład możesz powiedzieć automatyczne skalowanie, aby nie przechowywać więcej niż 10 elementów w kolejce.</span><span class="sxs-lookup"><span data-stu-id="07894-174">For example, you can tell autoscale to try to keep no more than 10 items in the queue.</span></span> <span data-ttu-id="07894-175">Jeśli kolejka ma więcej niż 10 elementów, automatyczne skalowanie doda maszyny wirtualne.</span><span class="sxs-lookup"><span data-stu-id="07894-175">If the queue has more than 10 items, autoscale will add VMs.</span></span> <span data-ttu-id="07894-176">Po przechwyceniu automatyczne skalowanie spowoduje rozbicie dodatkowych maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="07894-176">When they catch up, autoscale will tear down the extra VMs.</span></span>

## <a name="adding-queues-to-the-fix-it-application"></a><span data-ttu-id="07894-177">Dodawanie kolejek do aplikacji poprawki IT</span><span class="sxs-lookup"><span data-stu-id="07894-177">Adding Queues to the Fix It Application</span></span>

<span data-ttu-id="07894-178">Aby zaimplementować wzorzec kolejki, musimy wprowadzić dwie zmiany w aplikacji poprawki IT.</span><span class="sxs-lookup"><span data-stu-id="07894-178">To implement the queue pattern, we need to make two changes to the Fix It app.</span></span>

- <span data-ttu-id="07894-179">Gdy użytkownik przesyła nowe zadanie poprawki IT, należy umieścić zadanie w kolejce, zamiast zapisywać je w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="07894-179">When a user submits a new Fix It task, put the task in the queue, instead of writing it to the database.</span></span>
- <span data-ttu-id="07894-180">Utwórz usługę zaplecza, która przetwarza wiadomości w kolejce.</span><span class="sxs-lookup"><span data-stu-id="07894-180">Create a back-end service that processes messages in the queue.</span></span>

<span data-ttu-id="07894-181">W przypadku kolejki będziemy używać [usługi Azure queue storage](https://www.windowsazure.com/develop/net/how-to-guides/queue-service/).</span><span class="sxs-lookup"><span data-stu-id="07894-181">For the queue, we'll use the [Azure Queue Storage Service](https://www.windowsazure.com/develop/net/how-to-guides/queue-service/).</span></span> <span data-ttu-id="07894-182">Innym rozwiązaniem jest użycie [Azure Service Bus](https://docs.microsoft.com/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="07894-182">Another option is to use [Azure Service Bus](https://docs.microsoft.com/azure/service-bus/).</span></span>

<span data-ttu-id="07894-183">Aby określić, która usługa kolejki ma być używana, należy wziąć pod uwagę, w jaki sposób aplikacja musi wysyłać i odbierać komunikaty w kolejce:</span><span class="sxs-lookup"><span data-stu-id="07894-183">To decide which queue service to use, consider how your app needs to send and receive the messages in the queue:</span></span>

- <span data-ttu-id="07894-184">Jeśli masz producentów współpracujących i konkurujących klientów, rozważ użycie usługi Azure Queue Storage.</span><span class="sxs-lookup"><span data-stu-id="07894-184">If you have cooperating producers and competing consumers, consider using Azure Queue Storage Service.</span></span> <span data-ttu-id="07894-185">"Producenci współpracująci" to wiele procesów, które dodają komunikaty do kolejki.</span><span class="sxs-lookup"><span data-stu-id="07894-185">"Cooperating producers" means multiple processes are adding messages to a queue.</span></span> <span data-ttu-id="07894-186">"Konkurujący konsumenci" to wiele procesów ściągających komunikaty z kolejki w celu ich przetworzenia, ale każdy komunikat może być przetwarzany tylko przez jeden "konsument".</span><span class="sxs-lookup"><span data-stu-id="07894-186">"Competing consumers" means multiple processes are pulling messages off the queue to process them, but any given message can only be processed by one "consumer."</span></span> <span data-ttu-id="07894-187">Jeśli potrzebujesz większej przepływności niż możesz uzyskać dostęp do jednej kolejki, użyj dodatkowych kolejek i/lub dodatkowych kont magazynu.</span><span class="sxs-lookup"><span data-stu-id="07894-187">If you need more throughput than you can get with a single queue, use additional queues and/or additional storage accounts.</span></span>
- <span data-ttu-id="07894-188">Jeśli potrzebujesz [modelu publikowania/subskrybowania](http://en.wikipedia.org/wiki/Publish/subscribe), rozważ użycie kolejek Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="07894-188">If you need a [publish/subscribe model](http://en.wikipedia.org/wiki/Publish/subscribe), consider using Azure Service Bus Queues.</span></span>

<span data-ttu-id="07894-189">Poprawka aplikacji IT pasuje do współpracujących producentów i modelu konkurujących odbiorców.</span><span class="sxs-lookup"><span data-stu-id="07894-189">The Fix It app fits the cooperating producers and competing consumers model.</span></span>

<span data-ttu-id="07894-190">Inną kwestią jest dostępność aplikacji.</span><span class="sxs-lookup"><span data-stu-id="07894-190">Another consideration is application availability.</span></span> <span data-ttu-id="07894-191">Usługa Queue Storage jest częścią tej samej usługi, która jest używana w usłudze BLOB Storage, dzięki czemu nie ma wpływu na naszą umowę SLA.</span><span class="sxs-lookup"><span data-stu-id="07894-191">The Queue Storage Service is part of the same service that we're using for blob storage, so using it has no effect on our SLA.</span></span> <span data-ttu-id="07894-192">Azure Service Bus jest oddzielną usługą z własną umową SLA.</span><span class="sxs-lookup"><span data-stu-id="07894-192">Azure Service Bus is a separate service with its own SLA.</span></span> <span data-ttu-id="07894-193">Jeśli korzystamy z kolejek Service Bus, będziemy musieli wziąć udział w dodatkowej umowie SLA, a nasza umowa SLA będzie niższa.</span><span class="sxs-lookup"><span data-stu-id="07894-193">If we used Service Bus Queues, we would have to factor in an additional SLA percentage, and our composite SLA would be lower.</span></span> <span data-ttu-id="07894-194">Po wybraniu usługi kolejek upewnij się, że rozumiesz wpływ wyboru na dostępność aplikacji.</span><span class="sxs-lookup"><span data-stu-id="07894-194">When you're choosing a queue service, make sure you understand the impact of your choice on application availability.</span></span> <span data-ttu-id="07894-195">Aby uzyskać więcej informacji, zobacz sekcję [resources](#resources) .</span><span class="sxs-lookup"><span data-stu-id="07894-195">For more information, see the [Resources](#resources) section.</span></span>

## <a name="creating-queue-messages"></a><span data-ttu-id="07894-196">Tworzenie komunikatów w kolejce</span><span class="sxs-lookup"><span data-stu-id="07894-196">Creating Queue Messages</span></span>

<span data-ttu-id="07894-197">Aby można było wykonać zadanie poprawki IT w kolejce, fronton sieci Web wykonuje następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="07894-197">To put a Fix It task on the queue, the web front end performs the following steps:</span></span>

1. <span data-ttu-id="07894-198">Utwórz wystąpienie [CloudQueueClient](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueueclient.aspx) .</span><span class="sxs-lookup"><span data-stu-id="07894-198">Create a [CloudQueueClient](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueueclient.aspx) instance.</span></span> <span data-ttu-id="07894-199">Wystąpienie `CloudQueueClient` jest używane do wykonywania żądań względem usługi kolejki.</span><span class="sxs-lookup"><span data-stu-id="07894-199">The `CloudQueueClient` instance is used to execute requests against the Queue Service.</span></span>
2. <span data-ttu-id="07894-200">Utwórz kolejkę, jeśli jeszcze nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="07894-200">Create the queue, if it doesn't exist yet.</span></span>
3. <span data-ttu-id="07894-201">Serializacja zadania Fix it.</span><span class="sxs-lookup"><span data-stu-id="07894-201">Serialize the Fix It task.</span></span>
4. <span data-ttu-id="07894-202">Wywołaj [CloudQueue. AddMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.addmessageasync.aspx) , aby umieścić komunikat w kolejce.</span><span class="sxs-lookup"><span data-stu-id="07894-202">Call [CloudQueue.AddMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.addmessageasync.aspx) to put the message onto the queue.</span></span>

<span data-ttu-id="07894-203">Wykonamy tę prace w konstruktorze i `SendMessageAsync` metodzie nowej klasy `FixItQueueManager`.</span><span class="sxs-lookup"><span data-stu-id="07894-203">We'll do this work in the constructor and `SendMessageAsync` method of a new `FixItQueueManager` class.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample1.cs?highlight=11-12,16,18-25)]

<span data-ttu-id="07894-204">W tym miejscu korzystamy z biblioteki [JSON.NET](https://github.com/JamesNK/Newtonsoft.Json) do serializacji fixit do formatu JSON.</span><span class="sxs-lookup"><span data-stu-id="07894-204">Here we are using the [Json.NET](https://github.com/JamesNK/Newtonsoft.Json) library to serialize the fixit to JSON format.</span></span> <span data-ttu-id="07894-205">Możesz użyć dowolnego preferowanego podejścia serializacji.</span><span class="sxs-lookup"><span data-stu-id="07894-205">You can use whatever serialization approach you prefer.</span></span> <span data-ttu-id="07894-206">Usługa JSON ma zalety odczytywania danych przez człowieka, ale jest mniej pełnych niż język XML.</span><span class="sxs-lookup"><span data-stu-id="07894-206">JSON has the advantage of being human-readable, while being less verbose than XML.</span></span>

<span data-ttu-id="07894-207">Kod jakości produkcji mógłby dodać logikę obsługi błędów, wstrzymać, jeśli baza danych stanie się niedostępna, obsłużyć odzyskiwanie bardziej czyste, utworzyć kolejkę przy uruchamianiu aplikacji i zarządzać[komunikatami "trujące"](https://msdn.microsoft.com/library/ms789028(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="07894-207">Production-quality code would add error handling logic, pause if the database became unavailable, handle recovery more cleanly, create the queue on application start-up, and manage "[poison" messages](https://msdn.microsoft.com/library/ms789028(v=vs.110).aspx).</span></span> <span data-ttu-id="07894-208">(Trująca wiadomość jest komunikatem, którego nie można przetworzyć z jakiegoś powodu.</span><span class="sxs-lookup"><span data-stu-id="07894-208">(A poison message is a message that cannot be processed for some reason.</span></span> <span data-ttu-id="07894-209">Nie chcesz, aby trujące komunikaty były umieszczane w kolejce, w której rola proces roboczy będzie stale próbować je przetworzyć, Niepowodzenie, spróbuj ponownie, zakończył się niepowodzeniem itd.)</span><span class="sxs-lookup"><span data-stu-id="07894-209">You don't want poison messages to sit in the queue, where the worker role will continually try to process them, fail, try again, fail, and so on.)</span></span>

<span data-ttu-id="07894-210">W aplikacji MVC frontonu musimy zaktualizować kod, który tworzy nowe zadanie.</span><span class="sxs-lookup"><span data-stu-id="07894-210">In the front-end MVC application, we need to update the code that creates a new task.</span></span> <span data-ttu-id="07894-211">Zamiast przełączać zadanie do repozytorium, wywołaj metodę `SendMessageAsync` pokazaną powyżej.</span><span class="sxs-lookup"><span data-stu-id="07894-211">Instead of putting the task into the repository, call the `SendMessageAsync` method shown above.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample2.cs?highlight=10)]

## <a name="processing-queue-messages"></a><span data-ttu-id="07894-212">Przetwarzanie komunikatów w kolejce</span><span class="sxs-lookup"><span data-stu-id="07894-212">Processing Queue Messages</span></span>

<span data-ttu-id="07894-213">Aby przetwarzać komunikaty w kolejce, utworzymy usługę zaplecza.</span><span class="sxs-lookup"><span data-stu-id="07894-213">To process messages in the queue, we'll create a backend service.</span></span> <span data-ttu-id="07894-214">Usługa zaplecza uruchomi nieskończoną pętlę, która wykonuje następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="07894-214">The backend service will run an infinite loop that performs the following steps:</span></span>

1. <span data-ttu-id="07894-215">Pobierz następną wiadomość z kolejki.</span><span class="sxs-lookup"><span data-stu-id="07894-215">Get the next message from the queue.</span></span>
2. <span data-ttu-id="07894-216">Deserializacja komunikatu do zadania poprawki IT.</span><span class="sxs-lookup"><span data-stu-id="07894-216">Deserialize the message to a Fix It task.</span></span>
3. <span data-ttu-id="07894-217">Napisz zadanie Fix it do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="07894-217">Write the Fix It task to the database.</span></span>

<span data-ttu-id="07894-218">Aby hostować usługę zaplecza, utworzymy usługę w chmurze platformy Azure, która zawiera *rolę procesu roboczego*.</span><span class="sxs-lookup"><span data-stu-id="07894-218">To host the backend service, we'll create an Azure Cloud Service that contains a *worker role*.</span></span> <span data-ttu-id="07894-219">Rola procesu roboczego składa się z co najmniej jednej maszyny wirtualnej, która może przeprowadzić przetwarzanie zaplecza.</span><span class="sxs-lookup"><span data-stu-id="07894-219">A worker role consists of one or more VMs that can do backend processing.</span></span> <span data-ttu-id="07894-220">Kod, który jest uruchamiany w tych maszynach wirtualnych, będzie ściągał komunikaty z kolejki, gdy staną się dostępne.</span><span class="sxs-lookup"><span data-stu-id="07894-220">The code that runs in these VMs will pull messages from the queue as they become available.</span></span> <span data-ttu-id="07894-221">Dla każdego komunikatu będziemy deserializować ładunek JSON i napisać wystąpienie obiektu Fix it do bazy danych przy użyciu tego samego repozytorium, które zostało użyte wcześniej w warstwie sieci Web.</span><span class="sxs-lookup"><span data-stu-id="07894-221">For each message, we'll deserialize the JSON payload and write an instance of the Fix It Task entity to the database, using the same repository that we used earlier in the web tier.</span></span>

<span data-ttu-id="07894-222">Poniższe kroki pokazują, jak dodać projekt roli procesu roboczego do rozwiązania, które ma standardowy projekt sieci Web.</span><span class="sxs-lookup"><span data-stu-id="07894-222">The following steps show how to add a worker role project to a solution that has a standard web project.</span></span> <span data-ttu-id="07894-223">Te kroki zostały już wykonane w projekcie poprawki IT, który można pobrać.</span><span class="sxs-lookup"><span data-stu-id="07894-223">These steps have already been done in the Fix It project that you can download.</span></span>

<span data-ttu-id="07894-224">Najpierw Dodaj projekt usługi w chmurze do rozwiązania programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="07894-224">First add a Cloud Service project to the Visual Studio solution.</span></span> <span data-ttu-id="07894-225">Kliknij prawym przyciskiem myszy rozwiązanie, a następnie wybierz polecenie **Dodaj**, a następnie pozycję **Nowy projekt**.</span><span class="sxs-lookup"><span data-stu-id="07894-225">Right-click the solution and select **Add**, then **New Project**.</span></span> <span data-ttu-id="07894-226">W okienku po lewej stronie rozwiń **pozycję C# Wizualizacja** i wybierz pozycję **chmura**.</span><span class="sxs-lookup"><span data-stu-id="07894-226">In the left pane, expand **Visual C#** and select **Cloud**.</span></span>

[![](queue-centric-work-pattern/_static/image5.png)](queue-centric-work-pattern/_static/image4.png)

<span data-ttu-id="07894-227">W oknie dialogowym **Nowa usługa w chmurze Azure** rozwiń węzeł **wizualizacji C#**  w okienku po lewej stronie.</span><span class="sxs-lookup"><span data-stu-id="07894-227">In the **New Azure Cloud Service** dialog, expand the **Visual C#** node on the left pane.</span></span> <span data-ttu-id="07894-228">Wybierz **rolę proces roboczy** , a następnie kliknij ikonę strzałki w prawo.</span><span class="sxs-lookup"><span data-stu-id="07894-228">Select **Worker Role** and click the right-arrow icon.</span></span>

![](queue-centric-work-pattern/_static/image6.png)

<span data-ttu-id="07894-229">(Należy zauważyć, że można również dodać *rolę sieci Web*.</span><span class="sxs-lookup"><span data-stu-id="07894-229">(Notice that you can also add a *web role*.</span></span> <span data-ttu-id="07894-230">W tej samej usłudze w chmurze zamiast uruchamiania jej w witrynie sieci Web systemu Azure można uruchomić ten sam fronton.</span><span class="sxs-lookup"><span data-stu-id="07894-230">We could run the Fix It front-end in the same Cloud Service instead of running it in an Azure Web Site.</span></span> <span data-ttu-id="07894-231">Ma pewne zalety, aby ułatwić koordynację połączeń między frontonem a zapleczem.</span><span class="sxs-lookup"><span data-stu-id="07894-231">That has some advantages in making connections between front-end and back-end easier to coordinate.</span></span> <span data-ttu-id="07894-232">Aby jednak zapewnić prostotę tego pokazu, utrzymujemy fronton w aplikacji internetowej Azure App Service i uruchomiono tylko zaplecze w usłudze w chmurze.)</span><span class="sxs-lookup"><span data-stu-id="07894-232">However, to keep this demo simple, we're keeping the front-end in an Azure App Service Web App and only running the back-end in a Cloud Service.)</span></span>

<span data-ttu-id="07894-233">Nazwa domyślna jest przypisana do roli procesu roboczego.</span><span class="sxs-lookup"><span data-stu-id="07894-233">A default name is assigned to the worker role.</span></span> <span data-ttu-id="07894-234">Aby zmienić nazwę, umieść kursor myszy nad rolą proces roboczy w prawym okienku, a następnie kliknij ikonę ołówka.</span><span class="sxs-lookup"><span data-stu-id="07894-234">To change the name, hover the mouse over the worker role in the right pane, then click the pencil icon.</span></span>

![](queue-centric-work-pattern/_static/image7.png)

<span data-ttu-id="07894-235">Kliknij przycisk **OK** , aby zakończyć okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="07894-235">Click **OK** to complete the dialog.</span></span> <span data-ttu-id="07894-236">Spowoduje to dodanie dwóch projektów do rozwiązania programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="07894-236">This adds two projects to the Visual Studio solution.</span></span>

- <span data-ttu-id="07894-237">projekt platformy Azure, który definiuje usługę w chmurze, w tym informacje o konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="07894-237">an Azure project that defines the cloud service, including configuration information.</span></span>
- <span data-ttu-id="07894-238">Projekt roli procesu roboczego, który definiuje rolę procesu roboczego.</span><span class="sxs-lookup"><span data-stu-id="07894-238">A worker role project that defines the worker role.</span></span>

![](queue-centric-work-pattern/_static/image8.png)

<span data-ttu-id="07894-239">Aby uzyskać więcej informacji, zobacz [Tworzenie projektu platformy Azure za pomocą programu Visual Studio.](https://msdn.microsoft.com/library/windowsazure/ee405487.aspx)</span><span class="sxs-lookup"><span data-stu-id="07894-239">For more information, see [Creating an Azure Project with Visual Studio.](https://msdn.microsoft.com/library/windowsazure/ee405487.aspx)</span></span>

<span data-ttu-id="07894-240">W ramach roli procesu roboczego sonduje komunikaty, wywołując metodę `ProcessMessageAsync` klasy `FixItQueueManager`, która została wcześniej wykorzystana.</span><span class="sxs-lookup"><span data-stu-id="07894-240">Inside the worker role, we poll for messages by calling the `ProcessMessageAsync` method of the `FixItQueueManager` class that we saw earlier.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample3.cs?highlight=25)]

<span data-ttu-id="07894-241">Metoda `ProcessMessagesAsync` sprawdza, czy istnieje komunikat oczekujący.</span><span class="sxs-lookup"><span data-stu-id="07894-241">The `ProcessMessagesAsync` method checks if there's a message waiting.</span></span> <span data-ttu-id="07894-242">Jeśli istnieje, deserializacji komunikat do jednostki `FixItTask` i zapisuje jednostkę w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="07894-242">If there is one, it deserializes the message into a `FixItTask` entity and saves the entity in the database.</span></span> <span data-ttu-id="07894-243">Pętle do momentu, gdy kolejka jest pusta.</span><span class="sxs-lookup"><span data-stu-id="07894-243">It loops until the queue is empty.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample4.cs)]

<span data-ttu-id="07894-244">Sondowanie w poszukiwaniu komunikatów w kolejce powoduje niewielką opłatą za transakcje, więc gdy nie ma oczekujących na przetworzenie komunikatu, Metoda `RunAsync` roli procesu roboczego czeka sekundę przed ponownym sondowaniem, wywołując `Task.Delay(1000)`.</span><span class="sxs-lookup"><span data-stu-id="07894-244">Polling for queue messages incurs a small transaction charge, so when there's no message waiting to be processed, the worker role's `RunAsync` method waits a second before polling again by calling `Task.Delay(1000)`.</span></span>

<span data-ttu-id="07894-245">W projekcie sieci Web Dodawanie kodu asynchronicznego może automatycznie zwiększyć wydajność, ponieważ program IIS zarządza ograniczoną pulą wątków.</span><span class="sxs-lookup"><span data-stu-id="07894-245">In a web project, adding asynchronous code can automatically improve performance because IIS manages a limited thread pool.</span></span> <span data-ttu-id="07894-246">To nie jest przypadek w projekcie roli procesu roboczego.</span><span class="sxs-lookup"><span data-stu-id="07894-246">That is not the case in a worker role project.</span></span> <span data-ttu-id="07894-247">Aby zwiększyć skalowalność roli proces roboczy, można napisać kod wielowątkowy lub użyć kodu asynchronicznego do wdrożenia [programowania równoległego](https://msdn.microsoft.com/library/ff963553.aspx).</span><span class="sxs-lookup"><span data-stu-id="07894-247">To improve scalability of the worker role, you can write multi-threaded code or use asynchronous code to implement [parallel programming](https://msdn.microsoft.com/library/ff963553.aspx).</span></span> <span data-ttu-id="07894-248">Przykład nie implementuje programowania równoległego, ale pokazuje, w jaki sposób kod powinien być asynchroniczny, aby można było zaimplementować programowanie równoległe.</span><span class="sxs-lookup"><span data-stu-id="07894-248">The sample doesn't implement parallel programming but shows how to make the code asynchronous so you can implement parallel programming.</span></span>

## <a name="summary"></a><span data-ttu-id="07894-249">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="07894-249">Summary</span></span>

<span data-ttu-id="07894-250">W tym rozdziale pokazano, jak poprawić czas reakcji, niezawodność i skalowalność aplikacji, implementując wzorzec pracy skoncentrowanej na kolejkach.</span><span class="sxs-lookup"><span data-stu-id="07894-250">In this chapter you've seen how to improve application responsiveness, reliability, and scalability by implementing the queue-centric work pattern.</span></span>

<span data-ttu-id="07894-251">Jest to ostatnie 13 wzorców objętych tą książką elektroniczną, ale istnieje wiele innych wzorców i rozwiązań, które mogą pomóc w tworzeniu udanych aplikacji w chmurze.</span><span class="sxs-lookup"><span data-stu-id="07894-251">This is the last of the 13 patterns covered in this e-book, but there are of course many other patterns and practices that can help you build successful cloud apps.</span></span> <span data-ttu-id="07894-252">[Rozdział końcowy](more-patterns-and-guidance.md) zawiera linki do zasobów dla tematów, które nie zostały omówione w tych 13 wzorcach.</span><span class="sxs-lookup"><span data-stu-id="07894-252">The [final chapter](more-patterns-and-guidance.md) provides links to resources for topics that haven't been covered in these 13 patterns.</span></span>

<a id="resources"></a>
## <a name="resources"></a><span data-ttu-id="07894-253">Resources</span><span class="sxs-lookup"><span data-stu-id="07894-253">Resources</span></span>

<span data-ttu-id="07894-254">Aby uzyskać więcej informacji o kolejkach, zobacz następujące zasoby.</span><span class="sxs-lookup"><span data-stu-id="07894-254">For more information about queues, see the following resources.</span></span>

<span data-ttu-id="07894-255">Łączoną</span><span class="sxs-lookup"><span data-stu-id="07894-255">Documentation:</span></span>

- <span data-ttu-id="07894-256">[Kolejki Microsoft Azure Storage część 1: wprowadzenie](https://www.red-gate.com/simple-talk/cloud/platform-as-a-service/microsoft-azure-storage-queues-part-1-getting-started/).</span><span class="sxs-lookup"><span data-stu-id="07894-256">[Microsoft Azure Storage Queues Part 1: Getting Started](https://www.red-gate.com/simple-talk/cloud/platform-as-a-service/microsoft-azure-storage-queues-part-1-getting-started/).</span></span> <span data-ttu-id="07894-257">Artykuł Schacherl Roman.</span><span class="sxs-lookup"><span data-stu-id="07894-257">Article by Roman Schacherl.</span></span>
- <span data-ttu-id="07894-258">[Wykonywanie zadań w tle](https://msdn.microsoft.com/library/ff803365.aspx), rozdział 5 [przenoszonych aplikacji do chmury, trzecia wersja](https://msdn.microsoft.com/library/ff728592.aspx) z wzorców i praktyk firmy Microsoft.</span><span class="sxs-lookup"><span data-stu-id="07894-258">[Executing Background Tasks](https://msdn.microsoft.com/library/ff803365.aspx), chapter 5 of [Moving Applications to the Cloud, 3rd Edition](https://msdn.microsoft.com/library/ff728592.aspx) from Microsoft Patterns and Practices.</span></span> <span data-ttu-id="07894-259">(W szczególności Sekcja ["Korzystanie z kolejek usługi Azure Storage"](https://msdn.microsoft.com/library/ff803365.aspx#sec7)).</span><span class="sxs-lookup"><span data-stu-id="07894-259">(In particular, the section ["Using Azure Storage Queues"](https://msdn.microsoft.com/library/ff803365.aspx#sec7).)</span></span>
- <span data-ttu-id="07894-260">[Najlepsze rozwiązania dotyczące maksymalizowania skalowalności i opłacalności rozwiązań do obsługi komunikatów opartych na kolejkach na platformie Azure](https://msdn.microsoft.com/library/windowsazure/hh697709.aspx).</span><span class="sxs-lookup"><span data-stu-id="07894-260">[Best Practices for Maximizing Scalability and Cost Effectiveness of Queue-Based Messaging Solutions on Azure](https://msdn.microsoft.com/library/windowsazure/hh697709.aspx).</span></span> <span data-ttu-id="07894-261">Oficjalny dokument przez Valery Mizonov.</span><span class="sxs-lookup"><span data-stu-id="07894-261">White paper by Valery Mizonov.</span></span>
- <span data-ttu-id="07894-262">[Porównywanie kolejek platformy Azure i kolejek Service Bus](https://msdn.microsoft.com/magazine/jj159884.aspx).</span><span class="sxs-lookup"><span data-stu-id="07894-262">[Comparing Azure Queues and Service Bus Queues](https://msdn.microsoft.com/magazine/jj159884.aspx).</span></span> <span data-ttu-id="07894-263">Artykuł Magazyn MSDN zawiera dodatkowe informacje, które mogą pomóc wybrać usługę kolejki do użycia.</span><span class="sxs-lookup"><span data-stu-id="07894-263">MSDN Magazine article, provides additional information that can help you choose which queue service to use.</span></span> <span data-ttu-id="07894-264">Artykuł zawiera informacje o tym, że Service Bus jest zależne od usługi ACS do uwierzytelniania, co oznacza, że kolejki SB byłyby niedostępne, gdy Usługa ACS jest niedostępna.</span><span class="sxs-lookup"><span data-stu-id="07894-264">The article mentions that Service Bus is dependent on ACS for authentication, which means your SB queues would be unavailable when ACS is unavailable.</span></span> <span data-ttu-id="07894-265">Jednak ze względu na to, że artykuł został zapisany, SB został zmieniony, aby umożliwić korzystanie z [tokenów SAS](https://msdn.microsoft.com/library/windowsazure/dn170477.aspx) jako alternatywy dla usługi ACS.</span><span class="sxs-lookup"><span data-stu-id="07894-265">However, since the article was written, SB was changed to enable you to use [SAS tokens](https://msdn.microsoft.com/library/windowsazure/dn170477.aspx) as an alternative to ACS.</span></span>
- <span data-ttu-id="07894-266">[Wzorce i praktyki firmy Microsoft — wskazówki dotyczące platformy Azure](https://msdn.microsoft.com/library/dn568099.aspx).</span><span class="sxs-lookup"><span data-stu-id="07894-266">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="07894-267">Zapoznaj się z wzorcem obsługi komunikatów asynchronicznych, wzorca potoków i filtrów, wzorcem transakcji kompensacyjnej, wzorcem konkurujących odbiorców, wzorcem CQRS.</span><span class="sxs-lookup"><span data-stu-id="07894-267">See Asynchronous Messaging primer, Pipes and Filters pattern, Compensating Transaction pattern, Competing Consumers pattern, CQRS pattern.</span></span>
- <span data-ttu-id="07894-268">[CQRS](https://msdn.microsoft.com/library/jj554200).</span><span class="sxs-lookup"><span data-stu-id="07894-268">[CQRS Journey](https://msdn.microsoft.com/library/jj554200).</span></span> <span data-ttu-id="07894-269">Książka elektroniczna dotycząca CQRS według wzorców i praktyk firmy Microsoft.</span><span class="sxs-lookup"><span data-stu-id="07894-269">E-book about CQRS by Microsoft Patterns and Practices.</span></span>

<span data-ttu-id="07894-270">Plików</span><span class="sxs-lookup"><span data-stu-id="07894-270">Video:</span></span>

- <span data-ttu-id="07894-271">[Failsafe: kompilowanie skalowalnych, Odpornych Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="07894-271">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="07894-272">Seria wideo dziewięć części przez Ulrich Homann, Marc Mercuri i marking SIMM.</span><span class="sxs-lookup"><span data-stu-id="07894-272">Nine-part video series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="07894-273">Prezentuje koncepcje wysokiego poziomu i zasady architektury w bardzo dostępnym i interesującym scenariuszu, w tym scenariusze opracowane przez firmę Microsoft Customer Advisory Team (CAT) z rzeczywistymi klientami.</span><span class="sxs-lookup"><span data-stu-id="07894-273">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="07894-274">Aby zapoznać się z wprowadzeniem do usługi Azure Storage i kolejek, zobacz epizod 5 od 35:13.</span><span class="sxs-lookup"><span data-stu-id="07894-274">For an introduction to the Azure Storage service and queues, see episode 5 starting at 35:13.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="07894-275">[Poprzednie](distributed-caching.md)
> [dalej](more-patterns-and-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="07894-275">[Previous](distributed-caching.md)
[Next](more-patterns-and-guidance.md)</span></span>

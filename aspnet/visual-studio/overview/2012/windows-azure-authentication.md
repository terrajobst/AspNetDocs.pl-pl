---
uid: visual-studio/overview/2012/windows-azure-authentication
title: Uwierzytelnianie systemu Windows Azure | Microsoft Docs
author: Rick-Anderson
description: Narzędzia Microsoft ASP.NET dla systemu Windows Azure Active Directory ułatwiają uwierzytelnianie aplikacji sieci Web hostowanych w witrynach sieci Web systemu Windows Azure...
ms.author: riande
ms.date: 02/20/2013
ms.assetid: a3cef801-a54b-4ebd-93c3-55764e2e14b1
msc.legacyurl: /visual-studio/overview/2012/windows-azure-authentication
msc.type: authoredcontent
ms.openlocfilehash: ce98effe18dd739504fb0d5453bae8a46c3ba102
ms.sourcegitcommit: 7709c0a091b8d55b7b33bad8849f7b66b23c3d72
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 02/19/2020
ms.locfileid: "77457482"
---
# <a name="windows-azure-authentication"></a><span data-ttu-id="02407-103">Uwierzytelnianie platformy Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="02407-103">Windows Azure Authentication</span></span>

<span data-ttu-id="02407-104">Autor [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="02407-104">by [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

> <span data-ttu-id="02407-105">Narzędzia Microsoft ASP.NET dla systemu Windows Azure Active Directory ułatwiają uwierzytelnianie aplikacji sieci Web hostowanych w [witrynach sieci Web systemu Windows Azure](https://www.windowsazure.com/home/features/web-sites/).</span><span class="sxs-lookup"><span data-stu-id="02407-105">Microsoft ASP.NET tools for Windows Azure Active Directory makes it simple to enable authentication for web applications hosted on [Windows Azure Web Sites](https://www.windowsazure.com/home/features/web-sites/).</span></span> <span data-ttu-id="02407-106">Za pomocą uwierzytelniania platformy Microsoft Azure można uwierzytelniać użytkowników pakietu Office 365 w organizacji, konta firmowe synchronizowane z lokalnymi Active Directoryami lub użytkownikami utworzonymi w niestandardowej domenie Azure Active Directory systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="02407-106">You can use Windows Azure Authentication to authenticate Office 365 users from your organization, corporate accounts synced from your on-premise Active Directory or users created in your own custom Windows Azure Active Directory domain.</span></span> <span data-ttu-id="02407-107">Włączenie uwierzytelniania systemu Windows Azure umożliwia skonfigurowanie aplikacji do uwierzytelniania użytkowników przy użyciu jednej dzierżawy [systemu windows Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) .</span><span class="sxs-lookup"><span data-stu-id="02407-107">Enabling Windows Azure Authentication configures your application to authenticate users using a single [Windows Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) tenant.</span></span>
>
> <span data-ttu-id="02407-108">Narzędzie uwierzytelniania systemu Windows Azure ASP.NET nie jest obsługiwane w przypadku ról sieci Web w usłudze w chmurze, ale planujemy to zrobić w przyszłej wersji.</span><span class="sxs-lookup"><span data-stu-id="02407-108">The ASP.NET Windows Azure Authentication tool is not supported for web roles in a cloud service but we plan to do so in a future release.</span></span> <span data-ttu-id="02407-109">Platforma [Windows Identity Foundation](https://msdn.microsoft.com/library/hh291066(v=VS.110).aspx) (WIF) jest obsługiwana w rolach sieci Web systemu Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="02407-109">[Windows Identity Foundation](https://msdn.microsoft.com/library/hh291066(v=VS.110).aspx) (WIF) is supported in Windows Azure web roles.</span></span>
>
> <span data-ttu-id="02407-110">Aby uzyskać szczegółowe informacje na temat konfigurowania synchronizacji między lokalnym Active Directory i dzierżawą Azure Active Directory systemu Windows, zobacz [używanie AD FS 2,0 do implementowania logowania jednokrotnego i zarządzania nim](https://technet.microsoft.com/library/jj205462.aspx).</span><span class="sxs-lookup"><span data-stu-id="02407-110">For details on how to setup synchronization between your on-premise Active Directory and your Windows Azure Active Directory tenant please see [Use AD FS 2.0 to implement and manage single sign-on](https://technet.microsoft.com/library/jj205462.aspx).</span></span>
>
> <span data-ttu-id="02407-111">Usługa Windows Azure Active Directory jest obecnie dostępna jako [bezpłatna wersja zapoznawcza](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).</span><span class="sxs-lookup"><span data-stu-id="02407-111">Windows Azure Active Directory is currently available as a [free preview service](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).</span></span>

## <a name="requirements"></a><span data-ttu-id="02407-112">Wymagania:</span><span class="sxs-lookup"><span data-stu-id="02407-112">Requirements:</span></span>

- <span data-ttu-id="02407-113">Visual Studio 2012 lub [Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express)</span><span class="sxs-lookup"><span data-stu-id="02407-113">Visual Studio 2012 or [Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express)</span></span>
- <span data-ttu-id="02407-114">[Rozszerzenia Web Tools dla rozszerzeń Visual Studio 2012](https://go.microsoft.com/fwlink/?LinkID=282228&amp;clcid=0x409) lub [web tools dla Visual Studio Express 2012](https://go.microsoft.com/fwlink/?LinkID=282231&amp;clcid=0x409)</span><span class="sxs-lookup"><span data-stu-id="02407-114">[Web Tools Extensions for Visual Studio 2012](https://go.microsoft.com/fwlink/?LinkID=282228&amp;clcid=0x409) or [Web Tools Extensions for Visual Studio Express 2012](https://go.microsoft.com/fwlink/?LinkID=282231&amp;clcid=0x409)</span></span>
- <span data-ttu-id="02407-115">[Microsoft ASP.NET Tools for windows Azure Active Directory — Visual Studio 2012](https://go.microsoft.com/fwlink/?LinkID=282306) lub [Microsoft ASP.net tools for windows Azure Active Directory — Visual Studio Express 2012 dla sieci Web](https://go.microsoft.com/fwlink/?LinkId=282652)</span><span class="sxs-lookup"><span data-stu-id="02407-115">[Microsoft ASP.NET Tools for Windows Azure Active Directory – Visual Studio 2012](https://go.microsoft.com/fwlink/?LinkID=282306) or [Microsoft ASP.NET Tools for Windows Azure Active Directory – Visual Studio Express 2012 for Web](https://go.microsoft.com/fwlink/?LinkId=282652)</span></span>

## <a name="create-an-aspnet-web-application-with-visual-studio-2012"></a><span data-ttu-id="02407-116">Tworzenie aplikacji sieci Web ASP.NET za pomocą programu Visual Studio 2012</span><span class="sxs-lookup"><span data-stu-id="02407-116">Create an ASP.NET Web Application with Visual Studio 2012</span></span>

<span data-ttu-id="02407-117">Możesz utworzyć dowolną aplikację sieci Web za pomocą programu Visual Studio 2012, w tym samouczku zostanie użyty szablon intranetu ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="02407-117">You can create any Web Application with Visual Studio 2012, this tutorial uses the ASP.NET MVC intranet template.</span></span>

1. <span data-ttu-id="02407-118">Utwórz nową aplikację intranetową ASP.NET MVC 4 i Zaakceptuj wszystkie ustawienia domyślne.</span><span class="sxs-lookup"><span data-stu-id="02407-118">Create a new ASP.NET MVC 4 Intranet Application and accept all the defaults.</span></span> <span data-ttu-id="02407-119">(Musi to być w **tra** sieci, a nie w projekcie w sieci **Ter** ).</span><span class="sxs-lookup"><span data-stu-id="02407-119">(It must be an In **tra** net and not In **ter** net project).</span></span>
     ![](windows-azure-authentication/_static/image1.png)

## <a name="enable-window-azure-authentication-when-you-are-a-global-administrator-of-the-tenet"></a><span data-ttu-id="02407-120">Włącz uwierzytelnianie systemu Azure Window (gdy jesteś administratorem globalnym cechą)</span><span class="sxs-lookup"><span data-stu-id="02407-120">Enable Window Azure Authentication (When you are a Global Administrator of the Tenet)</span></span>

<span data-ttu-id="02407-121">Jeśli nie masz istniejącej dzierżawy systemu Windows Azure Active Directory (na przykład za pomocą istniejącego konta Office 365), możesz utworzyć nową dzierżawę, rejestrując się w celu utworzenia [nowego konta systemu Windows Azure Active Directory](https://g.microsoftonline.com/0AX00en/5).</span><span class="sxs-lookup"><span data-stu-id="02407-121">If you do not have an existing Windows Azure Active Directory tenant (For example, through an existing Office 365 account) you can create a new tenant by signing up for a [new Windows Azure Active Directory account](https://g.microsoftonline.com/0AX00en/5).</span></span>

1. <span data-ttu-id="02407-122">W menu Projekt wybierz opcję **Włącz uwierzytelnianie systemu Windows Azure**:</span><span class="sxs-lookup"><span data-stu-id="02407-122">From the Project menu select **Enable Windows Azure Authentication**:</span></span>

   ![](windows-azure-authentication/_static/image2.png)

2. <span data-ttu-id="02407-123">Wprowadź domenę dla dzierżawy Azure Active Directory systemu Windows (na przykład contoso.onmicrosoft.com), a następnie kliknij pozycję **Włącz**:</span><span class="sxs-lookup"><span data-stu-id="02407-123">Enter the domain for your Windows Azure Active Directory tenant (for example, contoso.onmicrosoft.com) and click **Enable**:</span></span>

![](windows-azure-authentication/_static/image3.png)

3. <span data-ttu-id="02407-124">W oknie dialogowym Uwierzytelnianie sieci Web Zaloguj się jako Administrator dzierżawy systemu Windows Azure Active Directory:</span><span class="sxs-lookup"><span data-stu-id="02407-124">In the Web Authentication dialog sign in as an administrator for your Windows Azure Active Directory tenant:</span></span>

   ![](windows-azure-authentication/_static/image4.png)

![](windows-azure-authentication/_static/image5.png)

## <a name="enable-window-azure-by-a-non-administrator-of-the-tenet"></a><span data-ttu-id="02407-125">Włącz platformę Azure w systemie Windows przez administratora cechą</span><span class="sxs-lookup"><span data-stu-id="02407-125">Enable Window Azure by a non-administrator of the Tenet</span></span>

<span data-ttu-id="02407-126">Jeśli nie masz uprawnień administratora globalnego dla dzierżawy systemu Windows Azure Active Directory, możesz usunąć zaznaczenie pola wyboru w celu aprowizacji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="02407-126">If you do not have Global Administrator privilege for your Windows Azure Active Directory tenant, you can uncheck the checkbox for provisioning the application.</span></span>

![](windows-azure-authentication/_static/image6.png)

<span data-ttu-id="02407-127">W oknie dialogowym zostanie wyświetlona **domena**, **Identyfikator podmiotu zabezpieczeń aplikacji** i **adres URL odpowiedzi** , które są wymagane do aprowizacji aplikacji za pomocą Azure Active Directory cechą.</span><span class="sxs-lookup"><span data-stu-id="02407-127">The dialog will display the **Domain**, **Application Principal Id** and **Reply URL** which are required for provisioning the application with an Azure Active Directory tenet.</span></span> <span data-ttu-id="02407-128">Musisz przekazać te informacje osobie, która ma wystarczające uprawnienia do aprowizacji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="02407-128">You need to give this information to someone who has sufficient privilege to provision the application.</span></span> <span data-ttu-id="02407-129">Zobacz[jak zaimplementować Logowanie jednokrotne za pomocą aplikacji Windows Azure Active Directory-ASP.NET](https://github.com/Azure-Samples/active-directory-dotnet-webapp-openidconnect) , aby uzyskać szczegółowe informacje dotyczące sposobu użycia polecenia cmdlet do ręcznego tworzenia jednostki usługi.</span><span class="sxs-lookup"><span data-stu-id="02407-129">See[How to implement single sign-on with Windows Azure Active Directory - ASP.NET Application](https://github.com/Azure-Samples/active-directory-dotnet-webapp-openidconnect) for details on how to use cmdlet to create the service principal manually.</span></span>
<span data-ttu-id="02407-130">Po pomyślnym udostępnieniu aplikacji można kliknąć pozycję **Kontynuuj, aby zaktualizować plik Web. config przy użyciu wybranych ustawień**.</span><span class="sxs-lookup"><span data-stu-id="02407-130">Once the application has been successfully provisioned, you can click on **Continue to update web.config with the selected settings**.</span></span> <span data-ttu-id="02407-131">Jeśli chcesz kontynuować tworzenie aplikacji podczas oczekiwania na zainicjowanie obsługi, możesz kliknąć przycisk **Zamknij, aby zapamiętać ustawienia w pliku projektu**.</span><span class="sxs-lookup"><span data-stu-id="02407-131">If you want to continue developing the application while waiting for provisioning to happen, you can click **Close to remember the settings in project file**.</span></span> <span data-ttu-id="02407-132">Przy następnym wywołaniu opcji Włącz uwierzytelnianie systemu Windows Azure i usuń zaznaczenie pola wyboru aprowizacji, zobaczysz te same ustawienia, a następnie możesz kliknąć przycisk **Kontynuuj**, a następnie kliknąć przycisk **Zastosuj te ustawienia w pliku Web. config**.</span><span class="sxs-lookup"><span data-stu-id="02407-132">The next time you invoke Enable Windows Azure Authentication and uncheck the provisioning checkbox, you will see the same settings and you can click **Continue**, then click, **Apply these settings in web.config**.</span></span>

1. <span data-ttu-id="02407-133">Zaczekaj, aż aplikacja jest skonfigurowana do uwierzytelniania w systemie Windows Azure i została zainicjowana z systemem Windows Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="02407-133">Wait while your application is configured for Windows Azure Authentication and provisioned with Windows Azure Active Directory.</span></span>
2. <span data-ttu-id="02407-134">Po włączeniu uwierzytelniania systemu Windows Azure dla aplikacji kliknij przycisk **Zamknij:**</span><span class="sxs-lookup"><span data-stu-id="02407-134">Once Windows Azure Authentication has been enabled for your application, click **Close:**</span></span>

    ![](windows-azure-authentication/_static/image7.png)
3. <span data-ttu-id="02407-135">Naciśnij klawisz F5, aby uruchomić aplikację.</span><span class="sxs-lookup"><span data-stu-id="02407-135">Hit F5 to run your application.</span></span> <span data-ttu-id="02407-136">Należy automatycznie przekierować do strony logowania.</span><span class="sxs-lookup"><span data-stu-id="02407-136">You should automatically get redirected to login page.</span></span> <span data-ttu-id="02407-137">Użyj poświadczeń użytkownika cechą Directory, aby zalogować się do aplikacji...</span><span class="sxs-lookup"><span data-stu-id="02407-137">Use the directory tenet user credentials to login to the application..</span></span>

    ![](windows-azure-authentication/_static/image1.jpg)
4. <span data-ttu-id="02407-138">Ponieważ Twoja aplikacja używa obecnie certyfikatu testowego z podpisem własnym, otrzymasz ostrzeżenie z przeglądarki, że certyfikat nie został wystawiony przez zaufany urząd certyfikacji.</span><span class="sxs-lookup"><span data-stu-id="02407-138">Because your application is currently using a self-signed test certificate you will receive a warning from the browser that the certificate was not issued by a trusted certificate authority.</span></span>

    <span data-ttu-id="02407-139">To ostrzeżenie można bezpiecznie zignorować podczas lokalnego tworzenia, klikając pozycję **Kontynuuj w tej witrynie sieci Web:**</span><span class="sxs-lookup"><span data-stu-id="02407-139">This warning can be safely ignored during local development by clicking **Continue to this website:**</span></span>

    ![](windows-azure-authentication/_static/image8.png)
5. <span data-ttu-id="02407-140">Pomyślnie zalogowano się do aplikacji przy użyciu uwierzytelniania systemu Windows Azure!</span><span class="sxs-lookup"><span data-stu-id="02407-140">You have now successfully logged in to your application using Windows Azure Authentication!</span></span>

    ![](windows-azure-authentication/_static/image2.jpg)

<span data-ttu-id="02407-141">Włączenie uwierzytelniania systemu Windows Azure wprowadza następujące zmiany w aplikacji:</span><span class="sxs-lookup"><span data-stu-id="02407-141">Enabling Windows Azure authentication makes the following changes to your application:</span></span>

- <span data-ttu-id="02407-142">Do projektu zostanie dodana Klasa[CSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF))(Anti-krzyżowe żądanie fałszerstwa) ( *aplikacja\_Start\AntiXsrfConfig.cs* ).</span><span class="sxs-lookup"><span data-stu-id="02407-142">An Anti-Cross-Site Request Forgery ([CSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF))) class ( *App\_Start\AntiXsrfConfig.cs* ) is added to your project.</span></span>
- <span data-ttu-id="02407-143">Pakiety NuGet `System.IdentityModel.Tokens.ValidatingIssuerNameRegistry` są dodawane do projektu.</span><span class="sxs-lookup"><span data-stu-id="02407-143">The NuGet packages `System.IdentityModel.Tokens.ValidatingIssuerNameRegistry` is added to your project.</span></span>
- <span data-ttu-id="02407-144">Ustawienia usługi Windows Identity Foundation w aplikacji zostaną skonfigurowane tak, aby akceptowały tokeny zabezpieczające z dzierżawy Azure Active Directory systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="02407-144">Windows Identity Foundation settings in your application will be configured to accept security tokens from your Windows Azure Active Directory tenant.</span></span> <span data-ttu-id="02407-145">Kliknij poniższy obraz, aby wyświetlić rozwinięty widok zmian wprowadzonych w pliku *Web. config* .</span><span class="sxs-lookup"><span data-stu-id="02407-145">Click on the image below to see an expanded view of the changes made to the *Web.config* file.</span></span>

     ![](windows-azure-authentication/_static/image9.png)
- <span data-ttu-id="02407-146">Zostanie zainicjowana nazwa główna usługi dla aplikacji w dzierżawie systemu Windows Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="02407-146">A service principal for your application in your Windows Azure Active Directory tenant will be provisioned.</span></span>
- <span data-ttu-id="02407-147">Protokół HTTPS jest włączony.</span><span class="sxs-lookup"><span data-stu-id="02407-147">HTTPS is enabled.</span></span>

## <a name="deploy-the-application-to-windows-azure"></a><span data-ttu-id="02407-148">Wdrażanie aplikacji w systemie Windows Azure</span><span class="sxs-lookup"><span data-stu-id="02407-148">Deploy the application to Windows Azure</span></span>

<span data-ttu-id="02407-149">Aby uzyskać pełne instrukcje, zobacz [wdrażanie aplikacji sieci web ASP.NET w witrynie sieci Web systemu Windows Azure](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet).</span><span class="sxs-lookup"><span data-stu-id="02407-149">For complete instructions, see [Deploying an ASP.NET Web Application to a Windows Azure Web Site](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet).</span></span>

<span data-ttu-id="02407-150">Aby opublikować aplikację przy użyciu uwierzytelniania systemu Windows Azure w witrynie sieci Web platformy Azure:</span><span class="sxs-lookup"><span data-stu-id="02407-150">To publish an application using Windows Azure Authentication to an Azure Web Site:</span></span>

1. <span data-ttu-id="02407-151">Kliknij prawym przyciskiem myszy aplikację i wybierz polecenie **Publikuj:**</span><span class="sxs-lookup"><span data-stu-id="02407-151">Right click on your application and select **Publish:**</span></span>

    ![](windows-azure-authentication/_static/image3.jpg)
2. <span data-ttu-id="02407-152">W oknie dialogowym Publikowanie w sieci Web Pobierz i zaimportuj profil publikowania dla witryny sieci Web systemu Azure.</span><span class="sxs-lookup"><span data-stu-id="02407-152">From the Publish Web dialog download and import a publishing profile for your Azure Web Site.</span></span>

    ![](windows-azure-authentication/_static/image4.jpg)
3. <span data-ttu-id="02407-153">Na karcie **połączenie** jest wyświetlany **docelowy adres URL** (publiczny adres URL dla aplikacji).</span><span class="sxs-lookup"><span data-stu-id="02407-153">The **Connection** tab shows the **Destination URL** (the public facing URL for your application).</span></span> <span data-ttu-id="02407-154">Kliknij pozycję **Weryfikuj połączenie** , aby przetestować połączenie:</span><span class="sxs-lookup"><span data-stu-id="02407-154">Click **Validate Connection** to test your connection:</span></span>

    ![](windows-azure-authentication/_static/image5.jpg)
4. <span data-ttu-id="02407-155">Jeśli opublikowano w tej witrynie sieci Web platformy Azure, należy wcześniej rozważyć sprawdzenie ustawienia **Usuń dodatkowe pliki w miejscu docelowym** , aby upewnić się, że aplikacja jest w sposób przejrzysty.</span><span class="sxs-lookup"><span data-stu-id="02407-155">If you have published to this Azure Web Site previously consider checking the **Remove additional files at destination** setting to ensure your application publishes cleanly.</span></span> <span data-ttu-id="02407-156">Zwróć uwagę na to pole wyboru **Włącz uwierzytelnianie systemu Windows Azure** jest zaznaczone.</span><span class="sxs-lookup"><span data-stu-id="02407-156">Notice the **Enable Windows Azure Authentication** check box is selected.</span></span>

    ![](windows-azure-authentication/_static/image10.png)
5. <span data-ttu-id="02407-157">Opcjonalnie: na karcie **Podgląd** kliknij pozycję **Rozpocznij podgląd** , aby zobaczyć wdrożone pliki.</span><span class="sxs-lookup"><span data-stu-id="02407-157">Optional: On the **Preview** tab click **Start Preview** to see the files deployed.</span></span>

    ![](windows-azure-authentication/_static/image6.jpg)
6. <span data-ttu-id="02407-158">Kliknij przycisk **Publikuj.**</span><span class="sxs-lookup"><span data-stu-id="02407-158">Click **Publish.**</span></span>

    <span data-ttu-id="02407-159">Zostanie wyświetlony monit o włączenie uwierzytelniania systemu Windows Azure dla hosta docelowego.</span><span class="sxs-lookup"><span data-stu-id="02407-159">You will be prompted to enable Windows Azure Authentication for the target host.</span></span> <span data-ttu-id="02407-160">Kliknij pozycję **Włącz** , aby kontynuować:</span><span class="sxs-lookup"><span data-stu-id="02407-160">Click **Enable** to continue:</span></span>

    ![](windows-azure-authentication/_static/image11.png)
7. <span data-ttu-id="02407-161">Wprowadź poświadczenia administratora dla dzierżawy usługi Windows Azure Active Directory:</span><span class="sxs-lookup"><span data-stu-id="02407-161">Enter your administrator credentials for your Windows Azure Active Directory tenant:</span></span>

    ![](windows-azure-authentication/_static/image7.jpg)
8. <span data-ttu-id="02407-162">Po pomyślnym opublikowaniu aplikacji Przeglądarka zostanie otwarta w opublikowanej witrynie sieci Web.</span><span class="sxs-lookup"><span data-stu-id="02407-162">Once your application has been successfully published, a browser will open to the published web site.</span></span>

    > [!NOTE]
    > <span data-ttu-id="02407-163">Po włączeniu uwierzytelniania systemu Windows Azure dla hosta docelowego może upłynąć do 5 minut (zwykle musi to Azure Active Directory być mniejsze).</span><span class="sxs-lookup"><span data-stu-id="02407-163">It may take up to five minutes (typically must less) for your application to be fully provisioned with Windows Azure Active Directory after enabling Windows Azure Authentication for the target host.</span></span> <span data-ttu-id="02407-164">Po pierwszym uruchomieniu aplikacji w przypadku otrzymania błędu ACS50001: nie znaleziono jednostki uzależnionej o nazwie "[Realm]", odczekaj kilka minut i spróbuj ponownie uruchomić aplikację.</span><span class="sxs-lookup"><span data-stu-id="02407-164">When you first run your application if you receive error ACS50001: Relying party with name ‘[realm]' was not found, then wait a few minutes and try running the application again.</span></span>
9. <span data-ttu-id="02407-165">Po wyświetleniu monitu zaloguj się jako użytkownik w katalogu:</span><span class="sxs-lookup"><span data-stu-id="02407-165">When prompted, log in as a user in your directory:</span></span>

    ![](windows-azure-authentication/_static/image8.jpg)
10. <span data-ttu-id="02407-166">Pomyślnie zalogowano się do aplikacji hostowanej na platformie Azure przy użyciu uwierzytelniania platformy Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="02407-166">You have now successfully logged into your Azure hosted application using Windows Azure Authentication.</span></span>

     ![](windows-azure-authentication/_static/image9.jpg)

## <a name="known-issues"></a><span data-ttu-id="02407-167">Znane problemy</span><span class="sxs-lookup"><span data-stu-id="02407-167">Known Issues</span></span>

#### <a name="role-based-authorization-fails-when-using-windows-azure-authentication"></a><span data-ttu-id="02407-168">Autoryzacja oparta na rolach kończy się niepowodzeniem w przypadku korzystania z uwierzytelniania systemu Windows Azure</span><span class="sxs-lookup"><span data-stu-id="02407-168">Role-based authorization fails when using Windows Azure Authentication</span></span>

<span data-ttu-id="02407-169">Uwierzytelnianie systemu Windows Azure nie udostępnia obecnie wymaganego żądania roli, aby można było wykonać autoryzację opartą na rolach.</span><span class="sxs-lookup"><span data-stu-id="02407-169">Windows Azure Authentication does not currently provide the necessary role claim so that role-based authorization can be performed.</span></span> <span data-ttu-id="02407-170">Rola uwierzytelnionego użytkownika musi zostać pobrana ręcznie z Azure Active Directory systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="02407-170">The role of the authenticated user must be manually retrieved from Windows Azure Active Directory.</span></span>

#### <a name="browsing-to-an-application-with-windows-azure-authentication-results-in-the-error-acs20016-the-domain-of-the-logged-in-user-livecom-does-not-match-any-allowed-domain-of-this-sts"></a><span data-ttu-id="02407-171">Przechodzenie do aplikacji z uwierzytelnianiem w systemie Windows Azure skutkuje błędem "ACS20016 domena zalogowanego użytkownika (live.com) nie jest zgodna z żadną dopuszczalną domeną tej usługi STS"</span><span class="sxs-lookup"><span data-stu-id="02407-171">Browsing to an application with Windows Azure Authentication results in the error "ACS20016 The domain of the logged in user (live.com) does not match any allowed domain of this STS"</span></span>

<span data-ttu-id="02407-172">Jeśli użytkownik jest już zalogowany na koncie Microsoft (na przykład hotmail.com, live.com, outlook.com) i próbujesz uzyskać dostęp do aplikacji, która włączyła uwierzytelnianie w systemie Windows Azure, możesz otrzymać 400 odpowiedź na błąd, ponieważ domena konta Microsoft nie jest rozpoznawany przez Azure Active Directory systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="02407-172">If you are already logged in to a Microsoft Account (for example hotmail.com, live.com, outlook.com) and you attempt to access an application that has enabled Windows Azure Authentication you may get a 400 error response because the domain of your Microsoft Account is not recognized by Windows Azure Active Directory.</span></span> <span data-ttu-id="02407-173">Aby zalogować się do aplikacji, najpierw Wyloguj się z konta Microsoft.</span><span class="sxs-lookup"><span data-stu-id="02407-173">To log into the application, log out from your Microsoft Account first.</span></span>

#### <a name="logging-into-an-application-with-windows-azure-authentication-enabled-and-a-x509certificatevalidationmode-other-than-none-results-in-certificate-validation-errors-for-the-accountsaccesscontrolwindowsnet-certificate"></a><span data-ttu-id="02407-174">Logowanie do aplikacji z włączonym uwierzytelnianiem systemu Windows Azure i X509CertificateValidationMode inne niż None powoduje błędy walidacji certyfikatu dla certyfikatu accounts.accesscontrol.windows.net</span><span class="sxs-lookup"><span data-stu-id="02407-174">Logging into an application with Windows Azure Authentication enabled and a X509CertificateValidationMode other than None results in certificate validation errors for the accounts.accesscontrol.windows.net certificate</span></span>

<span data-ttu-id="02407-175">Walidacja certyfikatu nie jest wymagana i powinna pozostać wyłączona.</span><span class="sxs-lookup"><span data-stu-id="02407-175">Certificate validation is not required and should be left disabled.</span></span> <span data-ttu-id="02407-176">Odcisk palca certyfikatu wystawcy jest weryfikowany przez elementu WSFederationAuthenticationModule.</span><span class="sxs-lookup"><span data-stu-id="02407-176">The thumbprint of the issuer certificate is validated by the WSFederationAuthenticationModule.</span></span>

#### <a name="when-attempting-to-enable-windows-azure-authentication-the-web-authentication-dialog-shows-the-error-acs20016-the-domain-of-the-logged-in-user-contosoonmicrosoftcom-does-not-match-any-allowed-domain-of-this-sts"></a><span data-ttu-id="02407-177">Podczas próby włączenia uwierzytelniania systemu Windows Azure w oknie dialogowym Uwierzytelnianie sieci Web zostanie wyświetlony komunikat o błędzie "ACS20016: domena zalogowanego użytkownika (contoso.onmicrosoft.com) nie jest zgodna z żadną dopuszczalną domeną tej usługi STS".</span><span class="sxs-lookup"><span data-stu-id="02407-177">When attempting to enable Windows Azure Authentication the Web Authentication dialog shows the error "ACS20016: The domain of the logged in user (contoso.onmicrosoft.com) does not match any allowed domain of this STS."</span></span>

<span data-ttu-id="02407-178">Ten błąd może pojawić się po pomyślnym zalogowaniu się przy użyciu innego konta Azure Active Directory systemu Windows z tego samego procesu programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="02407-178">You may see this error when you have previously successfully logged in using a different Windows Azure Active Directory account from within the same Visual Studio process.</span></span> <span data-ttu-id="02407-179">Wyloguj się z określonego konta lub Uruchom ponownie program Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="02407-179">Log out from the specified account or restart Visual Studio.</span></span> <span data-ttu-id="02407-180">Jeśli wcześniej zalogowano się i wybrano opcję "nie wylogowuj mnie", może być konieczne wyczyszczenie plików cookie w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="02407-180">If you previously logged in and selected the option to "Keep me signed in" then you may need to clear your browser cookies.</span></span>

## <a name="acs20012-the-request-is-not-a-valid-ws-federation-protocol-message"></a><span data-ttu-id="02407-181">ACS20012: żądanie nie jest prawidłowym komunikatem protokołu WS-Federation</span><span class="sxs-lookup"><span data-stu-id="02407-181">ACS20012: The request is not a valid WS-Federation protocol message</span></span>

<span data-ttu-id="02407-182">Taka sytuacja może wystąpić, jeśli użytkownik zalogował się już przy użyciu innego identyfikatora firmy Microsoft do jednej z usług platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="02407-182">This can happen if you are already logged in with some other Microsoft ID to one of the Azure services.</span></span> <span data-ttu-id="02407-183">Używaj prywatnego okna przeglądarki, takiego jak InPrivate w programie IE lub incognito w przeglądarce Chrome, lub wyczyść wszystkie pliki cookie.</span><span class="sxs-lookup"><span data-stu-id="02407-183">Use Private browser window like InPrivate in IE or Incognito in Chrome or clear all the cookies.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="02407-184">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="02407-184">Additional Resources</span></span>

- <span data-ttu-id="02407-185">[Microsoft ASP.NET Tools for Windows Azure Active Directory — Visual Studio 2012](https://blogs.msdn.com/b/vbertocci/archive/2013/02/18/microsoft-asp-net-tools-for-windows-azure-active-directory-visual-studio-2012.aspx) — Vittorio Bertocci</span><span class="sxs-lookup"><span data-stu-id="02407-185">[Microsoft ASP.NET Tools for Windows Azure Active Directory – Visual Studio 2012](https://blogs.msdn.com/b/vbertocci/archive/2013/02/18/microsoft-asp-net-tools-for-windows-azure-active-directory-visual-studio-2012.aspx) – Vittorio Bertocci</span></span>
- [<span data-ttu-id="02407-186">Funkcje systemu Windows Azure: tożsamość</span><span class="sxs-lookup"><span data-stu-id="02407-186">Windows Azure Features: Identity</span></span>](https://docs.microsoft.com/azure/active-directory/)
- [<span data-ttu-id="02407-187">TechNet: Azure Active Directory systemu Windows</span><span class="sxs-lookup"><span data-stu-id="02407-187">TechNet: Windows Azure Active Directory</span></span>](https://technet.microsoft.com/library/hh967619.aspx)
- [<span data-ttu-id="02407-188">Windows Azure Active Directory: Programowanie aplikacji dla organizacji</span><span class="sxs-lookup"><span data-stu-id="02407-188">Windows Azure Active Directory: Develop Apps for your organization</span></span>](https://activedirectory.windowsazure.com/Develop/Single-Tenant.aspx)
- [<span data-ttu-id="02407-189">Windows Azure Active Directory: Programowanie aplikacji dla wielu organizacji</span><span class="sxs-lookup"><span data-stu-id="02407-189">Windows Azure Active Directory: Develop Apps for multiple organizations</span></span>](https://activedirectory.windowsazure.com/Develop/Multi-Tenant.aspx)
- [<span data-ttu-id="02407-190">Jak zaimplementować Logowanie jednokrotne w systemie Windows Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="02407-190">How to implement single sign-on with Windows Azure Active Directory</span></span>](https://github.com/Azure-Samples/active-directory-dotnet-webapp-openidconnect)
- <span data-ttu-id="02407-191">[Logowanie jednokrotne z systemem Windows Azure Active Directory: głębokie szczegółowe](https://blogs.msdn.com/b/vbertocci/archive/2012/07/05/single-sign-on-with-windows-azure-active-directory-a-deep-dive.aspx) — Vittorio Bertocci</span><span class="sxs-lookup"><span data-stu-id="02407-191">[Single Sign-On with Windows Azure Active Directory: a Deep Dive](https://blogs.msdn.com/b/vbertocci/archive/2012/07/05/single-sign-on-with-windows-azure-active-directory-a-deep-dive.aspx) – Vittorio Bertocci</span></span>
- [<span data-ttu-id="02407-192">Zaimplementowanie logowania jednokrotnego i zarządzanie nim za pomocą AD FS 2,0</span><span class="sxs-lookup"><span data-stu-id="02407-192">Use AD FS 2.0 to implement and manage single sign-on</span></span>](https://technet.microsoft.com/library/jj205462.aspx)

---
uid: mvc/overview/security/xsrfcsrf-prevention-in-aspnet-mvc-and-web-pages
title: Zapobieganie XSRF/CSRF w ASP.NET MVC i Web Pages | Dokumentacja firmy Microsoft
author: Rick-Anderson
description: Fałszowanie żądań między witrynami (znany także jako XSRF lub CSRF) jest ataku na aplikacje hostowane w sieci web, według której złośliwych witryn sieci web mogą mieć wpływ na interakcyjne...
ms.author: riande
ms.date: 03/14/2013
ms.assetid: aadc5fa4-8215-4fc7-afd5-bcd2ef879728
msc.legacyurl: /mvc/overview/security/xsrfcsrf-prevention-in-aspnet-mvc-and-web-pages
msc.type: authoredcontent
ms.openlocfilehash: de0e9cc168b9f18fd2bd83329106df45d7551b1a
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/09/2019
ms.locfileid: "59386563"
---
# <a name="xsrfcsrf-prevention-in-aspnet-mvc-and-web-pages"></a><span data-ttu-id="7a67a-103">Zapobieganie atakom XSRF/CSRF we wzorcach ASP.NET MVC i Web Pages</span><span class="sxs-lookup"><span data-stu-id="7a67a-103">XSRF/CSRF Prevention in ASP.NET MVC and Web Pages</span></span>

<span data-ttu-id="7a67a-104">Przez [Rick Anderson]((https://twitter.com/RickAndMSFT))</span><span class="sxs-lookup"><span data-stu-id="7a67a-104">by [Rick Anderson]((https://twitter.com/RickAndMSFT))</span></span>

> <span data-ttu-id="7a67a-105">Fałszerstwo żądania międzywitrynowego (znany także jako XSRF lub CSRF) jest ataku na aplikacje hostowane w sieci web, według której złośliwych witryn sieci web mogą mieć wpływ na interakcję między przeglądarką klienta i witryny sieci web, któremu ufają tej przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="7a67a-105">Cross-site request forgery (also known as XSRF or CSRF) is an attack against web-hosted applications whereby a malicious web site can influence the interaction between a client browser and a web site trusted by that browser.</span></span> <span data-ttu-id="7a67a-106">Te ataki są możliwe, ponieważ przeglądarki sieci web wysyła tokeny uwierzytelniania automatycznie za pomocą każdego żądania do witryny sieci web.</span><span class="sxs-lookup"><span data-stu-id="7a67a-106">These attacks are made possible because web browsers will send authentication tokens automatically with every request to a web site.</span></span> <span data-ttu-id="7a67a-107">Canonical przykładem jest plik cookie uwierzytelniania, np. ASP. Bilet uwierzytelniania formularzy w sieci.</span><span class="sxs-lookup"><span data-stu-id="7a67a-107">The canonical example is an authentication cookie, such as ASP.NET's Forms Authentication ticket.</span></span> <span data-ttu-id="7a67a-108">Jednak te ataki można zastosować witryn sieci web, które używają każdy mechanizm uwierzytelniania trwałe (na przykład uwierzytelniania Windows, Basic i tak dalej).</span><span class="sxs-lookup"><span data-stu-id="7a67a-108">However, web sites which use any persistent authentication mechanism (such as Windows Authentication, Basic, and so forth) can be targeted by these attacks.</span></span>
> 
> <span data-ttu-id="7a67a-109">Atak XSRF różni się od ataku.</span><span class="sxs-lookup"><span data-stu-id="7a67a-109">An XSRF attack is distinct from a phishing attack.</span></span> <span data-ttu-id="7a67a-110">Wyłudzanie informacji wymaga interakcji z ofiary.</span><span class="sxs-lookup"><span data-stu-id="7a67a-110">Phishing attacks require interaction from the victim.</span></span> <span data-ttu-id="7a67a-111">W celu wyłudzanie informacji złośliwych witryn sieci web przypominające docelowej witryny sieci web, a ofiary jest fooled do dostarczania informacji poufnych dla osoby atakującej.</span><span class="sxs-lookup"><span data-stu-id="7a67a-111">In a phishing attack, a malicious web site will mimic the target web site, and the victim is fooled into providing sensitive information to the attacker.</span></span> <span data-ttu-id="7a67a-112">W przypadku ataków XSRF często występuje bez interakcji ze ofiary.</span><span class="sxs-lookup"><span data-stu-id="7a67a-112">In an XSRF attack, there is often no interaction necessary from the victim.</span></span> <span data-ttu-id="7a67a-113">Przeciwnie osoba atakująca powołuje się na przeglądarce wszystkie odpowiednie pliki cookie są automatycznie wysyłane do docelowej witryny sieci web.</span><span class="sxs-lookup"><span data-stu-id="7a67a-113">Rather, the attacker is relying on the browser automatically sending all relevant cookies to the destination web site.</span></span>
> 
> <span data-ttu-id="7a67a-114">Aby uzyskać więcej informacji, zobacz [Otwórz projekt zabezpieczeń aplikacji sieci Web](https://www.owasp.org/index.php/Main_Page)(OWASP) [XSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)).</span><span class="sxs-lookup"><span data-stu-id="7a67a-114">For more information, see the [Open Web Application Security Project](https://www.owasp.org/index.php/Main_Page)(OWASP) [XSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)).</span></span>


## <a name="anatomy-of-an-attack"></a><span data-ttu-id="7a67a-115">Anatomia ataku</span><span class="sxs-lookup"><span data-stu-id="7a67a-115">Anatomy of an attack</span></span>

<span data-ttu-id="7a67a-116">Przeprowadzenie ataku XSRF, należy uwzględnić użytkownika, który chce wykonać niektóre transakcje bankowość online.</span><span class="sxs-lookup"><span data-stu-id="7a67a-116">To walk through an XSRF attack, consider a user who wants to perform some online banking transactions.</span></span> <span data-ttu-id="7a67a-117">Ten użytkownik odwiedzi najpierw WoodgroveBank.com dzienniki i, w tym momencie nagłówek odpowiedzi będzie zawierać jej pliku cookie uwierzytelniania:</span><span class="sxs-lookup"><span data-stu-id="7a67a-117">This user first visits WoodgroveBank.com and logs in, at which point the response header will contain her authentication cookie:</span></span>

[!code-console[Main](xsrfcsrf-prevention-in-aspnet-mvc-and-web-pages/samples/sample1.cmd)]

<span data-ttu-id="7a67a-118">Ponieważ plik cookie uwierzytelniania jest plik cookie sesji, jego zostanie automatycznie usunięty przez przeglądarkę podczas procesu przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="7a67a-118">Because the authentication cookie is a session cookie, it will be automatically cleared by the browser when the browser process exits.</span></span> <span data-ttu-id="7a67a-119">Jednak do tego czasu przeglądarki automatycznie będzie zawierać plik cookie z każdym żądaniem, aby WoodgroveBank.com.</span><span class="sxs-lookup"><span data-stu-id="7a67a-119">However, until that time, the browser will automatically include the cookie with each request to WoodgroveBank.com.</span></span> <span data-ttu-id="7a67a-120">Użytkownik chce teraz przenieść 1000 USD do innego konta, dzięki czemu użytkownik wypełnia formularz w witrynie bankowości i przeglądarce wysyła żądanie do serwera:</span><span class="sxs-lookup"><span data-stu-id="7a67a-120">The user now wants to transfer $1000 to another account, so she fills out a form on the banking site, and the browser makes this request to the server:</span></span>

[!code-console[Main](xsrfcsrf-prevention-in-aspnet-mvc-and-web-pages/samples/sample2.cmd)]

<span data-ttu-id="7a67a-121">Ta operacja jest efektem (inicjuje pieniężnych transakcji), dlatego witrynie bankowej wybrał wymagać metodę POST protokołu HTTP, aby zainicjować tę operację.</span><span class="sxs-lookup"><span data-stu-id="7a67a-121">Because this operation has a side effect (it initiates a monetary transaction), the banking site has chosen to require an HTTP POST in order to initiate this operation.</span></span> <span data-ttu-id="7a67a-122">Serwer odczytuje token uwierzytelniania w żądaniu, wyszukuje numer konta bieżącego użytkownika, sprawdza, czy istnieje nałożone i następnie inicjuje transakcji na docelowym koncie.</span><span class="sxs-lookup"><span data-stu-id="7a67a-122">The server reads the authentication token from the request, looks up the current user's account number, verifies that sufficient funds exist, and then initiates the transaction into the destination account.</span></span>

<span data-ttu-id="7a67a-123">Jej bankowość online pełną, użytkownik przechodzi witryny bankowości i odwiedza inne lokalizacje w sieci web.</span><span class="sxs-lookup"><span data-stu-id="7a67a-123">Her online banking complete, the user navigates away from the banking site and visits other locations on the web.</span></span> <span data-ttu-id="7a67a-124">Jedną z tych witryn — fabrikam.com — obejmuje następujące znaczniki na stronie osadzane &lt;iframe&gt;:</span><span class="sxs-lookup"><span data-stu-id="7a67a-124">One of those sites – fabrikam.com – includes the following markup on a page embedded within an &lt;iframe&gt;:</span></span>

[!code-html[Main](xsrfcsrf-prevention-in-aspnet-mvc-and-web-pages/samples/sample3.html)]

<span data-ttu-id="7a67a-125">Który następnie powoduje, że przeglądarka do wykonania tego żądania:</span><span class="sxs-lookup"><span data-stu-id="7a67a-125">Which then causes the browser to make this request:</span></span>

[!code-console[Main](xsrfcsrf-prevention-in-aspnet-mvc-and-web-pages/samples/sample4.cmd)]

<span data-ttu-id="7a67a-126">Osoba atakująca to wykorzystania fakt, że użytkownik nadal może być ważny token uwierzytelniania dla docelowej witryny sieci web i ona używa mały fragment kodu języka JavaScript w przeglądarce do metody HTTP POST do lokacji docelowej automatycznie.</span><span class="sxs-lookup"><span data-stu-id="7a67a-126">The attacker is exploiting the fact that the user might still have a valid authentication token for the target web site, and she is using a small snippet of Javascript to cause the browser to make an HTTP POST to the target site automatically.</span></span> <span data-ttu-id="7a67a-127">Jeśli token uwierzytelniania jest nadal ważny, witrynie bankowej zainicjuje przeniesienia 250 USD pod uwagę w Wybieranie osoby atakującej.</span><span class="sxs-lookup"><span data-stu-id="7a67a-127">If the authentication token is still valid, the banking site will initiate a transfer of $250 into the account of the attacker's choosing.</span></span>

### <a name="ineffective-mitigations"></a><span data-ttu-id="7a67a-128">Środki zaradcze nieefektywne</span><span class="sxs-lookup"><span data-stu-id="7a67a-128">Ineffective mitigations</span></span>

<span data-ttu-id="7a67a-129">Należy zauważyć, że w powyższym scenariuszu Usługa fakt, że WoodgroveBank.com był uzyskiwany za pośrednictwem protokołu SSL i miał pliku cookie uwierzytelniania tylko do protokołu SSL jest za mała, aby zablokować próby ataku.</span><span class="sxs-lookup"><span data-stu-id="7a67a-129">It is interesting to note that in the above scenario, the fact that WoodgroveBank.com was being accessed via SSL and had an SSL-only authentication cookie was insufficient to thwart the attack.</span></span> <span data-ttu-id="7a67a-130">Osoba atakująca jest w stanie określić [schemat identyfikatora URI](http://en.wikipedia.org/wiki/URI_scheme) (https) w jej &lt;formularza&gt; elementu, a przeglądarka kontynuuje wysyłanie niewygasłe plików cookie do lokacji docelowej, tak długo, jak te pliki cookie są zgodne z identyfikatorem URI Schemat zamierzonym obiektem docelowym.</span><span class="sxs-lookup"><span data-stu-id="7a67a-130">The attacker is able to specify the [URI scheme](http://en.wikipedia.org/wiki/URI_scheme) (https) in her &lt;form&gt; element, and the browser will continue to send unexpired cookies to the target site as long as those cookies are consistent with the URI scheme of the intended target.</span></span>

<span data-ttu-id="7a67a-131">Jeden można dokumentu uważają, że użytkownik nie po prostu odwiedź niezaufanych witryn jako odwiedzający tylko zaufane witryny jest pomaga pozostały bezpieczne w trybie online.</span><span class="sxs-lookup"><span data-stu-id="7a67a-131">One could argue that the user should simply not visit untrusted sites, as visiting only trusted sites is helps to remain safe online.</span></span> <span data-ttu-id="7a67a-132">Istnieje kilka prawdziwych danych do tego, ale Niestety te porady nie zawsze jest praktyczne.</span><span class="sxs-lookup"><span data-stu-id="7a67a-132">There is some truth to this, but unfortunately this advice is not always practical.</span></span> <span data-ttu-id="7a67a-133">Być może użytkownik "ufa" lokacji lokalnych grup dyskusyjnych ConsolidatedMessenger.</span><span class="sxs-lookup"><span data-stu-id="7a67a-133">Perhaps the user "trusts" the local news site ConsolidatedMessenger.</span></span> <span data-ttu-id="7a67a-134">ConsolidatedMessenger.com i zbliża się do odwiedziny tej lokacji zamiast tego, ale w tej lokacji ma luki w zabezpieczeniach XSS, która umożliwia osobie atakującej iniekcję ten sam fragment kodu, która była uruchomiona na fabrikam.com.</span><span class="sxs-lookup"><span data-stu-id="7a67a-134">ConsolidatedMessenger.com and goes to visit that site instead, but that site has an XSS vulnerability which allows an attacker to inject the same snippet of code that was running on fabrikam.com.</span></span>

<span data-ttu-id="7a67a-135">Możesz sprawdzić, czy żądania przychodzące mają [nagłówka Odnośnik](http://www.w3.org/Protocols/HTTP/HTRQ_Headers.html#z14) odwołuje się do domeny.</span><span class="sxs-lookup"><span data-stu-id="7a67a-135">You can verify that incoming requests have a [Referer header](http://www.w3.org/Protocols/HTTP/HTRQ_Headers.html#z14) referencing your domain.</span></span> <span data-ttu-id="7a67a-136">Spowoduje to zatrzymanie żądania wirus przesłane z domeny innej firmy.</span><span class="sxs-lookup"><span data-stu-id="7a67a-136">This will stop requests unwittingly submitted from a third-party domain.</span></span> <span data-ttu-id="7a67a-137">Jednak niektóre osoby wyłączyć nagłówka Odnośnik ich przeglądarki w celu zachowania prywatności i osoby atakujące mogą czasami podszywały się pod nagłówka Jeśli ofiary zainstalowano określone oprogramowanie niebezpieczne.</span><span class="sxs-lookup"><span data-stu-id="7a67a-137">However, some people disable their browser's Referer header for privacy reasons, and attackers can sometimes spoof that header if the victim has certain insecure software installed.</span></span> <span data-ttu-id="7a67a-138">Weryfikowanie [nagłówka Odnośnik](http://www.w3.org/Protocols/HTTP/HTRQ_Headers.html#z14) nie jest uważany za bezpieczny sposobem zapobieganie atakom XSRF.</span><span class="sxs-lookup"><span data-stu-id="7a67a-138">Verifying the [Referer header](http://www.w3.org/Protocols/HTTP/HTRQ_Headers.html#z14) is not considered a secure approach to preventing XSRF attacks.</span></span>

## <a name="web-stack-runtime-xsrf-mitigations"></a><span data-ttu-id="7a67a-139">Środki zaradcze stosu środowiska uruchomieniowego XSRF sieci Web</span><span class="sxs-lookup"><span data-stu-id="7a67a-139">Web Stack Runtime XSRF mitigations</span></span>

<span data-ttu-id="7a67a-140">Środowisko uruchomieniowe stosu sieci Web ASP.NET przechowuje wariant [wzorzec tokenu Synchronizator](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)_Prevention_Cheat_Sheet#General_Recommendation:_Synchronizer_Token_Pattern) obrony przed atakami XSRF.</span><span class="sxs-lookup"><span data-stu-id="7a67a-140">The ASP.NET Web Stack Runtime uses a variant of the [synchronizer token pattern](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)_Prevention_Cheat_Sheet#General_Recommendation:_Synchronizer_Token_Pattern) to defend against XSRF attacks.</span></span> <span data-ttu-id="7a67a-141">Ogólna postać wzorzec tokenu Synchronizator jest, że dwa tokeny anti-XSRF są przesyłane do serwera z każdej metody POST protokołu HTTP (oprócz tokenu uwierzytelniania): jeden token pliku cookie, a drugi jako wartości formularza.</span><span class="sxs-lookup"><span data-stu-id="7a67a-141">The general form of the synchronizer token pattern is that two anti-XSRF tokens are submitted to the server with each HTTP POST (In addition to the authentication token): one token as a cookie, and the other as a form value.</span></span> <span data-ttu-id="7a67a-142">Token wartości generowane przez środowisko uruchomieniowe programu ASP.NET nie są deterministyczne lub przewidywalnym przez osobę atakującą.</span><span class="sxs-lookup"><span data-stu-id="7a67a-142">The token values generated by the ASP.NET runtime are not deterministic or predictable by an attacker.</span></span> <span data-ttu-id="7a67a-143">Po przesłaniu tokenów serwer będzie zezwalać na żądania można kontynuować tylko wtedy, gdy oba tokeny przekazać wyboru porównania.</span><span class="sxs-lookup"><span data-stu-id="7a67a-143">When the tokens are submitted, the server will allow the request to proceed only if both tokens pass a comparison check.</span></span>

<span data-ttu-id="7a67a-144">Weryfikacja żądania XSRF *tokenu sesji* jest przechowywana jako plik cookie protokołu HTTP i obecnie zawiera następujące informacje w ładunku:</span><span class="sxs-lookup"><span data-stu-id="7a67a-144">The XSRF request verification *session token* is stored as an HTTP cookie and currently contains the following information in its payload:</span></span>

- <span data-ttu-id="7a67a-145">Token zabezpieczający składający się z identyfikatorem 128-bitowego losowych.</span><span class="sxs-lookup"><span data-stu-id="7a67a-145">A security token, consisting of a random 128-bit identifier.</span></span>   
 <span data-ttu-id="7a67a-146">Na poniższej ilustracji przedstawiono wyświetlane przy użyciu narzędzi deweloperskich programu Internet Explorer F12 tokenu sesji XSRF żądania weryfikacji: (Uwaga jest bieżąca implementacja parametru i podlega, nawet prawdopodobne zmienić.)</span><span class="sxs-lookup"><span data-stu-id="7a67a-146">The following image shows the XSRF request verification session token displayed with the Internet Explorer F12 developer tools: (Note this is the current implementation and is subject, even likely, to change.)</span></span>

![](xsrfcsrf-prevention-in-aspnet-mvc-and-web-pages/_static/image1.png)

<span data-ttu-id="7a67a-147">*Token pole je mimo* jest przechowywany jako `<input type="hidden" />` i zawiera następujące informacje w ładunku:</span><span class="sxs-lookup"><span data-stu-id="7a67a-147">The *field token* is stored as an `<input type="hidden" />` and contains the following information in its payload:</span></span>

- <span data-ttu-id="7a67a-148">Nazwa zalogowanego użytkownika (Jeśli uwierzytelnienie).</span><span class="sxs-lookup"><span data-stu-id="7a67a-148">The logged-in user's username (if authenticated).</span></span>
- <span data-ttu-id="7a67a-149">Wszelkie dodatkowe dane dostarczane przez [IAntiForgeryAdditionalDataProvider](https://msdn.microsoft.com/library/system.web.helpers.iantiforgeryadditionaldataprovider(v=vs.111).aspx).</span><span class="sxs-lookup"><span data-stu-id="7a67a-149">Any additional data provided by an [IAntiForgeryAdditionalDataProvider](https://msdn.microsoft.com/library/system.web.helpers.iantiforgeryadditionaldataprovider(v=vs.111).aspx).</span></span>

<span data-ttu-id="7a67a-150">Ładunki tokenów anti-XSRF są zaszyfrowana i podpisana, więc nie można wyświetlić nazwy użytkownika, korzystając z narzędzi do sprawdzenia tokenów.</span><span class="sxs-lookup"><span data-stu-id="7a67a-150">The payloads of the anti-XSRF tokens are encrypted and signed, so you can't view the username when using tools to examine the tokens.</span></span> <span data-ttu-id="7a67a-151">W przypadku aplikacji sieci web jest przeznaczony dla programu ASP.NET 4.0, usługi kryptograficzne jest określany przez [MachineKey.Encode](https://msdn.microsoft.com/library/system.web.security.machinekey.encode.aspx) procedury.</span><span class="sxs-lookup"><span data-stu-id="7a67a-151">When the web application is targeting ASP.NET 4.0, cryptographic services are provided by the [MachineKey.Encode](https://msdn.microsoft.com/library/system.web.security.machinekey.encode.aspx) routine.</span></span> <span data-ttu-id="7a67a-152">Gdy aplikacji sieci web jest docelowo ASP.NET 4.5 lub nowszej, kryptograficzne usługi są dostarczane przez [MachineKey.Protect](https://msdn.microsoft.com/library/system.web.security.machinekey.protect(v=vs.110)) procedura, która oferuje lepszą wydajność, rozszerzalność i bezpieczeństwo.</span><span class="sxs-lookup"><span data-stu-id="7a67a-152">When the web application is targeting ASP.NET 4.5 or higher, cryptographic services are provided by the [MachineKey.Protect](https://msdn.microsoft.com/library/system.web.security.machinekey.protect(v=vs.110)) routine, which offers better performance, extensibility, and security.</span></span> <span data-ttu-id="7a67a-153">Zobacz, że wpisy następujący wpis w blogu, aby uzyskać więcej informacji:</span><span class="sxs-lookup"><span data-stu-id="7a67a-153">See the following blog posts for more details:</span></span>

- [<span data-ttu-id="7a67a-154">Ulepszenia usług kryptograficznych w programie ASP.NET 4.5, (czas pacyficzny).</span><span class="sxs-lookup"><span data-stu-id="7a67a-154">Cryptographic Improvements in ASP.NET 4.5, pt.</span></span> <span data-ttu-id="7a67a-155">1</span><span class="sxs-lookup"><span data-stu-id="7a67a-155">1</span></span>](https://blogs.msdn.com/b/webdev/archive/2012/10/22/cryptographic-improvements-in-asp-net-4-5-pt-1.aspx)
- [<span data-ttu-id="7a67a-156">Ulepszenia usług kryptograficznych w programie ASP.NET 4.5, (czas pacyficzny).</span><span class="sxs-lookup"><span data-stu-id="7a67a-156">Cryptographic Improvements in ASP.NET 4.5, pt.</span></span> <span data-ttu-id="7a67a-157">2</span><span class="sxs-lookup"><span data-stu-id="7a67a-157">2</span></span>](https://blogs.msdn.com/b/webdev/archive/2012/10/23/cryptographic-improvements-in-asp-net-4-5-pt-2.aspx)
- [<span data-ttu-id="7a67a-158">Ulepszenia usług kryptograficznych w programie ASP.NET 4.5, (czas pacyficzny).</span><span class="sxs-lookup"><span data-stu-id="7a67a-158">Cryptographic Improvements in ASP.NET 4.5, pt.</span></span> <span data-ttu-id="7a67a-159">3</span><span class="sxs-lookup"><span data-stu-id="7a67a-159">3</span></span>](https://blogs.msdn.com/b/webdev/archive/2012/10/24/cryptographic-improvements-in-asp-net-4-5-pt-3.aspx)

## <a name="generating-the-tokens"></a><span data-ttu-id="7a67a-160">Generowanie tokenów</span><span class="sxs-lookup"><span data-stu-id="7a67a-160">Generating the tokens</span></span>

<span data-ttu-id="7a67a-161">Aby wygenerować tokeny anti-XSRF, należy wywołać [ @Html.AntiForgeryToken ](https://msdn.microsoft.com/library/dd470175.aspx) metody z widoku MVC lub @AntiForgery.GetHtml() ze strony Razor.</span><span class="sxs-lookup"><span data-stu-id="7a67a-161">To generate the anti-XSRF tokens, call the [@Html.AntiForgeryToken](https://msdn.microsoft.com/library/dd470175.aspx) method from an MVC view or @AntiForgery.GetHtml() from a Razor page.</span></span> <span data-ttu-id="7a67a-162">Środowisko uruchomieniowe będzie następnie wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="7a67a-162">The runtime will then perform the following steps:</span></span>

1. <span data-ttu-id="7a67a-163">Jeśli bieżące żądanie HTTP zawiera już token anti-XSRF sesji (plik cookie anti-XSRF \_ \_RequestVerificationToken), token zabezpieczający jest wyodrębniany z niego.</span><span class="sxs-lookup"><span data-stu-id="7a67a-163">If the current HTTP request already contains an anti-XSRF session token (the anti-XSRF cookie \_\_RequestVerificationToken), the security token is extracted from it.</span></span> <span data-ttu-id="7a67a-164">Żądanie HTTP nie zawiera token anti-XSRF sesji lub nie powiodło się wyodrębnienie token zabezpieczający, zostanie wygenerowany nowy token anti-XSRF losowych.</span><span class="sxs-lookup"><span data-stu-id="7a67a-164">If the HTTP request does not contain an anti-XSRF session token or if extraction of the security token fails, a new random anti-XSRF token will be generated.</span></span>
2. <span data-ttu-id="7a67a-165">Token anti-XSRF pola jest generowana z użyciem tokenu zabezpieczającego z poprzednim kroku (1) i tożsamości bieżącego zalogowanego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="7a67a-165">An anti-XSRF field token is generated using the security token from step (1) above and the identity of the current logged-in user.</span></span> <span data-ttu-id="7a67a-166">(Aby uzyskać więcej informacji na temat określania tożsamości użytkownika, zobacz **[scenariusze z obsługą specjalne](#_Scenarios_with_special)** poniższej sekcji.) Ponadto jeśli [IAntiForgeryAdditionalDataProvider](https://msdn.microsoft.com/library/jj158328(v=vs.111).aspx) jest skonfigurowany, środowisko uruchomieniowe będzie wywoływać jego [GetAdditionalData](https://msdn.microsoft.com/library/system.web.helpers.iantiforgeryadditionaldataprovider.getadditionaldata(v=vs.111).aspx) metody i dołącza token pola zwracanego ciągu.</span><span class="sxs-lookup"><span data-stu-id="7a67a-166">(For more information on determining user identity, see the **[Scenarios with special support](#_Scenarios_with_special)** section below.) Additionally, if an [IAntiForgeryAdditionalDataProvider](https://msdn.microsoft.com/library/jj158328(v=vs.111).aspx) is configured, the runtime will call its [GetAdditionalData](https://msdn.microsoft.com/library/system.web.helpers.iantiforgeryadditionaldataprovider.getadditionaldata(v=vs.111).aspx) method and include the returned string in the field token.</span></span> <span data-ttu-id="7a67a-167">(Zobacz **[konfiguracji i rozszerzalność](#_Configuration_and_extensibility)** sekcji, aby uzyskać więcej informacji.)</span><span class="sxs-lookup"><span data-stu-id="7a67a-167">(See the **[Configuration and extensibility](#_Configuration_and_extensibility)** section for more information.)</span></span>
3. <span data-ttu-id="7a67a-168">Jeśli nowy token anti-XSRF został wygenerowany w kroku (1), token nowej sesji zostaną utworzone dla niej i zostanie dodany do kolekcji wychodzące pliki cookie protokołu HTTP.</span><span class="sxs-lookup"><span data-stu-id="7a67a-168">If a new anti-XSRF token was generated in step (1), a new session token will be created to contain it and will be added to the outbound HTTP cookies collection.</span></span> <span data-ttu-id="7a67a-169">Token pole z kroku (2) zostaną opakowane w `<input type="hidden" />` elementu, a ten kod znaczników HTML będzie wartość zwracaną przez `Html.AntiForgeryToken()` lub `AntiForgery.GetHtml()`.</span><span class="sxs-lookup"><span data-stu-id="7a67a-169">The field token from step (2) will be wrapped in an `<input type="hidden" />` element, and this HTML markup will be the return value of `Html.AntiForgeryToken()` or `AntiForgery.GetHtml()`.</span></span>

## <a name="validating-the-tokens"></a><span data-ttu-id="7a67a-170">Sprawdzanie poprawności tokenów</span><span class="sxs-lookup"><span data-stu-id="7a67a-170">Validating the tokens</span></span>

<span data-ttu-id="7a67a-171">Do weryfikacji tokenów przychodzących anti-XSRF, deweloper obejmuje [ValidateAntiForgeryToken](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute(VS.108).aspx) atrybut jej akcja kontrolera MVC lub kontrolera lub wywołań nagrywa `@AntiForgery.Validate()` ze swojej strony Razor.</span><span class="sxs-lookup"><span data-stu-id="7a67a-171">To validate the incoming anti-XSRF tokens, the developer includes a [ValidateAntiForgeryToken](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute(VS.108).aspx) attribute on her MVC action or controller, or she calls `@AntiForgery.Validate()` from her Razor page.</span></span> <span data-ttu-id="7a67a-172">Środowisko uruchomieniowe wykona następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="7a67a-172">The runtime will perform the following steps:</span></span>

1. <span data-ttu-id="7a67a-173">Przychodzący token sesji i token pola są odczytywane i token anti-XSRF wyodrębnione każdego z nich.</span><span class="sxs-lookup"><span data-stu-id="7a67a-173">The incoming session token and field token are read and the anti-XSRF token extracted from each.</span></span> <span data-ttu-id="7a67a-174">Tokeny anti-XSRF muszą być identyczne na każdym etapie (2) w procedurze generacji.</span><span class="sxs-lookup"><span data-stu-id="7a67a-174">The anti-XSRF tokens must be identical per step (2) in the generation routine.</span></span>
2. <span data-ttu-id="7a67a-175">Jeśli bieżący użytkownik jest uwierzytelniony, jej nazwa użytkownika jest porównywana z przechowywanych w tokenie pole nazwy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="7a67a-175">If the current user is authenticated, her username is compared with the username stored in the field token.</span></span> <span data-ttu-id="7a67a-176">Nazwy użytkowników muszą być zgodne.</span><span class="sxs-lookup"><span data-stu-id="7a67a-176">The usernames must match.</span></span>
3. <span data-ttu-id="7a67a-177">Jeśli [IAntiForgeryAdditionalDataProvider](https://msdn.microsoft.com/library/system.web.helpers.iantiforgeryadditionaldataprovider(v=vs.111).aspx) jest skonfigurowany, środowisko uruchomieniowe wywołuje swoją *ValidateAdditionalData* metody.</span><span class="sxs-lookup"><span data-stu-id="7a67a-177">If an [IAntiForgeryAdditionalDataProvider](https://msdn.microsoft.com/library/system.web.helpers.iantiforgeryadditionaldataprovider(v=vs.111).aspx) is configured, the runtime calls its *ValidateAdditionalData* method.</span></span> <span data-ttu-id="7a67a-178">Metoda musi zwracać wartość logiczną *true*.</span><span class="sxs-lookup"><span data-stu-id="7a67a-178">The method must return the Boolean value *true*.</span></span>

<span data-ttu-id="7a67a-179">Jeśli weryfikacja zakończy się powodzeniem, żądanie jest dozwolone, aby kontynuować.</span><span class="sxs-lookup"><span data-stu-id="7a67a-179">If validation succeeds, the request is allowed to proceed.</span></span> <span data-ttu-id="7a67a-180">Jeśli weryfikacja zakończy się niepowodzeniem, spowoduje zgłoszenie ramach *HttpAntiForgeryException*.</span><span class="sxs-lookup"><span data-stu-id="7a67a-180">If validation fails, the framework will throw an *HttpAntiForgeryException*.</span></span>

## <a name="failure-conditions"></a><span data-ttu-id="7a67a-181">Warunki błędów</span><span class="sxs-lookup"><span data-stu-id="7a67a-181">Failure conditions</span></span>

<span data-ttu-id="7a67a-182">Począwszy od środowiska uruchomieniowego stosu sieci Web platformy ASP.NET w wersji 2 wszelkie *HttpAntiForgeryException* , jest zgłaszany podczas sprawdzania poprawności będzie zawierać szczegółowe informacje na temat tego, co poszło.</span><span class="sxs-lookup"><span data-stu-id="7a67a-182">Starting with The ASP.NET Web Stack Runtime v2, any *HttpAntiForgeryException* that is thrown during validation will contain detailed information about what went wrong.</span></span> <span data-ttu-id="7a67a-183">Warunki błędów aktualnie zdefiniowanych są:</span><span class="sxs-lookup"><span data-stu-id="7a67a-183">The currently defined failure conditions are:</span></span>

- <span data-ttu-id="7a67a-184">Token sesji lub tokenu formularza nie jest obecne w żądaniu.</span><span class="sxs-lookup"><span data-stu-id="7a67a-184">The session token or form token is not present in the request.</span></span>
- <span data-ttu-id="7a67a-185">Nie będzie można odczytać tokenu sesji lub tokenu formularza.</span><span class="sxs-lookup"><span data-stu-id="7a67a-185">The session token or form token is unreadable.</span></span> <span data-ttu-id="7a67a-186">Najbardziej prawdopodobną przyczyną tego jest farmy niezgodnymi wersjami środowiska uruchomieniowego stosu sieci Web platformy ASP.NET lub farmy gdzie &lt;machineKey&gt; elementu w pliku Web.config, który różni się między maszynami.</span><span class="sxs-lookup"><span data-stu-id="7a67a-186">The most likely cause of this is a farm running mismatched versions of The ASP.NET Web Stack Runtime or a farm where the &lt;machineKey&gt; element in Web.config differs between machines.</span></span> <span data-ttu-id="7a67a-187">Aby wymusić ten wyjątek przez naruszeniu albo token anti-XSRF, można użyć narzędzia, takiego jak Fiddler.</span><span class="sxs-lookup"><span data-stu-id="7a67a-187">You can use a tool such as Fiddler to force this exception by tampering with either anti-XSRF token.</span></span>
- <span data-ttu-id="7a67a-188">Token sesji i token pola zostały zamienione.</span><span class="sxs-lookup"><span data-stu-id="7a67a-188">The session token and field token were swapped.</span></span>
- <span data-ttu-id="7a67a-189">Token sesji i token pole je mimo zawierają tokenów zabezpieczających niezgodne.</span><span class="sxs-lookup"><span data-stu-id="7a67a-189">The session token and field token contain mismatched security tokens.</span></span>
- <span data-ttu-id="7a67a-190">Osadzone w tokenie pola Nazwa użytkownika jest niezgodna z bieżącego zalogowanego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="7a67a-190">The username embedded within the field token does not match the current logged-in user's username.</span></span>
- <span data-ttu-id="7a67a-191">*[IAntiForgeryAdditionalDataProvider.ValidateAdditionalData](https://msdn.microsoft.com/library/system.web.helpers.iantiforgeryadditionaldataprovider.validateadditionaldata(v=vs.111).aspx)* zwróconej metody *false*.</span><span class="sxs-lookup"><span data-stu-id="7a67a-191">The *[IAntiForgeryAdditionalDataProvider.ValidateAdditionalData](https://msdn.microsoft.com/library/system.web.helpers.iantiforgeryadditionaldataprovider.validateadditionaldata(v=vs.111).aspx)* method returned *false*.</span></span>

<span data-ttu-id="7a67a-192">Urządzenia anti-XSRF także przeprowadzić dodatkowe sprawdzenie podczas generowania tokenu lub sprawdzania poprawności i błędy podczas kontroli może spowodować zgłaszane wyjątki.</span><span class="sxs-lookup"><span data-stu-id="7a67a-192">The anti-XSRF facilities may also perform additional checking during token generation or validation, and failures during these checks may result in exceptions being thrown.</span></span> <span data-ttu-id="7a67a-193">Zobacz [WIF / ACS / opartego na oświadczeniach uwierzytelniania](#_WIF_ACS) i **[konfiguracji i rozszerzalność](#_Configuration_and_extensibility)** sekcje, aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="7a67a-193">See the [WIF / ACS / claims-based authentication](#_WIF_ACS) and **[Configuration and extensibility](#_Configuration_and_extensibility)** sections for more information.</span></span>

<a id="_Scenarios_with_special"></a>

## <a name="scenarios-with-special-support"></a><span data-ttu-id="7a67a-194">Scenariusze z obsługą specjalne</span><span class="sxs-lookup"><span data-stu-id="7a67a-194">Scenarios with special support</span></span>

### <a name="anonymous-authentication"></a><span data-ttu-id="7a67a-195">Uwierzytelnianie anonimowe</span><span class="sxs-lookup"><span data-stu-id="7a67a-195">Anonymous authentication</span></span>

<span data-ttu-id="7a67a-196">System anti-XSRF zawiera specjalne pomocy technicznej dla użytkowników anonimowych, w którym "anonimowy" jest zdefiniowana jako użytkownik gdzie *IIdentity.IsAuthenticated* właściwość zwraca *false*.</span><span class="sxs-lookup"><span data-stu-id="7a67a-196">The anti-XSRF system contains special support for anonymous users, where "anonymous" is defined as a user where the *IIdentity.IsAuthenticated* property returns *false*.</span></span> <span data-ttu-id="7a67a-197">Scenariusze obejmują zapewnienie ochrony XSRF do strony logowania (zanim użytkownik jest uwierzytelniany) i schematów uwierzytelniania niestandardowego, których aplikacja używa mechanizmu innych niż *IIdentity* do identyfikacji użytkowników.</span><span class="sxs-lookup"><span data-stu-id="7a67a-197">Scenarios include providing XSRF protection to the login page (before the user is authenticated) and custom authentication schemes where the application uses a mechanism other than *IIdentity* to identify users.</span></span>

<span data-ttu-id="7a67a-198">Do obsługi tych scenariuszy, pamiętaj, że tokeny sesji i pola są sprzęgane przy token zabezpieczający, który jest identyfikatorem nieprzezroczyste generowany losowo 128-bitowego.</span><span class="sxs-lookup"><span data-stu-id="7a67a-198">To support these scenarios, recall that the session and field tokens are joined by a security token, which is a 128-bit randomly-generated opaque identifier.</span></span> <span data-ttu-id="7a67a-199">Ten token zabezpieczający służy do śledzenia sesji użytkownika, jak ona powoduje przejście lokacji, aby skutecznie służy celem anonimowy identyfikator.</span><span class="sxs-lookup"><span data-stu-id="7a67a-199">This security token is used to track an individual user's session as she navigates the site, so it effectively serves the purpose of an anonymous identifier.</span></span> <span data-ttu-id="7a67a-200">Pusty ciąg jest używany zamiast nazwy użytkownika dla generowania i sprawdzanie poprawności procedur opisanych powyżej.</span><span class="sxs-lookup"><span data-stu-id="7a67a-200">An empty string is used in place of the username for the generation and validation routines described above.</span></span>

<a id="_WIF_ACS"></a>

### <a name="wif--acs--claims-based-authentication"></a><span data-ttu-id="7a67a-201">Program WIF / ACS / opartego na oświadczeniach uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="7a67a-201">WIF / ACS / claims-based authentication</span></span>

<span data-ttu-id="7a67a-202">Zwykle *IIdentity* klasy wbudowane w platformę .NET Framework ma właściwości, *IIdentity.Name* jest wystarczająca do unikatowego identyfikowania użytkownika określonego w ramach określonej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="7a67a-202">Normally, the *IIdentity* classes built in to the .NET Framework have the property that *IIdentity.Name* is sufficient to uniquely identify a particular user within a particular application.</span></span> <span data-ttu-id="7a67a-203">Na przykład *FormsIdentity.Name* zwraca nazwę użytkownika, przechowywane w bazie danych członkostwa (która jest unikatowa dla wszystkich aplikacji, w zależności od tego, że ta baza danych), *WindowsIdentity.Name* zwraca kwalifikowanej domeny tożsamość użytkownika i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="7a67a-203">For example, *FormsIdentity.Name* returns the username stored in the membership database (which is unique for all applications depending on that database), *WindowsIdentity.Name* returns the domain-qualified identity of the user, and so on.</span></span> <span data-ttu-id="7a67a-204">Te systemy zapewnia nie tylko uwierzytelniania; mogą również *zidentyfikować* użytkowników w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="7a67a-204">These systems provide not only authentication; they also *identify* users to an application.</span></span>

<span data-ttu-id="7a67a-205">W przypadku uwierzytelniania opartego na oświadczeniach z drugiej strony, nie wymaga identyfikujący określonego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="7a67a-205">Claims-based authentication, on the other hand, does not necessarily require identifying a particular user.</span></span> <span data-ttu-id="7a67a-206">Zamiast tego *ClaimsPrincipal* i *ClaimsIdentity* typy są skojarzone z zestawem *oświadczenia* wystąpień, w której poszczególne oświadczeń może być "is lat 18 +" lub " gdy administrator"na jakąkolwiek inną.</span><span class="sxs-lookup"><span data-stu-id="7a67a-206">Instead, the *ClaimsPrincipal* and *ClaimsIdentity* types are associated with a set of *Claim* instances, where the individual claims might be "is 18+ years of age" or "is an administrator" to anything else.</span></span> <span data-ttu-id="7a67a-207">Ponieważ użytkownik nie musi być identyfikowany, środowisko uruchomieniowe nie może używać *ClaimsIdentity.Name* właściwość jako unikatowy identyfikator dla tego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="7a67a-207">Since the user hasn't necessarily been identified, the runtime cannot use the *ClaimsIdentity.Name* property as a unique identifier for this particular user.</span></span> <span data-ttu-id="7a67a-208">Rzeczywiste przykłady obserwowała, jak zespół gdzie *ClaimsIdentity.Name* zwraca *null*, zwraca nazwę przyjazną (wyświetlanie) lub, w przeciwnym razie zwraca wartość typu ciąg, który nie jest przeznaczone do użycia jako unikatowy identyfikator dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="7a67a-208">The team has seen real-world examples where *ClaimsIdentity.Name* returns *null*, returns a friendly (display) name, or otherwise returns a string that isn't appropriate for use as a unique identifier for the user.</span></span>

<span data-ttu-id="7a67a-209">Wiele wdrożeń, w których korzystanie z uwierzytelniania opartego na oświadczeniach za pomocą [Azure Access Control Service](https://msdn.microsoft.com/library/windowsazure/gg429786.aspx) (ACS) w szczególności.</span><span class="sxs-lookup"><span data-stu-id="7a67a-209">Many of deployments which use claims-based authentication are using [Azure Access Control Service](https://msdn.microsoft.com/library/windowsazure/gg429786.aspx) (ACS) in particular.</span></span> <span data-ttu-id="7a67a-210">Usługi ACS umożliwia deweloperowi skonfigurować poszczególne *dostawców tożsamości* (np. ADFS, dostawcy Account firmy Microsoft, dostawców uwierzytelniania OpenID, takich jak Yahoo!, itp.), i zwracają dostawców tożsamości *nazwy identyfikatorów*.</span><span class="sxs-lookup"><span data-stu-id="7a67a-210">ACS allows the developer to configure individual *identity providers* (such as ADFS, the Microsoft Account provider, OpenID providers like Yahoo!, etc.), and the identity providers return *name identifiers*.</span></span> <span data-ttu-id="7a67a-211">Identyfikatory te nazwy mogą zawierać identyfikowalne dane osobowe, jak adres e-mail, lub można zachować anonimowość takich jak prywatny osobistego identyfikatora (PPID).</span><span class="sxs-lookup"><span data-stu-id="7a67a-211">These name identifiers may contain Personally Identifiable Information (PII) like an email address, or they could be anonymized like a Private Personal Identifier (PPID).</span></span> <span data-ttu-id="7a67a-212">Niezależnie od tego, krotki (dostawcy tożsamości, identyfikator nazwy) wystarczająco służy jako token śledzenia odpowiednie dla danego użytkownika, gdy użytkownik przegląda witryny, dzięki środowisko uruchomieniowe stosu sieci Web ASP.NET za pomocą spójnej kolekcji, zamiast nazwy użytkownika, podczas generowania i Sprawdzanie poprawności tokenów pola anti-XSRF.</span><span class="sxs-lookup"><span data-stu-id="7a67a-212">Regardless, the tuple (identity provider, name identifier) sufficiently serves as an appropriate tracking token for a particular user while she is browsing the site, so the ASP.NET Web Stack Runtime can use the tuple in place of the username when generating and validating anti-XSRF field tokens.</span></span> <span data-ttu-id="7a67a-213">Identyfikatory URI określonego dostawcy tożsamości i identyfikator nazwy są następujące:</span><span class="sxs-lookup"><span data-stu-id="7a67a-213">The particular URIs for the identity provider and the name identifier are :</span></span>

- `http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider`
- `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier`

<span data-ttu-id="7a67a-214">(zobacz ten [strony dokumentacji usługi ACS](https://msdn.microsoft.com/library/windowsazure/gg185971.aspx) Aby uzyskać więcej informacji.)</span><span class="sxs-lookup"><span data-stu-id="7a67a-214">(see this [ACS doc page](https://msdn.microsoft.com/library/windowsazure/gg185971.aspx) for more info.)</span></span>

<span data-ttu-id="7a67a-215">Podczas tworzenia lub weryfikacji tokenu, środowisko uruchomieniowe stosu sieci Web ASP.NET w środowisku uruchomieniowym spróbuje powiązanie z typami:</span><span class="sxs-lookup"><span data-stu-id="7a67a-215">When generating or validating a token, the ASP.NET Web Stack Runtime will at runtime try binding to the types:</span></span>

- `Microsoft.IdentityModel.Claims.IClaimsIdentity, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35` <span data-ttu-id="7a67a-216">(W przypadku zestawu SDK programu WIF.)</span><span class="sxs-lookup"><span data-stu-id="7a67a-216">(For the WIF SDK.)</span></span>
- `System.Security.Claims.ClaimsIdentity` <span data-ttu-id="7a67a-217">(Dla platformy .NET 4.5).</span><span class="sxs-lookup"><span data-stu-id="7a67a-217">(For .NET 4.5).</span></span>

<span data-ttu-id="7a67a-218">Jeśli istnieje tych typów, a bieżący użytkownik *IIIIdentity* implementuje lub podklasy jeden z tych typów, funkcji anti-XSRF użyje (dostawcy tożsamości, identyfikator nazwy) krotki zamiast nazwy użytkownika podczas generowania i Sprawdzanie poprawności tokenów.</span><span class="sxs-lookup"><span data-stu-id="7a67a-218">If these types exist, and if the current user's *IIIIdentity* implements or subclasses one of these types, the anti-XSRF facility will use the (identity provider, name identifier) tuple in place of the username when generating and validating the tokens.</span></span> <span data-ttu-id="7a67a-219">Jeśli ma nie takich spójnej kolekcji, żądanie zakończy się niepowodzeniem z powodu błędu dla dewelopera z opisem skonfigurować system anti-XSRF zrozumienie mechanizm określonego uwierzytelniania opartego na oświadczeniach w użyciu.</span><span class="sxs-lookup"><span data-stu-id="7a67a-219">If no such tuple is present, the request will fail with an error describing to the developer how to configure the anti-XSRF system to understand the particular claims-based authentication mechanism in use.</span></span> <span data-ttu-id="7a67a-220">Zobacz **[konfiguracji i rozszerzalność](#_Configuration_and_extensibility)** sekcji, aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="7a67a-220">See the **[Configuration and extensibility](#_Configuration_and_extensibility)** section for more information.</span></span>

### <a name="oauth--openid-authentication"></a><span data-ttu-id="7a67a-221">OAuth / OpenID uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="7a67a-221">OAuth / OpenID authentication</span></span>

<span data-ttu-id="7a67a-222">Na koniec funkcji anti-XSRF ma specjalne obsługę aplikacji, które korzystają z uwierzytelniania OAuth lub OpenID.</span><span class="sxs-lookup"><span data-stu-id="7a67a-222">Finally, the anti-XSRF facility has special support for applications which use OAuth or OpenID authentication.</span></span> <span data-ttu-id="7a67a-223">Ta funkcja jest oparta na Algorytm heurystyczny: Jeśli bieżący *IIdentity.Name* rozpoczyna się od http:// lub https://, porównywanie nazwy użytkownika zostanie wykonane, a następnie za pomocą porównania porządkowego a nie domyślny moduł porównujący OrdinalIgnoreCase.</span><span class="sxs-lookup"><span data-stu-id="7a67a-223">This support is heuristic-based: if the current *IIdentity.Name* begins with http:// or https://, then username comparisons will be done using an Ordinal comparer rather than the default OrdinalIgnoreCase comparer.</span></span>

<a id="_Configuration_and_extensibility"></a>

## <a name="configuration-and-extensibility"></a><span data-ttu-id="7a67a-224">Konfiguracja i rozszerzalność</span><span class="sxs-lookup"><span data-stu-id="7a67a-224">Configuration and extensibility</span></span>

<span data-ttu-id="7a67a-225">Od czasu do czasu deweloperów może być ściślejszą kontrolę generowania anti-XSRF i zachowania poprawności.</span><span class="sxs-lookup"><span data-stu-id="7a67a-225">Occasionally, developers may want tighter control over the anti-XSRF generation and validation behaviors.</span></span> <span data-ttu-id="7a67a-226">Na przykład może być niepożądane jest pomocników MVC i Web Pages domyślne zachowanie automatyczne dodawanie plików cookie protokołu HTTP do odpowiedzi, a deweloper pragną zachować tokenów w innym miejscu.</span><span class="sxs-lookup"><span data-stu-id="7a67a-226">For example, perhaps the MVC and Web Pages helpers' default behavior of automatically adding HTTP cookies to the response is undesirable, and the developer may wish to persist the tokens elsewhere.</span></span> <span data-ttu-id="7a67a-227">Istnieją dwa interfejsy API, aby pomóc w tym:</span><span class="sxs-lookup"><span data-stu-id="7a67a-227">There exist two APIs to assist with this:</span></span>

`AntiForgery.GetTokens(string oldCookieToken, out string newCookieToken, out string formToken);`  
`AntiForgery.Validate(string cookieToken, string formToken);`

<span data-ttu-id="7a67a-228">*GetTokens* metoda przyjmuje jako dane wejściowe istniejących XSRF żądania weryfikacji tokenu sesji (która może być null) i tworzy jako dane wyjściowe w nowy XSRF żądania weryfikacji tokenu sesji i token pole je mimo.</span><span class="sxs-lookup"><span data-stu-id="7a67a-228">The *GetTokens* method takes as input an existing XSRF request verification session token (which may be null) and produces as output a new XSRF request verification session token and field token.</span></span> <span data-ttu-id="7a67a-229">Tokeny są po prostu nieprzezroczyste ciągów nie dekoracji; *formToken* wartość dla wystąpienia nie będzie zawijany w &lt;wejściowych&gt; tagu.</span><span class="sxs-lookup"><span data-stu-id="7a67a-229">The tokens are simply opaque strings with no decoration; the *formToken* value will for instance not be wrapped in an &lt;input&gt; tag.</span></span> <span data-ttu-id="7a67a-230">*NewCookieToken* wartość może mieć wartości null; Jeśli ten problem wystąpi, a następnie *oldCookieToken* wartość jest nadal ważny, a nie nowy plik cookie odpowiedzi, należy ustawić.</span><span class="sxs-lookup"><span data-stu-id="7a67a-230">The *newCookieToken* value may be null; if this occurs, then the *oldCookieToken* value is still valid and no new response cookie need be set.</span></span> <span data-ttu-id="7a67a-231">Obiekt wywołujący *GetTokens* jest odpowiedzialny za przechowywanie żadnych plików cookie na potrzeby odpowiedzi lub generowania marżę konieczne; *GetTokens* sama metoda nie ma wpływu na odpowiedź jako efekt uboczny.</span><span class="sxs-lookup"><span data-stu-id="7a67a-231">The caller of *GetTokens* is responsible for persisting any necessary response cookies or generating any necessary markup; the *GetTokens* method itself will not alter the response as a side effect.</span></span> <span data-ttu-id="7a67a-232">*Weryfikacji* metoda przyjmuje przychodzących sesji i pole tokenów i uruchamia logikę weryfikacji wyżej nad nimi.</span><span class="sxs-lookup"><span data-stu-id="7a67a-232">The *Validate* method takes the incoming session and field tokens and runs the aforementioned validation logic over them.</span></span>

### <a name="antiforgeryconfig"></a><span data-ttu-id="7a67a-233">AntiForgeryConfig</span><span class="sxs-lookup"><span data-stu-id="7a67a-233">AntiForgeryConfig</span></span>

<span data-ttu-id="7a67a-234">Deweloper może skonfigurować system anti-XSRF z aplikacji\_Start.</span><span class="sxs-lookup"><span data-stu-id="7a67a-234">The developer may configure the anti-XSRF system from Application\_Start.</span></span> <span data-ttu-id="7a67a-235">Konfiguracja jest programowe.</span><span class="sxs-lookup"><span data-stu-id="7a67a-235">Configuration is programmatic.</span></span> <span data-ttu-id="7a67a-236">Właściwości statyczne *AntiForgeryConfig* typu zostały opisane poniżej.</span><span class="sxs-lookup"><span data-stu-id="7a67a-236">The properties of the static *AntiForgeryConfig* type are described below.</span></span> <span data-ttu-id="7a67a-237">Większość użytkowników przy użyciu oświadczeń chcesz ustawić właściwość UniqueClaimTypeIdentifier.</span><span class="sxs-lookup"><span data-stu-id="7a67a-237">Most users using claims will want to set the UniqueClaimTypeIdentifier property.</span></span>

| **<span data-ttu-id="7a67a-238">Właściwość</span><span class="sxs-lookup"><span data-stu-id="7a67a-238">Property</span></span>** | **<span data-ttu-id="7a67a-239">Opis</span><span class="sxs-lookup"><span data-stu-id="7a67a-239">Description</span></span>** |
| --- | --- |
| **<span data-ttu-id="7a67a-240">AdditionalDataProvider</span><span class="sxs-lookup"><span data-stu-id="7a67a-240">AdditionalDataProvider</span></span>** | <span data-ttu-id="7a67a-241">[IAntiForgeryAdditionalDataProvider](https://msdn.microsoft.com/library/system.web.helpers.iantiforgeryadditionaldataprovider(v=vs.111).aspx) który udostępnia dodatkowe dane podczas generowania tokenu i używa dodatkowych danych podczas weryfikowania tokenu.</span><span class="sxs-lookup"><span data-stu-id="7a67a-241">An [IAntiForgeryAdditionalDataProvider](https://msdn.microsoft.com/library/system.web.helpers.iantiforgeryadditionaldataprovider(v=vs.111).aspx) that provides additional data during token generation and consumes additional data during token validation.</span></span> <span data-ttu-id="7a67a-242">Wartość domyślna to *null*.</span><span class="sxs-lookup"><span data-stu-id="7a67a-242">The default value is *null*.</span></span> <span data-ttu-id="7a67a-243">Aby uzyskać więcej informacji, zobacz [IAntiForgeryAdditionalDataProvider](https://msdn.microsoft.com/library/system.web.helpers.iantiforgeryadditionaldataprovider(v=vs.111).aspx) sekcji.</span><span class="sxs-lookup"><span data-stu-id="7a67a-243">For more information, see the [IAntiForgeryAdditionalDataProvider](https://msdn.microsoft.com/library/system.web.helpers.iantiforgeryadditionaldataprovider(v=vs.111).aspx) section.</span></span> |
| **<span data-ttu-id="7a67a-244">CookieName</span><span class="sxs-lookup"><span data-stu-id="7a67a-244">CookieName</span></span>** | <span data-ttu-id="7a67a-245">Ciąg, który zawiera nazwę pliku cookie HTTP, który jest używany do przechowywania tokenu anti-XSRF sesji.</span><span class="sxs-lookup"><span data-stu-id="7a67a-245">A string that provides the name of the HTTP cookie that is used to store the anti-XSRF session token.</span></span> <span data-ttu-id="7a67a-246">Jeśli ta wartość nie jest ustawiona, nazwy będą automatycznie generowane na podstawie aplikacji wdrożonej ścieżki wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="7a67a-246">If this value is not set, a name will be automatically generated based on the application's deployed virtual path.</span></span> <span data-ttu-id="7a67a-247">Wartość domyślna to *null*.</span><span class="sxs-lookup"><span data-stu-id="7a67a-247">The default value is *null*.</span></span> |
| **<span data-ttu-id="7a67a-248">RequireSsl</span><span class="sxs-lookup"><span data-stu-id="7a67a-248">RequireSsl</span></span>** | <span data-ttu-id="7a67a-249">Wartość logiczna, która określa, czy tokeny anti-XSRF są wymagane do przesłania za pośrednictwem kanału zabezpieczonego protokołem SSL.</span><span class="sxs-lookup"><span data-stu-id="7a67a-249">A Boolean that dictates whether the anti-XSRF tokens are required to be submitted over an SSL-secured channel.</span></span> <span data-ttu-id="7a67a-250">Jeśli ta wartość jest *true*, plików cookie generowane automatycznie, będzie miał "bezpieczne" ustawiona jest flaga i interfejsów API anti-XSRF będzie zgłaszać wyjątek, jeśli wywołane z wnętrza żądania, który nie jest przesyłany za pośrednictwem protokołu SSL.</span><span class="sxs-lookup"><span data-stu-id="7a67a-250">If this value is *true*, any automatically-generated cookies will have the "secure" flag set, and the anti-XSRF APIs will throw if called from within a request that is not submitted via SSL.</span></span> <span data-ttu-id="7a67a-251">Wartość domyślna to *false*.</span><span class="sxs-lookup"><span data-stu-id="7a67a-251">The default value is *false*.</span></span> |
| **<span data-ttu-id="7a67a-252">SuppressIdentityHeuristicChecks</span><span class="sxs-lookup"><span data-stu-id="7a67a-252">SuppressIdentityHeuristicChecks</span></span>** | <span data-ttu-id="7a67a-253">Wartość logiczna, która określa, czy system anti-XSRF dezaktywować jego obsługę tożsamości opartej na oświadczeniach.</span><span class="sxs-lookup"><span data-stu-id="7a67a-253">A Boolean that dictates whether the anti-XSRF system should deactivate its support for claims-based identities.</span></span> <span data-ttu-id="7a67a-254">Jeśli ta wartość jest *true*, system założy, że *IIdentity.Name* jest przeznaczone do użycia jako identyfikator unikatowy dla poszczególnych użytkowników i nie będzie próbował szczególny *IClaimsIdentity*lub *ClClaimsIdentity* zgodnie z opisem w [WIF / ACS / opartego na oświadczeniach uwierzytelniania](#_WIF_ACS) sekcji.</span><span class="sxs-lookup"><span data-stu-id="7a67a-254">If this value is *true*, the system will assume that *IIdentity.Name* is appropriate for use as a unique per-user identifier and will not try to special-case *IClaimsIdentity* or *ClClaimsIdentity* as described in the [WIF / ACS / claims-based authentication](#_WIF_ACS) section.</span></span> <span data-ttu-id="7a67a-255">Wartość domyślna to `false`.</span><span class="sxs-lookup"><span data-stu-id="7a67a-255">The default value is `false`.</span></span> |
| **<span data-ttu-id="7a67a-256">UniqueClaimTypeIdentifier</span><span class="sxs-lookup"><span data-stu-id="7a67a-256">UniqueClaimTypeIdentifier</span></span>** | <span data-ttu-id="7a67a-257">Ciąg wskazujący typ oświadczenia, które jest przeznaczone do użycia jako identyfikator unikatowy dla poszczególnych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="7a67a-257">A string that indicates which claim type is appropriate for use as a unique per-user identifier.</span></span> <span data-ttu-id="7a67a-258">Jeśli ta wartość jest ustawiony, bieżący *IIdentity* opartego na oświadczeniach, system spróbuje wyodrębnić oświadczenia o typie określonym przez *UniqueClaimTypeIdentifier*, i zostanie użyta wartość odpowiedniego zamiast nazwy użytkownika podczas generowania tokenu pola.</span><span class="sxs-lookup"><span data-stu-id="7a67a-258">If this value is set and the current *IIdentity* is claims-based, the system will attempt to extract a claim of the type specified by *UniqueClaimTypeIdentifier*, and the corresponding value will be used in place of the user's username when generating the field token.</span></span> <span data-ttu-id="7a67a-259">Jeśli typ oświadczenia nie zostanie znaleziony, system nie obsłuży żądania.</span><span class="sxs-lookup"><span data-stu-id="7a67a-259">If the claim type is not found, the system will fail the request.</span></span> <span data-ttu-id="7a67a-260">Wartość domyślna to *null*, co oznacza, że system powinien używać (dostawcy tożsamości, identyfikator nazwy) krotki, jak opisano wcześniej zamiast nazwy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="7a67a-260">The default value is *null*, which indicates that the system should use the (identity provider, name identifier) tuple as previously described in place of the user's username.</span></span> |

<a id="_IAntiForgeryAdditionalDataProvider"></a>

### <a name="iantiforgeryadditionaldataprovider"></a><span data-ttu-id="7a67a-261">IAntiForgeryAdditionalDataProvider</span><span class="sxs-lookup"><span data-stu-id="7a67a-261">IAntiForgeryAdditionalDataProvider</span></span>

<span data-ttu-id="7a67a-262">*[IAntiForgeryAdditionalDataProvider](https://msdn.microsoft.com/library/system.web.helpers.iantiforgeryadditionaldataprovider(v=vs.111).aspx)* typu umożliwia deweloperom rozszerzania działania systemu anti-XSRF przez obustronne konwertowanie w każdy token dodatkowe dane.</span><span class="sxs-lookup"><span data-stu-id="7a67a-262">The *[IAntiForgeryAdditionalDataProvider](https://msdn.microsoft.com/library/system.web.helpers.iantiforgeryadditionaldataprovider(v=vs.111).aspx)* type allows developers to extend the behavior of the anti-XSRF system by round-tripping additional data in each token.</span></span> <span data-ttu-id="7a67a-263">*GetAdditionalData* metoda jest wywoływana za każdym razem generowania tokenu pola i wartość zwracana jest osadzony w generowanych token.</span><span class="sxs-lookup"><span data-stu-id="7a67a-263">The *GetAdditionalData* method is called each time a field token is generated, and the return value is embedded within the generated token.</span></span> <span data-ttu-id="7a67a-264">Implementujący może zwrócić sygnaturę czasową, identyfikatora jednorazowego lub dowolnej innej wartości, które użytkownik chce z tej metody.</span><span class="sxs-lookup"><span data-stu-id="7a67a-264">An implementer could return a timestamp, a nonce, or any other value she wishes from this method.</span></span>

<span data-ttu-id="7a67a-265">Podobnie *ValidateAdditionalData* metoda jest wywoływana za każdym razem token pola jest weryfikowana, a ciąg "dodatkowe dane", które zostały osadzone w tokenie jest przekazywany do metody.</span><span class="sxs-lookup"><span data-stu-id="7a67a-265">Similarly, the *ValidateAdditionalData* method is called each time a field token is validated, and the "additional data" string that was embedded within the token is passed to the method.</span></span> <span data-ttu-id="7a67a-266">Procedury weryfikacji implementacji przekroczenie limitu czasu (sprawdzając bieżący czas od czasu, która została zapisana, gdy został utworzony token), identyfikatora jednorazowego sprawdzania, czy procedura lub inne potrzeby logiki.</span><span class="sxs-lookup"><span data-stu-id="7a67a-266">The validation routine could implement a timeout (by checking the current time against the time that was stored when the token was created), a nonce checking routine, or any other desired logic.</span></span>

## <a name="design-decisions-and-security-considerations"></a><span data-ttu-id="7a67a-267">Zagadnienia dotyczące zabezpieczeń i decyzje dotyczące projektu</span><span class="sxs-lookup"><span data-stu-id="7a67a-267">Design decisions and security considerations</span></span>

<span data-ttu-id="7a67a-268">Token zabezpieczający, który łączy tokenów sesji i pola jest technicznie tylko niezbędne podczas próby ochrony anonimowe / nieuwierzytelnionych użytkowników przed atakami XSRF.</span><span class="sxs-lookup"><span data-stu-id="7a67a-268">The security token that links the session and field tokens is technically only necessary when trying to protect anonymous / unauthenticated users against XSRF attacks.</span></span> <span data-ttu-id="7a67a-269">Gdy użytkownik jest uwierzytelniany, token uwierzytelniania, sama (prawdopodobnie przesyłany w postaci pliku cookie) może być używany jako jedną połowę Synchronizator token pary.</span><span class="sxs-lookup"><span data-stu-id="7a67a-269">When the user is authenticated, the authentication token itself (presumably submitted in the form of a cookie) could be used as one half of a synchronizer token pair.</span></span> <span data-ttu-id="7a67a-270">Jednak istnieją scenariusze prawidłowy na potrzeby ochrony strony logowania testowanych przez nieuwierzytelnionych użytkowników i logiki anti-XSRF wykonał prostsze zawsze generowania i sprawdzanie poprawności tokenu zabezpieczeń, nawet w przypadku uwierzytelnionych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="7a67a-270">However, there are valid scenarios for protecting login pages hit by unauthenticated users, and the anti-XSRF logic was made simpler by always generating and validating the security token, even for authenticated users.</span></span> <span data-ttu-id="7a67a-271">Również zapewnia dodatkową ochronę w przypadku, gdy token pola nigdy nie zostanie naruszone przez osobę atakującą, jako ustawienie lub zgadywania tokenu sesji może być inny próg wykluczający dla osoby atakującej do pokonania.</span><span class="sxs-lookup"><span data-stu-id="7a67a-271">It also does provide some additional protection in the event that a field token is ever compromised by an attacker, as setting or guessing the session token would be another hurdle for the attacker to overcome.</span></span>

<span data-ttu-id="7a67a-272">Deweloperzy należy zachować ostrożność, gdy wiele aplikacji znajdują się w jednej domenie.</span><span class="sxs-lookup"><span data-stu-id="7a67a-272">Developers should use caution when multiple applications are hosted in a single domain.</span></span> <span data-ttu-id="7a67a-273">Na przykład nawet jeśli *example1.cloudapp.net* i *example2.cloudapp.net* różnych hostów istnieje relacja nawiązywanie niejawnych relacji zaufania między wszystkimi hostami w ramach  *\*. cloudapp.net* domeny.</span><span class="sxs-lookup"><span data-stu-id="7a67a-273">For example, even though *example1.cloudapp.net* and *example2.cloudapp.net* are different hosts, there is an implicit trust relationship between all hosts under the *\*.cloudapp.net* domain.</span></span> <span data-ttu-id="7a67a-274">Ta relacja zaufania niejawne [umożliwia potencjalnie niezaufane hosty wpływa na pliki cookie siebie nawzajem](http://stackoverflow.com/questions/9636857/how-can-asp-net-or-asp-net-mvc-be-protected-from-related-domain-cookie-attacks) (zasady tego samego źródła, które określają sposób wysyłanie żądań AJAX nie zawsze dotyczą plików cookie protokołu HTTP).</span><span class="sxs-lookup"><span data-stu-id="7a67a-274">This implicit trust relationship [allows potentially untrusted hosts to affect each other's cookies](http://stackoverflow.com/questions/9636857/how-can-asp-net-or-asp-net-mvc-be-protected-from-related-domain-cookie-attacks) (the same-origin policies that govern AJAX requests do not necessarily apply to HTTP cookies).</span></span> <span data-ttu-id="7a67a-275">Środowisko uruchomieniowe stosu sieci Web ASP.NET zapewnia pewne ograniczenia, w tym, że nazwa użytkownika jest wbudowane w token pola, więc nawet, jeśli złośliwe domeny podrzędnej jest w stanie zastępowania tokenu sesji będzie on mógł wygenerować token prawidłowym polem dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="7a67a-275">The ASP.NET Web Stack Runtime provides some mitigation in that the username is embedded into the field token, so even if a malicious subdomain is able to overwrite a session token it will be unable to generate a valid field token for the user.</span></span> <span data-ttu-id="7a67a-276">Jednak w przypadku hostowania w środowisku usługi procedury wbudowanych anti-XSRF nadal nie obrony przed przejęcie kontroli sesji lub logowania XSRF.</span><span class="sxs-lookup"><span data-stu-id="7a67a-276">However, when hosted in such an environment the built-in anti-XSRF routines still cannot defend against session hijacking or login XSRF.</span></span>

<span data-ttu-id="7a67a-277">Procedury anti-XSRF aktualnie nie obrony przed [porywaniu kliknięć](https://www.owasp.org/index.php/Clickjacking).</span><span class="sxs-lookup"><span data-stu-id="7a67a-277">The anti-XSRF routines currently do not defend against [clickjacking](https://www.owasp.org/index.php/Clickjacking).</span></span> <span data-ttu-id="7a67a-278">Aplikacje, które chcesz chronić się przed porywaniu kliknięć może łatwo to zrobić, wysyłając X-Frame-Options: Nagłówek SAMEORIGIN z każdej odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="7a67a-278">Applications that wish to defend themselves against clickjacking may easily do so by sending an X-Frame-Options: SAMEORIGIN header with each response.</span></span> <span data-ttu-id="7a67a-279">Tego pliku nagłówkowego jest obsługiwana przez wszystkie najnowsze przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="7a67a-279">This header is supported by all recent browsers.</span></span> <span data-ttu-id="7a67a-280">Aby uzyskać więcej informacji, zobacz [blog programu Internet Explorer](https://blogs.msdn.com/b/ieinternals/archive/2010/03/30/combating-clickjacking-with-x-frame-options.aspx), [blogu SDL](https://blogs.msdn.com/b/sdl/archive/2009/02/05/clickjacking-defense-in-ie8.aspx), i [OWASP](https://www.owasp.org/index.php/Clickjacking).</span><span class="sxs-lookup"><span data-stu-id="7a67a-280">For more information, see the [IE blog](https://blogs.msdn.com/b/ieinternals/archive/2010/03/30/combating-clickjacking-with-x-frame-options.aspx), the [SDL blog](https://blogs.msdn.com/b/sdl/archive/2009/02/05/clickjacking-defense-in-ie8.aspx), and [OWASP](https://www.owasp.org/index.php/Clickjacking).</span></span> <span data-ttu-id="7a67a-281">Środowisko uruchomieniowe stosu sieci Web ASP.NET może w niektórych upewnij przyszłej wersji platformy MVC i pomocników anti-XSRF stron sieci Web automatycznie ustawić tego pliku nagłówkowego, dzięki czemu aplikacje są automatycznie chronione przed tego rodzaju atak.</span><span class="sxs-lookup"><span data-stu-id="7a67a-281">The ASP.NET Web Stack Runtime may in some future release make the MVC and Web Pages anti-XSRF helpers automatically set this header so that applications are automatically protected against this attack.</span></span>

<span data-ttu-id="7a67a-282">Deweloperzy sieci Web powinna w dalszym ciągu upewnij się, że ich lokacji nie jest narażony na ataki XSS.</span><span class="sxs-lookup"><span data-stu-id="7a67a-282">Web developers should continue to ensure that their site is not vulnerable to XSS attacks.</span></span> <span data-ttu-id="7a67a-283">Atakom XSS są bardzo zaawansowane i wykorzystać pomyślne zaburzyłaby również zabezpieczenia środowiska uruchomieniowego stosu sieci Web platformy ASP.NET przed atakami XSRF.</span><span class="sxs-lookup"><span data-stu-id="7a67a-283">XSS attacks are very powerful, and a successful exploit would also break the ASP.NET Web Stack Runtime defenses against XSRF attacks.</span></span>

## <a name="acknowledgment"></a><span data-ttu-id="7a67a-284">Po potwierdzeniu</span><span class="sxs-lookup"><span data-stu-id="7a67a-284">Acknowledgment</span></span>

<span data-ttu-id="7a67a-285">[@LeviBroderick](https://twitter.com/LeviBroderick), który napisał znaczną część kodu zabezpieczeń platformy ASP.NET duża część tych informacji.</span><span class="sxs-lookup"><span data-stu-id="7a67a-285">[@LeviBroderick](https://twitter.com/LeviBroderick), who wrote much of the ASP.NET security code the bulk of this information.</span></span>

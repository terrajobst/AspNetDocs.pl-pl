---
uid: mvc/overview/older-versions-1/contact-manager/iteration-1-create-the-application-vb
title: 'Iteracja #1 — Tworzenie aplikacji (VB) | Microsoft Docs'
author: microsoft
description: 'W pierwszej iteracji tworzymy Menedżera kontaktów w najprostszy sposób. Dodaliśmy obsługę podstawowych operacji bazy danych: Tworzenie, odczytywanie, aktualizowanie i D...'
ms.author: riande
ms.date: 02/20/2009
ms.assetid: 5b033582-1646-42c2-b20d-7edc8814e970
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-1-create-the-application-vb
msc.type: authoredcontent
ms.openlocfilehash: c6bf4712fb734cf14420fd62c9eaf190a2c28168
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78602320"
---
# <a name="iteration-1--create-the-application-vb"></a><span data-ttu-id="9f7c1-104">Iteracja #1 — Tworzenie aplikacji (VB)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-104">Iteration #1 – Create the Application (VB)</span></span>

<span data-ttu-id="9f7c1-105">przez [firmę Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="9f7c1-106">Pobierz kod</span><span class="sxs-lookup"><span data-stu-id="9f7c1-106">Download Code</span></span>](iteration-1-create-the-application-vb/_static/contactmanager_1_vb1.zip)

> <span data-ttu-id="9f7c1-107">W pierwszej iteracji tworzymy Menedżera kontaktów w najprostszy sposób.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-107">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="9f7c1-108">Dodaliśmy obsługę podstawowych operacji bazy danych: Tworzenie, odczytywanie, aktualizowanie i usuwanie (CRUD).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-108">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

## <a name="building-a-contact-management-aspnet-mvc-application-vb"></a><span data-ttu-id="9f7c1-109">Tworzenie aplikacji Contact Management ASP.NET MVC (VB)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-109">Building a Contact Management ASP.NET MVC Application (VB)</span></span>

<span data-ttu-id="9f7c1-110">W tej serii samouczków tworzymy całą aplikację do zarządzania kontaktami od początku do końca.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="9f7c1-111">Aplikacja Contact Manager umożliwia przechowywanie informacji kontaktowych — nazw, numerów telefonów i adresów e-mail — w celu uzyskania listy osób.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="9f7c1-112">Aplikacja została utworzona przez wiele iteracji.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="9f7c1-113">W przypadku każdej iteracji stopniowo ulepszamy aplikację.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="9f7c1-114">Celem tej wielu iteracji jest umożliwienie zrozumienia przyczyny każdej zmiany.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="9f7c1-115">#1 iteracji — Utwórz aplikację.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="9f7c1-116">W pierwszej iteracji tworzymy Menedżera kontaktów w najprostszy sposób.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="9f7c1-117">Dodaliśmy obsługę podstawowych operacji bazy danych: Tworzenie, odczytywanie, aktualizowanie i usuwanie (CRUD).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="9f7c1-118">Iteracja #2 — Zwiększ wygląd aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="9f7c1-119">W tej iteracji ulepszamy wygląd aplikacji, modyfikując domyślną stronę wzorcową widoku MVC ASP.NET i kaskadowy arkusz stylów.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="9f7c1-120">Iteracja #3 — Dodawanie walidacji formularza.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="9f7c1-121">W trzeciej iteracji zostanie dodana podstawowa Walidacja formularza.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="9f7c1-122">Uniemożliwiamy użytkownikom przesyłanie formularza bez wykonywania wymaganych pól formularza.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="9f7c1-123">Sprawdzamy również adresy e-mail i numery telefonów.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="9f7c1-124">Iteracja #4 — możliwość swobodnego łączenia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="9f7c1-125">W tej czwartej iteracji wykorzystujemy kilka wzorców projektowych oprogramowania, aby ułatwić konserwację i modyfikowanie aplikacji Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="9f7c1-126">Na przykład Refaktoryzacja naszej aplikacji używa wzorca repozytorium i wzorca iniekcji zależności.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="9f7c1-127">#5 iteracji — Utwórz testy jednostkowe.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="9f7c1-128">W piątej iteracji upraszczamy obsługę i modyfikację naszej aplikacji przez dodanie testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="9f7c1-129">Tworzymy klasy modelu danych i kompilujemy testy jednostkowe dla naszych kontrolerów i logiki walidacji.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="9f7c1-130">Iteracja #6 — Użyj programowania opartego na testach.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="9f7c1-131">W tej szóstej iteracji Dodaliśmy nowe funkcje do naszej aplikacji, pisząc testy jednostkowe jako pierwsze i pisząc kod na testach jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="9f7c1-132">W tej iteracji dodamy grupy kontaktów.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="9f7c1-133">Iteracja #7 — Dodawanie funkcji AJAX.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="9f7c1-134">W siódmej iteracji poprawimy czas reakcji i wydajność naszej aplikacji przez dodanie obsługi technologii AJAX.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="9f7c1-135">Ta iteracja</span><span class="sxs-lookup"><span data-stu-id="9f7c1-135">This Iteration</span></span>

<span data-ttu-id="9f7c1-136">W pierwszej iteracji tworzymy podstawową aplikację.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-136">In this first iteration, we build the basic application.</span></span> <span data-ttu-id="9f7c1-137">Celem jest skompilowanie Menedżera kontaktów w najszybszy i najprostszy sposób.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-137">The goal is to build the Contact Manager in the fastest and simplest way possible.</span></span> <span data-ttu-id="9f7c1-138">W późniejszych iteracjach ulepszamy projektowanie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-138">In later iterations, we improve the design of the application.</span></span>

<span data-ttu-id="9f7c1-139">Aplikacja Contact Manager jest podstawową aplikacją opartą na bazie danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-139">The Contact Manager application is a basic database-driven application.</span></span> <span data-ttu-id="9f7c1-140">Za pomocą aplikacji można tworzyć nowe kontakty, edytować istniejące kontakty i usuwać kontakty.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-140">You can use the application to create new contacts, edit existing contacts, and delete contacts.</span></span>

<span data-ttu-id="9f7c1-141">W tej iteracji wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="9f7c1-141">In this iteration, we complete the following steps:</span></span>

1. <span data-ttu-id="9f7c1-142">Aplikacja ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="9f7c1-142">ASP.NET MVC application</span></span>
2. <span data-ttu-id="9f7c1-143">Tworzenie bazy danych do przechowywania naszych kontaktów</span><span class="sxs-lookup"><span data-stu-id="9f7c1-143">Create a database to store our contacts</span></span>
3. <span data-ttu-id="9f7c1-144">Generuj klasę modelu dla naszej bazy danych za pomocą Entity Framework firmy Microsoft</span><span class="sxs-lookup"><span data-stu-id="9f7c1-144">Generate a model class for our database with the Microsoft Entity Framework</span></span>
4. <span data-ttu-id="9f7c1-145">Utwórz akcję kontrolera i widok, które umożliwią nam Wyświetlanie listy wszystkich kontaktów w bazie danych</span><span class="sxs-lookup"><span data-stu-id="9f7c1-145">Create a controller action and view that enables us to list all of the contacts in the database</span></span>
5. <span data-ttu-id="9f7c1-146">Utwórz akcje kontrolera i widok, który umożliwi nam tworzenie nowego kontaktu w bazie danych</span><span class="sxs-lookup"><span data-stu-id="9f7c1-146">Create controller actions and a view that enables us to create a new contact in the database</span></span>
6. <span data-ttu-id="9f7c1-147">Twórz akcje kontrolera i widok, który umożliwia nam Edytowanie istniejącego kontaktu w bazie danych</span><span class="sxs-lookup"><span data-stu-id="9f7c1-147">Create controller actions and a view that enables us to edit an existing contact in the database</span></span>
7. <span data-ttu-id="9f7c1-148">Utwórz akcje kontrolera i widok, który umożliwi nam Usuwanie istniejącego kontaktu w bazie danych</span><span class="sxs-lookup"><span data-stu-id="9f7c1-148">Create controller actions and a view that enables us to delete an existing contact in the database</span></span>

## <a name="software-prerequisites"></a><span data-ttu-id="9f7c1-149">Wymagania wstępne dotyczące oprogramowania</span><span class="sxs-lookup"><span data-stu-id="9f7c1-149">Software Prerequisites</span></span>

<span data-ttu-id="9f7c1-150">W aplikacjach ASP.NET MVC na komputerze musi być zainstalowany program Visual Studio 2008 lub Visual Web Developer 2008 (Visual Web Developer to bezpłatna wersja programu Visual Studio, która nie zawiera wszystkich zaawansowanych funkcji programu Visual Studio).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-150">In ASP.NET MVC applications, you must have either Visual Studio 2008 or Visual Web Developer 2008 installed on your computer (Visual Web Developer is a free version of Visual Studio that does not include all of the advanced features of Visual Studio).</span></span> <span data-ttu-id="9f7c1-151">Możesz pobrać wersję próbną programu Visual Studio 2008 lub Visual Web Developer z następującego adresu:</span><span class="sxs-lookup"><span data-stu-id="9f7c1-151">You can download either the trial version of Visual Studio 2008 or Visual Web Developer from the following address:</span></span>

[https://www.asp.net/downloads/essential/](https://www.asp.net/downloads/essential)

> [!NOTE] 
> 
> <span data-ttu-id="9f7c1-152">W przypadku aplikacji ASP.NET MVC z programem Visual Web Developer trzeba mieć zainstalowany program Visual Web Developer Service Pack 1.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-152">For ASP.NET MVC applications with Visual Web Developer, you must have Visual Web Developer Service Pack 1 installed.</span></span> <span data-ttu-id="9f7c1-153">Bez dodatku Service Pack 1 nie można tworzyć projektów aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-153">Without Service Pack 1, you cannot create Web Application Projects.</span></span>

<span data-ttu-id="9f7c1-154">ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-154">ASP.NET MVC framework.</span></span> <span data-ttu-id="9f7c1-155">Strukturę ASP.NET MVC można pobrać z następującego adresu:</span><span class="sxs-lookup"><span data-stu-id="9f7c1-155">You can download the ASP.NET MVC framework from the following address:</span></span>

[https://www.asp.net/mvc](../../../index.md)

<span data-ttu-id="9f7c1-156">W tym samouczku użyjemy Entity Framework firmy Microsoft w celu uzyskania dostępu do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-156">In this tutorial, we use the Microsoft Entity Framework to access a database.</span></span> <span data-ttu-id="9f7c1-157">Entity Framework jest dołączona do .NET Framework 3,5 z dodatkiem Service Pack 1.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-157">The Entity Framework is included with .NET Framework 3.5 Service Pack 1.</span></span> <span data-ttu-id="9f7c1-158">Ten dodatek Service Pack można pobrać z następującej lokalizacji:</span><span class="sxs-lookup"><span data-stu-id="9f7c1-158">You can download this service pack from the following location:</span></span>

[<span data-ttu-id="9f7c1-159">https://www.microsoft.com/downloads/details.aspx?familyid=ab99342f-5d1a-413d-8319-81da479ab0d7&amp;d isplaylang = pl</span><span class="sxs-lookup"><span data-stu-id="9f7c1-159">https://www.microsoft.com/downloads/details.aspx?familyid=ab99342f-5d1a-413d-8319-81da479ab0d7&amp;displaylang=en</span></span>](https://www.microsoft.com/downloads/details.aspx?familyid=ab99342f-5d1a-413d-8319-81da479ab0d7&amp;displaylang=en)

<span data-ttu-id="9f7c1-160">Alternatywą dla wykonywania każdego z tych plików jest pobranie jednego z nich, ale można skorzystać z Instalatora platformy sieci Web (Web PI).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-160">As an alternative to performing each of these downloads one by one, you can take advantage of the Web Platform Installer (Web PI).</span></span> <span data-ttu-id="9f7c1-161">Możesz pobrać wartość Web PI z następującego adresu:</span><span class="sxs-lookup"><span data-stu-id="9f7c1-161">You can download the Web PI from the following address:</span></span>

[https://www.asp.net/downloads/essential/](https://www.asp.net/downloads/essential)

## <a name="aspnet-mvc-project"></a><span data-ttu-id="9f7c1-162">Projekt ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="9f7c1-162">ASP.NET MVC Project</span></span>

<span data-ttu-id="9f7c1-163">Projekt aplikacji sieci Web ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-163">ASP.NET MVC Web Application Project.</span></span> <span data-ttu-id="9f7c1-164">Uruchom program Visual Studio i wybierz plik opcji menu **, nowy projekt**.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-164">Launch Visual Studio and select the menu option **File, New Project**.</span></span> <span data-ttu-id="9f7c1-165">Zostanie wyświetlone okno dialogowe **Nowy projekt** (patrz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-165">The **New Project** dialog appears (see Figure 1).</span></span> <span data-ttu-id="9f7c1-166">Wybierz typ projektu **sieci Web** i szablon **aplikacji sieci Web ASP.NET MVC** .</span><span class="sxs-lookup"><span data-stu-id="9f7c1-166">Select the **Web** project type and the **ASP.NET MVC Web Application** template.</span></span> <span data-ttu-id="9f7c1-167">Nazwij nowy projekt *ContactManager* i kliknij przycisk OK.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-167">Name your new project *ContactManager* and click the OK button.</span></span>

<span data-ttu-id="9f7c1-168">Upewnij się, że wybrano .NET Framework 3,5 z listy rozwijanej w prawym górnym rogu okna dialogowego **Nowy projekt** .</span><span class="sxs-lookup"><span data-stu-id="9f7c1-168">Make sure that you have .NET Framework 3.5 selected from the dropdown list at the top right of the **New Project** dialog.</span></span> <span data-ttu-id="9f7c1-169">W przeciwnym razie szablon aplikacji sieci Web ASP.NET MVC nie zostanie wyświetlony.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-169">Otherwise, the ASP.NET MVC Web Application template won't appear.</span></span>

<span data-ttu-id="9f7c1-170">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image1.jpg)](iteration-1-create-the-application-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-170">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image1.jpg)](iteration-1-create-the-application-vb/_static/image1.png)</span></span>

<span data-ttu-id="9f7c1-171">**Ilustracja 01**. okno dialogowe Nowy projekt ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-171">**Figure 01**: The New Project dialog([Click to view full-size image](iteration-1-create-the-application-vb/_static/image2.png))</span></span>

<span data-ttu-id="9f7c1-172">ASP.NET MVC, zostanie wyświetlone okno dialogowe **Tworzenie projektu testu jednostkowego** .</span><span class="sxs-lookup"><span data-stu-id="9f7c1-172">ASP.NET MVC application, the **Create Unit Test Project** dialog appears.</span></span> <span data-ttu-id="9f7c1-173">Możesz użyć tego okna dialogowego, aby wskazać, że chcesz utworzyć i dodać projekt testu jednostkowego do rozwiązania podczas tworzenia aplikacji ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-173">You can use this dialog to indicate that you want to create and add a unit test project to your solution when you create your ASP.NET MVC application.</span></span> <span data-ttu-id="9f7c1-174">Mimo że testy jednostkowe nie zostaną skompilowane w tej iteracji, należy wybrać opcję **tak, utworzyć projekt testu jednostkowego** , ponieważ planujemy dodać testy jednostkowe w późniejszej iteracji.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-174">Although we won't be building unit tests in this iteration, you should select the option **Yes, create a unit test project** because we plan to add unit tests in a later iteration.</span></span> <span data-ttu-id="9f7c1-175">Dodanie projektu testowego podczas pierwszego tworzenia nowego projektu ASP.NET MVC jest znacznie łatwiejsze niż dodanie projektu testowego po utworzeniu projektu ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-175">Adding a Test project when you first create a new ASP.NET MVC project is much easier than adding a Test project after the ASP.NET MVC project has been created.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="9f7c1-176">Ponieważ Visual Web Developer nie obsługuje projektów testowych, nie uzyskujesz okna dialogowego Tworzenie projektu testu jednostkowego podczas korzystania z programu Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-176">Because Visual Web Developer does not support Test projects, you do not get the Create Unit Test Project dialog when using Visual Web Developer.</span></span>

<span data-ttu-id="9f7c1-177">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image2.jpg)](iteration-1-create-the-application-vb/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-177">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image2.jpg)](iteration-1-create-the-application-vb/_static/image3.png)</span></span>

<span data-ttu-id="9f7c1-178">**Ilustracja 02**. okno dialogowe Tworzenie projektu testu jednostkowego ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-178">**Figure 02**: The Create Unit Test Project dialog ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image4.png))</span></span>

<span data-ttu-id="9f7c1-179">Aplikacja ASP.NET MVC pojawia się w oknie Eksplorator rozwiązań programu Visual Studio (patrz rysunek 3).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-179">ASP.NET MVC application appears in the Visual Studio Solution Explorer window (see Figure 3).</span></span> <span data-ttu-id="9f7c1-180">Jeśli nie widzisz okna Eksplorator rozwiązań, możesz otworzyć to okno, wybierając widok opcji menu **, Eksplorator rozwiązań**.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-180">If you don t see the Solution Explorer window then you can open this window by selecting the menu option **View, Solution Explorer**.</span></span> <span data-ttu-id="9f7c1-181">Należy zauważyć, że rozwiązanie zawiera dwa projekty: projekt ASP.NET MVC i projekt testowy.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-181">Notice that the solution contains two projects: the ASP.NET MVC project and the Test project.</span></span> <span data-ttu-id="9f7c1-182">Projekt ASP.NET MVC ma nazwę ContactManager, a projekt testowy nosi nazwę ContactManager. tests.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-182">The ASP.NET MVC project is named ContactManager and the Test project is named ContactManager.Tests.</span></span>

<span data-ttu-id="9f7c1-183">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image3.jpg)](iteration-1-create-the-application-vb/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-183">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image3.jpg)](iteration-1-create-the-application-vb/_static/image5.png)</span></span>

<span data-ttu-id="9f7c1-184">**Ilustracja 03**: okno Eksplorator rozwiązań ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-184">**Figure 03**: The Solution Explorer window ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image6.png))</span></span>

## <a name="deleting-the-project-sample-files"></a><span data-ttu-id="9f7c1-185">Usuwanie przykładowych plików projektu</span><span class="sxs-lookup"><span data-stu-id="9f7c1-185">Deleting the Project Sample Files</span></span>

<span data-ttu-id="9f7c1-186">Szablon projektu MVC ASP.NET zawiera przykładowe pliki dla kontrolerów i widoków.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-186">The ASP.NET MVC project template includes sample files for controllers and views.</span></span> <span data-ttu-id="9f7c1-187">Przed utworzeniem nowej aplikacji ASP.NET MVC należy usunąć te pliki.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-187">Before creating a new ASP.NET MVC application, you should delete these files.</span></span> <span data-ttu-id="9f7c1-188">Aby usunąć pliki i foldery w oknie Eksplorator rozwiązań, kliknij prawym przyciskiem myszy plik lub folder, a następnie wybierz polecenie menu **Usuń**.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-188">You can delete files and folders in the Solution Explorer window by right-clicking a file or folder and selecting the menu option **Delete**.</span></span>

<span data-ttu-id="9f7c1-189">Należy usunąć następujące pliki z projektu ASP.NET MVC:</span><span class="sxs-lookup"><span data-stu-id="9f7c1-189">You need to delete the following files from the ASP.NET MVC project:</span></span>

- <span data-ttu-id="9f7c1-190">\Controllers\HomeController.vb</span><span class="sxs-lookup"><span data-stu-id="9f7c1-190">\Controllers\HomeController.vb</span></span>

- <span data-ttu-id="9f7c1-191">\Views\Home\About.aspx</span><span class="sxs-lookup"><span data-stu-id="9f7c1-191">\Views\Home\About.aspx</span></span>

- <span data-ttu-id="9f7c1-192">\Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="9f7c1-192">\Views\Home\Index.aspx</span></span>

<span data-ttu-id="9f7c1-193">I należy usunąć następujący plik z projektu testowego:</span><span class="sxs-lookup"><span data-stu-id="9f7c1-193">And, you need to delete the following file from the Test project:</span></span>

<span data-ttu-id="9f7c1-194">\Controllers\HomeControllerTest.vb</span><span class="sxs-lookup"><span data-stu-id="9f7c1-194">\Controllers\HomeControllerTest.vb</span></span>

## <a name="creating-the-database"></a><span data-ttu-id="9f7c1-195">Tworzenie bazy danych</span><span class="sxs-lookup"><span data-stu-id="9f7c1-195">Creating the Database</span></span>

<span data-ttu-id="9f7c1-196">Aplikacja Contact Manager jest aplikacją sieci Web opartą na bazie danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-196">The Contact Manager application is a database-driven web application.</span></span> <span data-ttu-id="9f7c1-197">Korzystamy z bazy danych do przechowywania informacji kontaktowych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-197">We use a database to store the contact information.</span></span>

<span data-ttu-id="9f7c1-198">Platforma ASP.NET MVC z dowolnymi nowoczesnymi bazami danych, w tym bazami danych Microsoft SQL Server, Oracle, MySQL i IBM DB2.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-198">The ASP.NET MVC framework with any modern database including Microsoft SQL Server, Oracle, MySQL, and IBM DB2 databases.</span></span> <span data-ttu-id="9f7c1-199">W tym samouczku używamy bazy danych Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-199">In this tutorial, we use a Microsoft SQL Server database.</span></span> <span data-ttu-id="9f7c1-200">Po zainstalowaniu programu Visual Studio jest dostępna opcja zainstalowania Microsoft SQL Server Express, która jest bezpłatną wersją Microsoft SQL Server Database.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-200">When you install Visual Studio, you are provided with the option of installing Microsoft SQL Server Express which is a free version of the Microsoft SQL Server database.</span></span>

<span data-ttu-id="9f7c1-201">Utwórz nową bazę danych, klikając prawym przyciskiem myszy folder\_danych aplikacji w oknie Eksplorator rozwiązań i wybierając opcję menu **Dodaj, nowy element**.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-201">Create a new database by right-clicking the App\_Data folder in the Solution Explorer window and selecting the menu option **Add, New Item**.</span></span> <span data-ttu-id="9f7c1-202">W oknie dialogowym **Dodaj nowy element** wybierz kategorię **dane** i szablon **bazy danych SQL Server** (zobacz rysunek 4).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-202">In the **Add New Item** dialog, select the **Data** category and the **SQL Server Database** template (see Figure 4).</span></span> <span data-ttu-id="9f7c1-203">Nazwij nową bazę danych ContactManagerDB. mdf i kliknij przycisk OK.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-203">Name the new database ContactManagerDB.mdf and click the OK button.</span></span>

<span data-ttu-id="9f7c1-204">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image4.jpg)](iteration-1-create-the-application-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-204">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image4.jpg)](iteration-1-create-the-application-vb/_static/image7.png)</span></span>

<span data-ttu-id="9f7c1-205">**Rysunek 04**: Tworzenie nowej bazy danych Microsoft SQL Server Express ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-205">**Figure 04**: Creating a new Microsoft SQL Server Express database ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image8.png))</span></span>

<span data-ttu-id="9f7c1-206">Po utworzeniu nowej bazy danych w oknie Eksplorator rozwiązań zostanie wyświetlona baza danych w folderze dane\_aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-206">After you create the new database, the database appears in the App\_Data folder in the Solution Explorer window.</span></span> <span data-ttu-id="9f7c1-207">Kliknij dwukrotnie plik ContactManager. mdf, aby otworzyć okno Eksplorator serwera i nawiązać połączenie z bazą danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-207">Double-click the ContactManager.mdf file to open the Server Explorer window and connect to the database.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="9f7c1-208">Okno Eksplorator serwera jest nazywane oknem Eksplorator bazy danych w przypadku programu Microsoft Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-208">The Server Explorer window is called the Database Explorer window in the case of Microsoft Visual Web Developer.</span></span>

<span data-ttu-id="9f7c1-209">Za pomocą okna Eksplorator serwera można tworzyć nowe obiekty bazy danych, takie jak tabele baz danych, widoki, wyzwalacze i procedury składowane.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-209">You can use the Server Explorer window to create new database objects such as database tables, views, triggers, and stored procedures.</span></span> <span data-ttu-id="9f7c1-210">Kliknij prawym przyciskiem myszy folder tabele i wybierz opcję menu **Dodaj nową tabelę**.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-210">Right-click the Tables folder and select the menu option **Add New Table**.</span></span> <span data-ttu-id="9f7c1-211">Zostanie wyświetlony Projektant tabel bazy danych (patrz rysunek 5).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-211">The Database Table Designer appears (see Figure 5).</span></span>

<span data-ttu-id="9f7c1-212">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image5.jpg)](iteration-1-create-the-application-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-212">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image5.jpg)](iteration-1-create-the-application-vb/_static/image9.png)</span></span>

<span data-ttu-id="9f7c1-213">**Ilustracja 05**: Projektant tabel bazy danych ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-213">**Figure 05**: The Database Table Designer ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image10.png))</span></span>

<span data-ttu-id="9f7c1-214">Musimy utworzyć tabelę zawierającą następujące kolumny:</span><span class="sxs-lookup"><span data-stu-id="9f7c1-214">We need to create a table that contains the following columns:</span></span>

<a id="0.2_table01"></a>

| <span data-ttu-id="9f7c1-215">**Nazwa kolumny**</span><span class="sxs-lookup"><span data-stu-id="9f7c1-215">**Column Name**</span></span> | <span data-ttu-id="9f7c1-216">**Typ danych**</span><span class="sxs-lookup"><span data-stu-id="9f7c1-216">**Data Type**</span></span> | <span data-ttu-id="9f7c1-217">**Zezwalaj na wartości null**</span><span class="sxs-lookup"><span data-stu-id="9f7c1-217">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9f7c1-218">Identyfikator</span><span class="sxs-lookup"><span data-stu-id="9f7c1-218">Id</span></span> | <span data-ttu-id="9f7c1-219">int</span><span class="sxs-lookup"><span data-stu-id="9f7c1-219">int</span></span> | <span data-ttu-id="9f7c1-220">{1&gt;false&lt;1}</span><span class="sxs-lookup"><span data-stu-id="9f7c1-220">false</span></span> |
| <span data-ttu-id="9f7c1-221">FirstName</span><span class="sxs-lookup"><span data-stu-id="9f7c1-221">FirstName</span></span> | <span data-ttu-id="9f7c1-222">nvarchar (50)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-222">nvarchar(50)</span></span> | <span data-ttu-id="9f7c1-223">{1&gt;false&lt;1}</span><span class="sxs-lookup"><span data-stu-id="9f7c1-223">false</span></span> |
| <span data-ttu-id="9f7c1-224">LastName</span><span class="sxs-lookup"><span data-stu-id="9f7c1-224">LastName</span></span> | <span data-ttu-id="9f7c1-225">nvarchar (50)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-225">nvarchar(50)</span></span> | <span data-ttu-id="9f7c1-226">{1&gt;false&lt;1}</span><span class="sxs-lookup"><span data-stu-id="9f7c1-226">false</span></span> |
| <span data-ttu-id="9f7c1-227">Phone</span><span class="sxs-lookup"><span data-stu-id="9f7c1-227">Phone</span></span> | <span data-ttu-id="9f7c1-228">nvarchar (50)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-228">nvarchar(50)</span></span> | <span data-ttu-id="9f7c1-229">{1&gt;false&lt;1}</span><span class="sxs-lookup"><span data-stu-id="9f7c1-229">false</span></span> |
| <span data-ttu-id="9f7c1-230">Email</span><span class="sxs-lookup"><span data-stu-id="9f7c1-230">Email</span></span> | <span data-ttu-id="9f7c1-231">nvarchar(255)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-231">nvarchar(255)</span></span> | <span data-ttu-id="9f7c1-232">{1&gt;false&lt;1}</span><span class="sxs-lookup"><span data-stu-id="9f7c1-232">false</span></span> |

<span data-ttu-id="9f7c1-233">Pierwsza kolumna, Identyfikator kolumny, jest specjalna.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-233">The first column, the Id column, is special.</span></span> <span data-ttu-id="9f7c1-234">Należy oznaczyć kolumnę ID jako kolumnę tożsamości i kolumnę klucza podstawowego.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-234">You need to mark the Id column as an Identity column and a Primary Key column.</span></span> <span data-ttu-id="9f7c1-235">Użytkownik wskazuje, że kolumna jest kolumną tożsamości przez rozwijanie właściwości kolumny (patrz dolny rysunek 6) i przewija do właściwości Specyfikacja tożsamości.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-235">You indicate that a column is an Identity column by expanding Column Properties (look at the bottom of Figure 6) and scrolling down to the Identity Specification property.</span></span> <span data-ttu-id="9f7c1-236">Ustaw właściwość **(tożsamość)** na wartość **tak**.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-236">Set the **(Is Identity)** property to the value **Yes**.</span></span>

<span data-ttu-id="9f7c1-237">Kolumnę należy oznaczyć jako kolumnę klucza podstawowego, zaznaczając ją i klikając przycisk z ikoną klucza.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-237">You mark a column as a Primary Key column by selecting the column and clicking the button with the icon of a key.</span></span> <span data-ttu-id="9f7c1-238">Po oznaczeniu kolumny jako kolumny klucza podstawowego pojawia się ikona klucza obok kolumny (patrz rysunek 6).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-238">After a column is marked as a Primary Key column, an icon of a key appears next to the column (see Figure 6).</span></span>

<span data-ttu-id="9f7c1-239">Po zakończeniu tworzenia tabeli kliknij przycisk Zapisz (przycisk z ikoną dyskietki), aby zapisać nową tabelę.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-239">After you finish creating the table, click the Save button (the button with an icon of a floppy) to save the new table.</span></span> <span data-ttu-id="9f7c1-240">Nadaj nowej tabeli nazwę *Contacts*.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-240">Give your new table the name *Contacts*.</span></span>

<span data-ttu-id="9f7c1-241">Po zakończeniu tworzenia tabeli bazy danych kontaktów należy dodać do niej rekordy.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-241">After finish creating the Contacts database table, you should add some records to the table.</span></span> <span data-ttu-id="9f7c1-242">Kliknij prawym przyciskiem myszy tabelę kontakty w oknie Eksplorator serwera i wybierz opcję menu **Pokaż dane tabeli**.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-242">Right-click the Contacts table in the Server Explorer window and select the menu option **Show Table Data**.</span></span> <span data-ttu-id="9f7c1-243">Wprowadź co najmniej jeden kontakt w wyświetlonej siatce.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-243">Enter one or more contacts in the grid that appears.</span></span>

## <a name="creating-the-data-model"></a><span data-ttu-id="9f7c1-244">Tworzenie modelu danych</span><span class="sxs-lookup"><span data-stu-id="9f7c1-244">Creating the Data Model</span></span>

<span data-ttu-id="9f7c1-245">Aplikacja ASP.NET MVC składa się z modeli, widoków i kontrolerów.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-245">The ASP.NET MVC application consists of Models, Views, and Controllers.</span></span> <span data-ttu-id="9f7c1-246">Zacznijmy od utworzenia klasy modelu, która reprezentuje tabelę kontaktów utworzoną w poprzedniej sekcji.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-246">We start by creating a Model class that represents the Contacts table that we created in the previous section.</span></span>

<span data-ttu-id="9f7c1-247">W tym samouczku użyjemy Entity Framework firmy Microsoft do automatycznego wygenerowania klasy modelu z bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-247">In this tutorial, we use the Microsoft Entity Framework to generate a model class from the database automatically.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="9f7c1-248">Struktura ASP.NET MVC nie jest powiązana z Entity Framework firmy Microsoft w jakikolwiek sposób.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-248">The ASP.NET MVC framework is not tied to the Microsoft Entity Framework in any way.</span></span> <span data-ttu-id="9f7c1-249">Można używać ASP.NET MVC z alternatywnymi technologiami dostępu do baz danych, w tym NHibernate, LINQ to SQL lub ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-249">You can use ASP.NET MVC with alternative database access technologies including NHibernate, LINQ to SQL, or ADO.NET.</span></span>

<span data-ttu-id="9f7c1-250">Wykonaj następujące kroki, aby utworzyć klasy modelu danych:</span><span class="sxs-lookup"><span data-stu-id="9f7c1-250">Follow these steps to create the data model classes:</span></span>

1. <span data-ttu-id="9f7c1-251">Kliknij prawym przyciskiem myszy folder modele w oknie Eksplorator rozwiązań i wybierz polecenie **Dodaj, nowy element**.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-251">Right-click the Models folder in the Solution Explorer window and select **Add, New Item**.</span></span> <span data-ttu-id="9f7c1-252">Zostanie wyświetlone okno dialogowe **Dodaj nowy element** (zobacz rysunek 6).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-252">The **Add New Item** dialog appears (see Figure 6).</span></span>
2. <span data-ttu-id="9f7c1-253">Wybierz kategorię **dane** i szablon **Entity Data Model ADO.NET** .</span><span class="sxs-lookup"><span data-stu-id="9f7c1-253">Select the **Data** category and the **ADO.NET Entity Data Model** template.</span></span> <span data-ttu-id="9f7c1-254">Nazwij model danych *ContactManagerModel. edmx* i kliknij przycisk **Dodaj** .</span><span class="sxs-lookup"><span data-stu-id="9f7c1-254">Name your data model *ContactManagerModel.edmx* and click the **Add** button.</span></span> <span data-ttu-id="9f7c1-255">Zostanie wyświetlony Kreator Entity Data Model (patrz rysunek 7).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-255">The Entity Data Model wizard appears (see Figure 7).</span></span>
3. <span data-ttu-id="9f7c1-256">W kroku **Wybierz zawartość modelu** wybierz pozycję **Generuj z bazy danych** (patrz rysunek 7).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-256">In the **Choose Model Contents** step, select **Generate from database** (see Figure 7).</span></span>
4. <span data-ttu-id="9f7c1-257">W kroku **Wybierz połączenie danych** wybierz bazę danych ContactManagerDB. mdf i wprowadź nazwę *ContactManagerDBEntities* dla ustawień połączenia jednostki (zobacz rysunek 8).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-257">In the **Choose Your Data Connection** step, select the ContactManagerDB.mdf database and enter the name *ContactManagerDBEntities* for the Entity Connection Settings (see Figure 8).</span></span>
5. <span data-ttu-id="9f7c1-258">W kroku **Wybierz obiekty bazy danych** wybierz pole wyboru z etykietą tabele (zobacz rysunek 9).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-258">In the **Choose Your Database Objects** step, select the checkbox labeled Tables (see Figure 9).</span></span> <span data-ttu-id="9f7c1-259">Model danych będzie zawierać wszystkie tabele zawarte w bazie danych (istnieje tylko jedna tabela kontakty).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-259">The data model will include all tables contained in your database (there is just one, the Contacts table).</span></span> <span data-ttu-id="9f7c1-260">Wprowadź *modele*przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-260">Enter the namespace *Models*.</span></span> <span data-ttu-id="9f7c1-261">Kliknij przycisk Zakończ, aby zakończyć pracę kreatora.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-261">Click the Finish button to complete the wizard.</span></span>

<span data-ttu-id="9f7c1-262">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image6.jpg)](iteration-1-create-the-application-vb/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-262">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image6.jpg)](iteration-1-create-the-application-vb/_static/image11.png)</span></span>

<span data-ttu-id="9f7c1-263">**Ilustracja 06**. okno dialogowe Dodaj nowy element ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-263">**Figure 06**: The Add New Item dialog ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image12.png))</span></span>

<span data-ttu-id="9f7c1-264">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image7.jpg)](iteration-1-create-the-application-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-264">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image7.jpg)](iteration-1-create-the-application-vb/_static/image13.png)</span></span>

<span data-ttu-id="9f7c1-265">**Ilustracja 07**. Wybierz zawartość modelu ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-265">**Figure 07**: Choose Model Contents ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image14.png))</span></span>

<span data-ttu-id="9f7c1-266">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image8.jpg)](iteration-1-create-the-application-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-266">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image8.jpg)](iteration-1-create-the-application-vb/_static/image15.png)</span></span>

<span data-ttu-id="9f7c1-267">**Ilustracja 08**: Wybieranie połączenia danych ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-267">**Figure 08**: Choose Your Data Connection ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image16.png))</span></span>

<span data-ttu-id="9f7c1-268">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image9.jpg)](iteration-1-create-the-application-vb/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-268">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image9.jpg)](iteration-1-create-the-application-vb/_static/image17.png)</span></span>

<span data-ttu-id="9f7c1-269">**Ilustracja 09**. Wybierz obiekty bazy danych ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-269">**Figure 09**: Choose Your Database Objects ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image18.png))</span></span>

<span data-ttu-id="9f7c1-270">Po ukończeniu pracy Kreatora Entity Data Model zostanie wyświetlony Projektant Entity Data Model.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-270">After you complete the Entity Data Model Wizard, the Entity Data Model Designer appears.</span></span> <span data-ttu-id="9f7c1-271">Projektant wyświetla klasę, która odpowiada każdej modelowanej tabeli.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-271">The designer displays a class that corresponds to each table being modeled.</span></span> <span data-ttu-id="9f7c1-272">Powinna zostać wyświetlona jedna klasa o nazwie kontakty.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-272">You should see one class named Contacts.</span></span>

<span data-ttu-id="9f7c1-273">Kreator Entity Data Model generuje nazwy klas na podstawie nazw tabel bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-273">The Entity Data Model wizard generates class names based on database table names.</span></span> <span data-ttu-id="9f7c1-274">Prawie zawsze trzeba zmienić nazwę klasy wygenerowanej przez kreatora.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-274">You almost always need to change the name of the class generated by the wizard.</span></span> <span data-ttu-id="9f7c1-275">Kliknij prawym przyciskiem myszy klasę kontakty w projektancie, a następnie wybierz opcję menu **Zmień nazwę**.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-275">Right-click the Contacts class in the designer and select the menu option **Rename**.</span></span> <span data-ttu-id="9f7c1-276">Zmień nazwę klasy z kontaktów (plural) na kontakt (pojedyncza).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-276">Change the name of the class from Contacts (plural) to Contact (singular).</span></span> <span data-ttu-id="9f7c1-277">Po zmianie nazwy klasy Klasa powinna wyglądać jak rysunek 10.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-277">After you change the class name, the class should appear like Figure 10.</span></span>

<span data-ttu-id="9f7c1-278">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image10.jpg)](iteration-1-create-the-application-vb/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-278">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image10.jpg)](iteration-1-create-the-application-vb/_static/image19.png)</span></span>

<span data-ttu-id="9f7c1-279">**Ilustracja 10**. Klasa Contact ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-279">**Figure 10**: The Contact class ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image20.png))</span></span>

<span data-ttu-id="9f7c1-280">W tym momencie utworzyliśmy model bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-280">At this point, we have created our database model.</span></span> <span data-ttu-id="9f7c1-281">Możemy użyć klasy Contact do reprezentowania określonego rekordu kontaktu w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-281">We can use the Contact class to represent a particular contact record in our database.</span></span>

## <a name="creating-the-home-controller"></a><span data-ttu-id="9f7c1-282">Tworzenie kontrolera macierzystego</span><span class="sxs-lookup"><span data-stu-id="9f7c1-282">Creating the Home Controller</span></span>

<span data-ttu-id="9f7c1-283">Następnym krokiem jest utworzenie naszego kontrolera macierzystego.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-283">The next step is to create our Home controller.</span></span> <span data-ttu-id="9f7c1-284">Kontroler Home jest domyślnym kontrolerem wywoływanym w aplikacji ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-284">The Home controller is the default controller invoked in an ASP.NET MVC application.</span></span>

<span data-ttu-id="9f7c1-285">Utwórz klasę kontrolera głównego, klikając prawym przyciskiem myszy folder controllers w oknie Eksplorator rozwiązań i wybierając opcję menu **Dodaj, kontroler** (Zobacz Rysunek 11).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-285">Create the Home controller class by right-clicking the Controllers folder in the Solution Explorer window and selecting the menu option **Add, Controller** (see Figure 11).</span></span> <span data-ttu-id="9f7c1-286">Zwróć uwagę na pole wyboru zatytułowane **Dodawanie metod akcji dla scenariuszy tworzenia, aktualizacji i szczegółów**.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-286">Notice the checkbox labeled **Add action methods for Create, Update, and Details scenarios**.</span></span> <span data-ttu-id="9f7c1-287">Upewnij się, że to pole wyboru jest zaznaczone przed kliknięciem przycisku **Dodaj** .</span><span class="sxs-lookup"><span data-stu-id="9f7c1-287">Make sure that this checkbox is checked before clicking the **Add** button.</span></span>

<span data-ttu-id="9f7c1-288">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image11.jpg)](iteration-1-create-the-application-vb/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-288">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image11.jpg)](iteration-1-create-the-application-vb/_static/image21.png)</span></span>

<span data-ttu-id="9f7c1-289">**Ilustracja 11**. Dodawanie kontrolera macierzystego ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-289">**Figure 11**: Adding the Home controller ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image22.png))</span></span>

<span data-ttu-id="9f7c1-290">Podczas tworzenia kontrolera macierzystego pobierana jest Klasa z listy 1.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-290">When you create the Home controller, you get the class in Listing 1.</span></span>

<span data-ttu-id="9f7c1-291">**Lista 1 — Controllers\HomeController.vb**</span><span class="sxs-lookup"><span data-stu-id="9f7c1-291">**Listing 1 - Controllers\HomeController.vb**</span></span>

[!code-vb[Main](iteration-1-create-the-application-vb/samples/sample1.vb)]

## <a name="listing-the-contacts"></a><span data-ttu-id="9f7c1-292">Wyświetlanie listy kontaktów</span><span class="sxs-lookup"><span data-stu-id="9f7c1-292">Listing the Contacts</span></span>

<span data-ttu-id="9f7c1-293">Aby wyświetlić rekordy w tabeli bazy danych kontaktów, musimy utworzyć akcję indeks () i widok indeksu.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-293">In order to display the records in the Contacts database table, we need to create an Index() action and an Index view.</span></span>

<span data-ttu-id="9f7c1-294">Kontroler Home zawiera już akcję index ().</span><span class="sxs-lookup"><span data-stu-id="9f7c1-294">The Home controller already contains an Index() action.</span></span> <span data-ttu-id="9f7c1-295">Musimy zmodyfikować tę metodę, aby wyglądała jak lista 2.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-295">We need to modify this method so that it looks like Listing 2.</span></span>

<span data-ttu-id="9f7c1-296">**Lista 2 — Controllers\HomeController.vb**</span><span class="sxs-lookup"><span data-stu-id="9f7c1-296">**Listing 2 - Controllers\HomeController.vb**</span></span>

[!code-vb[Main](iteration-1-create-the-application-vb/samples/sample2.vb)]

<span data-ttu-id="9f7c1-297">Należy zauważyć, że klasa kontrolera macierzystego na liście 2 zawiera pole prywatne o nazwie \_jednostek.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-297">Notice that the Home controller class in Listing 2 contains a private field named \_entities.</span></span> <span data-ttu-id="9f7c1-298">Pole jednostki \_reprezentuje jednostki z modelu danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-298">The \_entities field represents the entities from the data model.</span></span> <span data-ttu-id="9f7c1-299">W celu komunikacji z bazą danych używamy pola \_jednostek.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-299">We use the \_entities field to communicate with the database.</span></span>

<span data-ttu-id="9f7c1-300">Metoda index () zwraca widok reprezentujący wszystkie kontakty z tabeli bazy danych kontaktów.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-300">The Index() method returns a view that represents all of the contacts from the Contacts database table.</span></span> <span data-ttu-id="9f7c1-301">Wyrażenie \_jednostek. ContactSet. ToList — () zwraca listę kontaktów jako listę ogólną.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-301">The expression \_entities.ContactSet.ToList() returns the list of contacts as a generic list.</span></span>

<span data-ttu-id="9f7c1-302">Teraz, gdy utworzymy kontroler indeksu, następnym musimy utworzyć widok indeksu.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-302">Now that we ve created the Index controller, we next need to create the Index view.</span></span> <span data-ttu-id="9f7c1-303">Przed utworzeniem widoku indeksu Skompiluj swoją aplikację, wybierając opcję menu **kompilacja, Kompiluj rozwiązanie**.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-303">Before creating the Index view, compile your application by selecting the menu option **Build, Build Solution**.</span></span> <span data-ttu-id="9f7c1-304">Należy zawsze skompilować projekt przed dodaniem widoku, aby lista klas modelu była wyświetlana w oknie dialogowym **Dodawanie widoku** .</span><span class="sxs-lookup"><span data-stu-id="9f7c1-304">You should always compile your project before adding a view in order for the list of model classes to be displayed in the **Add View** dialog.</span></span>

<span data-ttu-id="9f7c1-305">Widok indeksu można utworzyć, klikając prawym przyciskiem myszy metodę index () i wybierając opcję menu **Dodaj widok** (patrz rysunek 12).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-305">You create the Index view by right-clicking the Index() method and selecting the menu option **Add View** (see Figure 12).</span></span> <span data-ttu-id="9f7c1-306">Wybranie tej opcji menu spowoduje otwarcie okna dialogowego **Dodawanie widoku** (patrz rysunek 13).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-306">Selecting this menu option opens the **Add View** dialog (see Figure 13).</span></span>

<span data-ttu-id="9f7c1-307">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image12.jpg)](iteration-1-create-the-application-vb/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-307">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image12.jpg)](iteration-1-create-the-application-vb/_static/image23.png)</span></span>

<span data-ttu-id="9f7c1-308">**Ilustracja 12**. Dodawanie widoku indeksu ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-308">**Figure 12**: Adding the Index view ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image24.png))</span></span>

<span data-ttu-id="9f7c1-309">W oknie dialogowym **Dodawanie widoku** zaznacz pole wyboru z etykietą **Utwórz widok o jednoznacznie określonym typie**.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-309">In the **Add View** dialog, check the checkbox labeled **Create a strongly-typed view**.</span></span> <span data-ttu-id="9f7c1-310">Wybierz pozycję Wyświetl klasę danych ContactManager. ContactManager i Wyświetl listę zawartości.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-310">Select the View data class ContactManager.Contact and the View content List.</span></span> <span data-ttu-id="9f7c1-311">Wybranie tych opcji spowoduje wygenerowanie widoku zawierającego listę rekordów kontaktów.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-311">Selecting these options generates a view that displays a list of Contact records.</span></span>

<span data-ttu-id="9f7c1-312">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image13.jpg)](iteration-1-create-the-application-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-312">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image13.jpg)](iteration-1-create-the-application-vb/_static/image25.png)</span></span>

<span data-ttu-id="9f7c1-313">**Ilustracja 13**. okno dialogowe Dodawanie widoku ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-313">**Figure 13**: The Add View dialog ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image26.png))</span></span>

<span data-ttu-id="9f7c1-314">Po kliknięciu przycisku **Dodaj** zostanie wygenerowany widok indeks z listy 3.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-314">When you click the **Add** button, the Index view in Listing 3 is generated.</span></span> <span data-ttu-id="9f7c1-315">Zwróć uwagę na &lt;% @ Page%&gt;, która pojawia się u góry pliku.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-315">Notice the &lt;%@ Page %&gt; directive that appears at the top of the file.</span></span> <span data-ttu-id="9f7c1-316">Widok indeksu dziedziczy z klasy ViewPage&lt;IEnumerable&lt;ContactManager. models. Contact&gt;&gt;.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-316">The Index view inherits from the ViewPage&lt;IEnumerable&lt;ContactManager.Models.Contact&gt;&gt; class.</span></span> <span data-ttu-id="9f7c1-317">Innymi słowy Klasa modelu w widoku reprezentuje listę jednostek kontaktów.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-317">In other words, the Model class in the view represents a list of Contact entities.</span></span>

<span data-ttu-id="9f7c1-318">Treść widoku indeksu zawiera pętlę Foreach, która iteruje przez poszczególne kontakty reprezentowane przez klasę modelu.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-318">The body of the Index view contains a foreach loop that iterates through each of the contacts represented by the Model class.</span></span> <span data-ttu-id="9f7c1-319">Wartość każdej właściwości klasy Contact jest wyświetlana w tabeli HTML.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-319">The value of each property of the Contact class is displayed within an HTML table.</span></span>

<span data-ttu-id="9f7c1-320">**Lista 3-Views\Home\Index.aspx (niezmodyfikowana)**</span><span class="sxs-lookup"><span data-stu-id="9f7c1-320">**Listing 3 - Views\Home\Index.aspx (unmodified)**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-vb/samples/sample3.aspx)]

<span data-ttu-id="9f7c1-321">Musimy wprowadzić jedną modyfikację w widoku indeksu.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-321">We need to make one modification to the Index view.</span></span> <span data-ttu-id="9f7c1-322">Ponieważ nie tworzymy widoku szczegółów, możemy usunąć link szczegóły.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-322">Because we are not creating a Details view, we can remove the Details link.</span></span> <span data-ttu-id="9f7c1-323">Znajdź i usuń następujący kod z widoku indeks:</span><span class="sxs-lookup"><span data-stu-id="9f7c1-323">Find and remove the following code from the Index view:</span></span>

<span data-ttu-id="9f7c1-324">{. ID = Item. ID})%&gt;</span><span class="sxs-lookup"><span data-stu-id="9f7c1-324">{.id = item.Id})%&gt;</span></span>

<span data-ttu-id="9f7c1-325">Po zmodyfikowaniu widoku indeksu można uruchomić aplikację Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-325">After you modify the Index view, you can run the Contact Manager application.</span></span> <span data-ttu-id="9f7c1-326">Wybierz opcję menu Debuguj, Rozpocznij debugowanie lub po prostu naciśnij klawisz F5.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-326">Select the menu option Debug, Start Debugging or simply press F5.</span></span> <span data-ttu-id="9f7c1-327">Przy pierwszym uruchomieniu aplikacji uzyskasz dostęp do okna dialogowego na rysunku 14.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-327">The first time you run the application, you get the dialog in Figure 14.</span></span> <span data-ttu-id="9f7c1-328">Wybierz opcję **Modyfikuj plik Web. config, aby włączyć debugowanie** , a następnie kliknij przycisk OK.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-328">Select the option **Modify the Web.config file to enable debugging** and click the OK button.</span></span>

<span data-ttu-id="9f7c1-329">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image14.jpg)](iteration-1-create-the-application-vb/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-329">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image14.jpg)](iteration-1-create-the-application-vb/_static/image27.png)</span></span>

<span data-ttu-id="9f7c1-330">**Ilustracja 14**. Włączanie debugowania ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-330">**Figure 14**: Enabling debugging ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image28.png))</span></span>

<span data-ttu-id="9f7c1-331">Domyślnie jest zwracany widok indeksu.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-331">The Index view is returned by default.</span></span> <span data-ttu-id="9f7c1-332">Ten widok zawiera listę wszystkich danych z tabeli bazy danych kontaktów (zobacz rysunek 15).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-332">This view lists all of the data from the Contacts database table (see Figure 15).</span></span>

<span data-ttu-id="9f7c1-333">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image15.jpg)](iteration-1-create-the-application-vb/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-333">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image15.jpg)](iteration-1-create-the-application-vb/_static/image29.png)</span></span>

<span data-ttu-id="9f7c1-334">**Ilustracja 15**. widok indeksu ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-334">**Figure 15**: The Index view ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image30.png))</span></span>

<span data-ttu-id="9f7c1-335">Należy zauważyć, że widok indeksu zawiera link z etykietą Utwórz nowe w dolnej części widoku.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-335">Notice that the Index view includes a link labeled Create New at the bottom of the view.</span></span> <span data-ttu-id="9f7c1-336">W następnej sekcji dowiesz się, jak tworzyć nowe kontakty.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-336">In the next section, you learn how to create new contacts.</span></span>

## <a name="creating-new-contacts"></a><span data-ttu-id="9f7c1-337">Tworzenie nowych kontaktów</span><span class="sxs-lookup"><span data-stu-id="9f7c1-337">Creating New Contacts</span></span>

<span data-ttu-id="9f7c1-338">Aby umożliwić użytkownikom tworzenie nowych kontaktów, należy dodać dwie akcje create () do kontrolera macierzystego.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-338">To enable users to create new contacts, we need to add two Create() actions to the Home controller.</span></span> <span data-ttu-id="9f7c1-339">Musimy utworzyć jedną akcję Create (), która zwraca formularz HTML służący do tworzenia nowego kontaktu.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-339">We need to create one Create() action that returns an HTML form for creating a new contact.</span></span> <span data-ttu-id="9f7c1-340">Musimy utworzyć drugą akcję Create (), która wykonuje rzeczywiste wstawianie nowego kontaktu do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-340">We need to create a second Create() action that performs the actual database insert of the new contact.</span></span>

<span data-ttu-id="9f7c1-341">Nowe metody Create (), które należy dodać do kontrolera macierzystego, znajdują się na liście 4.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-341">The new Create() methods that we need to add to the Home controller are contained in Listing 4.</span></span>

<span data-ttu-id="9f7c1-342">**Lista 4-Controllers\HomeController.vb (z metodami Create)**</span><span class="sxs-lookup"><span data-stu-id="9f7c1-342">**Listing 4 - Controllers\HomeController.vb (with Create methods)**</span></span>

[!code-vb[Main](iteration-1-create-the-application-vb/samples/sample4.vb)]

<span data-ttu-id="9f7c1-343">Pierwsza metoda Create () może być wywoływana przy użyciu protokołu HTTP GET, podczas gdy druga metoda Create () może być wywoływana tylko przez POST protokołu HTTP.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-343">The first Create() method can be invoked with an HTTP GET while the second Create() method can be invoked only by an HTTP POST.</span></span> <span data-ttu-id="9f7c1-344">Innymi słowy, druga metoda Create () może być wywoływana tylko w przypadku ogłaszania formularza HTML.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-344">In other words, the second Create() method can be invoked only when posting an HTML form.</span></span> <span data-ttu-id="9f7c1-345">Pierwsza metoda Create () po prostu zwraca widok, który zawiera formularz HTML służący do tworzenia nowego kontaktu.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-345">The first Create() method simply returns a view that contains the HTML form for creating a new contact.</span></span> <span data-ttu-id="9f7c1-346">Druga metoda Create () jest znacznie bardziej interesująca: dodaje nowy kontakt do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-346">The second Create() method is much more interesting: it adds the new contact to the database.</span></span>

<span data-ttu-id="9f7c1-347">Należy zauważyć, że druga metoda Create () została zmodyfikowana w celu zaakceptowania wystąpienia klasy Contact.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-347">Notice that the second Create() method has been modified to accept an instance of the Contact class.</span></span> <span data-ttu-id="9f7c1-348">Wartości formularzy ogłoszone w formularzu HTML są powiązane z tą klasą kontaktu przez strukturę ASP.NET MVC automatycznie.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-348">The form values posted from the HTML form are bound to this Contact class by the ASP.NET MVC framework automatically.</span></span> <span data-ttu-id="9f7c1-349">Każde pole formularza z formularza Create HTML jest przypisane do właściwości parametru Contact.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-349">Each form field from the HTML Create form is assigned to a property of the Contact parameter.</span></span>

<span data-ttu-id="9f7c1-350">Zwróć uwagę, że parametr Contact ma atrybut [bind].</span><span class="sxs-lookup"><span data-stu-id="9f7c1-350">Notice that the Contact parameter is decorated with a [Bind] attribute.</span></span> <span data-ttu-id="9f7c1-351">Atrybut [bind] jest używany do wykluczenia właściwości identyfikatora kontaktu z powiązania.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-351">The [Bind] attribute is used to exclude the Contact Id property from binding.</span></span> <span data-ttu-id="9f7c1-352">Ponieważ Właściwość ID reprezentuje właściwość Identity, nie chcemy ustawić właściwości ID.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-352">Because the Id property represents an Identity property, we don t want to set the Id property.</span></span>

<span data-ttu-id="9f7c1-353">W treści metody Create () Entity Framework jest używany do wstawiania nowego kontaktu do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-353">In the body of the Create() method, the Entity Framework is used to insert the new Contact into the database.</span></span> <span data-ttu-id="9f7c1-354">Nowy kontakt zostanie dodany do istniejącego zestawu kontaktów i wywoływana jest metoda metody SaveChanges (), aby wypchnąć te zmiany z powrotem do podstawowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-354">The new Contact is added to the existing set of Contacts and the SaveChanges() method is called to push these changes back to the underlying database.</span></span>

<span data-ttu-id="9f7c1-355">Można wygenerować formularz HTML na potrzeby tworzenia nowych kontaktów, klikając prawym przyciskiem myszy jedną z dwóch metod tworzenia () i wybierając opcję menu **Dodaj widok** (zobacz rysunek 16).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-355">You can generate an HTML form for creating new Contacts by right-clicking either of the two Create() methods and selecting the menu option **Add View** (see Figure 16).</span></span>

<span data-ttu-id="9f7c1-356">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image16.jpg)](iteration-1-create-the-application-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-356">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image16.jpg)](iteration-1-create-the-application-vb/_static/image31.png)</span></span>

<span data-ttu-id="9f7c1-357">**Ilustracja 16**. Dodawanie widoku ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image32.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-357">**Figure 16**: Adding the Create view ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image32.png))</span></span>

<span data-ttu-id="9f7c1-358">W oknie dialogowym **Dodawanie widoku** wybierz klasę **ContactManager. Contact** i opcję **Utwórz** dla zawartości widoku (Zobacz Rysunek 17).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-358">In the **Add View** dialog, select the **ContactManager.Contact** class and the **Create** option for view content (see Figure 17).</span></span> <span data-ttu-id="9f7c1-359">Po kliknięciu przycisku **Dodaj** zostanie automatycznie wygenerowany widok tworzenie.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-359">When you click the **Add** button, a Create view is generated automatically.</span></span>

<span data-ttu-id="9f7c1-360">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image17.jpg)](iteration-1-create-the-application-vb/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-360">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image17.jpg)](iteration-1-create-the-application-vb/_static/image33.png)</span></span>

<span data-ttu-id="9f7c1-361">**Ilustracja 17**. Wyświetlanie rozwinięcia strony ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-361">**Figure 17**: Seeing a page explode ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image34.png))</span></span>

<span data-ttu-id="9f7c1-362">Widok tworzenie zawiera pola formularza dla każdej właściwości klasy Contact.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-362">The Create view contains form fields for each of the properties of the Contact class.</span></span> <span data-ttu-id="9f7c1-363">Kod na potrzeby tworzenia widoku znajduje się na liście 5.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-363">The code for the Create view is included in Listing 5.</span></span>

<span data-ttu-id="9f7c1-364">**Lista 5 — Views\Home\Create.aspx**</span><span class="sxs-lookup"><span data-stu-id="9f7c1-364">**Listing 5 - Views\Home\Create.aspx**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-vb/samples/sample5.aspx)]

<span data-ttu-id="9f7c1-365">Po zmodyfikowaniu metod Create () i dodaniu widoku Utwórz można uruchomić aplikację Contact Manager i utworzyć nowe kontakty.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-365">After you modify the Create() methods and add the Create view, you can run the Contact Manger application and create new contacts.</span></span> <span data-ttu-id="9f7c1-366">Kliknij link **Utwórz nowy** , który pojawia się w widoku indeks, aby przejść do widoku Utwórz.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-366">Click the **Create New** link that appears in the Index view to navigate to the Create view.</span></span> <span data-ttu-id="9f7c1-367">Widok powinien być widoczny na rysunku 18.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-367">You should see the view in Figure 18.</span></span>

<span data-ttu-id="9f7c1-368">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image18.jpg)](iteration-1-create-the-application-vb/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-368">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image18.jpg)](iteration-1-create-the-application-vb/_static/image35.png)</span></span>

<span data-ttu-id="9f7c1-369">**Ilustracja 18**. widok tworzenia ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-369">**Figure 18**: The Create View ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image36.png))</span></span>

## <a name="editing-contacts"></a><span data-ttu-id="9f7c1-370">Edytowanie kontaktów</span><span class="sxs-lookup"><span data-stu-id="9f7c1-370">Editing Contacts</span></span>

<span data-ttu-id="9f7c1-371">Dodawanie funkcji do edytowania rekordu kontaktu jest bardzo podobne do dodawania funkcji tworzenia nowych rekordów kontaktów.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-371">Adding the functionality for editing a contact record is very similar to adding the functionality for creating new contact records.</span></span> <span data-ttu-id="9f7c1-372">Najpierw musimy dodać dwie nowe metody edycji do klasy kontrolera macierzystego.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-372">First, we need to add two new Edit methods to the Home controller class.</span></span> <span data-ttu-id="9f7c1-373">Te nowe metody Edit () są zawarte w temacie 6.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-373">These new Edit() methods are contained in Listing 6.</span></span>

<span data-ttu-id="9f7c1-374">**Lista 6-Controllers\HomeController.vb (z metodami edycji)**</span><span class="sxs-lookup"><span data-stu-id="9f7c1-374">**Listing 6 - Controllers\HomeController.vb (with Edit methods)**</span></span>

[!code-vb[Main](iteration-1-create-the-application-vb/samples/sample6.vb)]

<span data-ttu-id="9f7c1-375">Pierwsza metoda Edit () jest wywoływana przez operację HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-375">The first Edit() method is invoked by an HTTP GET operation.</span></span> <span data-ttu-id="9f7c1-376">Do tej metody jest przesyłany parametr identyfikatora, który reprezentuje identyfikator edytowanego rekordu kontaktu.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-376">An Id parameter is passed to this method which represents the Id of the contact record being edited.</span></span> <span data-ttu-id="9f7c1-377">Entity Framework jest używany do pobrania kontaktu odpowiadającego identyfikatorowi. Zwracany jest widok, który zawiera formularz HTML służący do edytowania rekordu.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-377">The Entity Framework is used to retrieve a contact that matches the Id. A view that contains an HTML form for editing a record is returned.</span></span>

<span data-ttu-id="9f7c1-378">Druga metoda Edit () wykonuje rzeczywistą aktualizację bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-378">The second Edit() method performs the actual update to the database.</span></span> <span data-ttu-id="9f7c1-379">Ta metoda akceptuje wystąpienie klasy Contact jako parametr.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-379">This method accepts an instance of the Contact class as a parameter.</span></span> <span data-ttu-id="9f7c1-380">ASP.NET platformy MVC tworzy automatycznie powiązania pól formularza z formularzem edycji z tą klasą.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-380">The ASP.NET MVC framework binds the form fields from the Edit form to this class automatically.</span></span> <span data-ttu-id="9f7c1-381">Należy zauważyć, że podczas edytowania kontaktu nie jest uwzględniany atrybut [bind] (wymagana jest wartość właściwości ID).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-381">Notice that you don t include the[Bind] attribute when editing a Contact (we need the value of the Id property).</span></span>

<span data-ttu-id="9f7c1-382">Entity Framework jest używany do zapisania zmodyfikowanego kontaktu do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-382">The Entity Framework is used to save the modified Contact to the database.</span></span> <span data-ttu-id="9f7c1-383">Oryginalny kontakt musi zostać najpierw pobrany z bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-383">The original Contact must be retrieved from the database first.</span></span> <span data-ttu-id="9f7c1-384">Następnie Metoda Entity Framework ApplyPropertyChanges () jest wywoływana, aby zarejestrować zmiany w kontakcie.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-384">Next, the Entity Framework ApplyPropertyChanges() method is called to record the changes to the Contact.</span></span> <span data-ttu-id="9f7c1-385">Na koniec Metoda Entity Framework metody SaveChanges () jest wywoływana w celu utrwalenia zmian w źródłowej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-385">Finally, the Entity Framework SaveChanges() method is called to persist the changes to the underlying database.</span></span>

<span data-ttu-id="9f7c1-386">Widok, który zawiera formularz edycji, można wygenerować, klikając prawym przyciskiem myszy metodę Edit () i wybierając opcję menu Dodaj widok.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-386">You can generate the view that contains the Edit form by right-clicking the Edit() method and selecting the menu option Add View.</span></span> <span data-ttu-id="9f7c1-387">W oknie dialogowym Dodawanie widoku wybierz klasę **ContactManager. models. Contact** i **Edytuj** zawartość widoku (zobacz rysunek 19).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-387">In the Add View dialog, select the **ContactManager.Models.Contact** class and the **Edit** view content (see Figure 19).</span></span>

<span data-ttu-id="9f7c1-388">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image19.jpg)](iteration-1-create-the-application-vb/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-388">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image19.jpg)](iteration-1-create-the-application-vb/_static/image37.png)</span></span>

<span data-ttu-id="9f7c1-389">**Ilustracja 19**. Dodawanie widoku edycji ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image38.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-389">**Figure 19**: Adding an Edit View ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image38.png))</span></span>

<span data-ttu-id="9f7c1-390">Po kliknięciu przycisku Dodaj zostanie automatycznie wygenerowany nowy widok edycji.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-390">When you click the Add button, a new Edit view is generated automatically.</span></span> <span data-ttu-id="9f7c1-391">Wygenerowany formularz HTML zawiera pola, które odpowiadają każdej właściwości klasy Contact (patrz lista 7).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-391">The HTML form that is generated contains fields that correspond to each of the properties of the Contact class (see Listing 7).</span></span>

<span data-ttu-id="9f7c1-392">**Lista 7 — Views\Home\Edit.aspx**</span><span class="sxs-lookup"><span data-stu-id="9f7c1-392">**Listing 7 - Views\Home\Edit.aspx**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-vb/samples/sample7.aspx)]

## <a name="deleting-contacts"></a><span data-ttu-id="9f7c1-393">Usuwanie kontaktów</span><span class="sxs-lookup"><span data-stu-id="9f7c1-393">Deleting Contacts</span></span>

<span data-ttu-id="9f7c1-394">Jeśli chcesz usunąć kontakty, musisz dodać dwie akcje Delete () do klasy kontrolera macierzystego.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-394">If you want to delete contacts then you need to add two Delete() actions to the Home controller class.</span></span> <span data-ttu-id="9f7c1-395">Pierwsza akcja Usuń () powoduje wyświetlenie formularza potwierdzenia usuwania.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-395">The first Delete() action displays a delete confirmation form.</span></span> <span data-ttu-id="9f7c1-396">Druga akcja DELETE () wykonuje rzeczywiste usunięcie.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-396">The second Delete() action performs the actual delete.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="9f7c1-397">Później, w #7 iteracji zmodyfikujemy Menedżera kontaktów, aby obsługiwał jeden krok AJAX Delete.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-397">Later, in Iteration #7, we modify the Contact Manager so that it supports a one step Ajax delete.</span></span>

<span data-ttu-id="9f7c1-398">Dwie nowe metody Delete () są zawarte w liście 8.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-398">The two new Delete() methods are contained in Listing 8.</span></span>

<span data-ttu-id="9f7c1-399">**Lista 8-Controllers\HomeController.vb (usuwanie metod)**</span><span class="sxs-lookup"><span data-stu-id="9f7c1-399">**Listing 8 - Controllers\HomeController.vb (Delete methods)**</span></span>

[!code-vb[Main](iteration-1-create-the-application-vb/samples/sample8.vb)]

<span data-ttu-id="9f7c1-400">Pierwsza metoda delete () zwraca formularz potwierdzenia służący do usuwania rekordu kontaktu z bazy danych (zobacz Figure20).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-400">The first Delete() method returns a confirmation form for deleting a contact record from the database (see Figure20).</span></span> <span data-ttu-id="9f7c1-401">Druga metoda delete () wykonuje rzeczywistą operację usuwania względem bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-401">The second Delete() method performs the actual delete operation against the database.</span></span> <span data-ttu-id="9f7c1-402">Po pobraniu oryginalnego kontaktu z bazy danych metody Entity Framework DeleteObject () i metody SaveChanges () są wywoływane w celu przeprowadzenia usuwania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-402">After the original contact has been retrieved from the database, the Entity Framework DeleteObject() and SaveChanges() methods are called to perform the database delete.</span></span>

<span data-ttu-id="9f7c1-403">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image20.jpg)](iteration-1-create-the-application-vb/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-403">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image20.jpg)](iteration-1-create-the-application-vb/_static/image39.png)</span></span>

<span data-ttu-id="9f7c1-404">**Ilustracja 20**. widok potwierdzenia usunięcia ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-404">**Figure 20**: The delete confirmation view ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image40.png))</span></span>

<span data-ttu-id="9f7c1-405">Musimy zmodyfikować widok indeksu, aby zawierał link do usuwania rekordów kontaktów (Zobacz Rysunek 21).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-405">We need to modify the Index view so that it contains a link for deleting contact records (see Figure 21).</span></span> <span data-ttu-id="9f7c1-406">Należy dodać następujący kod do tej samej komórki tabeli, która zawiera link Edytuj:</span><span class="sxs-lookup"><span data-stu-id="9f7c1-406">You need to add the following code to the same table cell that contains the Edit link:</span></span>

<span data-ttu-id="9f7c1-407">{. ID = Item. ID})%&gt;</span><span class="sxs-lookup"><span data-stu-id="9f7c1-407">{.id = item.Id})%&gt;</span></span>

<span data-ttu-id="9f7c1-408">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image21.jpg)](iteration-1-create-the-application-vb/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-408">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image21.jpg)](iteration-1-create-the-application-vb/_static/image41.png)</span></span>

<span data-ttu-id="9f7c1-409">**Ilustracja 21**. widok indeksu z linkiem edycji ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-409">**Figure 21**: Index view with Edit link ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image42.png))</span></span>

<span data-ttu-id="9f7c1-410">Następnie musimy utworzyć widok potwierdzenia usunięcia.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-410">Next, we need to create the delete confirmation view.</span></span> <span data-ttu-id="9f7c1-411">Kliknij prawym przyciskiem myszy metodę Delete () w klasie Controller-Home i wybierz opcję menu Dodaj widok.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-411">Right-click the Delete() method in the Home controller class and select the menu option Add View.</span></span> <span data-ttu-id="9f7c1-412">Zostanie wyświetlone okno dialogowe Dodawanie widoku (zobacz rysunek 22).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-412">The Add View dialog appears (see Figure 22).</span></span>

<span data-ttu-id="9f7c1-413">W przeciwieństwie do przypadku widoków list, Create i Edit, okno dialogowe Dodawanie widoku nie zawiera opcji tworzenia widoku usuwania.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-413">Unlike in the case of the List, Create, and Edit views, the Add View dialog does not contain an option to create a Delete view.</span></span> <span data-ttu-id="9f7c1-414">Zamiast tego wybierz klasę **ContactManager. models. Contact** Data i **pustą** zawartość widoku.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-414">Instead, select the **ContactManager.Models.Contact** data class and the **Empty** view content.</span></span> <span data-ttu-id="9f7c1-415">Wybranie opcji pustej zawartości widoku będzie wymagało utworzenia widoku wypróbujemy.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-415">Selecting the Empty view content option will require us to create the view ourselves.</span></span>

<span data-ttu-id="9f7c1-416">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image22.jpg)](iteration-1-create-the-application-vb/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-416">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image22.jpg)](iteration-1-create-the-application-vb/_static/image43.png)</span></span>

<span data-ttu-id="9f7c1-417">**Ilustracja 22**: Dodawanie widoku potwierdzenia usuwania ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-417">**Figure 22**: Adding the delete confirmation view ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image44.png))</span></span>

<span data-ttu-id="9f7c1-418">Zawartość widoku usuwania znajduje się na liście 9.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-418">The content of the Delete view is contained in Listing 9.</span></span> <span data-ttu-id="9f7c1-419">Ten widok zawiera formularz, który potwierdza, czy określony kontakt powinien zostać usunięty (patrz rysunek 21).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-419">This view contains a form that confirms whether or not a particular contact should be deleted (see Figure 21).</span></span>

<span data-ttu-id="9f7c1-420">**Lista 9-Views\Home\Delete.aspx**</span><span class="sxs-lookup"><span data-stu-id="9f7c1-420">**Listing 9 - Views\Home\Delete.aspx**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-vb/samples/sample9.aspx)]

## <a name="changing-the-name-of-the-default-controller"></a><span data-ttu-id="9f7c1-421">Zmiana nazwy kontrolera domyślnego</span><span class="sxs-lookup"><span data-stu-id="9f7c1-421">Changing the Name of the Default Controller</span></span>

<span data-ttu-id="9f7c1-422">Może bother, że nazwa naszej klasy kontrolera do pracy z kontaktami nosi nazwę klasy HomeController.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-422">It might bother you that the name of our controller class for working with contacts is named the HomeController class.</span></span> <span data-ttu-id="9f7c1-423">Czy kontroler nie powinien mieć nazwy ContactController?</span><span class="sxs-lookup"><span data-stu-id="9f7c1-423">Shouldn't the controller be named ContactController?</span></span>

<span data-ttu-id="9f7c1-424">Ten problem jest bardzo mały, aby naprawić.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-424">This issue is easy enough to fix.</span></span> <span data-ttu-id="9f7c1-425">Najpierw musimy ponownie nazwa kontrolera macierzystego.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-425">First, we need to refactor the name of the Home controller.</span></span> <span data-ttu-id="9f7c1-426">Otwórz klasę HomeController w edytorze Visual Studio Code, kliknij prawym przyciskiem myszy nazwę klasy i wybierz opcję menu **Zmień nazwę**.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-426">Open the HomeController class in the Visual Studio Code Editor, right click the name of the class and select the menu option **Rename**.</span></span> <span data-ttu-id="9f7c1-427">Wybranie tej opcji menu spowoduje otwarcie okna dialogowego Zmień nazwę.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-427">Selecting this menu option opens the Rename dialog.</span></span>

<span data-ttu-id="9f7c1-428">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image23.jpg)](iteration-1-create-the-application-vb/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-428">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image23.jpg)](iteration-1-create-the-application-vb/_static/image45.png)</span></span>

<span data-ttu-id="9f7c1-429">**Ilustracja 23**. Refaktoryzacja nazwy kontrolera ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image46.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-429">**Figure 23**: Refactoring a controller name ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image46.png))</span></span>

<span data-ttu-id="9f7c1-430">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image24.jpg)](iteration-1-create-the-application-vb/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-430">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image24.jpg)](iteration-1-create-the-application-vb/_static/image47.png)</span></span>

<span data-ttu-id="9f7c1-431">**Ilustracja 24**. Korzystanie z okna dialogowego zmiany nazwy ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image48.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-431">**Figure 24**: Using the Rename dialog ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image48.png))</span></span>

<span data-ttu-id="9f7c1-432">W przypadku zmiany nazwy klasy kontrolera program Visual Studio zaktualizuje również nazwę folderu w folderze widoki.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-432">If you rename your controller class, Visual Studio will update the name of the folder in the Views folder as well.</span></span> <span data-ttu-id="9f7c1-433">Program Visual Studio zmieni nazwę folderu \Views\Home na folder \Views\Contact.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-433">Visual Studio will rename the \Views\Home folder to the \Views\Contact folder.</span></span>

<span data-ttu-id="9f7c1-434">Po wprowadzeniu tej zmiany aplikacja nie będzie już miała kontrolera macierzystego.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-434">After you make this change, your application will no longer have a Home controller.</span></span> <span data-ttu-id="9f7c1-435">Po uruchomieniu aplikacji uzyskasz stronę błędu na rysunku 25.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-435">When you run your application, you'll get the error page in Figure 25.</span></span>

<span data-ttu-id="9f7c1-436">[![okno dialogowe Nowy projekt](iteration-1-create-the-application-vb/_static/image25.jpg)](iteration-1-create-the-application-vb/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-436">[![The New Project dialog box](iteration-1-create-the-application-vb/_static/image25.jpg)](iteration-1-create-the-application-vb/_static/image49.png)</span></span>

<span data-ttu-id="9f7c1-437">**Ilustracja 25**: Brak domyślnego kontrolera ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-1-create-the-application-vb/_static/image50.png))</span><span class="sxs-lookup"><span data-stu-id="9f7c1-437">**Figure 25**: No default controller ([Click to view full-size image](iteration-1-create-the-application-vb/_static/image50.png))</span></span>

<span data-ttu-id="9f7c1-438">Musimy zaktualizować domyślną trasę w pliku Global. asax, aby można było używać kontrolera Contact zamiast kontrolera macierzystego.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-438">We need to update the default route in the Global.asax file to use the Contact controller instead of the Home controller.</span></span> <span data-ttu-id="9f7c1-439">Otwórz plik Global. asax i zmodyfikuj domyślny kontroler używany przez trasę domyślną (zobacz Lista 10).</span><span class="sxs-lookup"><span data-stu-id="9f7c1-439">Open the Global.asax file and modify the default controller used by the default route (see Listing 10).</span></span>

<span data-ttu-id="9f7c1-440">**Lista 10-Global. asax. vb**</span><span class="sxs-lookup"><span data-stu-id="9f7c1-440">**Listing 10 - Global.asax.vb**</span></span>

[!code-vb[Main](iteration-1-create-the-application-vb/samples/sample10.vb)]

<span data-ttu-id="9f7c1-441">Po wprowadzeniu tych zmian Menedżer kontaktów zostanie prawidłowo uruchomiony.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-441">After you make these changes, the Contact Manager will run correctly.</span></span> <span data-ttu-id="9f7c1-442">Teraz zostanie użyta Klasa kontrolera Contact jako kontroler domyślny.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-442">Now, it will use the Contact controller class as the default controller.</span></span>

## <a name="summary"></a><span data-ttu-id="9f7c1-443">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="9f7c1-443">Summary</span></span>

<span data-ttu-id="9f7c1-444">W tej pierwszej iteracji utworzyliśmy w najszybszy sposób podstawową aplikację do zarządzania kontaktami.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-444">In this first iteration, we created a basic Contact Manager application in the fastest way possible.</span></span> <span data-ttu-id="9f7c1-445">Wykorzystałem program Visual Studio, aby automatycznie generować kod początkowy dla naszych kontrolerów i widoków.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-445">We took advantage of Visual Studio to generate the initial code for our controllers and views automatically.</span></span> <span data-ttu-id="9f7c1-446">Wykorzystamy również Entity Framework, aby automatycznie generować klasy modelu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-446">We also took advantage of the Entity Framework to generate our database model classes automatically.</span></span>

<span data-ttu-id="9f7c1-447">Obecnie możemy wyświetlać, tworzyć, edytować i usuwać rekordy kontaktów w aplikacji Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-447">Currently, we can list, create, edit, and delete contact records with the Contact Manager application.</span></span> <span data-ttu-id="9f7c1-448">Innymi słowy możemy wykonać wszystkie podstawowe operacje bazy danych wymagane przez aplikację sieci Web opartą na bazie danych.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-448">In other words, we can perform all of the basic database operations required by a database-driven web application.</span></span>

<span data-ttu-id="9f7c1-449">Niestety, nasza aplikacja zawiera pewne problemy.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-449">Unfortunately, our application has some problems.</span></span> <span data-ttu-id="9f7c1-450">Najpierw i I niechętnie zezwalają, że aplikacja Contact Manager nie jest najbardziej atrakcyjną aplikacją.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-450">First and I hesitate to admit this, the Contact Manager application is not the most attractive application.</span></span> <span data-ttu-id="9f7c1-451">Potrzebuje pewnej pracy projektowej.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-451">It needs some design work.</span></span> <span data-ttu-id="9f7c1-452">W następnej iteracji dowiesz się, jak można zmienić domyślną stronę wzorcową widoku i kaskadowy arkusz stylów, aby poprawić wygląd aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-452">In the next iteration, we'll look at how we can change the default view master page and cascading style sheet to improve the appearance of the application.</span></span>

<span data-ttu-id="9f7c1-453">Po drugie nie zaimplementowano żadnej walidacji formularza.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-453">Second, we have not implemented any form validation.</span></span> <span data-ttu-id="9f7c1-454">Na przykład nie ma nic, aby zapobiec przesłaniu formularza tworzenia kontaktu bez wprowadzania wartości dla żadnego z pól formularza.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-454">For example, there is nothing to prevent you from submitting the Create contact form without entering values for any of the form fields.</span></span> <span data-ttu-id="9f7c1-455">Ponadto możesz wprowadzić nieprawidłowe numery telefonów i adresy e-mail.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-455">Furthermore, you can enter invalid phone numbers and email addresses.</span></span> <span data-ttu-id="9f7c1-456">Zaczynamy rozwiązywać problemy z walidacją formularza w iteracji #3.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-456">We start to tackle the problem of form validation in iteration #3.</span></span>

<span data-ttu-id="9f7c1-457">Wreszcie i co najważniejsze, bieżąca iteracja aplikacji Contact Manager nie może być łatwo modyfikowana ani utrzymywana.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-457">Finally, and most importantly, the current iteration of the Contact Manager application cannot be easily modified or maintained.</span></span> <span data-ttu-id="9f7c1-458">Na przykład logika dostępu do bazy danych jest rozszerzania bezpośrednio do akcji kontrolera.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-458">For example, the database access logic is baked right into the controller actions.</span></span> <span data-ttu-id="9f7c1-459">Oznacza to, że nie możemy zmodyfikować naszego kodu dostępu do danych bez modyfikowania naszych kontrolerów.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-459">This means that we cannot modify our data access code without modifying our controllers.</span></span> <span data-ttu-id="9f7c1-460">W kolejnych iteracjach eksplorujemy wzorce projektowe oprogramowania, które możemy zaimplementować, aby umożliwić zmianę odporności Menedżera kontaktów.</span><span class="sxs-lookup"><span data-stu-id="9f7c1-460">In later iterations, we explore software design patterns that we can implement to make the Contact Manager more resilient to change.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="9f7c1-461">[Poprzednie](iteration-7-add-ajax-functionality-cs.md)
> [dalej](iteration-2-make-the-application-look-nice-vb.md)</span><span class="sxs-lookup"><span data-stu-id="9f7c1-461">[Previous](iteration-7-add-ajax-functionality-cs.md)
[Next](iteration-2-make-the-application-look-nice-vb.md)</span></span>

---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
title: 'Iteracja #6 — Korzystanie z projektowania opartego na testach (VB) | Microsoft Docs'
author: microsoft
description: W tej szóstej iteracji Dodaliśmy nowe funkcje do naszej aplikacji, pisząc testy jednostkowe jako pierwsze i pisząc kod na testach jednostkowych. W tej iteracji,...
ms.author: riande
ms.date: 02/20/2009
ms.assetid: e1fd226f-3f8e-4575-a179-5c75b240333d
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
msc.type: authoredcontent
ms.openlocfilehash: b166a1c6af29206d43558fa7de447c3f4da2ddfe
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78608305"
---
# <a name="iteration-6--use-test-driven-development-vb"></a><span data-ttu-id="d210b-104">Iteracja #6 — Korzystanie z projektowania opartego na testach (VB)</span><span class="sxs-lookup"><span data-stu-id="d210b-104">Iteration #6 – Use test-driven development (VB)</span></span>

<span data-ttu-id="d210b-105">przez [firmę Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="d210b-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="d210b-106">Pobierz kod</span><span class="sxs-lookup"><span data-stu-id="d210b-106">Download Code</span></span>](iteration-6-use-test-driven-development-vb/_static/contactmanager_6_vb1.zip)

> <span data-ttu-id="d210b-107">W tej szóstej iteracji Dodaliśmy nowe funkcje do naszej aplikacji, pisząc testy jednostkowe jako pierwsze i pisząc kod na testach jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="d210b-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="d210b-108">W tej iteracji dodamy grupy kontaktów.</span><span class="sxs-lookup"><span data-stu-id="d210b-108">In this iteration, we add contact groups.</span></span>

## <a name="building-a-contact-management-aspnet-mvc-application-vb"></a><span data-ttu-id="d210b-109">Tworzenie aplikacji Contact Management ASP.NET MVC (VB)</span><span class="sxs-lookup"><span data-stu-id="d210b-109">Building a Contact Management ASP.NET MVC Application (VB)</span></span>

<span data-ttu-id="d210b-110">W tej serii samouczków tworzymy całą aplikację do zarządzania kontaktami od początku do końca.</span><span class="sxs-lookup"><span data-stu-id="d210b-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="d210b-111">Aplikacja Contact Manager umożliwia przechowywanie informacji kontaktowych — nazw, numerów telefonów i adresów e-mail — w celu uzyskania listy osób.</span><span class="sxs-lookup"><span data-stu-id="d210b-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="d210b-112">Aplikacja została utworzona przez wiele iteracji.</span><span class="sxs-lookup"><span data-stu-id="d210b-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="d210b-113">W przypadku każdej iteracji stopniowo ulepszamy aplikację.</span><span class="sxs-lookup"><span data-stu-id="d210b-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="d210b-114">Celem tej wielu iteracji jest umożliwienie zrozumienia przyczyny każdej zmiany.</span><span class="sxs-lookup"><span data-stu-id="d210b-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="d210b-115">#1 iteracji — Utwórz aplikację.</span><span class="sxs-lookup"><span data-stu-id="d210b-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="d210b-116">W pierwszej iteracji tworzymy Menedżera kontaktów w najprostszy sposób.</span><span class="sxs-lookup"><span data-stu-id="d210b-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="d210b-117">Dodaliśmy obsługę podstawowych operacji bazy danych: Tworzenie, odczytywanie, aktualizowanie i usuwanie (CRUD).</span><span class="sxs-lookup"><span data-stu-id="d210b-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="d210b-118">Iteracja #2 — Zwiększ wygląd aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d210b-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="d210b-119">W tej iteracji ulepszamy wygląd aplikacji, modyfikując domyślną stronę wzorcową widoku MVC ASP.NET i kaskadowy arkusz stylów.</span><span class="sxs-lookup"><span data-stu-id="d210b-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="d210b-120">Iteracja #3 — Dodawanie walidacji formularza.</span><span class="sxs-lookup"><span data-stu-id="d210b-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="d210b-121">W trzeciej iteracji zostanie dodana podstawowa Walidacja formularza.</span><span class="sxs-lookup"><span data-stu-id="d210b-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="d210b-122">Uniemożliwiamy użytkownikom przesyłanie formularza bez wykonywania wymaganych pól formularza.</span><span class="sxs-lookup"><span data-stu-id="d210b-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="d210b-123">Sprawdzamy również adresy e-mail i numery telefonów.</span><span class="sxs-lookup"><span data-stu-id="d210b-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="d210b-124">Iteracja #4 — możliwość swobodnego łączenia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d210b-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="d210b-125">W tej czwartej iteracji wykorzystujemy kilka wzorców projektowych oprogramowania, aby ułatwić konserwację i modyfikowanie aplikacji Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="d210b-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="d210b-126">Na przykład Refaktoryzacja naszej aplikacji używa wzorca repozytorium i wzorca iniekcji zależności.</span><span class="sxs-lookup"><span data-stu-id="d210b-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="d210b-127">#5 iteracji — Utwórz testy jednostkowe.</span><span class="sxs-lookup"><span data-stu-id="d210b-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="d210b-128">W piątej iteracji upraszczamy obsługę i modyfikację naszej aplikacji przez dodanie testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="d210b-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="d210b-129">Tworzymy klasy modelu danych i kompilujemy testy jednostkowe dla naszych kontrolerów i logiki walidacji.</span><span class="sxs-lookup"><span data-stu-id="d210b-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="d210b-130">Iteracja #6 — Użyj programowania opartego na testach.</span><span class="sxs-lookup"><span data-stu-id="d210b-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="d210b-131">W tej szóstej iteracji Dodaliśmy nowe funkcje do naszej aplikacji, pisząc testy jednostkowe jako pierwsze i pisząc kod na testach jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="d210b-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="d210b-132">W tej iteracji dodamy grupy kontaktów.</span><span class="sxs-lookup"><span data-stu-id="d210b-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="d210b-133">Iteracja #7 — Dodawanie funkcji AJAX.</span><span class="sxs-lookup"><span data-stu-id="d210b-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="d210b-134">W siódmej iteracji poprawimy czas reakcji i wydajność naszej aplikacji przez dodanie obsługi technologii AJAX.</span><span class="sxs-lookup"><span data-stu-id="d210b-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="d210b-135">Ta iteracja</span><span class="sxs-lookup"><span data-stu-id="d210b-135">This Iteration</span></span>

<span data-ttu-id="d210b-136">W poprzedniej iteracji aplikacji Contact Manager utworzyliśmy testy jednostkowe w celu zapewnienia bezpieczeństwa sieci w naszym kodzie.</span><span class="sxs-lookup"><span data-stu-id="d210b-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="d210b-137">Motywacja do tworzenia testów jednostkowych była bardziej odporna na zmianę kodu.</span><span class="sxs-lookup"><span data-stu-id="d210b-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="d210b-138">W przypadku testów jednostkowych możemy Happily wprowadzić wszelkie zmiany w naszym kodzie i natychmiast wiedzieć, czy zostały naruszone istniejące funkcje.</span><span class="sxs-lookup"><span data-stu-id="d210b-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="d210b-139">W tej iteracji używamy testów jednostkowych do zupełnie różnych celów.</span><span class="sxs-lookup"><span data-stu-id="d210b-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="d210b-140">W tej iteracji używamy testów jednostkowych jako części opłaty projektowej aplikacji zwanej *programowaniem opartym na testach*.</span><span class="sxs-lookup"><span data-stu-id="d210b-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="d210b-141">W przypadku programowania opartego na testach należy najpierw napisać testy, a następnie napisać kod dla testów.</span><span class="sxs-lookup"><span data-stu-id="d210b-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="d210b-142">Dokładniej, podczas wdrażania opartego na testach, istnieją trzy kroki, które należy wykonać podczas tworzenia kodu (czerwony/zielony/Refaktoryzacja):</span><span class="sxs-lookup"><span data-stu-id="d210b-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="d210b-143">Napisz test jednostkowy, który zakończy się niepowodzeniem (czerwony)</span><span class="sxs-lookup"><span data-stu-id="d210b-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="d210b-144">Napisz kod, który przekazuje test jednostkowy (zielony)</span><span class="sxs-lookup"><span data-stu-id="d210b-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="d210b-145">Refaktoryzacja kodu (Refaktoryzacja)</span><span class="sxs-lookup"><span data-stu-id="d210b-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="d210b-146">Najpierw napiszesz test jednostkowy.</span><span class="sxs-lookup"><span data-stu-id="d210b-146">First, you write the unit test.</span></span> <span data-ttu-id="d210b-147">Test jednostkowy powinien wyrazić swój zamiar w oczekiwaniu na zachowanie kodu.</span><span class="sxs-lookup"><span data-stu-id="d210b-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="d210b-148">Podczas pierwszego tworzenia testu jednostkowego, test jednostkowy powinien kończyć się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="d210b-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="d210b-149">Test powinien zakończyć się niepowodzeniem, ponieważ nie zapisano jeszcze kodu aplikacji spełniającego testy.</span><span class="sxs-lookup"><span data-stu-id="d210b-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="d210b-150">Następnie napisz wystarczy kod, aby test jednostkowy mógł zostać przekazany.</span><span class="sxs-lookup"><span data-stu-id="d210b-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="d210b-151">Celem jest pisanie kodu w laziest, sloppiest i najszybszy możliwy sposób.</span><span class="sxs-lookup"><span data-stu-id="d210b-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="d210b-152">Nie należy tracić czasu na architekturę aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d210b-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="d210b-153">Zamiast tego należy skoncentrować się na zapisaniu minimalnej ilości kodu niezbędnej do zaspokojenia zamiaru wyrażonej przez test jednostkowy.</span><span class="sxs-lookup"><span data-stu-id="d210b-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="d210b-154">Na koniec po zapisaniu wystarczającej ilości kodu można wykonać krok wstecz i rozważyć ogólną architekturę aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d210b-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="d210b-155">W tym kroku należy napisać ponownie (refaktoryzację) swój kod, wykorzystując zalety wzorców projektowych oprogramowania — takich jak wzorzec repozytorium — tak, aby kod był bardziej konserwowany.</span><span class="sxs-lookup"><span data-stu-id="d210b-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="d210b-156">Możesz fearlessly ponownie napisać kod w tym kroku, ponieważ kod jest objęty testami jednostkowymi.</span><span class="sxs-lookup"><span data-stu-id="d210b-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="d210b-157">Istnieje wiele korzyści wynikających z wdrażania opartego na testach.</span><span class="sxs-lookup"><span data-stu-id="d210b-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="d210b-158">W pierwszej kolejności programowanie sterowane testami wymusza skoncentrowanie się na kodzie, który faktycznie musi być zapisany.</span><span class="sxs-lookup"><span data-stu-id="d210b-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="d210b-159">Ze względu na to, że stale napisanie wystarczającej ilości kodu do przekazania określonego testu, nie można Wandering do chwastów i pisania ogromnych ilości kodu, które nigdy nie będą używane.</span><span class="sxs-lookup"><span data-stu-id="d210b-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="d210b-160">Druga metoda projektowania "test First" wymusza napisanie kodu z perspektywy użycia kodu.</span><span class="sxs-lookup"><span data-stu-id="d210b-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="d210b-161">Innymi słowy, gdy jest to zgodne z programowaniem opartym na testach, nieustannie piszesz testy z perspektywy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d210b-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="d210b-162">Z tego względu programowanie sterowane testami może spowodować przejrzyste i bardziej zrozumiałe interfejsy API.</span><span class="sxs-lookup"><span data-stu-id="d210b-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="d210b-163">Na koniec programowanie sterowane testami wymusza możliwość pisania testów jednostkowych w ramach normalnego procesu tworzenia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d210b-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="d210b-164">Zgodnie z podejściem ostatecznym projektu testowanie jest zazwyczaj pierwszym krokiem, który przejdzie do okna.</span><span class="sxs-lookup"><span data-stu-id="d210b-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="d210b-165">W przypadku praktycznego programowania opartego na testach, z drugiej strony, najprawdopodobniej będzie składa na temat pisania testów jednostkowych, ponieważ rozwój oparty na testach sprawia, że testy jednostkowe są centralne dla procesu tworzenia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d210b-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="d210b-166">Aby dowiedzieć się więcej na temat programowania opartego na testach, zalecamy zapoznanie się **z**artykułem Michael.</span><span class="sxs-lookup"><span data-stu-id="d210b-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>

<span data-ttu-id="d210b-167">W tej iteracji dodamy nową funkcję do naszej aplikacji Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="d210b-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="d210b-168">Dodaliśmy obsługę grup kontaktów.</span><span class="sxs-lookup"><span data-stu-id="d210b-168">We add support for Contact Groups.</span></span> <span data-ttu-id="d210b-169">Korzystając z grup kontaktów, można organizować kontakty w kategorie, takie jak grupy biznesowe i zaprzyjaźnione.</span><span class="sxs-lookup"><span data-stu-id="d210b-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="d210b-170">Dodamy tę nową funkcjonalność do naszej aplikacji, wykonując proces projektowania opartego na testach.</span><span class="sxs-lookup"><span data-stu-id="d210b-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="d210b-171">Będziemy najpierw napisać nasze testy jednostkowe, a my zapiszemy cały nasz kod w oparciu o te testy.</span><span class="sxs-lookup"><span data-stu-id="d210b-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="d210b-172">Co zostanie przetestowane</span><span class="sxs-lookup"><span data-stu-id="d210b-172">What Gets Tested</span></span>

<span data-ttu-id="d210b-173">Zgodnie z opisem w poprzedniej iteracji zazwyczaj nie są zapisywane testy jednostkowe dla logiki dostępu do danych ani logiki wyświetlania.</span><span class="sxs-lookup"><span data-stu-id="d210b-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="d210b-174">Nie można napisać testów jednostkowych dla logiki dostępu do danych, ponieważ uzyskanie dostępu do bazy danych jest relatywną niską operacją.</span><span class="sxs-lookup"><span data-stu-id="d210b-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="d210b-175">Nie napiszesz testów jednostkowych dla logiki wyświetlania, ponieważ dostęp do widoku wymaga nawirowania serwera sieci Web, który jest stosunkowo wolno działaniem.</span><span class="sxs-lookup"><span data-stu-id="d210b-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="d210b-176">Nie należy pisać testu jednostkowego, chyba że test można wykonać zbyt szybko i ponownie</span><span class="sxs-lookup"><span data-stu-id="d210b-176">You shouldn't write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="d210b-177">Ponieważ Programowanie oparte na testach jest sterowane przez testy jednostkowe, koncentrujemy się na pierwszym miejscu na pisaniu kontrolerów i logiki biznesowej.</span><span class="sxs-lookup"><span data-stu-id="d210b-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="d210b-178">Unikamy dotknięcia bazy danych lub widoków.</span><span class="sxs-lookup"><span data-stu-id="d210b-178">We avoid touching the database or views.</span></span> <span data-ttu-id="d210b-179">Nie zmodyfikujemy bazy danych ani nie utworzysz jej widoków do momentu zakończenia tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="d210b-179">We won't modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="d210b-180">Zaczynamy od tego, co można przetestować.</span><span class="sxs-lookup"><span data-stu-id="d210b-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="d210b-181">Tworzenie scenariuszy użytkownika</span><span class="sxs-lookup"><span data-stu-id="d210b-181">Creating User Stories</span></span>

<span data-ttu-id="d210b-182">W przypadku wdrażania opartego na testach zawsze zaczyna się od pisania testu.</span><span class="sxs-lookup"><span data-stu-id="d210b-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="d210b-183">To natychmiast wywołuje pytanie: jak określić, jaki test ma być wpisany najpierw?</span><span class="sxs-lookup"><span data-stu-id="d210b-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="d210b-184">Aby odpowiedzieć na to pytanie, należy napisać zestaw [*historii użytkownika*](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="d210b-184">To answer this question, you should write a set of [*user stories*](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="d210b-185">Scenariusz użycia to bardzo krótkie (zwykle jedno zdanie) opis wymagania dotyczącego oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="d210b-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="d210b-186">Powinien być nietechnicznym opisem wymagania zarejestrowanego z perspektywy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d210b-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="d210b-187">W tym miejscu znajduje się zestaw scenariuszy użytkowników opisujących funkcje wymagane przez nową funkcję grupy kontaktów:</span><span class="sxs-lookup"><span data-stu-id="d210b-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="d210b-188">Użytkownik może wyświetlić listę grup kontaktów.</span><span class="sxs-lookup"><span data-stu-id="d210b-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="d210b-189">Użytkownik może utworzyć nową grupę kontaktów.</span><span class="sxs-lookup"><span data-stu-id="d210b-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="d210b-190">Użytkownik może usunąć istniejącą grupę kontaktów.</span><span class="sxs-lookup"><span data-stu-id="d210b-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="d210b-191">Użytkownik może wybrać grupę kontaktów podczas tworzenia nowego kontaktu.</span><span class="sxs-lookup"><span data-stu-id="d210b-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="d210b-192">Użytkownik może wybrać grupę kontaktów podczas edytowania istniejącej osoby kontaktowej.</span><span class="sxs-lookup"><span data-stu-id="d210b-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="d210b-193">W widoku indeks zostanie wyświetlona lista grup kontaktów.</span><span class="sxs-lookup"><span data-stu-id="d210b-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="d210b-194">Gdy użytkownik kliknie grupę kontaktów, zostanie wyświetlona lista pasujących kontaktów.</span><span class="sxs-lookup"><span data-stu-id="d210b-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="d210b-195">Należy zauważyć, że ta lista przypadków użycia jest w pełni zrozumiała dla klienta.</span><span class="sxs-lookup"><span data-stu-id="d210b-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="d210b-196">Nie ma wzmianki o szczegółach implementacji technicznej.</span><span class="sxs-lookup"><span data-stu-id="d210b-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="d210b-197">Podczas tworzenia aplikacji zestaw scenariuszy użycia może stać się bardziej rafinowany.</span><span class="sxs-lookup"><span data-stu-id="d210b-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="d210b-198">Możesz przerwać historię użytkownika w wielu wątkach (wymaganiach).</span><span class="sxs-lookup"><span data-stu-id="d210b-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="d210b-199">Na przykład można zdecydować, że utworzenie nowej grupy kontaktów powinno wiązać się z walidacją.</span><span class="sxs-lookup"><span data-stu-id="d210b-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="d210b-200">Przesyłanie grupy kontaktów bez nazwy powinno zwracać błąd walidacji.</span><span class="sxs-lookup"><span data-stu-id="d210b-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="d210b-201">Po utworzeniu listy historii użytkownika możesz napisać pierwszy test jednostkowy.</span><span class="sxs-lookup"><span data-stu-id="d210b-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="d210b-202">Rozpocznie się tworzenie testów jednostkowych na potrzeby wyświetlania listy grup kontaktów.</span><span class="sxs-lookup"><span data-stu-id="d210b-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="d210b-203">Wyświetlanie listy grup kontaktów</span><span class="sxs-lookup"><span data-stu-id="d210b-203">Listing Contact Groups</span></span>

<span data-ttu-id="d210b-204">Naszym pierwszym scenariuszem użycia jest możliwość wyświetlania listy grup kontaktów przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d210b-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="d210b-205">Musimy przedstawić ten scenariusz z testem.</span><span class="sxs-lookup"><span data-stu-id="d210b-205">We need to express this story with a test.</span></span>

<span data-ttu-id="d210b-206">Utwórz nowy test jednostkowy, klikając prawym przyciskiem myszy folder controllers w projekcie ContactManager. Tests, wybierając pozycję **Dodaj, nowy test**i wybierając szablon **testu jednostkowego** (patrz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="d210b-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="d210b-207">Nazwij nowy test jednostkowy GroupControllerTest. vb i kliknij przycisk **OK** .</span><span class="sxs-lookup"><span data-stu-id="d210b-207">Name the new unit test GroupControllerTest.vb and click the **OK** button.</span></span>

<span data-ttu-id="d210b-208">[![Dodaj test jednostkowy GroupControllerTest](iteration-6-use-test-driven-development-vb/_static/image1.jpg)](iteration-6-use-test-driven-development-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="d210b-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-vb/_static/image1.jpg)](iteration-6-use-test-driven-development-vb/_static/image1.png)</span></span>

<span data-ttu-id="d210b-209">**Ilustracja 01**. Dodawanie testu jednostkowego GroupControllerTest ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="d210b-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image2.png))</span></span>

<span data-ttu-id="d210b-210">Nasz pierwszy test jednostkowy znajduje się na liście 1.</span><span class="sxs-lookup"><span data-stu-id="d210b-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="d210b-211">Ten test sprawdza, czy metoda index () kontrolera grupy zwraca zestaw grup.</span><span class="sxs-lookup"><span data-stu-id="d210b-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="d210b-212">Test weryfikuje, czy kolekcja grup jest zwracana w danych widoku.</span><span class="sxs-lookup"><span data-stu-id="d210b-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="d210b-213">**Lista 1 — Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="d210b-213">**Listing 1 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample1.vb)]

<span data-ttu-id="d210b-214">Gdy po raz pierwszy wpiszesz kod w liście 1 w programie Visual Studio, uzyskasz wiele czerwonych linii falistej.</span><span class="sxs-lookup"><span data-stu-id="d210b-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="d210b-215">Nie utworzono klas GroupController ani Group.</span><span class="sxs-lookup"><span data-stu-id="d210b-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="d210b-216">W tym momencie możemy nawet utworzyć naszą aplikację, aby można było wykonać nasze pierwsze testy jednostkowe.</span><span class="sxs-lookup"><span data-stu-id="d210b-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="d210b-217">To wszystko.</span><span class="sxs-lookup"><span data-stu-id="d210b-217">That s good.</span></span> <span data-ttu-id="d210b-218">Jest to liczone jako niepowodzenie testu.</span><span class="sxs-lookup"><span data-stu-id="d210b-218">That counts as a failing test.</span></span> <span data-ttu-id="d210b-219">W związku z tym mamy teraz uprawnienia do rozpoczęcia pisania kodu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d210b-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="d210b-220">Musimy napisać kod wystarczający do wykonania testu.</span><span class="sxs-lookup"><span data-stu-id="d210b-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="d210b-221">Klasa kontrolera grupy znajdująca się na liście 2 zawiera minimalny kod, który jest wymagany do przekazania testu jednostkowego.</span><span class="sxs-lookup"><span data-stu-id="d210b-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="d210b-222">Akcja index () zwraca statycznie zakodowaną listę grup (Klasa grupy jest zdefiniowana w liście 3).</span><span class="sxs-lookup"><span data-stu-id="d210b-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="d210b-223">**Lista 2 — Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="d210b-223">**Listing 2 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample2.vb)]

<span data-ttu-id="d210b-224">**Lista 3 — Models\Group.vb**</span><span class="sxs-lookup"><span data-stu-id="d210b-224">**Listing 3 - Models\Group.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample3.vb)]

<span data-ttu-id="d210b-225">Po dodaniu klas GroupController i Group do projektu nasz pierwszy test jednostkowy zostanie zakończony pomyślnie (patrz rysunek 2).</span><span class="sxs-lookup"><span data-stu-id="d210b-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="d210b-226">Wprowadziliśmy minimalną ilość pracy wymaganą do przekazania testu.</span><span class="sxs-lookup"><span data-stu-id="d210b-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="d210b-227">Jest to czasochłonne.</span><span class="sxs-lookup"><span data-stu-id="d210b-227">It is time to celebrate.</span></span>

<span data-ttu-id="d210b-228">[![powodzenie!](iteration-6-use-test-driven-development-vb/_static/image2.jpg)](iteration-6-use-test-driven-development-vb/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="d210b-228">[![Success!](iteration-6-use-test-driven-development-vb/_static/image2.jpg)](iteration-6-use-test-driven-development-vb/_static/image3.png)</span></span>

<span data-ttu-id="d210b-229">**Ilustracja 02**: sukces! ([Kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="d210b-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image4.png))</span></span>

## <a name="creating-contact-groups"></a><span data-ttu-id="d210b-230">Tworzenie grup kontaktów</span><span class="sxs-lookup"><span data-stu-id="d210b-230">Creating Contact Groups</span></span>

<span data-ttu-id="d210b-231">Teraz możemy przejść do drugiego scenariusza użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d210b-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="d210b-232">Musimy mieć możliwość tworzenia nowych grup kontaktów.</span><span class="sxs-lookup"><span data-stu-id="d210b-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="d210b-233">Musimy wyrazić ten zamiar w teście.</span><span class="sxs-lookup"><span data-stu-id="d210b-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="d210b-234">Test na liście 4 weryfikuje, że wywołanie metody Create () z nową grupą dodaje grupę do listy grup zwracanych przez metodę index ().</span><span class="sxs-lookup"><span data-stu-id="d210b-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="d210b-235">Innymi słowy, jeśli tworzę nową grupę, chcę mieć możliwość przywrócenia nowej grupy z listy grup zwracanych przez metodę index ().</span><span class="sxs-lookup"><span data-stu-id="d210b-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="d210b-236">**Lista 4 — Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="d210b-236">**Listing 4 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample4.vb)]

<span data-ttu-id="d210b-237">Test w liście 4 wywołuje metodę Create () kontrolera grupy z nową grupą kontaktów.</span><span class="sxs-lookup"><span data-stu-id="d210b-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="d210b-238">Następnie test weryfikuje, że wywołanie metody index () kontrolera grupy zwraca nową grupę w widoku dane.</span><span class="sxs-lookup"><span data-stu-id="d210b-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="d210b-239">Zmodyfikowany kontroler grupy na liście 5 zawiera minimum zmiany wymagane do przekazania nowego testu.</span><span class="sxs-lookup"><span data-stu-id="d210b-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="d210b-240">**Lista 5 — Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="d210b-240">**Listing 5 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample5.vb)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="d210b-241">Kontroler grupy na liście 5 ma nową akcję Create ().</span><span class="sxs-lookup"><span data-stu-id="d210b-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="d210b-242">Ta akcja dodaje grupę do kolekcji grup.</span><span class="sxs-lookup"><span data-stu-id="d210b-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="d210b-243">Zwróć uwagę, że akcja index () została zmodyfikowana w celu zwrócenia zawartości kolekcji grup.</span><span class="sxs-lookup"><span data-stu-id="d210b-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="d210b-244">Po ponownym uruchomieniu test jednostkowy potrzebuje minimalnej ilości pracy wymaganej przez program.</span><span class="sxs-lookup"><span data-stu-id="d210b-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="d210b-245">Po wprowadzeniu tych zmian do kontrolera grupy wszystkie testy jednostkowe zostaną zakończone pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="d210b-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="d210b-246">Dodawanie walidacji</span><span class="sxs-lookup"><span data-stu-id="d210b-246">Adding Validation</span></span>

<span data-ttu-id="d210b-247">Ten wymóg nie został jawnie określony w scenariuszu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d210b-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="d210b-248">Jednak jest uzasadnione wymaganie, aby grupa miała nazwę.</span><span class="sxs-lookup"><span data-stu-id="d210b-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="d210b-249">W przeciwnym razie organizowanie kontaktów do grup nie będzie bardzo przydatne.</span><span class="sxs-lookup"><span data-stu-id="d210b-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="d210b-250">Lista 6 zawiera nowy test, który wyraża ten zamiar.</span><span class="sxs-lookup"><span data-stu-id="d210b-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="d210b-251">Ten test sprawdza, czy próba utworzenia grupy bez podawania nazwy skutkuje komunikatem o błędzie walidacji w stanie modelu.</span><span class="sxs-lookup"><span data-stu-id="d210b-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="d210b-252">**Lista 6 — Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="d210b-252">**Listing 6 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample6.vb)]

<span data-ttu-id="d210b-253">Aby można było spełnić ten test, musimy dodać właściwość Name do naszej klasy grupy (patrz lista 7).</span><span class="sxs-lookup"><span data-stu-id="d210b-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="d210b-254">Ponadto musimy dodać mały bit logiki walidacji do naszej akcji Create () kontrolera grupy (zobacz Lista 8).</span><span class="sxs-lookup"><span data-stu-id="d210b-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="d210b-255">**Lista 7 — Models\Group.vb**</span><span class="sxs-lookup"><span data-stu-id="d210b-255">**Listing 7 - Models\Group.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample7.vb)]

<span data-ttu-id="d210b-256">**Lista 8-Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="d210b-256">**Listing 8 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample8.vb)]

<span data-ttu-id="d210b-257">Zauważ, że akcja Utwórz kontroler grupy () zawiera teraz zarówno walidację, jak i logikę bazy danych.</span><span class="sxs-lookup"><span data-stu-id="d210b-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="d210b-258">Obecnie baza danych używana przez kontroler grupy nie obejmuje niczego więcej niż kolekcja w pamięci.</span><span class="sxs-lookup"><span data-stu-id="d210b-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="d210b-259">Czas do refaktoryzacji</span><span class="sxs-lookup"><span data-stu-id="d210b-259">Time to Refactor</span></span>

<span data-ttu-id="d210b-260">Trzeci krok w czerwono/zielony/refaktoryzacja jest częścią refaktoryzacji.</span><span class="sxs-lookup"><span data-stu-id="d210b-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="d210b-261">W tym momencie musimy wrócić do naszego kodu i zastanowić się, w jaki sposób możemy remyśleć nasze aplikacje w celu usprawnienia jej projektowania.</span><span class="sxs-lookup"><span data-stu-id="d210b-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="d210b-262">Etap refaktoryzacji jest etapem, na którym myślimy o najlepszym sposobie wdrażania zasad i wzorców projektowania oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="d210b-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="d210b-263">Możemy zmodyfikować nasz kod w dowolny sposób, który zdecyduje się na ulepszenie projektu kodu.</span><span class="sxs-lookup"><span data-stu-id="d210b-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="d210b-264">Mamy bezpieczeństwo testów jednostkowych, które uniemożliwiają nam nieprzerwane działanie istniejących funkcji.</span><span class="sxs-lookup"><span data-stu-id="d210b-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="d210b-265">Teraz nasz kontroler grupy to komunikat z perspektywą dobrego projektu oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="d210b-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="d210b-266">Kontroler grupy zawiera tangledy komunikat sprawdzania poprawności i kodu dostępu do danych.</span><span class="sxs-lookup"><span data-stu-id="d210b-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="d210b-267">Aby uniknąć naruszenia jednej zasady odpowiedzialności, należy rozdzielić te zagadnienia na różne klasy.</span><span class="sxs-lookup"><span data-stu-id="d210b-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="d210b-268">Nasze Refaktoryzacja Klasa kontrolera grupy znajduje się na liście 9.</span><span class="sxs-lookup"><span data-stu-id="d210b-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="d210b-269">Kontroler został zmodyfikowany w celu użycia warstwy usługi ContactManager.</span><span class="sxs-lookup"><span data-stu-id="d210b-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="d210b-270">Jest to ta sama warstwa usługi, która jest używana z kontrolerem Contact.</span><span class="sxs-lookup"><span data-stu-id="d210b-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="d210b-271">Lista 10 zawiera nowe metody dodane do warstwy usługi ContactManager do obsługi sprawdzania poprawności, wyświetlania i tworzenia grup.</span><span class="sxs-lookup"><span data-stu-id="d210b-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="d210b-272">Interfejs IContactManagerService został zaktualizowany w celu uwzględnienia nowych metod.</span><span class="sxs-lookup"><span data-stu-id="d210b-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="d210b-273">Lista 11 zawiera nową klasę FakeContactManagerRepository, która implementuje interfejs IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="d210b-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="d210b-274">W przeciwieństwie do klasy EntityContactManagerRepository, która również implementuje interfejs IContactManagerRepository, nasza nowa klasa FakeContactManagerRepository nie komunikuje się z bazą danych.</span><span class="sxs-lookup"><span data-stu-id="d210b-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="d210b-275">Klasa FakeContactManagerRepository używa kolekcji w pamięci jako serwera proxy dla bazy danych.</span><span class="sxs-lookup"><span data-stu-id="d210b-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="d210b-276">Użyjemy tej klasy w naszych testach jednostkowych jako fałszywej warstwie repozytorium.</span><span class="sxs-lookup"><span data-stu-id="d210b-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="d210b-277">**Lista 9-Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="d210b-277">**Listing 9 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample9.vb)]

<span data-ttu-id="d210b-278">**Lista 10-Controllers\ContactManagerService.vb**</span><span class="sxs-lookup"><span data-stu-id="d210b-278">**Listing 10 - Controllers\ContactManagerService.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample10.vb)]

<span data-ttu-id="d210b-279">**Lista 11 — Controllers\FakeContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="d210b-279">**Listing 11 - Controllers\FakeContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample11.vb)]

<span data-ttu-id="d210b-280">Modyfikowanie interfejsu IContactManagerRepository wymaga użycia, aby zaimplementować metody Create () i wyświetlanie grup () w klasie EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="d210b-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="d210b-281">Laziest i najszybszy sposób to dodanie metod zastępczych, które wyglądają następująco:</span><span class="sxs-lookup"><span data-stu-id="d210b-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample12.vb)]

<span data-ttu-id="d210b-282">Na koniec te zmiany w projekcie naszej aplikacji wymagają wprowadzenia pewnych zmian w naszych testach jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="d210b-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="d210b-283">Teraz podczas przeprowadzania testów jednostkowych musimy używać FakeContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="d210b-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="d210b-284">Zaktualizowana Klasa GroupControllerTest znajduje się na liście 12.</span><span class="sxs-lookup"><span data-stu-id="d210b-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="d210b-285">**Lista 12 — Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="d210b-285">**Listing 12 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample13.vb)]

<span data-ttu-id="d210b-286">Po ponownym wprowadzeniu wszystkich tych zmian wszystkie testy jednostkowe zostaną zakończone pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="d210b-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="d210b-287">Cały cykl czerwony/zielony/Refaktoryzacja został ukończony.</span><span class="sxs-lookup"><span data-stu-id="d210b-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="d210b-288">Wprowadziliśmy pierwsze dwa historie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d210b-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="d210b-289">Firma Microsoft obsługuje teraz testy jednostkowe dla wymagań wyrażonych w wątkach użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d210b-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="d210b-290">Implementacja pozostałej części historii użytkownika obejmuje powtarzanie tego samego cyklu czerwony/zielony/refaktoryzacji.</span><span class="sxs-lookup"><span data-stu-id="d210b-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="d210b-291">Modyfikowanie naszej bazy danych</span><span class="sxs-lookup"><span data-stu-id="d210b-291">Modifying our Database</span></span>

<span data-ttu-id="d210b-292">Niestety, mimo że wszystkie wymagania podane przez nasze testy jednostkowe zostały spełnione, nasze prace nie są wykonywane.</span><span class="sxs-lookup"><span data-stu-id="d210b-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="d210b-293">Nadal musimy zmodyfikować naszą bazę danych.</span><span class="sxs-lookup"><span data-stu-id="d210b-293">We still need to modify our database.</span></span>

<span data-ttu-id="d210b-294">Musimy utworzyć nową tabelę bazy danych grup.</span><span class="sxs-lookup"><span data-stu-id="d210b-294">We need to create a new Group database table.</span></span> <span data-ttu-id="d210b-295">Wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="d210b-295">Follow these steps:</span></span>

1. <span data-ttu-id="d210b-296">W oknie Eksplorator serwera kliknij prawym przyciskiem myszy folder tabele i wybierz opcję menu **Dodaj nową tabelę**.</span><span class="sxs-lookup"><span data-stu-id="d210b-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="d210b-297">Wprowadź dwie kolumny opisane poniżej w Projektancie tabel.</span><span class="sxs-lookup"><span data-stu-id="d210b-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="d210b-298">Oznacz kolumnę ID jako kolumnę klucza podstawowego i tożsamości.</span><span class="sxs-lookup"><span data-stu-id="d210b-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="d210b-299">Zapisz nową tabelę z nazwami grup, klikając ikonę dyskietki.</span><span class="sxs-lookup"><span data-stu-id="d210b-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.12_table01"></a>

| <span data-ttu-id="d210b-300">**Nazwa kolumny**</span><span class="sxs-lookup"><span data-stu-id="d210b-300">**Column Name**</span></span> | <span data-ttu-id="d210b-301">**Typ danych**</span><span class="sxs-lookup"><span data-stu-id="d210b-301">**Data Type**</span></span> | <span data-ttu-id="d210b-302">**Zezwalaj na wartości null**</span><span class="sxs-lookup"><span data-stu-id="d210b-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="d210b-303">Identyfikator</span><span class="sxs-lookup"><span data-stu-id="d210b-303">Id</span></span> | <span data-ttu-id="d210b-304">int</span><span class="sxs-lookup"><span data-stu-id="d210b-304">int</span></span> | <span data-ttu-id="d210b-305">Fałsz</span><span class="sxs-lookup"><span data-stu-id="d210b-305">False</span></span> |
| <span data-ttu-id="d210b-306">Name (Nazwa)</span><span class="sxs-lookup"><span data-stu-id="d210b-306">Name</span></span> | <span data-ttu-id="d210b-307">nvarchar (50)</span><span class="sxs-lookup"><span data-stu-id="d210b-307">nvarchar(50)</span></span> | <span data-ttu-id="d210b-308">Fałsz</span><span class="sxs-lookup"><span data-stu-id="d210b-308">False</span></span> |

<span data-ttu-id="d210b-309">Następnie musimy usunąć wszystkie dane z tabeli kontaktów (w przeciwnym razie nie będzie można utworzyć relacji między tabelami kontakty i grupy).</span><span class="sxs-lookup"><span data-stu-id="d210b-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won't be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="d210b-310">Wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="d210b-310">Follow these steps:</span></span>

1. <span data-ttu-id="d210b-311">Kliknij prawym przyciskiem myszy tabelę kontakty i wybierz opcję menu **Pokaż dane tabeli**.</span><span class="sxs-lookup"><span data-stu-id="d210b-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="d210b-312">Usuń wszystkie wiersze.</span><span class="sxs-lookup"><span data-stu-id="d210b-312">Delete all of the rows.</span></span>

<span data-ttu-id="d210b-313">Następnie musimy zdefiniować relację między tabelą bazy danych grup a istniejącą tabelą bazy danych kontaktów.</span><span class="sxs-lookup"><span data-stu-id="d210b-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="d210b-314">Wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="d210b-314">Follow these steps:</span></span>

1. <span data-ttu-id="d210b-315">Kliknij dwukrotnie tabelę kontakty w oknie Eksplorator serwera, aby otworzyć projektanta tabel.</span><span class="sxs-lookup"><span data-stu-id="d210b-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="d210b-316">Dodaj nową kolumnę Integer do tabeli Contacts o nazwie GroupId.</span><span class="sxs-lookup"><span data-stu-id="d210b-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="d210b-317">Kliknij przycisk relacja, aby otworzyć okno dialogowe relacje klucza obcego (patrz rysunek 3).</span><span class="sxs-lookup"><span data-stu-id="d210b-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="d210b-318">Kliknij przycisk Dodaj.</span><span class="sxs-lookup"><span data-stu-id="d210b-318">Click the Add button.</span></span>
5. <span data-ttu-id="d210b-319">Kliknij przycisk wielokropka, który pojawia się obok przycisku Specyfikacja tabeli i kolumny.</span><span class="sxs-lookup"><span data-stu-id="d210b-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="d210b-320">W oknie dialogowym tabele i kolumny wybierz pozycję grupy jako tabelę klucza podstawowego i identyfikator jako kolumnę klucza podstawowego.</span><span class="sxs-lookup"><span data-stu-id="d210b-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="d210b-321">Wybierz kontakty jako tabelę klucza obcego i identyfikator GroupId jako kolumnę klucza obcego (zobacz rysunek 4).</span><span class="sxs-lookup"><span data-stu-id="d210b-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="d210b-322">Kliknij przycisk OK.</span><span class="sxs-lookup"><span data-stu-id="d210b-322">Click the OK button.</span></span>
7. <span data-ttu-id="d210b-323">W obszarze **Specyfikacja INSERT i Update**wybierz wartość **Kaskada** dla **reguły usuwania**.</span><span class="sxs-lookup"><span data-stu-id="d210b-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="d210b-324">Kliknij przycisk Zamknij, aby zamknąć okno dialogowe relacje klucza obcego.</span><span class="sxs-lookup"><span data-stu-id="d210b-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="d210b-325">Kliknij przycisk Zapisz, aby zapisać zmiany w tabeli kontakty.</span><span class="sxs-lookup"><span data-stu-id="d210b-325">Click the Save button to save the changes to the Contacts table.</span></span>

<span data-ttu-id="d210b-326">[![tworzenia relacji tabeli bazy danych](iteration-6-use-test-driven-development-vb/_static/image3.jpg)](iteration-6-use-test-driven-development-vb/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="d210b-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-vb/_static/image3.jpg)](iteration-6-use-test-driven-development-vb/_static/image5.png)</span></span>

<span data-ttu-id="d210b-327">**Ilustracja 03**: Tworzenie relacji tabeli bazy danych ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="d210b-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image6.png))</span></span>

<span data-ttu-id="d210b-328">[![Określanie relacji między tabelami](iteration-6-use-test-driven-development-vb/_static/image4.jpg)](iteration-6-use-test-driven-development-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="d210b-328">[![Specifying table relationships](iteration-6-use-test-driven-development-vb/_static/image4.jpg)](iteration-6-use-test-driven-development-vb/_static/image7.png)</span></span>

<span data-ttu-id="d210b-329">**Ilustracja 04**: Określanie relacji tabeli ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="d210b-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image8.png))</span></span>

### <a name="updating-our-data-model"></a><span data-ttu-id="d210b-330">Aktualizowanie naszego modelu danych</span><span class="sxs-lookup"><span data-stu-id="d210b-330">Updating our Data Model</span></span>

<span data-ttu-id="d210b-331">Następnie musimy zaktualizować nasz model danych, aby reprezentować nową tabelę bazy danych.</span><span class="sxs-lookup"><span data-stu-id="d210b-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="d210b-332">Wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="d210b-332">Follow these steps:</span></span>

1. <span data-ttu-id="d210b-333">Kliknij dwukrotnie plik ContactManagerModel. edmx w folderze models, aby otworzyć Entity Designer.</span><span class="sxs-lookup"><span data-stu-id="d210b-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="d210b-334">Kliknij prawym przyciskiem myszy powierzchnię projektanta i wybierz opcję menu **Aktualizuj model z bazy danych**.</span><span class="sxs-lookup"><span data-stu-id="d210b-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="d210b-335">W Kreatorze aktualizacji wybierz tabelę grupy i kliknij przycisk Zakończ (patrz rysunek 5).</span><span class="sxs-lookup"><span data-stu-id="d210b-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="d210b-336">Kliknij prawym przyciskiem myszy jednostkę grupy i wybierz opcję menu **Zmień nazwę**.</span><span class="sxs-lookup"><span data-stu-id="d210b-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="d210b-337">Zmień nazwę jednostki *grupy* na *grupę* (pojedyncza).</span><span class="sxs-lookup"><span data-stu-id="d210b-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="d210b-338">Kliknij prawym przyciskiem myszy właściwość nawigacji grupy, która pojawia się u dołu jednostki kontakt.</span><span class="sxs-lookup"><span data-stu-id="d210b-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="d210b-339">Zmień nazwę właściwości nawigacji *grup* na *grupę* (pojedyncza).</span><span class="sxs-lookup"><span data-stu-id="d210b-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>

<span data-ttu-id="d210b-340">[![aktualizowania modelu Entity Framework z bazy danych](iteration-6-use-test-driven-development-vb/_static/image5.jpg)](iteration-6-use-test-driven-development-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="d210b-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-vb/_static/image5.jpg)](iteration-6-use-test-driven-development-vb/_static/image9.png)</span></span>

<span data-ttu-id="d210b-341">**Ilustracja 05**: aktualizowanie modelu Entity Framework z bazy danych ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="d210b-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image10.png))</span></span>

<span data-ttu-id="d210b-342">Po wykonaniu tych kroków model danych będzie reprezentował tabele kontakty i grupy.</span><span class="sxs-lookup"><span data-stu-id="d210b-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="d210b-343">W Entity Designer powinny być wyświetlane obie jednostki (zobacz rysunek 6).</span><span class="sxs-lookup"><span data-stu-id="d210b-343">The Entity Designer should show both entities (see Figure 6).</span></span>

<span data-ttu-id="d210b-344">[![Entity Designer wyświetlania grupy i kontaktu](iteration-6-use-test-driven-development-vb/_static/image6.jpg)](iteration-6-use-test-driven-development-vb/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="d210b-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-vb/_static/image6.jpg)](iteration-6-use-test-driven-development-vb/_static/image11.png)</span></span>

<span data-ttu-id="d210b-345">**Ilustracja 06**. Entity Designer wyświetlania grupy i kontaktu ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="d210b-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image12.png))</span></span>

### <a name="creating-our-repository-classes"></a><span data-ttu-id="d210b-346">Tworzenie naszych klas repozytorium</span><span class="sxs-lookup"><span data-stu-id="d210b-346">Creating our Repository Classes</span></span>

<span data-ttu-id="d210b-347">Następnie musimy zaimplementować nasze klasy repozytorium.</span><span class="sxs-lookup"><span data-stu-id="d210b-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="d210b-348">W trakcie tej iteracji dodaliśmy kilka nowych metod do interfejsu IContactManagerRepository podczas pisania kodu, aby spełnić nasze testy jednostkowe.</span><span class="sxs-lookup"><span data-stu-id="d210b-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="d210b-349">Końcowa wersja interfejsu IContactManagerRepository jest zawarta w liście 14.</span><span class="sxs-lookup"><span data-stu-id="d210b-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="d210b-350">**Lista 14-Models\IContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="d210b-350">**Listing 14 - Models\IContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample14.vb)]

<span data-ttu-id="d210b-351">W rzeczywistości nie zaimplementowano żadnej z metod związanych z pracą z grupami kontaktów w naszej rzeczywistej klasie EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="d210b-351">We haven't actually implemented any of the methods related to working with contact groups in our real EntityContactManagerRepository class.</span></span> <span data-ttu-id="d210b-352">Obecnie Klasa EntityContactManagerRepository ma metody zastępcze dla każdej metody grupy kontaktów wymienionej w interfejsie IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="d210b-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="d210b-353">Na przykład Metoda wyświetlanie grup () aktualnie wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="d210b-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample15.vb)]

<span data-ttu-id="d210b-354">Metody zastępcze umożliwiały nam Kompilowanie naszej aplikacji i przekazywanie testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="d210b-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="d210b-355">Jednak teraz czas na faktyczne wdrożenie tych metod.</span><span class="sxs-lookup"><span data-stu-id="d210b-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="d210b-356">Końcowa wersja klasy EntityContactManagerRepository jest zawarta w liście 13.</span><span class="sxs-lookup"><span data-stu-id="d210b-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="d210b-357">**Lista 13-Models\EntityContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="d210b-357">**Listing 13 - Models\EntityContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample16.vb)]

### <a name="creating-the-views"></a><span data-ttu-id="d210b-358">Tworzenie widoków</span><span class="sxs-lookup"><span data-stu-id="d210b-358">Creating the Views</span></span>

<span data-ttu-id="d210b-359">ASP.NET aplikację MVC przy użyciu domyślnego aparatu widoku ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="d210b-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="d210b-360">Dlatego nie należy tworzyć widoków w odpowiedzi na konkretny test jednostkowy.</span><span class="sxs-lookup"><span data-stu-id="d210b-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="d210b-361">Jednak ze względu na to, że aplikacja będzie bezużyteczny bez widoków, możemy zakończyć tę iterację bez tworzenia i modyfikowania widoków zawartych w aplikacji Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="d210b-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="d210b-362">Musimy utworzyć następujące nowe widoki do zarządzania grupami kontaktów (patrz rysunek 7):</span><span class="sxs-lookup"><span data-stu-id="d210b-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="d210b-363">Views\Group\Index.aspx — wyświetla listę grup kontaktów</span><span class="sxs-lookup"><span data-stu-id="d210b-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="d210b-364">Views\Group\Delete.aspx — wyświetla formularz potwierdzenia usuwania grupy kontaktów</span><span class="sxs-lookup"><span data-stu-id="d210b-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>

<span data-ttu-id="d210b-365">[![widoku indeksu grupy](iteration-6-use-test-driven-development-vb/_static/image7.jpg)](iteration-6-use-test-driven-development-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="d210b-365">[![The Group Index view](iteration-6-use-test-driven-development-vb/_static/image7.jpg)](iteration-6-use-test-driven-development-vb/_static/image13.png)</span></span>

<span data-ttu-id="d210b-366">**Ilustracja 07**: widok indeksu grupy ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="d210b-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image14.png))</span></span>

<span data-ttu-id="d210b-367">Musimy zmodyfikować następujące istniejące widoki, aby zawierały grupy kontaktów:</span><span class="sxs-lookup"><span data-stu-id="d210b-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="d210b-368">Views\Home\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="d210b-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="d210b-369">Views\Home\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="d210b-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="d210b-370">Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="d210b-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="d210b-371">Zmodyfikowane widoki można wyświetlić, przeglądając aplikację Visual Studio, która obejmuje ten samouczek.</span><span class="sxs-lookup"><span data-stu-id="d210b-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="d210b-372">Na przykład rysunek 8 ilustruje widok indeksu kontaktów.</span><span class="sxs-lookup"><span data-stu-id="d210b-372">For example, Figure 8 illustrates the Contact Index view.</span></span>

<span data-ttu-id="d210b-373">[![widoku indeksu kontaktów](iteration-6-use-test-driven-development-vb/_static/image8.jpg)](iteration-6-use-test-driven-development-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="d210b-373">[![The Contact Index view](iteration-6-use-test-driven-development-vb/_static/image8.jpg)](iteration-6-use-test-driven-development-vb/_static/image15.png)</span></span>

<span data-ttu-id="d210b-374">**Ilustracja 08**: widok indeksu kontaktów ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="d210b-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image16.png))</span></span>

## <a name="summary"></a><span data-ttu-id="d210b-375">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="d210b-375">Summary</span></span>

<span data-ttu-id="d210b-376">W tej iteracji Dodaliśmy nową funkcję do naszej aplikacji do zarządzania kontaktami, postępując zgodnie z metodologią projektowania aplikacji programistycznych opartych na testach.</span><span class="sxs-lookup"><span data-stu-id="d210b-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="d210b-377">Rozpoczęto od utworzenia zestawu scenariuszy użycia.</span><span class="sxs-lookup"><span data-stu-id="d210b-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="d210b-378">Utworzyliśmy zestaw testów jednostkowych odpowiadających wymaganiom wyrażonym przez historie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d210b-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="d210b-379">Wreszcie zapisałem wystarczy kod wystarczający do spełnienia wymagań wyrażonych przez testy jednostkowe.</span><span class="sxs-lookup"><span data-stu-id="d210b-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="d210b-380">Po zapisaniu wystarczającej ilości kodu w celu spełnienia wymagań wyrażonych przez testy jednostkowe Zaktualizowaliśmy bazę danych i widoki.</span><span class="sxs-lookup"><span data-stu-id="d210b-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="d210b-381">Dodaliśmy nową tabelę grup do bazy danych i Zaktualizowano nasz model danych Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="d210b-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="d210b-382">Utworzono również i zmodyfikowano zestaw widoków.</span><span class="sxs-lookup"><span data-stu-id="d210b-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="d210b-383">W następnej iteracji — Ostatnia iteracja — ponownie napiszemy naszą aplikację, aby skorzystać z technologii AJAX.</span><span class="sxs-lookup"><span data-stu-id="d210b-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="d210b-384">Dzięki wykorzystaniu technologii AJAX poprawimy czas odpowiedzi i wydajność aplikacji Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="d210b-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="d210b-385">[Poprzednie](iteration-5-create-unit-tests-vb.md)
> [dalej](iteration-7-add-ajax-functionality-vb.md)</span><span class="sxs-lookup"><span data-stu-id="d210b-385">[Previous](iteration-5-create-unit-tests-vb.md)
[Next](iteration-7-add-ajax-functionality-vb.md)</span></span>

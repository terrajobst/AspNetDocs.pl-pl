---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
title: 'Iteracja #6 — korzystanie z projektowania opartego na testach (C#) | Dokumentacja firmy Microsoft'
author: microsoft
description: W tym szóstego iteracji dodamy nowe funkcje do naszej aplikacji, najpierw pisanie testów jednostkowych i pisanie kodu dla testów jednostkowych. W tym iteracji...
ms.author: riande
ms.date: 02/20/2009
ms.assetid: 013c3c26-7dc3-41d1-8064-f233c86008b5
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
msc.type: authoredcontent
ms.openlocfilehash: 94885984ebad90523369dcf5771d0f77a753008f
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/09/2019
ms.locfileid: "59405667"
---
# <a name="iteration-6--use-test-driven-development-c"></a><span data-ttu-id="663aa-104">Iteracja #6 — korzystanie z projektowania opartego na testach (C#)</span><span class="sxs-lookup"><span data-stu-id="663aa-104">Iteration #6 – Use test-driven development (C#)</span></span>

<span data-ttu-id="663aa-105">przez [firmy Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="663aa-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="663aa-106">Pobierz program Code</span><span class="sxs-lookup"><span data-stu-id="663aa-106">Download Code</span></span>](iteration-6-use-test-driven-development-cs/_static/contactmanager_6_cs1.zip)

> <span data-ttu-id="663aa-107">W tym szóstego iteracji dodamy nowe funkcje do naszej aplikacji, najpierw pisanie testów jednostkowych i pisanie kodu dla testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="663aa-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="663aa-108">W tym iteracji dodamy grup kontaktów.</span><span class="sxs-lookup"><span data-stu-id="663aa-108">In this iteration, we add contact groups.</span></span>


## <a name="building-a-contact-management-aspnet-mvc-application-c"></a><span data-ttu-id="663aa-109">Tworzenie aplikacji zarządzania kontaktami platformy ASP.NET MVC (C#)</span><span class="sxs-lookup"><span data-stu-id="663aa-109">Building a Contact Management ASP.NET MVC Application (C#)</span></span>
  

<span data-ttu-id="663aa-110">W tej serii samouczków wbudowujemy całej aplikacji zarządzania skontaktuj się z od początku do zakończenia.</span><span class="sxs-lookup"><span data-stu-id="663aa-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="663aa-111">Aplikacja Contact Manager umożliwia przechowywanie informacji kontaktowych — nazwy, numerów telefonów i adresów e-mail — lista osób.</span><span class="sxs-lookup"><span data-stu-id="663aa-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="663aa-112">Firma Microsoft tworzy aplikację za pośrednictwem wiele iteracji.</span><span class="sxs-lookup"><span data-stu-id="663aa-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="663aa-113">Z każdą iteracją można stopniowo ulepszyć aplikację.</span><span class="sxs-lookup"><span data-stu-id="663aa-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="663aa-114">Celem tego wielu podejścia iteracji jest, aby umożliwić Ci zrozumienie przyczyn wprowadzenia poszczególnych zmian.</span><span class="sxs-lookup"><span data-stu-id="663aa-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="663aa-115">Iteracja #1 — Tworzenie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="663aa-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="663aa-116">W pierwszej iteracji utworzymy Contact Manager w najprostszym sposobem możliwe.</span><span class="sxs-lookup"><span data-stu-id="663aa-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="663aa-117">Dodano obsługę dla operacji podstawowej bazy danych: Tworzenia, odczytu, aktualizacji i usuwania (CRUD).</span><span class="sxs-lookup"><span data-stu-id="663aa-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="663aa-118">Iteracja 2 # — należy wyglądu nieuprzywilejowany aplikacji.</span><span class="sxs-lookup"><span data-stu-id="663aa-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="663aa-119">W tej iteracji możemy poprawić wygląd aplikacji przez zmodyfikowanie domyślnych strony wzorcowej widoku platformy ASP.NET MVC i kaskadowych arkuszy stylów.</span><span class="sxs-lookup"><span data-stu-id="663aa-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="663aa-120">Iteracja #3 — Dodawanie weryfikacji formularza.</span><span class="sxs-lookup"><span data-stu-id="663aa-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="663aa-121">W trzecim iteracji dodamy weryfikacji formularza podstawowego.</span><span class="sxs-lookup"><span data-stu-id="663aa-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="663aa-122">Firma Microsoft ochronić przed przesłaniem formularza nie kończą działania wymaganych pól formularza.</span><span class="sxs-lookup"><span data-stu-id="663aa-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="663aa-123">Możemy zweryfikować adresy e-mail oraz numerów telefonów.</span><span class="sxs-lookup"><span data-stu-id="663aa-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="663aa-124">Iteracja 4 # — należy luźne sprzężenie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="663aa-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="663aa-125">W tym czwarty iteracji możemy korzystać z kilku wzorców projektowych oprogramowania, aby ułatwić konserwację i modyfikowanie aplikacji Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="663aa-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="663aa-126">Na przykład możemy refaktoryzować naszej aplikacji do korzystania z wzorca repozytorium i wzorzec iniekcji zależności.</span><span class="sxs-lookup"><span data-stu-id="663aa-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="663aa-127">Iteracja #5 — Tworzenie testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="663aa-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="663aa-128">W piątej iteracji ułatwiamy naszej aplikacji ułatwia konserwację i modyfikowanie, dodając testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="663aa-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="663aa-129">Firma Microsoft testowanie naszych zajęć modelu danych i tworzenie testów jednostkowych dla naszych kontrolery i logikę weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="663aa-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="663aa-130">Iteracja #6 — korzystanie z projektowania opartego na testach.</span><span class="sxs-lookup"><span data-stu-id="663aa-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="663aa-131">W tym szóstego iteracji dodamy nowe funkcje do naszej aplikacji, najpierw pisanie testów jednostkowych i pisanie kodu dla testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="663aa-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="663aa-132">W tym iteracji dodamy grup kontaktów.</span><span class="sxs-lookup"><span data-stu-id="663aa-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="663aa-133">Iteracja #7 — dodawanie funkcji Ajax.</span><span class="sxs-lookup"><span data-stu-id="663aa-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="663aa-134">W siódmej iteracji można ulepszyć czas odpowiedzi i wydajności naszych aplikacji przez dodanie obsługi technologii AJAX.</span><span class="sxs-lookup"><span data-stu-id="663aa-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="663aa-135">Tej iteracji</span><span class="sxs-lookup"><span data-stu-id="663aa-135">This Iteration</span></span>

<span data-ttu-id="663aa-136">W poprzedniej iteracji aplikacji Contact Manager utworzyliśmy testów jednostkowych w celu zapewnienia zabezpieczenie naszego kodu.</span><span class="sxs-lookup"><span data-stu-id="663aa-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="663aa-137">Motywacją do tworzenia testów jednostkowych było naszego kodu bardziej odporne na zmiany.</span><span class="sxs-lookup"><span data-stu-id="663aa-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="663aa-138">Przy użyciu testów jednostkowych w miejscu możemy trafem korzysta wprowadzać zmian do naszego kodu i od razu wiedzieć, czy możemy przerwane istniejących funkcji.</span><span class="sxs-lookup"><span data-stu-id="663aa-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="663aa-139">W tej iteracji testów jednostkowych jest używana w zupełnie innego celu.</span><span class="sxs-lookup"><span data-stu-id="663aa-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="663aa-140">W tej iteracji używamy testy jednostkowe, jako część filozofia projektowania aplikacji o nazwie *programowania sterowanego testami*.</span><span class="sxs-lookup"><span data-stu-id="663aa-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="663aa-141">Podczas programowania sterowanego testami praktyczne w sytuacji, należy najpierw pisania testów, a następnie napisz kod dla testów.</span><span class="sxs-lookup"><span data-stu-id="663aa-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="663aa-142">Mówiąc ściślej, gdy ćwiczenia programowania sterowanego testami, istnieją trzy kroki, które zostaną wykonane podczas tworzenia kodu (czerwony / zielony/Zrefaktoryzuj):</span><span class="sxs-lookup"><span data-stu-id="663aa-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="663aa-143">Napisać test jednostkowy, który zakończy się niepowodzeniem (czerwony)</span><span class="sxs-lookup"><span data-stu-id="663aa-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="663aa-144">Napisać kod, który przekazuje testu jednostkowego (zielony)</span><span class="sxs-lookup"><span data-stu-id="663aa-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="663aa-145">Refaktoryzacja kodu (Refaktoryzacja)</span><span class="sxs-lookup"><span data-stu-id="663aa-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="663aa-146">Po pierwsze można napisać test jednostkowy.</span><span class="sxs-lookup"><span data-stu-id="663aa-146">First, you write the unit test.</span></span> <span data-ttu-id="663aa-147">Test jednostkowy powinien wyrażać zamiaru dla jak oczekujesz, że Twój kod będzie działać.</span><span class="sxs-lookup"><span data-stu-id="663aa-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="663aa-148">Po utworzeniu testu jednostkowego test jednostkowy powinna zakończyć się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="663aa-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="663aa-149">Test powinna zakończyć się niepowodzeniem, ponieważ nie zostały jeszcze zapisane wszelki kod aplikacji, który spełnia testu.</span><span class="sxs-lookup"><span data-stu-id="663aa-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="663aa-150">Następnie zapisz wystarczający tylko kod, aby test jednostkowy do przekazania.</span><span class="sxs-lookup"><span data-stu-id="663aa-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="663aa-151">Celem jest pisanie kodu w sposób laziest, sloppiest i najszybszych możliwe.</span><span class="sxs-lookup"><span data-stu-id="663aa-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="663aa-152">Należy nie tracić czasu myśleć o architekturze aplikacji.</span><span class="sxs-lookup"><span data-stu-id="663aa-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="663aa-153">Zamiast tego należy skoncentrować się na pisaniu minimalnej ilości kodu, które są niezbędne do spełnienia zamiar wyrażona przez test jednostkowy.</span><span class="sxs-lookup"><span data-stu-id="663aa-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="663aa-154">Na koniec po napisaniu wystarczającej ilości kodu można krok do tyłu i należy wziąć pod uwagę ogólna Architektura aplikacji.</span><span class="sxs-lookup"><span data-stu-id="663aa-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="663aa-155">W tym kroku edycji (Refaktoryzacja) kodu, wykorzystując projektowania oprogramowania wzorców — takich jak wzorzec repozytorium — tak, aby Twój kod będzie łatwiejszy w utrzymaniu.</span><span class="sxs-lookup"><span data-stu-id="663aa-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="663aa-156">Odważnie można przepisać kod w tym kroku, ponieważ kodu jest objęta testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="663aa-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="663aa-157">Istnieje wiele korzyści wynikających z ćwiczenia programowania sterowanego testami.</span><span class="sxs-lookup"><span data-stu-id="663aa-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="663aa-158">Po pierwsze, oparte na testach programowanie wymusza pozwala skupić się na kod, który faktycznie potrzebny do zapisania.</span><span class="sxs-lookup"><span data-stu-id="663aa-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="663aa-159">Ponieważ są stale koncentruje się na tylko pisania wystarczającej ilości kodu do przekazania konkretnego testu, będą mogli się wandering do gąszcz i zapisywanie ogromnych ilości kodu, który nigdy nie będą używane.</span><span class="sxs-lookup"><span data-stu-id="663aa-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="663aa-160">Po drugie metodologię projektowania "test najpierw" wymusza pisanie kodu pod względem sposobu użycia kodu.</span><span class="sxs-lookup"><span data-stu-id="663aa-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="663aa-161">Innymi słowy gdy ćwiczenia programowania sterowanego testami, stale pisania testów z punktu widzenia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="663aa-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="663aa-162">W związku z tym programowania sterowanego testami może spowodować bardziej przejrzyste i bardziej zrozumiały interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="663aa-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="663aa-163">Na koniec programowania sterowanego testami wymusza pisanie testów jednostkowych w ramach normalnego procesu pisania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="663aa-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="663aa-164">Jak zbliża się termin projektu badania jest zazwyczaj pierwszą rzeczą, która trafia do okna.</span><span class="sxs-lookup"><span data-stu-id="663aa-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="663aa-165">Podczas ćwiczeń programowania sterowanego testami z drugiej strony, należy prawdopodobnie bardziej składa dotyczące pisania testów jednostkowych, ponieważ programowania sterowanego testami sprawia, że testy jednostkowe centralnej do procesu tworzenia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="663aa-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="663aa-166">Aby dowiedzieć się więcej na temat programowania sterowanego testami, I zaleca się przeczytanie książki Michael Feathers **działa wydajnie z kodem Legacy**.</span><span class="sxs-lookup"><span data-stu-id="663aa-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>


<span data-ttu-id="663aa-167">W tym iteracji dodamy nową funkcję do naszej aplikacji Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="663aa-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="663aa-168">Dodajemy obsługę skontaktuj się z grup.</span><span class="sxs-lookup"><span data-stu-id="663aa-168">We add support for Contact Groups.</span></span> <span data-ttu-id="663aa-169">Można użyć, skontaktuj się z grup w celu zorganizowania kontaktów na kategorie, takie jak firmy i grupy Friend.</span><span class="sxs-lookup"><span data-stu-id="663aa-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="663aa-170">Dodamy tej nowej funkcji do naszej aplikacji postępując zgodnie z procesem programowania sterowanego testami.</span><span class="sxs-lookup"><span data-stu-id="663aa-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="663aa-171">Nasze testy jednostkowe będziemy pisać najpierw oboje będziemy pisać wszystkich naszych kodować te testy.</span><span class="sxs-lookup"><span data-stu-id="663aa-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="663aa-172">Co pobiera przetestowane</span><span class="sxs-lookup"><span data-stu-id="663aa-172">What Gets Tested</span></span>

<span data-ttu-id="663aa-173">Jak wspomniano w poprzedniej iteracji, zazwyczaj nie pisać testy jednostkowe dla logiką dostępu do danych ani wyświetlić logiki.</span><span class="sxs-lookup"><span data-stu-id="663aa-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="663aa-174">Komputer t pisanie testów jednostkowych logiką dostępu do danych, ponieważ dostęp do bazy danych jest stosunkowo wolne działanie.</span><span class="sxs-lookup"><span data-stu-id="663aa-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="663aa-175">Komputer testów jednostkowych zapisu t logiki widoku, ponieważ uzyskanie dostępu do widoku wymaga uruchamiając serwera sieci web, która jest stosunkowo wolne działanie.</span><span class="sxs-lookup"><span data-stu-id="663aa-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="663aa-176">Nie należy napisać test jednostkowy, chyba że testu mogą być wykonywane wielokrotnie bardzo szybko</span><span class="sxs-lookup"><span data-stu-id="663aa-176">You shouldn't write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="663aa-177">Ponieważ programowania sterowanego testami jest wymuszany przez testy jednostkowe, możemy skoncentrować się początkowo na pisaniu kontrolera i logiki biznesowej.</span><span class="sxs-lookup"><span data-stu-id="663aa-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="663aa-178">Firma Microsoft należy unikać modyfikowania bazy danych lub widoki.</span><span class="sxs-lookup"><span data-stu-id="663aa-178">We avoid touching the database or views.</span></span> <span data-ttu-id="663aa-179">Firma Microsoft nie modyfikacji bazy danych lub Utwórz naszych widoków do bardzo końca tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="663aa-179">We won't modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="663aa-180">Rozpoczniemy pracę co mogą być testowane.</span><span class="sxs-lookup"><span data-stu-id="663aa-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="663aa-181">Tworzenie przypadków użycia</span><span class="sxs-lookup"><span data-stu-id="663aa-181">Creating User Stories</span></span>

<span data-ttu-id="663aa-182">Podczas ćwiczeń programowania sterowanego testami należy zawsze rozpoczyna się od pisania testu.</span><span class="sxs-lookup"><span data-stu-id="663aa-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="663aa-183">Wywołuje to natychmiast pytania: Jak można zdecydować, jakie test, aby najpierw zapisać?</span><span class="sxs-lookup"><span data-stu-id="663aa-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="663aa-184">Aby odpowiedzieć na to pytanie, należy napisać zestaw [ **przypadków**](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="663aa-184">To answer this question, you should write a set of [**user stories**](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="663aa-185">Scenariusz użycia jest bardzo krótki opis (zwykle w jednym zdaniu) wymagania dotyczące oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="663aa-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="663aa-186">Powinna to być Nietechniczne opis wymaganie zapisywane z punktu widzenia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="663aa-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="663aa-187">Oto s zestaw przypadków użycia, które opisano funkcje wymagane przez nowe funkcje skontaktuj się z grupy:</span><span class="sxs-lookup"><span data-stu-id="663aa-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="663aa-188">Użytkownik może wyświetlić listę grup kontaktów.</span><span class="sxs-lookup"><span data-stu-id="663aa-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="663aa-189">Użytkownik może utworzyć nową grupę skontaktuj się z pomocą.</span><span class="sxs-lookup"><span data-stu-id="663aa-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="663aa-190">Użytkownik może usunąć istniejącą grupę skontaktuj się z pomocą.</span><span class="sxs-lookup"><span data-stu-id="663aa-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="663aa-191">Użytkownik może wybrać grupy kontaktów, podczas tworzenia nowego kontaktu.</span><span class="sxs-lookup"><span data-stu-id="663aa-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="663aa-192">Użytkownik może wybrać grupy kontaktów podczas edycji istniejącego kontaktu.</span><span class="sxs-lookup"><span data-stu-id="663aa-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="663aa-193">Lista grup skontaktuj się z pomocą jest wyświetlany w widoku indeksu.</span><span class="sxs-lookup"><span data-stu-id="663aa-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="663aa-194">Gdy użytkownik kliknie skontaktuj się z grupy, zostanie wyświetlona lista pasujących kontaktów.</span><span class="sxs-lookup"><span data-stu-id="663aa-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="663aa-195">Należy zauważyć, że ta lista historii użytkowników jest całkowicie zrozumiały dla klienta.</span><span class="sxs-lookup"><span data-stu-id="663aa-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="663aa-196">Nie ma żadnych informację o szczegóły implementacji technicznej.</span><span class="sxs-lookup"><span data-stu-id="663aa-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="663aa-197">Gdy procesie tworzenia aplikacji, zestaw przypadków użycia może stać się bardziej precyzyjnych.</span><span class="sxs-lookup"><span data-stu-id="663aa-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="663aa-198">Scenariusz użycia może podzielić na wiele wątków (wymagania).</span><span class="sxs-lookup"><span data-stu-id="663aa-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="663aa-199">Na przykład można zdecydować, czy tworzenie nowej grupy skontaktuj się z pomocą powinny obejmować sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="663aa-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="663aa-200">Przesyłanie skontaktuj się z grupy bez nazwy powinien zwrócić błąd sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="663aa-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="663aa-201">Po utworzeniu listy historii użytkowników, można przystąpić do pisania pierwszego testu jednostkowego.</span><span class="sxs-lookup"><span data-stu-id="663aa-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="663aa-202">Zaczniemy od utworzenia testu jednostkowego do wyświetlania listy grup skontaktuj się z pomocą.</span><span class="sxs-lookup"><span data-stu-id="663aa-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="663aa-203">Wyświetlanie listy grup kontaktów</span><span class="sxs-lookup"><span data-stu-id="663aa-203">Listing Contact Groups</span></span>

<span data-ttu-id="663aa-204">Nasz pierwszy Historia użytkownika jest, czy użytkownik powinien móc wyświetlić listę grup kontaktów.</span><span class="sxs-lookup"><span data-stu-id="663aa-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="663aa-205">Musimy express tego wątku z testem.</span><span class="sxs-lookup"><span data-stu-id="663aa-205">We need to express this story with a test.</span></span>

<span data-ttu-id="663aa-206">Tworzenie nowego testu jednostkowego, klikając prawym przyciskiem myszy folder kontrolerów w projekcie ContactManager.Tests wybierając **Dodaj, testowanie nowych**i wybierając polecenie **testów jednostkowych** szablonu (patrz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="663aa-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="663aa-207">Nazwa nowej jednostki testowania GroupControllerTest.cs i kliknij przycisk **OK** przycisku.</span><span class="sxs-lookup"><span data-stu-id="663aa-207">Name the new unit test GroupControllerTest.cs and click the **OK** button.</span></span>


[![A<span data-ttu-id="663aa-208">test jednostkowy GroupControllerTest dding]</span><span class="sxs-lookup"><span data-stu-id="663aa-208">dding the GroupControllerTest unit test]</span></span>(iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)

<span data-ttu-id="663aa-209">**Rysunek 01**: Dodawanie testu jednostkowego GroupControllerTest ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="663aa-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image2.png))</span></span>


<span data-ttu-id="663aa-210">Pierwszy test jednostki znajduje się w ofercie 1.</span><span class="sxs-lookup"><span data-stu-id="663aa-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="663aa-211">Ten test sprawdza, czy metoda indeks() kontrolera grupy zwraca zbiór grup.</span><span class="sxs-lookup"><span data-stu-id="663aa-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="663aa-212">Ten test sprawdza, czy zbiór grup jest zwracany w widoku danych.</span><span class="sxs-lookup"><span data-stu-id="663aa-212">The test verifies that a collection of Groups is returned in view data.</span></span>

**<span data-ttu-id="663aa-213">Wyświetlanie listy 1 - Controllers\GroupControllerTest.cs</span><span class="sxs-lookup"><span data-stu-id="663aa-213">Listing 1 - Controllers\GroupControllerTest.cs</span></span>**

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample1.cs)]

<span data-ttu-id="663aa-214">Podczas wpisywania tekstu najpierw kod w ofercie 1 w programie Visual Studio, zapewnisz sobie wiele czerwoną linią falistą.</span><span class="sxs-lookup"><span data-stu-id="663aa-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="663aa-215">Nie utworzono GroupController lub grupę klas.</span><span class="sxs-lookup"><span data-stu-id="663aa-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="663aa-216">W tym momencie możemy kompilacji nawet t naszej aplikacji, dzięki czemu możemy t wykonać pierwszy test jednostki.</span><span class="sxs-lookup"><span data-stu-id="663aa-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="663aa-217">Tego s jest dobra.</span><span class="sxs-lookup"><span data-stu-id="663aa-217">That s good.</span></span> <span data-ttu-id="663aa-218">Który jest traktowany jako niepowodzenie testu.</span><span class="sxs-lookup"><span data-stu-id="663aa-218">That counts as a failing test.</span></span> <span data-ttu-id="663aa-219">W związku z tym, w efekcie powstał uprawnienia do rozpoczęcia pisania kodu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="663aa-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="663aa-220">Potrzebujemy do zapisu do wykonania naszym teście wystarczającej ilości kodu.</span><span class="sxs-lookup"><span data-stu-id="663aa-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="663aa-221">Klasa kontrolera grupy w ofercie 2 zawiera absolutnego minimum wymagane do przekazania testu jednostkowego kodu.</span><span class="sxs-lookup"><span data-stu-id="663aa-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="663aa-222">Akcja indeks() zwraca statycznie kodowane listę grup (Klasa grupy jest zdefiniowana w ofercie 3).</span><span class="sxs-lookup"><span data-stu-id="663aa-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

**<span data-ttu-id="663aa-223">Wyświetlanie listy 2 - Controllers\GroupController.cs</span><span class="sxs-lookup"><span data-stu-id="663aa-223">Listing 2 - Controllers\GroupController.cs</span></span>**

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample2.cs)]

**<span data-ttu-id="663aa-224">Wyświetlanie listy 3 - Models\Group.cs</span><span class="sxs-lookup"><span data-stu-id="663aa-224">Listing 3 - Models\Group.cs</span></span>**

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample3.cs)]

<span data-ttu-id="663aa-225">Po dodamy klasy GroupController i grupy do naszego projektu pierwszy test jednostki zakończy się pomyślnie (patrz rysunek 2).</span><span class="sxs-lookup"><span data-stu-id="663aa-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="663aa-226">Wykonaliśmy minimalne pracę wymaganą do przekazania do testu.</span><span class="sxs-lookup"><span data-stu-id="663aa-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="663aa-227">Nadszedł czas na Świętuj.</span><span class="sxs-lookup"><span data-stu-id="663aa-227">It is time to celebrate.</span></span>


[![S<span data-ttu-id="663aa-228">uccess!]</span><span class="sxs-lookup"><span data-stu-id="663aa-228">uccess!]</span></span>(iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)

<span data-ttu-id="663aa-229">**Rysunek 02**: SUKCES! ([Kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="663aa-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image4.png))</span></span>


## <a name="creating-contact-groups"></a><span data-ttu-id="663aa-230">Tworzenie grup kontaktów</span><span class="sxs-lookup"><span data-stu-id="663aa-230">Creating Contact Groups</span></span>

<span data-ttu-id="663aa-231">Teraz można przystąpić do drugiego wątku użytkownika.</span><span class="sxs-lookup"><span data-stu-id="663aa-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="663aa-232">Potrzebujemy można było tworzyć nowe grupy skontaktuj się z pomocą.</span><span class="sxs-lookup"><span data-stu-id="663aa-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="663aa-233">Musimy express zamiar testu.</span><span class="sxs-lookup"><span data-stu-id="663aa-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="663aa-234">Testowanie w ofercie 4 — sprawdza, czy wywołanie Create() metody za pomocą nowej grupy dodaje do listy grup zwracany przez metodę indeks() grupę.</span><span class="sxs-lookup"><span data-stu-id="663aa-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="663aa-235">Oznacza to czy jeśli utworzę nową grupę następnie I powinno być możliwe do wrócić nową grupę z listy grup zwracany przez metodę indeks().</span><span class="sxs-lookup"><span data-stu-id="663aa-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

**<span data-ttu-id="663aa-236">Wyświetlanie listy 4 - Controllers\GroupControllerTest.cs</span><span class="sxs-lookup"><span data-stu-id="663aa-236">Listing 4 - Controllers\GroupControllerTest.cs</span></span>**

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample4.cs)]

<span data-ttu-id="663aa-237">Testowanie w ofercie 4 wywołuje kontrolera grupy Create() metody za pomocą nowego kontaktu grupy.</span><span class="sxs-lookup"><span data-stu-id="663aa-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="663aa-238">Następnie ten test sprawdza, wywołanie kontrolera grupy metoda indeks() nową grupę w zwracanych danych widoku.</span><span class="sxs-lookup"><span data-stu-id="663aa-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="663aa-239">Zmodyfikowane kontrolera grupy w ofercie 5 zawiera podstawowe czynności zmiany wymagane w celu przekazania nowego testu.</span><span class="sxs-lookup"><span data-stu-id="663aa-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

**<span data-ttu-id="663aa-240">Wyświetlanie listy 5 - Controllers\GroupController.cs</span><span class="sxs-lookup"><span data-stu-id="663aa-240">Listing 5 - Controllers\GroupController.cs</span></span>**

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample5.cs)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="663aa-241">Kontroler grupy w ofercie 5 ma nową akcję Create().</span><span class="sxs-lookup"><span data-stu-id="663aa-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="663aa-242">Ta akcja dodaje grupę na kolekcję grup.</span><span class="sxs-lookup"><span data-stu-id="663aa-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="663aa-243">Należy zauważyć, że akcja indeks() została zmodyfikowana, aby zwrócić zawartość kolekcję grup.</span><span class="sxs-lookup"><span data-stu-id="663aa-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="663aa-244">Jeszcze raz zostały wykonane bez minimalnej ilości pracy wymaganej do przekazania test jednostkowy.</span><span class="sxs-lookup"><span data-stu-id="663aa-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="663aa-245">Po możemy wprowadzić te zmiany do kontrolera grupy, wszystkie jednostki Nasze testy zostaną zaliczone.</span><span class="sxs-lookup"><span data-stu-id="663aa-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="663aa-246">Dodawanie walidacji</span><span class="sxs-lookup"><span data-stu-id="663aa-246">Adding Validation</span></span>

<span data-ttu-id="663aa-247">To wymaganie nie zostało podane jawnie w historii użytkownika.</span><span class="sxs-lookup"><span data-stu-id="663aa-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="663aa-248">Jednak jest uzasadnione wymagają, że grupa ma nazwy.</span><span class="sxs-lookup"><span data-stu-id="663aa-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="663aa-249">W przeciwnym razie organizowanie kontaktów w grupach nie byłoby bardzo przydatne.</span><span class="sxs-lookup"><span data-stu-id="663aa-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="663aa-250">Wyświetlanie listy 6 zawiera nowy test, który wyraża swój zamiar.</span><span class="sxs-lookup"><span data-stu-id="663aa-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="663aa-251">Ten test sprawdza, czy próba utworzenia grupy bez podawania nazwy skutkuje komunikat o błędzie weryfikacji w stanie modelu.</span><span class="sxs-lookup"><span data-stu-id="663aa-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

**<span data-ttu-id="663aa-252">Wyświetlanie listy 6 - Controllers\GroupControllerTest.cs</span><span class="sxs-lookup"><span data-stu-id="663aa-252">Listing 6 - Controllers\GroupControllerTest.cs</span></span>**

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample6.cs)]

<span data-ttu-id="663aa-253">Aby spełnić wymagania tego testu, musimy dodać właściwość Nazwa klasy naszej grupy (zobacz listę 7).</span><span class="sxs-lookup"><span data-stu-id="663aa-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="663aa-254">Ponadto należy dodać bitu niewielką logikę walidacji do kontrolera grupy s Create() akcji (patrz lista 8).</span><span class="sxs-lookup"><span data-stu-id="663aa-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

**<span data-ttu-id="663aa-255">Wyświetlanie listy 7 - Models\Group.cs</span><span class="sxs-lookup"><span data-stu-id="663aa-255">Listing 7 - Models\Group.cs</span></span>**

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample7.cs)]

**<span data-ttu-id="663aa-256">Wyświetlanie listy 8 - Controllers\GroupController.cs</span><span class="sxs-lookup"><span data-stu-id="663aa-256">Listing 8 - Controllers\GroupController.cs</span></span>**

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample8.cs)]

<span data-ttu-id="663aa-257">Należy zauważyć, że kontroler grupy akcji Create() teraz zawiera logikę weryfikacji i bazy danych.</span><span class="sxs-lookup"><span data-stu-id="663aa-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="663aa-258">Obecnie usługa bazy danych używane przez kontroler grupy składa się z nic więcej niż kolekcji w pamięci.</span><span class="sxs-lookup"><span data-stu-id="663aa-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="663aa-259">Czas, Refaktoryzacja</span><span class="sxs-lookup"><span data-stu-id="663aa-259">Time to Refactor</span></span>

<span data-ttu-id="663aa-260">Trzeci krok w czerwony/zielony/Zrefaktoryzuj jest częścią refaktoryzacji.</span><span class="sxs-lookup"><span data-stu-id="663aa-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="663aa-261">W tym momencie należy kroku powrót po awarii z naszego kodu i należy wziąć pod uwagę, jak możemy refaktoryzować naszej aplikacji, aby zwiększyć jego zamysłem.</span><span class="sxs-lookup"><span data-stu-id="663aa-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="663aa-262">Etap Zrefaktoryzuj jest etapu, jaką uważamy, że twarde o najlepszym sposobem stosowania zasad projektowania oprogramowania i wzorce.</span><span class="sxs-lookup"><span data-stu-id="663aa-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="663aa-263">Jesteśmy swobodnie modyfikować naszego kodu w dowolny sposób, którego możemy poprawić projektu kodu.</span><span class="sxs-lookup"><span data-stu-id="663aa-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="663aa-264">Mamy projektowi testów jednostkowych, które uniemożliwiają nam przed przerwaniem działania istniejących funkcji.</span><span class="sxs-lookup"><span data-stu-id="663aa-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="663aa-265">W tej chwili, kontrolera grupy Miasto jest zakorkowane. z punktu widzenia projektowania oprogramowania dobre.</span><span class="sxs-lookup"><span data-stu-id="663aa-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="663aa-266">Kontroler grupa zawiera plątaniną MES sprawdzania i kod dostępu do danych.</span><span class="sxs-lookup"><span data-stu-id="663aa-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="663aa-267">Aby uniknąć naruszenia jednej zasady odpowiedzialności, należy rozdzielić te problemy na różnych klas.</span><span class="sxs-lookup"><span data-stu-id="663aa-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="663aa-268">Nasze refaktoryzować klasy kontrolera grupy znajduje się w ofercie 9.</span><span class="sxs-lookup"><span data-stu-id="663aa-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="663aa-269">Kontroler został zmodyfikowany w celu użycia ContactManager warstwy usług.</span><span class="sxs-lookup"><span data-stu-id="663aa-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="663aa-270">Jest to ten sam warstwy usług korzystających z skontaktuj się z kontrolerem.</span><span class="sxs-lookup"><span data-stu-id="663aa-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="663aa-271">Wyświetlanie listy 10 zawiera nowe metody, które są dodawane do warstwy usług ContactManager do obsługi sprawdzania poprawności, wyświetlanie listy i tworzenia grup.</span><span class="sxs-lookup"><span data-stu-id="663aa-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="663aa-272">Interfejs IContactManagerService został zaktualizowany w celu uwzględnienia nowych metod.</span><span class="sxs-lookup"><span data-stu-id="663aa-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="663aa-273">Wyświetlanie listy 11 zawiera nową klasę FakeContactManagerRepository, który implementuje interfejs IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="663aa-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="663aa-274">W odróżnieniu od klasy EntityContactManagerRepository, który także implementuje interfejs IContactManagerRepository naszej nowej klasy FakeContactManagerRepository nie komunikuje się z bazą danych.</span><span class="sxs-lookup"><span data-stu-id="663aa-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="663aa-275">Klasa FakeContactManagerRepository korzysta z kolekcji w pamięci, a jako serwer proxy dla bazy danych.</span><span class="sxs-lookup"><span data-stu-id="663aa-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="663aa-276">Użyjemy tej klasy w naszych testach jednostkowych jako warstwa fałszywych repozytorium.</span><span class="sxs-lookup"><span data-stu-id="663aa-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

**<span data-ttu-id="663aa-277">Wyświetlanie listy 9 - Controllers\GroupController.cs</span><span class="sxs-lookup"><span data-stu-id="663aa-277">Listing 9 - Controllers\GroupController.cs</span></span>**

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample9.cs)]

**<span data-ttu-id="663aa-278">Lista 10 - Controllers\ContactManagerService.cs</span><span class="sxs-lookup"><span data-stu-id="663aa-278">Listing 10 - Controllers\ContactManagerService.cs</span></span>**

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample10.cs)]

**<span data-ttu-id="663aa-279">Wyświetlanie listy 11 — Controllers\FakeContactManagerRepository.cs</span><span class="sxs-lookup"><span data-stu-id="663aa-279">Listing 11 - Controllers\FakeContactManagerRepository.cs</span></span>**

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample11.cs)]

<span data-ttu-id="663aa-280">Modyfikowanie IContactManagerRepository wymaga interfejsu przy użyciu metody CreateGroup() i ListGroups() w klasie EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="663aa-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="663aa-281">Laziest i najszybszy sposób to zrobić, jest Dodaj metody klasy zastępczej, które wyglądają następująco:</span><span class="sxs-lookup"><span data-stu-id="663aa-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>   

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample12.cs)]


<span data-ttu-id="663aa-282">Na koniec te zmiany w naszej aplikacji wymagać wprowadzenie pewnych zmian do naszych testów jednostkowych przez firmę Microsoft.</span><span class="sxs-lookup"><span data-stu-id="663aa-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="663aa-283">Teraz musisz użyć FakeContactManagerRepository podczas przeprowadzania testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="663aa-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="663aa-284">Zaktualizowano klasy GroupControllerTest znajduje się w ofercie 12.</span><span class="sxs-lookup"><span data-stu-id="663aa-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

**<span data-ttu-id="663aa-285">Wyświetlanie listy 12 - Controllers\GroupControllerTest.cs</span><span class="sxs-lookup"><span data-stu-id="663aa-285">Listing 12 - Controllers\GroupControllerTest.cs</span></span>**

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample13.cs)]

<span data-ttu-id="663aa-286">Po wszystkich tych udostępnimy zmienia, jeszcze raz wszystkich naszych przebieg testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="663aa-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="663aa-287">Ukończyliśmy całego cyklu czerwony/zielony/refaktoryzacji.</span><span class="sxs-lookup"><span data-stu-id="663aa-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="663aa-288">Zaimplementowano rozwiązania tlp pierwsze dwa przypadki.</span><span class="sxs-lookup"><span data-stu-id="663aa-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="663aa-289">W efekcie powstał Obsługa testów jednostkowych dla wymagań wyrażony w historii użytkowników.</span><span class="sxs-lookup"><span data-stu-id="663aa-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="663aa-290">Implementowanie w pozostałej części przypadków użycia obejmuje powtarzające się tego samego cyklu czerwony/zielony/refaktoryzacji.</span><span class="sxs-lookup"><span data-stu-id="663aa-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="663aa-291">Modyfikowanie w naszej bazie danych</span><span class="sxs-lookup"><span data-stu-id="663aa-291">Modifying our Database</span></span>

<span data-ttu-id="663aa-292">Niestety mimo że firma Microsoft zostały spełnione wszystkie wymagania dotyczące wyrażona przez nasze testy jednostkowe, praca odbywa się.</span><span class="sxs-lookup"><span data-stu-id="663aa-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="663aa-293">Firma Microsoft nadal należy zmodyfikować w naszej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="663aa-293">We still need to modify our database.</span></span>

<span data-ttu-id="663aa-294">Należy utworzyć nową tabelę bazy danych grupy.</span><span class="sxs-lookup"><span data-stu-id="663aa-294">We need to create a new Group database table.</span></span> <span data-ttu-id="663aa-295">Wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="663aa-295">Follow these steps:</span></span>

1. <span data-ttu-id="663aa-296">W oknie Eksploratora serwera, kliknij prawym przyciskiem myszy folder Tabele i wybierz opcję menu **Dodaj nową tabelę**.</span><span class="sxs-lookup"><span data-stu-id="663aa-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="663aa-297">Wprowadź dwie kolumny, które są opisane poniżej w Projektancie tabel.</span><span class="sxs-lookup"><span data-stu-id="663aa-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="663aa-298">Oznacz jako klucz podstawowy i kolumny tożsamości kolumny identyfikatora.</span><span class="sxs-lookup"><span data-stu-id="663aa-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="663aa-299">Zapisz nową tabelę przy użyciu grup nazwy, klikając ikonę dyskietek.</span><span class="sxs-lookup"><span data-stu-id="663aa-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.11_table01"></a>


| **<span data-ttu-id="663aa-300">Nazwa kolumny</span><span class="sxs-lookup"><span data-stu-id="663aa-300">Column Name</span></span>** | **<span data-ttu-id="663aa-301">Typ danych</span><span class="sxs-lookup"><span data-stu-id="663aa-301">Data Type</span></span>** | **<span data-ttu-id="663aa-302">Zezwalaj na wartości null</span><span class="sxs-lookup"><span data-stu-id="663aa-302">Allow Nulls</span></span>** |
| --- | --- | --- |
| <span data-ttu-id="663aa-303">Id</span><span class="sxs-lookup"><span data-stu-id="663aa-303">Id</span></span> | <span data-ttu-id="663aa-304">int</span><span class="sxs-lookup"><span data-stu-id="663aa-304">int</span></span> | <span data-ttu-id="663aa-305">False</span><span class="sxs-lookup"><span data-stu-id="663aa-305">False</span></span> |
| <span data-ttu-id="663aa-306">Nazwa</span><span class="sxs-lookup"><span data-stu-id="663aa-306">Name</span></span> | <span data-ttu-id="663aa-307">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="663aa-307">nvarchar(50)</span></span> | <span data-ttu-id="663aa-308">False</span><span class="sxs-lookup"><span data-stu-id="663aa-308">False</span></span> |


<span data-ttu-id="663aa-309">Następnie należy usunąć wszystkie dane z tabeli kontaktów (w przeciwnym razie firma Microsoft nie będzie można utworzyć relacji między tabelami kontaktów i grup).</span><span class="sxs-lookup"><span data-stu-id="663aa-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won't be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="663aa-310">Wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="663aa-310">Follow these steps:</span></span>

1. <span data-ttu-id="663aa-311">Kliknij prawym przyciskiem myszy tabeli kontaktów i wybierz opcję menu **Pokaż dane tabeli**.</span><span class="sxs-lookup"><span data-stu-id="663aa-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="663aa-312">Usuń wszystkie wiersze.</span><span class="sxs-lookup"><span data-stu-id="663aa-312">Delete all of the rows.</span></span>

<span data-ttu-id="663aa-313">Następnie należy zdefiniować relacje między grupami tabeli bazy danych i istniejącej tabeli kontaktów w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="663aa-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="663aa-314">Wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="663aa-314">Follow these steps:</span></span>

1. <span data-ttu-id="663aa-315">Kliknij dwukrotnie tabeli kontaktów w oknie Eksploratora serwera, aby otworzyć projektanta tabel.</span><span class="sxs-lookup"><span data-stu-id="663aa-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="663aa-316">Dodaj nowe kolumna liczb całkowitych do tabeli kontaktów, o nazwie GroupId.</span><span class="sxs-lookup"><span data-stu-id="663aa-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="663aa-317">Kliknij przycisk relacji, aby otworzyć okno dialogowe relacje klucza obcego (zobacz rysunek 3).</span><span class="sxs-lookup"><span data-stu-id="663aa-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="663aa-318">Kliknij przycisk Dodaj.</span><span class="sxs-lookup"><span data-stu-id="663aa-318">Click the Add button.</span></span>
5. <span data-ttu-id="663aa-319">Kliknij przycisk wielokropka, który pojawia się obok przycisku tabel i kolumn specyfikacji.</span><span class="sxs-lookup"><span data-stu-id="663aa-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="663aa-320">W oknie dialogowym tabele i kolumny wybierz grupy jako tabeli klucza podstawowego i identyfikator jako kolumna klucza podstawowego.</span><span class="sxs-lookup"><span data-stu-id="663aa-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="663aa-321">Wybierz kontakty jako tabela klucza obcego i GroupId jako kolumna klucza obcego (zobacz rysunek 4).</span><span class="sxs-lookup"><span data-stu-id="663aa-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="663aa-322">Kliknij przycisk OK.</span><span class="sxs-lookup"><span data-stu-id="663aa-322">Click the OK button.</span></span>
7. <span data-ttu-id="663aa-323">W obszarze **INSERT i UPDATE specyfikacji**, wybierz wartość **Cascade** dla **Usuń regułę**.</span><span class="sxs-lookup"><span data-stu-id="663aa-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="663aa-324">Kliknij przycisk Zamknij, aby zamknąć okno dialogowe relacje klucza obcego.</span><span class="sxs-lookup"><span data-stu-id="663aa-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="663aa-325">Kliknij przycisk Zapisz, aby zapisać zmiany do tabeli kontaktów.</span><span class="sxs-lookup"><span data-stu-id="663aa-325">Click the Save button to save the changes to the Contacts table.</span></span>


[![C<span data-ttu-id="663aa-326">worzenie relacji tabeli bazy danych]</span><span class="sxs-lookup"><span data-stu-id="663aa-326">reating a database table relationship]</span></span>(iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)

<span data-ttu-id="663aa-327">**Rysunek 03**: Tworzenie relacji tabeli bazy danych ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="663aa-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image6.png))</span></span>


[![S<span data-ttu-id="663aa-328">relacje między tabelami pecifying]</span><span class="sxs-lookup"><span data-stu-id="663aa-328">pecifying table relationships]</span></span>(iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)

<span data-ttu-id="663aa-329">**Rysunek 04**: Określanie relacji między tabelami ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="663aa-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image8.png))</span></span>


### <a name="updating-our-data-model"></a><span data-ttu-id="663aa-330">Aktualizowanie nasz Model danych</span><span class="sxs-lookup"><span data-stu-id="663aa-330">Updating our Data Model</span></span>

<span data-ttu-id="663aa-331">Następnie należy zaktualizować nasz model danych do reprezentowania nowej tabeli bazy danych.</span><span class="sxs-lookup"><span data-stu-id="663aa-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="663aa-332">Wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="663aa-332">Follow these steps:</span></span>

1. <span data-ttu-id="663aa-333">Kliknij dwukrotnie plik ContactManagerModel.edmx w folderze modele, aby otworzyć projektanta jednostek.</span><span class="sxs-lookup"><span data-stu-id="663aa-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="663aa-334">Kliknij prawym przyciskiem myszy na powierzchnię projektanta i wybierz opcję menu **Model aktualizacji z bazy danych**.</span><span class="sxs-lookup"><span data-stu-id="663aa-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="663aa-335">W Kreatorze aktualizacji wybierz grupy tabeli i kliknij przycisk Zakończ przycisku (zobacz rysunek 5).</span><span class="sxs-lookup"><span data-stu-id="663aa-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="663aa-336">Kliknij prawym przyciskiem myszy jednostkę grupy, a następnie wybierz opcję menu **Zmień nazwę**.</span><span class="sxs-lookup"><span data-stu-id="663aa-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="663aa-337">Zmień nazwę *grup* jednostki do *grupy* (pojedynczą).</span><span class="sxs-lookup"><span data-stu-id="663aa-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="663aa-338">Kliknij prawym przyciskiem myszy właściwość nawigacji grupy, która pojawia się w dolnej części jednostki Contact.</span><span class="sxs-lookup"><span data-stu-id="663aa-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="663aa-339">Zmień nazwę *grup* właściwość nawigacji do *grupy* (pojedynczą).</span><span class="sxs-lookup"><span data-stu-id="663aa-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>


[![U<span data-ttu-id="663aa-340">ualizacja modelu Entity Framework z bazy danych]</span><span class="sxs-lookup"><span data-stu-id="663aa-340">pdating an Entity Framework model from the database]</span></span>(iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)

<span data-ttu-id="663aa-341">**Rysunek 05**: Aktualizowanie modelu Entity Framework z bazy danych ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="663aa-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image10.png))</span></span>


<span data-ttu-id="663aa-342">Po wykonaniu tych kroków, od modelu danych będzie reprezentować tabel kontaktów i grup.</span><span class="sxs-lookup"><span data-stu-id="663aa-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="663aa-343">W Projektancie jednostki powinny być widoczne oba jednostki (patrz rysunek 6).</span><span class="sxs-lookup"><span data-stu-id="663aa-343">The Entity Designer should show both entities (see Figure 6).</span></span>


[![E<span data-ttu-id="663aa-344">Wyświetlanie projektanta ntity grupy i skontaktuj się z pomocą]</span><span class="sxs-lookup"><span data-stu-id="663aa-344">ntity Designer displaying Group and Contact]</span></span>(iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)

<span data-ttu-id="663aa-345">**Rysunek 06**: Projektant ekranu, wyświetlania grupy i skontaktuj się z pomocą ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="663aa-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image12.png))</span></span>


### <a name="creating-our-repository-classes"></a><span data-ttu-id="663aa-346">Tworzenie klas w naszym repozytorium</span><span class="sxs-lookup"><span data-stu-id="663aa-346">Creating our Repository Classes</span></span>

<span data-ttu-id="663aa-347">Następnie należy do zaimplementowania klasy nasze repozytorium.</span><span class="sxs-lookup"><span data-stu-id="663aa-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="663aa-348">W trakcie tej iteracji dodaliśmy kilka nowych metod interfejsu IContactManagerRepository podczas pisania kodu do zaspokojenia Nasze testy jednostkowe.</span><span class="sxs-lookup"><span data-stu-id="663aa-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="663aa-349">Ostateczna wersja interfejsu IContactManagerRepository znajduje się w ofercie 14.</span><span class="sxs-lookup"><span data-stu-id="663aa-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

**<span data-ttu-id="663aa-350">Wyświetlanie listy 14 - Models\IContactManagerRepository.cs</span><span class="sxs-lookup"><span data-stu-id="663aa-350">Listing 14 - Models\IContactManagerRepository.cs</span></span>**

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample14.cs)]

<span data-ttu-id="663aa-351">Firma Microsoft nie faktycznie zaimplementowano dowolnej z metod związanych z pracą z grup kontaktów.</span><span class="sxs-lookup"><span data-stu-id="663aa-351">We haven't actually implemented any of the methods related to working with contact groups.</span></span> <span data-ttu-id="663aa-352">Obecnie klasy EntityContactManagerRepository ma metody klasy zastępczej dla wszystkich metod kontaktu grupy wyświetlane w interfejsie IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="663aa-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="663aa-353">Na przykład metoda ListGroups() obecnie wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="663aa-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample15.cs)]

<span data-ttu-id="663aa-354">Metody klasy zastępczej pomogła nam do kompilowania aplikacji i przekazać testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="663aa-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="663aa-355">Jednak teraz nadszedł czas na faktycznego wdrażania tych metod.</span><span class="sxs-lookup"><span data-stu-id="663aa-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="663aa-356">Ostateczna wersja klasy EntityContactManagerRepository znajduje się w ofercie 13.</span><span class="sxs-lookup"><span data-stu-id="663aa-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

**<span data-ttu-id="663aa-357">Wyświetlanie listy 13 - Models\EntityContactManagerRepository.cs</span><span class="sxs-lookup"><span data-stu-id="663aa-357">Listing 13 - Models\EntityContactManagerRepository.cs</span></span>**

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample16.cs)]

### <a name="creating-the-views"></a><span data-ttu-id="663aa-358">Tworzenie widoków</span><span class="sxs-lookup"><span data-stu-id="663aa-358">Creating the Views</span></span>

<span data-ttu-id="663aa-359">Aplikacja platformy ASP.NET MVC, korzystając z domyślny aparat widoku programu ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="663aa-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="663aa-360">Tak don t tworzyć widoki w odpowiedzi na test określonej jednostki.</span><span class="sxs-lookup"><span data-stu-id="663aa-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="663aa-361">Jednakże, ponieważ aplikacja będzie bezużyteczne, widoki, możemy t ukończyć tę iterację bez tworzenia i modyfikowania widoków zawartych w aplikacji Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="663aa-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="663aa-362">Należy utworzyć następujące nowych widoków do zarządzania grupami kontaktu (zobacz rysunek 7):</span><span class="sxs-lookup"><span data-stu-id="663aa-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="663aa-363">Views\Group\Index.aspx — Wyświetla listę grup kontaktów</span><span class="sxs-lookup"><span data-stu-id="663aa-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="663aa-364">Views\Group\Delete.aspx - Wyświetla formularz potwierdzenia związanych z usuwaniem grup kontaktu</span><span class="sxs-lookup"><span data-stu-id="663aa-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>


[![T<span data-ttu-id="663aa-365">ADAM widoku indeks grupy]</span><span class="sxs-lookup"><span data-stu-id="663aa-365">he Group Index view]</span></span>(iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)

<span data-ttu-id="663aa-366">**Rysunek 07**: Widok grupy indeksu ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="663aa-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image14.png))</span></span>


<span data-ttu-id="663aa-367">Należy zmodyfikować następujące istniejących widoków, aby zawierały grup kontaktów:</span><span class="sxs-lookup"><span data-stu-id="663aa-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="663aa-368">Views\Home\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="663aa-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="663aa-369">Views\Home\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="663aa-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="663aa-370">Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="663aa-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="663aa-371">Możesz zobaczyć zmodyfikowanych widoków, analizując aplikacji programu Visual Studio, który towarzyszy w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="663aa-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="663aa-372">Na przykład rysunek 8 przedstawia widok skontaktuj się z indeksu.</span><span class="sxs-lookup"><span data-stu-id="663aa-372">For example, Figure 8 illustrates the Contact Index view.</span></span>


[![T<span data-ttu-id="663aa-373">ADAM widoku indeksu skontaktuj się z pomocą]</span><span class="sxs-lookup"><span data-stu-id="663aa-373">he Contact Index view]</span></span>(iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)

<span data-ttu-id="663aa-374">**Rysunek 08**: Widok indeksu kontaktu ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="663aa-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image16.png))</span></span>


## <a name="summary"></a><span data-ttu-id="663aa-375">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="663aa-375">Summary</span></span>

<span data-ttu-id="663aa-376">W tej iteracji dodaliśmy nowe funkcje do naszej aplikacji Contact Manager postępując zgodnie z metodologii programowania sterowanego testami projektowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="663aa-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="663aa-377">Zaczęliśmy, tworząc zestaw przypadków użycia.</span><span class="sxs-lookup"><span data-stu-id="663aa-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="663aa-378">Utworzyliśmy zestaw testów jednostkowych, który odnosi się do wymagań wyrażone według przypadków użycia.</span><span class="sxs-lookup"><span data-stu-id="663aa-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="663aa-379">Na koniec napisaliśmy wystarczający tylko kod w celu spełnienia wymagań wyrażony przez testy jednostek.</span><span class="sxs-lookup"><span data-stu-id="663aa-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="663aa-380">Po zakończeniu pisania wystarczającej ilości kodu w celu spełnienia wymagań wyrażony przez testy jednostek, Zaktualizowaliśmy bazę danych i widoków.</span><span class="sxs-lookup"><span data-stu-id="663aa-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="663aa-381">Firma Microsoft dodano nową tabelę grup do naszej bazie danych i naszym modelu danych Entity Framework zaktualizowane.</span><span class="sxs-lookup"><span data-stu-id="663aa-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="663aa-382">Możemy również tworzone i modyfikowane zestaw widoków.</span><span class="sxs-lookup"><span data-stu-id="663aa-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="663aa-383">W następnej iteracji — iteracji końcowego--możemy napisać ponownie naszej aplikacji, aby móc korzystać z technologii Ajax.</span><span class="sxs-lookup"><span data-stu-id="663aa-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="663aa-384">Dzięki wykorzystaniu technologii Ajax, możemy poprawić czas odpowiedzi i wydajność aplikacji Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="663aa-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="663aa-385">[Poprzednie](iteration-5-create-unit-tests-cs.md)
> [dalej](iteration-7-add-ajax-functionality-cs.md)</span><span class="sxs-lookup"><span data-stu-id="663aa-385">[Previous](iteration-5-create-unit-tests-cs.md)
[Next](iteration-7-add-ajax-functionality-cs.md)</span></span>

---
uid: mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
title: Dodawanie metody Create i Tworzenie widoku | Microsoft Docs
author: shanselman
description: Jest to samouczek początkującego, który wprowadza podstawy ASP.NET MVC. Utwórz prostą aplikację sieci Web, która odczytuje i zapisuje dane w bazie danych.
ms.author: riande
ms.date: 08/14/2010
ms.assetid: a3a90963-0286-4fa0-9b3d-c230cc18b0a3
msc.legacyurl: /mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
msc.type: authoredcontent
ms.openlocfilehash: 05a281720f76b107fe8d902ef60d5d2e72af3ef5
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78543660"
---
# <a name="adding-a-create-method-and-create-view"></a><span data-ttu-id="184ca-104">Dodawanie metody Create i tworzenie widoku</span><span class="sxs-lookup"><span data-stu-id="184ca-104">Adding a Create Method and Create View</span></span>

<span data-ttu-id="184ca-105">przez [Scott Hanselman](https://github.com/shanselman)</span><span class="sxs-lookup"><span data-stu-id="184ca-105">by [Scott Hanselman](https://github.com/shanselman)</span></span>

> <span data-ttu-id="184ca-106">Jest to samouczek początkującego, który wprowadza podstawy ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="184ca-106">This is a beginner tutorial that introduces the basics of ASP.NET MVC.</span></span> <span data-ttu-id="184ca-107">Utworzysz prostą aplikację sieci Web, która odczytuje i zapisuje dane w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="184ca-107">You'll create a simple web application that reads and writes from a database.</span></span> <span data-ttu-id="184ca-108">Odwiedź [centrum learning ASP.NET MVC](../../../index.md) , aby znaleźć inne samouczki i przykłady MVC ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="184ca-108">Visit the [ASP.NET MVC learning center](../../../index.md) to find other ASP.NET MVC tutorials and samples.</span></span>

<span data-ttu-id="184ca-109">W tej sekcji zamierzamy wdrożyć pomoc techniczną, aby umożliwić użytkownikom tworzenie nowych filmów w naszej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="184ca-109">In this section we are going to implement the support necessary to enable users to create new movies in our database.</span></span> <span data-ttu-id="184ca-110">Należy to zrobić, implementując akcję/Movies/Create URL.</span><span class="sxs-lookup"><span data-stu-id="184ca-110">We'll do this by implementing the /Movies/Create URL action.</span></span>

<span data-ttu-id="184ca-111">Implementacja adresu URL/Movies/Create jest procesem dwuetapowym.</span><span class="sxs-lookup"><span data-stu-id="184ca-111">Implementing the /Movies/Create URL is a two step process.</span></span> <span data-ttu-id="184ca-112">Gdy użytkownik po raz pierwszy odwiedzi adres URL/Movies/Create, chcemy pokazać im formularz HTML, który może wypełnić, aby wprowadzić nowy film.</span><span class="sxs-lookup"><span data-stu-id="184ca-112">When a user first visits the /Movies/Create URL we want to show them an HTML form that they can fill out to enter a new movie.</span></span> <span data-ttu-id="184ca-113">Następnie, gdy użytkownik przesyła formularz i zapisuje dane z powrotem na serwerze, chcemy pobrać ogłoszoną zawartość i zapisać ją w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="184ca-113">Then, when the user submits the form and posts the data back to the server, we want to retrieve the posted contents and save it into our database.</span></span>

<span data-ttu-id="184ca-114">Te dwa kroki zostaną wdrożone w ramach dwóch metod Create () w ramach naszej klasy MoviesController.</span><span class="sxs-lookup"><span data-stu-id="184ca-114">We'll implement these two steps within two Create() methods within our MoviesController class.</span></span> <span data-ttu-id="184ca-115">Jedna metoda wyświetli &lt;formularz&gt;, że użytkownik powinien wypełnić, aby utworzyć nowy film.</span><span class="sxs-lookup"><span data-stu-id="184ca-115">One method will show the &lt;form&gt; that the user should fill out to create a new movie.</span></span> <span data-ttu-id="184ca-116">Druga metoda obsłuży przetwarzanie danych ogłoszonych, gdy użytkownik prześle &lt;formularz&gt; z powrotem do serwera i zapisze nowy film w naszej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="184ca-116">The second method will handle processing the posted data when the user submits the &lt;form&gt; back to the server, and save a new Movie within our database.</span></span>

<span data-ttu-id="184ca-117">Poniżej znajduje się kod, który dodamy do naszej klasy MoviesController, aby zaimplementować ten:</span><span class="sxs-lookup"><span data-stu-id="184ca-117">Below is the code we'll add to our MoviesController class to implement this:</span></span>

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample1.cs)]

<span data-ttu-id="184ca-118">Powyższy kod zawiera cały kod, który będzie potrzebny w naszym kontrolerze.</span><span class="sxs-lookup"><span data-stu-id="184ca-118">The above code contains all of the code that we'll need within our Controller.</span></span>

<span data-ttu-id="184ca-119">Teraz zaimplementujmy szablon tworzenia widoku, który będzie używany do wyświetlania formularza użytkownikowi.</span><span class="sxs-lookup"><span data-stu-id="184ca-119">Let's now implement the Create View template that we'll use to display a form to the user.</span></span> <span data-ttu-id="184ca-120">Zostaniemy kliknięty w pierwszej metodzie tworzenia i wybierz pozycję "Dodaj widok", aby utworzyć szablon widoku dla naszego formularza filmu.</span><span class="sxs-lookup"><span data-stu-id="184ca-120">We'll right click in the first Create method and select "Add View" to create the view template for our Movie form.</span></span>

<span data-ttu-id="184ca-121">Wybierzemy, że zamierzamy przekazać szablon widoku jako "film" jako swoją klasę danych widoku i wskazać, że chcemy "utworzyć szkielet" dla szablonu "Utwórz".</span><span class="sxs-lookup"><span data-stu-id="184ca-121">We'll select that we are going to pass the view template a "Movie" as its view data class, and indicate that we want to "scaffold" a "Create" template.</span></span>

<span data-ttu-id="184ca-122">[![Dodaj widok](getting-started-with-mvc-part6/_static/image2.png)](getting-started-with-mvc-part6/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="184ca-122">[![Add View](getting-started-with-mvc-part6/_static/image2.png)](getting-started-with-mvc-part6/_static/image1.png)</span></span>

<span data-ttu-id="184ca-123">Po kliknięciu przycisku Dodaj zostanie utworzony szablon widoku \Movies\Create.aspx.</span><span class="sxs-lookup"><span data-stu-id="184ca-123">After you click the Add button, \Movies\Create.aspx View template will be created for you.</span></span> <span data-ttu-id="184ca-124">Ponieważ wybrano opcję "Utwórz" z listy rozwijanej "Wyświetl zawartość", w oknie dialogowym Dodawanie widoku automatycznie "szkieletowa" jest tworzona zawartość domyślna.</span><span class="sxs-lookup"><span data-stu-id="184ca-124">Because we selected "Create" from the "view content" dropdown, the Add View dialog automatically "scaffolded" some default content for us.</span></span> <span data-ttu-id="184ca-125">Tworzenie szkieletu utworzyło formularz &lt;HTML&gt;, miejsce do sprawdzania poprawności komunikatów o błędach, a ponieważ szkielet ma informacje o filmach, utworzył etykietę i pola dla każdej właściwości naszej klasy.</span><span class="sxs-lookup"><span data-stu-id="184ca-125">The scaffolding created an HTML &lt;form&gt;, a place for validation error messages to go, and since scaffolding knows about Movies, it created Label and Fields for each property of our class.</span></span>

[!code-aspx[Main](getting-started-with-mvc-part6/samples/sample2.aspx)]

<span data-ttu-id="184ca-126">Ponieważ nasza baza danych automatycznie zawiera identyfikator filmu, usuńmy te pola, które odwołują się do modelu. Identyfikator z naszego widoku tworzenia.</span><span class="sxs-lookup"><span data-stu-id="184ca-126">Since our database automatically gives a Movie an ID, let's remove those fields that reference model.Id from our Create View.</span></span> <span data-ttu-id="184ca-127">Usuń wiersze w 7 po &lt;&gt;pól&lt;/Legend&gt;, ponieważ pokazują one pola identyfikatorów, których nie chcemy.</span><span class="sxs-lookup"><span data-stu-id="184ca-127">Remove the 7 lines after &lt;legend&gt;Fields&lt;/legend&gt; as they show the ID field that we don't want.</span></span>

<span data-ttu-id="184ca-128">Utwórz teraz nowy film i dodaj go do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="184ca-128">Let's now create a new movie and add it to the database.</span></span> <span data-ttu-id="184ca-129">W tym celu należy ponownie uruchomić aplikację i odwiedzić adres URL "/Movies" i kliknąć link "Utwórz", aby dodać nowy film.</span><span class="sxs-lookup"><span data-stu-id="184ca-129">We'll do this by running the application again and visit the "/Movies" URL and click the "Create" link to add a new Movie.</span></span>

<span data-ttu-id="184ca-130">[![tworzenie — Windows Internet Explorer](getting-started-with-mvc-part6/_static/image4.png)](getting-started-with-mvc-part6/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="184ca-130">[![Create - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image4.png)](getting-started-with-mvc-part6/_static/image3.png)</span></span>

<span data-ttu-id="184ca-131">Po kliknięciu przycisku Utwórz zostanie Wyksięgowany zwrot (za pośrednictwem protokołu HTTP POST) danych w tym formularzu do metody/Movies/Create, która została właśnie utworzona.</span><span class="sxs-lookup"><span data-stu-id="184ca-131">When we click the Create button, we'll be posting back (via HTTP POST) the data on this form to the /Movies/Create method that we just created.</span></span> <span data-ttu-id="184ca-132">Podobnie jak w przypadku, gdy system automatycznie przejął parametr "numTimes" i "name" z adresu URL i zamapować je do parametrów we wcześniejszej metodzie, system automatycznie przyjmuje pola formularza z wpisu i mapuje je do obiektu.</span><span class="sxs-lookup"><span data-stu-id="184ca-132">Just like when the system automatically took the "numTimes" and "name " parameter out of the URL and mapped them to parameters on a method earlier, the system will automatically take the Form Fields from a POST and map them to an object.</span></span> <span data-ttu-id="184ca-133">W takim przypadku wartości z pól w formacie HTML, takich jak "ReleaseDate" i "title", zostaną automatycznie wprowadzone do poprawnych właściwości nowego wystąpienia filmu.</span><span class="sxs-lookup"><span data-stu-id="184ca-133">In this case, values from fields in HTML like "ReleaseDate" and "Title" will automatically be put into the correct properties of a new instance of a Movie.</span></span>

<span data-ttu-id="184ca-134">Przyjrzyjmy się drugiej metodzie tworzenia z naszego MoviesController.</span><span class="sxs-lookup"><span data-stu-id="184ca-134">Let's look at the second Create method from our MoviesController again.</span></span> <span data-ttu-id="184ca-135">Zwróć uwagę, jak przyjmuje się, że obiekt "Movie" jako argument:</span><span class="sxs-lookup"><span data-stu-id="184ca-135">Notice how it takes a "Movie" object as an argument:</span></span>

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample3.cs)]

<span data-ttu-id="184ca-136">Ten obiekt filmu został następnie przekierowany do wersji [HttpPost] naszej metody tworzenia akcji i został zapisany w bazie danych, a następnie przekierować użytkownika z powrotem do metody akcji index (), która spowoduje wyświetlenie zapisanego wyniku na liście filmów:</span><span class="sxs-lookup"><span data-stu-id="184ca-136">This Movie object was then passed to the [HttpPost] version of our Create action method, and we saved it in the database and then redirected the user back to the Index() action method which will show the saved result in the movie list:</span></span>

<span data-ttu-id="184ca-137">[Lista filmów ![— Windows Internet Explorer](getting-started-with-mvc-part6/_static/image6.png)](getting-started-with-mvc-part6/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="184ca-137">[![Movie List - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image6.png)](getting-started-with-mvc-part6/_static/image5.png)</span></span>

<span data-ttu-id="184ca-138">Nie Sprawdzamy, czy filmy są poprawne, chociaż nie pozwalają na zapisanie filmu bez tytułu.</span><span class="sxs-lookup"><span data-stu-id="184ca-138">We aren't checking if our movies are correct, though, and the database won't allow us to save a movie with no Title.</span></span> <span data-ttu-id="184ca-139">Jest to dobre rozwiązanie, jeśli firma Microsoft poinformuje użytkownika, że zanim baza danych wygenerowała błąd.</span><span class="sxs-lookup"><span data-stu-id="184ca-139">It'd be nice if we could tell the user that before the database threw an error.</span></span> <span data-ttu-id="184ca-140">Zajmiemy się tym następnym, dodając obsługę walidacji do naszej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="184ca-140">We'll do this next by adding validation support to our application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="184ca-141">[Poprzednie](getting-started-with-mvc-part5.md)
> [dalej](getting-started-with-mvc-part7.md)</span><span class="sxs-lookup"><span data-stu-id="184ca-141">[Previous](getting-started-with-mvc-part5.md)
[Next](getting-started-with-mvc-part7.md)</span></span>

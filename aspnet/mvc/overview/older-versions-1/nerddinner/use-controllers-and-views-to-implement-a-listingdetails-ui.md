---
uid: mvc/overview/older-versions-1/nerddinner/use-controllers-and-views-to-implement-a-listingdetails-ui
title: Używanie kontrolerów i widoków do implementowania interfejsu użytkownika listy/szczegółów | Microsoft Docs
author: microsoft
description: Krok 4 pokazuje, jak dodać kontroler do aplikacji, która wykorzystuje nasz model, aby udostępnić użytkownikom listę/szczegóły środowiska nawigacji...
ms.author: riande
ms.date: 07/27/2010
ms.assetid: 64116e56-1c9a-4f07-8097-bb36cbb6e57f
msc.legacyurl: /mvc/overview/older-versions-1/nerddinner/use-controllers-and-views-to-implement-a-listingdetails-ui
msc.type: authoredcontent
ms.openlocfilehash: 74319fe5ea4c79b50140834349e2fdf86420cfbb
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78600745"
---
# <a name="use-controllers-and-views-to-implement-a-listingdetails-ui"></a><span data-ttu-id="8f854-103">Implementowanie interfejsu użytkownika typu lista/szczegóły przy użyciu kontrolerów i widoków</span><span class="sxs-lookup"><span data-stu-id="8f854-103">Use Controllers and Views to Implement a Listing/Details UI</span></span>

<span data-ttu-id="8f854-104">przez [firmę Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="8f854-104">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="8f854-105">Pobierz plik PDF</span><span class="sxs-lookup"><span data-stu-id="8f854-105">Download PDF</span></span>](http://aspnetmvcbook.s3.amazonaws.com/aspnetmvc-nerdinner_v1.pdf)

> <span data-ttu-id="8f854-106">Jest to krok 4 bezpłatnego [samouczka dotyczącego aplikacji "NerdDinner"](introducing-the-nerddinner-tutorial.md) , który zawiera instrukcje tworzenia niewielkiej, ale kompletnej aplikacji sieci Web przy użyciu ASP.NET MVC 1.</span><span class="sxs-lookup"><span data-stu-id="8f854-106">This is step 4 of a free ["NerdDinner" application tutorial](introducing-the-nerddinner-tutorial.md) that walks-through how to build a small, but complete, web application using ASP.NET MVC 1.</span></span>
> 
> <span data-ttu-id="8f854-107">Krok 4 pokazuje, jak dodać kontroler do aplikacji, która korzysta z naszego modelu, aby udostępnić użytkownikom listę/szczegóły środowiska nawigacji dla obiadów w naszej witrynie NerdDinner.</span><span class="sxs-lookup"><span data-stu-id="8f854-107">Step 4 shows how to add a Controller to the application that takes advantage of our model to provide users with a data listing/details navigation experience for dinners on our NerdDinner site.</span></span>
> 
> <span data-ttu-id="8f854-108">Jeśli używasz ASP.NET MVC 3, zalecamy użycie [wprowadzenie ze samouczkami ze sklepu MVC 3](../../older-versions/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3.md) lub [MVC](../../older-versions/mvc-music-store/mvc-music-store-part-1.md) .</span><span class="sxs-lookup"><span data-stu-id="8f854-108">If you are using ASP.NET MVC 3, we recommend you follow the [Getting Started With MVC 3](../../older-versions/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3.md) or [MVC Music Store](../../older-versions/mvc-music-store/mvc-music-store-part-1.md) tutorials.</span></span>

## <a name="nerddinner-step-4-controllers-and-views"></a><span data-ttu-id="8f854-109">NerdDinner krok 4: kontrolery i widoki</span><span class="sxs-lookup"><span data-stu-id="8f854-109">NerdDinner Step 4: Controllers and Views</span></span>

<span data-ttu-id="8f854-110">W przypadku tradycyjnych platform sieci Web (klasycznych technologii ASP, PHP, ASP.NET Web Forms itp.) przychodzące adresy URL są zazwyczaj mapowane na pliki na dysku.</span><span class="sxs-lookup"><span data-stu-id="8f854-110">With traditional web frameworks (classic ASP, PHP, ASP.NET Web Forms, etc), incoming URLs are typically mapped to files on disk.</span></span> <span data-ttu-id="8f854-111">Na przykład: żądanie dotyczące adresu URL, takiego jak "/Products.aspx" lub "/Products.php", może być przetwarzane przez plik "Products. aspx" lub "Products. php".</span><span class="sxs-lookup"><span data-stu-id="8f854-111">For example: a request for a URL like "/Products.aspx" or "/Products.php" might be processed by a "Products.aspx" or "Products.php" file.</span></span>

<span data-ttu-id="8f854-112">Sieci Web platformy MVC mapują adresy URL na kod serwera w nieco inny sposób.</span><span class="sxs-lookup"><span data-stu-id="8f854-112">Web-based MVC frameworks map URLs to server code in a slightly different way.</span></span> <span data-ttu-id="8f854-113">Zamiast mapować przychodzące adresy URL na pliki, zamiast tego mapują adresy URL na metody klasy.</span><span class="sxs-lookup"><span data-stu-id="8f854-113">Instead of mapping incoming URLs to files, they instead map URLs to methods on classes.</span></span> <span data-ttu-id="8f854-114">Klasy te są nazywane "kontrolerami" i są odpowiedzialne za przetwarzanie przychodzących żądań HTTP, obsługę danych wejściowych użytkownika, pobieranie i zapisywanie danych oraz określanie odpowiedzi na odesłanie do klienta (wyświetlanie kodu HTML, pobieranie pliku, przekierowanie do innego Adres URL itd.</span><span class="sxs-lookup"><span data-stu-id="8f854-114">These classes are called "Controllers" and they are responsible for processing incoming HTTP requests, handling user input, retrieving and saving data, and determining the response to send back to the client (display HTML, download a file, redirect to a different URL, etc).</span></span>

<span data-ttu-id="8f854-115">Teraz, gdy Utworzyliśmy podstawowy model naszej aplikacji NerdDinner, następnym krokiem będzie dodanie kontrolera do aplikacji, która korzysta z niej w celu udostępnienia użytkownikom informacji o wykorzystaniu i nawigacji w przypadku obiadów w naszej witrynie.</span><span class="sxs-lookup"><span data-stu-id="8f854-115">Now that we have built up a basic model for our NerdDinner application, our next step will be to add a Controller to the application that takes advantage of it to provide users with a data listing/details navigation experience for Dinners on our site.</span></span>

### <a name="adding-a-dinnerscontroller-controller"></a><span data-ttu-id="8f854-116">Dodawanie kontrolera DinnersController</span><span class="sxs-lookup"><span data-stu-id="8f854-116">Adding a DinnersController Controller</span></span>

<span data-ttu-id="8f854-117">Rozpocznie się po kliknięciu prawym przyciskiem myszy folderu "controllers" w naszym projekcie sieci Web, a następnie wybraniu polecenia menu **kontrolera Add-&gt;** (można także wykonać to polecenie, wpisując CTRL-M, Ctrl-C):</span><span class="sxs-lookup"><span data-stu-id="8f854-117">We'll begin by right-clicking on the "Controllers" folder within our web project, and then select the **Add-&gt;Controller** menu command (you can also execute this command by typing Ctrl-M, Ctrl-C):</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image1.png)

<span data-ttu-id="8f854-118">Spowoduje to wyświetlenie okna dialogowego "Dodawanie kontrolera":</span><span class="sxs-lookup"><span data-stu-id="8f854-118">This will bring up the "Add Controller" dialog:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image2.png)

<span data-ttu-id="8f854-119">Zmienimy nazwę nowego kontrolera "DinnersController" i klikniesz przycisk "Dodaj".</span><span class="sxs-lookup"><span data-stu-id="8f854-119">We'll name the new controller "DinnersController" and click the "Add" button.</span></span> <span data-ttu-id="8f854-120">Program Visual Studio doda następnie plik DinnersController.cs w katalogu \Controllers:</span><span class="sxs-lookup"><span data-stu-id="8f854-120">Visual Studio will then add a DinnersController.cs file under our \Controllers directory:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image3.png)

<span data-ttu-id="8f854-121">Zostanie również otwarta nowa klasa DinnersController w edytorze kodu.</span><span class="sxs-lookup"><span data-stu-id="8f854-121">It will also open up the new DinnersController class within the code-editor.</span></span>

### <a name="adding-index-and-details-action-methods-to-the-dinnerscontroller-class"></a><span data-ttu-id="8f854-122">Dodawanie metod akcji index () i Details () do klasy DinnersController</span><span class="sxs-lookup"><span data-stu-id="8f854-122">Adding Index() and Details() Action Methods to the DinnersController Class</span></span>

<span data-ttu-id="8f854-123">Chcemy umożliwić odwiedzającym korzystanie z naszej aplikacji, aby przeglądać listę nadchodzących obiadów i zezwolić im na kliknięcie dowolnego obiadu na liście, aby zobaczyć szczegółowe informacje na jego temat.</span><span class="sxs-lookup"><span data-stu-id="8f854-123">We want to enable visitors using our application to browse a list of upcoming dinners, and allow them to click on any Dinner in the list to see specific details about it.</span></span> <span data-ttu-id="8f854-124">W tym celu należy opublikować następujące adresy URL z naszej aplikacji:</span><span class="sxs-lookup"><span data-stu-id="8f854-124">We'll do this by publishing the following URLs from our application:</span></span>

| <span data-ttu-id="8f854-125">**Adres URL**</span><span class="sxs-lookup"><span data-stu-id="8f854-125">**URL**</span></span> | <span data-ttu-id="8f854-126">**Przeznaczenie**</span><span class="sxs-lookup"><span data-stu-id="8f854-126">**Purpose**</span></span> |
| --- | --- |
| <span data-ttu-id="8f854-127">*/Dinners/*</span><span class="sxs-lookup"><span data-stu-id="8f854-127">*/Dinners/*</span></span> | <span data-ttu-id="8f854-128">Wyświetl listę HTML z nadchodzących obiadów</span><span class="sxs-lookup"><span data-stu-id="8f854-128">Display an HTML list of upcoming dinners</span></span> |
| <span data-ttu-id="8f854-129">*/Dinners/Details/[ID]*</span><span class="sxs-lookup"><span data-stu-id="8f854-129">*/Dinners/Details/[id]*</span></span> | <span data-ttu-id="8f854-130">Wyświetl szczegóły dotyczące określonego obiadu wskazywanego przez parametr "ID" osadzony w adresie URL, który będzie pasować do DinnerIDego obiadu w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="8f854-130">Display details about a specific dinner indicated by an "id" parameter embedded within the URL – which will match the DinnerID of the dinner in the database.</span></span> <span data-ttu-id="8f854-131">Na przykład:/Dinners/Details/2 wyświetli stronę HTML ze szczegółowymi informacjami na temat obiadu, którego wartość DinnerID wynosi 2.</span><span class="sxs-lookup"><span data-stu-id="8f854-131">For example: /Dinners/Details/2 would display an HTML page with details about the Dinner whose DinnerID value is 2.</span></span> |

<span data-ttu-id="8f854-132">Opublikujemy wstępne implementacje tych adresów URL, dodając dwie publiczne "metody akcji" do naszej klasy DinnersController, jak poniżej:</span><span class="sxs-lookup"><span data-stu-id="8f854-132">We will publish initial implementations of these URLs by adding two public "action methods" to our DinnersController class like below:</span></span>

[!code-csharp[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample1.cs)]

<span data-ttu-id="8f854-133">Następnie uruchomimy aplikację NerdDinner i użyjemy naszej przeglądarki, aby je wywoływać.</span><span class="sxs-lookup"><span data-stu-id="8f854-133">We'll then run the NerdDinner application and use our browser to invoke them.</span></span> <span data-ttu-id="8f854-134">Wpisanie adresu URL *"/Dinners/"* spowoduje uruchomienie metody *index ()* i wysłanie następującej odpowiedzi:</span><span class="sxs-lookup"><span data-stu-id="8f854-134">Typing in the *"/Dinners/"* URL will cause our *Index()* method to run, and it will send back the following response:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image4.png)

<span data-ttu-id="8f854-135">Wpisanie adresu URL *"/Dinners/Details/2"* spowoduje uruchomienie naszej metody *Details ()* i wysłanie następującej odpowiedzi:</span><span class="sxs-lookup"><span data-stu-id="8f854-135">Typing in the *"/Dinners/Details/2"* URL will cause our *Details()* method to run, and send back the following response:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image5.png)

<span data-ttu-id="8f854-136">Być może zastanawiasz się, jak ASP.NET MVC, aby utworzyć naszą klasę DinnersController i wywoływać te metody?</span><span class="sxs-lookup"><span data-stu-id="8f854-136">You might be wondering - how did ASP.NET MVC know to create our DinnersController class and invoke those methods?</span></span> <span data-ttu-id="8f854-137">Aby zrozumieć, że Przyjrzyjmy się, jak działa Routing.</span><span class="sxs-lookup"><span data-stu-id="8f854-137">To understand that let's take a quick look at how routing works.</span></span>

### <a name="understanding-aspnet-mvc-routing"></a><span data-ttu-id="8f854-138">Zrozumienie routingu ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="8f854-138">Understanding ASP.NET MVC Routing</span></span>

<span data-ttu-id="8f854-139">ASP.NET MVC zawiera wydajny aparat routingu URL, który zapewnia dużą elastyczność kontroli nad sposobem mapowania adresów URL na klasy kontrolerów.</span><span class="sxs-lookup"><span data-stu-id="8f854-139">ASP.NET MVC includes a powerful URL routing engine that provides a lot of flexibility in controlling how URLs are mapped to controller classes.</span></span> <span data-ttu-id="8f854-140">Pozwala nam na całkowite dostosowanie sposobu, w jaki ASP.NET MVC wybiera klasę kontrolera do utworzenia, którą metodę należy wywołać, a także skonfigurować różne sposoby, aby zmienne mogły być automatycznie analizowane przy użyciu adresu URL/QueryString i przekazane do metody jako argumenty parametrów.</span><span class="sxs-lookup"><span data-stu-id="8f854-140">It allows us to completely customize how ASP.NET MVC chooses which controller class to create, which method to invoke on it, as well as configure different ways that variables can be automatically parsed from the URL/Querystring and passed to the method as parameter arguments.</span></span> <span data-ttu-id="8f854-141">Zapewnia elastyczną, aby całkowicie zoptymalizować lokację pod kątem funkcji optymalizacji aparatu wyszukiwania, a także opublikować dowolną strukturę adresów URL z aplikacji.</span><span class="sxs-lookup"><span data-stu-id="8f854-141">It delivers the flexibility to totally optimize a site for SEO (search engine optimization) as well as publish any URL structure we want from an application.</span></span>

<span data-ttu-id="8f854-142">Domyślnie nowe projekty ASP.NET MVC są dostarczane ze wstępnie skonfigurowanym zestawem reguł routingu adresów URL, które są już zarejestrowane.</span><span class="sxs-lookup"><span data-stu-id="8f854-142">By default, new ASP.NET MVC projects come with a preconfigured set of URL routing rules already registered.</span></span> <span data-ttu-id="8f854-143">Dzięki temu można łatwo zacząć korzystać z aplikacji bez konieczności jawnego konfigurowania jakichkolwiek elementów.</span><span class="sxs-lookup"><span data-stu-id="8f854-143">This enables us to easily get started on an application without having to explicitly configure anything.</span></span> <span data-ttu-id="8f854-144">Rejestracje domyślnych reguł routingu można znaleźć w klasie "aplikacja" naszych projektów, którą można otworzyć przez dwukrotne kliknięcie pliku "Global. asax" w katalogu głównym naszego projektu:</span><span class="sxs-lookup"><span data-stu-id="8f854-144">The default routing rule registrations can be found within the "Application" class of our projects – which we can open by double-clicking the "Global.asax" file in the root of our project:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image6.png)

<span data-ttu-id="8f854-145">Domyślne reguły routingu ASP.NET MVC są rejestrowane w metodzie "RegisterRoutes" tej klasy:</span><span class="sxs-lookup"><span data-stu-id="8f854-145">The default ASP.NET MVC routing rules are registered within the "RegisterRoutes" method of this class:</span></span>

[!code-csharp[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample2.cs)]

<span data-ttu-id="8f854-146">"Trasy. Plik maproute () "wywołanie metody powyżej rejestruje domyślną regułę routingu, która mapuje przychodzące adresy URL na klasy kontrolerów przy użyciu formatu adresu URL:"/{Controller}/{Action}/{ID} "— gdzie" Controller "jest nazwą klasy kontrolera do wystąpienia," Akcja "jest nazwą metody publicznej do wywołania, a" ID "jest opcjonalnym parametrem osadzonym w adresie URL, który może być przekazaniem jako argument do metody.</span><span class="sxs-lookup"><span data-stu-id="8f854-146">The "routes.MapRoute()" method call above registers a default routing rule that maps incoming URLs to controller classes using the URL format: "/{controller}/{action}/{id}" – where "controller" is the name of the controller class to instantiate, "action" is the name of a public method to invoke on it, and "id" is an optional parameter embedded within the URL that can be passed as an argument to the method.</span></span> <span data-ttu-id="8f854-147">Trzeci parametr przesłany do wywołania metody "plik maproute ()" jest zestawem wartości domyślnych, które są używane dla wartości kontrolera/akcji/identyfikatora w przypadku, gdy nie występują w adresie URL (Controller = "Strona główna", Akcja = "indeks", identyfikator = "").</span><span class="sxs-lookup"><span data-stu-id="8f854-147">The third parameter passed to the "MapRoute()" method call is a set of default values to use for the controller/action/id values in the event that they are not present in the URL (Controller = "Home", Action="Index", Id="").</span></span>

<span data-ttu-id="8f854-148">Poniżej znajduje się tabela, która pokazuje, w jaki sposób różne adresy URL są mapowane przy użyciu domyślnej reguły trasy "<em>/{controllers}/{Action}/{ID}"</em>:</span><span class="sxs-lookup"><span data-stu-id="8f854-148">Below is a table that demonstrates how a variety of URLs are mapped using the default "<em>/{controllers}/{action}/{id}"</em>route rule:</span></span>

| <span data-ttu-id="8f854-149">**Adres URL**</span><span class="sxs-lookup"><span data-stu-id="8f854-149">**URL**</span></span> | <span data-ttu-id="8f854-150">**Klasa kontrolera**</span><span class="sxs-lookup"><span data-stu-id="8f854-150">**Controller Class**</span></span> | <span data-ttu-id="8f854-151">**Action — Metoda**</span><span class="sxs-lookup"><span data-stu-id="8f854-151">**Action Method**</span></span> | <span data-ttu-id="8f854-152">**Parametry zakończone**</span><span class="sxs-lookup"><span data-stu-id="8f854-152">**Parameters Passed**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="8f854-153">*/Dinners/Details/2*</span><span class="sxs-lookup"><span data-stu-id="8f854-153">*/Dinners/Details/2*</span></span> | <span data-ttu-id="8f854-154">DinnersController</span><span class="sxs-lookup"><span data-stu-id="8f854-154">DinnersController</span></span> | <span data-ttu-id="8f854-155">Szczegóły (identyfikator)</span><span class="sxs-lookup"><span data-stu-id="8f854-155">Details(id)</span></span> | <span data-ttu-id="8f854-156">id=2</span><span class="sxs-lookup"><span data-stu-id="8f854-156">id=2</span></span> |
| <span data-ttu-id="8f854-157">*/Dinners/Edit/5*</span><span class="sxs-lookup"><span data-stu-id="8f854-157">*/Dinners/Edit/5*</span></span> | <span data-ttu-id="8f854-158">DinnersController</span><span class="sxs-lookup"><span data-stu-id="8f854-158">DinnersController</span></span> | <span data-ttu-id="8f854-159">Edytuj (identyfikator)</span><span class="sxs-lookup"><span data-stu-id="8f854-159">Edit(id)</span></span> | <span data-ttu-id="8f854-160">id=5</span><span class="sxs-lookup"><span data-stu-id="8f854-160">id=5</span></span> |
| <span data-ttu-id="8f854-161">*/Dinners/Create*</span><span class="sxs-lookup"><span data-stu-id="8f854-161">*/Dinners/Create*</span></span> | <span data-ttu-id="8f854-162">DinnersController</span><span class="sxs-lookup"><span data-stu-id="8f854-162">DinnersController</span></span> | <span data-ttu-id="8f854-163">Utwórz ()</span><span class="sxs-lookup"><span data-stu-id="8f854-163">Create()</span></span> | <span data-ttu-id="8f854-164">N/D</span><span class="sxs-lookup"><span data-stu-id="8f854-164">N/A</span></span> |
| <span data-ttu-id="8f854-165">*/Dinners*</span><span class="sxs-lookup"><span data-stu-id="8f854-165">*/Dinners*</span></span> | <span data-ttu-id="8f854-166">DinnersController</span><span class="sxs-lookup"><span data-stu-id="8f854-166">DinnersController</span></span> | <span data-ttu-id="8f854-167">Index()</span><span class="sxs-lookup"><span data-stu-id="8f854-167">Index()</span></span> | <span data-ttu-id="8f854-168">N/D</span><span class="sxs-lookup"><span data-stu-id="8f854-168">N/A</span></span> |
| <span data-ttu-id="8f854-169">*/Home*</span><span class="sxs-lookup"><span data-stu-id="8f854-169">*/Home*</span></span> | <span data-ttu-id="8f854-170">HomeController</span><span class="sxs-lookup"><span data-stu-id="8f854-170">HomeController</span></span> | <span data-ttu-id="8f854-171">Index()</span><span class="sxs-lookup"><span data-stu-id="8f854-171">Index()</span></span> | <span data-ttu-id="8f854-172">N/D</span><span class="sxs-lookup"><span data-stu-id="8f854-172">N/A</span></span> |
| */* | <span data-ttu-id="8f854-173">HomeController</span><span class="sxs-lookup"><span data-stu-id="8f854-173">HomeController</span></span> | <span data-ttu-id="8f854-174">Index()</span><span class="sxs-lookup"><span data-stu-id="8f854-174">Index()</span></span> | <span data-ttu-id="8f854-175">N/D</span><span class="sxs-lookup"><span data-stu-id="8f854-175">N/A</span></span> |

<span data-ttu-id="8f854-176">W ostatnich trzech wierszach są wyświetlane wartości domyślne (Controller = Home, Action = index, ID = "").</span><span class="sxs-lookup"><span data-stu-id="8f854-176">The last three rows show the default values (Controller = Home, Action = Index, Id = "") being used.</span></span> <span data-ttu-id="8f854-177">Ponieważ metoda "index" jest zarejestrowana jako domyślna nazwa akcji, jeśli nie jest określona, adresy URL "/Dinners" i "/Home" powodują wywoływanie metody akcji index () dla ich klas kontrolera.</span><span class="sxs-lookup"><span data-stu-id="8f854-177">Because the "Index" method is registered as the default action name if one isn't specified, the "/Dinners" and "/Home" URLs cause the Index() action method to be invoked on their Controller classes.</span></span> <span data-ttu-id="8f854-178">Ponieważ kontroler "Home" jest zarejestrowany jako kontroler domyślny, jeśli nie jest określony, adres URL "/" powoduje utworzenie HomeController oraz metodę akcji index (), która ma zostać wywołana.</span><span class="sxs-lookup"><span data-stu-id="8f854-178">Because the "Home" controller is registered as the default controller if one isn't specified, the "/" URL causes the HomeController to be created, and the Index() action method on it to be invoked.</span></span>

<span data-ttu-id="8f854-179">Jeśli nie chcesz, aby te domyślne reguły routingu adresów URL były łatwe do zmiany — wystarczy je edytować w powyższej metodzie RegisterRoutes.</span><span class="sxs-lookup"><span data-stu-id="8f854-179">If you don't like these default URL routing rules, the good news is that they are easy to change - just edit them within the RegisterRoutes method above.</span></span> <span data-ttu-id="8f854-180">Mimo że nasza aplikacja NerdDinner nie zmienia żadnych domyślnych reguł routingu adresów URL, zamiast tego będziemy korzystać z nich w stanie takim, w jakim się znajdują.</span><span class="sxs-lookup"><span data-stu-id="8f854-180">For our NerdDinner application, though, we aren't going to change any of the default URL routing rules – instead we'll just use them as-is.</span></span>

### <a name="using-the-dinnerrepository-from-our-dinnerscontroller"></a><span data-ttu-id="8f854-181">Korzystanie z DinnerRepository z naszej DinnersController</span><span class="sxs-lookup"><span data-stu-id="8f854-181">Using the DinnerRepository from our DinnersController</span></span>

<span data-ttu-id="8f854-182">Zastąpmy teraz bieżącą implementację metod akcji index () DinnersController () i Details () z implementacjami korzystającymi z naszego modelu.</span><span class="sxs-lookup"><span data-stu-id="8f854-182">Let's now replace our current implementation of the DinnersController's Index() and Details() action methods with implementations that use our model.</span></span>

<span data-ttu-id="8f854-183">Użyjemy wcześniej wbudowanej klasy DinnerRepository, aby zaimplementować zachowanie.</span><span class="sxs-lookup"><span data-stu-id="8f854-183">We'll use the DinnerRepository class we built earlier to implement the behavior.</span></span> <span data-ttu-id="8f854-184">Zaczniemy od dodania instrukcji "Using", która odwołuje się do przestrzeni nazw "NerdDinner. Models", a następnie zadeklaruj wystąpienie naszego DinnerRepository jako pole w naszej klasie DinnerController.</span><span class="sxs-lookup"><span data-stu-id="8f854-184">We'll begin by adding a "using" statement that references the "NerdDinner.Models" namespace, and then declare an instance of our DinnerRepository as a field on our DinnerController class.</span></span>

<span data-ttu-id="8f854-185">W dalszej części tego rozdziału wprowadzimy koncepcję "iniekcji zależności" i pokazano inny sposób, aby nasze kontrolery uzyskały odwołanie do DinnerRepository, które umożliwią lepsze testowanie jednostek — ale po prostu utworzymy wystąpienie naszego DinnerRepository w tekście poniżej.</span><span class="sxs-lookup"><span data-stu-id="8f854-185">Later in this chapter we'll introduce the concept of "Dependency Injection" and show another way for our Controllers to obtain a reference to a DinnerRepository that enables better unit testing – but for right now we'll just create an instance of our DinnerRepository inline like below.</span></span>

[!code-csharp[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample3.cs)]

<span data-ttu-id="8f854-186">Teraz jesteśmy gotowi do wygenerowania odpowiedzi HTML z powrotem przy użyciu podanych obiektów modelu danych.</span><span class="sxs-lookup"><span data-stu-id="8f854-186">Now we are ready to generate a HTML response back using our retrieved data model objects.</span></span>

### <a name="using-views-with-our-controller"></a><span data-ttu-id="8f854-187">Używanie widoków z naszym kontrolerem</span><span class="sxs-lookup"><span data-stu-id="8f854-187">Using Views with our Controller</span></span>

<span data-ttu-id="8f854-188">Chociaż można napisać kod w naszych metodach działania, aby złożyć HTML, a następnie użyć metody pomocnika *Response. Write ()* w celu wysłania jej z powrotem do klienta, to podejście stanie się dość nieporęczny szybko.</span><span class="sxs-lookup"><span data-stu-id="8f854-188">While it is possible to write code within our action methods to assemble HTML and then use the *Response.Write()* helper method to send it back to the client, that approach becomes fairly unwieldy quickly.</span></span> <span data-ttu-id="8f854-189">Znacznie lepszym rozwiązaniem jest tylko wykonywanie logiki aplikacji i danych w naszych metodach działania DinnersController, a następnie przekazywanie danych potrzebnych do renderowania odpowiedzi HTML do oddzielnego szablonu "widok", który jest odpowiedzialny za wyprowadzanie reprezentacji HTML z niego.</span><span class="sxs-lookup"><span data-stu-id="8f854-189">A much better approach is for us to only perform application and data logic inside our DinnersController action methods, and to then pass the data needed to render a HTML response to a separate "view" template that is responsible for outputting the HTML representation of it.</span></span> <span data-ttu-id="8f854-190">Jak zobaczymy na chwilę, szablon "widok" jest plikiem tekstowym, który zwykle zawiera kombinację znaczników HTML i osadzonego kodu renderowania.</span><span class="sxs-lookup"><span data-stu-id="8f854-190">As we'll see in a moment, a "view" template is a text file that typically contains a combination of HTML markup and embedded rendering code.</span></span>

<span data-ttu-id="8f854-191">Rozdzielenie naszej logiki kontrolera od naszego renderowania widoku przynosi wiele korzyści.</span><span class="sxs-lookup"><span data-stu-id="8f854-191">Separating our controller logic from our view rendering brings several big benefits.</span></span> <span data-ttu-id="8f854-192">W szczególności pomaga wymusić wyraźne "oddzielenie obaw" między kodem aplikacji i formatowaniem interfejsu użytkownika/kodem renderowania.</span><span class="sxs-lookup"><span data-stu-id="8f854-192">In particular it helps enforce a clear "separation of concerns" between the application code and UI formatting/rendering code.</span></span> <span data-ttu-id="8f854-193">Dzięki temu można znacznie łatwiej przetestować logikę aplikacji w celu odizolowania od logiki renderowania interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="8f854-193">This makes it much easier to unit-test application logic in isolation from UI rendering logic.</span></span> <span data-ttu-id="8f854-194">Ułatwia to późniejsze modyfikowanie szablonów renderowania interfejsu użytkownika bez konieczności wprowadzania zmian w kodzie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="8f854-194">It makes it easier to later modify the UI rendering templates without having to make application code changes.</span></span> <span data-ttu-id="8f854-195">Może to ułatwić deweloperom i projektantom współpracę wspólnie z projektami.</span><span class="sxs-lookup"><span data-stu-id="8f854-195">And it can make it easier for developers and designers to collaborate together on projects.</span></span>

<span data-ttu-id="8f854-196">Możemy zaktualizować naszą klasę DinnersController, aby wskazać, że chcemy użyć szablonu widoku w celu wysłania odpowiedzi z powrotem do interfejsu użytkownika HTML, zmieniając sygnatury metod naszych dwóch metod akcji, z których ma zostać zwrócony typ "void", aby zamiast tego był typem zwracanym "ActionResult".</span><span class="sxs-lookup"><span data-stu-id="8f854-196">We can update our DinnersController class to indicate that we want to use a view template to send back an HTML UI response by changing the method signatures of our two action methods from having a return type of "void" to instead have a return type of "ActionResult".</span></span> <span data-ttu-id="8f854-197">Następnie możemy wywołać metodę pomocnika *View ()* w klasie podstawowej kontrolera w celu zwrócenia z powrotem obiektu "ViewResult", takiego jak poniżej:</span><span class="sxs-lookup"><span data-stu-id="8f854-197">We can then call the *View()* helper method on the Controller base class to return back a "ViewResult" object like below:</span></span>

[!code-csharp[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample4.cs)]

<span data-ttu-id="8f854-198">Sygnatura metody pomocnika *widoku ()* , z której korzystamy powyżej, wygląda jak poniżej:</span><span class="sxs-lookup"><span data-stu-id="8f854-198">The signature of the *View()* helper method we are using above looks like below:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image7.png)

<span data-ttu-id="8f854-199">Pierwszy parametr do metody pomocnika *View ()* jest nazwą pliku szablonu widoku, który ma być używany do renderowania odpowiedzi html.</span><span class="sxs-lookup"><span data-stu-id="8f854-199">The first parameter to the *View()* helper method is the name of the view template file we want to use to render the HTML response.</span></span> <span data-ttu-id="8f854-200">Drugi parametr jest obiektem modelu, który zawiera dane, których wymaga szablon widoku w celu renderowania odpowiedzi HTML.</span><span class="sxs-lookup"><span data-stu-id="8f854-200">The second parameter is a model object that contains the data that the view template needs in order to render the HTML response.</span></span>

<span data-ttu-id="8f854-201">W naszej metodzie działania indeksu () wywoływana jest metoda pomocnika *widoku ()* i wskazująca, że chcemy renderować listę z obiadów HTML przy użyciu szablonu widoku "index" (indeks).</span><span class="sxs-lookup"><span data-stu-id="8f854-201">Within our Index() action method we are calling the *View()* helper method and indicating that we want to render an HTML listing of dinners using an "Index" view template.</span></span> <span data-ttu-id="8f854-202">Przekazujemy szablon widoku z sekwencją obiektów obiadu, aby wygenerować listę z:</span><span class="sxs-lookup"><span data-stu-id="8f854-202">We are passing the view template a sequence of Dinner objects to generate the list from:</span></span>

[!code-csharp[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample5.cs)]

<span data-ttu-id="8f854-203">W naszej metodzie akcji () podjęto próbę pobrania obiektu obiadu przy użyciu identyfikatora podanego w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="8f854-203">Within our Details() action method we attempt to retrieve a Dinner object using the id provided within the URL.</span></span> <span data-ttu-id="8f854-204">Jeśli zostanie znaleziony prawidłowy obiad, wywołamy metodę pomocnika *View ()* , wskazując, że chcemy użyć szablonu widoku "Szczegóły" w celu renderowania pobranego obiektu obiadu.</span><span class="sxs-lookup"><span data-stu-id="8f854-204">If a valid Dinner is found we call the *View()* helper method, indicating we want to use a "Details" view template to render the retrieved Dinner object.</span></span> <span data-ttu-id="8f854-205">Jeśli zażądano nieprawidłowego obiadu, zostanie wyświetlony komunikat o błędzie informujący o tym, że obiad nie istnieje przy użyciu szablonu widoku "NotFound" (i przeciążonej wersji metody pomocnika *View ()* , która po prostu przyjmuje nazwę szablonu):</span><span class="sxs-lookup"><span data-stu-id="8f854-205">If an invalid dinner is requested, we render a helpful error message that indicates that the Dinner doesn't exist using a "NotFound" view template (and an overloaded version of the *View()* helper method that just takes the template name):</span></span>

[!code-csharp[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample6.cs)]

<span data-ttu-id="8f854-206">Zaimplementujmy teraz szablony widoków "NotFound", "Details" i "index".</span><span class="sxs-lookup"><span data-stu-id="8f854-206">Let's now implement the "NotFound", "Details", and "Index" view templates.</span></span>

### <a name="implementing-the-notfound-view-template"></a><span data-ttu-id="8f854-207">Implementowanie szablonu widoku "NotFound"</span><span class="sxs-lookup"><span data-stu-id="8f854-207">Implementing the "NotFound" View Template</span></span>

<span data-ttu-id="8f854-208">Zaczniemy od implementacji szablonu widoku "NotFound" — który wyświetla przyjazny komunikat o błędzie informujący o tym, że nie można znaleźć żądanego obiadu.</span><span class="sxs-lookup"><span data-stu-id="8f854-208">We'll begin by implementing the "NotFound" view template – which displays a friendly error message indicating that the requested dinner can't be found.</span></span>

<span data-ttu-id="8f854-209">Utworzymy nowy szablon widoku poprzez rozmieszczenie kursora tekstu w ramach metody akcji kontrolera, a następnie kliknięcie prawym przyciskiem myszy i wybranie polecenia menu "Dodaj widok" (można również wykonać to polecenie, wpisując CTRL-M, Ctrl-V):</span><span class="sxs-lookup"><span data-stu-id="8f854-209">We'll create a new view template by positioning our text cursor within a controller action method, and then right click and choose the "Add View" menu command (we can also execute this command by typing Ctrl-M, Ctrl-V):</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image8.png)

<span data-ttu-id="8f854-210">Spowoduje to wyświetlenie okna dialogowego "Dodawanie widoku", takiego jak poniżej.</span><span class="sxs-lookup"><span data-stu-id="8f854-210">This will bring up an "Add View" dialog like below.</span></span> <span data-ttu-id="8f854-211">Domyślnie okno dialogowe spowoduje wstępne wypełnienie nazwy widoku, który zostanie utworzony w celu dopasowania do nazwy metody akcji, w której znajduje się kursor, gdy okno dialogowe zostało uruchomione (w tym przypadku "Szczegóły").</span><span class="sxs-lookup"><span data-stu-id="8f854-211">By default the dialog will pre-populate the name of the view to create to match the name of the action method the cursor was in when the dialog was launched (in this case "Details").</span></span> <span data-ttu-id="8f854-212">Ponieważ chcemy najpierw zaimplementować szablon "NotFound", przesłonimy tę nazwę widoku i ustawimy ją jako "NotFound":</span><span class="sxs-lookup"><span data-stu-id="8f854-212">Because we want to first implement the "NotFound" template, we'll override this view name and set it to instead be "NotFound":</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image9.png)

<span data-ttu-id="8f854-213">Po kliknięciu przycisku "Dodaj" program Visual Studio utworzy nowy szablon widoku "NotFound. aspx" dla nas w katalogu "\Views\Dinners" (który również zostanie utworzony, jeśli katalog jeszcze nie istnieje):</span><span class="sxs-lookup"><span data-stu-id="8f854-213">When we click the "Add" button, Visual Studio will create a new "NotFound.aspx" view template for us within the "\Views\Dinners" directory (which it will also create if the directory doesn't already exist):</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image10.png)

<span data-ttu-id="8f854-214">Zostanie również otwarty nasz nowy szablon widoku "NotFound. aspx" w edytorze kodu:</span><span class="sxs-lookup"><span data-stu-id="8f854-214">It will also open up our new "NotFound.aspx" view template within the code-editor:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image11.png)

<span data-ttu-id="8f854-215">Widok szablony domyślnie ma dwa "regiony zawartości", w których można dodać zawartość i kod.</span><span class="sxs-lookup"><span data-stu-id="8f854-215">View templates by default have two "content regions" where we can add content and code.</span></span> <span data-ttu-id="8f854-216">Po pierwsze pozwala nam dostosować "tytuł" strony HTML wysłanej z powrotem.</span><span class="sxs-lookup"><span data-stu-id="8f854-216">The first allows us to customize the "title" of the HTML page sent back.</span></span> <span data-ttu-id="8f854-217">Druga pozwala na dostosowanie "głównej zawartości strony HTML wysłanej z powrotem.</span><span class="sxs-lookup"><span data-stu-id="8f854-217">The second allows us to customize the "main content" of the HTML page sent back.</span></span>

<span data-ttu-id="8f854-218">Aby zaimplementować nasz szablon widoku "NotFound", dodamy zawartość podstawową:</span><span class="sxs-lookup"><span data-stu-id="8f854-218">To implement our "NotFound" view template we'll add some basic content:</span></span>

[!code-aspx[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample7.aspx)]

<span data-ttu-id="8f854-219">Możemy to zrobić w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="8f854-219">We can then try it out within the browser.</span></span> <span data-ttu-id="8f854-220">Aby to umożliwić, zażądaj adresu URL *"/Dinners/Details/9999"* .</span><span class="sxs-lookup"><span data-stu-id="8f854-220">To do this let's request the *"/Dinners/Details/9999"* URL.</span></span> <span data-ttu-id="8f854-221">Odnosi się to do obiadu, który nie istnieje w bazie danych i spowoduje, że metoda akcji DinnersController. Details () będzie renderować nasz szablon widoku "NotFound":</span><span class="sxs-lookup"><span data-stu-id="8f854-221">This will refer to a dinner that doesn't currently exist in the database, and will cause our DinnersController.Details() action method to render our "NotFound" view template:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image12.png)

<span data-ttu-id="8f854-222">W tym celu należy zauważyć, że na powyższym zrzucie ekranu jest to, że nasz podstawowy szablon widoku dziedziczy zbiór kodu HTML, który otacza główną zawartość na ekranie.</span><span class="sxs-lookup"><span data-stu-id="8f854-222">One thing you'll notice in the screen-shot above is that our basic view template has inherited a bunch of HTML that surrounds the main content on the screen.</span></span> <span data-ttu-id="8f854-223">Wynika to z faktu, że nasz szablon widoku używa szablonu "Strona główna", który umożliwia nam stosowanie spójnego układu we wszystkich widokach w witrynie.</span><span class="sxs-lookup"><span data-stu-id="8f854-223">This is because our view-template is using a "master page" template that enables us to apply a consistent layout across all views on the site.</span></span> <span data-ttu-id="8f854-224">Będziemy omawiać, jak strony wzorcowe pracują więcej w dalszej części tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="8f854-224">We'll discuss how master pages work more in a later part of this tutorial.</span></span>

### <a name="implementing-the-details-view-template"></a><span data-ttu-id="8f854-225">Implementowanie szablonu widoku "Szczegóły"</span><span class="sxs-lookup"><span data-stu-id="8f854-225">Implementing the "Details" View Template</span></span>

<span data-ttu-id="8f854-226">Teraz zaimplementujmy szablon widoku "Szczegóły", który będzie generował kod HTML dla pojedynczego modelu obiadu.</span><span class="sxs-lookup"><span data-stu-id="8f854-226">Let's now implement the "Details" view template – which will generate HTML for a single Dinner model.</span></span>

<span data-ttu-id="8f854-227">Zajmiemy się tym rozmieszczeniem kursora tekstu w metodzie akcji Details, a następnie kliknij prawym przyciskiem myszy i wybierz polecenie menu "Dodaj widok" (lub naciśnij klawisze CTRL-M, Ctrl-V):</span><span class="sxs-lookup"><span data-stu-id="8f854-227">We'll do this by positioning our text cursor within the Details action method, and then right click and choose the "Add View" menu command (or press Ctrl-M, Ctrl-V):</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image13.png)

<span data-ttu-id="8f854-228">Spowoduje to wyświetlenie okna dialogowego "Dodawanie widoku".</span><span class="sxs-lookup"><span data-stu-id="8f854-228">This will bring up the "Add View" dialog.</span></span> <span data-ttu-id="8f854-229">Zachowamy domyślną nazwę widoku ("Szczegóły").</span><span class="sxs-lookup"><span data-stu-id="8f854-229">We'll keep the default view name ("Details").</span></span> <span data-ttu-id="8f854-230">Zaznaczmy również pole wyboru "Utwórz widok z silną nazwą" w oknie dialogowym, a następnie wybierz (przy użyciu listy rozwijanej ComboBox) nazwę typu modelu przekazywanego z kontrolera do widoku.</span><span class="sxs-lookup"><span data-stu-id="8f854-230">We'll also select the "Create a strongly-typed View" checkbox in the dialog and select (using the combobox dropdown) the name of the model type we are passing from the Controller to the View.</span></span> <span data-ttu-id="8f854-231">W tym widoku przekazujemy obiekt obiadu (w pełni kwalifikowana nazwa tego typu to: "NerdDinner. models. obiad"):</span><span class="sxs-lookup"><span data-stu-id="8f854-231">For this view we are passing a Dinner object (the fully qualified name for this type is: "NerdDinner.Models.Dinner"):</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image14.png)

<span data-ttu-id="8f854-232">W przeciwieństwie do poprzedniego szablonu, w przypadku wybrania opcji utworzenia "pustego widoku" ten czas zostanie wybrany automatycznie "szkieletem" dla widoku przy użyciu szablonu "Szczegóły".</span><span class="sxs-lookup"><span data-stu-id="8f854-232">Unlike the previous template, where we chose to create an "Empty View", this time we will choose to automatically "scaffold" the view using a "Details" template.</span></span> <span data-ttu-id="8f854-233">Możemy to potwierdzić, zmieniając listę rozwijaną "Wyświetl zawartość" w oknie dialogowym powyżej.</span><span class="sxs-lookup"><span data-stu-id="8f854-233">We can indicate this by changing the "View content" drop-down in the dialog above.</span></span>

<span data-ttu-id="8f854-234">"Rusztowanie" spowoduje wygenerowanie początkowej implementacji naszego szablonu widoku szczegółów na podstawie obiektu obiadu, który przekazujemy do niego.</span><span class="sxs-lookup"><span data-stu-id="8f854-234">"Scaffolding" will generate an initial implementation of our details view template based on the Dinner object we are passing to it.</span></span> <span data-ttu-id="8f854-235">Zapewnia to łatwy sposób na szybkie rozpoczęcie pracy nad implementacją szablonu widoku.</span><span class="sxs-lookup"><span data-stu-id="8f854-235">This provides an easy way for us to quickly get started on our view template implementation.</span></span>

<span data-ttu-id="8f854-236">Po kliknięciu przycisku "Dodaj" program Visual Studio utworzy nowy plik szablonu widoku "Szczegóły. aspx" dla nas w katalogu "\Views\Dinners":</span><span class="sxs-lookup"><span data-stu-id="8f854-236">When we click the "Add" button, Visual Studio will create a new "Details.aspx" view template file for us within our "\Views\Dinners" directory:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image15.png)

<span data-ttu-id="8f854-237">Zostanie również otwarty nasz nowy szablon widoku "Szczegóły. aspx" w edytorze kodu.</span><span class="sxs-lookup"><span data-stu-id="8f854-237">It will also open up our new "Details.aspx" view template within the code-editor.</span></span> <span data-ttu-id="8f854-238">Będzie zawierać wstępną implementację szkieletu widoku szczegółów na podstawie modelu obiadu.</span><span class="sxs-lookup"><span data-stu-id="8f854-238">It will contain an initial scaffold implementation of a details view based on a Dinner model.</span></span> <span data-ttu-id="8f854-239">Aparat tworzenia szkieletów używa odbicia platformy .NET, aby przyjrzeć się właściwościom publicznym narażonym na klasę przekazaną i dodać odpowiednią zawartość w oparciu o każdy znaleziony typ:</span><span class="sxs-lookup"><span data-stu-id="8f854-239">The scaffolding engine uses .NET reflection to look at the public properties exposed on the class passed it, and will add appropriate content based on each type it finds:</span></span>

[!code-aspx[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample8.aspx)]

<span data-ttu-id="8f854-240">Możemy zażądać adresu URL *"/Dinners/Details/1"* , aby sprawdzić, jak wygląda implementacja szkieletu "Szczegóły" w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="8f854-240">We can request the *"/Dinners/Details/1"* URL to see what this "details" scaffold implementation looks like in the browser.</span></span> <span data-ttu-id="8f854-241">Użycie tego adresu URL spowoduje wyświetlenie jednego z obiadów, które zostały ręcznie dodane do naszej bazy danych po jej utworzeniu:</span><span class="sxs-lookup"><span data-stu-id="8f854-241">Using this URL will display one of the dinners we manually added to our database when we first created it:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image16.png)

<span data-ttu-id="8f854-242">Pozwala to na szybkie uruchamianie i wykonywanie wstępnych implementacji naszego widoku szczegółów. aspx.</span><span class="sxs-lookup"><span data-stu-id="8f854-242">This gets us up and running quickly, and provides us with an initial implementation of our Details.aspx view.</span></span> <span data-ttu-id="8f854-243">Możemy następnie przejść i dopasować go, aby dostosować interfejs użytkownika do naszego zadowolenia.</span><span class="sxs-lookup"><span data-stu-id="8f854-243">We can then go and tweak it to customize the UI to our satisfaction.</span></span>

<span data-ttu-id="8f854-244">Gdy sprawdzimy szablon szczegóły. aspx dokładniej, zobaczymy, że zawiera on statyczny kod HTML, a także osadzony kodu renderowania.</span><span class="sxs-lookup"><span data-stu-id="8f854-244">When we look at the Details.aspx template more closely, we'll find that it contains static HTML as well as embedded rendering code.</span></span> <span data-ttu-id="8f854-245">&lt;%%&gt; kod wykonywania kodu Nuggets, gdy renderuje szablon widoku i &lt;% =%&gt; kod Nuggets wykonywania zawartego w nich kodu, a następnie Renderuj wynik do strumienia wyjściowego szablonu.</span><span class="sxs-lookup"><span data-stu-id="8f854-245">&lt;% %&gt; code nuggets execute code when the view template renders, and &lt;%= %&gt; code nuggets execute the code contained within them and then render the result to the output stream of the template.</span></span>

<span data-ttu-id="8f854-246">Możemy napisać kod w naszym widoku, który uzyskuje dostęp do obiektu modelu "obiad", który został przesłany przez nasz kontroler przy użyciu właściwości "model" o jednoznacznie określonym typie.</span><span class="sxs-lookup"><span data-stu-id="8f854-246">We can write code within our View that accesses the "Dinner" model object that was passed from our controller using a strongly-typed "Model" property.</span></span> <span data-ttu-id="8f854-247">Program Visual Studio udostępnia nam pełny kod — IntelliSense podczas uzyskiwania dostępu do tej właściwości "model" w edytorze:</span><span class="sxs-lookup"><span data-stu-id="8f854-247">Visual Studio provides us with full code-intellisense when accessing this "Model" property within the editor:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image17.png)

<span data-ttu-id="8f854-248">Wprowadźmy kilka dostosowań, aby źródło dla naszego końcowego szablonu widoku szczegółów wyglądało jak poniżej:</span><span class="sxs-lookup"><span data-stu-id="8f854-248">Let's make some tweaks so that the source for our final Details view template looks like below:</span></span>

[!code-aspx[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample9.aspx)]

<span data-ttu-id="8f854-249">Gdy będziemy ponownie uzyskiwać dostęp do adresu URL *"/Dinners/Details/1"* , będzie on teraz renderowany w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="8f854-249">When we access the *"/Dinners/Details/1"* URL again it will now render like below:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image18.png)

### <a name="implementing-the-index-view-template"></a><span data-ttu-id="8f854-250">Implementowanie szablonu widoku "index"</span><span class="sxs-lookup"><span data-stu-id="8f854-250">Implementing the "Index" View Template</span></span>

<span data-ttu-id="8f854-251">Teraz zaimplementujmy szablon widoku "index", który spowoduje wygenerowanie listy przyszłych obiadów.</span><span class="sxs-lookup"><span data-stu-id="8f854-251">Let's now implement the "Index" view template – which will generate a listing of upcoming Dinners.</span></span> <span data-ttu-id="8f854-252">Aby to zrobić, zmienimy kursor tekstowy w ramach metody akcji index, a następnie kliknij prawym przyciskiem myszy i wybierz polecenie menu "Dodaj widok" (lub naciśnij klawisze CTRL-M, Ctrl-V).</span><span class="sxs-lookup"><span data-stu-id="8f854-252">To-do this we'll position our text cursor within the Index action method, and then right click and choose the "Add View" menu command (or press Ctrl-M, Ctrl-V).</span></span>

<span data-ttu-id="8f854-253">W oknie dialogowym "Dodawanie widoku" zachowasz szablon widoku o nazwie "index" i wybierzesz pole wyboru "Utwórz widok o jednoznacznie określonym typie".</span><span class="sxs-lookup"><span data-stu-id="8f854-253">Within the "Add View" dialog we'll keep the view template named "Index" and select the "Create a strongly-typed view" checkbox.</span></span> <span data-ttu-id="8f854-254">Tym razem wybierzemy automatyczne wygenerowanie szablonu widoku "list" i wybranie "NerdDinner. models. obiad" jako typu modelu przekazana do widoku (który wskazuje, że tworzysz szkielet "list", spowoduje to, że w oknie dialogowym Dodawanie widoku zostanie założono, że przekazywanie sekwencji obiektów obiadu z naszego kontrolera do widoku):</span><span class="sxs-lookup"><span data-stu-id="8f854-254">This time we will choose to automatically generate a "List" view template, and select "NerdDinner.Models.Dinner" as the model type passed to the view (which because we have indicated we are creating a "List" scaffold will cause the Add View dialog to assume we are passing a sequence of Dinner objects from our Controller to the View):</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image19.png)

<span data-ttu-id="8f854-255">Po kliknięciu przycisku "Dodaj" program Visual Studio utworzy nowy plik szablonu widoku "index. aspx" dla nas w katalogu "\Views\Dinners".</span><span class="sxs-lookup"><span data-stu-id="8f854-255">When we click the "Add" button, Visual Studio will create a new "Index.aspx" view template file for us within our "\Views\Dinners" directory.</span></span> <span data-ttu-id="8f854-256">W tym celu zostanie wyświetlona wstępna implementacja szkieletu, która zawiera tabelę HTML zawierającą uroczyste obiady do widoku.</span><span class="sxs-lookup"><span data-stu-id="8f854-256">It will "scaffold" an initial implementation within it that provides an HTML table listing of the Dinners we pass to the view.</span></span>

<span data-ttu-id="8f854-257">Po uruchomieniu aplikacji i otrzymaniu dostępu do adresu URL *"/Dinners/"* zostanie wyrenderowana nasza lista obiadów, takich jak:</span><span class="sxs-lookup"><span data-stu-id="8f854-257">When we run the application and access the *"/Dinners/"* URL it will render our list of dinners like so:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image20.png)

<span data-ttu-id="8f854-258">Powyższe rozwiązanie tabeli umożliwia nam tworzenie układu przypominającego siatkę naszych danych obiadu — co nie jest dość potrzebne dla naszej listy obiadów z klientem.</span><span class="sxs-lookup"><span data-stu-id="8f854-258">The table solution above gives us a grid-like layout of our Dinner data – which isn't quite what we want for our consumer facing Dinner listing.</span></span> <span data-ttu-id="8f854-259">Możemy zaktualizować szablon widoku index. aspx i zmodyfikować go w taki sposób, aby wyświetlał mniejszą liczbę kolumn danych, i użyć elementu &lt;ul&gt;, aby renderować je zamiast tabeli przy użyciu poniższego kodu:</span><span class="sxs-lookup"><span data-stu-id="8f854-259">We can update the Index.aspx view template and modify it to list fewer columns of data, and use a &lt;ul&gt; element to render them instead of a table using the code below:</span></span>

[!code-aspx[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample10.aspx)]

<span data-ttu-id="8f854-260">Używamy słowa kluczowego "var" w powyższej instrukcji foreach, ponieważ pętla każdego obiadu w naszym modelu.</span><span class="sxs-lookup"><span data-stu-id="8f854-260">We are using the "var" keyword within the above foreach statement as we loop over each dinner in our Model.</span></span> <span data-ttu-id="8f854-261">Osoby nieznające C# 3,0 mogą myśleć, że użycie "var" oznacza, że obiekt obiadu jest opóźniony.</span><span class="sxs-lookup"><span data-stu-id="8f854-261">Those unfamiliar with C# 3.0 might think that using "var" means that the dinner object is late-bound.</span></span> <span data-ttu-id="8f854-262">Zamiast tego oznacza, że kompilator używa wnioskowania typu względem właściwości "model" o jednoznacznie określonym typie, czyli typu "IEnumerable&lt;obiad&gt;") i kompilowania lokalnej zmiennej "obiad" jako typu obiadu, co oznacza, że w blokach kodu zostanie wypełniona pełna funkcja IntelliSense i sprawdzanie czasu kompilacji:</span><span class="sxs-lookup"><span data-stu-id="8f854-262">It instead means that the compiler is using type-inference against the strongly typed "Model" property (which is of type "IEnumerable&lt;Dinner&gt;") and compiling the local "dinner" variable as a Dinner type – which means we get full intellisense and compile-time checking for it within code blocks:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image21.png)

<span data-ttu-id="8f854-263">Po trafieniu na adres URL */Dinners* w naszej przeglądarce nasz zaktualizowany widok wygląda teraz następująco:</span><span class="sxs-lookup"><span data-stu-id="8f854-263">When we hit refresh on the */Dinners* URL in our browser our updated view now looks like below:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image22.png)

<span data-ttu-id="8f854-264">Jest to dokładniejsze wyszukiwanie, ale nie jest jeszcze w całości.</span><span class="sxs-lookup"><span data-stu-id="8f854-264">This is looking better – but isn't entirely there yet.</span></span> <span data-ttu-id="8f854-265">Ostatnim krokiem jest umożliwienie użytkownikom końcowym klikania poszczególnych obiadów na liście i wyświetlania szczegółowych informacji o nich.</span><span class="sxs-lookup"><span data-stu-id="8f854-265">Our last step is to enable end-users to click individual Dinners in the list and see details about them.</span></span> <span data-ttu-id="8f854-266">Zaimplementujemy to przez renderowanie elementów hiperłączy HTML, które łączą się z metodą akcji szczegółów w naszym DinnersController.</span><span class="sxs-lookup"><span data-stu-id="8f854-266">We'll implement this by rendering HTML hyperlink elements that link to the Details action method on our DinnersController.</span></span>

<span data-ttu-id="8f854-267">Można generować te hiperłącza w naszym widoku indeksu na jeden z dwóch sposobów.</span><span class="sxs-lookup"><span data-stu-id="8f854-267">We can generate these hyperlinks within our Index view in one of two ways.</span></span> <span data-ttu-id="8f854-268">Pierwszym z nich jest ręczne utworzenie kodu HTML &lt;&gt; elementy, takie jak poniżej, gdzie osadzamy &lt;%%&gt; bloków w &lt;&gt; elementu HTML:</span><span class="sxs-lookup"><span data-stu-id="8f854-268">The first is to manually create HTML &lt;a&gt; elements like below, where we embed &lt;% %&gt; blocks within the &lt;a&gt; HTML element:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image23.png)

<span data-ttu-id="8f854-269">Alternatywnym podejściem, którego można użyć, jest skorzystanie z wbudowanej metody pomocnika "html. ActionLink ()" w ramach ASP.NET MVC, która obsługuje Programistyczne tworzenie kodu HTML &lt;element&gt;, który łączy się z inną metodą akcji na kontrolerze:</span><span class="sxs-lookup"><span data-stu-id="8f854-269">An alternative approach we can use is to take advantage of the built-in "Html.ActionLink()" helper method within ASP.NET MVC that supports programmatically creating an HTML &lt;a&gt; element that links to another action method on a Controller:</span></span>

[!code-aspx[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample11.aspx)]

<span data-ttu-id="8f854-270">Pierwszy parametr do pliku HTML. ActionLink () — metoda pomocnika to tekst linku do wyświetlenia (w tym przypadku tytuł obiadu), drugi parametr to nazwa akcji kontrolera, do której chcemy wygenerować łącze (w tym przypadku Metoda Details), a trzeci parametr to zestaw parametrów do wysłania do akcji (zaimplementowany jako typ anonimowy przy użyciu nazwy właściwości/wartości).</span><span class="sxs-lookup"><span data-stu-id="8f854-270">The first parameter to the Html.ActionLink() helper method is the link-text to display (in this case the title of the dinner), the second parameter is the Controller action name we want to generate the link to (in this case the Details method), and the third parameter is a set of parameters to send to the action (implemented as an anonymous type with property name/values).</span></span> <span data-ttu-id="8f854-271">W tym przypadku określamy parametr "ID" obiadu, z którym chcemy się połączyć, a ponieważ domyślna reguła routingu adresu URL w ASP.NET MVC to "{Controller}/{Action}/{id}" metoda pomocnika html. ActionLink () generuje następujące dane wyjściowe:</span><span class="sxs-lookup"><span data-stu-id="8f854-271">In this case we are specifying the "id" parameter of the dinner we want to link to, and because the default URL routing rule in ASP.NET MVC is "{Controller}/{Action}/{id}" the Html.ActionLink() helper method will generate the following output:</span></span>

[!code-html[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample12.html)]

<span data-ttu-id="8f854-272">W naszym widoku index. aspx będziemy używać metody pomocnika html. ActionLink () i mieć każdy obiad na liście w linku do odpowiedniego adresu URL szczegółów:</span><span class="sxs-lookup"><span data-stu-id="8f854-272">For our Index.aspx view we'll use the Html.ActionLink() helper method approach and have each dinner in the list link to the appropriate details URL:</span></span>

[!code-aspx[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample13.aspx)]

<span data-ttu-id="8f854-273">A teraz, gdy trafimy adres URL */Dinners* , nasz list obiadu wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="8f854-273">And now when we hit the */Dinners* URL our dinner list looks like below:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image24.png)

<span data-ttu-id="8f854-274">Po kliknięciu dowolnego obiadu na liście będziemy przeglądać szczegółowe informacje na jego temat:</span><span class="sxs-lookup"><span data-stu-id="8f854-274">When we click any of the Dinners in the list we'll navigate to see details about it:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image25.png)

### <a name="convention-based-naming-and-the-views-directory-structure"></a><span data-ttu-id="8f854-275">Nazewnictwo oparte na konwencji i struktura katalogów \Views</span><span class="sxs-lookup"><span data-stu-id="8f854-275">Convention-based naming and the \Views directory structure</span></span>

<span data-ttu-id="8f854-276">ASP.NET aplikacje MVC domyślnie wykorzystują strukturę nazewnictwa katalogu na podstawie Konwencji podczas rozpoznawania szablonów widoków.</span><span class="sxs-lookup"><span data-stu-id="8f854-276">ASP.NET MVC applications by default use a convention-based directory naming structure when resolving view templates.</span></span> <span data-ttu-id="8f854-277">Dzięki temu deweloperzy nie muszą w pełni kwalifikować ścieżki lokalizacji podczas odwoływania się do widoków z poziomu klasy kontrolera.</span><span class="sxs-lookup"><span data-stu-id="8f854-277">This allows developers to avoid having to fully-qualify a location path when referencing views from within a Controller class.</span></span> <span data-ttu-id="8f854-278">Domyślnie ASP.NET MVC szuka pliku szablonu widoku znajdującego się w katalogu \* \Views\[ControllerName\*] pod aplikacją.</span><span class="sxs-lookup"><span data-stu-id="8f854-278">By default ASP.NET MVC will look for the view template file within the \*\Views\[ControllerName]\* directory underneath the application.</span></span>

<span data-ttu-id="8f854-279">Na przykład pracujemy nad klasą DinnersController — która jawnie odwołuje się do trzech szablonów widoków: "index", "Details" i "NotFound".</span><span class="sxs-lookup"><span data-stu-id="8f854-279">For example, we've been working on the DinnersController class – which explicitly references three view templates: "Index", "Details" and "NotFound".</span></span> <span data-ttu-id="8f854-280">ASP.NET MVC będzie domyślnie szukać tych widoków w katalogu *\Views\Dinners* pod naszym katalogiem głównym aplikacji:</span><span class="sxs-lookup"><span data-stu-id="8f854-280">ASP.NET MVC will by default look for these views within the *\Views\Dinners* directory underneath our application root directory:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image26.png)

<span data-ttu-id="8f854-281">Zwróć uwagę na to, że istnieją trzy klasy kontrolera w projekcie (DinnersController, HomeController i elementu AccountController — ostatnie dwa zostały dodane domyślnie podczas tworzenia projektu), a istnieją trzy podkatalogi (po jednym dla każdej kontroler) w katalogu \Views.</span><span class="sxs-lookup"><span data-stu-id="8f854-281">Notice above how there are currently three controller classes within the project (DinnersController, HomeController and AccountController – the last two were added by default when we created the project), and there are three sub-directories (one for each controller) within the \Views directory.</span></span>

<span data-ttu-id="8f854-282">Widoki z odwołaniami z kontrolerów głównych i kont automatycznie rozwiązują szablony widoków z odpowiednich katalogów *\Views\Home* i *\Views\Account* .</span><span class="sxs-lookup"><span data-stu-id="8f854-282">Views referenced from the Home and Accounts controllers will automatically resolve their view templates from the respective *\Views\Home* and *\Views\Account* directories.</span></span> <span data-ttu-id="8f854-283">Podkatalog *\Views\Shared* umożliwia przechowywanie szablonów widoków, które są ponownie używane na wielu kontrolerach w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="8f854-283">The *\Views\Shared* sub-directory provides a way to store view templates that are re-used across multiple controllers within the application.</span></span> <span data-ttu-id="8f854-284">Gdy ASP.NET MVC próbuje rozpoznać szablon widoku, najpierw sprawdzi w określonym katalogu *\Views\[Controller]* i jeśli nie może znaleźć szablonu widoku, będzie wyglądał w katalogu *\Views\Shared* .</span><span class="sxs-lookup"><span data-stu-id="8f854-284">When ASP.NET MVC attempts to resolve a view template, it will first check within the *\Views\[Controller]* specific directory, and if it can't find the view template there it will look within the *\Views\Shared* directory.</span></span>

<span data-ttu-id="8f854-285">Gdy przyjdzie do nazewnictwa poszczególnych szablonów widoków, zalecaną wskazówką jest udostępnienie szablonu widoku tej samej nazwy co metoda działania, która spowodowała renderowanie.</span><span class="sxs-lookup"><span data-stu-id="8f854-285">When it comes to naming individual view templates, the recommended guidance is to have the view template share the same name as the action method that caused it to render.</span></span> <span data-ttu-id="8f854-286">Na przykład powyżej nasza metoda działania "index" używa widoku "index", aby renderować wynik widoku, a metoda akcji "Szczegóły" używa widoku "Szczegóły", aby renderować wyniki.</span><span class="sxs-lookup"><span data-stu-id="8f854-286">For example, above our "Index" action method is using the "Index" view to render the view result, and the "Details" action method is using the "Details" view to render its results.</span></span> <span data-ttu-id="8f854-287">Dzięki temu można łatwo szybko sprawdzić, który szablon jest skojarzony z poszczególnymi akcjami.</span><span class="sxs-lookup"><span data-stu-id="8f854-287">This makes it easy to quickly see which template is associated with each action.</span></span>

<span data-ttu-id="8f854-288">Deweloperzy nie muszą jawnie określać nazwy szablonu widoku, gdy szablon widoku ma taką samą nazwę jak Metoda akcji wywoływana na kontrolerze.</span><span class="sxs-lookup"><span data-stu-id="8f854-288">Developers do not need to explicitly specify the view template name when the view template has the same name as the action method being invoked on the controller.</span></span> <span data-ttu-id="8f854-289">Zamiast tego można przekazać obiekt modelu do metody pomocnika "View ()" (bez określenia nazwy widoku), a ASP.NET MVC automatycznie wywnioskuje, że chcemy użyć *\Views\[ControllerName]\[ActionName]* Wyświetl szablon na dysku, aby go renderować.</span><span class="sxs-lookup"><span data-stu-id="8f854-289">We can instead just pass the model object to the "View()" helper method (without specifying the view name), and ASP.NET MVC will automatically infer that we want to use the *\Views\[ControllerName]\[ActionName]* view template on disk to render it.</span></span>

<span data-ttu-id="8f854-290">Dzięki temu możemy czyścić kod kontrolera nieco trochę i uniknąć duplikowania nazwy dwukrotnie w naszym kodzie:</span><span class="sxs-lookup"><span data-stu-id="8f854-290">This allows us to clean up our controller code a little, and avoid duplicating the name twice in our code:</span></span>

[!code-csharp[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample14.cs)]

<span data-ttu-id="8f854-291">Powyższym kodem jest wszystko, co jest konieczne do zaimplementowania w celu uzyskania szczegółowych informacji o tym, jak to działa.</span><span class="sxs-lookup"><span data-stu-id="8f854-291">The above code is all that is needed to implement a nice Dinner listing/details experience for the site.</span></span>

#### <a name="next-step"></a><span data-ttu-id="8f854-292">Następny krok</span><span class="sxs-lookup"><span data-stu-id="8f854-292">Next Step</span></span>

<span data-ttu-id="8f854-293">Teraz masz wbudowaną funkcję przeglądania obiadu.</span><span class="sxs-lookup"><span data-stu-id="8f854-293">We now have a nice Dinner browsing experience built.</span></span>

<span data-ttu-id="8f854-294">Teraz Włącz obsługę edycji formularzy danych w programie CRUD (tworzenie, odczytywanie, aktualizowanie, usuwanie).</span><span class="sxs-lookup"><span data-stu-id="8f854-294">Let's now enable CRUD (Create, Read, Update, Delete) data form editing support.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8f854-295">[Poprzednie](build-a-model-with-business-rule-validations.md)
> [dalej](provide-crud-create-read-update-delete-data-form-entry-support.md)</span><span class="sxs-lookup"><span data-stu-id="8f854-295">[Previous](build-a-model-with-business-rule-validations.md)
[Next](provide-crud-create-read-update-delete-data-form-entry-support.md)</span></span>

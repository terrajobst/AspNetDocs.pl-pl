---
uid: mvc/overview/older-versions-1/security/preventing-javascript-injection-attacks-cs
title: Zapobieganie atakom polegającymC#na iniekcji kodu JavaScript () | Microsoft Docs
author: StephenWalther
description: Zapobiegaj atakom z użyciem kodu JavaScript i atakami z obsługą skryptów między lokacjami. W tym samouczku Stephen Walther wyjaśnia, jak można łatwo cofnąć...
ms.author: riande
ms.date: 08/19/2008
ms.assetid: d0136da6-81a4-4815-b002-baa84744c09e
msc.legacyurl: /mvc/overview/older-versions-1/security/preventing-javascript-injection-attacks-cs
msc.type: authoredcontent
ms.openlocfilehash: fb00ee8a7e3d678e824052060eb5d9fd5d4b6a42
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78600409"
---
# <a name="preventing-javascript-injection-attacks-c"></a><span data-ttu-id="f44d4-104">Zapobieganie atakom polegającym na wstrzyknięciu kodu JavaScript (C#)</span><span class="sxs-lookup"><span data-stu-id="f44d4-104">Preventing JavaScript Injection Attacks (C#)</span></span>

<span data-ttu-id="f44d4-105">Autor [Stephen Walther](https://github.com/StephenWalther)</span><span class="sxs-lookup"><span data-stu-id="f44d4-105">by [Stephen Walther](https://github.com/StephenWalther)</span></span>

[<span data-ttu-id="f44d4-106">Pobierz plik PDF</span><span class="sxs-lookup"><span data-stu-id="f44d4-106">Download PDF</span></span>](https://download.microsoft.com/download/8/4/8/84843d8d-1575-426c-bcb5-9d0c42e51416/ASPNET_MVC_Tutorial_06_CS.pdf)

> <span data-ttu-id="f44d4-107">Zapobiegaj atakom z użyciem kodu JavaScript i atakami z obsługą skryptów między lokacjami.</span><span class="sxs-lookup"><span data-stu-id="f44d4-107">Prevent JavaScript Injection Attacks and Cross-Site Scripting Attacks from happening to you.</span></span> <span data-ttu-id="f44d4-108">W tym samouczku Stephen Walther wyjaśnia, w jaki sposób można łatwo wypaczać ataki przez kodowanie HTML.</span><span class="sxs-lookup"><span data-stu-id="f44d4-108">In this tutorial, Stephen Walther explains how you can easily defeat these types of attacks by HTML encoding your content.</span></span>

<span data-ttu-id="f44d4-109">Celem tego samouczka jest wyjaśnienie, jak można zapobiec atakom z iniekcją kodu JavaScript w aplikacjach ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f44d4-109">The goal of this tutorial is to explain how you can prevent JavaScript injection attacks in your ASP.NET MVC applications.</span></span> <span data-ttu-id="f44d4-110">W tym samouczku omówiono dwa podejścia do obrony witryny sieci Web przed atakami polegającymi na iniekcji kodu JavaScript.</span><span class="sxs-lookup"><span data-stu-id="f44d4-110">This tutorial discusses two approaches to defending your website against a JavaScript injection attack.</span></span> <span data-ttu-id="f44d4-111">Dowiesz się, jak zapobiegać atakom z użyciem kodu JavaScript przez kodowanie wyświetlanych danych.</span><span class="sxs-lookup"><span data-stu-id="f44d4-111">You learn how to prevent JavaScript injection attacks by encoding the data that you display.</span></span> <span data-ttu-id="f44d4-112">Dowiesz się również, jak zapobiegać atakom z użyciem kodu JavaScript przez zakodowanie akceptowanych danych.</span><span class="sxs-lookup"><span data-stu-id="f44d4-112">You also learn how to prevent JavaScript injection attacks by encoding the data that you accept.</span></span>

## <a name="what-is-a-javascript-injection-attack"></a><span data-ttu-id="f44d4-113">Co to jest atak z iniekcją kodu JavaScript?</span><span class="sxs-lookup"><span data-stu-id="f44d4-113">What is a JavaScript Injection Attack?</span></span>

<span data-ttu-id="f44d4-114">Za każdym razem, gdy zaakceptujesz dane wejściowe użytkownika i ponownie wyświetlasz dane wejściowe użytkownika, możesz otworzyć witrynę internetową, aby uzyskać ataki kodu JavaScript.</span><span class="sxs-lookup"><span data-stu-id="f44d4-114">Whenever you accept user input and redisplay the user input, you open your website to JavaScript injection attacks.</span></span> <span data-ttu-id="f44d4-115">Sprawdźmy konkretną aplikację, która jest otwarta do ataków iniekcji kodu JavaScript.</span><span class="sxs-lookup"><span data-stu-id="f44d4-115">Let's examine a concrete application that is open to JavaScript injection attacks.</span></span>

<span data-ttu-id="f44d4-116">Załóżmy, że utworzono witrynę internetową opinii klienta (patrz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="f44d4-116">Imagine that you have created a customer feedback website (see Figure 1).</span></span> <span data-ttu-id="f44d4-117">Klienci mogą odwiedzić witrynę internetową i wprowadzić Opinie na ich temat, korzystając z Twoich produktów.</span><span class="sxs-lookup"><span data-stu-id="f44d4-117">Customers can visit the website and enter feedback on their experience using your products.</span></span> <span data-ttu-id="f44d4-118">Gdy klient prześle swoją opinię, opinia jest ponownie wyświetlana na stronie opinii.</span><span class="sxs-lookup"><span data-stu-id="f44d4-118">When a customer submits their feedback, the feedback is redisplayed on the feedback page.</span></span>

<span data-ttu-id="f44d4-119">[Witryna sieci Web opinii klientów ![](preventing-javascript-injection-attacks-cs/_static/image2.png)](preventing-javascript-injection-attacks-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f44d4-119">[![Customer Feedback Website](preventing-javascript-injection-attacks-cs/_static/image2.png)](preventing-javascript-injection-attacks-cs/_static/image1.png)</span></span>

<span data-ttu-id="f44d4-120">**Ilustracja 01**. Witryna internetowa opinii klientów ([kliknij, aby wyświetlić obraz o pełnym rozmiarze](preventing-javascript-injection-attacks-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="f44d4-120">**Figure 01**: Customer Feedback Website ([Click to view full-size image](preventing-javascript-injection-attacks-cs/_static/image3.png))</span></span>

<span data-ttu-id="f44d4-121">Witryna internetowa opinii klientów używa `controller` z listy 1.</span><span class="sxs-lookup"><span data-stu-id="f44d4-121">The customer feedback website uses the `controller` in Listing 1.</span></span> <span data-ttu-id="f44d4-122">Ten `controller` zawiera dwie akcje o nazwie `Index()` i `Create()`.</span><span class="sxs-lookup"><span data-stu-id="f44d4-122">This `controller` contains two actions named `Index()` and `Create()`.</span></span>

<span data-ttu-id="f44d4-123">**Lista 1 — `HomeController.cs`**</span><span class="sxs-lookup"><span data-stu-id="f44d4-123">**Listing 1 – `HomeController.cs`**</span></span>

[!code-csharp[Main](preventing-javascript-injection-attacks-cs/samples/sample1.cs)]

<span data-ttu-id="f44d4-124">Metoda `Index()` wyświetla widok `Index`.</span><span class="sxs-lookup"><span data-stu-id="f44d4-124">The `Index()` method displays the `Index` view.</span></span> <span data-ttu-id="f44d4-125">Ta metoda przekazuje wszystkie poprzednie opinie klientów do widoku `Index`, pobierając informacje zwrotne z bazy danych (przy użyciu zapytania LINQ to SQL).</span><span class="sxs-lookup"><span data-stu-id="f44d4-125">This method passes all of the previous customer feedback to the `Index` view by retrieving the feedback from the database (using a LINQ to SQL query).</span></span>

<span data-ttu-id="f44d4-126">Metoda `Create()` tworzy nowy element opinii i dodaje go do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f44d4-126">The `Create()` method creates a new Feedback item and adds it to the database.</span></span> <span data-ttu-id="f44d4-127">Komunikat wprowadzony przez klienta w formularzu jest przesyłany do metody `Create()` w parametrze komunikatu.</span><span class="sxs-lookup"><span data-stu-id="f44d4-127">The message that the customer enters in the form is passed to the `Create()` method in the message parameter.</span></span> <span data-ttu-id="f44d4-128">Zostanie utworzony element opinii, a wiadomość zostanie przypisana do właściwości `Message` elementu opinii.</span><span class="sxs-lookup"><span data-stu-id="f44d4-128">A Feedback item is created and the message is assigned to the Feedback item's `Message` property.</span></span> <span data-ttu-id="f44d4-129">Element opinii jest przesyłany do bazy danych za pomocą wywołania metody `DataContext.SubmitChanges()`.</span><span class="sxs-lookup"><span data-stu-id="f44d4-129">The Feedback item is submitted to the database with the `DataContext.SubmitChanges()` method call.</span></span> <span data-ttu-id="f44d4-130">Na koniec odmowa zostanie przekierowana z powrotem do widoku `Index`, w którym jest wyświetlana cała opinia.</span><span class="sxs-lookup"><span data-stu-id="f44d4-130">Finally, the visitor is redirected back to the `Index` view where all of the feedback is displayed.</span></span>

<span data-ttu-id="f44d4-131">Widok `Index` jest zawarty w liście 2.</span><span class="sxs-lookup"><span data-stu-id="f44d4-131">The `Index` view is contained in Listing 2.</span></span>

<span data-ttu-id="f44d4-132">**Lista 2 — `Index.aspx`**</span><span class="sxs-lookup"><span data-stu-id="f44d4-132">**Listing 2 – `Index.aspx`**</span></span>

[!code-aspx[Main](preventing-javascript-injection-attacks-cs/samples/sample2.aspx)]

<span data-ttu-id="f44d4-133">Widok `Index` ma dwie sekcje.</span><span class="sxs-lookup"><span data-stu-id="f44d4-133">The `Index` view has two sections.</span></span> <span data-ttu-id="f44d4-134">Górna sekcja zawiera rzeczywisty formularz opinii klientów.</span><span class="sxs-lookup"><span data-stu-id="f44d4-134">The top section contains the actual customer feedback form.</span></span> <span data-ttu-id="f44d4-135">Dolna sekcja zawiera... Każda pętla, która przechodzi przez wszystkie poprzednie elementy opinii klientów i wyświetla EntryDate i właściwości wiadomości dla każdego elementu opinii.</span><span class="sxs-lookup"><span data-stu-id="f44d4-135">The bottom section contains a For..Each loop that loops through all of the previous customer feedback items and displays the EntryDate and Message properties for each feedback item.</span></span>

<span data-ttu-id="f44d4-136">Witryna internetowa opinii klientów jest prostą witryną sieci Web.</span><span class="sxs-lookup"><span data-stu-id="f44d4-136">The customer feedback website is a simple website.</span></span> <span data-ttu-id="f44d4-137">Niestety, witryna internetowa jest otwarta do ataków iniekcji kodu JavaScript.</span><span class="sxs-lookup"><span data-stu-id="f44d4-137">Unfortunately, the website is open to JavaScript injection attacks.</span></span>

<span data-ttu-id="f44d4-138">Załóżmy, że wprowadzasz następujący tekst do formularza opinii klientów:</span><span class="sxs-lookup"><span data-stu-id="f44d4-138">Imagine that you enter the following text into the customer feedback form:</span></span>

[!code-html[Main](preventing-javascript-injection-attacks-cs/samples/sample3.html)]

<span data-ttu-id="f44d4-139">Ten tekst przedstawia skrypt JavaScript, który wyświetla okno komunikatu alertu.</span><span class="sxs-lookup"><span data-stu-id="f44d4-139">This text represents a JavaScript script that displays an alert message box.</span></span> <span data-ttu-id="f44d4-140">Gdy ktoś wyśle ten skrypt do formularza opinii, komunikat <em>Boo!</em> zostanie wyświetlona za każdym razem, gdy ktoś odwiedzi witrynę internetową opinii klientów w przyszłości (patrz rysunek 2).</span><span class="sxs-lookup"><span data-stu-id="f44d4-140">After someone submits this script into the feedback form, the message <em>Boo!</em>will appear whenever anyone visits the customer feedback website in the future (see Figure 2).</span></span>

<span data-ttu-id="f44d4-141">[![iniekcja kodu JavaScript](preventing-javascript-injection-attacks-cs/_static/image5.png)](preventing-javascript-injection-attacks-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="f44d4-141">[![JavaScript Injection](preventing-javascript-injection-attacks-cs/_static/image5.png)](preventing-javascript-injection-attacks-cs/_static/image4.png)</span></span>

<span data-ttu-id="f44d4-142">**Ilustracja 02**: iniekcja kodu JavaScript ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](preventing-javascript-injection-attacks-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="f44d4-142">**Figure 02**: JavaScript Injection ([Click to view full-size image](preventing-javascript-injection-attacks-cs/_static/image6.png))</span></span>

<span data-ttu-id="f44d4-143">Teraz początkową odpowiedzią na ataki kodu JavaScript może być Apathy.</span><span class="sxs-lookup"><span data-stu-id="f44d4-143">Now, your initial response to JavaScript injection attacks might be apathy.</span></span> <span data-ttu-id="f44d4-144">Może się okazać, że ataki kodu JavaScript są po prostu typem *ataku.*</span><span class="sxs-lookup"><span data-stu-id="f44d4-144">You might think that JavaScript injection attacks are simply a type of *defacement* attack.</span></span> <span data-ttu-id="f44d4-145">Może się zdarzyć, że nikt nie może wykonać niczego naprawdę akcja przez zatwierdzenie ataku polegającego na iniekcji kodu JavaScript.</span><span class="sxs-lookup"><span data-stu-id="f44d4-145">You might believe that no one can do anything truly evil by committing a JavaScript injection attack.</span></span>

<span data-ttu-id="f44d4-146">Niestety haker może robić naprawdę akcja rzeczy, wprowadzając kod JavaScript do witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="f44d4-146">Unfortunately, a hacker can do some really, really evil things by injecting JavaScript into a website.</span></span> <span data-ttu-id="f44d4-147">Aby wykonać atak między lokacjami (XSS), można użyć ataku polegającego na iniekcji języka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="f44d4-147">You can use a JavaScript injection attack to perform a Cross-Site Scripting (XSS) attack.</span></span> <span data-ttu-id="f44d4-148">W przypadku ataku za skrypty między lokacjami można wykraść poufne informacje o użytkownikach i wysłać je do innej witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="f44d4-148">In a Cross-Site Scripting attack, you steal confidential user information and send the information to another website.</span></span>

<span data-ttu-id="f44d4-149">Na przykład haker może użyć ataku polegającego na iniekcji kodu JavaScript w celu kradzieży wartości plików cookie w przeglądarce od innych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="f44d4-149">For example, a hacker can use a JavaScript injection attack to steal the values of browser cookies from other users.</span></span> <span data-ttu-id="f44d4-150">Jeśli informacje poufne — takie jak hasła, numery kart kredytowych lub numery ubezpieczenia społecznego są przechowywane w plikach cookie przeglądarki, haker może użyć ataku wstrzykiwania kodu JavaScript, aby wykraść te informacje.</span><span class="sxs-lookup"><span data-stu-id="f44d4-150">If sensitive information -- such as passwords, credit card numbers, or social security numbers – is stored in the browser cookies, then a hacker can use a JavaScript injection attack to steal this information.</span></span> <span data-ttu-id="f44d4-151">Lub, jeśli użytkownik wprowadzi poufne informacje w polu formularza zawartym na stronie, która została naruszona przez atak JavaScript, haker może użyć wstrzykniętego kodu JavaScript do pobrania danych formularza i wysłania ich do innej witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="f44d4-151">Or, if a user enters sensitive information in a form field contained in a page that has been compromised with a JavaScript attack, then the hacker can use the injected JavaScript to grab the form data and send it to another website.</span></span>

<span data-ttu-id="f44d4-152">*Należy obawialiśmy*.</span><span class="sxs-lookup"><span data-stu-id="f44d4-152">*Please be scared*.</span></span> <span data-ttu-id="f44d4-153">Należy wziąć pod istotny wpływ na ataki kodu JavaScript i chronić poufne informacje użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f44d4-153">Take JavaScript injection attacks seriously and protect your user's confidential information.</span></span> <span data-ttu-id="f44d4-154">W dwóch następnych sekcjach omówiono dwie techniki, za pomocą których można chronić aplikacje ASP.NET MVC przed atakami polegającymi na iniekcji kodu JavaScript.</span><span class="sxs-lookup"><span data-stu-id="f44d4-154">In the next two sections, we discuss two techniques that you can use to defend your ASP.NET MVC applications from JavaScript injection attacks.</span></span>

## <a name="approach-1-html-encode-in-the-view"></a><span data-ttu-id="f44d4-155">Podejście #1: kodowanie HTML w widoku</span><span class="sxs-lookup"><span data-stu-id="f44d4-155">Approach #1: HTML Encode in the View</span></span>

<span data-ttu-id="f44d4-156">Jedną z prostych metod zapobiegania atakom z użyciem kodu JavaScript jest kodowanie HTML wszelkich danych wprowadzonych przez użytkowników witryny sieci Web po ponownym wyświetleniu danych w widoku.</span><span class="sxs-lookup"><span data-stu-id="f44d4-156">One easy method of preventing JavaScript injection attacks is to HTML encode any data entered by website users when you redisplay the data in a view.</span></span> <span data-ttu-id="f44d4-157">Zaktualizowany widok `Index` na liście 3 jest zgodny z tym podejściem.</span><span class="sxs-lookup"><span data-stu-id="f44d4-157">The updated `Index` view in Listing 3 follows this approach.</span></span>

<span data-ttu-id="f44d4-158">**Lista 3 — `Index.aspx` (kodowanie HTML)**</span><span class="sxs-lookup"><span data-stu-id="f44d4-158">**Listing 3 – `Index.aspx` (HTML Encoded)**</span></span>

[!code-aspx[Main](preventing-javascript-injection-attacks-cs/samples/sample4.aspx)]

<span data-ttu-id="f44d4-159">Zwróć uwagę, że wartość `feedback.Message` jest zakodowana HTML przed wyświetleniem wartości przy użyciu następującego kodu:</span><span class="sxs-lookup"><span data-stu-id="f44d4-159">Notice that the value of `feedback.Message` is HTML encoded before the value is displayed with the following code:</span></span>

[!code-aspx[Main](preventing-javascript-injection-attacks-cs/samples/sample5.aspx)]

<span data-ttu-id="f44d4-160">Co oznacza kod HTML kodowania ciągu?</span><span class="sxs-lookup"><span data-stu-id="f44d4-160">What does it mean to HTML encode a string?</span></span> <span data-ttu-id="f44d4-161">Podczas kodowania ciągu HTML niebezpieczne znaki, takie jak `<` i `>`, są zamieniane na odwołania do jednostek HTML, takie jak `&lt;` i `&gt;`.</span><span class="sxs-lookup"><span data-stu-id="f44d4-161">When you HTML encode a string, dangerous characters such as `<` and `>` are replaced by HTML entity references such as `&lt;` and `&gt;`.</span></span> <span data-ttu-id="f44d4-162">Tak więc, gdy ciąg `<script>alert("Boo!")</script>` jest zakodowana w języku HTML, zostanie przekonwertowany na `&lt;script&gt;alert(&quot;Boo!&quot;)&lt;/script&gt;`.</span><span class="sxs-lookup"><span data-stu-id="f44d4-162">So when the string `<script>alert("Boo!")</script>` is HTML encoded, it gets converted to `&lt;script&gt;alert(&quot;Boo!&quot;)&lt;/script&gt;`.</span></span> <span data-ttu-id="f44d4-163">Zakodowany ciąg nie jest już wykonywany jako skrypt JavaScript, gdy jest interpretowany przez przeglądarkę.</span><span class="sxs-lookup"><span data-stu-id="f44d4-163">The encoded string no longer executes as a JavaScript script when interpreted by a browser.</span></span> <span data-ttu-id="f44d4-164">Zamiast tego otrzymujesz niegroźną stronę na rysunku 3.</span><span class="sxs-lookup"><span data-stu-id="f44d4-164">Instead, you get the harmless page in Figure 3.</span></span>

<span data-ttu-id="f44d4-165">[![ataku w języku JavaScript](preventing-javascript-injection-attacks-cs/_static/image8.png)](preventing-javascript-injection-attacks-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f44d4-165">[![Defeated JavaScript Attack](preventing-javascript-injection-attacks-cs/_static/image8.png)](preventing-javascript-injection-attacks-cs/_static/image7.png)</span></span>

<span data-ttu-id="f44d4-166">**Ilustracja 03**: atak spowodowany przez sprawność języka JavaScript ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](preventing-javascript-injection-attacks-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="f44d4-166">**Figure 03**: Defeated JavaScript Attack ([Click to view full-size image](preventing-javascript-injection-attacks-cs/_static/image9.png))</span></span>

<span data-ttu-id="f44d4-167">Zwróć uwagę, że w widoku `Index` na liście 3 jest zaszyfrowana tylko wartość `feedback.Message`.</span><span class="sxs-lookup"><span data-stu-id="f44d4-167">Notice that in the `Index` view in Listing 3 only the value of `feedback.Message` is encoded.</span></span> <span data-ttu-id="f44d4-168">Wartość `feedback.EntryDate` nie jest zaszyfrowana.</span><span class="sxs-lookup"><span data-stu-id="f44d4-168">The value of `feedback.EntryDate` is not encoded.</span></span> <span data-ttu-id="f44d4-169">Wystarczy zakodować dane wprowadzone przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f44d4-169">You only need to encode data entered by a user.</span></span> <span data-ttu-id="f44d4-170">Ponieważ wartość EntryDate została wygenerowana w kontrolerze, nie musisz kodować kodu HTML tej wartości.</span><span class="sxs-lookup"><span data-stu-id="f44d4-170">Because the value of EntryDate was generated in the controller, you don't need to HTML encode this value.</span></span>

## <a name="approach-2-html-encode-in-the-controller"></a><span data-ttu-id="f44d4-171">Podejście #2: kodowanie HTML w kontrolerze</span><span class="sxs-lookup"><span data-stu-id="f44d4-171">Approach #2: HTML Encode in the Controller</span></span>

<span data-ttu-id="f44d4-172">Zamiast danych kodowania HTML podczas wyświetlania danych w widoku, można kodować dane HTML bezpośrednio przed przesłaniem danych do bazy danych programu.</span><span class="sxs-lookup"><span data-stu-id="f44d4-172">Instead of HTML encoding data when you display the data in a view, you can HTML encode the data just before you submit the data to the database.</span></span> <span data-ttu-id="f44d4-173">Drugie podejście jest podejmowane w przypadku `controller` na liście 4.</span><span class="sxs-lookup"><span data-stu-id="f44d4-173">This second approach is taken in the case of the `controller` in Listing 4.</span></span>

<span data-ttu-id="f44d4-174">**Lista 4 — `HomeController.cs` (kodowanie HTML)**</span><span class="sxs-lookup"><span data-stu-id="f44d4-174">**Listing 4 – `HomeController.cs` (HTML Encoded)**</span></span>

[!code-csharp[Main](preventing-javascript-injection-attacks-cs/samples/sample6.cs)]

<span data-ttu-id="f44d4-175">Zwróć uwagę, że wartość komunikatu jest zakodowana w formacie HTML przed przesłaniem wartości do bazy danych w ramach akcji `Create()`.</span><span class="sxs-lookup"><span data-stu-id="f44d4-175">Notice that the value of Message is HTML encoded before the value is submitted to the database within the `Create()` action.</span></span> <span data-ttu-id="f44d4-176">Gdy komunikat jest ponownie wyświetlany w widoku, komunikat jest zakodowany w formacie HTML i żaden kod JavaScript wprowadzony w komunikacie nie jest wykonywany.</span><span class="sxs-lookup"><span data-stu-id="f44d4-176">When the Message is redisplayed in the view, the Message is HTML encoded and any JavaScript injected in the Message is not executed.</span></span>

<span data-ttu-id="f44d4-177">Zwykle należy preferować pierwsze podejście omówione w tym samouczku w porównaniu z tym drugim podejściem.</span><span class="sxs-lookup"><span data-stu-id="f44d4-177">Typically, you should favor the first approach discussed in this tutorial over this second approach.</span></span> <span data-ttu-id="f44d4-178">Problem z tym drugim podejściem polega na tym, że dane zakodowane w formacie HTML są kodowane w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="f44d4-178">The problem with this second approach is that you end up with HTML encoded data in your database.</span></span> <span data-ttu-id="f44d4-179">Innymi słowy, dane bazy danych są 'dirtied za pomocą zabawnych znaków.</span><span class="sxs-lookup"><span data-stu-id="f44d4-179">In other words, your database data is dirtied with funny looking characters.</span></span>

<span data-ttu-id="f44d4-180">Dlaczego to zły?</span><span class="sxs-lookup"><span data-stu-id="f44d4-180">Why is this bad?</span></span> <span data-ttu-id="f44d4-181">Jeśli kiedykolwiek zajdzie potrzeba wyświetlenia danych bazy danych znajdujących się poza stroną sieci Web, wystąpią problemy.</span><span class="sxs-lookup"><span data-stu-id="f44d4-181">If you ever need to display the database data in something other than a web page, then you will have problems.</span></span> <span data-ttu-id="f44d4-182">Na przykład nie można już łatwo wyświetlać danych w aplikacji Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="f44d4-182">For example, you can no longer easily display the data in a Windows Forms application.</span></span>

## <a name="summary"></a><span data-ttu-id="f44d4-183">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="f44d4-183">Summary</span></span>

<span data-ttu-id="f44d4-184">Celem tego samouczka było zascarenie się z potencjalnym atakiem z użyciem kodu JavaScript.</span><span class="sxs-lookup"><span data-stu-id="f44d4-184">The purpose of this tutorial was to scare you about the prospect of a JavaScript injection attack.</span></span> <span data-ttu-id="f44d4-185">W tym samouczku omówiono dwie podejścia do obrony aplikacji ASP.NET MVC przed atakami polegającymi na iniekcji kodu JavaScript: możesz kodować HTML dane przesłane przez użytkownika w widoku lub można kodować HTML dane przesyłane przez użytkownika w kontrolerze.</span><span class="sxs-lookup"><span data-stu-id="f44d4-185">This tutorial discussed two approaches for defending your ASP.NET MVC applications against JavaScript injection attacks: you can either HTML encode user submitted data in the view or you can HTML encode user submitted data in the controller.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f44d4-186">[Poprzednie](authenticating-users-with-windows-authentication-cs.md)
> [dalej](authenticating-users-with-forms-authentication-vb.md)</span><span class="sxs-lookup"><span data-stu-id="f44d4-186">[Previous](authenticating-users-with-windows-authentication-cs.md)
[Next](authenticating-users-with-forms-authentication-vb.md)</span></span>

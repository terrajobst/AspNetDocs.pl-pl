---
uid: mvc/overview/performance/bundling-and-minification
title: Dzielenie i Minifikacja | Microsoft Docs
author: Rick-Anderson
description: Tworzenie i minifikacja to dwie techniki, których można użyć w ASP.NET 4,5, aby zwiększyć czas ładowania żądania. Przydzielenie i minifikacja zwiększa czas ładowania przez Reducin...
ms.author: riande
ms.date: 08/23/2012
ms.assetid: 5894dc13-5d45-4dad-8096-136499120f1d
msc.legacyurl: /mvc/overview/performance/bundling-and-minification
msc.type: authoredcontent
ms.openlocfilehash: 61bfe5dbac04b57e1461183b66ead2f01fe0734c
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/06/2020
ms.locfileid: "78538599"
---
# <a name="bundling-and-minification"></a><span data-ttu-id="09122-104">Tworzenie pakietów i minimalizowanie</span><span class="sxs-lookup"><span data-stu-id="09122-104">Bundling and Minification</span></span>

<span data-ttu-id="09122-105">Autor [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="09122-105">by [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

> <span data-ttu-id="09122-106">Tworzenie i minifikacja to dwie techniki, których można użyć w ASP.NET 4,5, aby zwiększyć czas ładowania żądania.</span><span class="sxs-lookup"><span data-stu-id="09122-106">Bundling and minification are two techniques you can use in ASP.NET 4.5 to improve request load time.</span></span> <span data-ttu-id="09122-107">Przydzielenie i minifikacja skraca czas ładowania przez zredukowanie liczby żądań do serwera i zmniejszenie rozmiaru żądanych zasobów (takich jak CSS i JavaScript).</span><span class="sxs-lookup"><span data-stu-id="09122-107">Bundling and minification improves load time by reducing the number of requests to the server and reducing the size of requested assets (such as CSS and JavaScript.)</span></span>

<span data-ttu-id="09122-108">Większość aktualnie poważniejszych przeglądarek ogranicza liczbę [jednoczesnych połączeń](http://www.browserscope.org/?category=network) każdej nazwy hosta do sześciu.</span><span class="sxs-lookup"><span data-stu-id="09122-108">Most of the current major browsers limit the number of [simultaneous connections](http://www.browserscope.org/?category=network) per each hostname to six.</span></span> <span data-ttu-id="09122-109">Oznacza to, że podczas przetwarzania sześciu żądań dodatkowe żądania dotyczące zasobów na hoście będą umieszczane w kolejce przez przeglądarkę.</span><span class="sxs-lookup"><span data-stu-id="09122-109">That means that while six requests are being processed, additional requests for assets on a host will be queued by the browser.</span></span> <span data-ttu-id="09122-110">Na poniższej ilustracji znajdują się karty sieciowe narzędzi deweloperskich programu IE, które są wymagane przez widok informacje aplikacji przykładowej.</span><span class="sxs-lookup"><span data-stu-id="09122-110">In the image below, the IE F12 developer tools network tabs shows the timing for assets required by the About view of a sample application.</span></span>

![B/M](bundling-and-minification/_static/image1.png)

<span data-ttu-id="09122-112">Szare paski pokazują czas umieszczenia żądania w kolejce przez przeglądarkę, oczekując na sześć limitów połączeń.</span><span class="sxs-lookup"><span data-stu-id="09122-112">The gray bars show the time the request is queued by the browser waiting on the six connection limit.</span></span> <span data-ttu-id="09122-113">Żółty pasek to czas żądania do pierwszego bajtu, czyli czas potrzebny na wysłanie żądania i odebranie pierwszej odpowiedzi z serwera.</span><span class="sxs-lookup"><span data-stu-id="09122-113">The yellow bar is the request time to first byte, that is, the time taken to send the request and receive the first response from the server.</span></span> <span data-ttu-id="09122-114">Niebieskie słupki przedstawiają czas potrzebny na odebranie danych odpowiedzi z serwera.</span><span class="sxs-lookup"><span data-stu-id="09122-114">The blue bars show the time taken to receive the response data from the server.</span></span> <span data-ttu-id="09122-115">Możesz kliknąć dwukrotnie element zawartości, aby uzyskać szczegółowe informacje o chronometrażu.</span><span class="sxs-lookup"><span data-stu-id="09122-115">You can double-click on an asset to get detailed timing information.</span></span> <span data-ttu-id="09122-116">Na przykład na poniższym obrazie przedstawiono szczegóły czasu ładowania pliku */scripts/MyScripts/JavaScript6.js* .</span><span class="sxs-lookup"><span data-stu-id="09122-116">For example, the following image shows the timing details for loading the */Scripts/MyScripts/JavaScript6.js* file.</span></span>

![](bundling-and-minification/_static/image2.png)

<span data-ttu-id="09122-117">Na powyższym obrazie przedstawiono zdarzenie **uruchomienia** , które zawiera czas, w którym żądanie zostało umieszczone w kolejce z powodu ograniczenia liczby jednoczesnych połączeń.</span><span class="sxs-lookup"><span data-stu-id="09122-117">The preceding image shows the **Start** event, which gives the time the request was queued because of the browser limit the number of simultaneous connections.</span></span> <span data-ttu-id="09122-118">W takim przypadku żądanie zostało umieszczone w kolejce przez 46 milisekund, czeka na zakończenie innego żądania.</span><span class="sxs-lookup"><span data-stu-id="09122-118">In this case, the request was queued for 46 milliseconds waiting for another request to complete.</span></span>

## <a name="bundling"></a><span data-ttu-id="09122-119">Tworzenia pakietów</span><span class="sxs-lookup"><span data-stu-id="09122-119">Bundling</span></span>

<span data-ttu-id="09122-120">Zgrupowanie to nowa funkcja w programie ASP.NET 4,5, która ułatwia łączenie wielu plików w jeden plik i tworzenie ich.</span><span class="sxs-lookup"><span data-stu-id="09122-120">Bundling is a new feature in ASP.NET 4.5 that makes it easy to combine or bundle multiple files into a single file.</span></span> <span data-ttu-id="09122-121">Można tworzyć arkusze CSS i JavaScript oraz inne pakiety.</span><span class="sxs-lookup"><span data-stu-id="09122-121">You can create CSS, JavaScript and other bundles.</span></span> <span data-ttu-id="09122-122">Mniejsza liczba plików oznacza mniejszą liczbę żądań HTTP i może zwiększyć wydajność pierwszej strony.</span><span class="sxs-lookup"><span data-stu-id="09122-122">Fewer files means fewer HTTP requests and that can improve first page load performance.</span></span>

<span data-ttu-id="09122-123">Na poniższej ilustracji przedstawiono ten sam widok chronometrażu wyświetlanego poprzednio, ale tym razem z włączonym dzieleniem i minifikacja.</span><span class="sxs-lookup"><span data-stu-id="09122-123">The following image shows the same timing view of the About view shown previously, but this time with bundling and minification enabled.</span></span>

![](bundling-and-minification/_static/image3.png)

## <a name="minification"></a><span data-ttu-id="09122-124">Minifikacja</span><span class="sxs-lookup"><span data-stu-id="09122-124">Minification</span></span>

<span data-ttu-id="09122-125">Minifikacja wykonuje wiele różnych optymalizacji kodu do skryptów lub CSS, takich jak usuwanie zbędnych białych znaków i komentarzy oraz skracanie nazw zmiennych do jednego znaku.</span><span class="sxs-lookup"><span data-stu-id="09122-125">Minification performs a variety of different code optimizations to scripts or css, such as removing unnecessary white space and comments and shortening variable names to one character.</span></span> <span data-ttu-id="09122-126">Weź pod uwagę następującą funkcję języka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="09122-126">Consider the following JavaScript function.</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample1.js)]

<span data-ttu-id="09122-127">Po minifikacja funkcja zostaje zredukowana do następujących:</span><span class="sxs-lookup"><span data-stu-id="09122-127">After minification, the function is reduced to the following:</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample2.js)]

<span data-ttu-id="09122-128">Oprócz usuwania komentarzy i niepotrzebnych białych znaków, nazwy następujących parametrów i zmiennych zostały zmienione (skrócone) w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="09122-128">In addition to removing the comments and unnecessary whitespace, the following parameters and variable names were renamed (shortened) as follows:</span></span>

| <span data-ttu-id="09122-129">**Oryginał**</span><span class="sxs-lookup"><span data-stu-id="09122-129">**Original**</span></span> | <span data-ttu-id="09122-130">**Zmiany**</span><span class="sxs-lookup"><span data-stu-id="09122-130">**Renamed**</span></span> |
| --- | --- |
| <span data-ttu-id="09122-131">imageTagAndImageID</span><span class="sxs-lookup"><span data-stu-id="09122-131">imageTagAndImageID</span></span> | <span data-ttu-id="09122-132">n</span><span class="sxs-lookup"><span data-stu-id="09122-132">n</span></span> |
| <span data-ttu-id="09122-133">imageContext</span><span class="sxs-lookup"><span data-stu-id="09122-133">imageContext</span></span> | <span data-ttu-id="09122-134">t</span><span class="sxs-lookup"><span data-stu-id="09122-134">t</span></span> |
| <span data-ttu-id="09122-135">imageElement</span><span class="sxs-lookup"><span data-stu-id="09122-135">imageElement</span></span> | <span data-ttu-id="09122-136">mogę</span><span class="sxs-lookup"><span data-stu-id="09122-136">i</span></span> |

## <a name="impact-of-bundling-and-minification"></a><span data-ttu-id="09122-137">Wpływ tworzenia i Minifikacja</span><span class="sxs-lookup"><span data-stu-id="09122-137">Impact of Bundling and Minification</span></span>

<span data-ttu-id="09122-138">W poniższej tabeli przedstawiono kilka ważnych różnic między wyświetlaniem wszystkich zasobów osobno i użyciem grupowania i minifikacja (B/M) w programie przykładowym.</span><span class="sxs-lookup"><span data-stu-id="09122-138">The following table shows several important differences between listing all the assets individually and using bundling and minification (B/M) in the sample program.</span></span>

|  | <span data-ttu-id="09122-139">**Przy użyciu B/M**</span><span class="sxs-lookup"><span data-stu-id="09122-139">**Using B/M**</span></span> | <span data-ttu-id="09122-140">**Bez B/M**</span><span class="sxs-lookup"><span data-stu-id="09122-140">**Without B/M**</span></span> | <span data-ttu-id="09122-141">**Zmień**</span><span class="sxs-lookup"><span data-stu-id="09122-141">**Change**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="09122-142">**Żądania plików**</span><span class="sxs-lookup"><span data-stu-id="09122-142">**File Requests**</span></span> | <span data-ttu-id="09122-143">9</span><span class="sxs-lookup"><span data-stu-id="09122-143">9</span></span> | <span data-ttu-id="09122-144">34</span><span class="sxs-lookup"><span data-stu-id="09122-144">34</span></span> | <span data-ttu-id="09122-145">256%</span><span class="sxs-lookup"><span data-stu-id="09122-145">256%</span></span> |
| <span data-ttu-id="09122-146">**Wysłano KB**</span><span class="sxs-lookup"><span data-stu-id="09122-146">**KB Sent**</span></span> | <span data-ttu-id="09122-147">3.26</span><span class="sxs-lookup"><span data-stu-id="09122-147">3.26</span></span> | <span data-ttu-id="09122-148">11.92</span><span class="sxs-lookup"><span data-stu-id="09122-148">11.92</span></span> | <span data-ttu-id="09122-149">266%</span><span class="sxs-lookup"><span data-stu-id="09122-149">266%</span></span> |
| <span data-ttu-id="09122-150">**Odebrano KB**</span><span class="sxs-lookup"><span data-stu-id="09122-150">**KB Received**</span></span> | <span data-ttu-id="09122-151">388.51</span><span class="sxs-lookup"><span data-stu-id="09122-151">388.51</span></span> | <span data-ttu-id="09122-152">530</span><span class="sxs-lookup"><span data-stu-id="09122-152">530</span></span> | <span data-ttu-id="09122-153">36%</span><span class="sxs-lookup"><span data-stu-id="09122-153">36%</span></span> |
| <span data-ttu-id="09122-154">**Czas ładowania**</span><span class="sxs-lookup"><span data-stu-id="09122-154">**Load Time**</span></span> | <span data-ttu-id="09122-155">510 MS</span><span class="sxs-lookup"><span data-stu-id="09122-155">510 MS</span></span> | <span data-ttu-id="09122-156">780 MS</span><span class="sxs-lookup"><span data-stu-id="09122-156">780 MS</span></span> | <span data-ttu-id="09122-157">53%</span><span class="sxs-lookup"><span data-stu-id="09122-157">53%</span></span> |

<span data-ttu-id="09122-158">Wysłane bajty mają znaczącą redukcję, ponieważ przeglądarki są w pełni pełne, z nagłówkami HTTP, które są stosowane na żądaniach.</span><span class="sxs-lookup"><span data-stu-id="09122-158">The bytes sent had a significant reduction with bundling as browsers are fairly verbose with the HTTP headers they apply on requests.</span></span> <span data-ttu-id="09122-159">Redukcja odebranych bajtów nie jest tak duża, ponieważ największe pliki (*skrypty\\jQuery-UI-1.8.11. min. js* i *scripts\\jQuery-1.7.1. min. js*) są już zminimalizowanego.</span><span class="sxs-lookup"><span data-stu-id="09122-159">The received bytes reduction is not as large because the largest files (*Scripts\\jquery-ui-1.8.11.min.js* and *Scripts\\jquery-1.7.1.min.js*) are already minified.</span></span> <span data-ttu-id="09122-160">Uwaga: chronometraż dla przykładowego programu użył narzędzia [programu Fiddler](http://www.fiddler2.com/fiddler2/) w celu symulowania wolnej sieci.</span><span class="sxs-lookup"><span data-stu-id="09122-160">Note: The timings on the sample program used the [Fiddler](http://www.fiddler2.com/fiddler2/) tool to simulate a slow network.</span></span> <span data-ttu-id="09122-161">(Z menu **reguły** programu Fiddler wybierz pozycję **wydajność** , a następnie **Symuluj szybkość modemów**).</span><span class="sxs-lookup"><span data-stu-id="09122-161">(From the Fiddler **Rules** menu, select **Performance** then **Simulate Modem Speeds**.)</span></span>

## <a name="debugging-bundled-and-minified-javascript"></a><span data-ttu-id="09122-162">Debugowanie powiązane i zminimalizowanego JavaScript</span><span class="sxs-lookup"><span data-stu-id="09122-162">Debugging Bundled and Minified JavaScript</span></span>

<span data-ttu-id="09122-163">Debugowanie kodu JavaScript w środowisku deweloperskim (gdzie [element kompilacji](https://msdn.microsoft.com/library/s10awwz0.aspx) w pliku *Web. config* jest ustawiony na `debug="true"`), ponieważ pliki JavaScript nie są powiązane lub zminimalizowanego.</span><span class="sxs-lookup"><span data-stu-id="09122-163">It's easy to debug your JavaScript in a development environment (where the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx) in the *Web.config* file is set to `debug="true"` ) because the JavaScript files are not bundled or minified.</span></span> <span data-ttu-id="09122-164">Możesz również debugować kompilację wydania, w której pliki JavaScript są powiązane i zminimalizowanego.</span><span class="sxs-lookup"><span data-stu-id="09122-164">You can also debug a release build where your JavaScript files are bundled and minified.</span></span> <span data-ttu-id="09122-165">Korzystając z narzędzi deweloperskich programu IE F12, można debugować funkcję języka JavaScript zawartą w pakiecie zminimalizowanego przy użyciu następującej metody:</span><span class="sxs-lookup"><span data-stu-id="09122-165">Using the IE F12 developer tools, you debug a JavaScript function included in a minified bundle using the following approach:</span></span>

1. <span data-ttu-id="09122-166">Wybierz kartę **skrypt** , a następnie wybierz przycisk **Rozpocznij debugowanie** .</span><span class="sxs-lookup"><span data-stu-id="09122-166">Select the **Script** tab and then select the **Start debugging** button.</span></span>
2. <span data-ttu-id="09122-167">Wybierz pakiet zawierający funkcję języka JavaScript, która ma być debugowana przy użyciu przycisku elementy zawartości.</span><span class="sxs-lookup"><span data-stu-id="09122-167">Select the bundle containing the JavaScript function you want to debug using the assets button.</span></span>  
    ![](bundling-and-minification/_static/image4.png)
3. <span data-ttu-id="09122-168">Sformatuj zminimalizowanego JavaScript, wybierając **przycisk konfiguracji** ![](bundling-and-minification/_static/image5.png), a następnie wybierając **Format JavaScript**.</span><span class="sxs-lookup"><span data-stu-id="09122-168">Format the minified JavaScript by selecting the **Configuration button** ![](bundling-and-minification/_static/image5.png), and then selecting **Format JavaScript**.</span></span>
4. <span data-ttu-id="09122-169">W polu wejściowym **skrypt wyszukiwania** wybierz nazwę funkcji, którą chcesz debugować.</span><span class="sxs-lookup"><span data-stu-id="09122-169">In the **Search Script** input box, select the name of the function you want to debug.</span></span> <span data-ttu-id="09122-170">Na poniższej ilustracji **AddAltToImg** został wprowadzony w polu wejściowym **skryptu wyszukiwania** .</span><span class="sxs-lookup"><span data-stu-id="09122-170">In the following image, **AddAltToImg** was entered in the **Search Script** input box.</span></span>  
    ![](bundling-and-minification/_static/image6.png)

<span data-ttu-id="09122-171">Aby uzyskać więcej informacji na temat debugowania za pomocą narzędzi deweloperskich F12, zobacz artykuł MSDN [przy użyciu narzędzia deweloperskie F12, aby debugować błędy JavaScript](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="09122-171">For more information on debugging with the F12 developer tools, see the MSDN article [Using the F12 Developer Tools to Debug JavaScript Errors](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span></span>

## <a name="controlling-bundling-and-minification"></a><span data-ttu-id="09122-172">Kontrolowanie grupowania i Minifikacja</span><span class="sxs-lookup"><span data-stu-id="09122-172">Controlling Bundling and Minification</span></span>

<span data-ttu-id="09122-173">Dzielenie i minifikacja jest włączone lub wyłączone przez ustawienie wartości atrybutu Debug w [elemencie compilation](https://msdn.microsoft.com/library/s10awwz0.aspx) w pliku *Web. config* .</span><span class="sxs-lookup"><span data-stu-id="09122-173">Bundling and minification is enabled or disabled by setting the value of the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file.</span></span> <span data-ttu-id="09122-174">W poniższym kodzie XML `debug` ma ustawioną wartość true, więc dzielenie i minifikacja jest wyłączone.</span><span class="sxs-lookup"><span data-stu-id="09122-174">In the following XML, `debug` is set to true so bundling and minification is disabled.</span></span>

[!code-xml[Main](bundling-and-minification/samples/sample3.xml?highlight=2)]

<span data-ttu-id="09122-175">Aby włączyć grupowania i minifikacja, ustaw wartość `debug` na "false".</span><span class="sxs-lookup"><span data-stu-id="09122-175">To enable bundling and minification, set the `debug` value to "false".</span></span> <span data-ttu-id="09122-176">Ustawienie *Web. config* można zastąpić właściwością `EnableOptimizations` klasy `BundleTable`.</span><span class="sxs-lookup"><span data-stu-id="09122-176">You can override the *Web.config* setting with the `EnableOptimizations` property on the `BundleTable` class.</span></span> <span data-ttu-id="09122-177">Poniższy kod umożliwia zgrupowanie i minifikacja oraz zastępuje wszystkie ustawienia w pliku *Web. config* .</span><span class="sxs-lookup"><span data-stu-id="09122-177">The following code enables bundling and minification and overrides any setting in the *Web.config* file.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample4.cs?highlight=7)]

> [!NOTE]
> <span data-ttu-id="09122-178">Jeśli `EnableOptimizations` jest `true` lub atrybut Debug w [elemencie compilation](https://msdn.microsoft.com/library/s10awwz0.aspx) w pliku *Web. config* jest ustawiony na `false`, pliki nie będą powiązane ani zminimalizowanego.</span><span class="sxs-lookup"><span data-stu-id="09122-178">Unless `EnableOptimizations` is `true` or the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file is set to `false`, files will not be bundled or minified.</span></span> <span data-ttu-id="09122-179">Ponadto, minimalna wersja plików nie zostanie użyta, zostaną wybrane pełne wersje debugowania.</span><span class="sxs-lookup"><span data-stu-id="09122-179">Additionally, the .min version of files will not be used, the full debug versions will be selected.</span></span> <span data-ttu-id="09122-180">`EnableOptimizations` przesłania atrybut Debug w [elemencie compilation](https://msdn.microsoft.com/library/s10awwz0.aspx) w pliku *Web. config*</span><span class="sxs-lookup"><span data-stu-id="09122-180">`EnableOptimizations` overrides the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file</span></span>

## <a name="using-bundling-and-minification-with-aspnet-web-forms-and-web-pages"></a><span data-ttu-id="09122-181">Korzystanie z funkcji grupowania i Minifikacja z ASP.NET Web Forms i stronami sieci Web</span><span class="sxs-lookup"><span data-stu-id="09122-181">Using Bundling and Minification with ASP.NET Web Forms and Web Pages</span></span>

- <span data-ttu-id="09122-182">W przypadku stron sieci Web zapoznaj się z wpisem w blogu [Dodawanie optymalizacji sieci Web do witryny Web Pages](https://docs.microsoft.com/archive/blogs/rickandy/adding-web-optimization-to-a-web-pages-site).</span><span class="sxs-lookup"><span data-stu-id="09122-182">For Web Pages, see the blog entry [Adding Web Optimization to a Web Pages Site](https://docs.microsoft.com/archive/blogs/rickandy/adding-web-optimization-to-a-web-pages-site).</span></span>
- <span data-ttu-id="09122-183">W przypadku formularzy sieci Web zapoznaj się z wpisem w blogu [Dodawanie grupowania i minifikacja do formularzy sieci Web](https://docs.microsoft.com/archive/blogs/rickandy/adding-bundling-and-minification-to-web-forms).</span><span class="sxs-lookup"><span data-stu-id="09122-183">For Web Forms, see the blog entry [Adding Bundling and Minification to Web Forms](https://docs.microsoft.com/archive/blogs/rickandy/adding-bundling-and-minification-to-web-forms).</span></span>

## <a name="using-bundling-and-minification-with-aspnet-mvc"></a><span data-ttu-id="09122-184">Korzystanie z grupowania i Minifikacja z ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="09122-184">Using Bundling and Minification with ASP.NET MVC</span></span>

<span data-ttu-id="09122-185">W tej sekcji utworzymy projekt ASP.NET MVC, który będzie badany i minifikacja.</span><span class="sxs-lookup"><span data-stu-id="09122-185">In this section we will create an ASP.NET MVC project to examine bundling and minification.</span></span> <span data-ttu-id="09122-186">Najpierw utwórz nowy projekt internetowy ASP.NET MVC o nazwie **MvcBM** bez zmiany wartości domyślnych.</span><span class="sxs-lookup"><span data-stu-id="09122-186">First, create a new ASP.NET MVC internet project named **MvcBM** without changing any of the defaults.</span></span>

<span data-ttu-id="09122-187">Otwórz *\\aplikacji \_uruchom\\plik BundleConfig.cs* i Przeanalizuj metodę `RegisterBundles`, która służy do tworzenia, rejestrowania i konfigurowania pakietów.</span><span class="sxs-lookup"><span data-stu-id="09122-187">Open the *App\\\_Start\\BundleConfig.cs* file and examine the `RegisterBundles` method which is used to create, register and configure bundles.</span></span> <span data-ttu-id="09122-188">Poniższy kod przedstawia część metody `RegisterBundles`.</span><span class="sxs-lookup"><span data-stu-id="09122-188">The following code shows a portion of the `RegisterBundles` method.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample5.cs)]

<span data-ttu-id="09122-189">Poprzedni kod tworzy nowy pakiet JavaScript o nazwie *~/bundles/jQuery* , który zawiera wszystkie odpowiednie (to jest Debug lub zminimalizowanego, ale nie. *vsdoc*) pliki w folderze *skryptów* , które pasują do ciągu symbolu wieloznacznego "~/scripts/jQuery-{Version}.js".</span><span class="sxs-lookup"><span data-stu-id="09122-189">The  preceding code creates a new JavaScript bundle named *~/bundles/jquery* that includes all the appropriate (that is debug or minified but not .*vsdoc*) files in the *Scripts* folder that match the wild card string "~/Scripts/jquery-{version}.js".</span></span> <span data-ttu-id="09122-190">W przypadku ASP.NET MVC 4 oznacza to, że z konfiguracją debugowania plik *jQuery-1.7.1. js* zostanie dodany do pakietu.</span><span class="sxs-lookup"><span data-stu-id="09122-190">For ASP.NET MVC 4, this means with a debug configuration, the file *jquery-1.7.1.js* will be added to the bundle.</span></span> <span data-ttu-id="09122-191">W konfiguracji wydania zostanie dodany *jQuery-1.7.1. min. js* .</span><span class="sxs-lookup"><span data-stu-id="09122-191">In a release configuration, *jquery-1.7.1.min.js* will be added.</span></span> <span data-ttu-id="09122-192">Struktura tworzenia pakietów jest następująca:</span><span class="sxs-lookup"><span data-stu-id="09122-192">The bundling framework follows several common conventions such as:</span></span>

- <span data-ttu-id="09122-193">Wybieraj plik ". min" do wydania, gdy istnieje *FileX. min. js* i *FileX. js* .</span><span class="sxs-lookup"><span data-stu-id="09122-193">Selecting ".min" file for release when *FileX.min.js* and *FileX.js* exist.</span></span>
- <span data-ttu-id="09122-194">Wybieranie wersji nieujemnej na potrzeby debugowania.</span><span class="sxs-lookup"><span data-stu-id="09122-194">Selecting the non ".min" version for debug.</span></span>
- <span data-ttu-id="09122-195">Ignorowanie plików "-vsdoc" (takich jak *jQuery-1.7.1-vsdoc. js*), które są używane tylko przez funkcję IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="09122-195">Ignoring "-vsdoc" files (such as *jquery-1.7.1-vsdoc.js*), which are used only by IntelliSense.</span></span>

<span data-ttu-id="09122-196">Przedstawione powyżej `{version}` wieloznacznego dopasowania służy do automatycznego tworzenia pakietu jQuery z odpowiednią wersją jQuery w folderze *skryptów* .</span><span class="sxs-lookup"><span data-stu-id="09122-196">The `{version}` wild card matching shown above is used to automatically create a jQuery bundle with the appropriate version of jQuery in your *Scripts* folder.</span></span> <span data-ttu-id="09122-197">W tym przykładzie korzystanie z symboli wieloznacznych zapewnia następujące korzyści:</span><span class="sxs-lookup"><span data-stu-id="09122-197">In this example, using a wild card provides the following benefits:</span></span>

- <span data-ttu-id="09122-198">Umożliwia korzystanie z narzędzia NuGet do aktualizowania do nowszej wersji jQuery bez zmiany powyższego kodu grupowania lub odwołań jQuery na stronach widoku.</span><span class="sxs-lookup"><span data-stu-id="09122-198">Allows you to use NuGet to update to a newer jQuery version without changing the preceding bundling code or jQuery references in your view pages.</span></span>
- <span data-ttu-id="09122-199">Automatycznie wybiera pełną wersję dla konfiguracji debugowania i wersję ". min" dla kompilacji wydań.</span><span class="sxs-lookup"><span data-stu-id="09122-199">Automatically selects the full version for debug configurations and the ".min" version for release builds.</span></span>

## <a name="using-a-cdn"></a><span data-ttu-id="09122-200">Korzystanie z sieci CDN</span><span class="sxs-lookup"><span data-stu-id="09122-200">Using a CDN</span></span>

 <span data-ttu-id="09122-201">W poniższym kodzie jest zastępowany lokalny pakiet jQuery z pakietem CDN jQuery.</span><span class="sxs-lookup"><span data-stu-id="09122-201">The follow code replaces the local jQuery bundle with a CDN jQuery bundle.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample6.cs)]

<span data-ttu-id="09122-202">W powyższym kodzie usługa jQuery zostanie zażądana z sieci CDN w trybie wydania, a wersja debugowana jQuery zostanie pobrana lokalnie w trybie debugowania.</span><span class="sxs-lookup"><span data-stu-id="09122-202">In the code above, jQuery will be requested from the CDN while in release mode and the debug version of jQuery will be fetched locally in debug mode.</span></span> <span data-ttu-id="09122-203">W przypadku korzystania z sieci CDN należy mieć mechanizm rezerwowy w przypadku niepowodzenia żądania sieci CDN.</span><span class="sxs-lookup"><span data-stu-id="09122-203">When using a CDN, you should have a fallback mechanism in case the CDN request fails.</span></span> <span data-ttu-id="09122-204">Poniższy fragment znacznika z końca pliku układu pokazuje skrypt dodany do żądania jQuery w przypadku niepowodzenia sieci CDN.</span><span class="sxs-lookup"><span data-stu-id="09122-204">The following markup fragment from the end of the layout file shows script added to request jQuery should the CDN fail.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample7.cshtml?highlight=5-13)]

## <a name="creating-a-bundle"></a><span data-ttu-id="09122-205">Tworzenie pakietu</span><span class="sxs-lookup"><span data-stu-id="09122-205">Creating a Bundle</span></span>

<span data-ttu-id="09122-206">Klasa [pakietu](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) `Include` Metoda przyjmuje tablicę ciągów, gdzie każdy ciąg jest ścieżką wirtualną do zasobu.</span><span class="sxs-lookup"><span data-stu-id="09122-206">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `Include` method takes an array of strings, where each string is a virtual path to resource.</span></span> <span data-ttu-id="09122-207">Poniższy kod z metody `RegisterBundles` w *aplikacji\\\_uruchom\\plik BundleConfig.cs* pokazuje, jak wiele plików jest dodawanych do pakietu:</span><span class="sxs-lookup"><span data-stu-id="09122-207">The following code from the `RegisterBundles` method in the *App\\\_Start\\BundleConfig.cs* file shows how multiple files are added to a bundle:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample8.cs)]

<span data-ttu-id="09122-208">W celu dodania wszystkich plików w katalogu (i opcjonalnie wszystkich podkatalogów), które pasują do wzorca wyszukiwania, podano metodę `IncludeDirectory` klasy [pakietu](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) .</span><span class="sxs-lookup"><span data-stu-id="09122-208">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` method is provided to add all the files in a directory (and optionally all subdirectories) which match a search pattern.</span></span> <span data-ttu-id="09122-209">Poniżej przedstawiono klasę [pakietu](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) `IncludeDirectory` interfejs API:</span><span class="sxs-lookup"><span data-stu-id="09122-209">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` API is shown below:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample9.cs)]

<span data-ttu-id="09122-210">Pakiety są przywoływane w widokach za pomocą metody Render (`Styles.Render` dla CSS i `Scripts.Render` dla języka JavaScript).</span><span class="sxs-lookup"><span data-stu-id="09122-210">Bundles are referenced in views using the Render method, (`Styles.Render` for CSS and `Scripts.Render` for JavaScript).</span></span> <span data-ttu-id="09122-211">Następujące znaczniki w *widokach\\udostępnione\\\_Layout. cshtml* pokazują, jak domyślny widok projektu internetowego ASP.NET odwołuje się do pakietów CSS i JavaScript.</span><span class="sxs-lookup"><span data-stu-id="09122-211">The following markup from the *Views\\Shared\\\_Layout.cshtml* file shows how the default ASP.NET internet project views reference CSS and JavaScript bundles.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample10.cshtml?highlight=5-6,11)]

<span data-ttu-id="09122-212">Zauważ, że metody renderowania pobierają tablicę ciągów, aby można było dodać wiele pakietów w jednym wierszu kodu.</span><span class="sxs-lookup"><span data-stu-id="09122-212">Notice the Render methods takes an array of strings, so you can add multiple bundles in one line of code.</span></span> <span data-ttu-id="09122-213">Zwykle chcesz użyć metod renderowania, które tworzą kod HTML wymagany do odwoływania się do elementu zawartości.</span><span class="sxs-lookup"><span data-stu-id="09122-213">You will generally want to use the Render methods which create the necessary HTML to reference the asset.</span></span> <span data-ttu-id="09122-214">Możesz użyć metody `Url`, aby wygenerować adres URL dla zasobu bez znaczników wymaganych do odwołania się do elementu zawartości.</span><span class="sxs-lookup"><span data-stu-id="09122-214">You can use the `Url` method to generate the URL to the asset without the markup needed to reference the asset.</span></span> <span data-ttu-id="09122-215">Załóżmy, że chciałeś użyć nowego atrybutu [ASYNCHRONICZNEGO](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) HTML5.</span><span class="sxs-lookup"><span data-stu-id="09122-215">Suppose you wanted to use the new HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) attribute.</span></span> <span data-ttu-id="09122-216">Poniższy kod ilustruje sposób odwoływania się do programu modernizacji przy użyciu metody `Url`.</span><span class="sxs-lookup"><span data-stu-id="09122-216">The following code shows how to reference modernizr using the `Url` method.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample11.cshtml?highlight=11)]

## <a name="using-the--wildcard-character-to-select-files"></a><span data-ttu-id="09122-217">Używanie znaku wieloznacznego "\*" do wybierania plików</span><span class="sxs-lookup"><span data-stu-id="09122-217">Using the "\*" Wildcard Character to Select Files</span></span>

<span data-ttu-id="09122-218">Ścieżka wirtualna określona w metodzie `Include` i wzorzec wyszukiwania w metodzie `IncludeDirectory` może akceptować jeden symbol wieloznaczny "\*" jako prefiks lub sufiks do w ostatnim segmencie ścieżki.</span><span class="sxs-lookup"><span data-stu-id="09122-218">The virtual path specified in the `Include` method and the search pattern in the `IncludeDirectory` method can accept one "\*" wildcard character as a prefix or suffix to in the last path segment.</span></span> <span data-ttu-id="09122-219">W ciągu wyszukiwania jest rozróżniana wielkość liter.</span><span class="sxs-lookup"><span data-stu-id="09122-219">The search string is case insensitive.</span></span> <span data-ttu-id="09122-220">Metoda `IncludeDirectory` ma opcję wyszukiwania podkatalogów.</span><span class="sxs-lookup"><span data-stu-id="09122-220">The `IncludeDirectory` method has the option of searching subdirectories.</span></span>

<span data-ttu-id="09122-221">Rozważmy projekt z następującymi plikami JavaScript:</span><span class="sxs-lookup"><span data-stu-id="09122-221">Consider a project with the following JavaScript files:</span></span>

- <span data-ttu-id="09122-222">*Skrypty\\Common\\AddAltToImg. js*</span><span class="sxs-lookup"><span data-stu-id="09122-222">*Scripts\\Common\\AddAltToImg.js*</span></span>
- <span data-ttu-id="09122-223">*Skrypty\\Common\\ToggleDiv. js*</span><span class="sxs-lookup"><span data-stu-id="09122-223">*Scripts\\Common\\ToggleDiv.js*</span></span>
- <span data-ttu-id="09122-224">*Skrypty\\Common\\ToggleImg. js*</span><span class="sxs-lookup"><span data-stu-id="09122-224">*Scripts\\Common\\ToggleImg.js*</span></span>
- <span data-ttu-id="09122-225">*Skrypty\\Common\\sub1\\ToggleLinks. js*</span><span class="sxs-lookup"><span data-stu-id="09122-225">*Scripts\\Common\\Sub1\\ToggleLinks.js*</span></span>

![imag katalogu](bundling-and-minification/_static/image7.png)

<span data-ttu-id="09122-227">W poniższej tabeli przedstawiono pliki dodane do pakietu przy użyciu symbolu wieloznacznego, jak pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="09122-227">The following table shows the files added to a bundle using the wildcard as shown:</span></span>

| <span data-ttu-id="09122-228">**Połączeń**</span><span class="sxs-lookup"><span data-stu-id="09122-228">**Call**</span></span> | <span data-ttu-id="09122-229">**Dodano pliki lub zgłoszono wyjątek**</span><span class="sxs-lookup"><span data-stu-id="09122-229">**Files Added or Exception Raised**</span></span> |
| --- | --- |
| <span data-ttu-id="09122-230">Include ("~/Scripts/Common/\*. js")</span><span class="sxs-lookup"><span data-stu-id="09122-230">Include("~/Scripts/Common/\*.js")</span></span> | <span data-ttu-id="09122-231">*AddAltToImg. js*, *ToggleDiv. js*, *ToggleImg. js*</span><span class="sxs-lookup"><span data-stu-id="09122-231">*AddAltToImg.js*, *ToggleDiv.js*, *ToggleImg.js*</span></span> |
| <span data-ttu-id="09122-232">Include ("~/Scripts/Common/T\*. js")</span><span class="sxs-lookup"><span data-stu-id="09122-232">Include("~/Scripts/Common/T\*.js")</span></span> | <span data-ttu-id="09122-233">Nieprawidłowy wyjątek wzorca.</span><span class="sxs-lookup"><span data-stu-id="09122-233">Invalid pattern exception.</span></span> <span data-ttu-id="09122-234">Symbol wieloznaczny jest dozwolony tylko dla prefiksu lub sufiksu.</span><span class="sxs-lookup"><span data-stu-id="09122-234">The wildcard character is only allowed on the prefix or suffix.</span></span> |
| <span data-ttu-id="09122-235">Include ("~/Scripts/Common/\*og.\*")</span><span class="sxs-lookup"><span data-stu-id="09122-235">Include("~/Scripts/Common/\*og.\*")</span></span> | <span data-ttu-id="09122-236">Nieprawidłowy wyjątek wzorca.</span><span class="sxs-lookup"><span data-stu-id="09122-236">Invalid pattern exception.</span></span> <span data-ttu-id="09122-237">Dozwolony jest tylko jeden znak wieloznaczny.</span><span class="sxs-lookup"><span data-stu-id="09122-237">Only one wildcard character is allowed.</span></span> |
| <span data-ttu-id="09122-238">Include ("~/Scripts/Common/T\*")</span><span class="sxs-lookup"><span data-stu-id="09122-238">Include("~/Scripts/Common/T\*")</span></span> | <span data-ttu-id="09122-239">*ToggleDiv. js*, *ToggleImg. js*</span><span class="sxs-lookup"><span data-stu-id="09122-239">*ToggleDiv.js*, *ToggleImg.js*</span></span> |
| <span data-ttu-id="09122-240">Include ("~/Scripts/Common/\*")</span><span class="sxs-lookup"><span data-stu-id="09122-240">Include("~/Scripts/Common/\*")</span></span> | <span data-ttu-id="09122-241">Nieprawidłowy wyjątek wzorca.</span><span class="sxs-lookup"><span data-stu-id="09122-241">Invalid pattern exception.</span></span> <span data-ttu-id="09122-242">Czysty segment wieloznaczny jest nieprawidłowy.</span><span class="sxs-lookup"><span data-stu-id="09122-242">A pure wildcard segment is not valid.</span></span> |
| <span data-ttu-id="09122-243">IncludeDirectory ("~/Scripts/Common", "T\*")</span><span class="sxs-lookup"><span data-stu-id="09122-243">IncludeDirectory("~/Scripts/Common", "T\*")</span></span> | <span data-ttu-id="09122-244">*ToggleDiv. js*, *ToggleImg. js*</span><span class="sxs-lookup"><span data-stu-id="09122-244">*ToggleDiv.js*, *ToggleImg.js*</span></span> |
| <span data-ttu-id="09122-245">IncludeDirectory ("~/Scripts/Common", "T\*", true)</span><span class="sxs-lookup"><span data-stu-id="09122-245">IncludeDirectory("~/Scripts/Common", "T\*", true)</span></span> | <span data-ttu-id="09122-246">*ToggleDiv. js*, *ToggleImg. js*, *ToggleLinks. js*</span><span class="sxs-lookup"><span data-stu-id="09122-246">*ToggleDiv.js*, *ToggleImg.js*, *ToggleLinks.js*</span></span> |

<span data-ttu-id="09122-247">Jawne dodanie każdego pliku do pakietu jest ogólnie preferowane w porównaniu z wieloznacznym ładowaniem plików z następujących powodów:</span><span class="sxs-lookup"><span data-stu-id="09122-247">Explicitly adding each file to a bundle is generally the preferred over wildcard loading of files for the following reasons:</span></span>

- <span data-ttu-id="09122-248">Dodawanie skryptów według symboli wieloznacznych domyślnie do ładowania ich w kolejności alfabetycznej, która zwykle nie jest to wymagane.</span><span class="sxs-lookup"><span data-stu-id="09122-248">Adding scripts by wildcard defaults to loading them in alphabetical order, which is typically not what you want.</span></span> <span data-ttu-id="09122-249">Pliki CSS i JavaScript często należy dodawać w określonym porządku (innym niż alfabetyczny).</span><span class="sxs-lookup"><span data-stu-id="09122-249">CSS and JavaScript files frequently need to be added in a specific (non-alphabetic) order.</span></span> <span data-ttu-id="09122-250">Możesz złagodzić to ryzyko poprzez dodanie niestandardowej implementacji [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) , ale jawne dodanie każdego pliku jest mniej podatne na błędy.</span><span class="sxs-lookup"><span data-stu-id="09122-250">You can mitigate this risk by adding a custom [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation, but explicitly adding each file is less error prone.</span></span> <span data-ttu-id="09122-251">Na przykład możesz dodać nowe zasoby do folderu w przyszłości, co może wymagać zmodyfikowania implementacji [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) .</span><span class="sxs-lookup"><span data-stu-id="09122-251">For example, you might add new assets to a folder in the future which might require you to modify your [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation.</span></span>
- <span data-ttu-id="09122-252">Wyświetlanie określonych plików dodanych do katalogu przy użyciu funkcji ładowania wieloznacznego może być dołączane do wszystkich widoków odwołujących się do tego pakietu.</span><span class="sxs-lookup"><span data-stu-id="09122-252">View specific files added to a directory using wild card loading can be included in all views referencing that bundle.</span></span> <span data-ttu-id="09122-253">Jeśli do pakietu zostanie dodany konkretny skrypt, może wystąpić błąd języka JavaScript w innych widokach, które odwołują się do tego pakietu.</span><span class="sxs-lookup"><span data-stu-id="09122-253">If the view specific script is added to a bundle, you may get a JavaScript error on other views that reference the bundle.</span></span>
- <span data-ttu-id="09122-254">Pliki CSS, które zaimportują inne pliki, powodują dwa razy załadowane zaimportowane pliki.</span><span class="sxs-lookup"><span data-stu-id="09122-254">CSS files that import other files result in the imported files loaded twice.</span></span> <span data-ttu-id="09122-255">Na przykład poniższy kod tworzy pakiet z większością plików CSS motywu interfejsu użytkownika jQuery załadowanych dwa razy.</span><span class="sxs-lookup"><span data-stu-id="09122-255">For example, the following code creates a bundle with most of the jQuery UI theme CSS files loaded twice.</span></span> 

    [!code-csharp[Main](bundling-and-minification/samples/sample12.cs)]

  <span data-ttu-id="09122-256">Selektor wieloznaczny "\*. css" umieszcza w każdym pliku CSS w folderze, w tym *motywy\\zawartości\\base\\jQuery. UI. ALL. css* .</span><span class="sxs-lookup"><span data-stu-id="09122-256">The wild card selector "\*.css" brings in each CSS file in the folder, including the *Content\\themes\\base\\jquery.ui.all.css* file.</span></span> <span data-ttu-id="09122-257">Plik *jQuery. UI. ALL. css* importuje inne pliki CSS.</span><span class="sxs-lookup"><span data-stu-id="09122-257">The *jquery.ui.all.css* file imports other CSS files.</span></span>

## <a name="bundle-caching"></a><span data-ttu-id="09122-258">Buforowanie zbioru</span><span class="sxs-lookup"><span data-stu-id="09122-258">Bundle Caching</span></span>

<span data-ttu-id="09122-259">Zbiory ustawiają nagłówek wygaśnięcia HTTP rok od momentu utworzenia pakietu.</span><span class="sxs-lookup"><span data-stu-id="09122-259">Bundles set the HTTP Expires Header one year from when the bundle is created.</span></span> <span data-ttu-id="09122-260">Jeśli przejdziesz do wcześniej wyświetlanej strony, programu Fiddler pokazuje, że program IE nie tworzy warunkowego żądania dla tego pakietu, czyli nie ma żądań HTTP GET od IE dla pakietów i nie zwraca odpowiedzi HTTP 304 z serwera.</span><span class="sxs-lookup"><span data-stu-id="09122-260">If you navigate to a previously viewed page, Fiddler shows IE does not make a conditional request for the bundle, that is, there are no HTTP GET requests from IE for the bundles and no HTTP 304 responses from the server.</span></span> <span data-ttu-id="09122-261">Można wymusić, aby program IE przetworzył żądanie warunkowe dla każdego pakietu z klawiszem F5 (w wyniku odpowiedzi HTTP 304 dla każdego pakietu).</span><span class="sxs-lookup"><span data-stu-id="09122-261">You can force IE to make a conditional request for each bundle with the F5 key (resulting in a HTTP 304 response for each bundle).</span></span> <span data-ttu-id="09122-262">Można wymusić pełne odświeżanie za pomocą polecenia ^ F5 (w wyniku odpowiedzi HTTP 200 dla każdego pakietu).</span><span class="sxs-lookup"><span data-stu-id="09122-262">You can force a full refresh by using ^F5 (resulting in a HTTP 200 response for each bundle.)</span></span>

<span data-ttu-id="09122-263">Na poniższej ilustracji przedstawiono kartę **buforowanie** okienka odpowiedzi programu Fiddler:</span><span class="sxs-lookup"><span data-stu-id="09122-263">The following image shows the **Caching** tab of the Fiddler response pane:</span></span>

![obraz pamięci podręcznej programu Fiddler](bundling-and-minification/_static/image8.png)

<span data-ttu-id="09122-265">Żądanie</span><span class="sxs-lookup"><span data-stu-id="09122-265">The request</span></span>   
`http://localhost/MvcBM_time/bundles/AllMyScripts?v=r0sLDicvP58AIXN_mc3QdyVvVj5euZNzdsa2N1PKvb81`  
 <span data-ttu-id="09122-266">dotyczy zbioru **AllMyScripts** i zawiera parę ciągów zapytania **v = R0sLDicvP58AIXN\\\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span><span class="sxs-lookup"><span data-stu-id="09122-266">is for the bundle **AllMyScripts** and contains a query string pair **v=r0sLDicvP58AIXN\\\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span></span> <span data-ttu-id="09122-267">Ciąg zapytania **v** ma token wartości, który jest unikatowym identyfikatorem używanym do buforowania.</span><span class="sxs-lookup"><span data-stu-id="09122-267">The query string **v** has a value token that is a unique identifier used for caching.</span></span> <span data-ttu-id="09122-268">Dopóki pakiet nie ulegnie zmianie, aplikacja ASP.NET będzie żądać pakietu **AllMyScripts** przy użyciu tego tokenu.</span><span class="sxs-lookup"><span data-stu-id="09122-268">As long as the bundle doesn't change, the ASP.NET application will request the **AllMyScripts** bundle using this token.</span></span> <span data-ttu-id="09122-269">Jeśli dowolny plik w pakiecie ulegnie zmianie, platforma optymalizacji ASP.NET wygeneruje nowy token, co gwarantuje, że żądania przeglądarki dla pakietu będą miały najnowszą wersję.</span><span class="sxs-lookup"><span data-stu-id="09122-269">If any file in the bundle changes, the ASP.NET optimization framework will generate a new token, guaranteeing that browser requests for the bundle will get the latest bundle.</span></span>

<span data-ttu-id="09122-270">W przypadku uruchamiania narzędzi programistycznych IE9 F12 i przechodzenia do wcześniej załadowanej strony program IE nieprawidłowo pokazuje warunkowe żądania GET do każdego pakietu i zwraca serwer HTTP 304.</span><span class="sxs-lookup"><span data-stu-id="09122-270">If you run the IE9 F12 developer tools and navigate to a previously loaded page, IE incorrectly shows conditional GET requests made to each bundle and the server returning HTTP 304.</span></span> <span data-ttu-id="09122-271">Dlaczego IE9 ma problemy z ustaleniem, czy żądanie warunkowe zostało wprowadzone w blogu [przy użyciu sieci CDN i wygasa, aby zwiększyć wydajność witryny sieci Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="09122-271">You can read why IE9 has problems determining if a conditional request was made in the blog entry [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

## <a name="less-coffeescript-scss-sass-bundling"></a><span data-ttu-id="09122-272">LESS, CoffeeScript, SCSS i Sass.</span><span class="sxs-lookup"><span data-stu-id="09122-272">LESS, CoffeeScript, SCSS, Sass Bundling.</span></span>

<span data-ttu-id="09122-273">Program minifikacja Framework i platforma udostępniają mechanizm przetwarzania języków pośrednich, takich jak [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [less](http://www.dotlesscss.org/) lub [CoffeeScript](http://coffeescript.org/), i stosują transformacje, takie jak minifikacja, do pakietu, który jest wynikiem.</span><span class="sxs-lookup"><span data-stu-id="09122-273">The bundling and minification framework provides a mechanism to process intermediate languages such as [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [LESS](http://www.dotlesscss.org/) or [Coffeescript](http://coffeescript.org/), and apply transforms such as minification to the resulting bundle.</span></span> <span data-ttu-id="09122-274">Na przykład, aby dodać pliki [less](http://www.dotlesscss.org/) do projektu MVC 4:</span><span class="sxs-lookup"><span data-stu-id="09122-274">For example, to add [.less](http://www.dotlesscss.org/) files to your MVC 4 project:</span></span>

1. <span data-ttu-id="09122-275">Utwórz folder dla MNIEJSZEj zawartości.</span><span class="sxs-lookup"><span data-stu-id="09122-275">Create a folder for your LESS content.</span></span> <span data-ttu-id="09122-276">W poniższym przykładzie zostanie użyta *zawartość folderu\\less* .</span><span class="sxs-lookup"><span data-stu-id="09122-276">The following example uses the *Content\\MyLess* folder.</span></span>
2. <span data-ttu-id="09122-277">Dodaj **bezkropkowo** [pakiet NuGet do projektu.](http://www.dotlesscss.org/)</span><span class="sxs-lookup"><span data-stu-id="09122-277">Add the [.less](http://www.dotlesscss.org/) NuGet package **dotless** to your project.</span></span>  
    <span data-ttu-id="09122-278">![instalacji z bez](bundling-and-minification/_static/image9.png) NuGet</span><span class="sxs-lookup"><span data-stu-id="09122-278">![NuGet dotless install](bundling-and-minification/_static/image9.png)</span></span>
3. <span data-ttu-id="09122-279">Dodaj klasę, która implementuje interfejs [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) .</span><span class="sxs-lookup"><span data-stu-id="09122-279">Add a class that implements the [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) interface.</span></span> <span data-ttu-id="09122-280">W przypadku transformacji. less Dodaj poniższy kod do projektu.</span><span class="sxs-lookup"><span data-stu-id="09122-280">For the .less transform, add the following code to your project.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample13.cs)]
4. <span data-ttu-id="09122-281">Utwórz pakiet mniej plików z `LessTransform` i transformacji [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) .</span><span class="sxs-lookup"><span data-stu-id="09122-281">Create a bundle of LESS files with the `LessTransform` and the [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) transform.</span></span> <span data-ttu-id="09122-282">Dodaj następujący kod do metody `RegisterBundles` w *aplikacji\\_Start\\pliku BundleConfig.cs* .</span><span class="sxs-lookup"><span data-stu-id="09122-282">Add the following code to the `RegisterBundles` method in the *App\\_Start\\BundleConfig.cs* file.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample14.cs)]
5. <span data-ttu-id="09122-283">Dodaj następujący kod do wszystkich widoków, które odwołują się do MNIEJSZEgo pakietu.</span><span class="sxs-lookup"><span data-stu-id="09122-283">Add the following code to any views which references the LESS bundle.</span></span>

    [!code-cshtml[Main](bundling-and-minification/samples/sample15.cshtml)]

## <a name="bundle-considerations"></a><span data-ttu-id="09122-284">Zagadnienia dotyczące zbioru</span><span class="sxs-lookup"><span data-stu-id="09122-284">Bundle Considerations</span></span>

<span data-ttu-id="09122-285">Dobrym zwyczajem do przestrzegania podczas tworzenia pakietów jest dołączenie "pakietu" jako prefiksu w nazwie pakietu.</span><span class="sxs-lookup"><span data-stu-id="09122-285">A good convention to follow when creating bundles is to include "bundle" as a prefix in the bundle name.</span></span> <span data-ttu-id="09122-286">Uniemożliwi to [konflikt routingu](https://forums.asp.net/post/5012037.aspx).</span><span class="sxs-lookup"><span data-stu-id="09122-286">This will prevent a possible [routing conflict](https://forums.asp.net/post/5012037.aspx).</span></span>

<span data-ttu-id="09122-287">Po zaktualizowaniu jednego pliku w pakiecie jest generowany nowy token dla parametru ciągu zapytania pakietu, a pełny pakiet musi zostać pobrany przy następnym zażądaniu strony zawierającej pakiet.</span><span class="sxs-lookup"><span data-stu-id="09122-287">Once you update one file in a bundle, a new token is generated for the bundle query string parameter and the full bundle must be downloaded the next time a client requests a page containing the bundle.</span></span> <span data-ttu-id="09122-288">W tradycyjnym znaczniku, w którym każdy element zawartości jest wymieniany osobno, zostanie pobrany tylko zmieniony plik.</span><span class="sxs-lookup"><span data-stu-id="09122-288">In traditional markup where each asset is listed individually, only the changed file would be downloaded.</span></span> <span data-ttu-id="09122-289">Zasoby, które zmieniają się często, mogą nie być dobrymi kandydatami do tworzenia.</span><span class="sxs-lookup"><span data-stu-id="09122-289">Assets that change frequently may not be good candidates for bundling.</span></span>

<span data-ttu-id="09122-290">Zgrupowanie i minifikacja przede wszystkim zwiększy czas ładowania żądania pierwszej strony.</span><span class="sxs-lookup"><span data-stu-id="09122-290">Bundling and minification primarily improve the first page request load time.</span></span> <span data-ttu-id="09122-291">Po zalogowaniu się do strony sieci Web przeglądarka przechowuje w pamięci podręcznej zasoby (JavaScript, CSS i obrazy), więc zgrupowanie i minifikacja nie zapewni zwiększenia wydajności podczas żądania tej samej strony lub stron w tej samej lokacji żądającej tych samych zasobów.</span><span class="sxs-lookup"><span data-stu-id="09122-291">Once a webpage has been requested, the browser caches the assets (JavaScript, CSS and images) so bundling and minification won't provide any performance boost when requesting the same page, or pages on the same site requesting the same assets.</span></span> <span data-ttu-id="09122-292">Jeśli nie ustawisz prawidłowo nagłówka wygaśnięcia dla elementów zawartości i nie używasz funkcji grupowania i minifikacja, heurystyka Aktualności przeglądarki oznaczy zasoby jako przestarzałe po kilku dniach, a przeglądarka będzie wymagać żądania weryfikacji dla każdego elementu zawartości.</span><span class="sxs-lookup"><span data-stu-id="09122-292">If you don't set the expires header correctly on your assets, and you don't use bundling and minification, the browsers freshness heuristics will mark the assets stale after a few days and the browser will require a validation request for each asset.</span></span> <span data-ttu-id="09122-293">W takim przypadku zgrupowanie i minifikacja zapewniają wzrost wydajności po pierwszym żądaniu strony.</span><span class="sxs-lookup"><span data-stu-id="09122-293">In this case, bundling and minification provide a performance increase after the first page request.</span></span> <span data-ttu-id="09122-294">Aby uzyskać szczegółowe informacje, zapoznaj się z blogiem [przy użyciu sieci CDN i wygasa, aby zwiększyć wydajność witryny sieci Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="09122-294">For details, see the blog [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

<span data-ttu-id="09122-295">W celu ograniczenia liczby jednoczesnych połączeń między hostami na każdą z nazw hostów można ograniczyć użycie sieci [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="09122-295">The browser limitation of six simultaneous connections per each hostname can be mitigated by using a [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span> <span data-ttu-id="09122-296">Ponieważ sieć CDN będzie miała inną nazwę hosta niż witryna hostingu, żądania zasobów z sieci CDN nie będą wliczane do sześciu jednoczesnych połączeń do środowiska hostingu.</span><span class="sxs-lookup"><span data-stu-id="09122-296">Because the CDN will have a different hostname than your hosting site, asset requests from the CDN will not count against the six simultaneous connections limit to your hosting environment.</span></span> <span data-ttu-id="09122-297">Sieć CDN może również zapewniać typowe zalety buforowania pakietów i buforowania krawędzi.</span><span class="sxs-lookup"><span data-stu-id="09122-297">A CDN can also provide common package caching and edge caching advantages.</span></span>

<span data-ttu-id="09122-298">Pakiety powinny być partycjonowane przez strony, które ich potrzebują.</span><span class="sxs-lookup"><span data-stu-id="09122-298">Bundles should be partitioned by pages that need them.</span></span> <span data-ttu-id="09122-299">Na przykład domyślny szablon ASP.NET MVC dla aplikacji internetowej tworzy pakiet z walidacją jQuery oddzielony od jQuery.</span><span class="sxs-lookup"><span data-stu-id="09122-299">For example, the default ASP.NET MVC template for an internet application creates a jQuery Validation bundle separate from jQuery.</span></span> <span data-ttu-id="09122-300">Ponieważ utworzone domyślne widoki nie mają danych wejściowych i nie są ogłaszane, nie zawierają one pakietu walidacji.</span><span class="sxs-lookup"><span data-stu-id="09122-300">Because the default views created have no input and do not post values, they don't include the validation bundle.</span></span>

<span data-ttu-id="09122-301">Przestrzeń nazw `System.Web.Optimization` jest zaimplementowana w *pliku System. Web. Optimization. dll*.</span><span class="sxs-lookup"><span data-stu-id="09122-301">The `System.Web.Optimization` namespace is implemented in *System.Web.Optimization.dll*.</span></span> <span data-ttu-id="09122-302">Wykorzystuje bibliotekę websmaring (*Websmars. dll*) dla funkcji minifikacja, które z kolei korzystają z *Antlr3. Runtime. dll*.</span><span class="sxs-lookup"><span data-stu-id="09122-302">It leverages the WebGrease library (*WebGrease.dll*) for minification capabilities, which in turn uses *Antlr3.Runtime.dll*.</span></span>

<span data-ttu-id="09122-303">*Używam usługi Twitter w celu wprowadzania szybkich ogłoszeń i linków do udostępniania. Moje dojście*do usługi Twitter: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="09122-303">*I use Twitter to make quick posts and share links. My Twitter handle is*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="09122-304">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="09122-304">Additional resources</span></span>

- <span data-ttu-id="09122-305">Wideo:[dzielenie i optymalizacja](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) według [Howard Dierking](https://twitter.com/#!/howard_dierking)</span><span class="sxs-lookup"><span data-stu-id="09122-305">Video:[Bundling and Optimizing](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) by [Howard Dierking](https://twitter.com/#!/howard_dierking)</span></span>
- <span data-ttu-id="09122-306">[Dodawanie optymalizacji sieci Web do witryny Web Pages](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="09122-306">[Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="09122-307">[Dodawanie grupowania i minifikacja do formularzy sieci Web](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="09122-307">[Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>
- <span data-ttu-id="09122-308">[Wpływ na wydajność tworzenia i minifikacja w trybie przeglądania sieci Web](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) przez [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span><span class="sxs-lookup"><span data-stu-id="09122-308">[Performance Implications of Bundling and Minification on Web Browsing](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) by [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span></span>
- <span data-ttu-id="09122-309">[Korzystanie z sieci CDN i wygasa w celu poprawy wydajności witryny sieci Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) przez Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="09122-309">[Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) by Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span></span>
- [<span data-ttu-id="09122-310">Minimalizuj czas RTT (czasy rundy)</span><span class="sxs-lookup"><span data-stu-id="09122-310">Minimize RTT (round-trip times)</span></span>](https://developers.google.com/speed/docs/best-practices/rtt)

## <a name="contributors"></a><span data-ttu-id="09122-311">Współautorzy</span><span class="sxs-lookup"><span data-stu-id="09122-311">Contributors</span></span>

- <span data-ttu-id="09122-312">Hao Kung</span><span class="sxs-lookup"><span data-stu-id="09122-312">Hao Kung</span></span>
- [<span data-ttu-id="09122-313">Howard Dierking</span><span class="sxs-lookup"><span data-stu-id="09122-313">Howard Dierking</span></span>](https://twitter.com/#!/howard_dierking)
- <span data-ttu-id="09122-314">Dianę LaRose</span><span class="sxs-lookup"><span data-stu-id="09122-314">Diana LaRose</span></span>

---
title: Wiązanie modelu w programie ASP.NET Core
author: tdykstra
description: Dowiedz się, jak wiązanie modelu programu ASP.NET Core MVC mapuje dane z żądań HTTP na parametry metody akcji.
ms.assetid: 0be164aa-1d72-4192-bd6b-192c9c301164
ms.author: tdykstra
ms.date: 11/13/2018
uid: mvc/models/model-binding
ms.openlocfilehash: 1dc9b41328ed78440622acc1865b6f088d394403
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/01/2019
ms.locfileid: "57069734"
---
# <a name="model-binding-in-aspnet-core"></a><span data-ttu-id="a8c63-103">Wiązanie modelu w programie ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="a8c63-103">Model Binding in ASP.NET Core</span></span>

<span data-ttu-id="a8c63-104">Przez [Rachel Appel](https://github.com/rachelappel)</span><span class="sxs-lookup"><span data-stu-id="a8c63-104">By [Rachel Appel](https://github.com/rachelappel)</span></span>

## <a name="introduction-to-model-binding"></a><span data-ttu-id="a8c63-105">Wprowadzenie do wiązanie modelu</span><span class="sxs-lookup"><span data-stu-id="a8c63-105">Introduction to model binding</span></span>

<span data-ttu-id="a8c63-106">Wiązanie modelu programu ASP.NET Core MVC mapuje dane z żądań HTTP na parametry metody akcji.</span><span class="sxs-lookup"><span data-stu-id="a8c63-106">Model binding in ASP.NET Core MVC maps data from HTTP requests to action method parameters.</span></span> <span data-ttu-id="a8c63-107">Parametry mogą być proste typy, takie jak ciągi, liczby całkowite lub wartości zmiennoprzecinkowe lub mogą one być typów złożonych.</span><span class="sxs-lookup"><span data-stu-id="a8c63-107">The parameters may be simple types such as strings, integers, or floats, or they may be complex types.</span></span> <span data-ttu-id="a8c63-108">Jest to atrakcyjną funkcją MVC, ponieważ mapowanie danych przychodzących z odpowiednikiem jest w przypadku często powtarzane, niezależnie od tego, rozmiarze i poziomie złożoności danych.</span><span class="sxs-lookup"><span data-stu-id="a8c63-108">This is a great feature of MVC because mapping incoming data to a counterpart is an often repeated scenario, regardless of size or complexity of the data.</span></span> <span data-ttu-id="a8c63-109">MVC rozwiązuje ten problem przez troszczyć powiązania, dzięki którym deweloperzy nie muszą zachować poprawiania nieco inna wersja tego samego kodu w każdej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8c63-109">MVC solves this problem by abstracting binding away so developers don't have to keep rewriting a slightly different version of that same code in every app.</span></span> <span data-ttu-id="a8c63-110">Zapisywanie tekstu do typu konwertera kodu jest niewygodna i występowania błędów.</span><span class="sxs-lookup"><span data-stu-id="a8c63-110">Writing your own text to type converter code is tedious, and error prone.</span></span>

## <a name="how-model-binding-works"></a><span data-ttu-id="a8c63-111">Jak działa powiązanie modelu</span><span class="sxs-lookup"><span data-stu-id="a8c63-111">How model binding works</span></span>

<span data-ttu-id="a8c63-112">Gdy MVC odbiera żądanie HTTP, kieruje je do metody określonej akcji kontrolera.</span><span class="sxs-lookup"><span data-stu-id="a8c63-112">When MVC receives an HTTP request, it routes it to a specific action method of a controller.</span></span> <span data-ttu-id="a8c63-113">Określa, która metoda akcji do uruchomienia w oparciu o na tym, co w danych trasy, a następnie powiąże wartości z żądania HTTP do parametrów tej metody akcji.</span><span class="sxs-lookup"><span data-stu-id="a8c63-113">It determines which action method to run based on what is in the route data, then it binds values from the HTTP request to that action method's parameters.</span></span> <span data-ttu-id="a8c63-114">Na przykład rozważmy następujący adres URL:</span><span class="sxs-lookup"><span data-stu-id="a8c63-114">For example, consider the following URL:</span></span>

`http://contoso.com/movies/edit/2`

<span data-ttu-id="a8c63-115">Ponieważ szablon trasy wyglądają następująco, `{controller=Home}/{action=Index}/{id?}`, `movies/edit/2` kieruje do `Movies` kontrolera, a jego `Edit` metody akcji.</span><span class="sxs-lookup"><span data-stu-id="a8c63-115">Since the route template looks like this, `{controller=Home}/{action=Index}/{id?}`, `movies/edit/2` routes to the `Movies` controller, and its `Edit` action method.</span></span> <span data-ttu-id="a8c63-116">Akceptuje także opcjonalny parametr o nazwie `id`.</span><span class="sxs-lookup"><span data-stu-id="a8c63-116">It also accepts an optional parameter called `id`.</span></span> <span data-ttu-id="a8c63-117">Kod dla metody akcji powinna wyglądać mniej więcej tak:</span><span class="sxs-lookup"><span data-stu-id="a8c63-117">The code for the action method should look something like this:</span></span>

```csharp
public IActionResult Edit(int? id)
   ```

<span data-ttu-id="a8c63-118">Uwaga: Ciągi w trasy adresu URL nie jest uwzględniana.</span><span class="sxs-lookup"><span data-stu-id="a8c63-118">Note: The strings in the URL route are not case sensitive.</span></span>

<span data-ttu-id="a8c63-119">MVC podejmie próbę żądania danych można powiązać parametry akcji według nazwy.</span><span class="sxs-lookup"><span data-stu-id="a8c63-119">MVC will try to bind request data to the action parameters by name.</span></span> <span data-ttu-id="a8c63-120">MVC będzie szukać wartości dla każdego parametru przy użyciu nazwy parametrów i nazwy publicznej właściwości do ustawienia.</span><span class="sxs-lookup"><span data-stu-id="a8c63-120">MVC will look for values for each parameter using the parameter name and the names of its public settable properties.</span></span> <span data-ttu-id="a8c63-121">W powyższym przykładzie nosi nazwę parametru jedyną akcją `id`, który MVC wiąże wartość z tej samej nazwie w wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="a8c63-121">In the above example, the only action parameter is named `id`, which MVC binds to the value with the same name in the route values.</span></span> <span data-ttu-id="a8c63-122">Oprócz wartości trasy MVC powiąże dane z różnych części żądania, a następnie robi to w ustalonej kolejności.</span><span class="sxs-lookup"><span data-stu-id="a8c63-122">In addition to route values MVC will bind data from various parts of the request and it does so in a set order.</span></span> <span data-ttu-id="a8c63-123">Poniżej znajduje się lista źródeł danych, w kolejności wiązania modelu przegląda je:</span><span class="sxs-lookup"><span data-stu-id="a8c63-123">Below is a list of the data sources in the order that model binding looks through them:</span></span>

1. <span data-ttu-id="a8c63-124">`Form values`: Są to wartości formularza, które bardziej szczegółowo w żądaniu HTTP przy użyciu metody POST.</span><span class="sxs-lookup"><span data-stu-id="a8c63-124">`Form values`: These are form values that go in the HTTP request using the POST method.</span></span> <span data-ttu-id="a8c63-125">(w tym żądania POST jQuery).</span><span class="sxs-lookup"><span data-stu-id="a8c63-125">(including jQuery POST requests).</span></span>

2. <span data-ttu-id="a8c63-126">`Route values`: Zbiór wartości trasy udostępniane przez [routingu](xref:fundamentals/routing)</span><span class="sxs-lookup"><span data-stu-id="a8c63-126">`Route values`: The set of route values provided by [Routing](xref:fundamentals/routing)</span></span>

3. <span data-ttu-id="a8c63-127">`Query strings`: Część ciągu zapytania identyfikatora URI.</span><span class="sxs-lookup"><span data-stu-id="a8c63-127">`Query strings`: The query string part of the URI.</span></span>

<!-- DocFX BUG
The link works but generates an error when building with DocFX
@fundamentals/routing
[Routing](xref:fundamentals/routing)
-->

<span data-ttu-id="a8c63-128">Uwaga: Wartości formularza, dane trasy i zbadać ciągów są przechowywane jako pary nazwa wartość.</span><span class="sxs-lookup"><span data-stu-id="a8c63-128">Note: Form values, route data, and query strings are all stored as name-value pairs.</span></span>

<span data-ttu-id="a8c63-129">Ponieważ wiązania modelu o podanie klucza o nazwie `id` i nie ma nic o nazwie `id` wartości formularza go następnie przeszedł do obozów szuka klucza, wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="a8c63-129">Since model binding asked for a key named `id` and there's nothing named `id` in the form values, it moved on to the route values looking for that key.</span></span> <span data-ttu-id="a8c63-130">W naszym przykładzie jest zgodny.</span><span class="sxs-lookup"><span data-stu-id="a8c63-130">In our example, it's a match.</span></span> <span data-ttu-id="a8c63-131">Powiązaniem i wartością jest konwertowany na liczbę całkowitą 2.</span><span class="sxs-lookup"><span data-stu-id="a8c63-131">Binding happens, and the value is converted to the integer 2.</span></span> <span data-ttu-id="a8c63-132">Tego samego żądania za pomocą edycji (identyfikator ciągu) czy przekonwertować na ciąg "2".</span><span class="sxs-lookup"><span data-stu-id="a8c63-132">The same request using Edit(string id) would convert to the string "2".</span></span>

<span data-ttu-id="a8c63-133">Do tej pory w przykładzie użyto typów prostych.</span><span class="sxs-lookup"><span data-stu-id="a8c63-133">So far the example uses simple types.</span></span> <span data-ttu-id="a8c63-134">W MVC proste typy są dowolnego typu pierwotnego .NET lub typu dla konwertera typu ciąg.</span><span class="sxs-lookup"><span data-stu-id="a8c63-134">In MVC simple types are any .NET primitive type or type with a string type converter.</span></span> <span data-ttu-id="a8c63-135">Gdyby parametru metody akcji klasy takie jak `Movie` typ, który zawiera proste i złożone typy, właściwości nadal będą powiązanie modelu MVC go obsłużyć dobrze.</span><span class="sxs-lookup"><span data-stu-id="a8c63-135">If the action method's parameter were a class such as the `Movie` type, which contains both simple and complex types as properties, MVC's model binding will still handle it nicely.</span></span> <span data-ttu-id="a8c63-136">Używa odbicia i rekursji przechodzenia właściwości typów złożonych szuka dopasowania.</span><span class="sxs-lookup"><span data-stu-id="a8c63-136">It uses reflection and recursion to traverse the properties of complex types looking for matches.</span></span> <span data-ttu-id="a8c63-137">Wiązanie modelu wyszukuje wzorzec *parameter_name.property_name* do powiązania wartości właściwości.</span><span class="sxs-lookup"><span data-stu-id="a8c63-137">Model binding looks for the pattern *parameter_name.property_name* to bind values to properties.</span></span> <span data-ttu-id="a8c63-138">Jeśli nie znajdzie dopasowania wartości tego formularza podejmie można powiązać, przy użyciu tylko nazwy właściwości.</span><span class="sxs-lookup"><span data-stu-id="a8c63-138">If it doesn't find matching values of this form, it will attempt to bind using just the property name.</span></span> <span data-ttu-id="a8c63-139">Dla tych typów, takich jak `Collection` typów, wiązanie modelu szuka dopasowań, który ma *parameter_name [index]* lub po prostu *[index]*.</span><span class="sxs-lookup"><span data-stu-id="a8c63-139">For those types such as `Collection` types, model binding looks for matches to *parameter_name[index]* or just *[index]*.</span></span> <span data-ttu-id="a8c63-140">Model traktuje powiązania `Dictionary` podobnie, typów, pytanie o *parameter_name [klucz]* lub po prostu *[klucz]*, tak długo, jak klucze są typy proste.</span><span class="sxs-lookup"><span data-stu-id="a8c63-140">Model binding treats  `Dictionary` types similarly, asking for *parameter_name[key]* or just *[key]*, as long as the keys are simple types.</span></span> <span data-ttu-id="a8c63-141">Klucze, które są obsługiwane pasuje do nazwy pola HTML i pomocnicy tagów generowane dla tego samego typu modelu.</span><span class="sxs-lookup"><span data-stu-id="a8c63-141">Keys that are supported match the field names HTML and tag helpers generated for the same model type.</span></span> <span data-ttu-id="a8c63-142">Dzięki temu obustronne konwertowanie wartości tak, aby pola formularza pozostają wypełniony przy użyciu danych wejściowych użytkownika do ich zapewnienia wygody, na przykład, gdy powiązane dane z Utwórz lub zmodyfikuj nie przeszły pomyślnie sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="a8c63-142">This enables round-tripping values so that the form fields remain filled with the user's input for their convenience, for example, when bound data from a create or edit didn't pass validation.</span></span>

<span data-ttu-id="a8c63-143">Aby umożliwić wiązanie modelu, klasa musi mieć publicznego konstruktora domyślnego i publicznego modyfikowalne właściwości do powiązania.</span><span class="sxs-lookup"><span data-stu-id="a8c63-143">To make model binding possible, the class must have a public default constructor and public writable properties to bind.</span></span> <span data-ttu-id="a8c63-144">W przypadku tworzenia powiązania modelu klasy są tworzone przy użyciu publicznego konstruktora domyślnego, a następnie można ustawić właściwości.</span><span class="sxs-lookup"><span data-stu-id="a8c63-144">When model binding occurs, the class is instantiated using the public default constructor, then the properties can be set.</span></span>

<span data-ttu-id="a8c63-145">Podczas wiązania parametru wiązania modelu zatrzymuje wyszukiwanie wartości o takiej nazwie i powoduje przeniesienie do powiązania następny parametr.</span><span class="sxs-lookup"><span data-stu-id="a8c63-145">When a parameter is bound, model binding stops looking for values with that name and it moves on to bind the next parameter.</span></span> <span data-ttu-id="a8c63-146">W przeciwnym razie domyślne zachowanie wiązania modelu ustawia parametry domyślne wartości w zależności od ich typu:</span><span class="sxs-lookup"><span data-stu-id="a8c63-146">Otherwise, the default model binding behavior sets parameters to their default values depending on their type:</span></span>

* <span data-ttu-id="a8c63-147">`T[]`: Z wyjątkiem tablic typu `byte[]`, powiązanie ustawia parametry typu `T[]` do `Array.Empty<T>()`.</span><span class="sxs-lookup"><span data-stu-id="a8c63-147">`T[]`: With the exception of arrays of type `byte[]`, binding sets parameters of type `T[]` to `Array.Empty<T>()`.</span></span> <span data-ttu-id="a8c63-148">Tablice typu `byte[]` są ustawione na `null`.</span><span class="sxs-lookup"><span data-stu-id="a8c63-148">Arrays of type `byte[]` are set to `null`.</span></span>

* <span data-ttu-id="a8c63-149">Typy odwołań: Powiązanie tworzy instancję klasy przy użyciu domyślnego konstruktora bez konieczności ustawiania właściwości.</span><span class="sxs-lookup"><span data-stu-id="a8c63-149">Reference Types: Binding creates an instance of a class with the default constructor without setting properties.</span></span> <span data-ttu-id="a8c63-150">Jednak model powiązania zestawów `string` parametry `null`.</span><span class="sxs-lookup"><span data-stu-id="a8c63-150">However, model binding sets `string` parameters to `null`.</span></span>

* <span data-ttu-id="a8c63-151">Typy dopuszczające wartości null: Typy dopuszczające wartości zerowe są ustawione na `null`.</span><span class="sxs-lookup"><span data-stu-id="a8c63-151">Nullable Types: Nullable types are set to `null`.</span></span> <span data-ttu-id="a8c63-152">W powyższym przykładzie modelu powiązania zestawów `id` do `null` , ponieważ jest on typu `int?`.</span><span class="sxs-lookup"><span data-stu-id="a8c63-152">In the above example, model binding sets `id` to `null` since it's of type `int?`.</span></span>

* <span data-ttu-id="a8c63-153">Typy wartości: Typy wartości nieprzyjmujące typu `T` są ustawione na `default(T)`.</span><span class="sxs-lookup"><span data-stu-id="a8c63-153">Value Types: Non-nullable value types of type `T` are set to `default(T)`.</span></span> <span data-ttu-id="a8c63-154">Na przykład powiązanie modelu spowoduje ustawienie parametru `int id` na 0.</span><span class="sxs-lookup"><span data-stu-id="a8c63-154">For example, model binding will set a parameter `int id` to 0.</span></span> <span data-ttu-id="a8c63-155">Należy wziąć pod uwagę przy użyciu sprawdzania poprawności modelu lub typy dopuszczające wartości null, a nie opierając się na wartości domyślne.</span><span class="sxs-lookup"><span data-stu-id="a8c63-155">Consider using model validation or nullable types rather than relying on default values.</span></span>

<span data-ttu-id="a8c63-156">Jeśli powiązanie kończy się niepowodzeniem, MVC nie wyrzuca błąd.</span><span class="sxs-lookup"><span data-stu-id="a8c63-156">If binding fails, MVC doesn't throw an error.</span></span> <span data-ttu-id="a8c63-157">Należy sprawdzić wszystkie akcje, które akceptuje dane wejściowe użytkownika `ModelState.IsValid` właściwości.</span><span class="sxs-lookup"><span data-stu-id="a8c63-157">Every action which accepts user input should check the `ModelState.IsValid` property.</span></span>

<span data-ttu-id="a8c63-158">Uwaga: Każdy wpis na kontrolerze `ModelState` właściwość `ModelStateEntry` zawierający `Errors` właściwości.</span><span class="sxs-lookup"><span data-stu-id="a8c63-158">Note: Each entry in the controller's `ModelState` property is a `ModelStateEntry` containing an `Errors` property.</span></span> <span data-ttu-id="a8c63-159">Rzadko należy zbadać tę kolekcję, samodzielnie.</span><span class="sxs-lookup"><span data-stu-id="a8c63-159">It's rarely necessary to query this collection yourself.</span></span> <span data-ttu-id="a8c63-160">Zamiast nich należy używać słów kluczowych `ModelState.IsValid`.</span><span class="sxs-lookup"><span data-stu-id="a8c63-160">Use `ModelState.IsValid` instead.</span></span>

<span data-ttu-id="a8c63-161">Ponadto istnieją pewne specjalne typy danych, które MVC należy wziąć pod uwagę podczas wiązania modelu:</span><span class="sxs-lookup"><span data-stu-id="a8c63-161">Additionally, there are some special data types that MVC must consider when performing model binding:</span></span>

* <span data-ttu-id="a8c63-162">`IFormFile`, `IEnumerable<IFormFile>`: Jeden lub więcej przekazanych plików, które są częścią żądania HTTP.</span><span class="sxs-lookup"><span data-stu-id="a8c63-162">`IFormFile`, `IEnumerable<IFormFile>`: One or more uploaded files that are part of the HTTP request.</span></span>

* <span data-ttu-id="a8c63-163">`CancellationToken`: Używane, aby anulować działanie w asynchronicznej kontrolerów.</span><span class="sxs-lookup"><span data-stu-id="a8c63-163">`CancellationToken`: Used to cancel activity in asynchronous controllers.</span></span>

<span data-ttu-id="a8c63-164">Te typy można powiązać parametry akcji lub właściwości w typie klasy.</span><span class="sxs-lookup"><span data-stu-id="a8c63-164">These types can be bound to action parameters or to properties on a class type.</span></span>

<span data-ttu-id="a8c63-165">Po zakończeniu wiązania modelu [weryfikacji](validation.md) występuje.</span><span class="sxs-lookup"><span data-stu-id="a8c63-165">Once model binding is complete, [Validation](validation.md) occurs.</span></span> <span data-ttu-id="a8c63-166">Wiązanie modelu domyślne działa doskonale nadaje się do większość scenariuszy projektowych.</span><span class="sxs-lookup"><span data-stu-id="a8c63-166">Default model binding works great for the vast majority of development scenarios.</span></span> <span data-ttu-id="a8c63-167">Jest również extensible, więc jeśli masz unikatowych potrzeb można dostosować wbudowane zachowanie.</span><span class="sxs-lookup"><span data-stu-id="a8c63-167">It's also extensible so if you have unique needs you can customize the built-in behavior.</span></span>

## <a name="customize-model-binding-behavior-with-attributes"></a><span data-ttu-id="a8c63-168">Dostosowywanie zachowania wiązania modelu za pomocą atrybutów</span><span class="sxs-lookup"><span data-stu-id="a8c63-168">Customize model binding behavior with attributes</span></span>

<span data-ttu-id="a8c63-169">MVC zawiera kilka atrybutów, które można użyć do kierowania jego domyślne zachowanie wiązania modelu do innego źródła.</span><span class="sxs-lookup"><span data-stu-id="a8c63-169">MVC contains several attributes that you can use to direct its default model binding behavior to a different source.</span></span> <span data-ttu-id="a8c63-170">Na przykład można określić czy powiązania dla właściwości jest wymagana, czy jego powinno nigdy się wydarzyć na wszystkich przy użyciu `[BindRequired]` lub `[BindNever]` atrybutów.</span><span class="sxs-lookup"><span data-stu-id="a8c63-170">For example, you can specify whether binding is required for a property, or if it should never happen at all by using the `[BindRequired]` or `[BindNever]` attributes.</span></span> <span data-ttu-id="a8c63-171">Alternatywnie można zastąpić domyślne źródło danych i określ źródło danych integratora modelu.</span><span class="sxs-lookup"><span data-stu-id="a8c63-171">Alternatively, you can override the default data source, and specify the model binder's data source.</span></span> <span data-ttu-id="a8c63-172">Poniżej przedstawiono listę atrybutów powiązania modelu:</span><span class="sxs-lookup"><span data-stu-id="a8c63-172">Below is a list of model binding attributes:</span></span>

* <span data-ttu-id="a8c63-173">`[BindRequired]`: Ten atrybut dodaje błąd stanu modelu, jeśli nie można powiązać.</span><span class="sxs-lookup"><span data-stu-id="a8c63-173">`[BindRequired]`: This attribute adds a model state error if binding cannot occur.</span></span>

* <span data-ttu-id="a8c63-174">`[BindNever]`: Informuje obiekt wiążący modelu nigdy nie można powiązać ten parametr.</span><span class="sxs-lookup"><span data-stu-id="a8c63-174">`[BindNever]`: Tells the model binder to never bind to this parameter.</span></span>

* <span data-ttu-id="a8c63-175">`[FromHeader]`, `[FromQuery]`, `[FromRoute]`, `[FromForm]`: Służą do określania źródła dokładnie powiązania, które chcesz zastosować.</span><span class="sxs-lookup"><span data-stu-id="a8c63-175">`[FromHeader]`, `[FromQuery]`, `[FromRoute]`, `[FromForm]`: Use these to specify the exact binding source you want to apply.</span></span>

* <span data-ttu-id="a8c63-176">`[FromServices]`: Ten atrybut używa [wstrzykiwanie zależności](../../fundamentals/dependency-injection.md) by powiązać parametry z usług.</span><span class="sxs-lookup"><span data-stu-id="a8c63-176">`[FromServices]`: This attribute uses [dependency injection](../../fundamentals/dependency-injection.md) to bind parameters from services.</span></span>

* <span data-ttu-id="a8c63-177">`[FromBody]`: Użyj skonfigurowane elementy formatujące, aby powiązać dane z treści żądania.</span><span class="sxs-lookup"><span data-stu-id="a8c63-177">`[FromBody]`: Use the configured formatters to bind data from the request body.</span></span> <span data-ttu-id="a8c63-178">Element formatujący jest zaznaczone, na podstawie typu zawartości żądania.</span><span class="sxs-lookup"><span data-stu-id="a8c63-178">The formatter is selected based on content type of the request.</span></span>

* <span data-ttu-id="a8c63-179">`[ModelBinder]`: Służy do zastępowania domyślnego integratora modelu powiązania źródłowego i nazwę.</span><span class="sxs-lookup"><span data-stu-id="a8c63-179">`[ModelBinder]`: Used to override the default model binder, binding source and name.</span></span>

<span data-ttu-id="a8c63-180">Atrybuty są bardzo przydatne narzędzia, gdy trzeba zastąpić domyślne zachowanie wiązania modelu.</span><span class="sxs-lookup"><span data-stu-id="a8c63-180">Attributes are very helpful tools when you need to override the default behavior of model binding.</span></span>

## <a name="customize-model-binding-and-validation-globally"></a><span data-ttu-id="a8c63-181">Dostosowywanie wiązania modelu i sprawdzanie poprawności globalnie</span><span class="sxs-lookup"><span data-stu-id="a8c63-181">Customize model binding and validation globally</span></span>

<span data-ttu-id="a8c63-182">Zachowanie modelu powiązania i sprawdzanie poprawności systemu jest wymuszany przez [ModelMetadata](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.modelmetadata) , który opisuje:</span><span class="sxs-lookup"><span data-stu-id="a8c63-182">The model binding and validation system's behavior is driven by [ModelMetadata](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.modelmetadata) that describes:</span></span>

* <span data-ttu-id="a8c63-183">Jak model ma zostać powiązany.</span><span class="sxs-lookup"><span data-stu-id="a8c63-183">How a model is to be bound.</span></span>
* <span data-ttu-id="a8c63-184">Jak sprawdzanie poprawności jest wykonywane od typu i jego właściwości.</span><span class="sxs-lookup"><span data-stu-id="a8c63-184">How validation occurs on the type and its properties.</span></span>

<span data-ttu-id="a8c63-185">Aspekty zachowania systemu można skonfigurować globalnie przez dodanie dostawcy szczegóły [MvcOptions.ModelMetadataDetailsProviders](/dotnet/api/microsoft.aspnetcore.mvc.mvcoptions.modelmetadatadetailsproviders#Microsoft_AspNetCore_Mvc_MvcOptions_ModelMetadataDetailsProviders).</span><span class="sxs-lookup"><span data-stu-id="a8c63-185">Aspects of the system's behavior can be configured globally by adding a details provider to [MvcOptions.ModelMetadataDetailsProviders](/dotnet/api/microsoft.aspnetcore.mvc.mvcoptions.modelmetadatadetailsproviders#Microsoft_AspNetCore_Mvc_MvcOptions_ModelMetadataDetailsProviders).</span></span> <span data-ttu-id="a8c63-186">MVC ma kilka dostawców wbudowanych szczegółowe informacje, które umożliwiają konfigurowanie zachowania, takie jak wyłączenie wiązania modelu lub sprawdzania poprawności w przypadku niektórych typów.</span><span class="sxs-lookup"><span data-stu-id="a8c63-186">MVC has a few built-in details providers that allow configuring behavior such as disabling model binding or validation for certain types.</span></span>

<span data-ttu-id="a8c63-187">Aby wyłączyć wiązania modelu wszystkich modeli określonego typu, należy dodać [ExcludeBindingMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.excludebindingmetadataprovider) w `Startup.ConfigureServices`.</span><span class="sxs-lookup"><span data-stu-id="a8c63-187">To disable model binding on all models of a certain type, add an [ExcludeBindingMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.excludebindingmetadataprovider) in `Startup.ConfigureServices`.</span></span> <span data-ttu-id="a8c63-188">Na przykład do wiązania modelu wyłączenie wszystkich modeli typu `System.Version`:</span><span class="sxs-lookup"><span data-stu-id="a8c63-188">For example, to disable model binding on all models of type `System.Version`:</span></span>

```csharp
services.AddMvc().AddMvcOptions(options =>
    options.ModelMetadataDetailsProviders.Add(
        new ExcludeBindingMetadataProvider(typeof(System.Version))));
```

<span data-ttu-id="a8c63-189">Aby wyłączyć sprawdzanie poprawności właściwości określonego typu, należy dodać [SuppressChildValidationMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.suppresschildvalidationmetadataprovider) w `Startup.ConfigureServices`.</span><span class="sxs-lookup"><span data-stu-id="a8c63-189">To disable validation on properties of a certain type, add a [SuppressChildValidationMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.suppresschildvalidationmetadataprovider) in `Startup.ConfigureServices`.</span></span> <span data-ttu-id="a8c63-190">Na przykład, aby wyłączyć sprawdzanie poprawności we właściwościach typu `System.Guid`:</span><span class="sxs-lookup"><span data-stu-id="a8c63-190">For example, to disable validation on properties of type `System.Guid`:</span></span>

```csharp
services.AddMvc().AddMvcOptions(options =>
    options.ModelMetadataDetailsProviders.Add(
        new SuppressChildValidationMetadataProvider(typeof(System.Guid))));
```

## <a name="bind-formatted-data-from-the-request-body"></a><span data-ttu-id="a8c63-191">Powiąż sformatowanych danych z treści żądania</span><span class="sxs-lookup"><span data-stu-id="a8c63-191">Bind formatted data from the request body</span></span>

<span data-ttu-id="a8c63-192">Dane żądania mogą pochodzić w różnych formatach, takich jak JSON, XML i wiele innych.</span><span class="sxs-lookup"><span data-stu-id="a8c63-192">Request data can come in a variety of formats including JSON, XML and many others.</span></span> <span data-ttu-id="a8c63-193">Użycie atrybutu [FromBody] Aby wskazać, że chcesz powiązać parametr z danymi w treści żądania, są używane skonfigurowany zestaw programów formatujących do obsługi danych żądania na podstawie jego typu zawartości.</span><span class="sxs-lookup"><span data-stu-id="a8c63-193">When you use the [FromBody] attribute to indicate that you want to bind a parameter to data in the request body, MVC uses a configured set of formatters to handle the request data based on its content type.</span></span> <span data-ttu-id="a8c63-194">Domyślnie MVC zawiera `JsonInputFormatter` klasy do obsługi danych JSON, ale można dodać dodatkowe elementy formatujące do obsługi kodu XML i innych formatów niestandardowych.</span><span class="sxs-lookup"><span data-stu-id="a8c63-194">By default MVC includes a `JsonInputFormatter` class for handling JSON data, but you can add additional formatters for handling XML and other custom formats.</span></span>

> [!NOTE]
> <span data-ttu-id="a8c63-195">Może być co najwyżej jeden parametr poszczególnych działań ozdobione `[FromBody]`.</span><span class="sxs-lookup"><span data-stu-id="a8c63-195">There can be at most one parameter per action decorated with `[FromBody]`.</span></span> <span data-ttu-id="a8c63-196">Wykonawczej programu ASP.NET Core MVC deleguje odpowiedzialność odczytywania strumienia żądania do elementu formatującego.</span><span class="sxs-lookup"><span data-stu-id="a8c63-196">The ASP.NET Core MVC run-time delegates the responsibility of reading the request stream to the formatter.</span></span> <span data-ttu-id="a8c63-197">Po strumienia żądania jest do odczytu dla parametru, zazwyczaj nie jest możliwe do odczytu strumienia żądania ponownie przez powiązanie inne `[FromBody]` parametrów.</span><span class="sxs-lookup"><span data-stu-id="a8c63-197">Once the request stream is read for a parameter, it's generally not possible to read the request stream again for binding other `[FromBody]` parameters.</span></span>

> [!NOTE]
> <span data-ttu-id="a8c63-198">`JsonInputFormatter` Jest domyślny element formatujący i opiera się na [Json.NET](https://www.newtonsoft.com/json).</span><span class="sxs-lookup"><span data-stu-id="a8c63-198">The `JsonInputFormatter` is the default formatter and is based on [Json.NET](https://www.newtonsoft.com/json).</span></span>

<span data-ttu-id="a8c63-199">ASP.NET Core wybiera elementy formatujące danych wejściowych, na podstawie [Content-Type](https://www.w3.org/Protocols/rfc1341/4_Content-Type.html) nagłówka i typu parametru, chyba że jest atrybutem zastosowanym określającą inny sposób.</span><span class="sxs-lookup"><span data-stu-id="a8c63-199">ASP.NET Core selects input formatters based on the [Content-Type](https://www.w3.org/Protocols/rfc1341/4_Content-Type.html) header and the type of the parameter, unless there's an attribute applied to it specifying otherwise.</span></span> <span data-ttu-id="a8c63-200">Jeśli chcesz użyć kodu XML lub innego formatu należy skonfigurować je w *Startup.cs* plik, ale najpierw musisz uzyskać odwołanie do `Microsoft.AspNetCore.Mvc.Formatters.Xml` za pomocą narzędzia NuGet.</span><span class="sxs-lookup"><span data-stu-id="a8c63-200">If you'd like to use XML or another format you must configure it in the *Startup.cs* file, but you may first have to obtain a reference to `Microsoft.AspNetCore.Mvc.Formatters.Xml` using NuGet.</span></span> <span data-ttu-id="a8c63-201">Kod startowy powinien wyglądać mniej więcej tak:</span><span class="sxs-lookup"><span data-stu-id="a8c63-201">Your startup code should look something like this:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddXmlSerializerFormatters();
   }
```

<span data-ttu-id="a8c63-202">Możesz pisać kod w *Startup.cs* plik zawiera `ConfigureServices` metody z `services` argumentu można użyć do utworzenia usługi dla aplikacji platformy ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="a8c63-202">Code in the *Startup.cs* file contains a `ConfigureServices` method with a `services` argument you can use to build up services for your ASP.NET Core app.</span></span> <span data-ttu-id="a8c63-203">W tym przykładzie dodamy element formatujący XML jako usługa, która zapewni MVC dla tej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8c63-203">In the sample, we are adding an XML formatter as a service that MVC will provide for this app.</span></span> <span data-ttu-id="a8c63-204">`options` Argument przekazany do `AddMvc` metoda umożliwia dodawanie oraz zarządzanie nimi filtry, elementy formatujące i inne opcje systemu z MVC podczas uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8c63-204">The `options` argument passed into the `AddMvc` method allows you to add and manage filters, formatters, and other system options from MVC upon app startup.</span></span> <span data-ttu-id="a8c63-205">Następnie Zastosuj `Consumes` atrybutów do klasy kontrolera lub metody akcji do pracy z żądany format.</span><span class="sxs-lookup"><span data-stu-id="a8c63-205">Then apply the `Consumes` attribute to controller classes or action methods to work with the format you want.</span></span>

### <a name="custom-model-binding"></a><span data-ttu-id="a8c63-206">Niestandardowe wiązanie modelu</span><span class="sxs-lookup"><span data-stu-id="a8c63-206">Custom Model Binding</span></span>

<span data-ttu-id="a8c63-207">Wiązanie modelu można rozszerzyć przez napisanie własnego integratorów modelu niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="a8c63-207">You can extend model binding by writing your own custom model binders.</span></span> <span data-ttu-id="a8c63-208">Dowiedz się więcej o [niestandardowe wiązanie modelu](../advanced/custom-model-binding.md).</span><span class="sxs-lookup"><span data-stu-id="a8c63-208">Learn more about [custom model binding](../advanced/custom-model-binding.md).</span></span>

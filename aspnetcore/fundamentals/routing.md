---
title: Routing w programie ASP.NET Core
author: rick-anderson
description: Dowiedz się, jak platformy ASP.NET Core, routing jest odpowiedzialny za mapowania żądania identyfikatorów URI punktu końcowego selektory i wysyłania żądania przychodzące do punktów końcowych.
ms.author: riande
ms.custom: mvc
ms.date: 02/13/2019
uid: fundamentals/routing
ms.openlocfilehash: 3dbb2d358ec9e3dcdd96c3771576911d906d796f
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/01/2019
ms.locfileid: "57072044"
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="81cf5-103">Routing w programie ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="81cf5-103">Routing in ASP.NET Core</span></span>

<span data-ttu-id="81cf5-104">Przez [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), i [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="81cf5-104">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

::: moniker range="<= aspnetcore-1.1"

<span data-ttu-id="81cf5-105">Dla wersji 1.1 w tym temacie, Pobierz [routingu w programie ASP.NET Core (w wersji 1.1, plików PDF)](https://webpifeed.blob.core.windows.net/webpifeed/Partners/Routing_1.x.pdf).</span><span class="sxs-lookup"><span data-stu-id="81cf5-105">For the 1.1 version of this topic, download [Routing in ASP.NET Core (version 1.1, PDF)](https://webpifeed.blob.core.windows.net/webpifeed/Partners/Routing_1.x.pdf).</span></span>

::: moniker-end

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="81cf5-106">Routing jest odpowiedzialny za mapowanie żądania identyfikatorów URI punktu końcowego selektory i wysyłania żądań przychodzących do punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="81cf5-106">Routing is responsible for mapping request URIs to endpoint selectors and dispatching incoming requests to endpoints.</span></span> <span data-ttu-id="81cf5-107">Trasy są zdefiniowane w aplikacji i skonfigurowane, po uruchomieniu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-107">Routes are defined in the app and configured when the app starts.</span></span> <span data-ttu-id="81cf5-108">Trasy Opcjonalnie można wyodrębnić wartości z adresu URL zawartych w żądaniu, a te wartości mogą następnie służyć do przetwarzania żądania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-108">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="81cf5-109">Korzystając z informacji o trasie z aplikacji, routing jest również możliwe do generowania adresów URL, które mapują do endpoint selektorów.</span><span class="sxs-lookup"><span data-stu-id="81cf5-109">Using route information from the app, routing is also able to generate URLs that map to endpoint selectors.</span></span>

::: moniker-end

::: moniker range="= aspnetcore-2.2"

<span data-ttu-id="81cf5-110">Aby użyć scenariusze najnowsza wersja routingu platformy ASP.NET Core 2.2, określ [zgodność wersji](xref:mvc/compatibility-version) aby MVC usług rejestracji w `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="81cf5-110">To use the latest routing scenarios in ASP.NET Core 2.2, specify the [compatibility version](xref:mvc/compatibility-version) to the MVC services registration in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddMvc()
    .SetCompatibilityVersion(CompatibilityVersion.Version_2_2);
```

<span data-ttu-id="81cf5-111"><xref:Microsoft.AspNetCore.Mvc.MvcOptions.EnableEndpointRouting> Opcja określa, w przypadku routingu należy wewnętrznie używać oparte na punktach końcowych logiki lub <xref:Microsoft.AspNetCore.Routing.IRouter>— na podstawie logiki platformy ASP.NET Core 2.1 lub wcześniej.</span><span class="sxs-lookup"><span data-stu-id="81cf5-111">The <xref:Microsoft.AspNetCore.Mvc.MvcOptions.EnableEndpointRouting> option determines if routing should internally use endpoint-based logic or the <xref:Microsoft.AspNetCore.Routing.IRouter>-based logic of ASP.NET Core 2.1 or earlier.</span></span> <span data-ttu-id="81cf5-112">Gdy wersja zgodności jest ustawiona do wersji 2.2 lub nowszej, wartość domyślna to `true`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-112">When the compatibility version is set to 2.2 or later, the default value is `true`.</span></span> <span data-ttu-id="81cf5-113">Ustaw wartość `false` do użycia z poprzedniego logikę routingu:</span><span class="sxs-lookup"><span data-stu-id="81cf5-113">Set the value to `false` to use the prior routing logic:</span></span>

```csharp
// Use the routing logic of ASP.NET Core 2.1 or earlier:
services.AddMvc(options => options.EnableEndpointRouting = false)
    .SetCompatibilityVersion(CompatibilityVersion.Version_2_2);
```

<span data-ttu-id="81cf5-114">Aby uzyskać więcej informacji na temat <xref:Microsoft.AspNetCore.Routing.IRouter>-routingu, zobacz artykuł [platformy ASP.NET Core 2.1 wersję tego tematu](/aspnet/core/fundamentals/routing?view=aspnetcore-2.1).</span><span class="sxs-lookup"><span data-stu-id="81cf5-114">For more information on <xref:Microsoft.AspNetCore.Routing.IRouter>-based routing, see the [ASP.NET Core 2.1 version of this topic](/aspnet/core/fundamentals/routing?view=aspnetcore-2.1).</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="81cf5-115">Routing jest odpowiedzialny za mapowania żądania identyfikatorów URI do obsługi trasy i wysyłania żądań przychodzących.</span><span class="sxs-lookup"><span data-stu-id="81cf5-115">Routing is responsible for mapping request URIs to route handlers and dispatching an incoming requests.</span></span> <span data-ttu-id="81cf5-116">Trasy są zdefiniowane w aplikacji i skonfigurowane, po uruchomieniu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-116">Routes are defined in the app and configured when the app starts.</span></span> <span data-ttu-id="81cf5-117">Trasy Opcjonalnie można wyodrębnić wartości z adresu URL zawartych w żądaniu, a te wartości mogą następnie służyć do przetwarzania żądania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-117">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="81cf5-118">Za pomocą skonfigurowanych tras z aplikacji, routing jest w stanie do generowania adresów URL, które mapują do obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-118">Using configured routes from the app, routing is able to generate URLs that map to route handlers.</span></span>

::: moniker-end

::: moniker range="= aspnetcore-2.1"

<span data-ttu-id="81cf5-119">Aby użyć scenariusze najnowsza wersja routingu platformy ASP.NET Core 2.1, należy określić [zgodność wersji](xref:mvc/compatibility-version) aby MVC usług rejestracji w `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="81cf5-119">To use the latest routing scenarios in ASP.NET Core 2.1, specify the [compatibility version](xref:mvc/compatibility-version) to the MVC services registration in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddMvc()
    .SetCompatibilityVersion(CompatibilityVersion.Version_2_1);
```

::: moniker-end

> [!IMPORTANT]
> <span data-ttu-id="81cf5-120">W tym dokumencie opisano niskiego poziomu routingu platformy ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="81cf5-120">This document covers low-level ASP.NET Core routing.</span></span> <span data-ttu-id="81cf5-121">Aby uzyskać informacji na temat routingu platformy ASP.NET Core MVC, zobacz <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-121">For information on ASP.NET Core MVC routing, see <xref:mvc/controllers/routing>.</span></span> <span data-ttu-id="81cf5-122">Aby uzyskać informacji na temat Konwencji tras w stron Razor, zobacz <xref:razor-pages/razor-pages-conventions>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-122">For information on routing conventions in Razor Pages, see <xref:razor-pages/razor-pages-conventions>.</span></span>

<span data-ttu-id="81cf5-123">[Wyświetlanie lub pobieranie przykładowego kodu](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([sposobu pobierania](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="81cf5-123">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="81cf5-124">Podstawy routingu</span><span class="sxs-lookup"><span data-stu-id="81cf5-124">Routing basics</span></span>

<span data-ttu-id="81cf5-125">Większość aplikacji należy wybrać podstawowe i opisowe schemat routingu, aby adresy URL są czytelne i zrozumiałe.</span><span class="sxs-lookup"><span data-stu-id="81cf5-125">Most apps should choose a basic and descriptive routing scheme so that URLs are readable and meaningful.</span></span> <span data-ttu-id="81cf5-126">Domyślną trasę konwencjonalne `{controller=Home}/{action=Index}/{id?}`:</span><span class="sxs-lookup"><span data-stu-id="81cf5-126">The default conventional route `{controller=Home}/{action=Index}/{id?}`:</span></span>

* <span data-ttu-id="81cf5-127">Obsługuje routingu schemat podstawowy i opisowe.</span><span class="sxs-lookup"><span data-stu-id="81cf5-127">Supports a basic and descriptive routing scheme.</span></span>
* <span data-ttu-id="81cf5-128">To dobry punkt wyjścia dla oparty na interfejsie użytkownika aplikacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-128">Is a useful starting point for UI-based apps.</span></span>

<span data-ttu-id="81cf5-129">Deweloperzy zazwyczaj dodania dodatkowych tras zwięzła do obszarów o dużym natężeniu ruchu aplikacji w sytuacjach wyspecjalizowanego (na przykład, blogów i handlu elektronicznego punkty końcowe) przy użyciu [trasowanie atrybutów](xref:mvc/controllers/routing#attribute-routing) lub trasy są konwencjonalne funkcje w wersji dedykowanej.</span><span class="sxs-lookup"><span data-stu-id="81cf5-129">Developers commonly add additional terse routes to high-traffic areas of an app in specialized situations (for example, blog and ecommerce endpoints) using [attribute routing](xref:mvc/controllers/routing#attribute-routing) or dedicated conventional routes.</span></span>

<span data-ttu-id="81cf5-130">Interfejsy API sieci Web należy używać trasowanie atrybutów do modelu funkcjonalność aplikacji jako zestaw zasobów, której operacje są reprezentowane przez zleceń HTTP.</span><span class="sxs-lookup"><span data-stu-id="81cf5-130">Web APIs should use attribute routing to model the app's functionality as a set of resources where operations are represented by HTTP verbs.</span></span> <span data-ttu-id="81cf5-131">Oznacza to, że wiele operacji (na przykład GET, POST) na ten sam zasób logicznej będzie używać tego samego adresu URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-131">This means that many operations (for example, GET, POST) on the same logical resource will use the same URL.</span></span> <span data-ttu-id="81cf5-132">Trasowanie atrybutów zapewnia poziom kontroli, która jest potrzebne do starannie zaprojektować układ publiczny punkt końcowy interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="81cf5-132">Attribute routing provides a level of control that's needed to carefully design an API's public endpoint layout.</span></span>

<span data-ttu-id="81cf5-133">Aplikacje stron razor Użyj domyślnej konwencjonalne routingu w celu obsługi zasobów o nazwie *stron* folderu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-133">Razor Pages apps use default conventional routing to serve named resources in the *Pages* folder of an app.</span></span> <span data-ttu-id="81cf5-134">Dostępne są dodatkowe konwencje umożliwiające dostosowywanie zachowania routingu stron Razor.</span><span class="sxs-lookup"><span data-stu-id="81cf5-134">Additional conventions are available that allow you to customize Razor Pages routing behavior.</span></span> <span data-ttu-id="81cf5-135">Aby uzyskać więcej informacji, zobacz <xref:razor-pages/index> i <xref:razor-pages/razor-pages-conventions>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-135">For more information, see <xref:razor-pages/index> and <xref:razor-pages/razor-pages-conventions>.</span></span>

<span data-ttu-id="81cf5-136">Obsługa generowania adresu URL umożliwia aplikacji, które można rozwijać bez zakodowane na stałe adresy URL, aby połączyć ze sobą aplikacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-136">URL generation support allows the app to be developed without hard-coding URLs to link the app together.</span></span> <span data-ttu-id="81cf5-137">Ta funkcja umożliwia począwszy od podstawowej konfiguracji routingu i modyfikowania trasy, po jest określana przez aplikację zasobu układu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-137">This support allows for starting with a basic routing configuration and modifying the routes after the app's resource layout is determined.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="81cf5-138">Używa routingu *punktów końcowych* (`Endpoint`) do reprezentowania logicznej punktów końcowych w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-138">Routing uses *endpoints* (`Endpoint`) to represent logical endpoints in an app.</span></span>

<span data-ttu-id="81cf5-139">Punkt końcowy Definiuje delegata do przetwarzania żądań i kolekcję dowolnego metadanych.</span><span class="sxs-lookup"><span data-stu-id="81cf5-139">An endpoint defines a delegate to process requests and a collection of arbitrary metadata.</span></span> <span data-ttu-id="81cf5-140">Metadane są używane Implementowanie odciąż przekrojowe zagadnienia, na podstawie zasad i konfiguracji dołączone do każdego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="81cf5-140">The metadata is used implement cross-cutting concerns based on policies and configuration attached to each endpoint.</span></span>

<span data-ttu-id="81cf5-141">Routing system ma następujące cechy:</span><span class="sxs-lookup"><span data-stu-id="81cf5-141">The routing system has the following characteristics:</span></span>

* <span data-ttu-id="81cf5-142">Składni szablonu trasy jest używane do definiowania trasy z parametrami trasy z tokenami.</span><span class="sxs-lookup"><span data-stu-id="81cf5-142">Route template syntax is used to define routes with tokenized route parameters.</span></span>
* <span data-ttu-id="81cf5-143">Konfiguracja punktu końcowego konwencjonalne stylu i stylu dla atrybutu jest dozwolone.</span><span class="sxs-lookup"><span data-stu-id="81cf5-143">Conventional-style and attribute-style endpoint configuration is permitted.</span></span>
* <span data-ttu-id="81cf5-144"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> Służy do określenia, czy parametr adresu URL zawiera prawidłową wartość dla ograniczenia danego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="81cf5-144"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> is used to determine whether a URL parameter contains a valid value for a given endpoint constraint.</span></span>
* <span data-ttu-id="81cf5-145">Modele aplikacji, takich jak strony MVC i Razor zarejestrować wszystkie ich punktów końcowych, które mają przewidywalny implementacji scenariuszy routingu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-145">App models, such as MVC/Razor Pages, register all of their endpoints, which have a predictable implementation of routing scenarios.</span></span>
* <span data-ttu-id="81cf5-146">Routing implementacji sprawia, że decyzje w kwestii routingu wszędzie tam, gdzie pożądana w potoku oprogramowania pośredniczącego.</span><span class="sxs-lookup"><span data-stu-id="81cf5-146">The routing implementation makes routing decisions wherever desired in the middleware pipeline.</span></span>
* <span data-ttu-id="81cf5-147">Oprogramowanie pośredniczące, która pojawia się po oprogramowanie pośredniczące routingu można sprawdzić wynik decyzja punktu końcowego pośredniczącego routingu dla danego identyfikatora URI żądania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-147">Middleware that appears after a Routing Middleware can inspect the result of the Routing Middleware's endpoint decision for a given request URI.</span></span>
* <span data-ttu-id="81cf5-148">Jest możliwe wyliczenie wszystkich punktów końcowych w aplikacji w dowolnym miejscu w potoku oprogramowania pośredniczącego.</span><span class="sxs-lookup"><span data-stu-id="81cf5-148">It's possible to enumerate all of the endpoints in the app anywhere in the middleware pipeline.</span></span>
* <span data-ttu-id="81cf5-149">Aplikację można używać routingu do generowania adresów URL (na przykład przekierowanie lub łączy) na podstawie informacji o punkcie końcowym i związku z tym należy unikać ustaloną adresów URL, co pomoże w utrzymaniu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-149">An app can use routing to generate URLs (for example, for redirection or links) based on endpoint information and thus avoid hard-coded URLs, which helps maintainability.</span></span>
* <span data-ttu-id="81cf5-150">Generowanie adresu URL jest oparty na adresy, które obsługują dowolną rozszerzalności:</span><span class="sxs-lookup"><span data-stu-id="81cf5-150">URL generation is based on addresses, which support arbitrary extensibility:</span></span>

  * <span data-ttu-id="81cf5-151">Interfejs API Generator Link (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>) może zostać rozpoznana w dowolnym miejscu przy użyciu [wstrzykiwanie zależności (DI)](xref:fundamentals/dependency-injection) do generowania adresów URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-151">The Link Generator API (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>) can be resolved anywhere using [dependency injection (DI)](xref:fundamentals/dependency-injection) to generate URLs.</span></span>
  * <span data-ttu-id="81cf5-152">W przypadku, gdy interfejs API Generator Link nie jest dostępna za pośrednictwem DI, <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> zapewnia metody do tworzenia adresów URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-152">Where the Link Generator API isn't available via DI, <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> offers methods to build URLs.</span></span>

> [!NOTE]
> <span data-ttu-id="81cf5-153">Wraz z wydaniem punktu końcowego routingu w programie ASP.NET Core 2.2 łączenie punktu końcowego jest ograniczona do stron MVC i Razor akcje i stron.</span><span class="sxs-lookup"><span data-stu-id="81cf5-153">With the release of endpoint routing in ASP.NET Core 2.2, endpoint linking is limited to MVC/Razor Pages actions and pages.</span></span> <span data-ttu-id="81cf5-154">Rozszerzenia typu łączenia punktu końcowego w przyszłych wersjach planowane jest wprowadzenie możliwości.</span><span class="sxs-lookup"><span data-stu-id="81cf5-154">The expansions of endpoint-linking capabilities is planned for future releases.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="81cf5-155">Używa routingu *trasy* (implementacje <xref:Microsoft.AspNetCore.Routing.IRouter>) do:</span><span class="sxs-lookup"><span data-stu-id="81cf5-155">Routing uses *routes* (implementations of <xref:Microsoft.AspNetCore.Routing.IRouter>) to:</span></span>

* <span data-ttu-id="81cf5-156">Mapowanie żądań przychodzących do *trasy obsługi*.</span><span class="sxs-lookup"><span data-stu-id="81cf5-156">Map incoming requests to *route handlers*.</span></span>
* <span data-ttu-id="81cf5-157">Generowanie adresy URL używane w odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="81cf5-157">Generate the URLs used in responses.</span></span>

<span data-ttu-id="81cf5-158">Domyślnie aplikacja ma jedną kolekcję tras.</span><span class="sxs-lookup"><span data-stu-id="81cf5-158">By default, an app has a single collection of routes.</span></span> <span data-ttu-id="81cf5-159">Po odebraniu żądania trasy w kolekcji są przetwarzane w kolejności, w jakiej znajdują się w kolekcji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-159">When a request arrives, the routes in the collection are processed in the order that they exist in the collection.</span></span> <span data-ttu-id="81cf5-160">Struktura podejmuje próbę dopasowania przychodzącego adresu URL żądania do ścieżki w kolekcji przez wywołanie metody <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> metody dla każdej trasy w kolekcji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-160">The framework attempts to match an incoming request URL to a route in the collection by calling the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each route in the collection.</span></span> <span data-ttu-id="81cf5-161">Odpowiedź może używać routingu do generowania adresów URL (na przykład przekierowanie lub linki), w oparciu o trasach i związku z tym należy unikać ustaloną adresów URL, co pomoże w utrzymaniu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-161">A response can use routing to generate URLs (for example, for redirection or links) based on route information and thus avoid hard-coded URLs, which helps maintainability.</span></span>

<span data-ttu-id="81cf5-162">Routing system ma następujące cechy:</span><span class="sxs-lookup"><span data-stu-id="81cf5-162">The routing system has the following characteristics:</span></span>

* <span data-ttu-id="81cf5-163">Składni szablonu trasy jest używane do definiowania trasy z parametrami trasy z tokenami.</span><span class="sxs-lookup"><span data-stu-id="81cf5-163">Route template syntax is used to define routes with tokenized route parameters.</span></span>
* <span data-ttu-id="81cf5-164">Konfiguracja punktu końcowego konwencjonalne stylu i stylu dla atrybutu jest dozwolone.</span><span class="sxs-lookup"><span data-stu-id="81cf5-164">Conventional-style and attribute-style endpoint configuration is permitted.</span></span>
* <span data-ttu-id="81cf5-165"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> Służy do określenia, czy parametr adresu URL zawiera prawidłową wartość dla ograniczenia danego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="81cf5-165"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> is used to determine whether a URL parameter contains a valid value for a given endpoint constraint.</span></span>
* <span data-ttu-id="81cf5-166">Modele aplikacji, takich jak strony MVC i Razor zarejestrować wszystkie ich tras, które mają przewidywalny implementacji scenariuszy routingu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-166">App models, such as MVC/Razor Pages, register all of their routes, which have a predictable implementation of routing scenarios.</span></span>
* <span data-ttu-id="81cf5-167">Odpowiedź może używać routingu do generowania adresów URL (na przykład przekierowanie lub linki), w oparciu o trasach i związku z tym należy unikać ustaloną adresów URL, co pomoże w utrzymaniu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-167">A response can use routing to generate URLs (for example, for redirection or links) based on route information and thus avoid hard-coded URLs, which helps maintainability.</span></span>
* <span data-ttu-id="81cf5-168">Generowanie adresu URL opiera się na trasach, które obsługują dowolną rozszerzalności.</span><span class="sxs-lookup"><span data-stu-id="81cf5-168">URL generation is based on routes, which support arbitrary extensibility.</span></span> <span data-ttu-id="81cf5-169"><xref:Microsoft.AspNetCore.Mvc.IUrlHelper> udostępnia metody do tworzenia adresów URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-169"><xref:Microsoft.AspNetCore.Mvc.IUrlHelper> offers methods to build URLs.</span></span>

::: moniker-end

<span data-ttu-id="81cf5-170">Routing jest podłączony do [oprogramowania pośredniczącego](xref:fundamentals/middleware/index) potoku przez <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> klasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-170">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> class.</span></span> <span data-ttu-id="81cf5-171">[Platforma ASP.NET Core MVC](xref:mvc/overview) dodaje routingu do potoku oprogramowania pośredniczącego jako część swojej konfiguracji i obsługuje routing w aplikacji MVC i stron Razor.</span><span class="sxs-lookup"><span data-stu-id="81cf5-171">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration and handles routing in MVC and Razor Pages apps.</span></span> <span data-ttu-id="81cf5-172">Aby dowiedzieć się, jak używać routingu jako składnik autonomicznych, zobacz [użycia routingu oprogramowania pośredniczącego](#use-routing-middleware) sekcji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-172">To learn how to use routing as a standalone component, see the [Use Routing Middleware](#use-routing-middleware) section.</span></span>

### <a name="url-matching"></a><span data-ttu-id="81cf5-173">Dopasowanie adresu URL</span><span class="sxs-lookup"><span data-stu-id="81cf5-173">URL matching</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="81cf5-174">Dopasowanie adresu URL jest proces, który wysyła routingu przychodzącego żądania *punktu końcowego*.</span><span class="sxs-lookup"><span data-stu-id="81cf5-174">URL matching is the process by which routing dispatches an incoming request to an *endpoint*.</span></span> <span data-ttu-id="81cf5-175">Ten proces jest na podstawie danych ze ścieżki adresu URL, ale może zostać rozszerzony do należy wziąć pod uwagę wszystkie dane w żądaniu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-175">This process is based on data in the URL path but can be extended to consider any data in the request.</span></span> <span data-ttu-id="81cf5-176">Możliwość wysyłania żądań do rozdzielenia obsługi to klucz do skalowania, rozmiar i złożoność aplikacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-176">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an app.</span></span>

<span data-ttu-id="81cf5-177">System routingu w routingu punkt końcowy jest odpowiedzialny za wszystkie dispatching decyzje.</span><span class="sxs-lookup"><span data-stu-id="81cf5-177">The routing system in endpoint routing is responsible for all dispatching decisions.</span></span> <span data-ttu-id="81cf5-178">Ponieważ oprogramowanie pośredniczące stosuje zasady, w oparciu o wybrany punkt końcowy, ważne jest, czy każda decyzja może wpłynąć na wysyłanie lub stosowania zasad zabezpieczeń składa się w systemie routingu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-178">Since the middleware applies policies based on the selected endpoint, it's important that any decision that can affect dispatching or the application of security policies is made inside the routing system.</span></span>

<span data-ttu-id="81cf5-179">Kiedy delegat punkt końcowy jest wykonywana, sprawdzanie właściwości [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) są ustawione na odpowiednie wartości oparte na przetwarzanie żądań wykonywane do tej pory.</span><span class="sxs-lookup"><span data-stu-id="81cf5-179">When the endpoint delegate is executed, the properties of [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) are set to appropriate values based on the request processing performed thus far.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="81cf5-180">Dopasowanie adresu URL jest proces, który wysyła routingu przychodzącego żądania *obsługi*.</span><span class="sxs-lookup"><span data-stu-id="81cf5-180">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="81cf5-181">Ten proces jest na podstawie danych ze ścieżki adresu URL, ale może zostać rozszerzony do należy wziąć pod uwagę wszystkie dane w żądaniu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-181">This process is based on data in the URL path but can be extended to consider any data in the request.</span></span> <span data-ttu-id="81cf5-182">Możliwość wysyłania żądań do rozdzielenia obsługi to klucz do skalowania, rozmiar i złożoność aplikacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-182">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an app.</span></span>

<span data-ttu-id="81cf5-183">Wprowadź żądań przychodzących <xref:Microsoft.AspNetCore.Builder.RouterMiddleware>, która wywołuje metodę <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> metody dla każdej trasy w sekwencji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-183">Incoming requests enter the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware>, which calls the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each route in sequence.</span></span> <span data-ttu-id="81cf5-184"><xref:Microsoft.AspNetCore.Routing.IRouter> Wybierze wystąpienie czy *obsługi* żądania przez ustawienie [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) do innych niż null <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-184">The <xref:Microsoft.AspNetCore.Routing.IRouter> instance chooses whether to *handle* the request by setting the [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) to a non-null <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span></span> <span data-ttu-id="81cf5-185">Jeśli trasa Ustawia program obsługi żądania, route zatrzymanie przetwarzania i program obsługi jest wywoływane w celu przetworzenia żądania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-185">If a route sets a handler for the request, route processing stops, and the handler is invoked to process the request.</span></span> <span data-ttu-id="81cf5-186">Jeśli żadna procedura obsługi trasy zostanie znaleziony można przetworzyć żądania, oprogramowanie pośredniczące przekazywało żądanie do następnego oprogramowania pośredniczącego w potoku żądania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-186">If no route handler is found to process the request, the middleware hands the request off to the next middleware in the request pipeline.</span></span>

<span data-ttu-id="81cf5-187">Podstawowe dane wejściowe <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> jest [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) skojarzone z bieżącego żądania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-187">The primary input to <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> is the [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) associated with the current request.</span></span> <span data-ttu-id="81cf5-188">[RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler) i [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) są dane wyjściowe po dopasowaniu trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-188">The [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler) and [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) are outputs set after a route is matched.</span></span>

<span data-ttu-id="81cf5-189">Dopasowanie, która wywołuje <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> spowoduje także ustawienie właściwości [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) odpowiednie wartości oparte na przetwarzanie żądań wykonywane do tej pory.</span><span class="sxs-lookup"><span data-stu-id="81cf5-189">A match that calls <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> also sets the properties of the [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) to appropriate values based on the request processing performed thus far.</span></span>

::: moniker-end

<span data-ttu-id="81cf5-190">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) jest słownikiem *wartości trasy* wyprodukowanych z trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-190">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="81cf5-191">Wartości te są zwykle określane przez tokenizowanie adres URL i może służyć do przyjmowania danych wejściowych użytkownika lub dodatkowo dispatching decyzje wewnątrz aplikacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-191">These values are usually determined by tokenizing the URL and can be used to accept user input or to make further dispatching decisions inside the app.</span></span>

<span data-ttu-id="81cf5-192">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) to zbiór właściwości dodatkowych danych związanych z dopasowanej trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-192">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="81cf5-193"><xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*> dostarczone dane o pomocy technicznej kojarzenie stanu z każdej trasy tak, aby aplikacja podejmować decyzje oparte na trasie, która pasuje.</span><span class="sxs-lookup"><span data-stu-id="81cf5-193"><xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*> are provided to support associating state data with each route so that the app can make decisions based on which route matched.</span></span> <span data-ttu-id="81cf5-194">Te wartości są definiowane przez projektanta i wykonaj **nie** mają wpływ na zachowanie routingu w dowolny sposób.</span><span class="sxs-lookup"><span data-stu-id="81cf5-194">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="81cf5-195">Ponadto przechowalni wartości w [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) może być dowolnego typu, w przeciwieństwie do [RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values), która musi być konwertowany do i z ciągów.</span><span class="sxs-lookup"><span data-stu-id="81cf5-195">Additionally, values stashed in [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) can be of any type, in contrast to [RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values), which must be convertible to and from strings.</span></span>

<span data-ttu-id="81cf5-196">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers) znajduje się lista tras, na których uczestniczyła w pomyślnie dopasowywania żądania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-196">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers) is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="81cf5-197">Trasy mogą być zagnieżdżone wewnątrz siebie nawzajem.</span><span class="sxs-lookup"><span data-stu-id="81cf5-197">Routes can be nested inside of one another.</span></span> <span data-ttu-id="81cf5-198"><xref:Microsoft.AspNetCore.Routing.RouteData.Routers> Właściwość odzwierciedla drogę przez drzewo logiczne tras, które spowodowały dopasowanie.</span><span class="sxs-lookup"><span data-stu-id="81cf5-198">The <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="81cf5-199">Ogólnie rzecz biorąc, pierwszy element <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> jest kolekcją tras i powinny być używane do generowania adresu URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-199">Generally, the first item in <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> is the route collection and should be used for URL generation.</span></span> <span data-ttu-id="81cf5-200">Ostatnim elementem w <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> jest programu obsługi trasy, który jest zgodny.</span><span class="sxs-lookup"><span data-stu-id="81cf5-200">The last item in <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="81cf5-201">Generowanie adresu URL</span><span class="sxs-lookup"><span data-stu-id="81cf5-201">URL generation</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="81cf5-202">Generowanie adresu URL to proces, routingu, które można utworzyć ścieżki adresu URL na podstawie zestawu wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-202">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="81cf5-203">Dzięki temu do logicznego rozdzielania między punktami końcowymi usługi oraz w adresach URL, które do nich dostęp.</span><span class="sxs-lookup"><span data-stu-id="81cf5-203">This allows for a logical separation between your endpoints and the URLs that access them.</span></span>

<span data-ttu-id="81cf5-204">Routing punktu końcowego zawiera interfejsu API Generator łącza (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>).</span><span class="sxs-lookup"><span data-stu-id="81cf5-204">Endpoint routing includes the Link Generator API (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>).</span></span> <span data-ttu-id="81cf5-205"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> to usługa singleton, który można pobrać z DI.</span><span class="sxs-lookup"><span data-stu-id="81cf5-205"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> is a singleton service that can be retrieved from DI.</span></span> <span data-ttu-id="81cf5-206">Interfejs API mogą być używane poza Kontekst wykonywania żądania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-206">The API can be used outside of the context of an executing request.</span></span> <span data-ttu-id="81cf5-207">MVC <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> i scenariusze, które zależą od <xref:Microsoft.AspNetCore.Mvc.IUrlHelper>, takich jak [pomocników tagów](xref:mvc/views/tag-helpers/intro), pomocników HTML i [wyników akcji](xref:mvc/controllers/actions), użyj generatora łącze, aby podać możliwości generowania łącza.</span><span class="sxs-lookup"><span data-stu-id="81cf5-207">MVC's <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> and scenarios that rely on <xref:Microsoft.AspNetCore.Mvc.IUrlHelper>, such as [Tag Helpers](xref:mvc/views/tag-helpers/intro), HTML Helpers, and [Action Results](xref:mvc/controllers/actions), use the link generator to provide link generating capabilities.</span></span>

<span data-ttu-id="81cf5-208">Generator łącze opiera się na koncepcji *adres* i *adres, systemy*.</span><span class="sxs-lookup"><span data-stu-id="81cf5-208">The link generator is backed by the concept of an *address* and *address schemes*.</span></span> <span data-ttu-id="81cf5-209">Schemat adresów to sposób określenia punktów końcowych, które należy rozważyć dotyczącymi generowania łączy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-209">An address scheme is a way of determining the endpoints that should be considered for link generation.</span></span> <span data-ttu-id="81cf5-210">Na przykład nazwy trasy i scenariusze wartości trasy, przez wielu użytkowników są znane ze strony MVC i Razor są implementowane jako schemat adresów.</span><span class="sxs-lookup"><span data-stu-id="81cf5-210">For example, the route name and route values scenarios many users are familiar with from MVC/Razor Pages are implemented as an address scheme.</span></span>

<span data-ttu-id="81cf5-211">Generator łącza można połączyć do stron MVC i Razor akcje i stron za pomocą następujących metod rozszerzenia:</span><span class="sxs-lookup"><span data-stu-id="81cf5-211">The link generator can link to MVC/Razor Pages actions and pages via the following extension methods:</span></span>

* <xref:Microsoft.AspNetCore.Routing.ControllerLinkGeneratorExtensions.GetPathByAction*>
* <xref:Microsoft.AspNetCore.Routing.ControllerLinkGeneratorExtensions.GetUriByAction*>
* <xref:Microsoft.AspNetCore.Routing.PageLinkGeneratorExtensions.GetPathByPage*>
* <xref:Microsoft.AspNetCore.Routing.PageLinkGeneratorExtensions.GetUriByPage*>

<span data-ttu-id="81cf5-212">Przeciążenia metody te akceptuje argumenty, które obejmują `HttpContext`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-212">An overload of these methods accepts arguments that include the `HttpContext`.</span></span> <span data-ttu-id="81cf5-213">Te metody są funkcjonalnie równoważne `Url.Action` i `Url.Page` , ale oferują one większą elastyczność i opcje.</span><span class="sxs-lookup"><span data-stu-id="81cf5-213">These methods are functionally equivalent to `Url.Action` and `Url.Page` but offer additional flexibility and options.</span></span>

<span data-ttu-id="81cf5-214">`GetPath*` Metody są najbardziej podobny do `Url.Action` i `Url.Page` , generują identyfikatorem URI zawierającym ścieżką bezwzględną.</span><span class="sxs-lookup"><span data-stu-id="81cf5-214">The `GetPath*` methods are most similar to `Url.Action` and `Url.Page` in that they generate a URI containing an absolute path.</span></span> <span data-ttu-id="81cf5-215">`GetUri*` Metody zawsze Generuj bezwzględny identyfikator URI zawierający schematu i hosta.</span><span class="sxs-lookup"><span data-stu-id="81cf5-215">The `GetUri*` methods always generate an absolute URI containing a scheme and host.</span></span> <span data-ttu-id="81cf5-216">Metody, które akceptują `HttpContext` wygenerować identyfikator URI w kontekście wykonywania żądania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-216">The methods that accept an `HttpContext` generate a URI in the context of the executing request.</span></span> <span data-ttu-id="81cf5-217">Wartości trasy otoczenia, adres URL ścieżki podstawowej, schematu i hosta z wykonywania żądania są używane, chyba że zastąpione.</span><span class="sxs-lookup"><span data-stu-id="81cf5-217">The ambient route values, URL base path, scheme, and host from the executing request are used unless overridden.</span></span>

<span data-ttu-id="81cf5-218"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> jest wywoływana przy użyciu adresu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-218"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> is called with an address.</span></span> <span data-ttu-id="81cf5-219">Generowanie identyfikatora URI odbywa się w dwóch etapach:</span><span class="sxs-lookup"><span data-stu-id="81cf5-219">Generating a URI occurs in two steps:</span></span>

1. <span data-ttu-id="81cf5-220">Adres jest powiązany z listy punktów końcowych, które pasują do adresu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-220">An address is bound to a list of endpoints that match the address.</span></span>
1. <span data-ttu-id="81cf5-221">Każdy punkt końcowy `RoutePattern` jest szacowana aż do znalezienia wzorzec trasy, który pasuje do podanej wartości.</span><span class="sxs-lookup"><span data-stu-id="81cf5-221">Each endpoint's `RoutePattern` is evaluated until a route pattern that matches the supplied values is found.</span></span> <span data-ttu-id="81cf5-222">Dane wyjściowe w połączeniu z innymi częściami URI dostarczane do generatora łącze i zwrócony.</span><span class="sxs-lookup"><span data-stu-id="81cf5-222">The resulting output is combined with the other URI parts supplied to the link generator and returned.</span></span>

<span data-ttu-id="81cf5-223">Metod dostarczonych przez <xref:Microsoft.AspNetCore.Routing.LinkGenerator> obsługują możliwości generowania łącza standardowego dla dowolnego typu adresu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-223">The methods provided by <xref:Microsoft.AspNetCore.Routing.LinkGenerator> support standard link generation capabilities for any type of address.</span></span> <span data-ttu-id="81cf5-224">Jest Najwygodniejszym sposobem użycia link generator za pośrednictwem metody rozszerzenia, wykonujących operacje dla typu określonego adresu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-224">The most convenient way to use the link generator is through extension methods that perform operations for a specific address type.</span></span>

| <span data-ttu-id="81cf5-225">Metoda rozszerzenia</span><span class="sxs-lookup"><span data-stu-id="81cf5-225">Extension Method</span></span>   | <span data-ttu-id="81cf5-226">Opis</span><span class="sxs-lookup"><span data-stu-id="81cf5-226">Description</span></span>                                                         |
| ------------------ | ------------------------------------------------------------------- |
| <xref:Microsoft.AspNetCore.Routing.LinkGenerator.GetPathByAddress*> | <span data-ttu-id="81cf5-227">Generuje identyfikator URI przy użyciu ścieżki bezwzględnej na podstawie podanej wartości.</span><span class="sxs-lookup"><span data-stu-id="81cf5-227">Generates a URI with an absolute path based on the provided values.</span></span> |
| <xref:Microsoft.AspNetCore.Routing.LinkGenerator.GetUriByAddress*> | <span data-ttu-id="81cf5-228">Generuje bezwzględny identyfikator URI na podstawie podanej wartości.</span><span class="sxs-lookup"><span data-stu-id="81cf5-228">Generates an absolute URI based on the provided values.</span></span>             |

> [!WARNING]
> <span data-ttu-id="81cf5-229">Należy zwrócić uwagę na następujące implikacje wywoływania <xref:Microsoft.AspNetCore.Routing.LinkGenerator> metody:</span><span class="sxs-lookup"><span data-stu-id="81cf5-229">Pay attention to the following implications of calling <xref:Microsoft.AspNetCore.Routing.LinkGenerator> methods:</span></span>
>
> * <span data-ttu-id="81cf5-230">Użyj `GetUri*` metody rozszerzenia z rozwagą w konfiguracji aplikacji, która nie weryfikuje `Host` nagłówka żądania przychodzące.</span><span class="sxs-lookup"><span data-stu-id="81cf5-230">Use `GetUri*` extension methods with caution in an app configuration that doesn't validate the `Host` header of incoming requests.</span></span> <span data-ttu-id="81cf5-231">Jeśli `Host` nie jest zweryfikowany nagłówka żądania przychodzące, żądania niezaufanych danych wejściowych może zostać odesłany do klienta w identyfikatorach URI w widoku/strony.</span><span class="sxs-lookup"><span data-stu-id="81cf5-231">If the `Host` header of incoming requests isn't validated, untrusted request input can be sent back to the client in URIs in a view/page.</span></span> <span data-ttu-id="81cf5-232">Zaleca się, że wszystkie aplikacje produkcyjne skonfigurować ich serwera, aby sprawdzić poprawność `Host` nagłówka przed znanym prawidłowych wartości.</span><span class="sxs-lookup"><span data-stu-id="81cf5-232">We recommend that all production apps configure their server to validate the `Host` header against known valid values.</span></span>
>
> * <span data-ttu-id="81cf5-233">Użyj <xref:Microsoft.AspNetCore.Routing.LinkGenerator> ostrożnie w oprogramowaniu pośredniczącym w połączeniu z `Map` lub `MapWhen`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-233">Use <xref:Microsoft.AspNetCore.Routing.LinkGenerator> with caution in middleware in combination with `Map` or `MapWhen`.</span></span> <span data-ttu-id="81cf5-234">`Map*` zmiany ścieżki podstawowej wykonywania żądania ma wpływ na dane wyjściowe generowania łączy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-234">`Map*` changes the base path of the executing request, which affects the output of link generation.</span></span> <span data-ttu-id="81cf5-235">Wszystkie <xref:Microsoft.AspNetCore.Routing.LinkGenerator> interfejsy API umożliwiają określenie ścieżki podstawowej.</span><span class="sxs-lookup"><span data-stu-id="81cf5-235">All of the <xref:Microsoft.AspNetCore.Routing.LinkGenerator> APIs allow specifying a base path.</span></span> <span data-ttu-id="81cf5-236">Zawsze określać pustej ścieżki podstawowej, aby cofnąć `Map*`jego wpływ na generowanie konsolidacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-236">Always specify an empty base path to undo `Map*`'s affect on link generation.</span></span>

## <a name="differences-from-earlier-versions-of-routing"></a><span data-ttu-id="81cf5-237">Różnice z wcześniejszych wersji routingu</span><span class="sxs-lookup"><span data-stu-id="81cf5-237">Differences from earlier versions of routing</span></span>

<span data-ttu-id="81cf5-238">Kilka istnieją różnice między punktu końcowego routingu w programie ASP.NET Core 2.2 lub nowszej i wcześniejszych wersjach routingu w programie ASP.NET Core:</span><span class="sxs-lookup"><span data-stu-id="81cf5-238">A few differences exist between endpoint routing in ASP.NET Core 2.2 or later and earlier versions of routing in ASP.NET Core:</span></span>

* <span data-ttu-id="81cf5-239">System routingu punkt końcowy nie obsługuje <xref:Microsoft.AspNetCore.Routing.IRouter>— na podstawie rozszerzalności, w tym dziedziczenie z <xref:Microsoft.AspNetCore.Routing.Route>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-239">The endpoint routing system doesn't support <xref:Microsoft.AspNetCore.Routing.IRouter>-based extensibility, including inheriting from <xref:Microsoft.AspNetCore.Routing.Route>.</span></span>

* <span data-ttu-id="81cf5-240">Punkt końcowy routingu nie obsługuje [WebApiCompatShim](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.WebApiCompatShim).</span><span class="sxs-lookup"><span data-stu-id="81cf5-240">Endpoint routing doesn't support [WebApiCompatShim](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.WebApiCompatShim).</span></span> <span data-ttu-id="81cf5-241">Użyj 2.1 [zgodność wersji](xref:mvc/compatibility-version) (`.SetCompatibilityVersion(CompatibilityVersion.Version_2_1)`) aby kontynuować korzystanie z podkładki zgodności.</span><span class="sxs-lookup"><span data-stu-id="81cf5-241">Use the 2.1 [compatibility version](xref:mvc/compatibility-version) (`.SetCompatibilityVersion(CompatibilityVersion.Version_2_1)`) to continue using the compatibility shim.</span></span>

* <span data-ttu-id="81cf5-242">Routingu punkt końcowy ma różne zachowania dla małych i wielkich liter wygenerowanego identyfikatorów URI, korzystając z konwencjonalnych trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-242">Endpoint Routing has different behavior for the casing of generated URIs when using conventional routes.</span></span>

  <span data-ttu-id="81cf5-243">Należy wziąć pod uwagę następujący szablon trasy domyślne:</span><span class="sxs-lookup"><span data-stu-id="81cf5-243">Consider the following default route template:</span></span>

  ```csharp
  app.UseMvc(routes =>
  {
      routes.MapRoute("default", "{controller=Home}/{action=Index}/{id?}");
  });
  ```

  <span data-ttu-id="81cf5-244">Załóżmy, że wygenerować łącze do akcji, używając następujących tras:</span><span class="sxs-lookup"><span data-stu-id="81cf5-244">Suppose you generate a link to an action using the following route:</span></span>

  ```csharp
  var link = Url.Action("ReadPost", "blog", new { id = 17, });
  ```

  <span data-ttu-id="81cf5-245">Za pomocą <xref:Microsoft.AspNetCore.Routing.IRouter>-routing oparty na, ten kod generuje identyfikator URI zestawu `/blog/ReadPost/17`, który uwzględnia wielkość liter w wyrazie wartość podana trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-245">With <xref:Microsoft.AspNetCore.Routing.IRouter>-based routing, this code generates a URI of `/blog/ReadPost/17`, which respects the casing of the provided route value.</span></span> <span data-ttu-id="81cf5-246">Tworzy punkt końcowy routingu w programie ASP.NET Core 2.2 lub nowszym `/Blog/ReadPost/17` (Wielka "Blog").</span><span class="sxs-lookup"><span data-stu-id="81cf5-246">Endpoint routing in ASP.NET Core 2.2 or later produces `/Blog/ReadPost/17` ("Blog" is capitalized).</span></span> <span data-ttu-id="81cf5-247">Udostępnia punkt końcowy routingu `IOutboundParameterTransformer` interfejsu, który może służyć do dostosowywania zachowania globalnie lub aby zastosować różnych konwencji mapowania adresów URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-247">Endpoint routing provides the `IOutboundParameterTransformer` interface that can be used to customize this behavior globally or to apply different conventions for mapping URLs.</span></span>

  <span data-ttu-id="81cf5-248">Aby uzyskać więcej informacji, zobacz [odwołania do parametru transformatora](#parameter-transformer-reference) sekcji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-248">For more information, see the [Parameter transformer reference](#parameter-transformer-reference) section.</span></span>

* <span data-ttu-id="81cf5-249">Generowanie konsolidacji używane przez strony MVC i Razor z konwencjonalnych trasy zachowuje się inaczej, podczas próby łącze do kontrolera/akcji lub strona, która nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="81cf5-249">Link Generation used by MVC/Razor Pages with conventional routes behaves differently when attempting to link to an controller/action or page that doesn't exist.</span></span>

  <span data-ttu-id="81cf5-250">Należy wziąć pod uwagę następujący szablon trasy domyślne:</span><span class="sxs-lookup"><span data-stu-id="81cf5-250">Consider the following default route template:</span></span>

  ```csharp
  app.UseMvc(routes =>
  {
      routes.MapRoute("default", "{controller=Home}/{action=Index}/{id?}");
  });
  ```

  <span data-ttu-id="81cf5-251">Załóżmy, że wygenerować łącze do akcji, używając domyślnego szablonu z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="81cf5-251">Suppose you generate a link to an action using the default template with the following:</span></span>

  ```csharp
  var link = Url.Action("ReadPost", "Blog", new { id = 17, });
  ```

  <span data-ttu-id="81cf5-252">Za pomocą `IRouter`-routing oparty na, wynik jest zawsze `/Blog/ReadPost/17`, nawet jeśli `BlogController` nie istnieje lub nie ma `ReadPost` metody akcji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-252">With `IRouter`-based routing, the result is always `/Blog/ReadPost/17`, even if the `BlogController` doesn't exist or doesn't have a `ReadPost` action method.</span></span> <span data-ttu-id="81cf5-253">Tworzy punkt końcowy routingu w programie ASP.NET Core 2.2 lub nowszym zgodnie z oczekiwaniami, `/Blog/ReadPost/17` istnienia metody akcji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-253">As expected, endpoint routing in ASP.NET Core 2.2 or later produces `/Blog/ReadPost/17` if the action method exists.</span></span> <span data-ttu-id="81cf5-254">*Jednak routingu punkt końcowy tworzy ciąg pusty, jeśli akcja nie istnieje.*</span><span class="sxs-lookup"><span data-stu-id="81cf5-254">*However, endpoint routing produces an empty string if the action doesn't exist.*</span></span> <span data-ttu-id="81cf5-255">Model routingu punkt końcowy nie zakłada, że punkt końcowy istnieje, jeśli akcja nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="81cf5-255">Conceptually, endpoint routing doesn't assume that the endpoint exists if the action doesn't exist.</span></span>

* <span data-ttu-id="81cf5-256">Generowanie konsolidacji *algorytm unieważniania otoczenia wartość* zachowuje się inaczej, gdy jest używana z routingiem punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="81cf5-256">The link generation *ambient value invalidation algorithm* behaves differently when used with endpoint routing.</span></span>

  <span data-ttu-id="81cf5-257">*Wartość otoczenia unieważniania* to algorytm, który decyduje, wartości trasy, które z obecnie wykonywanym żądania (wartości otoczenia) mogą być używane w operacje generowania łączy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-257">*Ambient value invalidation* is the algorithm that decides which route values from the currently executing request (the ambient values) can be used in link generation operations.</span></span> <span data-ttu-id="81cf5-258">Tradycyjnie routing zawsze unieważniony wartości dodatkowe trasy, podczas łączenia się różne akcje.</span><span class="sxs-lookup"><span data-stu-id="81cf5-258">Conventional routing always invalidated extra route values when linking to a different action.</span></span> <span data-ttu-id="81cf5-259">Routing atrybutów w tamtym tego zachowania, przed wydaniem programu ASP.NET Core 2.2.</span><span class="sxs-lookup"><span data-stu-id="81cf5-259">Attribute routing didn't have this behavior prior to the release of ASP.NET Core 2.2.</span></span> <span data-ttu-id="81cf5-260">We wcześniejszych wersjach programu ASP.NET Core łącza do innej akcji, używanego przez takie same nazwy parametrów trasy spowodowały błędy generowania łączy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-260">In earlier versions of ASP.NET Core, links to another action that use the same route parameter names resulted in link generation errors.</span></span> <span data-ttu-id="81cf5-261">W programie ASP.NET Core 2.2 lub nowszej obie formy routingu unieważnienie wartości podczas łączenia się z inną akcję.</span><span class="sxs-lookup"><span data-stu-id="81cf5-261">In ASP.NET Core 2.2 or later, both forms of routing invalidate values when linking to another action.</span></span>

  <span data-ttu-id="81cf5-262">Rozważmy następujący przykład platformy ASP.NET Core 2.1 lub wcześniej.</span><span class="sxs-lookup"><span data-stu-id="81cf5-262">Consider the following example in ASP.NET Core 2.1 or earlier.</span></span> <span data-ttu-id="81cf5-263">Podczas łączenia z inną akcję (lub innej strony), wartości trasy można będzie wykorzystać ponownie w sposób niepożądane.</span><span class="sxs-lookup"><span data-stu-id="81cf5-263">When linking to another action (or another page), route values can be reused in undesirable ways.</span></span>

  <span data-ttu-id="81cf5-264">W */Pages/Store/Product.cshtml*:</span><span class="sxs-lookup"><span data-stu-id="81cf5-264">In */Pages/Store/Product.cshtml*:</span></span>

  ```cshtml
  @page "{id}"
  @Url.Page("/Login")
  ```

  <span data-ttu-id="81cf5-265">W */Pages/Login.cshtml*:</span><span class="sxs-lookup"><span data-stu-id="81cf5-265">In */Pages/Login.cshtml*:</span></span>

  ```cshtml
  @page "{id?}"
  ```

  <span data-ttu-id="81cf5-266">Jeśli identyfikator URI jest `/Store/Product/18` platformy ASP.NET Core 2.1 lub wcześniej, łącze na stronie Store/informacji przez `@Url.Page("/Login")` jest `/Login/18`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-266">If the URI is `/Store/Product/18` in ASP.NET Core 2.1 or earlier, the link generated on the Store/Info page by `@Url.Page("/Login")` is `/Login/18`.</span></span> <span data-ttu-id="81cf5-267">`id` Wartość 18 zostanie ponownie użyty, nawet jeśli miejsce docelowe łącza jest całkowicie różne części aplikacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-267">The `id` value of 18 is reused, even though the link destination is different part of the app entirely.</span></span> <span data-ttu-id="81cf5-268">`id` Trasy wartości w kontekście `/Login` strony jest prawdopodobnie wartość Identyfikatora użytkownika, nie wartość Identyfikatora produktu magazynu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-268">The `id` route value in the context of the `/Login` page is probably a user ID value, not a store product ID value.</span></span>

  <span data-ttu-id="81cf5-269">W punkcie końcowym routingu za pomocą platformy ASP.NET Core 2.2 lub nowszej, wynik jest `/Login`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-269">In endpoint routing with ASP.NET Core 2.2 or later, the result is `/Login`.</span></span> <span data-ttu-id="81cf5-270">Otoczenia wartości nie są ponownie użyte w przypadku połączonych miejscem docelowym jest inną akcję lub strony.</span><span class="sxs-lookup"><span data-stu-id="81cf5-270">Ambient values aren't reused when the linked destination is a different action or page.</span></span>

* <span data-ttu-id="81cf5-271">Składnia parametru trasy Pełna zgodnooć wersji: Ukośników nie są zakodowane, korzystając z double — gwiazdka (`**`) parametrze wychwytywania składni.</span><span class="sxs-lookup"><span data-stu-id="81cf5-271">Round-tripping route parameter syntax: Forward slashes aren't encoded when using a double-asterisk (`**`) catch-all parameter syntax.</span></span>

  <span data-ttu-id="81cf5-272">Podczas generowania łącza routingu systemu koduje wartość przechwycone z double — gwiazdka (`**`) parametrze wychwytywania (na przykład `{**myparametername}`) z wyjątkiem kreski ułamkowe.</span><span class="sxs-lookup"><span data-stu-id="81cf5-272">During link generation, the routing system encodes the value captured in a double-asterisk (`**`) catch-all parameter (for example, `{**myparametername}`) except the forward slashes.</span></span> <span data-ttu-id="81cf5-273">Przechwytującą cały gwiazdki podwójnej precyzji jest obsługiwane w przypadku `IRouter`— na podstawie routingu w programie ASP.NET Core 2.2 lub nowszym.</span><span class="sxs-lookup"><span data-stu-id="81cf5-273">The double-asterisk catch-all is supported with `IRouter`-based routing in ASP.NET Core 2.2 or later.</span></span>

  <span data-ttu-id="81cf5-274">Składnia parametru wychwytywania jednej gwiazdki w poprzednich wersjach programu ASP.NET Core (`{*myparametername}`) będą nadal obsługiwane i są zakodowane ukośników.</span><span class="sxs-lookup"><span data-stu-id="81cf5-274">The single asterisk catch-all parameter syntax in prior versions of ASP.NET Core (`{*myparametername}`) remains supported, and forward slashes are encoded.</span></span>

  | <span data-ttu-id="81cf5-275">trasy</span><span class="sxs-lookup"><span data-stu-id="81cf5-275">Route</span></span>              | <span data-ttu-id="81cf5-276">Link generowane przez program</span><span class="sxs-lookup"><span data-stu-id="81cf5-276">Link generated with</span></span><br>`Url.Action(new { category = "admin/products" })`&hellip; |
  | ------------------ | --------------------------------------------------------------------- |
  | `/search/{*page}`  | <span data-ttu-id="81cf5-277">`/search/admin%2Fproducts` (ukośnik jest zakodowany)</span><span class="sxs-lookup"><span data-stu-id="81cf5-277">`/search/admin%2Fproducts` (the forward slash is encoded)</span></span>             |
  | `/search/{**page}` | `/search/admin/products`                                              |

### <a name="middleware-example"></a><span data-ttu-id="81cf5-278">Przykład oprogramowania pośredniczącego</span><span class="sxs-lookup"><span data-stu-id="81cf5-278">Middleware example</span></span>

<span data-ttu-id="81cf5-279">W poniższym przykładzie korzysta z oprogramowania pośredniczącego <xref:Microsoft.AspNetCore.Routing.LinkGenerator> interfejsu API, aby utworzyć łącze do metody akcji, która wyświetla listę przechowywane produktów.</span><span class="sxs-lookup"><span data-stu-id="81cf5-279">In the following example, a middleware uses the <xref:Microsoft.AspNetCore.Routing.LinkGenerator> API to create link to an action method that lists store products.</span></span> <span data-ttu-id="81cf5-280">Za pomocą generatora łącza, wstawianie go do klasy i wywoływania `GenerateLink` jest dostępny dla każdej klasy w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-280">Using the link generator by injecting it into a class and calling `GenerateLink` is available to any class in an app.</span></span>

```csharp
using Microsoft.AspNetCore.Routing;

public class ProductsLinkMiddleware
{
    private readonly LinkGenerator _linkGenerator;

    public ProductsLinkMiddleware(RequestDelegate next, LinkGenerator linkGenerator)
    {
        _linkGenerator = linkGenerator;
    }

    public async Task InvokeAsync(HttpContext httpContext)
    {
        var url = _linkGenerator.GetPathByAction("ListProducts", "Store");

        httpContext.Response.ContentType = "text/plain";

        await httpContext.Response.WriteAsync($"Go to {url} to see our products.");
    }
}
```

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="81cf5-281">Generowanie adresu URL to proces, routingu, które można utworzyć ścieżki adresu URL na podstawie zestawu wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-281">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="81cf5-282">Dzięki temu do logicznego rozdzielania między obsługi trasy i adresów URL, które do nich dostęp.</span><span class="sxs-lookup"><span data-stu-id="81cf5-282">This allows for a logical separation between route handlers and the URLs that access them.</span></span>

<span data-ttu-id="81cf5-283">Generowanie adresu URL następuje podobny proces iteracyjny, ale zaczyna się od kodu użytkownika lub framework wywoływanie <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> metoda kolekcji tras.</span><span class="sxs-lookup"><span data-stu-id="81cf5-283">URL generation follows a similar iterative process, but it starts with user or framework code calling into the <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> method of the route collection.</span></span> <span data-ttu-id="81cf5-284">Każdy *trasy* ma jego <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> metoda wywoływana w sekwencji, aż do innych niż null <xref:Microsoft.AspNetCore.Routing.VirtualPathData> jest zwracana.</span><span class="sxs-lookup"><span data-stu-id="81cf5-284">Each *route* has its <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> method called in sequence until a non-null <xref:Microsoft.AspNetCore.Routing.VirtualPathData> is returned.</span></span>

<span data-ttu-id="81cf5-285">Podstawowy danych wejściowych do <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> są:</span><span class="sxs-lookup"><span data-stu-id="81cf5-285">The primary inputs to <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> are:</span></span>

* [<span data-ttu-id="81cf5-286">VirtualPathContext.HttpContext</span><span class="sxs-lookup"><span data-stu-id="81cf5-286">VirtualPathContext.HttpContext</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext)
* [<span data-ttu-id="81cf5-287">VirtualPathContext.Values</span><span class="sxs-lookup"><span data-stu-id="81cf5-287">VirtualPathContext.Values</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values)
* [<span data-ttu-id="81cf5-288">VirtualPathContext.AmbientValues</span><span class="sxs-lookup"><span data-stu-id="81cf5-288">VirtualPathContext.AmbientValues</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues)

<span data-ttu-id="81cf5-289">Trasy przede wszystkim używasz wartości trasy, dostarczone przez <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> i <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> zdecydować, czy jest możliwe do generowania adresu URL i wartości, których do uwzględnienia.</span><span class="sxs-lookup"><span data-stu-id="81cf5-289">Routes primarily use the route values provided by <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> and <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> to decide whether it's possible to generate a URL and what values to include.</span></span> <span data-ttu-id="81cf5-290"><xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> Zestaw wartości trasy, które zostały utworzone z dopasowywania bieżącego żądania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-290">The <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> are the set of route values that were produced from matching the current request.</span></span> <span data-ttu-id="81cf5-291">Z kolei <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> są wartości trasy, które określają sposób generowania żądany adres URL dla bieżącej operacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-291">In contrast, <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="81cf5-292"><xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext> Znajduje się w przypadku, gdy trasa należy pozyskać services lub dodatkowe dane skojarzone z bieżącym kontekstem.</span><span class="sxs-lookup"><span data-stu-id="81cf5-292">The <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext> is provided in case a route should obtain services or additional data associated with the current context.</span></span>

> [!TIP]
> <span data-ttu-id="81cf5-293">Traktować [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) jako zbiór zastąpienia [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span><span class="sxs-lookup"><span data-stu-id="81cf5-293">Think of [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) as a set of overrides for the [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span></span> <span data-ttu-id="81cf5-294">Generowanie adresu URL podejmie próbę ponownego użycia wartości tras z bieżącego żądania do generowania adresów URL dla łącza przy użyciu tego samego trasę lub wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-294">URL generation attempts to reuse route values from the current request to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="81cf5-295">Dane wyjściowe <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> jest <xref:Microsoft.AspNetCore.Routing.VirtualPathData>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-295">The output of <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> is a <xref:Microsoft.AspNetCore.Routing.VirtualPathData>.</span></span> <span data-ttu-id="81cf5-296"><xref:Microsoft.AspNetCore.Routing.VirtualPathData> jest równolegle z <xref:Microsoft.AspNetCore.Routing.RouteData>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-296"><xref:Microsoft.AspNetCore.Routing.VirtualPathData> is a parallel of <xref:Microsoft.AspNetCore.Routing.RouteData>.</span></span> <span data-ttu-id="81cf5-297"><xref:Microsoft.AspNetCore.Routing.VirtualPathData> zawiera <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> dla adresu URL danych wyjściowych i niektóre dodatkowe właściwości, które powinny zostać ustawione przez trasę.</span><span class="sxs-lookup"><span data-stu-id="81cf5-297"><xref:Microsoft.AspNetCore.Routing.VirtualPathData> contains the <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> for the output URL and some additional properties that should be set by the route.</span></span>

<span data-ttu-id="81cf5-298">[VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) właściwość zawiera *ścieżka wirtualna* produkowane przez trasę.</span><span class="sxs-lookup"><span data-stu-id="81cf5-298">The [VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="81cf5-299">W zależności od potrzeb może być konieczne ścieżkę do dalszego przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-299">Depending on your needs, you may need to process the path further.</span></span> <span data-ttu-id="81cf5-300">Jeśli chcesz renderować wygenerowany adres URL w formacie HTML, należy poprzedzić ścieżki podstawowej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-300">If you want to render the generated URL in HTML, prepend the base path of the app.</span></span>

<span data-ttu-id="81cf5-301">[VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) jest odwołaniem do pomyślnie wygenerowano adres URL trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-301">The [VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="81cf5-302">[VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) właściwości jest słownikiem dodatkowych danych dotyczących trasy, który wygenerował adresu URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-302">The [VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="81cf5-303">Jest to równoległego z [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span><span class="sxs-lookup"><span data-stu-id="81cf5-303">This is the parallel of [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span></span>

::: moniker-end

### <a name="create-routes"></a><span data-ttu-id="81cf5-304">Tworzenie tras</span><span class="sxs-lookup"><span data-stu-id="81cf5-304">Create routes</span></span>

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="81cf5-305">Routing zapewnia <xref:Microsoft.AspNetCore.Routing.Route> klasy jako standardowej implementacji <xref:Microsoft.AspNetCore.Routing.IRouter>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-305">Routing provides the <xref:Microsoft.AspNetCore.Routing.Route> class as the standard implementation of <xref:Microsoft.AspNetCore.Routing.IRouter>.</span></span> <span data-ttu-id="81cf5-306"><xref:Microsoft.AspNetCore.Routing.Route> używa *szablon trasy* Składnia umożliwiająca zdefiniowanie wzorców do dopasowywania ścieżki adresu URL po <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="81cf5-306"><xref:Microsoft.AspNetCore.Routing.Route> uses the *route template* syntax to define patterns to match against the URL path when <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> is called.</span></span> <span data-ttu-id="81cf5-307"><xref:Microsoft.AspNetCore.Routing.Route> używa tego samego szablonu trasy do wygenerowania adresu URL po <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="81cf5-307"><xref:Microsoft.AspNetCore.Routing.Route> uses the same route template to generate a URL when <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> is called.</span></span>

::: moniker-end

<span data-ttu-id="81cf5-308">Większość aplikacji utworzyć trasy, wywołując <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> lub jednego z podobne metody rozszerzenia zdefiniowane na <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-308">Most apps create routes by calling <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> or one of the similar extension methods defined on <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span></span> <span data-ttu-id="81cf5-309">Jedną z <xref:Microsoft.AspNetCore.Routing.IRouteBuilder> metody rozszerzenia Utwórz wystąpienie obiektu <xref:Microsoft.AspNetCore.Routing.Route> i dodać go do kolekcji tras.</span><span class="sxs-lookup"><span data-stu-id="81cf5-309">Any of the <xref:Microsoft.AspNetCore.Routing.IRouteBuilder> extension methods create an instance of <xref:Microsoft.AspNetCore.Routing.Route> and add it to the route collection.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="81cf5-310"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> nie akceptuje parametrów programu obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-310"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> doesn't accept a route handler parameter.</span></span> <span data-ttu-id="81cf5-311"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> tylko dodaje trasy, które są obsługiwane przez <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-311"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> only adds routes that are handled by the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span> <span data-ttu-id="81cf5-312">Aby dowiedzieć się więcej o trasach na platformie MVC, zobacz <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-312">To learn more about routing in MVC, see <xref:mvc/controllers/routing>.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="81cf5-313"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> nie akceptuje parametrów programu obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-313"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> doesn't accept a route handler parameter.</span></span> <span data-ttu-id="81cf5-314"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> tylko dodaje trasy, które są obsługiwane przez <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-314"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> only adds routes that are handled by the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span> <span data-ttu-id="81cf5-315">Domyślny program obsługi jest `IRouter`, a program obsługi nie może obsłużyć żądania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-315">The default handler is an `IRouter`, and the handler might not handle the request.</span></span> <span data-ttu-id="81cf5-316">Na przykład ASP.NET Core MVC jest zazwyczaj skonfigurowany jako domyślny program obsługi, który obsługuje tylko żądania które pasują do dostępnych kontrolerów i akcji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-316">For example, ASP.NET Core MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="81cf5-317">Aby dowiedzieć się więcej o trasach na platformie MVC, zobacz <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-317">To learn more about routing in MVC, see <xref:mvc/controllers/routing>.</span></span>

::: moniker-end

<span data-ttu-id="81cf5-318">Poniższy przykład kodu jest przykładem <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> wywołania używany przez typowy definicję trasy ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="81cf5-318">The following code example is an example of a <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> call used by a typical ASP.NET Core MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="81cf5-319">Ten szablon jest zgodny ścieżki adresu URL i wyodrębnia wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-319">This template matches a URL path and extracts the route values.</span></span> <span data-ttu-id="81cf5-320">Na przykład ścieżka `/Products/Details/17` generuje następujące wartości trasy: `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-320">For example, the path `/Products/Details/17` generates the following route values: `{ controller = Products, action = Details, id = 17 }`.</span></span>

<span data-ttu-id="81cf5-321">Wartości trasy są określane przez dopasowanie każdego segmentu i dzielenia Ścieżka adresu URL na segmenty *kierowanie parametru* nazwy szablonu trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-321">Route values are determined by splitting the URL path into segments and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="81cf5-322">Noszą nazwy parametrów trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-322">Route parameters are named.</span></span> <span data-ttu-id="81cf5-323">Parametry zdefiniowane, umieszczając nazwę parametru w nawiasach klamrowych `{ ... }`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-323">The parameters defined by enclosing the parameter name in braces `{ ... }`.</span></span>

<span data-ttu-id="81cf5-324">Powyższy szablon może być również zgodna ze ścieżką URL `/` i generować wartości `{ controller = Home, action = Index }`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-324">The preceding template could also match the URL path `/` and produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="81cf5-325">Dzieje się tak dlatego `{controller}` i `{action}` parametrów trasy mają przypisane wartości domyślne i `id` parametr trasy jest opcjonalny.</span><span class="sxs-lookup"><span data-stu-id="81cf5-325">This occurs because the `{controller}` and `{action}` route parameters have default values and the `id` route parameter is optional.</span></span> <span data-ttu-id="81cf5-326">Znak równości (`=`) następuje wartość po nazwę parametru trasa określa wartość domyślną dla parametru.</span><span class="sxs-lookup"><span data-stu-id="81cf5-326">An equals sign (`=`) followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="81cf5-327">Znak zapytania (`?`) po nazwę parametru trasa określa opcjonalny parametr.</span><span class="sxs-lookup"><span data-stu-id="81cf5-327">A question mark (`?`) after the route parameter name defines an optional parameter.</span></span>

<span data-ttu-id="81cf5-328">Parametry o wartości domyślne trasy *zawsze* uzyskiwania wartości trasy, gdy jest zgodna z trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-328">Route parameters with a default value *always* produce a route value when the route matches.</span></span> <span data-ttu-id="81cf5-329">Parametry opcjonalne nie tworzy wartości trasy, jeśli nie było żadnych odpowiadającym segmencie ścieżki adresu URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-329">Optional parameters don't produce a route value if there was no corresponding URL path segment.</span></span> <span data-ttu-id="81cf5-330">Zobacz [przekierować odwołanie do szablonu](#route-template-reference) sekcji dokładny opis scenariuszy szablon trasy i składni.</span><span class="sxs-lookup"><span data-stu-id="81cf5-330">See the [Route template reference](#route-template-reference) section for a thorough description of route template scenarios and syntax.</span></span>

<span data-ttu-id="81cf5-331">W poniższym przykładzie definicji parametru trasy `{id:int}` definiuje [trasy ograniczenie](#route-constraint-reference) dla `id` kierowanie parametru:</span><span class="sxs-lookup"><span data-stu-id="81cf5-331">In the following example, the route parameter definition `{id:int}` defines a [route constraint](#route-constraint-reference) for the `id` route parameter:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="81cf5-332">Ten szablon jest zgodny Ścieżka adresu URL, takich jak `/Products/Details/17` , ale nie `/Products/Details/Apples`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-332">This template matches a URL path like `/Products/Details/17` but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="81cf5-333">Implementowanie ograniczenia trasy <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> i badać wartości trasy, aby je zweryfikować.</span><span class="sxs-lookup"><span data-stu-id="81cf5-333">Route constraints implement <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> and inspect route values to verify them.</span></span> <span data-ttu-id="81cf5-334">W tym przykładzie wartość trasy `id` musi być konwertowany na liczbę całkowitą.</span><span class="sxs-lookup"><span data-stu-id="81cf5-334">In this example, the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="81cf5-335">Zobacz [odwołanie w przypadku ograniczenia trasy](#route-constraint-reference) objaśnienia dotyczące ograniczenia trasy, dostarczanych przez szablon.</span><span class="sxs-lookup"><span data-stu-id="81cf5-335">See [route-constraint-reference](#route-constraint-reference) for an explanation of route constraints provided by the framework.</span></span>

<span data-ttu-id="81cf5-336">Dodatkowe przeciążenia <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> akceptowanych wartości `constraints`, `dataTokens`, i `defaults`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-336">Additional overloads of <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="81cf5-337">Jest typowy tych parametrów do przekazania obiektu anonimowo wpisane, gdzie nazwy właściwości typu anonimowego dopasowania trasy nazwy parametrów.</span><span class="sxs-lookup"><span data-stu-id="81cf5-337">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="81cf5-338">Następujące <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> przykłady tworzą równoważne:</span><span class="sxs-lookup"><span data-stu-id="81cf5-338">The following <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

> [!TIP]
> <span data-ttu-id="81cf5-339">Składnię w tekście do definiowania ograniczeń i ustawień domyślnych może być wygodną proste trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-339">The inline syntax for defining constraints and defaults can be convenient for simple routes.</span></span> <span data-ttu-id="81cf5-340">Jednak istnieją scenariusze, takie jak tokeny danych, które nie są obsługiwane przez składnię w tekście.</span><span class="sxs-lookup"><span data-stu-id="81cf5-340">However, there are scenarios, such as data tokens, that aren't supported by inline syntax.</span></span>

<span data-ttu-id="81cf5-341">W poniższym przykładzie pokazano kilka dodatkowych scenariuszy:</span><span class="sxs-lookup"><span data-stu-id="81cf5-341">The following example demonstrates a few additional scenarios:</span></span>

::: moniker range=">= aspnetcore-2.2"

```csharp
routes.MapRoute(
    name: "blog",
    template: "Blog/{**article}",
    defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="81cf5-342">Powyższy szablon odpowiada Ścieżka adresu URL, takich jak `/Blog/All-About-Routing/Introduction` i wyodrębnia wartości `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-342">The preceding template matches a URL path like `/Blog/All-About-Routing/Introduction` and extracts the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="81cf5-343">Trasy domyślnej wartości `controller` i `action` są produkowane przez trasy, nawet jeśli w szablonie nie istnieją odpowiednie parametry trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-343">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="81cf5-344">Można określić wartości domyślnych w szablonie trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-344">Default values can be specified in the route template.</span></span> <span data-ttu-id="81cf5-345">`article` Parametr trasy jest zdefiniowany jako *wychwytywania* za wyglądu double gwiazdki (`**`) przed nazwą parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-345">The `article` route parameter is defined as a *catch-all* by the appearance of an double asterisk (`**`) before the route parameter name.</span></span> <span data-ttu-id="81cf5-346">Parametry trasy wychwytywania Przechwytywanie pozostałą część ścieżki adresu URL i można także dopasować pusty ciąg.</span><span class="sxs-lookup"><span data-stu-id="81cf5-346">Catch-all route parameters capture the remainder of the URL path and can also match the empty string.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

```csharp
routes.MapRoute(
    name: "blog",
    template: "Blog/{*article}",
    defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="81cf5-347">Powyższy szablon odpowiada Ścieżka adresu URL, takich jak `/Blog/All-About-Routing/Introduction` i wyodrębnia wartości `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-347">The preceding template matches a URL path like `/Blog/All-About-Routing/Introduction` and extracts the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="81cf5-348">Trasy domyślnej wartości `controller` i `action` są produkowane przez trasy, nawet jeśli w szablonie nie istnieją odpowiednie parametry trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-348">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="81cf5-349">Można określić wartości domyślnych w szablonie trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-349">Default values can be specified in the route template.</span></span> <span data-ttu-id="81cf5-350">`article` Parametr trasy jest zdefiniowany jako *wychwytywania* za wyglądu znak gwiazdki (`*`) przed nazwą parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-350">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk (`*`) before the route parameter name.</span></span> <span data-ttu-id="81cf5-351">Parametry trasy wychwytywania Przechwytywanie pozostałą część ścieżki adresu URL i można także dopasować pusty ciąg.</span><span class="sxs-lookup"><span data-stu-id="81cf5-351">Catch-all route parameters capture the remainder of the URL path and can also match the empty string.</span></span>

::: moniker-end

<span data-ttu-id="81cf5-352">W poniższym przykładzie dodano tokeny ograniczeń i dane trasy:</span><span class="sxs-lookup"><span data-stu-id="81cf5-352">The following example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="81cf5-353">Powyższy szablon odpowiada Ścieżka adresu URL, takich jak `/en-US/Products/5` i wyodrębnia wartości `{ controller = Products, action = Details, id = 5 }` i tokeny danych `{ locale = en-US }`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-353">The preceding template matches a URL path like `/en-US/Products/5` and extracts the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Tokeny Windows zmiennych lokalnych](routing/_static/tokens.png)

### <a name="route-class-url-generation"></a><span data-ttu-id="81cf5-355">Generowanie adresu URL klasy trasy</span><span class="sxs-lookup"><span data-stu-id="81cf5-355">Route class URL generation</span></span>

<span data-ttu-id="81cf5-356"><xref:Microsoft.AspNetCore.Routing.Route> Klasy można również wykonać Generowanie adresu URL, łącząc zestaw wartości trasy przy użyciu szablonu trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-356">The <xref:Microsoft.AspNetCore.Routing.Route> class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="81cf5-357">Jest to logicznie procesu zgodnych ze ścieżką URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-357">This is logically the reverse process of matching the URL path.</span></span>

> [!TIP]
> <span data-ttu-id="81cf5-358">Aby lepiej zrozumieć Generowanie adresu URL, Wyobraź sobie adresu URL, które chcesz wygenerować, a następnie zastanów się, jak szablon trasy będzie odpowiadać tego adresu URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-358">To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="81cf5-359">Wartości, których będzie generowany?</span><span class="sxs-lookup"><span data-stu-id="81cf5-359">What values would be produced?</span></span> <span data-ttu-id="81cf5-360">Jest to równoważne nierównej działania Generowanie adresu URL <xref:Microsoft.AspNetCore.Routing.Route> klasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-360">This is the rough equivalent of how URL generation works in the <xref:Microsoft.AspNetCore.Routing.Route> class.</span></span>

<span data-ttu-id="81cf5-361">W poniższym przykładzie użyto ogólne domyślnej trasy ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="81cf5-361">The following example uses a general ASP.NET Core MVC default route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="81cf5-362">Za pomocą wartości trasy `{ controller = Products, action = List }`, adres URL `/Products/List` jest generowany.</span><span class="sxs-lookup"><span data-stu-id="81cf5-362">With the route values `{ controller = Products, action = List }`, the URL `/Products/List` is generated.</span></span> <span data-ttu-id="81cf5-363">Wartości trasy są zastępowane odpowiednich parametrów trasy w celu utworzenia ze ścieżką URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-363">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="81cf5-364">Ponieważ `id` jest opcjonalny parametr trasy, adres URL został pomyślnie wygenerowany bez wartości dla `id`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-364">Since `id` is an optional route parameter, the URL is successfully generated without a value for `id`.</span></span>

<span data-ttu-id="81cf5-365">Za pomocą wartości trasy `{ controller = Home, action = Index }`, adres URL `/` jest generowany.</span><span class="sxs-lookup"><span data-stu-id="81cf5-365">With the route values `{ controller = Home, action = Index }`, the URL `/` is generated.</span></span> <span data-ttu-id="81cf5-366">Wartości podane trasy zgodne z wartościami domyślnymi i segmentów odpowiadający wartości domyślne są bezpiecznie pominięte.</span><span class="sxs-lookup"><span data-stu-id="81cf5-366">The provided route values match the default values, and the segments corresponding to the default values are safely omitted.</span></span>

<span data-ttu-id="81cf5-367">Zarówno Rundy adresy URL generowane przy użyciu następującej definicji trasy (`/Home/Index` i `/`) generuje te same wartości trasy, które były używane do generowania adresu URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-367">Both URLs generated round-trip with the following route definition (`/Home/Index` and `/`) produce the same route values that were used to generate the URL.</span></span>

> [!NOTE]
> <span data-ttu-id="81cf5-368">Skorzystaj z aplikacji za pomocą platformy ASP.NET Core MVC <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> do generowania adresów URL zamiast wywoływać metodę do routingu bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="81cf5-368">An app using ASP.NET Core MVC should use <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="81cf5-369">Aby uzyskać więcej informacji na temat generowania adresu URL, zobacz [odwołanie do generowania adresu Url](#url-generation-reference) sekcji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-369">For more information on URL generation, see the [Url generation reference](#url-generation-reference) section.</span></span>

## <a name="use-routing-middleware"></a><span data-ttu-id="81cf5-370">Użyj oprogramowania pośredniczącego routingu</span><span class="sxs-lookup"><span data-stu-id="81cf5-370">Use Routing Middleware</span></span>

<span data-ttu-id="81cf5-371">Odwołanie [meta Microsoft.aspnetcore.all Microsoft.AspNetCore.App](xref:fundamentals/metapackage-app) w pliku projektu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-371">Reference the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) in the app's project file.</span></span>

<span data-ttu-id="81cf5-372">Dodaj routingu do kontenera usługi w `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="81cf5-372">Add routing to the service container in `Startup.ConfigureServices`:</span></span>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

<span data-ttu-id="81cf5-373">Tras muszą być skonfigurowane w `Startup.Configure` metody.</span><span class="sxs-lookup"><span data-stu-id="81cf5-373">Routes must be configured in the `Startup.Configure` method.</span></span> <span data-ttu-id="81cf5-374">Przykładowa aplikacja korzysta z poniższych interfejsów API:</span><span class="sxs-lookup"><span data-stu-id="81cf5-374">The sample app uses the following APIs:</span></span>

* <xref:Microsoft.AspNetCore.Routing.RouteBuilder>
* <span data-ttu-id="81cf5-375"><xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> &ndash; Dopasowuje tylko żądania HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="81cf5-375"><xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> &ndash; Matches only HTTP GET requests.</span></span>
* <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

<span data-ttu-id="81cf5-376">W poniższej tabeli przedstawiono odpowiedzi z danym identyfikatorów URI.</span><span class="sxs-lookup"><span data-stu-id="81cf5-376">The following table shows the responses with the given URIs.</span></span>

| <span data-ttu-id="81cf5-377">Identyfikator URI</span><span class="sxs-lookup"><span data-stu-id="81cf5-377">URI</span></span>                    | <span data-ttu-id="81cf5-378">Odpowiedź</span><span class="sxs-lookup"><span data-stu-id="81cf5-378">Response</span></span>                                          |
| ---------------------- | ------------------------------------------------- |
| `/package/create/3`    | <span data-ttu-id="81cf5-379">Cześć!</span><span class="sxs-lookup"><span data-stu-id="81cf5-379">Hello!</span></span> <span data-ttu-id="81cf5-380">Wartości trasy: [operacji tworzenia], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="81cf5-380">Route values: [operation, create], [id, 3]</span></span> |
| `/package/track/-3`    | <span data-ttu-id="81cf5-381">Cześć!</span><span class="sxs-lookup"><span data-stu-id="81cf5-381">Hello!</span></span> <span data-ttu-id="81cf5-382">Wartości trasy: [operacji, Śledź], [identyfikator -3]</span><span class="sxs-lookup"><span data-stu-id="81cf5-382">Route values: [operation, track], [id, -3]</span></span> |
| `/package/track/-3/`   | <span data-ttu-id="81cf5-383">Cześć!</span><span class="sxs-lookup"><span data-stu-id="81cf5-383">Hello!</span></span> <span data-ttu-id="81cf5-384">Wartości trasy: [operacji, Śledź], [identyfikator -3]</span><span class="sxs-lookup"><span data-stu-id="81cf5-384">Route values: [operation, track], [id, -3]</span></span> |
| `/package/track/`      | <span data-ttu-id="81cf5-385">Wypada żądania za pośrednictwem Brak dopasowania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-385">The request falls through, no match.</span></span>              |
| `GET /hello/Joe`       | <span data-ttu-id="81cf5-386">Witaj, Jan!</span><span class="sxs-lookup"><span data-stu-id="81cf5-386">Hi, Joe!</span></span>                                          |
| `POST /hello/Joe`      | <span data-ttu-id="81cf5-387">Żądanie znajduje się za pośrednictwem, odpowiada tylko HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="81cf5-387">The request falls through, matches HTTP GET only.</span></span> |
| `GET /hello/Joe/Smith` | <span data-ttu-id="81cf5-388">Wypada żądania za pośrednictwem Brak dopasowania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-388">The request falls through, no match.</span></span>              |

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="81cf5-389">Jeśli konfigurujesz jedną trasę wywołać <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> przekazując `IRouter` wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="81cf5-389">If you're configuring a single route, call <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> passing in an `IRouter` instance.</span></span> <span data-ttu-id="81cf5-390">Nie będzie konieczne użycie <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-390">You won't need to use <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span></span>

::: moniker-end

<span data-ttu-id="81cf5-391">Framework udostępnia zestaw metod rozszerzenia do tworzenia tras (<xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions>):</span><span class="sxs-lookup"><span data-stu-id="81cf5-391">The framework provides a set of extension methods for creating routes (<xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions>):</span></span>

* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapDelete*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareDelete*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareGet*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewarePost*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewarePut*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareRoute*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareVerb*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapPost*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapPut*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapRoute*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="81cf5-392">Niektóre z wymienionych metod, takich jak <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>, wymagają <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-392">Some of listed methods, such as <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>, require a <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span></span> <span data-ttu-id="81cf5-393"><xref:Microsoft.AspNetCore.Http.RequestDelegate> Służy jako *programu obsługi trasy* gdy trasa odpowiada.</span><span class="sxs-lookup"><span data-stu-id="81cf5-393">The <xref:Microsoft.AspNetCore.Http.RequestDelegate> is used as the *route handler* when the route matches.</span></span> <span data-ttu-id="81cf5-394">Inne metody w tej rodzinie umożliwiają konfigurowanie potoku oprogramowania pośredniczącego do użytku jako program obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-394">Other methods in this family allow configuring a middleware pipeline for use as the route handler.</span></span> <span data-ttu-id="81cf5-395">Jeśli `Map*` metody nie zaakceptuje program obsługi, takie jak <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapRoute*>, używa ona <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-395">If the `Map*` method doesn't accept a handler, such as <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapRoute*>, it uses the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span>

::: moniker-end

<span data-ttu-id="81cf5-396">`Map[Verb]` Metody używać ograniczeń w celu ograniczenia trasy do czasownik HTTP w nazwie metody.</span><span class="sxs-lookup"><span data-stu-id="81cf5-396">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="81cf5-397">Na przykład zobacz <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> i <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-397">For example, see <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> and <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="81cf5-398">Odwołanie do szablonu trasy</span><span class="sxs-lookup"><span data-stu-id="81cf5-398">Route template reference</span></span>

<span data-ttu-id="81cf5-399">Tokeny w nawiasy klamrowe (`{ ... }`) Zdefiniuj *parametry trasy* , są powiązane, jeśli trasa jest zgodny.</span><span class="sxs-lookup"><span data-stu-id="81cf5-399">Tokens within curly braces (`{ ... }`) define *route parameters* that are bound if the route is matched.</span></span> <span data-ttu-id="81cf5-400">Można zdefiniować więcej niż jeden parametr trasy w segmencie trasy, ale musi być oddzielony wartości literału.</span><span class="sxs-lookup"><span data-stu-id="81cf5-400">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="81cf5-401">Na przykład `{controller=Home}{action=Index}` nie jest prawidłową trasę, ponieważ nie ma żadnych wartości literału między `{controller}` i `{action}`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-401">For example, `{controller=Home}{action=Index}` isn't a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="81cf5-402">Te parametry trasy musi mieć nazwę i może określić dodatkowe atrybuty.</span><span class="sxs-lookup"><span data-stu-id="81cf5-402">These route parameters must have a name and may have additional attributes specified.</span></span>

<span data-ttu-id="81cf5-403">Tekst dosłowny niż parametrów trasy (na przykład `{id}`) i separatora ścieżki `/` musi być zgodna z tekstem w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-403">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="81cf5-404">Dopasowywanie tekstu odbywa się bez uwzględniania wielkości liter i jest oparta na zdekodowany reprezentacja ścieżki URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-404">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="81cf5-405">Aby dopasować Ogranicznik parametru trasy literału (`{` lub `}`), znak ucieczki ogranicznik, powtarzając znak (`{{` lub `}}`).</span><span class="sxs-lookup"><span data-stu-id="81cf5-405">To match a literal route parameter delimiter (`{` or `}`), escape the delimiter by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="81cf5-406">Wzorce adresów URL, które próbują przechwytywania nazwę pliku z rozszerzeniem nazwy pliku opcjonalne mają dodatkowe zagadnienia.</span><span class="sxs-lookup"><span data-stu-id="81cf5-406">URL patterns that attempt to capture a file name with an optional file extension have additional considerations.</span></span> <span data-ttu-id="81cf5-407">Rozważmy na przykład szablon `files/{filename}.{ext?}`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-407">For example, consider the template `files/{filename}.{ext?}`.</span></span> <span data-ttu-id="81cf5-408">Gdy obie wartości `filename` i `ext` istnieje, obie wartości są wypełnione.</span><span class="sxs-lookup"><span data-stu-id="81cf5-408">When values for both `filename` and `ext` exist, both values are populated.</span></span> <span data-ttu-id="81cf5-409">Jeśli tylko wartości `filename` istnieje w adresie URL, dopasowania tras, ponieważ końcowej kropki (`.`) jest opcjonalny.</span><span class="sxs-lookup"><span data-stu-id="81cf5-409">If only a value for `filename` exists in the URL, the route matches because the trailing period (`.`) is  optional.</span></span> <span data-ttu-id="81cf5-410">Następujące adresy URL dopasowania tej trasy:</span><span class="sxs-lookup"><span data-stu-id="81cf5-410">The following URLs match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile`

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="81cf5-411">Można używać gwiazdki (`*`) lub podwójny gwiazdki (`**`) jako prefiks parametru trasy, aby powiązać pozostałą część identyfikatora URI.</span><span class="sxs-lookup"><span data-stu-id="81cf5-411">You can use an asterisk (`*`) or double asterisk (`**`) as a prefix to a route parameter to bind to the rest of the URI.</span></span> <span data-ttu-id="81cf5-412">Są to tak zwane *wychwytywania* parametrów.</span><span class="sxs-lookup"><span data-stu-id="81cf5-412">These are called a *catch-all* parameters.</span></span> <span data-ttu-id="81cf5-413">Na przykład `blog/{**slug}` dopasowuje dowolny identyfikator URI, który rozpoczyna się od `/blog` i ma jakąkolwiek wartość operatorze, która jest przypisana do `slug` wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-413">For example, `blog/{**slug}` matches any URI that starts with `/blog` and has any value following it, which is assigned to the `slug` route value.</span></span> <span data-ttu-id="81cf5-414">Parametry przechwytującą cały mogą być również zgodna pusty ciąg.</span><span class="sxs-lookup"><span data-stu-id="81cf5-414">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="81cf5-415">Parametrze wychwytywania odpowiednie znaki specjalne, gdy trasa służy do generowania adresu URL, w tym separatora ścieżki (`/`) znaków.</span><span class="sxs-lookup"><span data-stu-id="81cf5-415">The catch-all parameter escapes the appropriate characters when the route is used to generate a URL, including path separator (`/`) characters.</span></span> <span data-ttu-id="81cf5-416">Na przykład tras `foo/{*path}` wartościami trasy `{ path = "my/path" }` generuje `foo/my%2Fpath`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-416">For example, the route `foo/{*path}` with route values `{ path = "my/path" }` generates `foo/my%2Fpath`.</span></span> <span data-ttu-id="81cf5-417">Należy pamiętać o zmienionym znaczeniu ukośnikiem.</span><span class="sxs-lookup"><span data-stu-id="81cf5-417">Note the escaped forward slash.</span></span> <span data-ttu-id="81cf5-418">Aby znakach separatora ścieżki Rundy, należy użyć `**` prefiks parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-418">To round-trip path separator characters, use the `**` route parameter prefix.</span></span> <span data-ttu-id="81cf5-419">Trasa `foo/{**path}` z `{ path = "my/path" }` generuje `foo/my/path`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-419">The route `foo/{**path}` with `{ path = "my/path" }` generates `foo/my/path`.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="81cf5-420">Możesz użyć gwiazdki (`*`) jako prefiks parametru trasy, aby powiązać pozostałą część identyfikatora URI.</span><span class="sxs-lookup"><span data-stu-id="81cf5-420">You can use the asterisk (`*`) as a prefix to a route parameter to bind to the rest of the URI.</span></span> <span data-ttu-id="81cf5-421">Jest to nazywane *wychwytywania* parametru.</span><span class="sxs-lookup"><span data-stu-id="81cf5-421">This is called a *catch-all* parameter.</span></span> <span data-ttu-id="81cf5-422">Na przykład `blog/{*slug}` dopasowuje dowolny identyfikator URI, który rozpoczyna się od `/blog` i ma jakąkolwiek wartość operatorze, która jest przypisana do `slug` wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-422">For example, `blog/{*slug}` matches any URI that starts with `/blog` and has any value following it, which is assigned to the `slug` route value.</span></span> <span data-ttu-id="81cf5-423">Parametry przechwytującą cały mogą być również zgodna pusty ciąg.</span><span class="sxs-lookup"><span data-stu-id="81cf5-423">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="81cf5-424">Parametrze wychwytywania odpowiednie znaki specjalne, gdy trasa służy do generowania adresu URL, w tym separatora ścieżki (`/`) znaków.</span><span class="sxs-lookup"><span data-stu-id="81cf5-424">The catch-all parameter escapes the appropriate characters when the route is used to generate a URL, including path separator (`/`) characters.</span></span> <span data-ttu-id="81cf5-425">Na przykład tras `foo/{*path}` wartościami trasy `{ path = "my/path" }` generuje `foo/my%2Fpath`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-425">For example, the route `foo/{*path}` with route values `{ path = "my/path" }` generates `foo/my%2Fpath`.</span></span> <span data-ttu-id="81cf5-426">Należy pamiętać o zmienionym znaczeniu ukośnikiem.</span><span class="sxs-lookup"><span data-stu-id="81cf5-426">Note the escaped forward slash.</span></span>

::: moniker-end

<span data-ttu-id="81cf5-427">Może mieć parametrów trasy *wartości domyślne* wyznaczony przez określenie wartości domyślnej po nazwie parametru, rozdzielone znakiem równości (`=`).</span><span class="sxs-lookup"><span data-stu-id="81cf5-427">Route parameters may have *default values* designated by specifying the default value after the parameter name separated by an equals sign (`=`).</span></span> <span data-ttu-id="81cf5-428">Na przykład `{controller=Home}` definiuje `Home` jako wartość domyślna dla `controller`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-428">For example, `{controller=Home}` defines `Home` as the default value for `controller`.</span></span> <span data-ttu-id="81cf5-429">Wartością domyślną jest używany, jeśli wartość nie jest obecny w adresie URL, dla parametru.</span><span class="sxs-lookup"><span data-stu-id="81cf5-429">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="81cf5-430">Parametry trasy są zmieniona na opcjonalną, dodając znak zapytania (`?`) na końcu nazwy parametru, jak `id?`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-430">Route parameters are made optional by appending a question mark (`?`) to the end of the parameter name, as in `id?`.</span></span> <span data-ttu-id="81cf5-431">Różnica między wartościami opcjonalne i domyślne parametry trasy jest parametr trasy z wartością domyślną będzie zawsze daje wartość&mdash;opcjonalny parametr ma wartość tylko wtedy, gdy wartość zostanie podana w adresie URL żądania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-431">The difference between optional values and default route parameters is that a route parameter with a default value always produces a value&mdash;an optional parameter has a value only when a value is provided by the request URL.</span></span>

<span data-ttu-id="81cf5-432">Parametry trasy może mieć ograniczenia, które musi odpowiadać wartości trasy, powiązany z adresu URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-432">Route parameters may have constraints that must match the route value bound from the URL.</span></span> <span data-ttu-id="81cf5-433">Dodawanie dwukropka (`:`) i nazwa ograniczenia po Określa nazwę parametru trasy *ograniczenie w tekście* parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-433">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="81cf5-434">Jeśli ograniczenie wymaga argumentów, są ujęte w nawiasy (`(...)`) po nazwie ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="81cf5-434">If the constraint requires arguments, they're enclosed in parentheses (`(...)`) after the constraint name.</span></span> <span data-ttu-id="81cf5-435">Można określić wiele ograniczeń w tekście, dodając inny dwukropka (`:`) i nazwa ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="81cf5-435">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span>

<span data-ttu-id="81cf5-436">Nazwa ograniczenia i argumenty są przekazywane do <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> usługi w celu utworzenia wystąpienia <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> do użycia podczas przetwarzania adresu URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-436">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="81cf5-437">Na przykład szablon trasy `blog/{article:minlength(10)}` Określa `minlength` ograniczenie z argumentem `10`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-437">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="81cf5-438">Aby uzyskać więcej informacji na temat ograniczenia trasy i listy ograniczeń, dostarczanych przez szablon, zobacz [przekierować odwołanie do ograniczenia](#route-constraint-reference) sekcji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-438">For more information on route constraints and a list of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="81cf5-439">Parametry trasy może mieć również transformatory parametrów, które przekształcania wartości parametru podczas generowania łączy pasującego działania i stron, które mają adresy URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-439">Route parameters may also have parameter transformers, which transform a parameter's value when generating links and matching actions and pages to URLs.</span></span> <span data-ttu-id="81cf5-440">Ograniczenia, np. parametr transformatory można dodać wbudowane do parametru trasy, dodając dwukropek (`:`) i nazwa transformatora po nazwie parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-440">Like constraints, parameter transformers can be added inline to a route parameter by adding a colon (`:`) and transformer name after the route parameter name.</span></span> <span data-ttu-id="81cf5-441">Na przykład szablon trasy `blog/{article:slugify}` Określa `slugify` przekształcania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-441">For example, the route template `blog/{article:slugify}` specifies a `slugify` transformer.</span></span> <span data-ttu-id="81cf5-442">Aby uzyskać więcej informacji na transformatory parametru, zobacz [odwołania do parametru transformatora](#parameter-transformer-reference) sekcji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-442">For more information on parameter transformers, see the [Parameter transformer reference](#parameter-transformer-reference) section.</span></span>

::: moniker-end

<span data-ttu-id="81cf5-443">Poniższa tabela przedstawia przykładowe szablony trasy i ich działania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-443">The following table demonstrates example route templates and their behavior.</span></span>

| <span data-ttu-id="81cf5-444">Szablon trasy</span><span class="sxs-lookup"><span data-stu-id="81cf5-444">Route Template</span></span>                           | <span data-ttu-id="81cf5-445">Przykład dopasowywania identyfikatora URI</span><span class="sxs-lookup"><span data-stu-id="81cf5-445">Example Matching URI</span></span>    | <span data-ttu-id="81cf5-446">Identyfikator URI żądania&hellip;</span><span class="sxs-lookup"><span data-stu-id="81cf5-446">The request URI&hellip;</span></span>                                                    |
| ---------------------------------------- | ----------------------- | -------------------------------------------------------------------------- |
| `hello`                                  | `/hello`                | <span data-ttu-id="81cf5-447">Jest zgodny tylko pojedynczą ścieżkę `/hello`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-447">Only matches the single path `/hello`.</span></span>                                     |
| `{Page=Home}`                            | `/`                     | <span data-ttu-id="81cf5-448">Dopasowuje i ustawia `Page` do `Home`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-448">Matches and sets `Page` to `Home`.</span></span>                                         |
| `{Page=Home}`                            | `/Contact`              | <span data-ttu-id="81cf5-449">Dopasowuje i ustawia `Page` do `Contact`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-449">Matches and sets `Page` to `Contact`.</span></span>                                      |
| `{controller}/{action}/{id?}`            | `/Products/List`        | <span data-ttu-id="81cf5-450">Mapuje `Products` kontrolera i `List` akcji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-450">Maps to the `Products` controller and `List` action.</span></span>                       |
| `{controller}/{action}/{id?}`            | `/Products/Details/123` | <span data-ttu-id="81cf5-451">Mapuje `Products` kontrolera i `Details` akcji (`id` równa 123).</span><span class="sxs-lookup"><span data-stu-id="81cf5-451">Maps to the `Products` controller and  `Details` action (`id` set to 123).</span></span> |
| <span data-ttu-id="81cf5-452">`{controller=Home}/{action=Index}/{id?`}</span><span class="sxs-lookup"><span data-stu-id="81cf5-452">`{controller=Home}/{action=Index}/{id?`}</span></span> | `/`                     | <span data-ttu-id="81cf5-453">Mapuje `Home` kontrolera i `Index` — metoda (`id` jest ignorowana).</span><span class="sxs-lookup"><span data-stu-id="81cf5-453">Maps to the `Home` controller and `Index` method (`id` is ignored).</span></span>        |

<span data-ttu-id="81cf5-454">Przy użyciu szablonu ogólnie jest najprostszym podejściem do obsługi routingu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-454">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="81cf5-455">Ograniczenia i ustawienia domyślne można również określić poza szablon trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-455">Constraints and defaults can also be specified outside the route template.</span></span>

> [!TIP]
> <span data-ttu-id="81cf5-456">Włącz [rejestrowania](xref:fundamentals/logging/index) aby zobaczyć, jak wbudowane, takie jak routing implementacji, <xref:Microsoft.AspNetCore.Routing.Route>, zgodne z żądaniami.</span><span class="sxs-lookup"><span data-stu-id="81cf5-456">Enable [Logging](xref:fundamentals/logging/index) to see how the built-in routing implementations, such as <xref:Microsoft.AspNetCore.Routing.Route>, match requests.</span></span>

## <a name="reserved-routing-names"></a><span data-ttu-id="81cf5-457">Zastrzeżone nazwy routingu</span><span class="sxs-lookup"><span data-stu-id="81cf5-457">Reserved routing names</span></span>

<span data-ttu-id="81cf5-458">Następujące słowa kluczowe są zarezerwowane nazwy i nie można użyć jako nazwy trasy i parametry:</span><span class="sxs-lookup"><span data-stu-id="81cf5-458">The following keywords are reserved names and can't be used as route names or parameters:</span></span>

* `action`
* `area`
* `controller`
* `handler`
* `page`

## <a name="route-constraint-reference"></a><span data-ttu-id="81cf5-459">Odwołanie do ograniczenia trasy</span><span class="sxs-lookup"><span data-stu-id="81cf5-459">Route constraint reference</span></span>

<span data-ttu-id="81cf5-460">Ograniczenia trasy wykonania, gdy dopasowanie jest przeprowadzana w celu przychodzącego adresu URL i ścieżki adresu URL jest stokenizowana do wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-460">Route constraints execute when a match has occurred to the incoming URL and the URL path is tokenized into route values.</span></span> <span data-ttu-id="81cf5-461">Ograniczenia trasy ogólnie badać wartości tras skojarzone za pośrednictwem szablon trasy i wprowadzić tak, / nie decyzję o tym, czy wartość jest dopuszczalne.</span><span class="sxs-lookup"><span data-stu-id="81cf5-461">Route constraints generally inspect the route value associated via the route template and make a yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="81cf5-462">Niektóre ograniczenia trasy umożliwia należy wziąć pod uwagę, czy żądania można kierować dane poza wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-462">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="81cf5-463">Na przykład <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> można zaakceptować lub odrzucić żądanie oparte na jego zlecenie HTTP.</span><span class="sxs-lookup"><span data-stu-id="81cf5-463">For example, the <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> can accept or reject a request based on its HTTP verb.</span></span> <span data-ttu-id="81cf5-464">Ograniczenia są używane w kierowania żądań i połącz generacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-464">Constraints are used in routing requests and link generation.</span></span>

> [!WARNING]
> <span data-ttu-id="81cf5-465">Nie używaj ograniczeń dla **sprawdzania danych wejściowych**.</span><span class="sxs-lookup"><span data-stu-id="81cf5-465">Don't use constraints for **input validation**.</span></span> <span data-ttu-id="81cf5-466">Jeżeli ograniczenia są używane na potrzeby **sprawdzania danych wejściowych**, nieprawidłowe dane wejściowe wyniki w *404 — Nie można odnaleźć* odpowiedzi zamiast *400 — Nieprawidłowe żądanie* przy użyciu odpowiedniego komunikatu o błędzie.</span><span class="sxs-lookup"><span data-stu-id="81cf5-466">If constraints are used for **input validation**, invalid input results in a *404 - Not Found* response instead of a *400 - Bad Request* with an appropriate error message.</span></span> <span data-ttu-id="81cf5-467">Ograniczenia trasy są używane do **odróżnić** podobne tras, nie można sprawdzić poprawność danych wejściowych dla określonej trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-467">Route constraints are used to **disambiguate** similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="81cf5-468">Poniższa tabela przedstawia przykład ograniczenia trasy, a ich oczekiwane zachowanie.</span><span class="sxs-lookup"><span data-stu-id="81cf5-468">The following table demonstrates example route constraints and their expected behavior.</span></span>

| <span data-ttu-id="81cf5-469">ograniczenie</span><span class="sxs-lookup"><span data-stu-id="81cf5-469">constraint</span></span> | <span data-ttu-id="81cf5-470">Przykład</span><span class="sxs-lookup"><span data-stu-id="81cf5-470">Example</span></span> | <span data-ttu-id="81cf5-471">Przykład dopasowań</span><span class="sxs-lookup"><span data-stu-id="81cf5-471">Example Matches</span></span> | <span data-ttu-id="81cf5-472">Uwagi</span><span class="sxs-lookup"><span data-stu-id="81cf5-472">Notes</span></span> |
| ---------- | ------- | --------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="81cf5-473">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="81cf5-473">`123456789`, `-123456789`</span></span> | <span data-ttu-id="81cf5-474">Dopasowuje dowolną liczbę całkowitą</span><span class="sxs-lookup"><span data-stu-id="81cf5-474">Matches any integer</span></span> |
| `bool` | `{active:bool}` | <span data-ttu-id="81cf5-475">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="81cf5-475">`true`, `FALSE`</span></span> | <span data-ttu-id="81cf5-476">Dopasowuje `true` lub `false` (bez uwzględniania wielkości liter)</span><span class="sxs-lookup"><span data-stu-id="81cf5-476">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="81cf5-477">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="81cf5-477">`2016-12-31`, `2016-12-31 7:32pm`</span></span> | <span data-ttu-id="81cf5-478">Pasuje do prawidłowego `DateTime` wartość (niezmiennej kultury — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="81cf5-478">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="81cf5-479">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="81cf5-479">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="81cf5-480">Pasuje do prawidłowego `decimal` wartość (niezmiennej kultury — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="81cf5-480">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double` | `{weight:double}` | <span data-ttu-id="81cf5-481">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="81cf5-481">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="81cf5-482">Pasuje do prawidłowego `double` wartość (niezmiennej kultury — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="81cf5-482">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float` | `{weight:float}` | <span data-ttu-id="81cf5-483">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="81cf5-483">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="81cf5-484">Pasuje do prawidłowego `float` wartość (niezmiennej kultury — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="81cf5-484">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid` | `{id:guid}` | <span data-ttu-id="81cf5-485">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="81cf5-485">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="81cf5-486">Pasuje do prawidłowego `Guid` wartość</span><span class="sxs-lookup"><span data-stu-id="81cf5-486">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="81cf5-487">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="81cf5-487">`123456789`, `-123456789`</span></span> | <span data-ttu-id="81cf5-488">Pasuje do prawidłowego `long` wartość</span><span class="sxs-lookup"><span data-stu-id="81cf5-488">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="81cf5-489">Ciąg musi być co najmniej 4 znaki</span><span class="sxs-lookup"><span data-stu-id="81cf5-489">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="81cf5-490">Ciąg musi zawierać nie więcej niż 8 znaków</span><span class="sxs-lookup"><span data-stu-id="81cf5-490">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="81cf5-491">Ciąg musi być dokładnie 12 znaków.</span><span class="sxs-lookup"><span data-stu-id="81cf5-491">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="81cf5-492">Ciąg musi zawierać co najmniej 8 i nie więcej niż 16 znaków</span><span class="sxs-lookup"><span data-stu-id="81cf5-492">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="81cf5-493">Wartość całkowita musi być co najmniej 18</span><span class="sxs-lookup"><span data-stu-id="81cf5-493">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` | `91` | <span data-ttu-id="81cf5-494">Wartość całkowita musi być nie więcej niż 120</span><span class="sxs-lookup"><span data-stu-id="81cf5-494">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="81cf5-495">Wartość całkowita musi być co najmniej 18 lat, ale nie więcej niż 120</span><span class="sxs-lookup"><span data-stu-id="81cf5-495">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="81cf5-496">Ciąg musi zawierać co najmniej jeden znak alfabetyczny (`a`-`z`, bez uwzględniania wielkości liter)</span><span class="sxs-lookup"><span data-stu-id="81cf5-496">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="81cf5-497">Ciąg musi być zgodny z wyrażeniem regularnym (Zobacz porady dotyczące definiując wyrażenie regularne)</span><span class="sxs-lookup"><span data-stu-id="81cf5-497">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required` | `{name:required}` | `Rick` | <span data-ttu-id="81cf5-498">Używane do wymuszania, że wartość parametru nie jest obecny podczas generowania adresu URL</span><span class="sxs-lookup"><span data-stu-id="81cf5-498">Used to enforce that a non-parameter value is present during URL generation</span></span> |

<span data-ttu-id="81cf5-499">Wiele ograniczeń rozdzielana średnikami można zastosować do jednego parametru.</span><span class="sxs-lookup"><span data-stu-id="81cf5-499">Multiple, colon-delimited constraints can be applied to a single parameter.</span></span> <span data-ttu-id="81cf5-500">Na przykład następujące ograniczenia ogranicza parametr na wartość całkowitą równą 1 lub większą:</span><span class="sxs-lookup"><span data-stu-id="81cf5-500">For example, the following constraint restricts a parameter to an integer value of 1 or greater:</span></span>

```csharp
[Route("users/{id:int:min(1)}")]
public User GetUserById(int id) { }
```

> [!WARNING]
> <span data-ttu-id="81cf5-501">Trasy, ograniczenia, sprawdź adres URL, które są konwertowane na typ CLR (takie jak `int` lub `DateTime`) zawsze używają niezmiennej kultury.</span><span class="sxs-lookup"><span data-stu-id="81cf5-501">Route constraints that verify the URL and are converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture.</span></span> <span data-ttu-id="81cf5-502">Te ograniczenia przyjęto założenie, że adres URL jest niemożliwe do zlokalizowania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-502">These constraints assume that the URL is non-localizable.</span></span> <span data-ttu-id="81cf5-503">Ograniczenia trasy dostarczone przez framework nie należy modyfikować wartości przechowywane w wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-503">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="81cf5-504">Wszystkie wartości trasy, pochodzącą z adresu URL analizy są przechowywane jako ciągi.</span><span class="sxs-lookup"><span data-stu-id="81cf5-504">All route values parsed from the URL are stored as strings.</span></span> <span data-ttu-id="81cf5-505">Na przykład `float` ograniczenie podejmuje próbę przekonwertowania na format zmiennoprzecinkowy wartości trasy, ale przekonwertowana wartość jest używana tylko po to, aby sprawdzić, może on zostać przekonwertowany na format zmiennoprzecinkowy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-505">For example, the `float` constraint attempts to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="81cf5-506">Wyrażenia regularne</span><span class="sxs-lookup"><span data-stu-id="81cf5-506">Regular expressions</span></span>

<span data-ttu-id="81cf5-507">Dodaje platformę ASP.NET Core `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` do konstruktora wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="81cf5-507">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="81cf5-508">Zobacz <xref:System.Text.RegularExpressions.RegexOptions> opis tych elementów członkowskich.</span><span class="sxs-lookup"><span data-stu-id="81cf5-508">See <xref:System.Text.RegularExpressions.RegexOptions> for a description of these members.</span></span>

<span data-ttu-id="81cf5-509">Wyrażenia regularne używać ograniczników i tokeny podobne do używanych przez usługę Routing i języka C#.</span><span class="sxs-lookup"><span data-stu-id="81cf5-509">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="81cf5-510">Wyrażenie regularne tokeny muszą być wyjściowym.</span><span class="sxs-lookup"><span data-stu-id="81cf5-510">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="81cf5-511">Można użyć wyrażenia regularnego `^\d{3}-\d{2}-\d{4}$` routingu, wyrażenie musi mieć `\` znaków (pojedynczy ukośnik odwrotny) podany w ciągu jako `\\` (podwójny ukośnik odwrotny), znaków w C# pliku źródłowego, aby można było wprowadzić `\` ciąg znaku ucieczki (chyba że za pomocą [literały ciąg verbatim](/dotnet/csharp/language-reference/keywords/string)).</span><span class="sxs-lookup"><span data-stu-id="81cf5-511">To use the regular expression `^\d{3}-\d{2}-\d{4}$` in routing, the expression must have the `\` (single backslash) characters provided in the string as `\\` (double backslash) characters in the C# source file in order to escape the `\` string escape character (unless using [verbatim string literals](/dotnet/csharp/language-reference/keywords/string)).</span></span> <span data-ttu-id="81cf5-512">Jako znak ucieczki dla routingu znaki ogranicznika parametru (`{`, `}`, `[`, `]`), znaków w wyrażeniu dwukrotnie (`{{`, `}`, `[[`, `]]`).</span><span class="sxs-lookup"><span data-stu-id="81cf5-512">To escape routing parameter delimiter characters (`{`, `}`, `[`, `]`), double the characters in the expression (`{{`, `}`, `[[`, `]]`).</span></span> <span data-ttu-id="81cf5-513">W poniższej tabeli przedstawiono wyrażeń regularnych i wersji o zmienionym znaczeniu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-513">The following table shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="81cf5-514">Wyrażenie regularne</span><span class="sxs-lookup"><span data-stu-id="81cf5-514">Regular Expression</span></span>    | <span data-ttu-id="81cf5-515">Wyrażenie regularne o zmienionym znaczeniu</span><span class="sxs-lookup"><span data-stu-id="81cf5-515">Escaped Regular Expression</span></span>     |
| --------------------- | ------------------------------ |
| `^\d{3}-\d{2}-\d{4}$` | `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` |
| `^[a-z]{2}$`          | `^[[a-z]]{{2}}$`               |

<span data-ttu-id="81cf5-516">Wyrażenia regularne użyte w routingu często rozpoczynać się od karetki (`^`) znak i sprostania szczytowemu pozycję początkową ciągu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-516">Regular expressions used in routing often start with the caret (`^`) character and match starting position of the string.</span></span> <span data-ttu-id="81cf5-517">Wyrażenia często kończyć się znakiem dolara (`$`) znaków i dopasowania końca ciągu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-517">The expressions often end with the dollar sign (`$`) character and match end of the string.</span></span> <span data-ttu-id="81cf5-518">`^` i `$` znaków upewnij się, że wartość parametru trasy całe dopasowanie wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="81cf5-518">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="81cf5-519">Bez `^` i `$` znaków, wyrażenie regularne odpowiada wszelkich podciągu wewnątrz ciągu, który jest często niepożądane.</span><span class="sxs-lookup"><span data-stu-id="81cf5-519">Without the `^` and `$` characters, the regular expression match any substring within the string, which is often undesirable.</span></span> <span data-ttu-id="81cf5-520">Poniższa tabela zawiera przykłady i wyjaśnia, dlaczego zgodne lub nie odpowiada.</span><span class="sxs-lookup"><span data-stu-id="81cf5-520">The following table provides examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="81cf5-521">Wyrażenie</span><span class="sxs-lookup"><span data-stu-id="81cf5-521">Expression</span></span>   | <span data-ttu-id="81cf5-522">String</span><span class="sxs-lookup"><span data-stu-id="81cf5-522">String</span></span>    | <span data-ttu-id="81cf5-523">Dopasowanie</span><span class="sxs-lookup"><span data-stu-id="81cf5-523">Match</span></span> | <span data-ttu-id="81cf5-524">Komentarz</span><span class="sxs-lookup"><span data-stu-id="81cf5-524">Comment</span></span>               |
| ------------ | --------- | :---: |  -------------------- |
| `[a-z]{2}`   | <span data-ttu-id="81cf5-525">Cześć</span><span class="sxs-lookup"><span data-stu-id="81cf5-525">hello</span></span>     | <span data-ttu-id="81cf5-526">Tak</span><span class="sxs-lookup"><span data-stu-id="81cf5-526">Yes</span></span>   | <span data-ttu-id="81cf5-527">podciąg dopasowania</span><span class="sxs-lookup"><span data-stu-id="81cf5-527">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="81cf5-528">123abc456</span><span class="sxs-lookup"><span data-stu-id="81cf5-528">123abc456</span></span> | <span data-ttu-id="81cf5-529">Tak</span><span class="sxs-lookup"><span data-stu-id="81cf5-529">Yes</span></span>   | <span data-ttu-id="81cf5-530">podciąg dopasowania</span><span class="sxs-lookup"><span data-stu-id="81cf5-530">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="81cf5-531">mz</span><span class="sxs-lookup"><span data-stu-id="81cf5-531">mz</span></span>        | <span data-ttu-id="81cf5-532">Tak</span><span class="sxs-lookup"><span data-stu-id="81cf5-532">Yes</span></span>   | <span data-ttu-id="81cf5-533">zgodne z wyrażeniem</span><span class="sxs-lookup"><span data-stu-id="81cf5-533">Matches expression</span></span>    |
| `[a-z]{2}`   | <span data-ttu-id="81cf5-534">MZ</span><span class="sxs-lookup"><span data-stu-id="81cf5-534">MZ</span></span>        | <span data-ttu-id="81cf5-535">Tak</span><span class="sxs-lookup"><span data-stu-id="81cf5-535">Yes</span></span>   | <span data-ttu-id="81cf5-536">bez uwzględniania wielkości liter</span><span class="sxs-lookup"><span data-stu-id="81cf5-536">Not case sensitive</span></span>    |
| `^[a-z]{2}$` | <span data-ttu-id="81cf5-537">Cześć</span><span class="sxs-lookup"><span data-stu-id="81cf5-537">hello</span></span>     | <span data-ttu-id="81cf5-538">Nie</span><span class="sxs-lookup"><span data-stu-id="81cf5-538">No</span></span>    | <span data-ttu-id="81cf5-539">zobacz `^` i `$` powyżej</span><span class="sxs-lookup"><span data-stu-id="81cf5-539">See `^` and `$` above</span></span> |
| `^[a-z]{2}$` | <span data-ttu-id="81cf5-540">123abc456</span><span class="sxs-lookup"><span data-stu-id="81cf5-540">123abc456</span></span> | <span data-ttu-id="81cf5-541">Nie</span><span class="sxs-lookup"><span data-stu-id="81cf5-541">No</span></span>    | <span data-ttu-id="81cf5-542">zobacz `^` i `$` powyżej</span><span class="sxs-lookup"><span data-stu-id="81cf5-542">See `^` and `$` above</span></span> |

<span data-ttu-id="81cf5-543">Aby uzyskać więcej informacji na temat składni wyrażeń regularnych, zobacz [wyrażeń regularnych programu .NET Framework](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span><span class="sxs-lookup"><span data-stu-id="81cf5-543">For more information on regular expression syntax, see [.NET Framework Regular Expressions](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span></span>

<span data-ttu-id="81cf5-544">Aby ograniczyć parametr znany zestaw możliwych wartości, należy użyć wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="81cf5-544">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="81cf5-545">Na przykład `{action:regex(^(list|get|create)$)}` jest zgodny tylko `action` trasy wartość `list`, `get`, lub `create`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-545">For example, `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="81cf5-546">Jeśli przekazywana do słownika ograniczenia, ciąg `^(list|get|create)$` odpowiada.</span><span class="sxs-lookup"><span data-stu-id="81cf5-546">If passed into the constraints dictionary, the string `^(list|get|create)$` is equivalent.</span></span> <span data-ttu-id="81cf5-547">Ograniczenia, które są przekazywane w słowniku ograniczenia (niewyrównane w szablonie), która nie pasuje do jednej znane ograniczenia również są traktowane jako wyrażenia regularne.</span><span class="sxs-lookup"><span data-stu-id="81cf5-547">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="custom-route-constraints"></a><span data-ttu-id="81cf5-548">Ograniczenia trasy niestandardowe</span><span class="sxs-lookup"><span data-stu-id="81cf5-548">Custom Route Constraints</span></span>

<span data-ttu-id="81cf5-549">Oprócz ograniczenia wbudowanych trasy, ograniczenia trasy niestandardowe można utworzyć przez zaimplementowanie <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interfejsu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-549">In addition to the built-in route constraints, custom route constraints can be created by implementing the <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interface.</span></span> <span data-ttu-id="81cf5-550"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> Interfejs zawiera jedną metodę `Match`, co powoduje zwrócenie `true` Jeśli ograniczenie jest spełniony i `false` inaczej.</span><span class="sxs-lookup"><span data-stu-id="81cf5-550">The <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interface contains a single method, `Match`, which returns `true` if the constraint is satisfied and `false` otherwise.</span></span>

<span data-ttu-id="81cf5-551">Aby użyć niestandardowego <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>, typ ograniczenia trasy muszą być zarejestrowane w usłudze aplikacji <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> w kontenerze usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-551">To use a custom <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>, the route constraint type must be registered with the app's <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> in the app's service container.</span></span> <span data-ttu-id="81cf5-552">A <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> jest słownik, który mapy trasy klucze ograniczenia do <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> implementacji, które sprawdzają poprawność tych ograniczeń.</span><span class="sxs-lookup"><span data-stu-id="81cf5-552">A <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> is a dictionary that maps route constraint keys to <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> implementations that validate those constraints.</span></span> <span data-ttu-id="81cf5-553">Aplikacja <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> mogą być aktualizowane w `Startup.ConfigureServices` albo w ramach [usług. AddRouting](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) wywołania lub przez skonfigurowanie <xref:Microsoft.AspNetCore.Routing.RouteOptions> bezpośrednio z `services.Configure<RouteOptions>`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-553">An app's <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> can be updated in `Startup.ConfigureServices` either as part of a [services.AddRouting](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) call or by configuring <xref:Microsoft.AspNetCore.Routing.RouteOptions> directly with `services.Configure<RouteOptions>`.</span></span> <span data-ttu-id="81cf5-554">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="81cf5-554">For example:</span></span>

```csharp
services.AddRouting(options =>
{
    options.ConstraintMap.Add("customName", typeof(MyCustomConstraint));
});
```

<span data-ttu-id="81cf5-555">Ograniczenia mogą być następnie stosowane do trasy w zwykły sposób, przy użyciu nazwy określonej podczas rejestrowania typu ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="81cf5-555">The constraint can then be applied to routes in the usual manner, using the name specified when registering the constraint type.</span></span> <span data-ttu-id="81cf5-556">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="81cf5-556">For example:</span></span>

```csharp
[HttpGet("{id:customName}")]
public ActionResult<string> Get(string id)
```

::: moniker range=">= aspnetcore-2.2"

## <a name="parameter-transformer-reference"></a><span data-ttu-id="81cf5-557">Odwołania do parametru transformatora</span><span class="sxs-lookup"><span data-stu-id="81cf5-557">Parameter transformer reference</span></span>

<span data-ttu-id="81cf5-558">Parametr transformatory:</span><span class="sxs-lookup"><span data-stu-id="81cf5-558">Parameter transformers:</span></span>

* <span data-ttu-id="81cf5-559">Wykonania podczas generowania łącza dla <xref:Microsoft.AspNetCore.Routing.Route>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-559">Execute when generating a link for a <xref:Microsoft.AspNetCore.Routing.Route>.</span></span>
* <span data-ttu-id="81cf5-560">Implementowanie `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-560">Implement `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span></span>
* <span data-ttu-id="81cf5-561">Zostały skonfigurowane za pomocą <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-561">Are configured using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span></span>
* <span data-ttu-id="81cf5-562">Pobrać parametru, wartości trasy i przekształć go w nową wartość ciągu.</span><span class="sxs-lookup"><span data-stu-id="81cf5-562">Take the parameter's route value and transform it to a new string value.</span></span>
* <span data-ttu-id="81cf5-563">Wynikiem przy użyciu wartości przekształcone w wygenerowane łącze.</span><span class="sxs-lookup"><span data-stu-id="81cf5-563">Result in using the transformed value in the generated link.</span></span>

<span data-ttu-id="81cf5-564">Na przykład niestandardowy `slugify` transformatora parametr we wzorcu trasy `blog\{article:slugify}` z `Url.Action(new { article = "MyTestArticle" })` generuje `blog\my-test-article`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-564">For example, a custom `slugify` parameter transformer in route pattern `blog\{article:slugify}` with `Url.Action(new { article = "MyTestArticle" })` generates `blog\my-test-article`.</span></span>

<span data-ttu-id="81cf5-565">Aby użyć transformatora parametr we wzorcu trasy, jest skonfigurowana najpierw za pomocą <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> w `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="81cf5-565">To use a parameter transformer in a route pattern, configure it first using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddRouting(options =>
{
    // Replace the type and the name used to refer to it with your own
    // IOutboundParameterTransformer implementation
    options.ConstraintMap["slugify"] = typeof(SlugifyParameterTransformer);
});
```

<span data-ttu-id="81cf5-566">Parametr transformatory są używane przez platformę do przekształcania identyfikatora URI, gdzie jest rozpoznawany jako punkt końcowy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-566">Parameter transformers are used by the framework to transform the URI where an endpoint resolves.</span></span> <span data-ttu-id="81cf5-567">Na przykład ASP.NET Core MVC używa parametru transformatory do przekształcania wartości trasy, używany do dopasowywania `area`, `controller`, `action`, i `page`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-567">For example, ASP.NET Core MVC uses parameter transformers to transform the route value used to match an `area`, `controller`, `action`, and `page`.</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller:slugify=Home}/{action:slugify=Index}/{id?}");
```

<span data-ttu-id="81cf5-568">Trasa poprzedniej akcji `SubscriptionManagementController.GetAll()` jest dopasowany do identyfikatora URI `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-568">With the preceding route, the action `SubscriptionManagementController.GetAll()` is matched with the URI `/subscription-management/get-all`.</span></span> <span data-ttu-id="81cf5-569">Transformer parametru nie zmienia wartości trasy, używanego do generowania łącza.</span><span class="sxs-lookup"><span data-stu-id="81cf5-569">A parameter transformer doesn't change the route values used to generate a link.</span></span> <span data-ttu-id="81cf5-570">Na przykład `Url.Action("GetAll", "SubscriptionManagement")` generuje `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-570">For example, `Url.Action("GetAll", "SubscriptionManagement")` outputs `/subscription-management/get-all`.</span></span>

<span data-ttu-id="81cf5-571">ASP.NET Core zawiera konwencje interfejsu API transformatory parametru przy użyciu wygenerowanego trasy:</span><span class="sxs-lookup"><span data-stu-id="81cf5-571">ASP.NET Core provides API conventions for using a parameter transformers with generated routes:</span></span>

* <span data-ttu-id="81cf5-572">ASP.NET Core MVC ma `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` Konwencji interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="81cf5-572">ASP.NET Core MVC has the `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` API convention.</span></span> <span data-ttu-id="81cf5-573">Ta Konwencja dotyczy transformatora określony parametr wszystkich tras atrybutów w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="81cf5-573">This convention applies a specified parameter transformer to all attribute routes in the app.</span></span> <span data-ttu-id="81cf5-574">Transformer parametr przekształca tokeny trasy atrybutu, ponieważ zostaną zastąpione.</span><span class="sxs-lookup"><span data-stu-id="81cf5-574">The parameter transformer transforms attribute route tokens as they are replaced.</span></span> <span data-ttu-id="81cf5-575">Aby uzyskać więcej informacji, zobacz [Użyj transformatora parametru, aby dostosować zastępowania tokenu](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span><span class="sxs-lookup"><span data-stu-id="81cf5-575">For more information, see [Use a parameter transformer to customize token replacement](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span></span>
* <span data-ttu-id="81cf5-576">Strony razor ma `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` Konwencji interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="81cf5-576">Razor Pages has the `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` API convention.</span></span> <span data-ttu-id="81cf5-577">Ta Konwencja dotyczy transformatora określony parametr wszystkie automatycznie odnalezione stron Razor.</span><span class="sxs-lookup"><span data-stu-id="81cf5-577">This convention applies a specified parameter transformer to all automatically discovered Razor Pages.</span></span> <span data-ttu-id="81cf5-578">Transformer parametr przekształca folderu i pliku segmentów nazwy tras stron Razor.</span><span class="sxs-lookup"><span data-stu-id="81cf5-578">The parameter transformer transforms the folder and file name segments of Razor Pages routes.</span></span> <span data-ttu-id="81cf5-579">Aby uzyskać więcej informacji, zobacz [Użyj transformatora parametru, aby dostosować stronę trasy](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span><span class="sxs-lookup"><span data-stu-id="81cf5-579">For more information, see [Use a parameter transformer to customize page routes](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span></span>

::: moniker-end

## <a name="url-generation-reference"></a><span data-ttu-id="81cf5-580">Odwołanie do generowania adresu URL</span><span class="sxs-lookup"><span data-stu-id="81cf5-580">URL generation reference</span></span>

<span data-ttu-id="81cf5-581">Poniższy przykład pokazuje, jak wygenerować łącze do trasy, biorąc pod uwagę słownika wartości trasy i <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span><span class="sxs-lookup"><span data-stu-id="81cf5-581">The following example shows how to generate a link to a route given a dictionary of route values and a <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span></span>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

<span data-ttu-id="81cf5-582"><xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> Generowane na końcu poprzedniego przykładowe dane stanowią `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-582">The <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> generated at the end of the preceding sample is `/package/create/123`.</span></span> <span data-ttu-id="81cf5-583">Słownik dostarcza `operation` i `id` wartości szablonu "Śledzenie trasy pakietu" trasy `package/{operation}/{id}`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-583">The dictionary supplies the `operation` and `id` route values of the "Track Package Route" template, `package/{operation}/{id}`.</span></span> <span data-ttu-id="81cf5-584">Aby uzyskać szczegółowe informacje, zobacz przykładowy kod [użycia routingu w oprogramowaniu pośredniczącym](#use-routing-middleware) sekcji lub [przykładową aplikację](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span><span class="sxs-lookup"><span data-stu-id="81cf5-584">For details, see the sample code in the [Use Routing Middleware](#use-routing-middleware) section or the [sample app](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span></span>

<span data-ttu-id="81cf5-585">Drugi parametr <xref:Microsoft.AspNetCore.Routing.VirtualPathContext> Konstruktor jest kolekcją *otoczenia wartości*.</span><span class="sxs-lookup"><span data-stu-id="81cf5-585">The second parameter to the <xref:Microsoft.AspNetCore.Routing.VirtualPathContext> constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="81cf5-586">Otoczenia wartości są łatwe w użyciu, ponieważ ich Ogranicz liczbę wartości, które Deweloper należy określić w ramach kontekstu żądania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-586">Ambient values are convenient to use because they limit the number of values a developer must specify within a request context.</span></span> <span data-ttu-id="81cf5-587">Bieżące wartości trasy, bieżącego żądania są traktowane jako wartości otoczenia dotyczącymi generowania łączy.</span><span class="sxs-lookup"><span data-stu-id="81cf5-587">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="81cf5-588">W aplikacji ASP.NET Core MVC `About` akcji `HomeController`, nie musisz określić wartość trasy kontrolera, aby połączyć `Index` akcji&mdash;otoczenia wartość `Home` jest używany.</span><span class="sxs-lookup"><span data-stu-id="81cf5-588">In an ASP.NET Core MVC app's `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action&mdash;the ambient value of `Home` is used.</span></span>

<span data-ttu-id="81cf5-589">Otoczenia wartości, które nie jest zgodny z parametrem są ignorowane.</span><span class="sxs-lookup"><span data-stu-id="81cf5-589">Ambient values that don't match a parameter are ignored.</span></span> <span data-ttu-id="81cf5-590">Otoczenia wartości również są ignorowane, gdy jawnie podana jest wartość zastępuje wartość otoczenia.</span><span class="sxs-lookup"><span data-stu-id="81cf5-590">Ambient values are also ignored when an explicitly provided value overrides the ambient value.</span></span> <span data-ttu-id="81cf5-591">Dopasowywanie występuje od lewej do prawej w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="81cf5-591">Matching occurs from left to right in the URL.</span></span>

<span data-ttu-id="81cf5-592">Wartości podane jawnie, ale nie są zgodne segment trasy są dodawane do ciągu zapytania.</span><span class="sxs-lookup"><span data-stu-id="81cf5-592">Values explicitly provided but that don't match a segment of the route are added to the query string.</span></span> <span data-ttu-id="81cf5-593">W poniższej tabeli przedstawiono wyniki, korzystając z szablonu trasy `{controller}/{action}/{id?}`.</span><span class="sxs-lookup"><span data-stu-id="81cf5-593">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="81cf5-594">Wartości otoczenia</span><span class="sxs-lookup"><span data-stu-id="81cf5-594">Ambient Values</span></span>                     | <span data-ttu-id="81cf5-595">Jawne wartości</span><span class="sxs-lookup"><span data-stu-id="81cf5-595">Explicit Values</span></span>                        | <span data-ttu-id="81cf5-596">Wynik</span><span class="sxs-lookup"><span data-stu-id="81cf5-596">Result</span></span>                  |
| ---------------------------------- | -------------------------------------- | ----------------------- |
| <span data-ttu-id="81cf5-597">Kontroler = "Strona główna"</span><span class="sxs-lookup"><span data-stu-id="81cf5-597">controller = "Home"</span></span>                | <span data-ttu-id="81cf5-598">Akcja = "About"</span><span class="sxs-lookup"><span data-stu-id="81cf5-598">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="81cf5-599">Kontroler = "Strona główna"</span><span class="sxs-lookup"><span data-stu-id="81cf5-599">controller = "Home"</span></span>                | <span data-ttu-id="81cf5-600">Kontroler = "Order", Akcja = "About"</span><span class="sxs-lookup"><span data-stu-id="81cf5-600">controller = "Order", action = "About"</span></span> | `/Order/About`          |
| <span data-ttu-id="81cf5-601">Kontroler = "Home", color = "Red"</span><span class="sxs-lookup"><span data-stu-id="81cf5-601">controller = "Home", color = "Red"</span></span> | <span data-ttu-id="81cf5-602">Akcja = "About"</span><span class="sxs-lookup"><span data-stu-id="81cf5-602">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="81cf5-603">Kontroler = "Strona główna"</span><span class="sxs-lookup"><span data-stu-id="81cf5-603">controller = "Home"</span></span>                | <span data-ttu-id="81cf5-604">Akcja = "About" kolor = "Red"</span><span class="sxs-lookup"><span data-stu-id="81cf5-604">action = "About", color = "Red"</span></span>        | `/Home/About?color=Red` |

<span data-ttu-id="81cf5-605">Jeśli ta wartość nie zostanie podany wprost trasy ma wartość domyślną, która nie jest zgodny z parametrem, musi być zgodna wartość domyślna:</span><span class="sxs-lookup"><span data-stu-id="81cf5-605">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
    defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="81cf5-606">Generowanie konsolidacji tylko generuje link dla tej trasy podczas dopasowywania wartości `controller` i `action` są dostarczane.</span><span class="sxs-lookup"><span data-stu-id="81cf5-606">Link generation only generates a link for this route when the matching values for `controller` and `action` are provided.</span></span>

## <a name="complex-segments"></a><span data-ttu-id="81cf5-607">Złożone segmentów</span><span class="sxs-lookup"><span data-stu-id="81cf5-607">Complex segments</span></span>

<span data-ttu-id="81cf5-608">Złożone segmenty (na przykład `[Route("/x{token}y")]`) są przetwarzane przez dopasowanie się literały od prawej do lewej w sposób niezachłanne.</span><span class="sxs-lookup"><span data-stu-id="81cf5-608">Complex segments (for example `[Route("/x{token}y")]`) are processed by matching up literals from right to left in a non-greedy way.</span></span> <span data-ttu-id="81cf5-609">Zobacz [ten kod](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) Aby uzyskać szczegółowe informacje dotyczące złożonych segmentów są dopasowywane.</span><span class="sxs-lookup"><span data-stu-id="81cf5-609">See [this code](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) for a detailed explanation of how complex segments are matched.</span></span> <span data-ttu-id="81cf5-610">[Przykładowy kod](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) nie jest używany przez program ASP.NET Core, ale zapewnia dobre omówienie złożonych segmentów.</span><span class="sxs-lookup"><span data-stu-id="81cf5-610">The [code sample](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) is not used by ASP.NET Core, but it provides a good explanation of complex segments.</span></span>
<!-- While that code is no longer used by ASP.NET Core for complex segment matching, it provides a good match to the current algorithm. The [current code](https://github.com/aspnet/AspNetCore/blob/91514c9af7e0f4c44029b51f05a01c6fe4c96e4c/src/Http/Routing/src/Matching/DfaMatcherBuilder.cs#L227-L244) is too abstracted from matching to be useful for understanding complex segment matching.
-->
